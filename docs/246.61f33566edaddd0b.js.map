{"version":3,"file":"246.61f33566edaddd0b.js","mappings":"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","names":["TSplinePainter","ObjectPainter","updateObject","obj","opt","spline","this","getObject","_typename","Object","assign","undefined","decodeOptions","eval","knot","x","dx","fX","fY","fB","fC","fD","fE","fF","findX","klow","khig","fNp","fXmin","fXmax","fKstep","Math","round","fDelta","fPoly","max","khalf","createDummyHisto","xmin","xmax","ymin","ymax","forEach","min","gStyle","fHistTopMargin","histo","createHistogram","clTH1I","fName","fTitle","fBits","kNoStats","fXaxis","fYaxis","fMinimum","fMaximum","processTooltipEvent","pnt","funcs","getFramePainter","getGrFuncs","options","second_x","second_y","xx","yy","cleanup","indx","revertAxis","fN","abs","grx","knot_size","gbin","draw_g","selectChild","radius","lineatt","width","remove","empty","append","attr","style","call","func","res","name","title","y","gry","color1","color","lines","exact","changed","property","menu","menu_dist","sqrt","getObjectHint","push","axisAsText","floatToString","fStatFormat","redraw","pmain","w","getFrameWidth","h","getFrameHeight","createG","createAttLine","Line","Curve","npx","fNpx","bins","scale_xmin","scale_xmax","logx","log","n","exp","buildSvgCurve","Mark","path","createAttMarker","markeratt","resetPos","getFullSize","length","create","canZoomInside","axis","d","DrawOptions","has_main","getMainPainter","Same","check","Hopt","storeDrawOpt","draw","dom","_asyncToGenerator","painter","no_main","promise","Promise","resolve","console","warn","TH1Painter","then","addToPadPrimitives"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["../node_modules/jsroot/modules/draw/TSplinePainter.mjs"],"sourcesContent":["import { gStyle, clTH1I, kNoStats, createHistogram } from '../core.mjs';\nimport { DrawOptions, floatToString, buildSvgCurve } from '../base/BasePainter.mjs';\nimport { ObjectPainter } from '../base/ObjectPainter.mjs';\nimport { TH1Painter } from '../hist/TH1Painter.mjs';\n\n\n/**\n * @summary Painter for TSpline objects.\n *\n * @private\n */\n\nclass TSplinePainter extends ObjectPainter {\n\n   /** @summary Update TSpline object\n     * @private */\n   updateObject(obj, opt) {\n      const spline = this.getObject();\n\n      if (spline._typename !== obj._typename) return false;\n\n      if (spline !== obj) Object.assign(spline, obj);\n\n      if (opt !== undefined) this.decodeOptions(opt);\n\n      return true;\n   }\n\n   /** @summary Evaluate spline at given position\n     * @private */\n   eval(knot, x) {\n      const dx = x - knot.fX;\n\n      if (knot._typename === 'TSplinePoly3')\n         return knot.fY + dx*(knot.fB + dx*(knot.fC + dx*knot.fD));\n\n      if (knot._typename === 'TSplinePoly5')\n         return knot.fY + dx*(knot.fB + dx*(knot.fC + dx*(knot.fD + dx*(knot.fE + dx*knot.fF))));\n\n      return knot.fY + dx;\n   }\n\n   /** @summary Find idex for x value\n     * @private */\n   findX(x) {\n      const spline = this.getObject();\n      let klow = 0, khig = spline.fNp - 1;\n\n      if (x <= spline.fXmin) return 0;\n      if (x >= spline.fXmax) return khig;\n\n      if (spline.fKstep) {\n         // Equidistant knots, use histogramming\n         klow = Math.round((x - spline.fXmin)/spline.fDelta);\n         // Correction for rounding errors\n         if (x < spline.fPoly[klow].fX)\n            klow = Math.max(klow-1, 0);\n          else if (klow < khig)\n            if (x > spline.fPoly[klow+1].fX) ++klow;\n      } else {\n         // Non equidistant knots, binary search\n         while (khig - klow > 1) {\n            const khalf = Math.round((klow + khig)/2);\n            if (x > spline.fPoly[khalf].fX) klow = khalf;\n                                      else khig = khalf;\n         }\n      }\n      return klow;\n   }\n\n   /** @summary Create histogram for axes drawing\n     * @private */\n   createDummyHisto() {\n      const spline = this.getObject();\n      let xmin = 0, xmax = 1, ymin = 0, ymax = 1;\n\n      if (spline.fPoly) {\n         xmin = xmax = spline.fPoly[0].fX;\n         ymin = ymax = spline.fPoly[0].fY;\n\n         spline.fPoly.forEach(knot => {\n            xmin = Math.min(knot.fX, xmin);\n            xmax = Math.max(knot.fX, xmax);\n            ymin = Math.min(knot.fY, ymin);\n            ymax = Math.max(knot.fY, ymax);\n         });\n\n         if (ymax > 0) ymax *= (1 + gStyle.fHistTopMargin);\n         if (ymin < 0) ymin *= (1 + gStyle.fHistTopMargin);\n      }\n\n      const histo = createHistogram(clTH1I, 10);\n\n      histo.fName = spline.fName + '_hist';\n      histo.fTitle = spline.fTitle;\n      histo.fBits |= kNoStats;\n\n      histo.fXaxis.fXmin = xmin;\n      histo.fXaxis.fXmax = xmax;\n      histo.fYaxis.fXmin = ymin;\n      histo.fYaxis.fXmax = ymax;\n      histo.fMinimum = ymin;\n      histo.fMaximum = ymax;\n\n      return histo;\n   }\n\n   /** @summary Process tooltip event\n     * @private */\n   processTooltipEvent(pnt) {\n      const spline = this.getObject(),\n            funcs = this.getFramePainter()?.getGrFuncs(this.options.second_x, this.options.second_y);\n      let cleanup = false, xx, yy, knot = null, indx = 0;\n\n      if ((pnt === null) || !spline || !funcs)\n         cleanup = true;\n       else {\n         xx = funcs.revertAxis('x', pnt.x);\n         indx = this.findX(xx);\n         knot = spline.fPoly[indx];\n         yy = this.eval(knot, xx);\n\n         if ((indx < spline.fN-1) && (Math.abs(spline.fPoly[indx+1].fX-xx) < Math.abs(xx-knot.fX))) knot = spline.fPoly[++indx];\n\n         if (Math.abs(funcs.grx(knot.fX) - pnt.x) < 0.5*this.knot_size) {\n            xx = knot.fX; yy = knot.fY;\n         } else {\n            knot = null;\n            if ((xx < spline.fXmin) || (xx > spline.fXmax)) cleanup = true;\n         }\n      }\n\n      let gbin = this.draw_g?.selectChild('.tooltip_bin');\n      const radius = this.lineatt.width + 3;\n\n      if (cleanup || !this.draw_g) {\n         gbin?.remove();\n         return null;\n      }\n\n      if (gbin.empty()) {\n         gbin = this.draw_g.append('svg:circle')\n                           .attr('class', 'tooltip_bin')\n                           .style('pointer-events', 'none')\n                           .attr('r', radius)\n                           .style('fill', 'none')\n                           .call(this.lineatt.func);\n      }\n\n      const res = { name: this.getObject().fName,\n                  title: this.getObject().fTitle,\n                  x: funcs.grx(xx),\n                  y: funcs.gry(yy),\n                  color1: this.lineatt.color,\n                  lines: [],\n                  exact: (knot !== null) || (Math.abs(funcs.gry(yy) - pnt.y) < radius) };\n\n      res.changed = gbin.property('current_xx') !== xx;\n      res.menu = res.exact;\n      res.menu_dist = Math.sqrt((res.x-pnt.x)**2 + (res.y-pnt.y)**2);\n\n      if (res.changed) {\n         gbin.attr('cx', Math.round(res.x))\n             .attr('cy', Math.round(res.y))\n             .property('current_xx', xx);\n      }\n\n      const name = this.getObjectHint();\n      if (name) res.lines.push(name);\n      res.lines.push(`x = ${funcs.axisAsText('x', xx)}`,\n                     `y = ${funcs.axisAsText('y', yy)}`);\n      if (knot !== null) {\n         res.lines.push(`knot = ${indx}`,\n                        `B = ${floatToString(knot.fB, gStyle.fStatFormat)}`,\n                        `C = ${floatToString(knot.fC, gStyle.fStatFormat)}`,\n                        `D = ${floatToString(knot.fD, gStyle.fStatFormat)}`);\n         if ((knot.fE !== undefined) && (knot.fF !== undefined)) {\n            res.lines.push(`E = ${floatToString(knot.fE, gStyle.fStatFormat)}`,\n                           `F = ${floatToString(knot.fF, gStyle.fStatFormat)}`);\n         }\n      }\n\n      return res;\n   }\n\n   /** @summary Redraw object\n     * @private */\n   redraw() {\n      const spline = this.getObject(),\n          pmain = this.getFramePainter(),\n          funcs = pmain.getGrFuncs(this.options.second_x, this.options.second_y),\n          w = pmain.getFrameWidth(),\n          h = pmain.getFrameHeight();\n\n      this.createG(true);\n\n      this.knot_size = 5; // used in tooltip handling\n\n      this.createAttLine({ attr: spline });\n\n      if (this.options.Line || this.options.Curve) {\n         const npx = Math.max(10, spline.fNpx), bins = []; // index of current knot\n         let xmin = Math.max(funcs.scale_xmin, spline.fXmin),\n             xmax = Math.min(funcs.scale_xmax, spline.fXmax),\n             indx = this.findX(xmin);\n\n         if (pmain.logx) {\n            xmin = Math.log(xmin);\n            xmax = Math.log(xmax);\n         }\n\n         for (let n = 0; n < npx; ++n) {\n            let x = xmin + (xmax-xmin)/npx*(n-1);\n            if (pmain.logx) x = Math.exp(x);\n\n            while ((indx < spline.fNp-1) && (x > spline.fPoly[indx+1].fX)) ++indx;\n\n            const y = this.eval(spline.fPoly[indx], x);\n\n            bins.push({ x, y, grx: funcs.grx(x), gry: funcs.gry(y) });\n         }\n\n         this.draw_g.append('svg:path')\n             .attr('class', 'line')\n             .attr('d', buildSvgCurve(bins))\n             .style('fill', 'none')\n             .call(this.lineatt.func);\n      }\n\n      if (this.options.Mark) {\n         // for tooltips use markers only if nodes where not created\n         let path = '';\n\n         this.createAttMarker({ attr: spline });\n\n         this.markeratt.resetPos();\n\n         this.knot_size = this.markeratt.getFullSize();\n\n         for (let n = 0; n < spline.fPoly.length; n++) {\n            const knot = spline.fPoly[n],\n                grx = funcs.grx(knot.fX);\n            if ((grx > -this.knot_size) && (grx < w + this.knot_size)) {\n               const gry = funcs.gry(knot.fY);\n               if ((gry > -this.knot_size) && (gry < h + this.knot_size))\n                  path += this.markeratt.create(grx, gry);\n            }\n         }\n\n         if (path) {\n            this.draw_g.append('svg:path')\n                       .attr('d', path)\n                       .call(this.markeratt.func);\n         }\n      }\n   }\n\n   /** @summary Checks if it makes sense to zoom inside specified axis range */\n   canZoomInside(axis /* , min, max */) {\n      if (axis !== 'x') return false;\n\n      // spline can always be calculated and therefore one can zoom inside\n      return !!this.getObject();\n   }\n\n   /** @summary Decode options for TSpline drawing */\n   decodeOptions(opt) {\n      const d = new DrawOptions(opt);\n\n      if (!this.options) this.options = {};\n\n      const has_main = !!this.getMainPainter();\n\n      Object.assign(this.options, {\n         Same: d.check('SAME'),\n         Line: d.check('L'),\n         Curve: d.check('C'),\n         Mark: d.check('P'),\n         Hopt: '',\n         second_x: false,\n         second_y: false\n      });\n\n      if (!this.options.Line && !this.options.Curve && !this.options.Mark)\n         this.options.Curve = true;\n\n      if (d.check('X+')) { this.options.Hopt += 'X+'; this.options.second_x = has_main; }\n      if (d.check('Y+')) { this.options.Hopt += 'Y+'; this.options.second_y = has_main; }\n\n      this.storeDrawOpt(opt);\n   }\n\n   /** @summary Draw TSpline */\n   static async draw(dom, spline, opt) {\n      const painter = new TSplinePainter(dom, spline);\n      painter.decodeOptions(opt);\n\n      const no_main = !painter.getMainPainter();\n      let promise = Promise.resolve();\n      if (no_main || painter.options.second_x || painter.options.second_y) {\n         if (painter.options.Same && no_main) {\n            console.warn('TSpline painter requires histogram to be drawn');\n            return null;\n         }\n         const histo = painter.createDummyHisto();\n         promise = TH1Painter.draw(dom, histo, painter.options.Hopt);\n      }\n\n      return promise.then(() => {\n         painter.addToPadPrimitives();\n         painter.redraw();\n         return painter;\n      });\n   }\n\n} // class TSplinePainter\n\nexport { TSplinePainter };\n"],"x_google_ignoreList":[0]}