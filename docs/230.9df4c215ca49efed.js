"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[230],{4230:(b,T,h)=>{h.r(T),h.d(T,{TRatioPlotPainter:()=>z});var E=h(4788),p=h(9542),w=h(6458),X=h(49),L=h(4971);class z extends w.tK{setGridsRange(a,e){let l=this.getObject();if(a===e){let o=this.getPadPainter()?.findPainterFor(l.fLowerPad,"lower_pad",p.clTPad)?.getFramePainter()?.x_handle;if(!o)return;a=o.full_min,e=o.full_max}l.fGridlines.forEach(o=>{o.fX1=a,o.fX2=e})}redraw(){var a=this;return(0,E.Z)(function*(){let e=a.getObject(),l=a.getPadPainter(),o=l.findPainterFor(e.fTopPad,"top_pad",p.clTPad);o&&o.disablePadDrawing();let f=l.findPainterFor(e.fUpperPad,"upper_pad",p.clTPad),c=f?.getMainPainter(),i=f?.getFramePainter(),u=l.findPainterFor(e.fLowerPad,"lower_pad",p.clTPad),C=u?.getMainPainter(),r=u?.getFramePainter(),_=20,D=Promise.resolve(!0);if(f&&c&&i&&r&&!f._ratio_configured){f._ratio_configured=!0,c.options.Axis=0,_=c.getHisto().fYaxis.fLabelSize,_<1&&(_=Math.round(_*Math.min(f.getPadWidth(),f.getPadHeight())));let s=c.getHisto();s.fXaxis.fLabelSize=0,s.fXaxis.fTitle="",s.fYaxis.fLabelSize=_,s.fYaxis.fTitleSize=_,f.getRootPad().fTicky=1,D=f.redrawPad().then(()=>(i.o_zoom=i.zoom,i._ratio_low_fp=r,i._ratio_painter=a,i.zoom=function(P,g,n,d,t,m){return this._ratio_painter.setGridsRange(P,g),this._ratio_low_fp.o_zoom(P,g),this.o_zoom(P,g,n,d,t,m)},i.o_sizeChanged=i.sizeChanged,i.sizeChanged=function(){this.o_sizeChanged(),this._ratio_low_fp.fX1NDC=this.fX1NDC,this._ratio_low_fp.fX2NDC=this.fX2NDC,this._ratio_low_fp.o_sizeChanged()},!0))}return D.then(()=>{if(!u||!C||!r||!i||u._ratio_configured)return a;u._ratio_configured=!0,C.options.Axis=0;let s=C.getHisto();s.fXaxis.fTitle="x",s.fXaxis.fLabelSize=_,s.fXaxis.fTitleSize=_,s.fYaxis.fLabelSize=_,s.fYaxis.fTitleSize=_,u.getRootPad().fTicky=1,u.forEachPainterInPad(n=>{(0,p.isFunc)(n?.testEditable)&&n.testEditable(!1)});let g,P=[];return e.fGridlinePositions.length>0&&e.fGridlines.length<e.fGridlinePositions.length&&e.fGridlinePositions.forEach(n=>{let d=!1;if(e.fGridlines.forEach(t=>{t.fY1==t.fY2&&Math.abs(t.fY1-n)<1e-6&&(d=!0)}),!d){let t=(0,p.create)(p.clTLine);t.fX1=i.scale_xmin,t.fX2=i.scale_xmax,t.fY1=t.fY2=n,t.fLineStyle=2,e.fGridlines.push(t),void 0===g&&(g=a.selectCurrentPad(e.fLowerPad.fName)),P.push((0,L.drawTLine)(a.getDom(),t))}}),Promise.all(P).then(()=>r.zoom(i.scale_xmin,i.scale_xmax)).then(()=>(r.o_zoom=r.zoom,r._ratio_up_fp=i,r._ratio_painter=a,r.zoom=function(n,d,t,m,M,O){return this._ratio_painter.setGridsRange(n,d),this._ratio_up_fp.o_zoom(n,d),this.o_zoom(n,d,t,m,M,O)},r.o_sizeChanged=r.sizeChanged,r.sizeChanged=function(){this.o_sizeChanged(),this._ratio_up_fp.fX1NDC=this.fX1NDC,this._ratio_up_fp.fX2NDC=this.fX2NDC,this._ratio_up_fp.o_sizeChanged()},a))})})()}static draw(a,e,l){return(0,E.Z)(function*(){let o=new z(a,e,l);return(0,X.ensureTCanvas)(o,!1).then(()=>o.redraw())})()}}}}]);
//# sourceMappingURL=230.9df4c215ca49efed.js.map