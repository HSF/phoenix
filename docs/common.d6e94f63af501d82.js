"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[592],{3083:(Y,S,u)=>{u.d(S,{Y:()=>I});var C=u(5368),O=u(1515),F=u(1773),R=u(6772);function I(){return z.apply(this,arguments)}function z(){return(z=(0,C.Z)(function*(){let a=this.$fp||this.getFramePainter();if(delete this.$fp,!((0,F.isObject)(a)&&a.grx&&a.gry&&a.grz))return this;let A=this.getObject(),c=1,r=0,h=A.fP;for(let o=0;o<h.length;o+=3)h[o]<a.scale_xmin||h[o]>a.scale_xmax||h[o+1]<a.scale_ymin||h[o+1]>a.scale_ymax||h[o+2]<a.scale_zmin||h[o+2]>a.scale_zmax||++r;F.settings.OptimizeDraw>0&&r>5e4&&(c=Math.floor(r/5e4),c<=2&&(c=2));let i=Math.floor(r/c),l=new R.B_(i,a.webgl,a.size_x3d/100),s=new Int32Array(i),f=0,M=0;for(let o=0;o<h.length;o+=3)h[o]<a.scale_xmin||h[o]>a.scale_xmax||h[o+1]<a.scale_ymin||h[o+1]>a.scale_ymax||h[o+2]<a.scale_zmin||h[o+2]>a.scale_zmax||c>1&&(f=(f+1)%c,0!==f)||(s[M++]=o,l.addPoint(a.grx(h[o]),a.gry(h[o+1]),a.grz(h[o+2])));return l.createPoints({color:this.getColor(A.fMarkerColor),style:A.fMarkerStyle}).then(o=>(o.tip_color=3===A.fMarkerColor?16711680:65280,o.tip_name=A.fName||"Poly3D",o.poly=A,o.painter=a,o.scale0=.7*l.scale,o.index=s,a.toplevel.add(o),o.tooltip=function(D){if(!Number.isInteger(D.index))return console.error(`intersect.index not provided, three.js version ${O.UZH}`),null;let T=Math.floor(D.index/this.nvertex);if(T<0||T>=this.index.length)return null;T=this.index[T];let t=this.painter,_=t.grx(this.poly.fP[T]),g=t.gry(this.poly.fP[T+1]),x=t.grz(this.poly.fP[T+2]);return{x1:_-this.scale0,x2:_+this.scale0,y1:g-this.scale0,y2:g+this.scale0,z1:x-this.scale0,z2:x+this.scale0,color:this.tip_color,lines:[this.tip_name,"pnt: "+T/3,"x: "+t.axisAsText("x",this.poly.fP[T]),"y: "+t.axisAsText("y",this.poly.fP[T+1]),"z: "+t.axisAsText("z",this.poly.fP[T+2])]}},a.render3D(100),this))})).apply(this,arguments)}},6898:(Y,S,u)=>{u.r(S),u.d(S,{drawBox:()=>M,drawEllipse:()=>s,drawJSImage:()=>T,drawMarker:()=>o,drawPie:()=>f,drawPolyLine:()=>l,drawPolyMarker:()=>D,drawTLine:()=>h,drawText:()=>e});var C=u(5368),O=u(1773),F=u(2912),R=u(5611),I=u(2454),z=u(9615),a=u(1671),A=u(1518),c=u(7222);function e(){return r.apply(this,arguments)}function r(){return(r=(0,C.Z)(function*(){let t=this.getObject(),_=this.getPadPainter(),g=_.getPadWidth(),x=_.getPadHeight(),n=t.fX,m=t.fY,d=this.getColor(t.fTextColor),P=!1,v=1,E=t.fTextSize||.05,y=this.getFramePainter();t.TestBit((0,O.BIT)(14))?this.isndc=!0:y&&!y.mode3d?(g=y.getFrameWidth(),x=y.getFrameHeight(),P="upper_layer"):_.getRootPad(!0)||(this.isndc=!0,n=m=.5,t.fTextAlign=22,d||(d="black")),this.createG(P),this.draw_g.attr("transform",null),this.pos_x=this.axisToSvg("x",n,this.isndc),this.pos_y=this.axisToSvg("y",m,this.isndc);let p={align:t.fTextAlign,x:this.pos_x,y:this.pos_y,text:t.fTitle,color:d,latex:0};return t.fTextAngle&&(p.rotate=-t.fTextAngle),t._typename==O.clTLatex?(p.latex=1,v=.9):t._typename==O.clTMathText&&(p.latex=2,v=.8),this.startTextDrawing(t.fTextFont,Math.round(E>1?E:E*Math.min(g,x)*v)),this.drawText(p),this.finishTextDrawing().then(()=>((0,O.isBatchMode)()||(this.pos_dx=this.pos_dy=0,this.moveDrag||(this.moveDrag=function(b,$){this.pos_dx+=b,this.pos_dy+=$,this.draw_g.attr("transform",`translate(${this.pos_dx},${this.pos_dy})`)}),this.moveEnd||(this.moveEnd=function(b){if(b)return;let $=this.getObject();$.fX=this.svgToAxis("x",this.pos_x+this.pos_dx,this.isndc),$.fY=this.svgToAxis("y",this.pos_y+this.pos_dy,this.isndc),this.submitCanvExec(`SetX(${$.fX});;SetY(${$.fY});;`)}),(0,c.Z)(this)),this))})).apply(this,arguments)}function h(t,_){return i.apply(this,arguments)}function i(){return(i=(0,C.Z)(function*(t,_){let g=new I.tK(t,_);return g.redraw=function(){const x=(0,O.BIT)(14),n=this.getObject(),m=new a.rE(n),d=n.TestBit(x);return this.createG(),this.draw_g.append("svg:path").attr("d",`M${this.axisToSvg("x",n.fX1,d)},${this.axisToSvg("y",n.fY1,d)}L${this.axisToSvg("x",n.fX2,d)},${this.axisToSvg("y",n.fY2,d)}`).call(m.func),this},(0,A.ensureTCanvas)(g,!1).then(()=>g.redraw())})).apply(this,arguments)}function l(){this.createG();let t=this.getObject(),_=new a.rE(t),g=this.createAttFill(t),x=(0,O.BIT)(14),n=t.TestBit(x),m="",d=this.getAxisToSvgFunc(n);for(let P=0;P<=t.fLastPoint;++P)m+=`${P>0?"L":"M"}${d.x(t.fX[P])},${d.y(t.fY[P])}`;t._typename!=O.clTPolyLine&&g.setSolidColor("none"),g.empty()||(m+="Z"),this.draw_g.append("svg:path").attr("d",m).call(_.func).call(g.func)}function s(){let t=this.getObject();this.createAttLine({attr:t}),this.createAttFill({attr:t}),this.createG();let _=this.getAxisToSvgFunc(),g=_.x(t.fX1),x=_.y(t.fY1),n=_.x(t.fX1+t.fR1)-g,m=x-_.y(t.fY1+t.fR2),d="",P=0==t.fPhimin&&360==t.fPhimax;if("TCrown"==t._typename&&t.fR1<=0&&(n=_.x(t.fX1+t.fR2)-g),"TCrown"==t._typename&&t.fR1>0){let v=n,E=m,y=x-_.y(t.fY1+t.fR1),p=_.x(t.fX1+t.fR2)-g;if(P)d=`M${-v},0A${v},${y},0,1,0,${v},0A${v},${y},0,1,0,${-v},0M${-p},0A${p},${E},0,1,0,${p},0A${p},${E},0,1,0,${-p},0`;else{let b=t.fPhimax-t.fPhimin>=180?1:0,$=t.fPhimin*Math.PI/180,w=t.fPhimax*Math.PI/180,B=Math.round(v*Math.cos($)),L=Math.round(y*Math.sin($));d=`M${Math.round(v*Math.cos(w))},${Math.round(y*Math.sin(w))}A${v},${y},0,${b},0,${B},${L}L${Math.round(p*Math.cos($))},${Math.round(E*Math.sin($))}A${p},${E},0,${b},1,${Math.round(p*Math.cos(w))},${Math.round(E*Math.sin(w))}Z`}}else if(0==t.fTheta)d=P?`M${-n},0A${n},${m},0,1,0,${n},0A${n},${m},0,1,0,${-n},0Z`:`M0,0L${Math.round(n*Math.cos(t.fPhimin*Math.PI/180))},${Math.round(m*Math.sin(t.fPhimin*Math.PI/180))}A${n},${m},0,1,1,${Math.round(n*Math.cos(t.fPhimax*Math.PI/180))},${Math.round(m*Math.sin(t.fPhimax*Math.PI/180))}Z`;else{let v=Math.cos(t.fTheta*Math.PI/180),E=Math.sin(t.fTheta*Math.PI/180),y=t.fPhimin*Math.PI/180,b=200,$=(t.fPhimax*Math.PI/180-y)/(b-(P?0:1)),w=0,B=0;P||(d="M0,0");for(let L=0;L<b;++L){let K=y+L*$,U=t.fR1*Math.cos(K),W=t.fR2*Math.sin(K),X=_.x(t.fX1+U*v-W*E)-g,j=_.y(t.fY1+U*E+W*v)-x;d?d+=w==X?"v"+(j-B):B==j?"h"+(X-w):`l${X-w},${j-B}`:d=`M${X},${j}`,w=X,B=j}d+="Z"}this.draw_g.append("svg:path").attr("transform",`translate(${g},${x})`).attr("d",d).call(this.lineatt.func).call(this.fillatt.func)}function f(){let t=this.getObject();this.createG();let _=this.axisToSvg("x",t.fX),g=this.axisToSvg("y",t.fY),x=this.axisToSvg("x",t.fX+t.fRadius)-_,n=this.axisToSvg("y",t.fY+t.fRadius)-g;this.draw_g.attr("transform",`translate(${_},${g})`);let m=t.fPieSlices.length,d=0,P=t.fAngularOffset*Math.PI/180,v=Math.round(x*Math.cos(P)),E=Math.round(n*Math.sin(P));for(let y=0;y<m;y++)d+=t.fPieSlices[y].fValue;for(let y=0;y<m;y++){let p=t.fPieSlices[y],b=new a.rE({attr:p}),$=this.createAttFill(p);P+=p.fValue/d*2*Math.PI;let w=Math.round(x*Math.cos(P)),B=Math.round(n*Math.sin(P));this.draw_g.append("svg:path").attr("d",`M0,0L${v},${E}A${x},${n},0,0,0,${w},${B}z`).call(b.func).call($.func),v=w,E=B}}function M(){let t=this.getObject(),g=this.getDrawOpt().toUpperCase().indexOf("L")>=0,x=this.createAttLine(t),n=this.createAttFill(t);this.createG();let m=this.axisToSvg("x",t.fX1),d=this.axisToSvg("x",t.fX2),P=this.axisToSvg("y",t.fY1),v=this.axisToSvg("y",t.fY2),E=Math.min(m,d),y=Math.min(P,v),p=Math.abs(d-m),b=Math.abs(P-v);if(!n.empty()&&!g&&(x.color="none"),this.draw_g.append("svg:path").attr("d",`M${E},${y}h${p}v${b}h${-p}z`).call(x.func).call(n.func),t.fBorderMode&&t.fBorderSize&&n.hasColor()){let $=t.fBorderSize,w=t.fBorderSize,B=`M${E},${y}h${p}l${-$},${w}h${2*$-p}v${b-2*w}l${-$},${w}z`,L=`M${E+p},${y+b}v${-b}l${-$},${w}v${b-2*w}h${2*$-p}l${-$},${w}z`;if(t.fBorderMode<0){let K=B;B=L,L=K}this.draw_g.append("svg:path").attr("d",B).call(n.func).style("fill",(0,F.B8)(n.color).brighter(.5).formatHex()),this.draw_g.append("svg:path").attr("d",L).call(n.func).style("fill",(0,F.B8)(n.color).darker(.5).formatHex())}}function o(){const t=this.getObject(),_=new z.M(t),g=(0,O.BIT)(14),x=t.TestBit(g);this.createG();let n=this.axisToSvg("x",t.fX,x),m=this.axisToSvg("y",t.fY,x),d=_.create(n,m);d&&this.draw_g.append("svg:path").attr("d",d).call(_.func)}function D(){this.createG();let t=this.getObject(),_=new z.M(t),g="",x=this.getAxisToSvgFunc();for(let n=0;n<t.fN;++n)g+=_.create(x.x(t.fX[n]),x.y(t.fY[n]));g&&this.draw_g.append("svg:path").attr("d",g).call(_.func)}function T(t,_,g){let x=new R.be(t),n=x.selectDom(),m=n.append("img").attr("src",_.fName).attr("title",_.fTitle||_.fName);return g&&g.indexOf("scale")>=0?m.style("width","100%").style("height","100%"):g&&g.indexOf("center")>=0&&(n.style("position","relative"),m.attr("style","margin: 0; position: absolute;  top: 50%; left: 50%; transform: translate(-50%, -50%);")),x.setTopPainter(),x}},1827:(Y,S,u)=>{u.r(S),u.d(S,{TF1Painter:()=>A,proivdeEvalPar:()=>a});var C=u(5368),O=u(1773),F=u(5611),R=u(2454),I=u(9608),z=u(7553);function a(c){c._math=z;let e=c.fTitle,r=!1,h="[";"gaus"===e&&(e="gaus(0)"),c.fFormula&&(0,O.isStr)(c.fFormula.fFormula)&&(0==c.fFormula.fFormula.indexOf("[](double*x,double*p)")?(r=!0,h="p[",e=c.fFormula.fFormula.slice(21)):(e=c.fFormula.fFormula,h="[p"),c.fFormula.fClingParameters&&c.fFormula.fParams&&c.fFormula.fParams.forEach(i=>{let l=new RegExp(`(\\[${i.first}\\])`,"g"),s=c.fFormula.fClingParameters[i.second];e=e.replace(l,s<0?`(${s})`:s)})),"formulas"in c&&c.formulas.forEach(i=>{e=e.replaceAll(i.fName,i.fTitle)}),e=e.replace(/\b(abs)\b/g,"TMath::Abs").replace(/\b(TMath::Exp)/g,"Math.exp").replace(/\b(TMath::Abs)/g,"Math.abs"),e=e.replace(/xygaus\(/g,"this._math.gausxy(this, x, y, ").replace(/gaus\(/g,"this._math.gaus(this, x, ").replace(/gausn\(/g,"this._math.gausn(this, x, ").replace(/expo\(/g,"this._math.expo(this, x, ").replace(/landau\(/g,"this._math.landau(this, x, ").replace(/landaun\(/g,"this._math.landaun(this, x, ").replace(/TMath::/g,"this._math.").replace(/ROOT::Math::/g,"this._math.");for(let i=0;i<c.fNpar;++i)e=e.replaceAll(h+i+"]",`(${c.GetParValue(i)})`);e=e.replace(/\b(sin)\b/gi,"Math.sin").replace(/\b(cos)\b/gi,"Math.cos").replace(/\b(tan)\b/gi,"Math.tan").replace(/\b(exp)\b/gi,"Math.exp").replace(/\b(pow)\b/gi,"Math.pow").replace(/pi/g,"Math.PI");for(let i=2;i<10;++i)e=e.replaceAll(`x^${i}`,`Math.pow(x,${i})`);r?(e=e.replace(/x\[0\]/g,"x"),c._typename===O.clTF2?(e=e.replace(/x\[1\]/g,"y"),c.evalPar=new Function("x","y",e).bind(c)):c.evalPar=new Function("x",e).bind(c)):c.evalPar=c._typename===O.clTF2?new Function("x","y","return "+e).bind(c):new Function("x","return "+e).bind(c)}class A extends R.tK{createBins(e){let r=this.getObject(),h=this.getFramePainter(),i=0,l=0;if(h&&!e){let x=h.getGrFuncs(this.second_x,this.second_y);i=x.scale_xmin,l=x.scale_xmax}let s=r.fXmin,f=r.fXmax,M=!1;i!==l&&(i>s&&(s=i),l<f&&(f=l)),h&&h.logx&&s>0&&f>0&&(M=!0,s=Math.log(s),f=Math.log(f));let o=Math.max(r.fNpx,101),D=(f-s)/(o-1),T=[],t=!1,_=r.fSave.length>3;if(!_||!e&&!O.settings.PreferSavedPoints){r.evalPar||a(r);for(let x=0;x<o;x++){let n=s+x*D,m=0;M&&(n=Math.exp(n));try{m=r.evalPar(n)}catch{t=!0}if(t)break;Number.isFinite(m)&&T.push({x:n,y:m})}}if((t||e||!T.length)&&_){o=r.fSave.length-2,s=r.fSave[o],f=r.fSave[o+1],T=[],D=0;let x=r.$histo&&s===f,n=0;x?(s=r.fSave[--o],n=r.$histo.fXaxis.FindBin(s,0)):D=(f-s)/(o-1);for(let m=0;m<o;++m){let d=x?r.$histo.fXaxis.GetBinCenter(n+m+1):s+D*m;if(i!==l&&(d+2*D<i||d-2*D>l))continue;let P=r.fSave[m];Number.isFinite(P)&&T.push({x:d,y:P})}}return T}createDummyHisto(){let e=0,r=1,h=0,i=1,l=this.createBins(!0);l?.length&&(e=r=l[0].x,h=i=l[0].y,l.forEach(M=>{e=Math.min(M.x,e),r=Math.max(M.x,r),h=Math.min(M.y,h),i=Math.max(M.y,i)}),i>0&&(i*=1+O.gStyle.fHistTopMargin),h<0&&(h*=1+O.gStyle.fHistTopMargin));let s=(0,O.create)("TH1I"),f=this.getObject();return s.fName=f.fName+"_hist",s.fTitle=f.fTitle,s.fXaxis.fXmin=e,s.fXaxis.fXmax=r,s.fYaxis.fXmin=h,s.fYaxis.fXmax=i,s.fMinimum=f.fMinimum,s.fMaximum=f.fMaximum,s}updateObject(e){if(!this.matchObjectType(e))return!1;let r=this.getObject();return Object.assign(r,e),delete r.evalPar,!0}processTooltipEvent(e){let r=!1;if((!e||!this.bins||e.disabled||!this.bins.length||e.x<this.bins[0].grx||e.x>this.bins[this.bins.length-1].grx)&&(r=!0),r)return this.draw_g&&this.draw_g.select(".tooltip_bin").remove(),null;let l,h=1e5,i=-1;for(let t=0;t<this.bins.length;++t){l=this.bins[t];let _=Math.abs(l.grx-e.x);_<h&&(h=_,i=t)}l=this.bins[i];let s=this.draw_g.select(".tooltip_bin"),f=this.lineatt.width+3;s.empty()&&(s=this.draw_g.append("svg:circle").attr("class","tooltip_bin").style("pointer-events","none").attr("r",f).call(this.lineatt.func).call(this.fillatt.func));let M={name:this.getObject().fName,title:this.getObject().fTitle,x:l.grx,y:l.gry,color1:this.lineatt.color,color2:this.fillatt.getFillColor(),lines:[],exact:Math.abs(l.grx-e.x)<f&&Math.abs(l.gry-e.y)<f};M.changed=s.property("current_bin")!==i,M.menu=M.exact,M.menu_dist=Math.sqrt((l.grx-e.x)**2+(l.gry-e.y)**2),M.changed&&s.attr("cx",l.grx).attr("cy",l.gry).property("current_bin",i);let o=this.getObjectHint();o&&M.lines.push(o);let T=this.getFramePainter()?.getGrFuncs(this.second_x,this.second_y);return T&&M.lines.push(`x = ${T.axisAsText("x",l.x)} y = ${T.axisAsText("y",l.y)}`),M}redraw(){let e=this.getObject(),r=this.getFramePainter(),h=r.getFrameHeight(),i=this.getMainPainter();this.createG(!0),this.bins=this.createBins(!1),this.createAttLine({attr:e}),this.lineatt.used=!1,this.createAttFill({attr:e,kind:1}),this.fillatt.used=!1;let l=r.getGrFuncs(this.second_x,this.second_y);for(let s=0;s<this.bins.length;++s){let f=this.bins[s];f.grx=l.grx(f.x),f.gry=l.gry(f.y)}if(this.bins.length>2){let s=h;i.hmin&&i.hmin>=0&&(s=Math.round(l.gry(0)),(s>h||s<0)&&(s=h));let f=(0,F.Cq)("bezier",this.bins,s,2);this.lineatt.empty()||this.draw_g.append("svg:path").attr("class","line").attr("d",f.path).style("fill","none").call(this.lineatt.func),this.fillatt.empty()||this.draw_g.append("svg:path").attr("class","area").attr("d",f.path+f.close).call(this.fillatt.func)}}canZoomInside(e,r,h){if("x"!==e)return!1;let i=this.getObject();if(i.fSave.length>0){let l=i.fNpx;return Math.abs(i.fSave[l+1]-i.fSave[l+2])/l<Math.abs(r-h)}return!0}static draw(e,r,h){return(0,C.Z)(function*(){let i=new A(e,r,h),l=new F.pc(h),s=!!i.getMainPainter(),f="AXIS";l.check("SAME"),l.check("X+")&&(f+="X+",i.second_x=s),l.check("Y+")&&(f+="Y+",i.second_y=s),l.check("RX")&&(f+="RX"),l.check("RY")&&(f+="RY");let M=Promise.resolve(!0);return(!s||i.second_x||i.second_y)&&(M=I.f.draw(e,i.createDummyHisto(),f)),M.then(()=>(i.addToPadPrimitives(),i.redraw(),i))})()}}},3767:(Y,S,u)=>{u.d(S,{o:()=>I});var C=u(5368),O=u(3879),F=u(7320),R=u(6772);class I extends O.TGraphPainter{drawBins3D(a,A){if(!(a.mode3d&&a.grx&&a.gry&&a.grz&&a.toplevel))return console.log("Frame painter missing base 3d elements");if(a.zoom_xmin!=a.zoom_xmax&&(this.options.pos3d<a.zoom_xmin||this.options.pos3d>a.zoom_xmax))return;let c=this.optimizeBins(1e3),e=0,r=c.length-1;if(a.zoom_ymin!=a.zoom_ymax){for(;e<r&&c[e].x<a.zoom_ymin;)e++;for(;e<r&&c[r].x>a.zoom_ymax;)r--}if(e==r)return;let h=[],i=a.grx(this.options.pos3d),l=c[e];for(let f=e+1;f<=r;++f){let M=c[f];h.push(i,a.gry(l.x),a.grz(l.y),i,a.gry(M.x),a.grz(M.y)),l=M}let s=(0,R.Qy)(h,(0,R.rq)(this,A));a.toplevel.add(s),a.render3D(100)}drawAxisHisto(){var a=this;return(0,C.Z)(function*(){return F.TH1Painter.draw(a.getDom(),a.createHistogram(),a.options.Axis)})()}static draw(a,A,c){return(0,C.Z)(function*(){return I._drawGraph(new I(a,A),c)})()}}}}]);
//# sourceMappingURL=common.d6e94f63af501d82.js.map