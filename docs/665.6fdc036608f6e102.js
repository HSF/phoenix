"use strict";var n=Math.pow;(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[665],{2665:(u,f,d)=>{d.r(f),d.d(f,{TArrowPainter:()=>r});var l=d(1773),g=d(2454),M=d(1518),c=d(7222);class r extends g.tK{rotate(t,s,i){let h=this.wsize*Math.cos(t),e=this.wsize*Math.sin(t),a="";return void 0!==s&&void 0!==i?a=`M${Math.round(s-h)},${Math.round(i-e)}`:(h=-h,e=-e),a+=`l${Math.round(h)},${Math.round(e)}`,s&&void 0===i&&(a+="z"),a}createPath(){let t=Math.atan2(this.y2-this.y1,this.x2-this.x1),s=this.wsize*Math.cos(this.angle2),i=s*Math.cos(t),h=s*Math.sin(t),e="";return this.beg&&(e+=this.rotate(t-Math.PI-this.angle2,this.x1,this.y1)+this.rotate(t-Math.PI+this.angle2,this.beg>10)),this.mid%10==2&&(e+=this.rotate(t-Math.PI-this.angle2,(this.x1+this.x2-i)/2,(this.y1+this.y2-h)/2)+this.rotate(t-Math.PI+this.angle2,this.mid>10)),this.mid%10==1&&(e+=this.rotate(t-this.angle2,(this.x1+this.x2+i)/2,(this.y1+this.y2+h)/2)+this.rotate(t+this.angle2,this.mid>10)),this.end&&(e+=this.rotate(t-this.angle2,this.x2,this.y2)+this.rotate(t+this.angle2,this.end>10)),`M${Math.round(this.x1+(this.beg>10?i:0))},${Math.round(this.y1+(this.beg>10?h:0))}L${Math.round(this.x2-(this.end>10?i:0))},${Math.round(this.y2-(this.end>10?h:0))}`+e}moveStart(t,s){let i=Math.sqrt(n(this.x1-this.x2,2)+n(this.y1-this.y2,2)),h=Math.sqrt(n(t-this.x1,2)+n(s-this.y1,2))/i,e=Math.sqrt(n(t-this.x2,2)+n(s-this.y2,2))/i;this.side=h>.9?1:e>.9?-1:0}moveDrag(t,s){1!=this.side&&(this.x1+=t,this.y1+=s),-1!=this.side&&(this.x2+=t,this.y2+=s),this.draw_g.select("path").attr("d",this.createPath())}moveEnd(t){if(t)return;let s=this.getObject(),i="";s.fX1=this.svgToAxis("x",this.x1,this.isndc),s.fX2=this.svgToAxis("x",this.x2,this.isndc),s.fY1=this.svgToAxis("y",this.y1,this.isndc),s.fY2=this.svgToAxis("y",this.y2,this.isndc),1!=this.side&&(i+=`SetX1(${s.fX1});;SetY1(${s.fY1});;`),-1!=this.side&&(i+=`SetX2(${s.fX2});;SetY2(${s.fY2});;`),this.submitCanvExec(i+"Notify();;")}redraw(){let t=this.getObject(),s=(0,l.BIT)(14),i=t.fOption,h=this.getPadPainter().getPadRect();this.wsize=Math.max(3,Math.round(Math.max(h.width,h.height)*t.fArrowSize*.8)),this.isndc=t.TestBit(s),this.angle2=t.fAngle/2/180*Math.PI,this.beg=this.mid=this.end=0,0==i.indexOf("<")&&(this.beg=0==i.indexOf("<|")?12:2),i.indexOf("->-")>=0?this.mid=1:i.indexOf("-|>-")>=0?this.mid=11:i.indexOf("-<-")>=0?this.mid=2:i.indexOf("-<|-")>=0&&(this.mid=12);let e=i.lastIndexOf(">"),a=i.lastIndexOf("|>"),o=i.length;e>=0&&e==o-1&&(this.end=a>=0&&a==o-2?11:1),this.createAttLine({attr:t}),this.createG(),this.x1=this.axisToSvg("x",t.fX1,this.isndc,!0),this.y1=this.axisToSvg("y",t.fY1,this.isndc,!0),this.x2=this.axisToSvg("x",t.fX2,this.isndc,!0),this.y2=this.axisToSvg("y",t.fY2,this.isndc,!0);let x=this.draw_g.append("svg:path").attr("d",this.createPath()).call(this.lineatt.func);return this.beg>10||this.end>10?(this.createAttFill({attr:t}),x.call(this.fillatt.func)):x.style("fill","none"),(0,l.isBatchMode)()||(0,c.Z)(this),this}static draw(t,s,i){let h=new r(t,s,i);return(0,M.ensureTCanvas)(h,!1).then(()=>h.redraw())}}}}]);
//# sourceMappingURL=665.6fdc036608f6e102.js.map