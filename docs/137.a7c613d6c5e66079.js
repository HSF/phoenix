"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[137],{8137:(d,o,s)=>{s.r(o),s.d(o,{TGraphTimePainter:()=>a});var h=s(5835),_=s(9542),l=s(3675),m=s(6458),f=s(9670),u=s(7825);class a extends m.tK{redraw(){void 0===this.step&&this.startDrawing()}decodeOptions(e){let t=new l.pc(e||"REPEAT");this.options||(this.options={}),Object.assign(this.options,{once:t.check("ONCE"),repeat:t.check("REPEAT"),first:t.check("FIRST")}),this.storeDrawOpt(e)}drawPrimitives(e){var t=this;return(0,h.Z)(function*(){e||(e=0,t._doing_primitives=!0);let i=t.getObject()?.fSteps.arr[t.step];if(i&&!(e>=i.arr.length))return(0,u.ii)(t.getDom(),i.arr[e],i.opt[e]).then(r=>(r&&(r.$grtimeid=t.selfid,r.$grstep=t.step),t.drawPrimitives(e+1)));delete t._doing_primitives})()}continueDrawing(){if(!this.options)return;let e=this.getObject();if(this.options.first)delete this.step;else if(this.wait_animation_frame){delete this.wait_animation_frame;let t=this.getPadPainter();if(!t)return void delete this.step;this.drawPrimitives().then(()=>{t.cleanPrimitives(i=>i.$grtimeid===this.selfid&&i.$grstep!==this.step),this.continueDrawing()})}else if(this.running_timeout)clearTimeout(this.running_timeout),delete this.running_timeout,this.wait_animation_frame=!0,requestAnimationFrame(()=>this.continueDrawing());else{let t=Math.max(e.fSleepTime,10);if(++this.step>e.fSteps.arr.length){if(!this.options.repeat)return void delete this.step;this.step=0,t=Math.max(5e3,5*t)}this.running_timeout=setTimeout(()=>this.continueDrawing(),t)}}startDrawing(){return this.step=0,this.drawPrimitives().then(()=>(this.continueDrawing(),this))}static draw(e,t,i){return(0,h.Z)(function*(){if(!t.fFrame)return console.error("Frame histogram not exists"),null;let r=new a(e,t);if(r.getMainPainter())return console.error("Cannot draw graph time on top of other histograms"),null;if(r.decodeOptions(i),!t.fFrame.fTitle&&t.fTitle){let n=t.fTitle.split(";");t.fFrame.fTitle=n[0],n[1]&&(t.fFrame.fXaxis.fTitle=n[1]),n[2]&&(t.fFrame.fYaxis.fTitle=n[2])}return r.selfid="grtime_"+_.internals.id_counter++,f.f.draw(e,t.fFrame,"AXIS").then(()=>(r.addToPadPrimitives(),r.startDrawing()))})()}}}}]);
//# sourceMappingURL=137.a7c613d6c5e66079.js.map