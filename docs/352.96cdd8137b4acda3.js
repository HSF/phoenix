"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[352],{4352:(Y,v,m)=>{m.r(v),m.d(v,{TMultiGraphPainter:()=>w});var l=m(5774),x=m(4186),X=m(165),O=m(2481),H=m(2105),T=m(1194),D=m(825);class g extends O.JW{constructor(r,a){super(r,a),this.firstpainter=null,this.autorange=!1,this.painters=[]}cleanup(){this.painters=[],super.cleanup()}updateObject(r){if(!this.matchObjectType(r))return!1;const a=this.getObject(),i=r.fGraphs,s=this.getPadPainter();a.fTitle=r.fTitle;let t=!1;if(this.firstpainter){let n=r.fHistogram;this.autorange&&!n&&(n=this.scanGraphsRange(i)),this.firstpainter.updateObject(n)&&(t=!0)}const e=Math.min(i.arr.length,this.painters.length);for(let n=0;n<e;++n)this.painters[n].updateObject(i.arr[n],(i.opt[n]||this._restopt)+this._auto)&&(t=!0);return this._funcHandler=new H.eP(this,s,r.fFunctions),t}redraw(r){var a=this;return(0,l.A)(function*(){const i=a.firstpainter?.redraw(r)??Promise.resolve(!0),s=function(){var t=(0,l.A)(function*(e){return e>=a.painters.length?a:a.painters[e].redraw(r).then(()=>s(e+1))});return function(n){return t.apply(this,arguments)}}();return i.then(()=>s(0)).then(()=>{const t=a._funcHandler?.drawNext(0)??a;return delete a._funcHandler,t})})()}scanGraphsRange(r,a,i){const s=this.getObject(),t={xmin:0,xmax:0,ymin:0,ymax:0,first:!0};let e,n,h=!1,o=!1,p=!1,G="";i&&(h=i.fLogx,o=i.fLogv??i.fLogy,t.xmin=i.fUxmin,t.xmax=i.fUxmax,t.ymin=i.fUymin,t.ymax=i.fUymax,t.first=!1),this._3d&&a&&!a.fXaxis.fLabels&&(a=null),a||(this.autorange=!0,r.arr[0]?.fHistogram?.fXaxis?.fTimeDisplay&&(p=!0,G=r.arr[0].fHistogram.fXaxis.fTimeFormat)),r.arr.forEach(f=>{if(0!==f.fNpoints){t.first&&(t.xmin=t.xmax=f.fX[0],t.ymin=t.ymax=f.fY[0],t.first=!1);for(let c=0;c<f.fNpoints;++c)t.xmin=Math.min(t.xmin,f.fX[c]),t.xmax=Math.max(t.xmax,f.fX[c]),t.ymin=Math.min(t.ymin,f.fY[c]),t.ymax=Math.max(t.ymax,f.fY[c])}}),t.xmin===t.xmax&&(t.xmax+=1),t.ymin===t.ymax&&(t.ymax+=1);const M=.05*(t.xmax-t.xmin),A=.05*(t.ymax-t.ymin);let d=t.xmin-M,y=t.xmax+M;o?(t.ymin<=0&&(t.ymin=.001*t.ymax),n=t.ymin/(1+.5*Math.log10(t.ymax/t.ymin)),e=t.ymax*(1+.2*Math.log10(t.ymax/t.ymin))):(n=t.ymin-A,e=t.ymax+A),n<0&&t.ymin>=0&&(n=0),e>0&&t.ymax<=0&&(e=0);const F=n,C=e;if(d<0&&t.xmin>=0&&(d=h?.9*t.xmin:0),y>0&&t.xmax<=0&&(y=h?1.1*t.xmax:0),s.fMinimum!==x.kNoZoom&&(t.ymin=n=s.fMinimum),s.fMaximum!==x.kNoZoom&&(t.ymax=e=s.fMaximum),n<0&&t.ymin>=0&&o&&(n=.9*t.ymin),e>0&&t.ymax<=0&&o&&(e=1.1*t.ymax),n<=0&&o&&(n=.001*e),!o&&n>0&&n<.05*e&&(n=0),d<=0&&h&&(d=y>1e3?1:.001*y),!a){let f,c;if(this._3d){f=(a=(0,x.createHistogram)(x.clTH2I,r.arr.length,10)).fXaxis,f.fXmin=0,f.fXmax=r.arr.length,f.fLabels=(0,x.create)(x.clTHashList);for(let u=0;u<r.arr.length;u++){const P=(0,x.create)(x.clTObjString);P.fString=r.arr[u].fTitle||`gr${u}`,P.fUniqueID=r.arr.length-u,f.fLabels.Add(P,"")}f=a.fYaxis,c=a.fZaxis}else f=(a=(0,x.createHistogram)(x.clTH1I,10)).fXaxis,c=a.fYaxis;if(a.fTitle=s.fTitle,a.fTitle.indexOf(";")>=0){const u=a.fTitle.split(";");a.fTitle=u[0],u[1]&&(f.fTitle=u[1]),u[2]&&(c.fTitle=u[2])}f.fXmin=d,f.fXmax=y,f.fTimeDisplay=p,p&&(f.fTimeFormat=G)}const N=this._3d?a.fZaxis:a.fYaxis;return N.fXmin=Math.min(n,F),N.fXmax=Math.max(e,C),a.fMinimum=n,a.fMaximum=e,a.fBits|=x.kNoStats,a}drawAxisHist(r,a){var i=this;return(0,l.A)(function*(){return T.N.draw(i.getDom(),r,a)})()}drawGraph(r,a){var i=this;return(0,l.A)(function*(){return D.TGraphPainter.draw(i.getDom(),r,a)})()}drawNextGraph(r){var a=this;return(0,l.A)(function*(){const i=a.getObject().fGraphs;if(r>=i.arr.length)return a;const s=i.arr[r],t=(i.opt[r]||a._restopt)+a._auto;return a._auto&&(s.$num_graphs=i.arr.length),a.drawGraph(s,t,i.arr.length-r).then(e=>(e&&(e.setSecondaryId(a,`graphs_${r}`),a.painters.push(e)),a.drawNextGraph(r+1)))})()}static _drawMG(r,a){return(0,l.A)(function*(){const i=new X.nC(a);r._3d=i.check("3D"),r._auto="",["PFC","PLC","PMC"].forEach(e=>{i.check(e)&&(r._auto+=" "+e)});let s="";i.check("FB")&&r._3d&&(s+="FB"),T.c.forEach(e=>{i.check(e)&&(s+=";"+e)}),r._restopt=i.remain();let t=Promise.resolve(!0);if(i.check("A")||!r.getMainPainter()){const e=r.getObject(),n=r.scanGraphsRange(e.fGraphs,e.fHistogram,r.getPadPainter()?.getRootPad(!0));t=r.drawAxisHist(n,s).then(h=>{h.setSecondaryId(r,"hist"),r.firstpainter=h})}return t.then(()=>(r.addToPadPrimitives(),r.drawNextGraph(0))).then(()=>new H.eP(r,r.getPadPainter(),r.getObject().fFunctions,!0).drawNext(0))})()}static draw(r,a,i){return(0,l.A)(function*(){return g._drawMG(new g(r,a),i)})()}}var L=m(4862),j=m(5659);class w extends g{drawAxisHist(r,a){var i=this;return(0,l.A)(function*(){return i._3d?L.TH2Painter.draw(i.getDom(),r,"LEGO"+a):T.N.draw(i.getDom(),r,a)})()}drawGraph(r,a,i){var s=this;return(0,l.A)(function*(){return s._3d&&(a+="pos3d_"+i),j.k.draw(s.getDom(),r,a)})()}static draw(r,a,i){return(0,l.A)(function*(){return w._drawMG(new w(r,a),i)})()}}}}]);
//# sourceMappingURL=352.96cdd8137b4acda3.js.map