"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[717],{3717:(N,X,x)=>{x.r(X),x.d(X,{TMultiGraphPainter:()=>G});var u=x(4788),h=x(9542),D=x(3675),F=x(6458),w=x(9670),H=x(8241);class T extends F.tK{constructor(t,r){super(t,r),this.firstpainter=null,this.autorange=!1,this.painters=[]}cleanup(){this.painters=[],super.cleanup()}updateObject(t){if(!this.matchObjectType(t))return!1;let r=this.getObject(),a=t.fGraphs,f=this.getPadPainter();r.fTitle=t.fTitle;let m=!1;if(this.firstpainter){let e=t.fHistogram;this.autorange&&!e&&(e=this.scanGraphsRange(a)),this.firstpainter.updateObject(e)&&(m=!0)}for(let e=0;e<a.arr.length;++e)e<this.painters.length&&this.painters[e].updateObject(a.arr[e])&&(m=!0);return t.fFunctions?.arr?.forEach(e=>{e?._typename&&e?.fName&&f?.findPainterFor(null,e.fName,e._typename)?.updateObject(e)}),m}scanGraphsRange(t,r,a){let m,e,f=this.getObject(),s=!1,o=!1,y=!1,p="",i={xmin:0,xmax:0,ymin:0,ymax:0,first:!0};a&&(s=a.fLogx,o=a.fLogy,i.xmin=a.fUxmin,i.xmax=a.fUxmax,i.ymin=a.fUymin,i.ymax=a.fUymax,i.first=!1),this._3d&&r&&!r.fXaxis.fLabels&&(r=null),r||(this.autorange=!0,t.arr[0]?.fHistogram?.fXaxis?.fTimeDisplay&&(y=!0,p=t.arr[0].fHistogram.fXaxis.fTimeFormat)),t.arr.forEach(n=>{if(0!=n.fNpoints){i.first&&(i.xmin=i.xmax=n.fX[0],i.ymin=i.ymax=n.fY[0],i.first=!1);for(let c=0;c<n.fNpoints;++c)i.xmin=Math.min(i.xmin,n.fX[c]),i.xmax=Math.max(i.xmax,n.fX[c]),i.ymin=Math.min(i.ymin,n.fY[c]),i.ymax=Math.max(i.ymax,n.fY[c])}}),i.xmin==i.xmax&&(i.xmax+=1),i.ymin==i.ymax&&(i.ymax+=1);let M=.05*(i.xmax-i.xmin),O=.05*(i.ymax-i.ymin),g=i.xmin-M,d=i.xmax+M;o?(i.ymin<=0&&(i.ymin=.001*i.ymax),e=i.ymin/(1+.5*Math.log10(i.ymax/i.ymin)),m=i.ymax*(1+.2*Math.log10(i.ymax/i.ymin))):(e=i.ymin-O,m=i.ymax+O),e<0&&i.ymin>=0&&(e=0),m>0&&i.ymax<=0&&(m=0);let I=e,L=m;if(g<0&&i.xmin>=0&&(g=s?.9*i.xmin:0),d>0&&i.xmax<=0&&(d=s?1.1*i.xmax:0),f.fMinimum!=h.kNoZoom&&(i.ymin=e=f.fMinimum),f.fMaximum!=h.kNoZoom&&(i.ymax=m=f.fMaximum),e<0&&i.ymin>=0&&o&&(e=.9*i.ymin),m>0&&i.ymax<=0&&o&&(m=1.1*i.ymax),e<=0&&o&&(e=.001*m),!o&&e>0&&e<.05*m&&(e=0),g<=0&&s&&(g=d>1e3?1:.001*d),!r){let n,c;if(this._3d){n=(r=(0,h.create)("TH2I")).fXaxis,n.fXmin=0,n.fXmax=t.arr.length,n.fNbins=t.arr.length,n.fLabels=(0,h.create)(h.clTHashList);for(let l=0;l<t.arr.length;l++){let P=(0,h.create)(h.clTObjString);P.fString=t.arr[l].fTitle||`gr${l}`,P.fUniqueID=t.arr.length-l,n.fLabels.Add(P,"")}n=r.fYaxis,c=r.fZaxis}else n=(r=(0,h.create)("TH1I")).fXaxis,c=r.fYaxis;if(r.fTitle=f.fTitle,r.fTitle.indexOf(";")>=0){let l=r.fTitle.split(";");r.fTitle=l[0],l[1]&&(n.fTitle=l[1]),l[2]&&(c.fTitle=l[2])}n.fXmin=g,n.fXmax=d,n.fTimeDisplay=y,y&&(n.fTimeFormat=p)}let v=this._3d?r.fZaxis:r.fYaxis;return v.fXmin=Math.min(e,I),v.fXmax=Math.max(m,L),r.fMinimum=e,r.fMaximum=m,r}drawAxisHist(t,r){var a=this;return(0,u.Z)(function*(){return w.f.draw(a.getDom(),t,"AXIS"+r)})()}drawNextFunction(t){var r=this;return(0,u.Z)(function*(){let a=r.getObject();return!a.fFunctions||t>=a.fFunctions.arr.length?r:r.getPadPainter().drawObject(r.getDom(),a.fFunctions.arr[t],a.fFunctions.opt[t]).then(()=>r.drawNextFunction(t+1))})()}drawGraph(t,r){var a=this;return(0,u.Z)(function*(){return H.TGraphPainter.draw(a.getDom(),t,r)})()}drawNextGraph(t,r){var a=this;return(0,u.Z)(function*(){let f=a.getObject().fGraphs;if(t>=f.arr.length)return a._pfc=a._plc=a._pmc=!1,a.drawNextFunction(0);if(a._pfc||a._plc||a._pmc){let e=a.getMainPainter();if((0,h.isFunc)(e?.createAutoColor)){let s=e.createAutoColor(f.arr.length);a._pfc&&(f.arr[t].fFillColor=s),a._plc&&(f.arr[t].fLineColor=s),a._pmc&&(f.arr[t].fMarkerColor=s)}}return a.drawGraph(f.arr[t],f.opt[t]||r||"",f.arr.length-t).then(e=>(e&&a.painters.push(e),a.drawNextGraph(t+1,r)))})()}static _drawMG(t,r){return(0,u.Z)(function*(){let a=new D.pc(r);t._3d=a.check("3D"),t._pfc=a.check("PFC"),t._plc=a.check("PLC"),t._pmc=a.check("PMC");let f="";["USE_PAD_TITLE","LOGXY","LOGX","LOGY","LOGZ","GRIDXY","GRIDX","GRIDY","TICKXY","TICKX","TICKY","FB"].forEach(s=>{a.check(s)&&(f+=";"+s)});let e=Promise.resolve(!0);if(a.check("A")||!t.getMainPainter()){let s=t.getObject(),o=t.getPadPainter(),y=t.scanGraphsRange(s.fGraphs,s.fHistogram,o?.getRootPad(!0));e=t.drawAxisHist(y,f).then(p=>{t.firstpainter=p,p.$secondary="hist",s.fHistogram&&(t.$primary=!0)})}return e.then(()=>(t.addToPadPrimitives(),t.drawNextGraph(0,a.remain())))})()}static draw(t,r,a){return(0,u.Z)(function*(){return T._drawMG(new T(t,r),a)})()}}var Z=x(8189),C=x(3761);class G extends T{drawAxisHist(t,r){var a=this;return(0,u.Z)(function*(){return a._3d?Z.TH2Painter.draw(a.getDom(),t,"AXIS3D"+r):w.f.draw(a.getDom(),t,"AXIS"+r)})()}drawGraph(t,r,a){var f=this;return(0,u.Z)(function*(){return f._3d&&(r+="pos3d_"+a),C.o.draw(f.getDom(),t,r)})()}static draw(t,r,a){return(0,u.Z)(function*(){return G._drawMG(new G(t,r),a)})()}}}}]);
//# sourceMappingURL=717.a696fd693dce2cca.js.map