"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[803],{6803:(F,E,p)=>{p.r(E),p.d(E,{drawBox:()=>I,drawEllipse:()=>L,drawJSImage:()=>R,drawMarker:()=>C,drawPie:()=>k,drawPolyLine:()=>O,drawPolyMarker:()=>B,drawText:()=>Y});var D=p(5774),M=p(4186),S=p(3324),g=p(165),m=p(9606),x=p(9646);function Y(){return X.apply(this,arguments)}function X(){return(X=(0,D.A)(function*(){const t=this.getObject(),d=this.getPadPainter(),l=d.getPadWidth(),r=d.getPadHeight(),i=this.getFramePainter();let h=t.fX,s=t.fY,o=1,n=this.matchObjectType(M.clTAnnotation);if(this.createAttText({attr:t}),n&&i?.mode3d&&(0,M.isFunc)(i?.convert3DtoPadNDC)){const e=i.convert3DtoPadNDC(t.fX,t.fY,t.fZ);h=e.x,s=e.y,this.isndc=!0,n="3d"}else t.TestBit((0,M.BIT)(14))?this.isndc=!0:d.getRootPad(!0)||(this.isndc=!0,h=s=.5,t.fTextAlign=22);this.createG(),this.draw_g.attr("transform",null),this.pos_x=this.axisToSvg("x",h,this.isndc),this.pos_y=this.axisToSvg("y",s,this.isndc);const a=this.textatt.createArg({x:this.pos_x,y:this.pos_y,text:t.fTitle,latex:0});return t._typename===M.clTLatex||n?(a.latex=1,o=.9):t._typename===M.clTMathText&&(a.latex=2,o=.8),this.startTextDrawing(this.textatt.font,this.textatt.getSize(l,r,o,.05)),this.drawText(a),this.finishTextDrawing().then(()=>(this.isBatchMode()||(this.pos_dx=this.pos_dy=0,this.moveDrag||(this.moveDrag=function(e,f){this.pos_dx+=e,this.pos_dy+=f,(0,g.bk)(this.draw_g,this.pos_dx,this.pos_dy)}),this.moveEnd||(this.moveEnd=function(e){if(e)return;const f=this.getObject();f.fX=this.svgToAxis("x",this.pos_x+this.pos_dx,this.isndc),f.fY=this.svgToAxis("y",this.pos_y+this.pos_dy,this.isndc),this.submitCanvExec(`SetX(${f.fX});;SetY(${f.fY});;`)}),"3d"!==n?(0,m.X2)(this):(i.processRender3D=!0,this.handleRender3D=()=>{const e=i.convert3DtoPadNDC(t.fX,t.fY,t.fZ),f=this.axisToSvg("x",e.x,!0),c=this.axisToSvg("y",e.y,!0);(0,g.bk)(this.draw_g,f-this.pos_x,c-this.pos_y)}),(0,x.wh)(this,x.Ew)),this))})).apply(this,arguments)}function O(){this.createG();const t=this.getObject(),d=(0,M.BIT)(14),l=t.TestBit(d),r=this.getDrawOpt()||t.fOption,i=t._typename===M.clTPolyLine&&("f"===r||"F"===r),h=this.getAxisToSvgFunc(l);this.createAttLine({attr:t}),this.createAttFill({attr:t});let s="";for(let n=0;n<=t.fLastPoint;++n)s+=`${n>0?"L":"M"}${h.x(t.fX[n])},${h.y(t.fY[n])}`;i&&(s+="Z");const o=this.draw_g.append("svg:path").attr("d",s);i?o.call(this.fillatt.func):o.call(this.lineatt.func).style("fill","none"),(0,x.wh)(this,x.Ew),(0,m.X2)(this),this.dx=this.dy=0,this.isndc=l,this.moveDrag=function(n,a){this.dx+=n,this.dy+=a,(0,g.bk)(this.draw_g.select("path"),this.dx,this.dy)},this.moveEnd=function(n){if(n)return;const a=this.getObject(),e=this.getAxisToSvgFunc(this.isndc);let f="";for(let c=0;c<=a.fLastPoint;++c){const y=this.svgToAxis("x",e.x(a.fX[c])+this.dx,this.isndc),_=this.svgToAxis("y",e.y(a.fY[c])+this.dy,this.isndc);a.fX[c]=y,a.fY[c]=_,f+=`SetPoint(${c},${y},${_});;`}this.submitCanvExec(f+"Notify();;"),this.redraw()}}function L(){const t=this.getObject(),d=0===t.fPhimin&&360===t.fPhimax,l="TCrown"===t._typename;this.createAttLine({attr:t}),this.createAttFill({attr:t}),this.createG();const r=this.getAxisToSvgFunc(),i=r.x(t.fX1),h=r.y(t.fY1),s=l&&t.fR1<=0?r.x(t.fX1+t.fR2)-i:r.x(t.fX1+t.fR1)-i,o=h-r.y(t.fY1+t.fR2);let n="";if(l&&t.fR1>0){const a=s,e=o,f=h-r.y(t.fY1+t.fR1),c=r.x(t.fX1+t.fR2)-i;if(d)n=`M${-a},0A${a},${f},0,1,0,${a},0A${a},${f},0,1,0,${-a},0M${-c},0A${c},${e},0,1,0,${c},0A${c},${e},0,1,0,${-c},0`;else{const y=t.fPhimax-t.fPhimin>=180?1:0,_=t.fPhimin*Math.PI/180,u=t.fPhimax*Math.PI/180,T=Math.round(a*Math.cos(_)),P=Math.round(f*Math.sin(_));n=`M${Math.round(a*Math.cos(u))},${Math.round(f*Math.sin(u))}A${a},${f},0,${y},0,${T},${P}L${Math.round(c*Math.cos(_))},${Math.round(e*Math.sin(_))}A${c},${e},0,${y},1,${Math.round(c*Math.cos(u))},${Math.round(e*Math.sin(u))}Z`}}else if(0===t.fTheta)n=d?`M${-s},0A${s},${o},0,1,0,${s},0A${s},${o},0,1,0,${-s},0Z`:`M0,0L${Math.round(s*Math.cos(t.fPhimin*Math.PI/180))},${Math.round(o*Math.sin(t.fPhimin*Math.PI/180))}A${s},${o},0,1,1,${Math.round(s*Math.cos(t.fPhimax*Math.PI/180))},${Math.round(o*Math.sin(t.fPhimax*Math.PI/180))}Z`;else{const a=Math.cos(t.fTheta*Math.PI/180),e=Math.sin(t.fTheta*Math.PI/180),f=t.fPhimin*Math.PI/180,y=200,_=(t.fPhimax*Math.PI/180-f)/(y-(d?0:1));let u=0,T=0;d||(n="M0,0");for(let P=0;P<y;++P){const w=f+P*_,A=t.fR1*Math.cos(w),b=t.fR2*Math.sin(w),$=r.x(t.fX1+A*a-b*e)-i,v=r.y(t.fY1+A*e+b*a)-h;n?n+=u===$?"v"+(v-T):T===v?"h"+($-u):`l${$-u},${v-T}`:n=`M${$},${v}`,u=$,T=v}n+="Z"}this.x=i,this.y=h,(0,g.bk)(this.draw_g.append("svg:path"),i,h).attr("d",n).call(this.lineatt.func).call(this.fillatt.func),(0,x.wh)(this,x.Ew),(0,m.X2)(this),this.moveDrag=function(a,e){this.x+=a,this.y+=e,(0,g.bk)(this.draw_g.select("path"),this.x,this.y)},this.moveEnd=function(a){if(a)return;const e=this.getObject();e.fX1=this.svgToAxis("x",this.x),e.fY1=this.svgToAxis("y",this.y),this.submitCanvExec(`SetX1(${e.fX1});;SetY1(${e.fY1});;Notify();;`)}}function k(){this.createG();const t=this.getObject(),d=t.fPieSlices.length,l=this.axisToSvg("x",t.fX),r=this.axisToSvg("y",t.fY),i=this.axisToSvg("x",t.fX+t.fRadius)-l,h=this.axisToSvg("y",t.fY+t.fRadius)-r;(0,g.bk)(this.draw_g,l,r);let s=0,o=t.fAngularOffset*Math.PI/180,n=Math.round(i*Math.cos(o)),a=Math.round(h*Math.sin(o));for(let e=0;e<d;e++)s+=t.fPieSlices[e].fValue;for(let e=0;e<d;e++){const f=t.fPieSlices[e];this.createAttLine({attr:f}),this.createAttFill({attr:f}),o+=f.fValue/s*2*Math.PI;const c=Math.round(i*Math.cos(o)),y=Math.round(h*Math.sin(o));this.draw_g.append("svg:path").attr("d",`M0,0L${n},${a}A${i},${h},0,0,0,${c},${y}z`).call(this.lineatt.func).call(this.fillatt.func),n=c,a=y}}function I(){const t=this.getObject(),l=this.getDrawOpt().toUpperCase().indexOf("L")>=0;this.createAttLine({attr:t}),this.createAttFill({attr:t}),!this.fillatt.empty()&&!l&&(this.lineatt.color="none"),this.createG(),this.x1=this.axisToSvg("x",t.fX1),this.x2=this.axisToSvg("x",t.fX2),this.y1=this.axisToSvg("y",t.fY1),this.y2=this.axisToSvg("y",t.fY2),this.borderMode=t.fBorderMode&&t.fBorderSize&&this.fillatt.hasColor()?t.fBorderMode:0,this.borderSize=t.fBorderSize,this.getPathes=()=>{const i=Math.min(this.x1,this.x2),h=Math.min(this.y1,this.y2),s=Math.abs(this.x2-this.x1),o=Math.abs(this.y1-this.y2),n=`M${i},${h}h${s}v${o}h${-s}z`;if(!this.borderMode)return[n];const a=this.borderSize,e=this.borderSize,f=`M${i},${h}h${s}l${-a},${e}h${2*a-s}v${o-2*e}l${-a},${e}z`,c=`M${i+s},${h+o}v${-o}l${-a},${e}v${o-2*e}h${2*a-s}l${-a},${e}z`;return this.borderMode>0?[n,f,c]:[n,c,f]};const r=this.getPathes();this.draw_g.append("svg:path").attr("d",r[0]).call(this.lineatt.func).call(this.fillatt.func),this.borderMode&&(this.draw_g.append("svg:path").attr("d",r[1]).call(this.fillatt.func).style("fill",(0,S.Qh)(this.fillatt.color).brighter(.5).formatHex()),this.draw_g.append("svg:path").attr("d",r[2]).call(this.fillatt.func).style("fill",(0,S.Qh)(this.fillatt.color).darker(.5).formatHex())),(0,x.wh)(this,x.Ew),(0,m.X2)(this),this.moveStart=function(i,h){const s=Math.abs(this.x2-this.x1),o=Math.abs(this.y1-this.y2);this.c_x1=Math.abs(i-this.x2)>.1*s,this.c_x2=Math.abs(i-this.x1)>.1*s,this.c_y1=Math.abs(h-this.y2)>.1*o,this.c_y2=Math.abs(h-this.y1)>.1*o,this.c_x1!==this.c_x2&&this.c_y1&&this.c_y2&&(this.c_y1=this.c_y2=!1),this.c_y1!==this.c_y2&&this.c_x1&&this.c_x2&&(this.c_x1=this.c_x2=!1)},this.moveDrag=function(i,h){this.c_x1&&(this.x1+=i),this.c_x2&&(this.x2+=i),this.c_y1&&(this.y1+=h),this.c_y2&&(this.y2+=h);const s=this.draw_g.selectAll("path").nodes();this.getPathes().forEach((n,a)=>(0,S.Lt)(s[a]).attr("d",n))},this.moveEnd=function(i){if(i)return;const h=this.getObject();let s="";this.c_x1&&(h.fX1=this.svgToAxis("x",this.x1),s+=`SetX1(${h.fX1});;`),this.c_x2&&(h.fX2=this.svgToAxis("x",this.x2),s+=`SetX2(${h.fX2});;`),this.c_y1&&(h.fY1=this.svgToAxis("y",this.y1),s+=`SetY1(${h.fY1});;`),this.c_y2&&(h.fY2=this.svgToAxis("y",this.y2),s+=`SetY2(${h.fY2});;`),this.submitCanvExec(s+"Notify();;")}}function C(){const t=this.getObject(),d=(0,M.BIT)(14);this.isndc=t.TestBit(d),this.createAttMarker({attr:t}),this.createG();const l=this.axisToSvg("x",t.fX,this.isndc),r=this.axisToSvg("y",t.fY,this.isndc),i=this.markeratt.create(l,r);i&&this.draw_g.append("svg:path").attr("d",i).call(this.markeratt.func),(0,x.wh)(this,x.Ew),(0,m.X2)(this),this.dx=this.dy=0,this.moveDrag=function(h,s){this.dx+=h,this.dy+=s,(0,g.bk)(this.draw_g.select("path"),this.dx,this.dy)},this.moveEnd=function(h){if(h)return;const s=this.getObject();s.fX=this.svgToAxis("x",this.axisToSvg("x",s.fX,this.isndc)+this.dx,this.isndc),s.fY=this.svgToAxis("y",this.axisToSvg("y",s.fY,this.isndc)+this.dy,this.isndc),this.submitCanvExec(`SetX(${s.fX});;SetY(${s.fY});;Notify();;`),this.redraw()}}function B(){const t=this.getObject(),d=this.getAxisToSvgFunc();this.createAttMarker({attr:t}),this.createG();let l="";for(let r=0;r<=t.fLastPoint;++r)l+=this.markeratt.create(d.x(t.fX[r]),d.y(t.fY[r]));l&&this.draw_g.append("svg:path").attr("d",l).call(this.markeratt.func),(0,x.wh)(this,x.Ew),(0,m.X2)(this),this.dx=this.dy=0,this.moveDrag=function(r,i){this.dx+=r,this.dy+=i,(0,g.bk)(this.draw_g.select("path"),this.dx,this.dy)},this.moveEnd=function(r){if(r)return;const i=this.getObject(),h=this.getAxisToSvgFunc();let s="";for(let o=0;o<=i.fLastPoint;++o){const n=this.svgToAxis("x",h.x(i.fX[o])+this.dx),a=this.svgToAxis("y",h.y(i.fY[o])+this.dy);i.fX[o]=n,i.fY[o]=a,s+=`SetPoint(${o},${n},${a});;`}this.submitCanvExec(s+"Notify();;"),this.redraw()}}function R(t,d,l){const r=new g.b8(t),i=r.selectDom(),h=i.append("img").attr("src",d.fName).attr("title",d.fTitle||d.fName);return l&&l.indexOf("scale")>=0?h.style("width","100%").style("height","100%"):l&&l.indexOf("center")>=0&&(i.style("position","relative"),h.attr("style","margin: 0; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);")),r.setTopPainter(),r}}}]);
//# sourceMappingURL=803.a545384e91fa4357.js.map