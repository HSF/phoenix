"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[168],{7168:(I,D,f)=>{f.r(D),f.d(D,{TF3Painter:()=>C});var X=f(5774),_=f(4186),H=f(4862),b=f(9489),O=f(9754),L=f(2481),j=f(165),W=f(2105);function B(E,t,e=0){for(let i=E.length-2;i>=0;--i){const r=t[i],x=t[i+1],m=E[i],l=E[i+1];if(r===e)return m;if(x===e)return l;if(r<e!=x<e)return m+(e-r)/(x-r)*(l-m)}return E[0]-1}class C extends H.TH2Painter{getObjectName(){return this.$func?.fName??"func"}getClassName(){return this.$func?._typename??_.clTF3}isTF1(){return!0}getPrimaryObject(){return this.$func}updateObject(t){if(!t||this.getClassName()!==t._typename)return!1;delete t.evalPar;const e=this.getHisto();if(this.webcanv_hist){const i=this.getPadPainter()?.findInPrimitives("Func",_.clTH2F);i&&this.updateAxes(e,i,this.getFramePainter())}return this.$func=t,this.createTF3Histogram(t,e),this.scanContent(),!0}redraw(t){return!this._use_saved_points&&("logx"===t||"logy"===t||"logy"===t||"zoom"===t)&&(this.createTF3Histogram(this.$func,this.getHisto()),this.scanContent()),super.redraw(t)}createTF3Histogram(t,e){const i=t.fSave.length-9;this._use_saved_points=i>0&&(_.settings.PreferSavedPoints||this.use_saved>1);const r=this.getFramePainter(),x=this.getPadPainter()?.getRootPad(!0),m=x?.fLogx,l=x?.fLogy,a=r?.getGrFuncs(this.second_x,this.second_y);let z=t.fXmin,M=t.fXmax,y=t.fYmin,P=t.fYmax,h=t.fZmin,c=t.fZmax,u=Math.max(t.fNpx,20),g=Math.max(t.fNpy,20),o=Math.max(t.fNpz,20);if(a?.zoom_xmin!==a?.zoom_xmax){const s=(M-z)/u;z<a.zoom_xmin&&a.zoom_xmin<M&&(z=Math.max(z,a.zoom_xmin-s)),z<a.zoom_xmax&&a.zoom_xmax<M&&(M=Math.min(M,a.zoom_xmax+s))}if(a?.zoom_ymin!==a?.zoom_ymax){const s=(P-y)/g;y<a.zoom_ymin&&a.zoom_ymin<P&&(y=Math.max(y,a.zoom_ymin-s)),y<a.zoom_ymax&&a.zoom_ymax<P&&(P=Math.min(P,a.zoom_ymax+s))}a?.zoom_zmin!==a?.zoom_zmax&&(h<a.zoom_zmin&&a.zoom_zmin<c&&(h=a.zoom_zmin),h<a.zoom_zmax&&a.zoom_zmax<c&&(c=a.zoom_zmax));const N=(s,d)=>{e.fNcells!==(s+2)*(d+2)&&(e.fNcells=(s+2)*(d+2),e.fArray=new Float32Array(e.fNcells)),e.fArray.fill(0),e.fXaxis.fNbins=s,e.fXaxis.fXbins=[],e.fYaxis.fNbins=d,e.fYaxis.fXbins=[],e.fXaxis.fXmin=z,e.fXaxis.fXmax=M,e.fYaxis.fXmin=y,e.fYaxis.fXmax=P,e.fMinimum=h,e.fMaximum=c};if(delete this._fail_eval,!this._use_saved_points){let s=!1;!t.evalPar&&!(0,b.Dx)(t)&&(s=!0),N(u,g),m&&(0,O.produceTAxisLogScale)(e.fXaxis,u,z,M),l&&(0,O.produceTAxisLogScale)(e.fYaxis,g,y,P);const d=new Array(o),S=new Array(o);for(let n=0;n<o;++n)S[n]=h+n/(o-1)*(c-h);for(let n=0;n<g&&!s;++n)for(let v=0;v<u&&!s;++v){const A=e.fXaxis.GetBinCenter(v+1),T=e.fYaxis.GetBinCenter(n+1);let p=0;try{for(let F=0;F<o;++F)d[F]=t.evalPar(A,T,S[F]);p=B(S,d)}catch{s=!0}s||e.setBinContent(e.getBin(v+1,n+1),Number.isFinite(p)?p:0)}s&&(this._fail_eval=!0),s&&i>0&&(this._use_saved_points=!0)}if(this._use_saved_points){z=t.fSave[i],M=t.fSave[i+1],y=t.fSave[i+2],P=t.fSave[i+3],h=t.fSave[i+4],c=t.fSave[i+5],u=Math.round(t.fSave[i+6]),g=Math.round(t.fSave[i+7]),o=Math.round(t.fSave[i+8]);const s=(c-h)/o;N(u+1,g+1);const d=new Array(o+1),S=new Array(o+1);for(let n=0;n<=o;n++)S[n]=h+n*s;for(let n=0;n<=u;++n)for(let v=0;v<=g;++v){for(let T=0;T<=o;T++)d[T]=t.fSave[n+(u+1)*(v+(g+1)*T)];const A=B(S,d);e.setBinContent(e.getBin(n+1,v+1),Number.isFinite(A)?A:0)}}return e.fName="Func",(0,_.setHistogramTitle)(e,t.fTitle),e.fLineColor=t.fLineColor,e.fLineStyle=t.fLineStyle,e.fLineWidth=t.fLineWidth,e.fFillColor=t.fFillColor,e.fFillStyle=t.fFillStyle,e.fMarkerColor=t.fMarkerColor,e.fMarkerStyle=t.fMarkerStyle,e.fMarkerSize=t.fMarkerSize,e.fBits|=_.kNoStats,e}extractAxesProperties(t){super.extractAxesProperties(t);const e=this.$func,i=e?.fSave.length??0;i>9&&this._use_saved_points&&(this.xmin=Math.min(this.xmin,e.fSave[i-9]),this.xmax=Math.max(this.xmax,e.fSave[i-8]),this.ymin=Math.min(this.ymin,e.fSave[i-7]),this.ymax=Math.max(this.ymax,e.fSave[i-6]),this.zmin=Math.min(this.zmin,e.fSave[i-5]),this.zmax=Math.max(this.zmax,e.fSave[i-4])),e&&(this.xmin=Math.min(this.xmin,e.fXmin),this.xmax=Math.max(this.xmax,e.fXmax),this.ymin=Math.min(this.ymin,e.fYmin),this.ymax=Math.max(this.ymax,e.fYmax),this.zmin=Math.min(this.zmin,e.fZmin),this.zmax=Math.max(this.zmax,e.fZmax))}fillWebObjectOptions(t){t.fcust=this._fail_eval&&!this.use_saved?"func_fail":""}static draw(t,e,i){return(0,X.A)(function*(){const r=(0,O.scanTF1Options)(i);i=r.opt,delete r.opt;const x=new j.nC(i);let m;x.empty()||"gl"===i?i="surf1":"SAME"===x.opt&&(i="surf1 same"),(0===i.indexOf("same")||0===i.indexOf("SAME"))&&((0,L.Nn)(t)||(i="A_ADJUST_FRAME_"+i.slice(4))),r.webcanv_hist&&(m=new L.JW(t).getPadPainter()?.findInPrimitives("Func",_.clTH2F)),m||(m=(0,_.createHistogram)(_.clTH2F,20,20),m.fBits|=_.kNoStats);const l=new C(t,m);return l.$func=e,Object.assign(l,r),l.createTF3Histogram(e,m),W.mf._drawHist(l,i)})()}}}}]);
//# sourceMappingURL=168.6387a91f766fa5c0.js.map