"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[15],{15:(w,P,g)=>{g.r(P),g.d(P,{TWebPaintingPainter:()=>b});var O=g(4788),M=g(3038),S=g(6458);class b extends S.tK{updateObject(e){return!!this.matchObjectType(e)&&(this.assignObject(e),!0)}redraw(){var e=this;return(0,O.Z)(function*(){const r=e.getObject(),n=e.getAxisToSvgFunc();if(!r?.fOper||!n)return;let h,T,a,l=0,i={},p=null,m="none",_="",o=r.fOper.split(";");const c=t=>{if(t!=m&&(p&&(p.attr("d",_),_="",p=null,m="none"),t))switch(m=t,p=e.draw_g.append("svg:path"),t){case"f":p.call(e.fillatt.func);break;case"l":p.call(e.lineatt.func).style("fill","none");break;case"m":p.call(e.markeratt.func)}},y=(t,x)=>{let f=0,s={_typename:"any"};for(let u=0;u<x.length;++u){let d=t.indexOf(":",f+1);s[x[u]]=parseInt(t.slice(f+1,d>f?d:void 0)),f=d}return s},B=t=>{for(;++t<o.length;)switch(h=o[t][0],h){case"z":e.createAttLine({attr:y(o[t],["fLineColor","fLineStyle","fLineWidth"]),force:!0}),c();continue;case"y":e.createAttFill({attr:y(o[t],["fFillColor","fFillStyle"]),force:!0}),c();continue;case"x":e.createAttMarker({attr:y(o[t],["fMarkerColor","fMarkerStyle","fMarkerSize"]),force:!0}),c();continue;case"o":i=y(o[t],["fTextColor","fTextFont","fTextSize","fTextAlign","fTextAngle"]),i.fTextSize<0&&(i.fTextSize*=-.001),c();continue;case"r":case"b":{c("b"==h?"f":"l");let x=n.x(r.fBuf[l++]),f=n.y(r.fBuf[l++]),s=n.x(r.fBuf[l++]),u=n.y(r.fBuf[l++]);_+=`M${x},${f}h${s-x}v${u-f}h${x-s}z`;continue}case"l":case"f":for(c(h),T=parseInt(o[t].slice(1)),a=0;a<T;++a)_+=(a>0?"L":"M")+n.x(r.fBuf[l++])+","+n.y(r.fBuf[l++]);"f"==h&&(_+="Z");continue;case"m":for(c(h),T=parseInt(o[t].slice(1)),e.markeratt.resetPos(),a=0;a<T;++a)_+=e.markeratt.create(n.x(r.fBuf[l++]),n.y(r.fBuf[l++]));continue;case"h":case"t":if(i.fTextSize){c();let x=i.fTextSize>1?i.fTextSize:e.getPadPainter().getPadHeight()*i.fTextSize,f=i.fTextAngle,s=o[t].slice(1),u=e.draw_g.append("svg:g");if(f>=360&&(f-=360*Math.floor(f/360)),e.startTextDrawing(i.fTextFont,x,u),"h"==h){let d="";for(a=0;a<s.length;a+=2)d+=String.fromCharCode(parseInt(s.slice(a,a+2),16));s=d}return e.drawText({align:i.fTextAlign,x:n.x(r.fBuf[l++]),y:n.y(r.fBuf[l++]),rotate:-f,text:s,color:(0,M.Lq)(i.fTextColor),latex:0,draw_g:u}),e.finishTextDrawing(u).then(()=>B(t))}continue;default:console.log(`unsupported operation ${h}`)}return Promise.resolve(!0)};return e.createG(),B(-1).then(()=>(c(),e))})()}static draw(e,r){return(0,O.Z)(function*(){let n=new b(e,r);return n.addToPadPrimitives(),n.redraw()})()}}}}]);
//# sourceMappingURL=15.4def682f3a97b1e2.js.map