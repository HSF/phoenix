"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[625],{3625:(L,S,v)=>{v.r(S),v.d(S,{RHistStatsPainter:()=>b,RLegendPainter:()=>T,RPavePainter:()=>k,RPaveTextPainter:()=>y});var c=v(4788),x=v(9542),C=v(3675),R=v(3029),E=v(9056),O=v(6116);class k extends R.p{drawContent(){var t=this;return(0,c.Z)(function*(){return t})()}drawPave(){var t=this;return(0,c.Z)(function*(){let e=t.getPadPainter().getPadRect(),i=t.getFramePainter();t.onFrame=i&&t.v7EvalAttr("onFrame",!0),t.corner=t.v7EvalAttr("corner",2);let a=t.v7EvalAttr("visible",!0),r=t.v7EvalLength("offsetX",e.width,.02),o=t.v7EvalLength("offsetY",e.height,.02),n=t.v7EvalLength("width",e.width,.3),s=t.v7EvalLength("height",e.height,.3);if(t.createG(),t.draw_g.classed("most_upper_primitives",!0),!a)return t;t.createv7AttLine("border_"),t.createv7AttFill();let d=0,f=0,_=t.onFrame?i.getFrameRect():e;switch(t.corner){case 1:d=_.x+r,f=_.y+o;break;case 3:d=_.x+r,f=_.y+_.height-o-s;break;case 4:d=_.x+_.width-r-n,f=_.y+_.height-o-s;break;default:d=_.x+_.width-r-n,f=_.y+o}return t.draw_g.attr("transform",`translate(${d},${f})`),t.draw_g.append("svg:rect").attr("x",0).attr("width",n).attr("y",0).attr("height",s).call(t.lineatt.func).call(t.fillatt.func),t.pave_width=n,t.pave_height=s,t.drawContent().then(()=>((0,x.isBatchMode)()||(x.settings.ContextMenu&&t.paveContextMenu&&t.draw_g.on("contextmenu",h=>t.paveContextMenu(h)),(0,O.uI)(t,{x:d,y:f,width:n,height:s,minwidth:20,minheight:20,redraw:h=>t.sizeChanged(h)})),t))})()}sizeChanged(t){this.pave_width=t.width,this.pave_height=t.height;let e=t.x,i=t.y,a=this.getPadPainter().getPadRect(),r=this.onFrame?this.getFramePainter().getFrameRect():a,o=0,n=0,s={};switch(this.corner){case 1:o=e-r.x,n=i-r.y;break;case 3:o=e-r.x,n=r.y+r.height-i-this.pave_height;break;case 4:o=r.x+r.width-e-this.pave_width,n=r.y+r.height-i-this.pave_height;break;default:o=r.x+r.width-e-this.pave_width,n=i-r.y}this.v7AttrChange(s,"offsetX",o/a.width),this.v7AttrChange(s,"offsetY",n/a.height),this.v7AttrChange(s,"width",this.pave_width/a.width),this.v7AttrChange(s,"height",this.pave_height/a.height),this.v7SendAttrChanges(s,!1),this.draw_g.select("rect").attr("width",this.pave_width).attr("height",this.pave_height),this.drawContent()}redraw(){var t=this;return(0,c.Z)(function*(){return t.drawPave()})()}static draw(t,e,i){return(0,c.Z)(function*(){let a=new k(t,e,i,"pave");return(0,E.ensureRCanvas)(a,!1).then(()=>a.drawPave())})()}}class T extends k{drawContent(){var t=this;return(0,c.Z)(function*(){let e=t.getObject(),i=t.v7EvalFont("text",{size:12,color:"black",align:22}),a=t.pave_width,r=t.pave_height,o=e.fEntries.length,n=t.getPadPainter();if(e.fTitle&&o++,!o||!n)return t;let s=r/o,d=0,f=.02*a;i.setSize(r/(1.2*o)),t.startTextDrawing(i,"font"),e.fTitle&&(t.drawText({latex:1,width:a-2*f,height:s,x:f,y:d,text:e.fTitle}),d+=s);for(let _=0;_<e.fEntries.length;++_){let h=null,g=e.fEntries[_],w=Math.round(a/4);t.drawText({latex:1,width:.75*a-3*f,height:s,x:2*f+w,y:d,text:g.fLabel}),"custom"!=g.fDrawableId?h=n.findSnap(g.fDrawableId,!0):g.fDrawable.fIO&&(h=new R.p(t.getDom(),g.fDrawable.fIO),g.fLine&&h.createv7AttLine(),g.fFill&&h.createv7AttFill(),g.fMarker&&h.createv7AttMarker()),h&&g.fFill&&h.fillatt&&t.draw_g.append("svg:path").attr("d",`M${Math.round(f)},${Math.round(d+.1*s)}h${w}v${Math.round(.8*s)}h${-w}z`).call(h.fillatt.func),h&&g.fLine&&h.lineatt&&t.draw_g.append("svg:path").attr("d",`M${Math.round(f)},${Math.round(d+s/2)}h${w}`).call(h.lineatt.func),h&&g.fError&&h.lineatt&&t.draw_g.append("svg:path").attr("d",`M${Math.round(f+a/8)},${Math.round(d+.2*s)}v${Math.round(.6*s)}`).call(h.lineatt.func),h&&g.fMarker&&h.markeratt&&t.draw_g.append("svg:path").attr("d",h.markeratt.create(f+a/8,d+s/2)).call(h.markeratt.func),d+=s}return t.finishTextDrawing()})()}static draw(t,e,i){return(0,c.Z)(function*(){let a=new T(t,e,i,"legend");return(0,E.ensureRCanvas)(a,!1).then(()=>a.drawPave())})()}}class y extends k{drawContent(){let t=this.getObject(),e=this.v7EvalFont("text",{size:12,color:"black",align:22}),i=this.pave_width,a=this.pave_height,r=t.fText.length;if(!r)return;let o=a/r,n=0,s=.02*i;e.setSize(a/(1.2*r)),this.startTextDrawing(e,"font");for(let d=0;d<t.fText.length;++d)this.drawText({latex:1,width:i-2*s,height:o,x:s,y:n,text:t.fText[d]}),n+=o;return this.finishTextDrawing(void 0,!0)}static draw(t,e,i){return(0,c.Z)(function*(){let a=new y(t,e,i,"pavetext");return(0,E.ensureRCanvas)(a,!1).then(()=>a.drawPave())})()}}class b extends k{clearStat(){this.stats_lines=[]}addText(t){this.stats_lines.push(t)}updateStatistic(t){this.stats_lines=t.lines,this.drawStatistic(this.stats_lines)}fillStatistic(){if(this.getPadPainter()?._fast_drawing)return!1;let e=this.getObject();if(void 0!==e.fLines)return this.stats_lines=e.fLines,delete e.fLines,!0;if(this.v7OfflineMode()){let i=this.getMainPainter();return!!(0,x.isFunc)(i?.fillStatistic)&&i.fillStatistic(this,x.gStyle.fOptStat,x.gStyle.fOptFit)}return void 0!==this.stats_lines}format(t,e){switch(e||(e="stat"),e){case"stat":e=x.gStyle.fStatFormat;break;case"fit":e=x.gStyle.fFitFormat;break;case"entries":if(Math.abs(t)<1e9&&Math.round(t)==t)return t.toFixed(0);e="14.7g";break;case"last":e=this.lastformat}let i=(0,C.Ee)(t,e||"6.4g",!0);return this.lastformat=i[1],i[0]}drawContent(){var t=this;return(0,c.Z)(function*(){return t.fillStatistic()?t.drawStatistic(t.stats_lines):t})()}changeMask(t){let e=this.getObject(),i=1<<t;e.fShowMask=e.fShowMask&i?e.fShowMask&~i:e.fShowMask|i,this.fillStatistic()&&this.drawStatistic(this.stats_lines)}statsContextMenu(t){t.preventDefault(),t.stopPropagation(),createMenu(t,this).then(e=>{let i=this.getObject(),a=this.changeMask.bind(this);e.add("header: StatBox");for(let r=0;r<i.fEntries.length;++r)e.addchk(i.fShowMask&1<<r,i.fEntries[r],r,a);return this.fillObjectExecMenu(e)}).then(e=>e.show())}drawStatistic(t){var e=this;return(0,c.Z)(function*(){let i=e.v7EvalFont("stats_text",{size:12,color:"black",align:22}),a=0,r=0,o=0,n=e.pave_width,s=e.pave_height;if(!t)return e;let d=t.length;for(let l=0;l<d;++l){let P=t[l];if(l>0&&(o=Math.max(o,P.length)),0==l||P.indexOf("|")<0)continue;0===a&&(a=l);let p=P.split("|");p.length>r&&(r=p.length)}let f=s/d,_=!1,h=.02*n,g=e.draw_g.select(".statlines");if(g.empty()?g=e.draw_g.append("svg:g").attr("class","statlines"):g.selectAll("*").remove(),i.setSize(s/(1.2*d)),e.startTextDrawing(i,"font",g),1==d)e.drawText({width:n,height:s,text:t[0],latex:1,draw_g:g});else for(let l=0;l<d;++l){let P=l*f;if(a&&l>=a){let p=t[l].split("|");for(let M=0;M<p.length;++M)e.drawText({align:"middle",x:n*M/r,y:P,latex:0,width:n/r,height:f,text:p[M],draw_g:g})}else if(t[l].indexOf("=")<0){if(0==l){_=!0;let p=Math.max(o,Math.round((n-2*h)/f/.65));t[l].length>p+5&&(t[l]=t[l].slice(0,p+2)+"...")}e.drawText({align:0==l?"middle":"start",x:h,y:P,width:n-2*h,height:f,text:t[l],draw_g:g})}else{let p=t[l].split("="),M=[];for(let m=0;m<2;++m)M.push({align:0==m?"start":"end",x:h,y:P,width:n-2*h,height:f,text:p[m],draw_g:g,_expected_width:n-2*h,_args:M,post_process(F){this._args[0].ready&&this._args[1].ready&&F.scaleTextDrawing(1.05*(this._args[0].result_width&&this._args[1].result_width)/this.__expected_width,this.draw_g)}});for(let m=0;m<2;++m)e.drawText(M[m])}}let w="";if(_&&(w+="M0,"+Math.round(f)+"h"+n),a>0&&r>1){for(let l=a;l<d;++l)w+="M0,"+Math.round(l*f)+"h"+n;for(let l=0;l<r-1;++l)w+="M"+Math.round(n/r*(l+1))+","+Math.round(a*f)+"V"+s}return w&&e.draw_g.append("svg:path").attr("d",w),e.finishTextDrawing(g)})()}redraw(t){var e=this;return(0,c.Z)(function*(){if(t&&(0,x.isStr)(t)&&0==t.indexOf("zoom")&&e.v7NormalMode()){let i={_typename:"ROOT::Experimental::RHistStatBoxBase::RRequest",mask:e.getObject().fShowMask};e.v7SubmitRequest("stat",i,a=>e.updateStatistic(a))}return e.drawPave()})()}static draw(t,e,i){return(0,c.Z)(function*(){let a=new b(t,e,i,e);return(0,E.ensureRCanvas)(a,!1).then(()=>a.drawPave())})()}}}}]);
//# sourceMappingURL=625.b2df831fc47ab055.js.map