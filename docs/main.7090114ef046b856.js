(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[179],{8732:($r,At,Ce)=>{"use strict";function ze(i){return"function"==typeof i}function M(i){const t=i(n=>{Error.call(n),n.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const L=M(i=>function(t){i(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ye(i,e){if(i){const t=i.indexOf(e);0<=t&&i.splice(t,1)}}class Be{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:n}=this;if(ze(n))try{n()}catch(s){e=s instanceof L?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Ie(s)}catch(a){e=e??[],a instanceof L?e=[...e,...a.errors]:e.push(a)}}if(e)throw new L(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ie(e);else{if(e instanceof Be){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ye(t,e)}remove(e){const{_finalizers:t}=this;t&&ye(t,e),e instanceof Be&&e._removeParent(this)}}Be.EMPTY=(()=>{const i=new Be;return i.closed=!0,i})();const je=Be.EMPTY;function Ze(i){return i instanceof Be||i&&"closed"in i&&ze(i.remove)&&ze(i.add)&&ze(i.unsubscribe)}function Ie(i){ze(i)?i():i.unsubscribe()}const He={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Oe={setTimeout(i,e,...t){const{delegate:n}=Oe;return n?.setTimeout?n.setTimeout(i,e,...t):setTimeout(i,e,...t)},clearTimeout(i){const{delegate:e}=Oe;return(e?.clearTimeout||clearTimeout)(i)},delegate:void 0};function ce(i){Oe.setTimeout(()=>{const{onUnhandledError:e}=He;if(!e)throw i;e(i)})}function Y(){}const K=Z("C",void 0,void 0);function Z(i,e,t){return{kind:i,value:e,error:t}}let O=null;function P(i){if(He.useDeprecatedSynchronousErrorHandling){const e=!O;if(e&&(O={errorThrown:!1,error:null}),i(),e){const{errorThrown:t,error:n}=O;if(O=null,t)throw n}}else i()}class p extends Be{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ze(e)&&e.add(this)):this.destination=$}static create(e,t,n){return new F(e,t,n)}next(e){this.isStopped?T(function X(i){return Z("N",i,void 0)}(e),this):this._next(e)}error(e){this.isStopped?T(function ue(i){return Z("E",void 0,i)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?T(K,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const w=Function.prototype.bind;function m(i,e){return w.call(i,e)}class _{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(n){R(n)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(n){R(n)}else R(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){R(t)}}}class F extends p{constructor(e,t,n){let r;if(super(),ze(e)||!e)r={next:e??void 0,error:t??void 0,complete:n??void 0};else{let s;this&&He.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&m(e.next,s),error:e.error&&m(e.error,s),complete:e.complete&&m(e.complete,s)}):r=e}this.destination=new _(r)}}function R(i){He.useDeprecatedSynchronousErrorHandling?function x(i){He.useDeprecatedSynchronousErrorHandling&&O&&(O.errorThrown=!0,O.error=i)}(i):ce(i)}function T(i,e){const{onStoppedNotification:t}=He;t&&Oe.setTimeout(()=>t(i,e))}const $={closed:!0,next:Y,error:function q(i){throw i},complete:Y},J="function"==typeof Symbol&&Symbol.observable||"@@observable";function ie(i){return i}function de(i){return 0===i.length?ie:1===i.length?i[0]:function(t){return i.reduce((n,r)=>r(n),t)}}let fe=(()=>{class i{constructor(t){t&&(this._subscribe=t)}lift(t){const n=new i;return n.source=this,n.operator=t,n}subscribe(t,n,r){const s=function z(i){return i&&i instanceof p||function U(i){return i&&ze(i.next)&&ze(i.error)&&ze(i.complete)}(i)&&Ze(i)}(t)?t:new F(t,n,r);return P(()=>{const{operator:a,source:l}=this;s.add(a?a.call(s,l):l?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(n){t.error(n)}}forEach(t,n){return new(n=I(n))((r,s)=>{const a=new F({next:l=>{try{t(l)}catch(u){s(u),a.unsubscribe()}},error:s,complete:r});this.subscribe(a)})}_subscribe(t){var n;return null===(n=this.source)||void 0===n?void 0:n.subscribe(t)}[J](){return this}pipe(...t){return de(t)(this)}toPromise(t){return new(t=I(t))((n,r)=>{let s;this.subscribe(a=>s=a,a=>r(a),()=>n(s))})}}return i.create=e=>new i(e),i})();function I(i){var e;return null!==(e=i??He.Promise)&&void 0!==e?e:Promise}const le=M(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let D=(()=>{class i extends fe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const n=new oe(this,this);return n.operator=t,n}_throwIfClosed(){if(this.closed)throw new le}next(t){P(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const n of this.currentObservers)n.next(t)}})}error(t){P(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:n}=this;for(;n.length;)n.shift().error(t)}})}complete(){P(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:n,isStopped:r,observers:s}=this;return n||r?je:(this.currentObservers=null,s.push(t),new Be(()=>{this.currentObservers=null,ye(s,t)}))}_checkFinalizedStatuses(t){const{hasError:n,thrownError:r,isStopped:s}=this;n?t.error(r):s&&t.complete()}asObservable(){const t=new fe;return t.source=this,t}}return i.create=(e,t)=>new oe(e,t),i})();class oe extends D{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)}error(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:je}}function _e(i){return ze(i?.lift)}function Ee(i){return e=>{if(_e(e))return e.lift(function(t){try{return i(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ve(i,e,t,n,r){return new Qe(i,e,t,n,r)}class Qe extends p{constructor(e,t,n,r,s,a){super(e),this.onFinalize=s,this.shouldUnsubscribe=a,this._next=t?function(l){try{t(l)}catch(u){e.error(u)}}:super._next,this._error=r?function(l){try{r(l)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function et(i,e){return Ee((t,n)=>{let r=0;t.subscribe(Ve(n,s=>{n.next(i.call(e,s,r++))}))})}function $n(i){return this instanceof $n?(this.v=i,this):new $n(i)}function Gt(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=i[Symbol.asyncIterator];return e?e.call(i):(i=function Ot(i){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&"number"==typeof i.length)return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(i),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=i[s]&&function(a){return new Promise(function(l,u){!function r(s,a,l,u){Promise.resolve(u).then(function(d){s({value:d,done:l})},a)}(l,u,(a=i[s](a)).done,a.value)})}}}const br=i=>i&&"number"==typeof i.length&&"function"!=typeof i;function Ur(i){return ze(i?.then)}function Ar(i){return ze(i[J])}function cs(i){return Symbol.asyncIterator&&ze(i?.[Symbol.asyncIterator])}function Rs(i){return new TypeError(`You provided ${null!==i&&"object"==typeof i?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ho=function es(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ro(i){return ze(i?.[ho])}function ws(i){return function vn(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,n=t.apply(i,e||[]),s=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(C){n[C]&&(r[C]=function(k){return new Promise(function(Q,se){s.push([C,k,Q,se])>1||l(C,k)})})}function l(C,k){try{!function u(C){C.value instanceof $n?Promise.resolve(C.value.v).then(d,A):y(s[0][2],C)}(n[C](k))}catch(Q){y(s[0][3],Q)}}function d(C){l("next",C)}function A(C){l("throw",C)}function y(C,k){C(k),s.shift(),s.length&&l(s[0][0],s[0][1])}}(this,arguments,function*(){const t=i.getReader();try{for(;;){const{value:n,done:r}=yield $n(t.read());if(r)return yield $n(void 0);yield yield $n(n)}}finally{t.releaseLock()}})}function Es(i){return ze(i?.getReader)}function Yo(i){if(i instanceof fe)return i;if(null!=i){if(Ar(i))return function kl(i){return new fe(e=>{const t=i[J]();if(ze(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(i);if(br(i))return function fo(i){return new fe(e=>{for(let t=0;t<i.length&&!e.closed;t++)e.next(i[t]);e.complete()})}(i);if(Ur(i))return function eo(i){return new fe(e=>{i.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ce)})}(i);if(cs(i))return xr(i);if(ro(i))return function al(i){return new fe(e=>{for(const t of i)if(e.next(t),e.closed)return;e.complete()})}(i);if(Es(i))return function _o(i){return xr(ws(i))}(i)}throw Rs(i)}function xr(i){return new fe(e=>{(function el(i,e){var t,n,r,s;return function ft(i,e,t,n){return new(t||(t=Promise))(function(s,a){function l(A){try{d(n.next(A))}catch(y){a(y)}}function u(A){try{d(n.throw(A))}catch(y){a(y)}}function d(A){A.done?s(A.value):function r(s){return s instanceof t?s:new t(function(a){a(s)})}(A.value).then(l,u)}d((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=Gt(i);!(n=yield t.next()).done;)if(e.next(n.value),e.closed)return}catch(a){r={error:a}}finally{try{n&&!n.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(i,e).catch(t=>e.error(t))})}function lo(i,e,t,n=0,r=!1){const s=e.schedule(function(){t(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(s),!r)return s}function ga(i,e,t=1/0){return ze(e)?ga((n,r)=>et((s,a)=>e(n,s,r,a))(Yo(i(n,r))),t):("number"==typeof e&&(t=e),Ee((n,r)=>function Yi(i,e,t,n,r,s,a,l){const u=[];let d=0,A=0,y=!1;const C=()=>{y&&!u.length&&!d&&e.complete()},k=se=>d<n?Q(se):u.push(se),Q=se=>{s&&e.next(se),d++;let he=!1;Yo(t(se,A++)).subscribe(Ve(e,re=>{r?.(re),s?k(re):e.next(re)},()=>{he=!0},void 0,()=>{if(he)try{for(d--;u.length&&d<n;){const re=u.shift();a?lo(e,a,()=>Q(re)):Q(re)}C()}catch(re){e.error(re)}}))};return i.subscribe(Ve(e,k,()=>{y=!0,C()})),()=>{l?.()}}(n,r,i,t)))}function xa(i=1/0){return ga(ie,i)}const Ta=new fe(i=>i.complete());function Ae(i){return i&&ze(i.schedule)}function rt(i){return i[i.length-1]}function ot(i){return ze(rt(i))?i.pop():void 0}function wt(i){return Ae(rt(i))?i.pop():void 0}function pn(i,e=0){return Ee((t,n)=>{t.subscribe(Ve(n,r=>lo(n,i,()=>n.next(r),e),()=>lo(n,i,()=>n.complete(),e),r=>lo(n,i,()=>n.error(r),e)))})}function jn(i,e=0){return Ee((t,n)=>{n.add(i.schedule(()=>t.subscribe(n),e))})}function $e(i,e){if(!i)throw new Error("Iterable cannot be null");return new fe(t=>{lo(t,e,()=>{const n=i[Symbol.asyncIterator]();lo(t,e,()=>{n.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function un(i,e){return e?function it(i,e){if(null!=i){if(Ar(i))return function Yn(i,e){return Yo(i).pipe(jn(e),pn(e))}(i,e);if(br(i))return function mt(i,e){return new fe(t=>{let n=0;return e.schedule(function(){n===i.length?t.complete():(t.next(i[n++]),t.closed||this.schedule())})})}(i,e);if(Ur(i))return function lt(i,e){return Yo(i).pipe(jn(e),pn(e))}(i,e);if(cs(i))return $e(i,e);if(ro(i))return function Lt(i,e){return new fe(t=>{let n;return lo(t,e,()=>{n=i[ho](),lo(t,e,()=>{let r,s;try{({value:r,done:s}=n.next())}catch(a){return void t.error(a)}s?t.complete():t.next(r)},0,!0)}),()=>ze(n?.return)&&n.return()})}(i,e);if(Es(i))return function Nt(i,e){return $e(ws(i),e)}(i,e)}throw Rs(i)}(i,e):Yo(i)}function It(...i){const e=wt(i),t=function fn(i,e){return"number"==typeof rt(i)?i.pop():e}(i,1/0),n=i;return n.length?1===n.length?Yo(n[0]):xa(t)(un(n,e)):Ta}function Sn(i,e,...t){if(!0===e)return void i();if(!1===e)return;const n=new F({next:()=>{n.unsubscribe(),i()}});return Yo(e(...t)).subscribe(n)}function Fn(i){for(let e in i)if(i[e]===Fn)return e;throw Error("Could not find renamed property on target object.")}function Gi(i,e){for(const t in e)e.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(i[t]=e[t])}function In(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(In).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const e=i.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ii(i,e){return null==i||""===i?null===e?"":e:null==e||""===e?i:i+" "+e}const lr=Fn({__forward_ref__:Fn});function cr(i){return i.__forward_ref__=cr,i.toString=function(){return In(this())},i}function Qi(i){return is(i)?i():i}function is(i){return"function"==typeof i&&i.hasOwnProperty(lr)&&i.__forward_ref__===cr}function Vs(i){return i&&!!i.\u0275providers}const yo="https://g.co/ng/security#xss";class pi extends Error{constructor(e,t){super(bl(e,t)),this.code=e}}function bl(i,e){return`NG0${Math.abs(i)}${e?": "+e.trim():""}`}function Fr(i){return"string"==typeof i?i:null==i?"":String(i)}function tl(i,e){throw new pi(-201,!1)}function E(i,e){null==i&&function H(i,e,t,n){throw new Error(`ASSERTION ERROR: ${i}`+(null==n?"":` [Expected=> ${t} ${n} ${e} <=Actual]`))}(e,i,null,"!=")}function Ue(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function pt(i){return{providers:i.providers||[],imports:i.imports||[]}}function vt(i){return hn(i,An)||hn(i,ti)}function hn(i,e){return i.hasOwnProperty(e)?i[e]:null}function mn(i){return i&&(i.hasOwnProperty(fi)||i.hasOwnProperty(_i))?i[fi]:null}const An=Fn({\u0275prov:Fn}),fi=Fn({\u0275inj:Fn}),ti=Fn({ngInjectableDef:Fn}),_i=Fn({ngInjectorDef:Fn});var Mn=(()=>((Mn=Mn||{})[Mn.Default=0]="Default",Mn[Mn.Host=1]="Host",Mn[Mn.Self=2]="Self",Mn[Mn.SkipSelf=4]="SkipSelf",Mn[Mn.Optional=8]="Optional",Mn))();let Nr;function Bi(i){const e=Nr;return Nr=i,e}function Ms(i,e,t){const n=vt(i);return n&&"root"==n.providedIn?void 0===n.value?n.value=n.factory():n.value:t&Mn.Optional?null:void 0!==e?e:void tl(In(i))}const Cs=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ra={},ha="__NG_DI_FLAG__",eA="ngTempTokenPath",qd="ngTokenPath",tA=/\n/gm,Yu="\u0275",Vl="__source";let fp;function nA(i){const e=fp;return fp=i,e}function Py(i,e=Mn.Default){if(void 0===fp)throw new pi(-203,!1);return null===fp?Ms(i,void 0,e):fp.get(i,e&Mn.Optional?null:void 0,e)}function oi(i,e=Mn.Default){return(function Ui(){return Nr}()||Py)(Qi(i),e)}function Do(i,e=Mn.Default){return oi(i,pp(e))}function pp(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function m0(i){const e=[];for(let t=0;t<i.length;t++){const n=Qi(i[t]);if(Array.isArray(n)){if(0===n.length)throw new pi(900,!1);let r,s=Mn.Default;for(let a=0;a<n.length;a++){const l=n[a],u=Fy(l);"number"==typeof u?-1===u?r=l.token:s|=u:r=l}e.push(oi(r,s))}else e.push(oi(n))}return e}function jA(i,e){return i[ha]=e,i.prototype[ha]=e,i}function Fy(i){return i[ha]}function Qd(i){return{toString:i}.toString()}var bd=(()=>((bd=bd||{})[bd.OnPush=0]="OnPush",bd[bd.Default=1]="Default",bd))(),Zu=(()=>{return(i=Zu||(Zu={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Zu;var i})();const yh={},wa=[],$A=Fn({\u0275cmp:Fn}),uu=Fn({\u0275dir:Fn}),Da=Fn({\u0275pipe:Fn}),cl=Fn({\u0275mod:Fn}),Di=Fn({\u0275fac:Fn}),Zl=Fn({__NG_ELEMENT_ID__:Fn});let g0=0;function Kr(i){return Qd(()=>{const e=Lf(i),t={...e,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===bd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||Zu.Emulated,id:"c"+g0++,styles:i.styles||wa,_:null,schemas:i.schemas||null,tView:null};qh(t);const n=i.dependencies;return t.directiveDefs=Wd(n,!1),t.pipeDefs=Wd(n,!0),t})}function XA(i){return Go(i)||qo(i)}function Iu(i){return null!==i}function Xs(i){return Qd(()=>({type:i.type,bootstrap:i.bootstrap||wa,declarations:i.declarations||wa,imports:i.imports||wa,exports:i.exports||wa,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function ul(i,e){if(null==i)return yh;const t={};for(const n in i)if(i.hasOwnProperty(n)){let r=i[n],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=n,e&&(e[r]=s)}return t}function gr(i){return Qd(()=>{const e=Lf(i);return qh(e),e})}function ia(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Go(i){return i[$A]||null}function qo(i){return i[uu]||null}function yc(i){return i[Da]||null}function wr(i,e){const t=i[cl]||null;if(!t&&!0===e)throw new Error(`Type ${In(i)} does not have '\u0275mod' property.`);return t}function Lf(i){const e={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:e,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||wa,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:ul(i.inputs,e),outputs:ul(i.outputs)}}function qh(i){i.features?.forEach(e=>e(i))}function Wd(i,e){if(!i)return null;const t=e?yc:XA;return()=>("function"==typeof i?i():i).map(n=>t(n)).filter(Iu)}const vh=0,ts=1,Ws=2,js=3,Lo=4,Ha=5,Ut=6,jd=7,Al=8,du=9,zc=10,vo=11,Ju=12,eh=13,$d=14,Pu=15,Nl=16,bh=17,xh=18,Ul=19,iu=20,KA=21,ka=22,jm=1,Ap=2,iA=7,xd=8,th=9,Hc=10;function Jl(i){return Array.isArray(i)&&"object"==typeof i[jm]}function Vc(i){return Array.isArray(i)&&!0===i[jm]}function rA(i){return 0!=(4&i.flags)}function wh(i){return i.componentOffset>-1}function so(i){return 1==(1&i.flags)}function Dc(i){return!!i.template}function fu(i){return 0!=(256&i[Ws])}function Qh(i,e){return i.hasOwnProperty(Di)?i[Di]:null}class Y_{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ic(){return gp}function gp(i){return i.type.prototype.ngOnChanges&&(i.setInput=em),Ly}function Ly(){const i=Md(this),e=i?.current;if(e){const t=i.previous;if(t===yh)i.previous=e;else for(let n in e)t[n]=e[n];i.current=null,this.ngOnChanges(e)}}function em(i,e,t,n){const r=this.declaredInputs[t],s=Md(i)||function Fu(i,e){return i[_p]=e}(i,{previous:yh,current:null}),a=s.current||(s.current={}),l=s.previous,u=l[r];a[r]=new Y_(u&&u.currentValue,e,l===yh),i[n]=e}Ic.ngInherit=!0;const _p="__ngSimpleChanges__";function Md(i){return i[_p]||null}const Ru=function(i,e,t){},v0="svg";function vc(i){for(;Array.isArray(i);)i=i[vh];return i}function Wh(i,e){return vc(e[i])}function Va(i,e){return vc(e[i.index])}function pu(i,e){return i.data[e]}function jh(i,e){return i[e]}function bc(i,e){const t=e[i];return Jl(t)?t:t[vh]}function Mh(i){return 64==(64&i[Ws])}function So(i,e){return null==e?null:i[e]}function Gl(i){i[xh]=0}function vp(i,e){i[Ha]+=e;let t=i,n=i[js];for(;null!==n&&(1===e&&1===t[Ha]||-1===e&&0===t[Ha]);)n[Ha]+=e,t=n,n=n[js]}const Io={lFrame:cA(null),bindingsEnabled:!0};function Z_(){return Io.bindingsEnabled}function Zi(){return Io.lFrame.lView}function _a(){return Io.lFrame.tView}function ks(i){return Io.lFrame.contextLView=i,i[Al]}function Ts(i){return Io.lFrame.contextLView=null,i}function xc(){let i=nm();for(;null!==i&&64===i.type;)i=i.parent;return i}function nm(){return Io.lFrame.currentTNode}function qc(i,e){const t=Io.lFrame;t.currentTNode=i,t.isParent=e}function mu(){return Io.lFrame.isParent}function Xh(){Io.lFrame.isParent=!1}function Xl(){const i=Io.lFrame;let e=i.bindingRootIndex;return-1===e&&(e=i.bindingRootIndex=i.tView.bindingStartIndex),e}function Yd(){return Io.lFrame.bindingIndex++}function Yh(i){const e=Io.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+i,t}function w0(i,e){const t=Io.lFrame;t.bindingIndex=t.bindingRootIndex=i,ql(e)}function ql(i){Io.lFrame.currentDirectiveIndex=i}function Zd(){return Io.lFrame.currentQueryIndex}function Sd(i){Io.lFrame.currentQueryIndex=i}function Td(i){const e=i[ts];return 2===e.type?e.declTNode:1===e.type?i[Ut]:null}function rm(i,e,t){if(t&Mn.SkipSelf){let r=e,s=i;for(;!(r=r.parent,null!==r||t&Mn.Host||(r=Td(s),null===r||(s=s[Pu],10&r.type))););if(null===r)return!1;e=r,i=s}const n=Io.lFrame=lA();return n.currentTNode=e,n.lView=i,!0}function aA(i){const e=lA(),t=i[ts];Io.lFrame=e,e.currentTNode=t.firstChild,e.lView=i,e.tView=t,e.contextLView=i,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function lA(){const i=Io.lFrame,e=null===i?null:i.child;return null===e?cA(i):e}function cA(i){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=e),e}function uA(){const i=Io.lFrame;return Io.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const sm=uA;function hA(){const i=uA();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Wr(){return Io.lFrame.selectedIndex}function Yr(i){Io.lFrame.selectedIndex=i}function Il(){const i=Io.lFrame;return pu(i.tView,i.selectedIndex)}function xl(){Io.lFrame.currentNamespace=v0}function Jh(){!function Zm(){Io.lFrame.currentNamespace=null}()}function Jm(i,e){for(let t=e.directiveStart,n=e.directiveEnd;t<n;t++){const s=i.data[t].type.prototype,{ngAfterContentInit:a,ngAfterContentChecked:l,ngAfterViewInit:u,ngAfterViewChecked:d,ngOnDestroy:A}=s;a&&(i.contentHooks??(i.contentHooks=[])).push(-t,a),l&&((i.contentHooks??(i.contentHooks=[])).push(t,l),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(t,l)),u&&(i.viewHooks??(i.viewHooks=[])).push(-t,u),d&&((i.viewHooks??(i.viewHooks=[])).push(t,d),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(t,d)),null!=A&&(i.destroyHooks??(i.destroyHooks=[])).push(t,A)}}function eg(i,e,t){M0(i,e,3,t)}function fA(i,e,t,n){(3&i[Ws])===t&&M0(i,e,t,n)}function Ed(i,e){let t=i[Ws];(3&t)===e&&(t&=2047,t+=1,i[Ws]=t)}function M0(i,e,t,n){const s=n??-1,a=e.length-1;let l=0;for(let u=void 0!==n?65535&i[xh]:0;u<a;u++)if("number"==typeof e[u+1]){if(l=e[u],null!=n&&l>=n)break}else e[u]<0&&(i[xh]+=65536),(l<s||-1==s)&&(tg(i,t,e,u),i[xh]=(4294901760&i[xh])+u+2),u++}function tg(i,e,t,n){const r=t[n]<0,s=t[n+1],l=i[r?-t[n]:t[n]];if(r){if(i[Ws]>>11<i[xh]>>16&&(3&i[Ws])===e){i[Ws]+=2048,Ru(4,l,s);try{s.call(l)}finally{Ru(5,l,s)}}}else{Ru(4,l,s);try{s.call(l)}finally{Ru(5,l,s)}}}const pA=-1;class AA{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function ed(i,e,t){let n=0;for(;n<t.length;){const r=t[n];if("number"==typeof r){if(0!==r)break;n++;const s=t[n++],a=t[n++],l=t[n++];i.setAttribute(e,a,l,s)}else{const s=r,a=t[++n];td(s)?i.setProperty(e,s,a):i.setAttribute(e,s,a),n++}}return n}function ih(i){return 3===i||4===i||6===i}function td(i){return 64===i.charCodeAt(0)}function nd(i,e){if(null!==e&&0!==e.length)if(null===i||0===i.length)i=e.slice();else{let t=-1;for(let n=0;n<e.length;n++){const r=e[n];"number"==typeof r?t=r:0===t||ng(i,t,r,null,-1===t||2===t?e[++n]:null)}}return i}function ng(i,e,t,n,r){let s=0,a=i.length;if(-1===e)a=-1;else for(;s<i.length;){const l=i[s++];if("number"==typeof l){if(l===e){a=-1;break}if(l>e){a=s-1;break}}}for(;s<i.length;){const l=i[s];if("number"==typeof l)break;if(l===t){if(null===n)return void(null!==r&&(i[s+1]=r));if(n===i[s+1])return void(i[s+2]=r)}s++,null!==n&&s++,null!==r&&s++}-1!==a&&(i.splice(a,0,e),s=a+1),i.splice(s++,0,t),null!==n&&i.splice(s++,0,n),null!==r&&i.splice(s++,0,r)}function E0(i){return i!==pA}function bp(i){return 32767&i}function Ch(i,e){let t=function t1(i){return i>>16}(i),n=e;for(;t>0;)n=n[Pu],t--;return n}let ig=!0;function xp(i){const e=ig;return ig=i,e}const rg=255,sg=5;let og=0;const Qc={};function Jd(i,e){const t=B0(i,e);if(-1!==t)return t;const n=e[ts];n.firstCreatePass&&(i.injectorIndex=e.length,ag(n.data,i),ag(e,null),ag(n.blueprint,null));const r=ef(i,e),s=i.injectorIndex;if(E0(r)){const a=bp(r),l=Ch(r,e),u=l[ts].data;for(let d=0;d<8;d++)e[s+d]=l[a+d]|u[a+d]}return e[s+8]=r,s}function ag(i,e){i.push(0,0,0,0,0,0,0,0,e)}function B0(i,e){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===e[i.injectorIndex+8]?-1:i.injectorIndex}function ef(i,e){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let t=0,n=null,r=e;for(;null!==r;){if(n=wp(r),null===n)return pA;if(t++,r=r[Pu],-1!==n.injectorIndex)return n.injectorIndex|t<<16}return pA}function lg(i,e,t){!function mA(i,e,t){let n;"string"==typeof t?n=t.charCodeAt(0)||0:t.hasOwnProperty(Zl)&&(n=t[Zl]),null==n&&(n=t[Zl]=og++);const r=n&rg;e.data[i+(r>>sg)]|=1<<r}(i,e,t)}function P0(i,e,t){if(t&Mn.Optional||void 0!==i)return i;tl()}function F0(i,e,t,n){if(t&Mn.Optional&&void 0===n&&(n=null),!(t&(Mn.Self|Mn.Host))){const r=i[du],s=Bi(void 0);try{return r?r.get(e,n,t&Mn.Optional):Ms(e,n,t&Mn.Optional)}finally{Bi(s)}}return P0(n,0,t)}function cg(i,e,t,n=Mn.Default,r){if(null!==i){if(1024&e[Ws]){const a=function r1(i,e,t,n,r){let s=i,a=e;for(;null!==s&&null!==a&&1024&a[Ws]&&!(256&a[Ws]);){const l=wc(s,a,t,n|Mn.Self,Qc);if(l!==Qc)return l;let u=s.parent;if(!u){const d=a[KA];if(d){const A=d.get(t,Qc,n);if(A!==Qc)return A}u=wp(a),a=a[Pu]}s=u}return r}(i,e,t,n,Qc);if(a!==Qc)return a}const s=wc(i,e,t,n,Qc);if(s!==Qc)return s}return F0(e,t,n,r)}function wc(i,e,t,n,r){const s=function n1(i){if("string"==typeof i)return i.charCodeAt(0)||0;const e=i.hasOwnProperty(Zl)?i[Zl]:void 0;return"number"==typeof e?e>=0?e&rg:hg:e}(t);if("function"==typeof s){if(!rm(e,i,n))return n&Mn.Host?P0(r,0,n):F0(e,t,n,r);try{const a=s(n);if(null!=a||n&Mn.Optional)return a;tl()}finally{sm()}}else if("number"==typeof s){let a=null,l=B0(i,e),u=pA,d=n&Mn.Host?e[Nl][Ut]:null;for((-1===l||n&Mn.SkipSelf)&&(u=-1===l?ef(i,e):e[l+8],u!==pA&&lm(n,!1)?(a=e[ts],l=bp(u),e=Ch(u,e)):l=-1);-1!==l;){const A=e[ts];if(R0(s,l,A.data)){const y=ug(l,e,t,a,n,d);if(y!==Qc)return y}u=e[l+8],u!==pA&&lm(n,e[ts].data[l+8]===d)&&R0(s,l,e)?(a=A,l=bp(u),e=Ch(u,e)):l=-1}}return r}function ug(i,e,t,n,r,s){const a=e[ts],l=a.data[i+8],A=am(l,a,t,null==n?wh(l)&&ig:n!=a&&0!=(3&l.type),r&Mn.Host&&s===l);return null!==A?Vf(e,a,A,l):Qc}function am(i,e,t,n,r){const s=i.providerIndexes,a=e.data,l=1048575&s,u=i.directiveStart,A=s>>20,C=r?l+A:i.directiveEnd;for(let k=n?l:l+A;k<C;k++){const Q=a[k];if(k<u&&t===Q||k>=u&&Q.type===t)return k}if(r){const k=a[u];if(k&&Dc(k)&&k.type===t)return u}return null}function Vf(i,e,t,n){let r=i[t];const s=e.data;if(function Uy(i){return i instanceof AA}(r)){const a=r;a.resolving&&function Ea(i,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${i}`:"";throw new pi(-200,`Circular dependency in DI detected for ${i}${t}`)}(function Is(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Fr(i)}(s[t]));const l=xp(a.canSeeViewProviders);a.resolving=!0;const u=a.injectImpl?Bi(a.injectImpl):null;rm(i,n,Mn.Default);try{r=i[t]=a.factory(void 0,s,i,n),e.firstCreatePass&&t>=n.directiveStart&&function om(i,e,t){const{ngOnChanges:n,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(n){const a=gp(e);(t.preOrderHooks??(t.preOrderHooks=[])).push(i,a),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(i,a)}r&&(t.preOrderHooks??(t.preOrderHooks=[])).push(0-i,r),s&&((t.preOrderHooks??(t.preOrderHooks=[])).push(i,s),(t.preOrderCheckHooks??(t.preOrderCheckHooks=[])).push(i,s))}(t,s[t],e)}finally{null!==u&&Bi(u),xp(l),a.resolving=!1,sm()}}return r}function R0(i,e,t){return!!(t[e+(i>>sg)]&1<<i)}function lm(i,e){return!(i&Mn.Self||i&Mn.Host&&e)}class Sh{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return cg(this._tNode,this._lView,e,pp(n),t)}}function hg(){return new Sh(xc(),Zi())}function il(i){return Qd(()=>{const e=i.prototype.constructor,t=e[Di]||k0(e),n=Object.prototype;let r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){const s=r[Di]||k0(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function k0(i){return is(i)?()=>{const e=k0(Qi(i));return e&&e()}:Qh(i)}function wp(i){const e=i[ts],t=e.type;return 2===t?e.declTNode:1===t?i[Ut]:null}function Th(i){return function I0(i,e){if("class"===e)return i.classes;if("style"===e)return i.styles;const t=i.attrs;if(t){const n=t.length;let r=0;for(;r<n;){const s=t[r];if(ih(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<n&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(xc(),i)}const Ql="__parameters__";function Gf(i,e,t){return Qd(()=>{const n=function tf(i){return function(...t){if(i){const n=i(...t);for(const r in n)this[r]=n[r]}}}(e);function r(...s){if(this instanceof r)return n.apply(this,s),this;const a=new r(...s);return l.annotation=a,l;function l(u,d,A){const y=u.hasOwnProperty(Ql)?u[Ql]:Object.defineProperty(u,Ql,{value:[]})[Ql];for(;y.length<=A;)y.push(null);return(y[A]=y[A]||[]).push(a),u}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}class sr{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=Ue({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Dd(i,e){i.forEach(t=>Array.isArray(t)?Dd(t,e):e(t))}function cm(i,e,t){e>=i.length?i.push(t):i.splice(e,0,t)}function pg(i,e){return e>=i.length-1?i.pop():i.splice(e,1)[0]}function Sp(i,e){const t=[];for(let n=0;n<i;n++)t.push(e);return t}function Lu(i,e,t){let n=qf(i,e);return n>=0?i[1|n]=t:(n=~n,function l1(i,e,t,n){let r=i.length;if(r==e)i.push(t,n);else if(1===r)i.push(n,i[0]),i[0]=t;else{for(r--,i.push(i[r-1],i[r]);r>e;)i[r]=i[r-2],r--;i[e]=t,i[e+1]=n}}(i,n,e,t)),n}function _A(i,e){const t=qf(i,e);if(t>=0)return i[1|t]}function qf(i,e){return function c1(i,e,t){let n=0,r=i.length>>t;for(;r!==n;){const s=n+(r-n>>1),a=i[s<<t];if(e===a)return s<<t;a>e?r=s:n=s+1}return~(r<<t)}(i,e,1)}const N0=jA(Gf("Inject",i=>({token:i})),-1),Bd=jA(Gf("Optional"),8),vA=jA(Gf("SkipSelf"),4);var Mc=(()=>((Mc=Mc||{})[Mc.Important=1]="Important",Mc[Mc.DashCase=2]="DashCase",Mc))();const jf=new Map;let MA=0;const wg="__ngContext__";function qr(i,e){Jl(e)?(i[wg]=e[iu],function Ep(i){jf.set(i[iu],i)}(e)):i[wg]=e}let mm;function kc(i,e){return mm(i,e)}function gm(i){const e=i[js];return Vc(e)?e[js]:e}function Fd(i){return cf(i[eh])}function Oc(i){return cf(i[Lo])}function cf(i){for(;null!==i&&!Vc(i);)i=i[Lo];return i}function ad(i,e,t,n,r){if(null!=n){let s,a=!1;Vc(n)?s=n:Jl(n)&&(a=!0,n=n[vh]);const l=vc(n);0===i&&null!==t?null==r?ym(e,t,l):Nu(e,t,l,r||null,!0):1===i&&null!==t?Nu(e,t,l,r||null,!0):2===i?function Ig(i,e,t){const n=Dg(i,e);n&&function v1(i,e,t,n){i.removeChild(e,t,n)}(i,n,e,t)}(e,l,a):3===i&&e.destroyNode(l),null!=s&&function ke(i,e,t,n,r){const s=t[iA];s!==vc(t)&&ad(e,i,n,s,r);for(let l=Hc;l<t.length;l++){const u=t[l];G(u[ts],u,i,e,n,s)}}(e,i,s,t,r)}}function Tg(i,e,t){return i.createElement(e,t)}function _1(i,e){const t=i[th],n=t.indexOf(e),r=e[js];512&e[Ws]&&(e[Ws]&=-513,vp(r,-1)),t.splice(n,1)}function Rd(i,e){if(i.length<=Hc)return;const t=Hc+e,n=i[t];if(n){const r=n[bh];null!==r&&r!==i&&_1(r,n),e>0&&(i[t-1][Lo]=n[Lo]);const s=pg(i,Hc+e);!function g1(i,e){G(i,e,e[vo],2,null,null),e[vh]=null,e[Ut]=null}(n[ts],n);const a=s[Ul];null!==a&&a.detachView(s[ts]),n[js]=null,n[Lo]=null,n[Ws]&=-65}return n}function ld(i,e){if(!(128&e[Ws])){const t=e[vo];t.destroyNode&&G(i,e,t,3,null,null),function fc(i){let e=i[eh];if(!e)return kd(i[ts],i);for(;e;){let t=null;if(Jl(e))t=e[eh];else{const n=e[Hc];n&&(t=n)}if(!t){for(;e&&!e[Lo]&&e!==i;)Jl(e)&&kd(e[ts],e),e=e[js];null===e&&(e=i),Jl(e)&&kd(e[ts],e),t=e&&e[Lo]}e=t}}(e)}}function kd(i,e){if(!(128&e[Ws])){e[Ws]&=-65,e[Ws]|=128,function hf(i,e){let t;if(null!=i&&null!=(t=i.destroyHooks))for(let n=0;n<t.length;n+=2){const r=e[t[n]];if(!(r instanceof AA)){const s=t[n+1];if(Array.isArray(s))for(let a=0;a<s.length;a+=2){const l=r[s[a]],u=s[a+1];Ru(4,l,u);try{u.call(l)}finally{Ru(5,l,u)}}else{Ru(4,r,s);try{s.call(r)}finally{Ru(5,r,s)}}}}}(i,e),function y1(i,e){const t=i.cleanup,n=e[jd];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const a=t[s+3];a>=0?n[r=a]():n[r=-a].unsubscribe(),s+=2}else{const a=n[r=t[s+1]];t[s].call(a)}if(null!==n){for(let s=r+1;s<n.length;s++)(0,n[s])();e[jd]=null}}(i,e),1===e[ts].type&&e[vo].destroy();const t=e[bh];if(null!==t&&Vc(e[js])){t!==e[js]&&_1(t,e);const n=e[Ul];null!==n&&n.detachView(i)}!function xg(i){jf.delete(i[iu])}(e)}}function SA(i,e,t){return function _m(i,e,t){let n=e;for(;null!==n&&40&n.type;)n=(e=n).parent;if(null===n)return t[vh];{const{componentOffset:r}=n;if(r>-1){const{encapsulation:s}=i.data[n.directiveStart+r];if(s===Zu.None||s===Zu.Emulated)return null}return Va(n,t)}}(i,e.parent,t)}function Nu(i,e,t,n,r){i.insertBefore(e,t,n,r)}function ym(i,e,t){i.appendChild(e,t)}function Bp(i,e,t,n,r){null!==n?Nu(i,e,t,n,r):ym(i,e,t)}function Dg(i,e){return i.parentNode(e)}function $0(i,e,t){return X0(i,e,t)}let K0,No,Ma,X0=function x1(i,e,t){return 40&i.type?Va(i,t):null};function TA(i,e,t,n){const r=SA(i,n,e),s=e[vo],l=$0(n.parent||e[Ut],n,e);if(null!=r)if(Array.isArray(t))for(let u=0;u<t.length;u++)Bp(s,r,t[u],l,!1);else Bp(s,r,t,l,!1);void 0!==K0&&K0(s,n,e,t,r)}function vm(i,e){if(null!==e){const t=e.type;if(3&t)return Va(e,i);if(4&t)return Y0(-1,i[e.index]);if(8&t){const n=e.child;if(null!==n)return vm(i,n);{const r=i[e.index];return Vc(r)?Y0(-1,r):vc(r)}}if(32&t)return kc(e,i)()||vc(i[e.index]);{const n=M1(i,e);return null!==n?Array.isArray(n)?n[0]:vm(gm(i[Nl]),n):vm(i,e.next)}}return null}function M1(i,e){return null!==e?i[Nl][Ut].projection[e.projection]:null}function Y0(i,e){const t=Hc+i+1;if(t<e.length){const n=e[t],r=n[ts].firstChild;if(null!==r)return vm(n,r)}return e[iA]}function W(i,e,t,n,r,s,a){for(;null!=t;){const l=n[t.index],u=t.type;if(a&&0===e&&(l&&qr(vc(l),n),t.flags|=2),32!=(32&t.flags))if(8&u)W(i,e,t.child,n,r,s,!1),ad(e,i,r,l,s);else if(32&u){const d=kc(t,n);let A;for(;A=d();)ad(e,i,r,A,s);ad(e,i,r,l,s)}else 16&u?ee(i,e,n,t,r,s):ad(e,i,r,l,s);t=a?t.projectionNext:t.next}}function G(i,e,t,n,r,s){W(t,n,i.firstChild,e,r,s,!1)}function ee(i,e,t,n,r,s){const a=t[Nl],u=a[Ut].projection[n.projection];if(Array.isArray(u))for(let d=0;d<u.length;d++)ad(e,i,r,u[d],s);else W(i,e,u,a[js],r,s,!0)}function Kt(i,e,t){""===t?i.removeAttribute(e,"class"):i.setAttribute(e,"class",t)}function jt(i,e,t){const{mergedAttrs:n,classes:r,styles:s}=t;null!==n&&ed(i,e,n),null!==r&&Kt(i,e,r),null!==s&&function St(i,e,t){i.setAttribute(e,"style",t)}(i,e,s)}function Ca(i){return function Uo(){if(void 0===Ma&&(Ma=null,Cs.trustedTypes))try{Ma=Cs.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Ma}()?.createScriptURL(i)||i}class ra{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yo})`}}function dl(i){return i instanceof ra?i.changingThisBreaksApplicationSecurity:i}function ic(i,e){const t=function gu(i){return i instanceof ra&&i.getTypeName()||null}(i);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${yo})`)}return t===e}const EA=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var fl=(()=>((fl=fl||{})[fl.NONE=0]="NONE",fl[fl.HTML=1]="HTML",fl[fl.STYLE=2]="STYLE",fl[fl.SCRIPT=3]="SCRIPT",fl[fl.URL=4]="URL",fl[fl.RESOURCE_URL=5]="RESOURCE_URL",fl))();function cd(i){const e=D1();return e?e.sanitize(fl.URL,i)||"":ic(i,"URL")?dl(i):function Yf(i){return(i=String(i)).match(EA)?i:"unsafe:"+i}(Fr(i))}function Yb(i){const e=D1();if(e)return Ca(e.sanitize(fl.RESOURCE_URL,i)||"");if(ic(i,"ResourceURL"))return Ca(dl(i));throw new pi(904,!1)}function D1(){const i=Zi();return i&&i[Ju]}const g=new sr("ENVIRONMENT_INITIALIZER"),V=new sr("INJECTOR",-1),pe=new sr("INJECTOR_DEF_TYPES");class xe{get(e,t=Ra){if(t===Ra){const n=new Error(`NullInjectorError: No provider for ${In(e)}!`);throw n.name="NullInjectorError",n}return t}}function nt(...i){return{\u0275providers:yt(0,i),\u0275fromNgModule:!0}}function yt(i,...e){const t=[],n=new Set;let r;return Dd(e,s=>{const a=s;Ft(a,t,[],n)&&(r||(r=[]),r.push(a))}),void 0!==r&&Ct(r,t),t}function Ct(i,e){for(let t=0;t<i.length;t++){const{providers:r}=i[t];an(r,s=>{e.push(s)})}}function Ft(i,e,t,n){if(!(i=Qi(i)))return!1;let r=null,s=mn(i);const a=!s&&Go(i);if(s||a){if(a&&!a.standalone)return!1;r=i}else{const u=i.ngModule;if(s=mn(u),!s)return!1;r=u}const l=n.has(r);if(a){if(l)return!1;if(n.add(r),a.dependencies){const u="function"==typeof a.dependencies?a.dependencies():a.dependencies;for(const d of u)Ft(d,e,t,n)}}else{if(!s)return!1;{if(null!=s.imports&&!l){let d;n.add(r);try{Dd(s.imports,A=>{Ft(A,e,t,n)&&(d||(d=[]),d.push(A))})}finally{}void 0!==d&&Ct(d,e)}if(!l){const d=Qh(r)||(()=>new r);e.push({provide:r,useFactory:d,deps:wa},{provide:pe,useValue:r,multi:!0},{provide:g,useValue:()=>oi(r),multi:!0})}const u=s.providers;null==u||l||an(u,A=>{e.push(A)})}}return r!==i&&void 0!==i.providers}function an(i,e){for(let t of i)Vs(t)&&(t=t.\u0275providers),Array.isArray(t)?an(t,e):e(t)}const Tn=Fn({provide:String,useValue:Fn});function Pn(i){return null!==i&&"object"==typeof i&&Tn in i}function pr(i){return"function"==typeof i}const $s=new sr("Set Injector scope."),mo={},Er={};let Ri;function to(){return void 0===Ri&&(Ri=new xe),Ri}class zr{}class Qo extends zr{get destroyed(){return this._destroyed}constructor(e,t,n,r){super(),this.parent=t,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wc(e,a=>this.processProvider(a)),this.records.set(V,Gs(void 0,this)),r.has("environment")&&this.records.set(zr,Gs(void 0,this));const s=this.records.get($s);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(pe.multi,wa,Mn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=nA(this),n=Bi(void 0);try{return e()}finally{nA(t),Bi(n)}}get(e,t=Ra,n=Mn.Default){this.assertNotDestroyed(),n=pp(n);const r=nA(this),s=Bi(void 0);try{if(!(n&Mn.SkipSelf)){let l=this.records.get(e);if(void 0===l){const u=function zu(i){return"function"==typeof i||"object"==typeof i&&i instanceof sr}(e)&&vt(e);l=u&&this.injectableDefInScope(u)?Gs(aa(e),mo):null,this.records.set(e,l)}if(null!=l)return this.hydrate(e,l)}return(n&Mn.Self?to():this.parent).get(e,t=n&Mn.Optional&&t===Ra?null:t)}catch(a){if("NullInjectorError"===a.name){if((a[eA]=a[eA]||[]).unshift(In(e)),r)throw a;return function Ry(i,e,t,n){const r=i[eA];throw e[Vl]&&r.unshift(e[Vl]),i.message=function ky(i,e,t,n=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==Yu?i.slice(2):i;let r=In(e);if(Array.isArray(e))r=e.map(In).join(" -> ");else if("object"==typeof e){let s=[];for(let a in e)if(e.hasOwnProperty(a)){let l=e[a];s.push(a+":"+("string"==typeof l?JSON.stringify(l):In(l)))}r=`{${s.join(", ")}}`}return`${t}${n?"("+n+")":""}[${r}]: ${i.replace(tA,"\n  ")}`}("\n"+i.message,r,t,n),i[qd]=r,i[eA]=null,i}(a,e,"R3InjectorError",this.source)}throw a}finally{Bi(s),nA(r)}}resolveInjectorInitializers(){const e=nA(this),t=Bi(void 0);try{const n=this.get(g.multi,wa,Mn.Self);for(const r of n)r()}finally{nA(e),Bi(t)}}toString(){const e=[],t=this.records;for(const n of t.keys())e.push(In(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pi(205,!1)}processProvider(e){let t=pr(e=Qi(e))?e:Qi(e&&e.provide);const n=function rc(i){return Pn(i)?Gs(void 0,i.useValue):Gs(Ks(i),mo)}(e);if(pr(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Gs(void 0,mo,!0),r.factory=()=>m0(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,n)}hydrate(e,t){return t.value===mo&&(t.value=Er,t.value=t.factory()),"object"==typeof t.value&&t.value&&function sc(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=Qi(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function aa(i){const e=vt(i),t=null!==e?e.factory:Qh(i);if(null!==t)return t;if(i instanceof sr)throw new pi(204,!1);if(i instanceof Function)return function Pl(i){const e=i.length;if(e>0)throw Sp(e,"?"),new pi(204,!1);const t=function gn(i){return i&&(i[An]||i[ti])||null}(i);return null!==t?()=>t.factory(i):()=>new i}(i);throw new pi(204,!1)}function Ks(i,e,t){let n;if(pr(i)){const r=Qi(i);return Qh(r)||aa(r)}if(Pn(i))n=()=>Qi(i.useValue);else if(function Sr(i){return!(!i||!i.useFactory)}(i))n=()=>i.useFactory(...m0(i.deps||[]));else if(function xi(i){return!(!i||!i.useExisting)}(i))n=()=>oi(Qi(i.useExisting));else{const r=Qi(i&&(i.useClass||i.provide));if(!function Fo(i){return!!i.deps}(i))return Qh(r)||aa(r);n=()=>new r(...m0(i.deps))}return n}function Gs(i,e,t=!1){return{factory:i,value:e,multi:t?[]:void 0}}function Wc(i,e){for(const t of i)Array.isArray(t)?Wc(t,e):t&&Vs(t)?Wc(t.\u0275providers,e):e(t)}class yu{}class Fh{}class J0{resolveComponentFactory(e){throw function jc(i){const e=Error(`No component factory found for ${In(i)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=i,e}(e)}}let Od=(()=>{class i{}return i.NULL=new J0,i})();function mf(){return Zf(xc(),Zi())}function Zf(i,e){return new Bs(Va(i,e))}let Bs=(()=>{class i{constructor(t){this.nativeElement=t}}return i.__NG_ELEMENT_ID__=mf,i})();function Pg(i){return i instanceof Bs?i.nativeElement:i}class kp{}let ds=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function da(){const i=Zi(),t=bc(xc().index,i);return(Jl(t)?t:i)[vo]}(),i})(),Wa=(()=>{class i{}return i.\u0275prov=Ue({token:i,providedIn:"root",factory:()=>null}),i})();class Dr{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const sh=new Dr("15.2.8"),gl={},oh="ngOriginalError";function Ld(i){return i[oh]}class ud{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Ld(e);for(;t&&Ld(t);)t=Ld(t);return t||null}}function Jf(i){return i instanceof Function?i():i}function CS(i,e,t){let n=i.length;for(;;){const r=i.indexOf(e,t);if(-1===r)return r;if(0===r||i.charCodeAt(r-1)<=32){const s=e.length;if(r+s===n||i.charCodeAt(r+s)<=32)return r}t=r+1}}const SS="ng-template";function uD(i,e,t){let n=0,r=!0;for(;n<i.length;){let s=i[n++];if("string"==typeof s&&r){const a=i[n++];if(t&&"class"===s&&-1!==CS(a.toLowerCase(),e,0))return!0}else{if(1===s){for(;n<i.length&&"string"==typeof(s=i[n++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(r=!1)}}return!1}function TS(i){return 4===i.type&&i.value!==SS}function hD(i,e,t){return e===(4!==i.type||t?i.value:SS)}function dD(i,e,t){let n=4;const r=i.attrs||[],s=function AD(i){for(let e=0;e<i.length;e++)if(ih(i[e]))return e;return i.length}(r);let a=!1;for(let l=0;l<e.length;l++){const u=e[l];if("number"!=typeof u){if(!a)if(4&n){if(n=2|1&n,""!==u&&!hD(i,u,t)||""===u&&1===e.length){if(Op(n))return!1;a=!0}}else{const d=8&n?u:e[++l];if(8&n&&null!==i.attrs){if(!uD(i.attrs,d,t)){if(Op(n))return!1;a=!0}continue}const y=fD(8&n?"class":u,r,TS(i),t);if(-1===y){if(Op(n))return!1;a=!0;continue}if(""!==d){let C;C=y>s?"":r[y+1].toLowerCase();const k=8&n?C:null;if(k&&-1!==CS(k,d,0)||2&n&&d!==C){if(Op(n))return!1;a=!0}}}}else{if(!a&&!Op(n)&&!Op(u))return!1;if(a&&Op(u))continue;a=!1,n=u|1&n}}return Op(n)||a}function Op(i){return 0==(1&i)}function fD(i,e,t,n){if(null===e)return-1;let r=0;if(n||!t){let s=!1;for(;r<e.length;){const a=e[r];if(a===i)return r;if(3===a||6===a)s=!0;else{if(1===a||2===a){let l=e[++r];for(;"string"==typeof l;)l=e[++r];continue}if(4===a)break;if(0===a){r+=4;continue}}r+=s?1:2}return-1}return function y2(i,e){let t=i.indexOf(4);if(t>-1)for(t++;t<i.length;){const n=i[t];if("number"==typeof n)return-1;if(n===e)return t;t++}return-1}(e,i)}function ES(i,e,t=!1){for(let n=0;n<e.length;n++)if(dD(i,e[n],t))return!0;return!1}function mD(i,e){e:for(let t=0;t<e.length;t++){const n=e[t];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function t_(i,e){return i?":not("+e.trim()+")":e}function gD(i){let e=i[0],t=1,n=2,r="",s=!1;for(;t<i.length;){let a=i[t];if("string"==typeof a)if(2&n){const l=i[++t];r+="["+a+(l.length>0?'="'+l+'"':"")+"]"}else 8&n?r+="."+a:4&n&&(r+=" "+a);else""!==r&&!Op(a)&&(e+=t_(s,r),r=""),n=a,s=s||!Op(n);t++}return""!==r&&(e+=t_(s,r)),e}const ta={};function Qn(i){av(_a(),Zi(),Wr()+i,!1)}function av(i,e,t,n){if(!n)if(3==(3&e[Ws])){const s=i.preOrderCheckHooks;null!==s&&eg(e,s,t)}else{const s=i.preOrderHooks;null!==s&&fA(e,s,0,t)}Yr(t)}function x2(i,e=null,t=null,n){const r=w2(i,e,t,n);return r.resolveInjectorInitializers(),r}function w2(i,e=null,t=null,n,r=new Set){const s=[t||wa,nt(i)];return n=n||("object"==typeof i?void 0:In(i)),new Qo(s,e||to(),n||null,r)}let $c=(()=>{class i{static create(t,n){if(Array.isArray(t))return x2({name:""},n,t,"");{const r=t.name??"";return x2({name:r},t.parent,t.providers,r)}}}return i.THROW_IF_NOT_FOUND=Ra,i.NULL=new xe,i.\u0275prov=Ue({token:i,providedIn:"any",factory:()=>oi(V)}),i.__NG_ELEMENT_ID__=-1,i})();function Et(i,e=Mn.Default){const t=Zi();return null===t?oi(i,e):cg(xc(),t,Qi(i),e)}function Nd(){throw new Error("invalid")}function DD(i,e){const t=i.contentQueries;if(null!==t)for(let n=0;n<t.length;n+=2){const s=t[n+1];if(-1!==s){const a=i.data[s];Sd(t[n]),a.contentQueries(2,e[s],s)}}}function I2(i,e,t,n,r,s,a,l,u,d,A){const y=e.blueprint.slice();return y[vh]=r,y[Ws]=76|n,(null!==A||i&&1024&i[Ws])&&(y[Ws]|=1024),Gl(y),y[js]=y[Pu]=i,y[Al]=t,y[zc]=a||i&&i[zc],y[vo]=l||i&&i[vo],y[Ju]=u||i&&i[Ju]||null,y[du]=d||i&&i[du]||null,y[Ut]=s,y[iu]=function tv(){return MA++}(),y[KA]=A,y[Nl]=2==e.type?i[Nl]:y,y}function F1(i,e,t,n,r){let s=i.data[e];if(null===s)s=function i_(i,e,t,n,r){const s=nm(),a=mu(),u=i.data[e]=function O1(i,e,t,n,r,s){return{type:t,index:n,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?s:s&&s.parent,t,e,n,r);return null===i.firstChild&&(i.firstChild=u),null!==s&&(a?null==s.child&&null!==u.parent&&(s.child=u):null===s.next&&(s.next=u,u.prev=s)),u}(i,e,t,n,r),function ku(){return Io.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=n,s.attrs=r;const a=function Uf(){const i=Io.lFrame,e=i.currentTNode;return i.isParent?e:e.parent}();s.injectorIndex=null===a?-1:a.injectorIndex}return qc(s,!0),s}function R1(i,e,t,n){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(n),i.blueprint.push(n),i.data.push(null);return r}function ox(i,e,t){aA(e);try{const n=i.viewQuery;null!==n&&px(1,n,t);const r=i.template;null!==r&&LS(i,e,r,1,t),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&DD(i,e),i.staticViewQueries&&px(2,i.viewQuery,t);const s=i.components;null!==s&&function xk(i,e){for(let t=0;t<e.length;t++)PD(i,e[t])}(e,s)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{e[Ws]&=-5,hA()}}function r_(i,e,t,n){const r=e[Ws];if(128!=(128&r)){aA(e);try{Gl(e),function im(i){return Io.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==t&&LS(i,e,t,2,n);const a=3==(3&r);if(a){const d=i.preOrderCheckHooks;null!==d&&eg(e,d,null)}else{const d=i.preOrderHooks;null!==d&&fA(e,d,0,null),Ed(e,0)}if(function XS(i){for(let e=Fd(i);null!==e;e=Oc(e)){if(!e[Ap])continue;const t=e[th];for(let n=0;n<t.length;n++){const r=t[n];512&r[Ws]||vp(r[js],1),r[Ws]|=512}}}(e),function O2(i){for(let e=Fd(i);null!==e;e=Oc(e))for(let t=Hc;t<e.length;t++){const n=e[t],r=n[ts];Mh(n)&&r_(r,n,r.template,n[Al])}}(e),null!==i.contentQueries&&DD(i,e),a){const d=i.contentCheckHooks;null!==d&&eg(e,d)}else{const d=i.contentHooks;null!==d&&fA(e,d,1),Ed(e,1)}!function ED(i,e){const t=i.hostBindingOpCodes;if(null!==t)try{for(let n=0;n<t.length;n++){const r=t[n];if(r<0)Yr(~r);else{const s=r,a=t[++n],l=t[++n];w0(a,s),l(2,e[s])}}}finally{Yr(-1)}}(i,e);const l=i.components;null!==l&&function sx(i,e){for(let t=0;t<e.length;t++)KS(i,e[t])}(e,l);const u=i.viewQuery;if(null!==u&&px(2,u,n),a){const d=i.viewCheckHooks;null!==d&&eg(e,d)}else{const d=i.viewHooks;null!==d&&fA(e,d,2),Ed(e,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),e[Ws]&=-41,512&e[Ws]&&(e[Ws]&=-513,vp(e[js],-1))}finally{hA()}}}function LS(i,e,t,n,r){const s=Wr(),a=2&n;try{Yr(-1),a&&e.length>ka&&av(i,e,ka,!1),Ru(a?2:0,r),t(n,r)}finally{Yr(s),Ru(a?3:1,r)}}function s_(i,e,t){if(rA(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const a=i.data[s];a.contentQueries&&a.contentQueries(1,t[s],s)}}}function P2(i,e,t){Z_()&&(function VS(i,e,t,n){const r=t.directiveStart,s=t.directiveEnd;wh(t)&&function $S(i,e,t){const n=Va(e,i),r=Rh(t),s=i[zc],a=fv(i,I2(i,r,null,t.onPush?32:16,n,e,s,s.createRenderer(n,t),null,null,null));i[e.index]=a}(e,t,i.data[r+t.componentOffset]),i.firstCreatePass||Jd(t,e),qr(n,e);const a=t.initialInputs;for(let l=r;l<s;l++){const u=i.data[l],d=Vf(e,i,l,t);qr(d,e),null!==a&&F2(0,l-r,d,u,0,a),Dc(u)&&(bc(t.index,e)[Al]=Vf(e,i,l,t))}}(i,e,t,Va(t,e)),64==(64&t.flags)&&GS(i,e,t))}function ax(i,e,t=Va){const n=e.localNames;if(null!==n){let r=e.index+1;for(let s=0;s<n.length;s+=2){const a=n[s+1],l=-1===a?t(e,i):i[a];i[r++]=l}}}function Rh(i){const e=i.tView;return null===e||e.incompleteFirstPass?i.tView=Ug(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):e}function Ug(i,e,t,n,r,s,a,l,u,d){const A=ka+n,y=A+r,C=function k1(i,e){const t=[];for(let n=0;n<e;n++)t.push(n<i?null:ta);return t}(A,y),k="function"==typeof d?d():d;return C[ts]={type:i,blueprint:C,template:t,queries:null,viewQuery:l,declTNode:e,data:C.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:u,consts:k,incompleteFirstPass:!1}}function o_(i,e,t,n){const r=YS(e);null===t?r.push(n):(r.push(t),i.firstCreatePass&&N2(i).push(n,r.length-1))}function a_(i,e,t,n){for(let r in i)if(i.hasOwnProperty(r)){t=null===t?{}:t;const s=i[r];null===n?L1(t,e,r,s):n.hasOwnProperty(r)&&L1(t,e,n[r],s)}return t}function L1(i,e,t,n){i.hasOwnProperty(t)?i[t].push(e,n):i[t]=[e,n]}function ah(i,e,t,n,r,s,a,l){const u=Va(e,t);let A,d=e.inputs;!l&&null!=d&&(A=d[n])?(U2(i,t,A,n,r),wh(e)&&function cx(i,e){const t=bc(e,i);16&t[Ws]||(t[Ws]|=32)}(t,e.index)):3&e.type&&(n=function lx(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(n),r=null!=a?a(r,e.value||"",n):r,s.setProperty(u,n,r))}function ux(i,e,t,n){if(Z_()){const r=null===n?null:{"":-1},s=function QS(i,e){const t=i.directiveRegistry;let n=null,r=null;if(t)for(let s=0;s<t.length;s++){const a=t[s];if(ES(e,a.selectors,!1))if(n||(n=[]),Dc(a))if(null!==a.findHostDirectiveDefs){const l=[];r=r||new Map,a.findHostDirectiveDefs(a,l,r),n.unshift(...l,a),fx(i,e,l.length)}else n.unshift(a),fx(i,e,0);else r=r||new Map,a.findHostDirectiveDefs?.(a,n,r),n.push(a)}return null===n?null:[n,r]}(i,t);let a,l;null===s?a=l=null:[a,l]=s,null!==a&&HS(i,e,t,a,r,l),r&&function BD(i,e,t){if(e){const n=i.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new pi(-301,!1);n.push(e[r],s)}}}(t,n,r)}t.mergedAttrs=nd(t.mergedAttrs,t.attrs)}function HS(i,e,t,n,r,s){for(let d=0;d<n.length;d++)lg(Jd(t,e),i,n[d].type);!function ID(i,e,t){i.flags|=1,i.directiveStart=e,i.directiveEnd=e+t,i.providerIndexes=e}(t,i.data.length,n.length);for(let d=0;d<n.length;d++){const A=n[d];A.providersResolver&&A.providersResolver(A)}let a=!1,l=!1,u=R1(i,e,n.length,null);for(let d=0;d<n.length;d++){const A=n[d];t.mergedAttrs=nd(t.mergedAttrs,A.hostAttrs),jS(i,t,e,u,A),WS(u,A,r),null!==A.contentQueries&&(t.flags|=4),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(t.flags|=64);const y=A.type.prototype;!a&&(y.ngOnChanges||y.ngOnInit||y.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(t.index),a=!0),!l&&(y.ngOnChanges||y.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(t.index),l=!0),u++}!function NS(i,e,t){const r=e.directiveEnd,s=i.data,a=e.attrs,l=[];let u=null,d=null;for(let A=e.directiveStart;A<r;A++){const y=s[A],C=t?t.get(y):null,Q=C?C.outputs:null;u=a_(y.inputs,A,u,C?C.inputs:null),d=a_(y.outputs,A,d,Q);const se=null===u||null===a||TS(e)?null:R2(u,A,a);l.push(se)}null!==u&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=l,e.inputs=u,e.outputs=d}(i,t,s)}function GS(i,e,t){const n=t.directiveStart,r=t.directiveEnd,s=t.index,a=function oA(){return Io.lFrame.currentDirectiveIndex}();try{Yr(s);for(let l=n;l<r;l++){const u=i.data[l],d=e[l];ql(l),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&qS(u,d)}}finally{Yr(-1),ql(a)}}function qS(i,e){null!==i.hostBindings&&i.hostBindings(1,e)}function fx(i,e,t){e.componentOffset=t,(i.components??(i.components=[])).push(e.index)}function WS(i,e,t){if(t){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)t[e.exportAs[n]]=i;Dc(e)&&(t[""]=i)}}function jS(i,e,t,n,r){i.data[n]=r;const s=r.factory||(r.factory=Qh(r.type)),a=new AA(s,Dc(r),Et);i.blueprint[n]=a,t[n]=a,function hx(i,e,t,n,r){const s=r.hostBindings;if(s){let a=i.hostBindingOpCodes;null===a&&(a=i.hostBindingOpCodes=[]);const l=~e.index;(function dx(i){let e=i.length;for(;e>0;){const t=i[--e];if("number"==typeof t&&t<0)return t}return 0})(a)!=l&&a.push(l),a.push(t,n,s)}}(i,e,n,R1(i,t,r.hostVars,ta),r)}function DA(i,e,t,n,r,s){const a=Va(i,e);!function dv(i,e,t,n,r,s,a){if(null==s)i.removeAttribute(e,r,t);else{const l=null==a?Fr(s):a(s,n||"",r);i.setAttribute(e,r,l,t)}}(e[vo],a,s,i.value,t,n,r)}function F2(i,e,t,n,r,s){const a=s[e];if(null!==a){const l=n.setInput;for(let u=0;u<a.length;){const d=a[u++],A=a[u++],y=a[u++];null!==l?n.setInput(t,y,d,A):t[A]=y}}}function R2(i,e,t){let n=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(i.hasOwnProperty(s)){null===n&&(n=[]);const a=i[s];for(let l=0;l<a.length;l+=2)if(a[l]===e){n.push(s,a[l+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return n}function k2(i,e,t,n){return[i,!0,!1,e,null,0,n,t,null,null]}function KS(i,e){const t=bc(e,i);if(Mh(t)){const n=t[ts];48&t[Ws]?r_(n,t,n.template,t[Al]):t[Ha]>0&&L2(t)}}function L2(i){for(let n=Fd(i);null!==n;n=Oc(n))for(let r=Hc;r<n.length;r++){const s=n[r];if(Mh(s))if(512&s[Ws]){const a=s[ts];r_(a,s,a.template,s[Al])}else s[Ha]>0&&L2(s)}const t=i[ts].components;if(null!==t)for(let n=0;n<t.length;n++){const r=bc(t[n],i);Mh(r)&&r[Ha]>0&&L2(r)}}function PD(i,e){const t=bc(e,i),n=t[ts];(function FD(i,e){for(let t=e.length;t<i.blueprint.length;t++)e.push(i.blueprint[t])})(n,t),ox(n,t,t[Al])}function fv(i,e){return i[eh]?i[$d][Lo]=e:i[eh]=e,i[$d]=e,e}function zg(i){for(;i;){i[Ws]|=32;const e=gm(i);if(fu(i)&&!e)return i;i=e}return null}function N1(i,e,t,n=!0){const r=e[zc];r.begin&&r.begin();try{r_(i,e,i.template,t)}catch(a){throw n&&JS(e,a),a}finally{r.end&&r.end()}}function px(i,e,t){Sd(0),e(i,t)}function YS(i){return i[jd]||(i[jd]=[])}function N2(i){return i.cleanup||(i.cleanup=[])}function JS(i,e){const t=i[du],n=t?t.get(ud,null):null;n&&n.handleError(e)}function U2(i,e,t,n,r){for(let s=0;s<t.length;){const a=t[s++],l=t[s++],u=e[a],d=i.data[a];null!==d.setInput?d.setInput(u,r,n,l):u[l]=r}}function l_(i,e,t){let n=t?i.styles:null,r=t?i.classes:null,s=0;if(null!==e)for(let a=0;a<e.length;a++){const l=e[a];"number"==typeof l?s=l:1==s?r=ii(r,l):2==s&&(n=ii(n,l+": "+e[++a]+";"))}t?i.styles=n:i.stylesWithoutHost=n,t?i.classes=r:i.classesWithoutHost=r}function pv(i,e,t,n,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&n.push(vc(s)),Vc(s))for(let l=Hc;l<s.length;l++){const u=s[l],d=u[ts].firstChild;null!==d&&pv(u[ts],u,d,n)}const a=t.type;if(8&a)pv(i,e,t.child,n);else if(32&a){const l=kc(t,e);let u;for(;u=l();)n.push(u)}else if(16&a){const l=M1(e,t);if(Array.isArray(l))n.push(...l);else{const u=gm(e[Nl]);pv(u[ts],u,l,n,!0)}}t=r?t.projectionNext:t.next}return n}class Av{get rootNodes(){const e=this._lView,t=e[ts];return pv(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Al]}set context(e){this._lView[Al]=e}get destroyed(){return 128==(128&this._lView[Ws])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[js];if(Vc(e)){const t=e[xd],n=t?t.indexOf(this):-1;n>-1&&(Rd(e,n),pg(t,n))}this._attachedToViewContainer=!1}ld(this._lView[ts],this._lView)}onDestroy(e){o_(this._lView[ts],this._lView,null,e)}markForCheck(){zg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ws]&=-65}reattach(){this._lView[Ws]|=64}detectChanges(){N1(this._lView[ts],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pi(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rl(i,e){G(i,e,e[vo],2,null,null)}(this._lView[ts],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new pi(902,!1);this._appRef=e}}class eT extends Av{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;N1(e[ts],e,e[Al],!1)}checkNoChanges(){}get context(){return null}}class z2 extends Od{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Go(e);return new gv(t,this.ngModule)}}function mv(i){const e=[];for(let t in i)i.hasOwnProperty(t)&&e.push({propName:i[t],templateName:t});return e}class kD{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,n){n=pp(n);const r=this.injector.get(e,gl,n);return r!==gl||t===gl?r:this.parentInjector.get(e,t,n)}}class gv extends Fh{get inputs(){return mv(this.componentDef.inputs)}get outputs(){return mv(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Cc(i){return i.map(gD).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,n,r){let s=(r=r||this.ngModule)instanceof zr?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const a=s?new kD(e,s):e,l=a.get(kp,null);if(null===l)throw new pi(407,!1);const u=a.get(Wa,null),d=l.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",y=n?function hv(i,e,t){return i.selectRootElement(e,t===Zu.ShadowDom)}(d,n,this.componentDef.encapsulation):Tg(d,A,function RD(i){const e=i.toLowerCase();return"svg"===e?v0:"math"===e?"math":null}(A)),C=this.componentDef.onPush?288:272,k=Ug(0,null,null,1,0,null,null,null,null,null),Q=I2(null,k,null,C,null,null,l,d,u,a,null);let se,he;aA(Q);try{const re=this.componentDef;let Le,be=null;re.findHostDirectiveDefs?(Le=[],be=new Map,re.findHostDirectiveDefs(re,Le,be),Le.push(re)):Le=[re];const Ye=function tT(i,e){const t=i[ts],n=ka;return i[n]=e,F1(t,n,2,"#host",null)}(Q,y),dt=function Ax(i,e,t,n,r,s,a,l){const u=r[ts];!function OD(i,e,t,n){for(const r of i)e.mergedAttrs=nd(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(l_(e,e.mergedAttrs,!0),null!==t&&jt(n,t,e))}(n,i,e,a);const d=s.createRenderer(e,t),A=I2(r,Rh(t),null,t.onPush?32:16,r[i.index],i,s,d,l||null,null,null);return u.firstCreatePass&&fx(u,i,n.length-1),fv(r,A),r[i.index]=A}(Ye,y,re,Le,Q,l,d);he=pu(k,ka),y&&function U1(i,e,t,n){if(n)ed(i,t,["ng-version",sh.full]);else{const{attrs:r,classes:s}=function ix(i){const e=[],t=[];let n=1,r=2;for(;n<i.length;){let s=i[n];if("string"==typeof s)2===r?""!==s&&e.push(s,i[++n]):8===r&&t.push(s);else{if(!Op(r))break;r=s}n++}return{attrs:e,classes:t}}(e.selectors[0]);r&&ed(i,t,r),s&&s.length>0&&Kt(i,t,s.join(" "))}}(d,re,y,n),void 0!==t&&function mx(i,e,t){const n=i.projection=[];for(let r=0;r<e.length;r++){const s=t[r];n.push(null!=s?Array.from(s):null)}}(he,this.ngContentSelectors,t),se=function yv(i,e,t,n,r,s){const a=xc(),l=r[ts],u=Va(a,r);HS(l,r,a,t,null,n);for(let A=0;A<t.length;A++)qr(Vf(r,l,a.directiveStart+A,a),r);GS(l,r,a),u&&qr(u,r);const d=Vf(r,l,a.directiveStart+a.componentOffset,a);if(i[Al]=r[Al]=d,null!==s)for(const A of s)A(d,e);return s_(l,a,i),d}(dt,re,Le,be,Q,[LD]),ox(k,Q,null)}finally{hA()}return new BA(this.componentType,se,Zf(he,Q),Q,he)}}class BA extends yu{constructor(e,t,n,r,s){super(),this.location=n,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new eT(r),this.componentType=e}setInput(e,t){const n=this._tNode.inputs;let r;if(null!==n&&(r=n[e])){const s=this._rootLView;U2(s[ts],s,r,e,t),zg(bc(this._tNode.index,s))}}get injector(){return new Sh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function LD(){const i=xc();Jm(Zi()[ts],i)}function bs(i){let e=function nT(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),t=!0;const n=[i];for(;e;){let r;if(Dc(i))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new pi(903,!1);r=e.\u0275dir}if(r){if(t){n.push(r);const a=i;a.inputs=gx(i.inputs),a.declaredInputs=gx(i.declaredInputs),a.outputs=gx(i.outputs);const l=r.hostBindings;l&&Ck(i,l);const u=r.viewQuery,d=r.contentQueries;if(u&&ND(i,u),d&&UD(i,d),Gi(i.inputs,r.inputs),Gi(i.declaredInputs,r.declaredInputs),Gi(i.outputs,r.outputs),Dc(r)&&r.data.animation){const A=i.data;A.animation=(A.animation||[]).concat(r.data.animation)}}const s=r.features;if(s)for(let a=0;a<s.length;a++){const l=s[a];l&&l.ngInherit&&l(i),l===bs&&(t=!1)}}e=Object.getPrototypeOf(e)}!function H2(i){let e=0,t=null;for(let n=i.length-1;n>=0;n--){const r=i[n];r.hostVars=e+=r.hostVars,r.hostAttrs=nd(r.hostAttrs,t=nd(t,r.hostAttrs))}}(n)}function gx(i){return i===yh?{}:i===wa?[]:i}function ND(i,e){const t=i.viewQuery;i.viewQuery=t?(n,r)=>{e(n,r),t(n,r)}:e}function UD(i,e){const t=i.contentQueries;i.contentQueries=t?(n,r,s)=>{e(n,r,s),t(n,r,s)}:e}function Ck(i,e){const t=i.hostBindings;i.hostBindings=t?(n,r)=>{e(n,r),t(n,r)}:e}function bv(i){return!!_x(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function _x(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function xm(i,e,t){return i[e]=t}function lh(i,e,t){return!Object.is(i[e],t)&&(i[e]=t,!0)}function wm(i,e,t,n){const r=lh(i,e,t);return lh(i,e+1,n)||r}function ja(i,e,t,n){const r=Zi();return lh(r,Yd(),e)&&(_a(),DA(Il(),r,i,e,t,n)),ja}function h_(i,e,t,n,r,s){const l=wm(i,function Kh(){return Io.lFrame.bindingIndex}(),t,r);return Yh(2),l?e+Fr(t)+n+Fr(r)+s:ta}function Hg(i,e,t,n,r,s,a,l){const u=Zi(),d=h_(u,e,t,n,r,s);return d!==ta&&DA(Il(),u,i,d,a,l),Hg}function ns(i,e,t,n,r,s,a,l){const u=Zi(),d=_a(),A=i+ka,y=d.firstCreatePass?function Bk(i,e,t,n,r,s,a,l,u){const d=e.consts,A=F1(e,i,4,a||null,So(d,l));ux(e,t,A,So(d,u)),Jm(e,A);const y=A.tView=Ug(2,A,n,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d);return null!==e.queries&&(e.queries.template(e,A),y.queries=e.queries.embeddedTView(A)),A}(A,d,u,e,t,n,r,s,a):d.data[A];qc(y,!1);const C=u[vo].createComment("");TA(d,u,C,y),qr(C,u),fv(u,u[A]=k2(C,u,C,y)),so(y)&&P2(d,u,y),null!=a&&ax(u,y,l)}function Fl(i){return jh(function Kd(){return Io.lFrame.contextLView}(),ka+i)}function Un(i,e,t){const n=Zi();return lh(n,Yd(),e)&&ah(_a(),Il(),n,i,e,n[vo],t,!1),Un}function V1(i,e,t,n,r){const a=r?"class":"style";U2(i,t,e.inputs[a],a,n)}function tn(i,e,t,n){const r=Zi(),s=_a(),a=ka+i,l=r[vo],u=s.firstCreatePass?function Lc(i,e,t,n,r,s){const a=e.consts,u=F1(e,i,2,n,So(a,r));return ux(e,t,u,So(a,s)),null!==u.attrs&&l_(u,u.attrs,!1),null!==u.mergedAttrs&&l_(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(a,s,r,e,t,n):s.data[a],d=r[a]=Tg(l,e,function dA(){return Io.lFrame.currentNamespace}()),A=so(u);return qc(u,!0),jt(l,d,u),32!=(32&u.flags)&&TA(s,r,d,u),0===function Gc(){return Io.lFrame.elementDepthCount}()&&qr(d,r),function Ny(){Io.lFrame.elementDepthCount++}(),A&&(P2(s,r,u),s_(s,u,r)),null!==n&&ax(r,u),tn}function on(){let i=xc();mu()?Xh():(i=i.parent,qc(i,!1));const e=i;!function Nf(){Io.lFrame.elementDepthCount--}();const t=_a();return t.firstCreatePass&&(Jm(t,i),rA(i)&&t.queries.elementEnd(i)),null!=e.classesWithoutHost&&function S0(i){return 0!=(8&i.flags)}(e)&&V1(t,e,Zi(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Fc(i){return 0!=(16&i.flags)}(e)&&V1(t,e,Zi(),e.stylesWithoutHost,!1),on}function kr(i,e,t,n){return tn(i,e,t,n),on(),kr}function Lp(i,e,t){const n=Zi(),r=_a(),s=i+ka,a=r.firstCreatePass?function jD(i,e,t,n,r){const s=e.consts,a=So(s,n),l=F1(e,i,8,"ng-container",a);return null!==a&&l_(l,a,!0),ux(e,t,l,So(s,r)),null!==e.queries&&e.queries.elementStart(e,l),l}(s,r,n,e,t):r.data[s];qc(a,!0);const l=n[s]=n[vo].createComment("");return TA(r,n,l,a),qr(l,n),so(a)&&(P2(r,n,a),s_(r,a,n)),null!=t&&ax(n,a),Lp}function Np(){let i=xc();const e=_a();return mu()?Xh():(i=i.parent,qc(i,!1)),e.firstCreatePass&&(Jm(e,i),rA(i)&&e.queries.elementEnd(i)),Np}function p_(i,e,t){return Lp(i,e,t),Np(),p_}function Ba(){return Zi()}function A_(i){return!!i&&"function"==typeof i.then}const Q2=function $D(i){return!!i&&"function"==typeof i.subscribe};function ki(i,e,t,n){const r=Zi(),s=_a(),a=xc();return function aT(i,e,t,n,r,s,a){const l=so(n),d=i.firstCreatePass&&N2(i),A=e[Al],y=YS(e);let C=!0;if(3&n.type||a){const se=Va(n,e),he=a?a(se):se,re=y.length,Le=a?Ye=>a(vc(Ye[n.index])):n.index;let be=null;if(!a&&l&&(be=function XD(i,e,t,n){const r=i.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const a=r[s];if(a===t&&r[s+1]===n){const l=e[jd],u=r[s+2];return l.length>u?l[u]:null}"string"==typeof a&&(s+=2)}return null}(i,e,r,n.index)),null!==be)(be.__ngLastListenerFn__||be).__ngNextListenerFn__=s,be.__ngLastListenerFn__=s,C=!1;else{s=KD(n,e,A,s,!1);const Ye=t.listen(he,r,s);y.push(s,Ye),d&&d.push(r,Le,re,re+1)}}else s=KD(n,e,A,s,!1);const k=n.outputs;let Q;if(C&&null!==k&&(Q=k[r])){const se=Q.length;if(se)for(let he=0;he<se;he+=2){const dt=e[Q[he]][Q[he+1]].subscribe(s),xt=y.length;y.push(s,dt),d&&d.push(r,n.index,xt,-(xt+1))}}}(s,r,r[vo],a,i,e,n),ki}function lT(i,e,t,n){try{return Ru(6,e,t),!1!==t(n)}catch(r){return JS(i,r),!1}finally{Ru(7,e,t)}}function KD(i,e,t,n,r){return function s(a){if(a===Function)return n;zg(i.componentOffset>-1?bc(i.index,e):e);let u=lT(e,t,n,a),d=s.__ngNextListenerFn__;for(;d;)u=lT(e,t,d,a)&&u,d=d.__ngNextListenerFn__;return r&&!1===u&&(a.preventDefault(),a.returnValue=!1),u}}function Or(i=1){return function Km(i){return(Io.lFrame.contextLView=function Ym(i,e){for(;i>0;)e=e[Pu],i--;return e}(i,Io.lFrame.contextLView))[Al]}(i)}function cT(i,e){let t=null;const n=function pD(i){const e=i.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(i);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===n?ES(i,s,!0):mD(n,s))return r}else t=r}return t}function ch(i){const e=Zi()[Nl][Ut];if(!e.projection){const n=e.projection=Sp(i?i.length:1,null),r=n.slice();let s=e.child;for(;null!==s;){const a=i?cT(s,i):0;null!==a&&(r[a]?r[a].projectionNext=s:n[a]=s,r[a]=s),s=s.next}}}function ru(i,e=0,t){const n=Zi(),r=_a(),s=F1(r,ka+i,16,null,t||null);null===s.projection&&(s.projection=e),Xh(),32!=(32&s.flags)&&function te(i,e,t){ee(e[vo],0,e,t,SA(i,t,e),$0(t.parent||e[Ut],t,e))}(r,n,s)}function xx(i,e){return i<<17|e<<2}function Vg(i){return i>>17&32767}function wx(i){return 2|i}function Cm(i){return(131068&i)>>2}function Mx(i,e){return-131069&i|e<<2}function Sm(i){return 1|i}function Cx(i,e,t,n,r){const s=i[t+1],a=null===e;let l=n?Vg(s):Cm(s),u=!1;for(;0!==l&&(!1===u||a);){const A=i[l+1];dT(i[l],e)&&(u=!0,i[l+1]=n?Sm(A):wx(A)),l=n?Vg(A):Cm(A)}u&&(i[t+1]=n?wx(s):Sm(s))}function dT(i,e){return null===i||null==e||(Array.isArray(i)?i[1]:i)===e||!(!Array.isArray(i)||"string"!=typeof e)&&qf(i,e)>=0}const su={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function eM(i){return i.substring(su.key,su.keyEnd)}function eB(i){return i.substring(su.value,su.valueEnd)}function fT(i,e){const t=su.textEnd;return t===e?-1:(e=su.keyEnd=function Sx(i,e,t){for(;e<t&&i.charCodeAt(e)>32;)e++;return e}(i,su.key=e,t),Gg(i,e,t))}function pT(i,e){const t=su.textEnd;let n=su.key=Gg(i,e,t);return t===n?-1:(n=su.keyEnd=function Wl(i,e,t){let n;for(;e<t&&(45===(n=i.charCodeAt(e))||95===n||(-33&n)>=65&&(-33&n)<=90||n>=48&&n<=57);)e++;return e}(i,n,t),n=tM(i,n,t),n=su.value=Gg(i,n,t),n=su.valueEnd=function mT(i,e,t){let n=-1,r=-1,s=-1,a=e,l=a;for(;a<t;){const u=i.charCodeAt(a++);if(59===u)return l;34===u||39===u?l=a=Cv(i,u,a,t):e===a-4&&85===s&&82===r&&76===n&&40===u?l=a=Cv(i,41,a,t):u>32&&(l=a),s=r,r=n,n=-33&u}return l}(i,n,t),tM(i,n,t))}function AT(i){su.key=0,su.keyEnd=0,su.value=0,su.valueEnd=0,su.textEnd=i.length}function Gg(i,e,t){for(;e<t&&i.charCodeAt(e)<=32;)e++;return e}function tM(i,e,t,n){return(e=Gg(i,e,t))<t&&e++,e}function Cv(i,e,t,n){let r=-1,s=t;for(;s<n;){const a=i.charCodeAt(s++);if(a==e&&92!==r)return s;r=92==a&&92===r?0:a}throw new Error}function Ud(i,e,t){return dd(i,e,t,!1),Ud}function Ia(i,e){return dd(i,e,null,!0),Ia}function g_(i,e){for(let t=function nB(i){return AT(i),pT(i,Gg(i,0,su.textEnd))}(e);t>=0;t=pT(e,t))vT(i,eM(e),eB(e))}function vf(i,e){for(let t=function tB(i){return AT(i),fT(i,Gg(i,0,su.textEnd))}(e);t>=0;t=fT(e,t))Lu(i,eM(e),!0)}function dd(i,e,t,n){const r=Zi(),s=_a(),a=Yh(2);s.firstUpdatePass&&_T(s,i,a,n),e!==ta&&lh(r,a,e)&&xT(s,s.data[Wr()],r,r[vo],i,r[a+1]=function Tx(i,e){return null==i||""===i||("string"==typeof e?i+=e:"object"==typeof i&&(i=In(dl(i)))),i}(e,t),n,a)}function fd(i,e,t,n){const r=_a(),s=Yh(2);r.firstUpdatePass&&_T(r,null,s,n);const a=Zi();if(t!==ta&&lh(a,s,t)){const l=r.data[Wr()];if(rM(l,n)&&!gT(r,s)){let u=n?l.classesWithoutHost:l.stylesWithoutHost;null!==u&&(t=ii(u,t||"")),V1(r,l,a,t,n)}else!function bT(i,e,t,n,r,s,a,l){r===ta&&(r=wa);let u=0,d=0,A=0<r.length?r[0]:null,y=0<s.length?s[0]:null;for(;null!==A||null!==y;){const C=u<r.length?r[u+1]:void 0,k=d<s.length?s[d+1]:void 0;let se,Q=null;A===y?(u+=2,d+=2,C!==k&&(Q=y,se=k)):null===y||null!==A&&A<y?(u+=2,Q=A):(d+=2,Q=y,se=k),null!==Q&&xT(i,e,t,n,Q,se,a,l),A=u<r.length?r[u]:null,y=d<s.length?s[d]:null}}(r,l,a,a[vo],a[s+1],a[s+1]=function yT(i,e,t){if(null==t||""===t)return wa;const n=[],r=dl(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)i(n,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&i(n,s,r[s]);else"string"==typeof r&&e(n,r);return n}(i,e,t),n,s)}}function gT(i,e){return e>=i.expandoStartIndex}function _T(i,e,t,n){const r=i.data;if(null===r[t+1]){const s=r[Wr()],a=gT(i,t);rM(s,n)&&null===e&&!a&&(e=!1),e=function __(i,e,t,n){const r=function Cd(i){const e=Io.lFrame.currentDirectiveIndex;return-1===e?null:i[e]}(i);let s=n?e.residualClasses:e.residualStyles;if(null===r)0===(n?e.classBindings:e.styleBindings)&&(t=Q1(t=Sv(null,i,e,t,n),e.attrs,n),s=null);else{const a=e.directiveStylingLast;if(-1===a||i[a]!==r)if(t=Sv(r,i,e,t,n),null===s){let u=function q1(i,e,t){const n=t?e.classBindings:e.styleBindings;if(0!==Cm(n))return i[Vg(n)]}(i,e,n);void 0!==u&&Array.isArray(u)&&(u=Sv(null,i,e,u[1],n),u=Q1(u,e.attrs,n),function iB(i,e,t,n){i[Vg(t?e.classBindings:e.styleBindings)]=n}(i,e,n,u))}else s=function iM(i,e,t){let n;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)n=Q1(n,i[s].hostAttrs,t);return Q1(n,e.attrs,t)}(i,e,n)}return void 0!==s&&(n?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,n),function Ac(i,e,t,n,r,s){let a=s?e.classBindings:e.styleBindings,l=Vg(a),u=Cm(a);i[n]=t;let A,d=!1;if(Array.isArray(t)?(A=t[1],(null===A||qf(t,A)>0)&&(d=!0)):A=t,r)if(0!==u){const C=Vg(i[l+1]);i[n+1]=xx(C,l),0!==C&&(i[C+1]=Mx(i[C+1],n)),i[l+1]=function ZD(i,e){return 131071&i|e<<17}(i[l+1],n)}else i[n+1]=xx(l,0),0!==l&&(i[l+1]=Mx(i[l+1],n)),l=n;else i[n+1]=xx(u,0),0===l?l=n:i[u+1]=Mx(i[u+1],n),u=n;d&&(i[n+1]=wx(i[n+1])),Cx(i,A,n,!0),Cx(i,A,n,!1),function hT(i,e,t,n,r){const s=r?i.residualClasses:i.residualStyles;null!=s&&"string"==typeof e&&qf(s,e)>=0&&(t[n+1]=Sm(t[n+1]))}(e,A,i,n,s),a=xx(l,u),s?e.classBindings=a:e.styleBindings=a}(r,s,e,t,a,n)}}function Sv(i,e,t,n,r){let s=null;const a=t.directiveEnd;let l=t.directiveStylingLast;for(-1===l?l=t.directiveStart:l++;l<a&&(s=e[l],n=Q1(n,s.hostAttrs,r),s!==i);)l++;return null!==i&&(t.directiveStylingLast=l),n}function Q1(i,e,t){const n=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?r=a:r===n&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Lu(i,a,!!t||e[++s]))}return void 0===i?null:i}function vT(i,e,t){Lu(i,e,dl(t))}function rB(i,e,t){const n=String(e);""!==n&&!n.includes(" ")&&Lu(i,n,t)}function xT(i,e,t,n,r,s,a,l){if(!(3&e.type))return;const u=i.data,d=u[l+1],A=function JD(i){return 1==(1&i)}(d)?W1(u,e,t,r,Cm(d),a):void 0;y_(A)||(y_(s)||function YD(i){return 2==(2&i)}(d)&&(s=W1(u,null,t,r,l,a)),function tt(i,e,t,n,r){if(e)r?i.addClass(t,n):i.removeClass(t,n);else{let s=-1===n.indexOf("-")?void 0:Mc.DashCase;null==r?i.removeStyle(t,n,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Mc.Important),i.setStyle(t,n,r,s))}}(n,a,Wh(Wr(),t),r,s))}function W1(i,e,t,n,r,s){const a=null===e;let l;for(;r>0;){const u=i[r],d=Array.isArray(u),A=d?u[1]:u,y=null===A;let C=t[r+1];C===ta&&(C=y?wa:void 0);let k=y?_A(C,n):A===n?C:void 0;if(d&&!y_(k)&&(k=_A(u,n)),y_(k)&&(l=k,a))return l;const Q=i[r+1];r=a?Vg(Q):Cm(Q)}if(null!==e){let u=s?e.residualClasses:e.residualStyles;null!=u&&(l=_A(u,n))}return l}function y_(i){return void 0!==i}function rM(i,e){return 0!=(i.flags&(e?8:16))}function dr(i,e=""){const t=Zi(),n=_a(),r=i+ka,s=n.firstCreatePass?F1(n,r,1,e,null):n.data[r],a=t[r]=function Cg(i,e){return i.createText(e)}(t[vo],e);TA(n,t,a,s),qc(s,!1)}function bf(i){return wl("",i,""),bf}function wl(i,e,t){const n=Zi(),r=function u_(i,e,t,n){return lh(i,Yd(),t)?e+Fr(t)+n:ta}(n,i,e,t);return r!==ta&&function kh(i,e,t){const n=Wh(e,i);!function Sg(i,e,t){i.setValue(e,t)}(i[vo],n,t)}(n,Wr(),r),wl}function ui(i,e,t){const n=Zi();return lh(n,Yd(),e)&&ah(_a(),Il(),n,i,e,n[vo],t,!0),ui}const no="en-US";let ri=no;function aB(i,e,t,n,r){if(i=Qi(i),Array.isArray(i))for(let s=0;s<i.length;s++)aB(i[s],e,t,n,r);else{const s=_a(),a=Zi();let l=pr(i)?i:Qi(i.provide),u=Ks(i);const d=xc(),A=1048575&d.providerIndexes,y=d.directiveStart,C=d.providerIndexes>>20;if(pr(i)||!i.multi){const k=new AA(u,r,Et),Q=cB(l,e,r?A:A+C,y);-1===Q?(lg(Jd(d,a),s,l),lB(s,i,e.length),e.push(l),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),t.push(k),a.push(k)):(t[Q]=k,a[Q]=k)}else{const k=cB(l,e,A+C,y),Q=cB(l,e,A,A+C),he=Q>=0&&t[Q];if(r&&!he||!r&&!(k>=0&&t[k])){lg(Jd(d,a),s,l);const re=function oq(i,e,t,n,r){const s=new AA(i,t,Et);return s.multi=[],s.index=e,s.componentProviders=0,Rk(s,r,n&&!t),s}(r?sq:rq,t.length,r,n,u);!r&&he&&(t[Q].providerFactory=re),lB(s,i,e.length,0),e.push(l),d.directiveStart++,d.directiveEnd++,r&&(d.providerIndexes+=1048576),t.push(re),a.push(re)}else lB(s,i,k>-1?k:Q,Rk(t[r?Q:k],u,!r&&n));!r&&n&&he&&t[Q].componentProviders++}}}function lB(i,e,t,n){const r=pr(e),s=function $i(i){return!!i.useClass}(e);if(r||s){const u=(s?Qi(e.useClass):e).prototype.ngOnDestroy;if(u){const d=i.destroyHooks||(i.destroyHooks=[]);if(!r&&e.multi){const A=d.indexOf(t);-1===A?d.push(t,[n,u]):d[A+1].push(n,u)}else d.push(t,u)}}}function Rk(i,e,t){return t&&i.componentProviders++,i.multi.push(e)-1}function cB(i,e,t,n){for(let r=t;r<n;r++)if(e[r]===i)return r;return-1}function rq(i,e,t,n){return uB(this.multi,[])}function sq(i,e,t,n){const r=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,l=Vf(t,t[ts],this.providerFactory.index,n);s=l.slice(0,a),uB(r,s);for(let u=a;u<l.length;u++)s.push(l[u])}else s=[],uB(r,s);return s}function uB(i,e){for(let t=0;t<i.length;t++)e.push((0,i[t])());return e}function ko(i,e=[]){return t=>{t.providersResolver=(n,r)=>function iq(i,e,t){const n=_a();if(n.firstCreatePass){const r=Dc(i);aB(t,n.data,n.blueprint,r,!0),aB(e,n.data,n.blueprint,r,!1)}}(n,r?r(i):i,e)}}class Ex{}class kk{}class Ok extends Ex{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new z2(this);const n=wr(e);this._bootstrapComponents=Jf(n.bootstrap),this._r3Injector=w2(e,t,[{provide:Ex,useValue:this},{provide:Od,useValue:this.componentFactoryResolver}],In(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class hB extends kk{constructor(e){super(),this.moduleType=e}create(e){return new Ok(this.moduleType,e)}}class lq extends Ex{constructor(e,t,n){super(),this.componentFactoryResolver=new z2(this),this.instance=null;const r=new Qo([...e,{provide:Ex,useValue:this},{provide:Od,useValue:this.componentFactoryResolver}],t||to(),n,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function BT(i,e,t=null){return new lq(i,e,t).injector}let cq=(()=>{class i{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const n=yt(0,t.type),r=n.length>0?BT([n],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Ue({token:i,providedIn:"environment",factory:()=>new i(oi(zr))}),i})();function dB(i){i.getStandaloneInjector=e=>e.get(cq).getOrCreateStandaloneInjector(i)}function wf(i,e,t,n){return Qk(Zi(),Xl(),i,e,t,n)}function qk(i,e,t,n,r,s){return function jk(i,e,t,n,r,s,a,l){const u=e+t;return function yx(i,e,t,n,r){const s=wm(i,e,t,n);return lh(i,e+2,r)||s}(i,u,r,s,a)?xm(i,u+3,l?n.call(l,r,s,a):n(r,s,a)):uM(i,u+3)}(Zi(),Xl(),i,e,t,n,r,s)}function uM(i,e){const t=i[e];return t===ta?void 0:t}function Qk(i,e,t,n,r,s){const a=e+t;return lh(i,a,r)?xm(i,a+1,s?n.call(s,r):n(r)):uM(i,a+1)}function Yk(i,e,t){const n=i+ka,r=Zi(),s=jh(r,n);return function hM(i,e){return i[ts].data[e].pure}(r,n)?Qk(r,Xl(),e,s.transform,t,s):s.transform(t)}function pB(i){return e=>{setTimeout(i,void 0,e)}}const ao=class Bq extends D{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){let r=e,s=t||(()=>null),a=n;if(e&&"object"==typeof e){const u=e;r=u.next?.bind(u),s=u.error?.bind(u),a=u.complete?.bind(u)}this.__isAsync&&(s=pB(s),r&&(r=pB(r)),a&&(a=pB(a)));const l=super.subscribe({next:r,error:s,complete:a});return e instanceof Be&&e.add(l),l}};function Iq(){return this._results[Symbol.iterator]()}class Bv{get changes(){return this._changes||(this._changes=new ao)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Bv.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=Iq)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=function Eh(i){return i.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Gy(i,e,t){if(i.length!==e.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],s=e[n];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let hh=(()=>{class i{}return i.__NG_ELEMENT_ID__=Rq,i})();const Pq=hh,Fq=class extends Pq{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e,t){const n=this._declarationTContainer.tView,r=I2(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null,t||null);r[bh]=this._declarationLView[this._declarationTContainer.index];const a=this._declarationLView[Ul];return null!==a&&(r[Ul]=a.createEmbeddedView(n)),ox(n,r,e),new Av(r)}};function Rq(){return IT(xc(),Zi())}function IT(i,e){return 4&i.type?new Fq(e,i,Zf(i,e)):null}let bu=(()=>{class i{}return i.__NG_ELEMENT_ID__=kq,i})();function kq(){return eO(xc(),Zi())}const Oq=bu,Zk=class extends Oq{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return Zf(this._hostTNode,this._hostLView)}get injector(){return new Sh(this._hostTNode,this._hostLView)}get parentInjector(){const e=ef(this._hostTNode,this._hostLView);if(E0(e)){const t=Ch(e,this._hostLView),n=bp(e);return new Sh(t[ts].data[n+8],t)}return new Sh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Jk(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-Hc}createEmbeddedView(e,t,n){let r,s;"number"==typeof n?r=n:null!=n&&(r=n.index,s=n.injector);const a=e.createEmbeddedView(t||{},s);return this.insert(a,r),a}createComponent(e,t,n,r,s){const a=e&&!function nf(i){return"function"==typeof i}(e);let l;if(a)l=t;else{const y=t||{};l=y.index,n=y.injector,r=y.projectableNodes,s=y.environmentInjector||y.ngModuleRef}const u=a?e:new gv(Go(e)),d=n||this.parentInjector;if(!s&&null==u.ngModule){const C=(a?d:this.parentInjector).get(zr,null);C&&(s=C)}const A=u.create(d,r,void 0,s);return this.insert(A.hostView,l),A}insert(e,t){const n=e._lView,r=n[ts];if(function Pc(i){return Vc(i[js])}(n)){const A=this.indexOf(e);if(-1!==A)this.detach(A);else{const y=n[js],C=new Zk(y,y[Ut],y[js]);C.detach(C.indexOf(e))}}const s=this._adjustIndex(t),a=this._lContainer;!function Dp(i,e,t,n){const r=Hc+n,s=t.length;n>0&&(t[r-1][Lo]=e),n<s-Hc?(e[Lo]=t[r],cm(t,Hc+n,e)):(t.push(e),e[Lo]=null),e[js]=t;const a=e[bh];null!==a&&t!==a&&function Eg(i,e){const t=i[th];e[Nl]!==e[js][js][Nl]&&(i[Ap]=!0),null===t?i[th]=[e]:t.push(e)}(a,e);const l=e[Ul];null!==l&&l.insertView(i),e[Ws]|=64}(r,n,a,s);const l=Y0(s,a),u=n[vo],d=Dg(u,a[iA]);return null!==d&&function uf(i,e,t,n,r,s){n[vh]=r,n[Ut]=e,G(i,n,t,1,r,s)}(r,a[Ut],u,n,d,l),e.attachToViewContainerRef(),cm(AB(a),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Jk(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Rd(this._lContainer,t);n&&(pg(AB(this._lContainer),t),ld(n[ts],n))}detach(e){const t=this._adjustIndex(e,-1),n=Rd(this._lContainer,t);return n&&null!=pg(AB(this._lContainer),t)?new Av(n):null}_adjustIndex(e,t=0){return e??this.length+t}};function Jk(i){return i[xd]}function AB(i){return i[xd]||(i[xd]=[])}function eO(i,e){let t;const n=e[i.index];if(Vc(n))t=n;else{let r;if(8&i.type)r=vc(n);else{const s=e[vo];r=s.createComment("");const a=Va(i,e);Nu(s,Dg(s,a),r,function Bg(i,e){return i.nextSibling(e)}(s,a),!1)}e[i.index]=t=k2(n,e,r,i),fv(e,t)}return new Zk(t,i,e)}class mB{constructor(e){this.queryList=e,this.matches=null}clone(){return new mB(this.queryList)}setDirty(){this.queryList.setDirty()}}class gB{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<n;s++){const a=t.getByIndex(s);r.push(this.queries[a.indexInDeclarationView].clone())}return new gB(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==sO(e,t).matches&&this.queries[t].setDirty()}}class tO{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class _B{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,s=this.getByIndex(n).embeddedTView(e,r);s&&(s.indexInDeclarationView=n,null!==t?t.push(s):t=[s])}return null!==t?new _B(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class yB{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new yB(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const s=n[r];this.matchTNodeWithReadOption(e,t,Lq(t,s)),this.matchTNodeWithReadOption(e,t,am(t,e,s,!1,!1))}else n===hh?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,am(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===Bs||r===bu||r===hh&&4&t.type)this.addMatch(t.index,-2);else{const s=am(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Lq(i,e){const t=i.localNames;if(null!==t)for(let n=0;n<t.length;n+=2)if(t[n]===e)return t[n+1];return null}function Uq(i,e,t,n){return-1===t?function Nq(i,e){return 11&i.type?Zf(i,e):4&i.type?IT(i,e):null}(e,i):-2===t?function zq(i,e,t){return t===Bs?Zf(e,i):t===hh?IT(e,i):t===bu?eO(e,i):void 0}(i,e,n):Vf(i,i[ts],t,e)}function nO(i,e,t,n){const r=e[Ul].queries[n];if(null===r.matches){const s=i.data,a=t.matches,l=[];for(let u=0;u<a.length;u+=2){const d=a[u];l.push(d<0?null:Uq(e,s[d],a[u+1],t.metadata.read))}r.matches=l}return r.matches}function vB(i,e,t,n){const r=i.queries.getByIndex(t),s=r.matches;if(null!==s){const a=nO(i,e,r,t);for(let l=0;l<s.length;l+=2){const u=s[l];if(u>0)n.push(a[l/2]);else{const d=s[l+1],A=e[-u];for(let y=Hc;y<A.length;y++){const C=A[y];C[bh]===C[js]&&vB(C[ts],C,d,n)}if(null!==A[th]){const y=A[th];for(let C=0;C<y.length;C++){const k=y[C];vB(k[ts],k,d,n)}}}}}return n}function jo(i){const e=Zi(),t=_a(),n=Zd();Sd(n+1);const r=sO(t,n);if(i.dirty&&function Au(i){return 4==(4&i[Ws])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)i.reset([]);else{const s=r.crossesNgTemplate?vB(t,e,n,[]):nO(t,e,r,n);i.reset(s,Pg),i.notifyOnChanges()}return!0}return!1}function Ml(i,e,t){const n=_a();n.firstCreatePass&&(rO(n,new tO(i,e,t),-1),2==(2&e)&&(n.staticViewQueries=!0)),iO(n,Zi(),e)}function md(i,e,t,n){const r=_a();if(r.firstCreatePass){const s=xc();rO(r,new tO(e,t,n),s.index),function Vq(i,e){const t=i.contentQueries||(i.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(i.queries.length-1,e)}(r,i),2==(2&t)&&(r.staticContentQueries=!0)}iO(r,Zi(),t)}function $o(){return function Hq(i,e){return i[Ul].queries[e].queryList}(Zi(),Zd())}function iO(i,e,t){const n=new Bv(4==(4&t));o_(i,e,n,n.destroy),null===e[Ul]&&(e[Ul]=new gB),e[Ul].queries.push(new mB(n))}function rO(i,e,t){null===i.queries&&(i.queries=new _B),i.queries.track(new yB(e,t))}function sO(i,e){return i.queries.getByIndex(e)}function PT(i,e){return IT(i,e)}function RT(...i){}const kT=new sr("Application Initializer");let OT=(()=>{class i{constructor(t){this.appInits=t,this.resolve=RT,this.reject=RT,this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],n=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(A_(s))t.push(s);else if(Q2(s)){const a=new Promise((l,u)=>{s.subscribe({complete:l,error:u})});t.push(a)}}Promise.all(t).then(()=>{n()}).catch(r=>{this.reject(r)}),0===t.length&&n(),this.initialized=!0}}return i.\u0275fac=function(t){return new(t||i)(oi(kT,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ix=new sr("AppId",{providedIn:"root",factory:function wO(){return`${SB()}${SB()}${SB()}`}});function SB(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const MO=new sr("Platform Initializer"),LT=new sr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),dh=new sr("AnimationModuleType");let lQ=(()=>{class i{log(t){console.log(t)}warn(t){console.warn(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Wg=new sr("LocaleId",{providedIn:"root",factory:()=>Do(Wg,Mn.Optional|Mn.SkipSelf)||function cQ(){return typeof $localize<"u"&&$localize.locale||no}()});class hQ{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let CO=(()=>{class i{compileModuleSync(t){return new hB(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const n=this.compileModuleSync(t),s=Jf(wr(t).declarations).reduce((a,l)=>{const u=Go(l);return u&&a.push(new gv(u)),a},[]);return new hQ(n,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const pQ=(()=>Promise.resolve(0))();function TB(i){typeof Zone>"u"?pQ.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class po{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ao(!1),this.onMicrotaskEmpty=new ao(!1),this.onStable=new ao(!1),this.onError=new ao(!1),typeof Zone>"u")throw new pi(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function AQ(){let i=Cs.requestAnimationFrame,e=Cs.cancelAnimationFrame;if(typeof Zone<"u"&&i&&e){const t=i[Zone.__symbol__("OriginalDelegate")];t&&(i=t);const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function _Q(i){const e=()=>{!function gQ(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Cs,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,DB(i),i.isCheckStableRunning=!0,EB(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),DB(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,n,r,s,a,l)=>{try{return EO(i),t.invokeTask(r,s,a,l)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||i.shouldCoalesceRunChangeDetection)&&e(),DO(i)}},onInvoke:(t,n,r,s,a,l,u)=>{try{return EO(i),t.invoke(r,s,a,l,u)}finally{i.shouldCoalesceRunChangeDetection&&e(),DO(i)}},onHasTask:(t,n,r,s)=>{t.hasTask(r,s),n===r&&("microTask"==s.change?(i._hasPendingMicrotasks=s.microTask,DB(i),EB(i)):"macroTask"==s.change&&(i.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,n,r,s)=>(t.handleError(r,s),i.runOutsideAngular(()=>i.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!po.isInAngularZone())throw new pi(909,!1)}static assertNotInAngularZone(){if(po.isInAngularZone())throw new pi(909,!1)}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const s=this._inner,a=s.scheduleEventTask("NgZoneEvent: "+r,e,mQ,RT,RT);try{return s.runTask(a,t,n)}finally{s.cancelTask(a)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const mQ={};function EB(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function DB(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function EO(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function DO(i){i._nesting--,EB(i)}class yQ{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ao,this.onMicrotaskEmpty=new ao,this.onStable=new ao,this.onError=new ao}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}const BO=new sr(""),NT=new sr("");let PB,BB=(()=>{class i{constructor(t,n,r){this._ngZone=t,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,PB||(function vQ(i){PB=i}(r),r.addToWindow(n)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{po.assertNotInAngularZone(),TB(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())TB(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>!n.updateCb||!n.updateCb(t)||(clearTimeout(n.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,n,r){let s=-1;n&&n>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==s),t(this._didWork,this.getPendingTasks())},n)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,n,r){return[]}}return i.\u0275fac=function(t){return new(t||i)(oi(po),oi(IB),oi(NT))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})(),IB=(()=>{class i{constructor(){this._applications=new Map}registerApplication(t,n){this._applications.set(t,n)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,n=!0){return PB?.findTestabilityInTree(this,t,n)??null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const M_=!1;let X1=null;const IO=new sr("AllowMultipleToken"),FB=new sr("PlatformDestroyListeners"),PO=new sr("appBootstrapListener");class FO{constructor(e,t){this.name=e,this.token=t}}function kO(i,e,t=[]){const n=`Platform: ${e}`,r=new sr(n);return(s=[])=>{let a=RB();if(!a||a.injector.get(IO,!1)){const l=[...t,...s,{provide:r,useValue:!0}];i?i(l):function wQ(i){if(X1&&!X1.get(IO,!1))throw new pi(400,!1);X1=i;const e=i.get(LO);(function RO(i){const e=i.get(MO,null);e&&e.forEach(t=>t())})(i)}(function OO(i=[],e){return $c.create({name:e,providers:[{provide:$s,useValue:"platform"},{provide:FB,useValue:new Set([()=>X1=null])},...i]})}(l,n))}return function CQ(i){const e=RB();if(!e)throw new pi(401,!1);return e}()}}function RB(){return X1?.get(LO)??null}let LO=(()=>{class i{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,n){const r=function UO(i,e){let t;return t="noop"===i?new yQ:("zone.js"===i?void 0:i)||new po(e),t}(n?.ngZone,function NO(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(n)),s=[{provide:po,useValue:r}];return r.run(()=>{const a=$c.create({providers:s,parent:this.injector,name:t.moduleType.name}),l=t.create(a),u=l.injector.get(ud,null);if(!u)throw new pi(402,!1);return r.runOutsideAngular(()=>{const d=r.onError.subscribe({next:A=>{u.handleError(A)}});l.onDestroy(()=>{UT(this._modules,l),d.unsubscribe()})}),function zO(i,e,t){try{const n=t();return A_(n)?n.catch(r=>{throw e.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw e.runOutsideAngular(()=>i.handleError(n)),n}}(u,r,()=>{const d=l.injector.get(OT);return d.runInitializers(),d.donePromise.then(()=>(function bi(i){E(i,"Expected localeId to be defined"),"string"==typeof i&&(ri=i.toLowerCase().replace(/_/g,"-"))}(l.injector.get(Wg,no)||no),this._moduleDoBootstrap(l),l))})})}bootstrapModule(t,n=[]){const r=HO({},n);return function bQ(i,e,t){const n=new hB(t);return Promise.resolve(n)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const n=t.injector.get(Px);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new pi(-403,!1);t.instance.ngDoBootstrap(n)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pi(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());const t=this._injector.get(FB,null);t&&(t.forEach(n=>n()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(t){return new(t||i)(oi($c))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function HO(i,e){return Array.isArray(e)?e.reduce(HO,i):{...i,...e}}let Px=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(t,n,r){this._zone=t,this._injector=n,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new fe(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new fe(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{po.assertNotInAngularZone(),TB(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const d=this._zone.onUnstable.subscribe(()=>{po.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),d.unsubscribe()}});this.isStable=It(s,a.pipe(function Pt(i={}){const{connector:e=(()=>new D),resetOnError:t=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return s=>{let a,l,u,d=0,A=!1,y=!1;const C=()=>{l?.unsubscribe(),l=void 0},k=()=>{C(),a=u=void 0,A=y=!1},Q=()=>{const se=a;k(),se?.unsubscribe()};return Ee((se,he)=>{d++,!y&&!A&&C();const re=u=u??e();he.add(()=>{d--,0===d&&!y&&!A&&(l=Sn(Q,r))}),re.subscribe(he),!a&&d>0&&(a=new F({next:Le=>re.next(Le),error:Le=>{y=!0,C(),l=Sn(k,t,Le),re.error(Le)},complete:()=>{A=!0,C(),l=Sn(k,n),re.complete()}}),Yo(se).subscribe(a))})(s)}}()))}bootstrap(t,n){const r=t instanceof Fh;if(!this._injector.get(OT).done){!r&&function Ll(i){const e=Go(i)||qo(i)||yc(i);return null!==e&&e.standalone}(t);throw new pi(405,M_)}let a;a=r?t:this._injector.get(Od).resolveComponentFactory(t),this.componentTypes.push(a.componentType);const l=function xQ(i){return i.isBoundToModule}(a)?void 0:this._injector.get(Ex),d=a.create($c.NULL,[],n||a.selector,l),A=d.location.nativeElement,y=d.injector.get(BO,null);return y?.registerApplication(A),d.onDestroy(()=>{this.detachView(d.hostView),UT(this.components,d),y?.unregisterApplication(A)}),this._loadComponent(d),d}tick(){if(this._runningTick)throw new pi(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const n=t;this._views.push(n),n.attachToAppRef(this)}detachView(t){const n=t;UT(this._views,n),n.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const n=this._injector.get(PO,[]);n.push(...this._bootstrapListeners),n.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>UT(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new pi(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(t){return new(t||i)(oi(po),oi(zr),oi(ud))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function UT(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}let zl=(()=>{class i{}return i.__NG_ELEMENT_ID__=TQ,i})();function TQ(i){return function EQ(i,e,t){if(wh(i)&&!t){const n=bc(i.index,e);return new Av(n,n)}return 47&i.type?new Av(e[Nl],e):null}(xc(),Zi(),16==(16&i))}class WO{constructor(){}supports(e){return bv(e)}create(e){return new RQ(e)}}const FQ=(i,e)=>e;class RQ{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||FQ}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,s=null;for(;t||n;){const a=!n||t&&t.currentIndex<$O(n,r,s)?t:n,l=$O(a,r,s),u=a.currentIndex;if(a===n)r--,n=n._nextRemoved;else if(t=t._next,null==a.previousIndex)r++;else{s||(s=[]);const d=l-r,A=u-r;if(d!=A){for(let C=0;C<d;C++){const k=C<s.length?s[C]:s[C]=0,Q=k+C;A<=Q&&Q<d&&(s[C]=k+1)}s[a.previousIndex]=A-d}}l!==u&&e(a,l,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!bv(e))throw new pi(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,a,t=this._itHead,n=!1;if(Array.isArray(e)){this.length=e.length;for(let l=0;l<this.length;l++)s=e[l],a=this._trackByFn(l,s),null!==t&&Object.is(t.trackById,a)?(n&&(t=this._verifyReinsertion(t,s,a,l)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,a,l),n=!0),t=t._next}else r=0,function Ek(i,e){if(Array.isArray(i))for(let t=0;t<i.length;t++)e(i[t]);else{const t=i[Symbol.iterator]();let n;for(;!(n=t.next()).done;)e(n.value)}}(e,l=>{a=this._trackByFn(r,l),null!==t&&Object.is(t.trackById,a)?(n&&(t=this._verifyReinsertion(t,l,a,r)),Object.is(t.item,l)||this._addIdentityChange(t,l)):(t=this._mismatch(t,l,a,r),n=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new kQ(t,n),s,r),e}_verifyReinsertion(e,t,n,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new jO),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new jO),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class kQ{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class OQ{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class jO{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new OQ,this.map.set(t,n)),n.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $O(i,e,t){const n=i.previousIndex;if(null===n)return n;let r=0;return t&&n<t.length&&(r=t[n]),n+e+r}class XO{constructor(){}supports(e){return e instanceof Map||_x(e)}create(){return new LQ}}class LQ{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||_x(e)))throw new pi(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(n,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,n),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,n);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let n=t;null!==n;n=n._nextRemoved)n===this._mapHead&&(this._mapHead=null),this._records.delete(n.key),n._nextRemoved=n._next,n.previousValue=n.currentValue,n.currentValue=null,n._prev=null,n._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,a=r._next;return s&&(s._next=a),a&&(a._prev=s),r._next=null,r._prev=null,r}const n=new NQ(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class NQ{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function KO(){return new Pv([new WO])}let Pv=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(null!=n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||KO()),deps:[[i,new vA,new Bd]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(null!=n)return n;throw new pi(901,!1)}}return i.\u0275prov=Ue({token:i,providedIn:"root",factory:KO}),i})();function YO(){return new fM([new XO])}let fM=(()=>{class i{constructor(t){this.factories=t}static create(t,n){if(n){const r=n.factories.slice();t=t.concat(r)}return new i(t)}static extend(t){return{provide:i,useFactory:n=>i.create(t,n||YO()),deps:[[i,new vA,new Bd]]}}find(t){const n=this.factories.find(r=>r.supports(t));if(n)return n;throw new pi(901,!1)}}return i.\u0275prov=Ue({token:i,providedIn:"root",factory:YO}),i})();const HQ=kO(null,"core",[]);let VQ=(()=>{class i{constructor(t){}}return i.\u0275fac=function(t){return new(t||i)(oi(Px))},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({}),i})();function Fx(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}let UB=null;function C_(){return UB}class QQ{}const Zo=new sr("DocumentToken");let zB=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:function(){return function WQ(){return oi(ZO)}()},providedIn:"platform"}),i})();const jQ=new sr("Location Initialized");let ZO=(()=>{class i extends zB{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return C_().getBaseHref(this._doc)}onPopState(t){const n=C_().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",t,!1),()=>n.removeEventListener("popstate",t)}onHashChange(t){const n=C_().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",t,!1),()=>n.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,n,r){JO()?this._history.pushState(t,n,r):this._location.hash=r}replaceState(t,n,r){JO()?this._history.replaceState(t,n,r):this._location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo))},i.\u0275prov=Ue({token:i,factory:function(){return function $Q(){return new ZO(oi(Zo))}()},providedIn:"platform"}),i})();function JO(){return!!window.history.pushState}function HB(i,e){if(0==i.length)return e;if(0==e.length)return i;let t=0;return i.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?i+e.substring(1):1==t?i+e:i+"/"+e}function eL(i){const e=i.match(/#|\?|$/),t=e&&e.index||i.length;return i.slice(0,t-("/"===i[t-1]?1:0))+i.slice(t)}function S_(i){return i&&"?"!==i[0]?"?"+i:i}let Fv=(()=>{class i{historyGo(t){throw new Error("Not implemented")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:function(){return Do(nL)},providedIn:"root"}),i})();const tL=new sr("appBaseHref");let nL=(()=>{class i extends Fv{constructor(t,n){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??Do(Zo).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return HB(this._baseHref,t)}path(t=!1){const n=this._platformLocation.pathname+S_(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${n}${r}`:n}pushState(t,n,r,s){const a=this.prepareExternalUrl(r+S_(s));this._platformLocation.pushState(t,n,a)}replaceState(t,n,r,s){const a=this.prepareExternalUrl(r+S_(s));this._platformLocation.replaceState(t,n,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(oi(zB),oi(tL,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),XQ=(()=>{class i extends Fv{constructor(t,n){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=n&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let n=this._platformLocation.hash;return null==n&&(n="#"),n.length>0?n.substring(1):n}prepareExternalUrl(t){const n=HB(this._baseHref,t);return n.length>0?"#"+n:n}pushState(t,n,r,s){let a=this.prepareExternalUrl(r+S_(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.pushState(t,n,a)}replaceState(t,n,r,s){let a=this.prepareExternalUrl(r+S_(s));0==a.length&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(t,n,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return i.\u0275fac=function(t){return new(t||i)(oi(zB),oi(tL,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})(),pM=(()=>{class i{constructor(t){this._subject=new ao,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const n=this._locationStrategy.getBaseHref();this._basePath=function ZQ(i){if(new RegExp("^(https?:)?//").test(i)){const[,t]=i.split(/\/\/[^\/]+/);return t}return i}(eL(iL(n))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,n=""){return this.path()==this.normalize(t+S_(n))}normalize(t){return i.stripTrailingSlash(function YQ(i,e){if(!i||!e.startsWith(i))return e;const t=e.substring(i.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,iL(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,n="",r=null){this._locationStrategy.pushState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+S_(n)),r)}replaceState(t,n="",r=null){this._locationStrategy.replaceState(r,"",t,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+S_(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)})),()=>{const n=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(n,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",n){this._urlChangeListeners.forEach(r=>r(t,n))}subscribe(t,n,r){return this._subject.subscribe({next:t,error:n,complete:r})}}return i.normalizeQueryParams=S_,i.joinWithSlash=HB,i.stripTrailingSlash=eL,i.\u0275fac=function(t){return new(t||i)(oi(Fv))},i.\u0275prov=Ue({token:i,factory:function(){return function KQ(){return new pM(oi(Fv))}()},providedIn:"root"}),i})();function iL(i){return i.replace(/\/index.html$/,"")}function dL(i,e){e=encodeURIComponent(e);for(const t of i.split(";")){const n=t.indexOf("="),[r,s]=-1==n?[t,""]:[t.slice(0,n),t.slice(n+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}const YB=/\s+/,fL=[];let Dm=(()=>{class i{constructor(t,n,r,s){this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=s,this.initialClasses=fL,this.stateMap=new Map}set klass(t){this.initialClasses=null!=t?t.trim().split(YB):fL}set ngClass(t){this.rawClass="string"==typeof t?t.trim().split(YB):t}ngDoCheck(){for(const n of this.initialClasses)this._updateState(n,!0);const t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(const n of t)this._updateState(n,!0);else if(null!=t)for(const n of Object.keys(t))this._updateState(n,Boolean(t[n]));this._applyStateDiff()}_updateState(t,n){const r=this.stateMap.get(t);void 0!==r?(r.enabled!==n&&(r.changed=!0,r.enabled=n),r.touched=!0):this.stateMap.set(t,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(const t of this.stateMap){const n=t[0],r=t[1];r.changed?(this._toggleClass(n,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),r.touched=!1}}_toggleClass(t,n){(t=t.trim()).length>0&&t.split(YB).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return i.\u0275fac=function(t){return new(t||i)(Et(Pv),Et(fM),Et(Bs),Et(ds))},i.\u0275dir=gr({type:i,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),i})();class OW{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let sp=(()=>{class i{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,n,r){this._viewContainer=t,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const n=this._viewContainer;t.forEachOperation((r,s,a)=>{if(null==r.previousIndex)n.createEmbeddedView(this._template,new OW(r.item,this._ngForOf,-1,-1),null===a?void 0:a);else if(null==a)n.remove(null===s?void 0:s);else if(null!==s){const l=n.get(s);n.move(l,a),mL(l,r)}});for(let r=0,s=n.length;r<s;r++){const l=n.get(r).context;l.index=r,l.count=s,l.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{mL(n.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(Et(bu),Et(hh),Et(Pv))},i.\u0275dir=gr({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),i})();function mL(i,e){i.context.$implicit=e.item}let ph=(()=>{class i{constructor(t,n){this._viewContainer=t,this._context=new NW,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){gL("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){gL("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,n){return!0}}return i.\u0275fac=function(t){return new(t||i)(Et(bu),Et(hh))},i.\u0275dir=gr({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),i})();class NW{constructor(){this.$implicit=null,this.ngIf=null}}function gL(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${In(e)}'.`)}class ZB{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let YT=(()=>{class i{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const n=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||n,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),n}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const n of this._defaultViews)n.enforceState(t)}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=gr({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),i})(),_L=(()=>{class i{constructor(t,n,r){this.ngSwitch=r,r._addCase(),this._view=new ZB(t,n)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return i.\u0275fac=function(t){return new(t||i)(Et(bu),Et(hh),Et(YT,9))},i.\u0275dir=gr({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),i})(),vL=(()=>{class i{constructor(t,n,r){this._ngEl=t,this._differs=n,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,n){const[r,s]=t.split("."),a=-1===r.indexOf("-")?void 0:Mc.DashCase;null!=n?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${n}${s}`:n,a):this._renderer.removeStyle(this._ngEl.nativeElement,r,a)}_applyChanges(t){t.forEachRemovedItem(n=>this._setStyle(n.key,null)),t.forEachAddedItem(n=>this._setStyle(n.key,n.currentValue)),t.forEachChangedItem(n=>this._setStyle(n.key,n.currentValue))}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(fM),Et(ds))},i.\u0275dir=gr({type:i,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),i})(),bL=(()=>{class i{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:a}=this;this._viewRef=n.createEmbeddedView(r,s,a?{injector:a}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return i.\u0275fac=function(t){return new(t||i)(Et(bu))},i.\u0275dir=gr({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Ic]}),i})(),K1=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({}),i})();const wL="browser";let fj=(()=>{class i{}return i.\u0275prov=Ue({token:i,providedIn:"root",factory:()=>new pj(oi(Zo),window)}),i})();class pj{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Aj(i,e){const t=i.getElementById(e)||i.getElementsByName(e)[0];if(t)return t;if("function"==typeof i.createTreeWalker&&i.body&&(i.body.createShadowRoot||i.body.attachShadow)){const n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const s=r.shadowRoot;if(s){const a=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(a)return a}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(n-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ML(this.window.history)||ML(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ML(i){return Object.getOwnPropertyDescriptor(i,"scrollRestoration")}class CL{}class Vj extends QQ{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class iI extends Vj{static makeCurrent(){!function qQ(i){UB||(UB=i)}(new iI)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Gj(){return _M=_M||document.querySelector("base"),_M?_M.getAttribute("href"):null}();return null==t?null:function qj(i){eE=eE||document.createElement("a"),eE.setAttribute("href",i);const e=eE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_M=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return dL(document.cookie,e)}}let eE,_M=null;const BL=new sr("TRANSITION_ID"),Wj=[{provide:kT,useFactory:function Qj(i,e,t){return()=>{t.get(OT).donePromise.then(()=>{const n=C_(),r=e.querySelectorAll(`style[ng-transition="${i}"]`);for(let s=0;s<r.length;s++)n.remove(r[s])})}},deps:[BL,Zo,$c],multi:!0}];let $j=(()=>{class i{build(){return new XMLHttpRequest}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();const tE=new sr("EventManagerPlugins");let nE=(()=>{class i{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(r=>{r.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,n,r){return this._findPluginFor(n).addEventListener(t,n,r)}addGlobalEventListener(t,n,r){return this._findPluginFor(n).addGlobalEventListener(t,n,r)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const r=this._plugins;for(let s=0;s<r.length;s++){const a=r[s];if(a.supports(t))return this._eventNameToPlugin.set(t,a),a}throw new Error(`No event manager plugin found for event ${t}`)}}return i.\u0275fac=function(t){return new(t||i)(oi(tE),oi(po))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();class IL{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=C_().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let PL=(()=>{class i{constructor(){this.usageCount=new Map}addStyles(t){for(const n of t)1===this.changeUsageCount(n,1)&&this.onStyleAdded(n)}removeStyles(t){for(const n of t)0===this.changeUsageCount(n,-1)&&this.onStyleRemoved(n)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,n){const r=this.usageCount;let s=r.get(t)??0;return s+=n,s>0?r.set(t,s):r.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})(),yM=(()=>{class i extends PL{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const n of this.hostNodes)this.addStyleToHost(n,t)}onStyleRemoved(t){const n=this.styleRef;n.get(t)?.forEach(s=>s.remove()),n.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const n of this.getAllStyles())this.addStyleToHost(t,n)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,n){const r=this.doc.createElement("style");r.textContent=n,t.appendChild(r);const s=this.styleRef.get(n);s?s.push(r):this.styleRef.set(n,[r])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();const rI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},sI=/%COMP%/g,kL=new sr("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function OL(i,e){return e.flat(100).map(t=>t.replace(sI,i))}function LL(i){return e=>{if("__ngUnwrap__"===e)return i;!1===i(e)&&(e.preventDefault(),e.returnValue=!1)}}let iE=(()=>{class i{constructor(t,n,r,s){this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new oI(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;const r=this.getOrCreateRenderer(t,n);return r instanceof zL?r.applyToHost(t):r instanceof aI&&r.applyStyles(),r}getOrCreateRenderer(t,n){const r=this.rendererByCompId;let s=r.get(n.id);if(!s){const a=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestory;switch(n.encapsulation){case Zu.Emulated:s=new zL(a,l,n,this.appId,u);break;case Zu.ShadowDom:return new t$(a,l,t,n);default:s=new aI(a,l,n,u)}s.onDestroy=()=>r.delete(n.id),r.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return i.\u0275fac=function(t){return new(t||i)(oi(nE),oi(yM),oi(Ix),oi(kL))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();class oI{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(rI[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(UL(e)?e.content:e).appendChild(t)}insertBefore(e,t,n){e&&(UL(e)?e.content:e).insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const s=rI[r];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=rI[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(Mc.DashCase|Mc.Important)?e.style.setProperty(t,n,r&Mc.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&Mc.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,LL(n)):this.eventManager.addEventListener(e,t,LL(n))}}function UL(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class t$ extends oI{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=OL(r.id,r.styles);for(const a of s){const l=document.createElement("style");l.textContent=a,this.shadowRoot.appendChild(l)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class aI extends oI{constructor(e,t,n,r,s=n.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=r,this.rendererUsageCount=0,this.styles=OL(s,n.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class zL extends aI{constructor(e,t,n,r,s){const a=r+"-"+n.id;super(e,t,n,s,a),this.contentAttr=function Zj(i){return"_ngcontent-%COMP%".replace(sI,i)}(a),this.hostAttr=function Jj(i){return"_nghost-%COMP%".replace(sI,i)}(a)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}let n$=(()=>{class i extends IL{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,r){return t.addEventListener(n,r,!1),()=>this.removeEventListener(t,n,r)}removeEventListener(t,n,r){return t.removeEventListener(n,r)}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();const HL=["alt","control","meta","shift"],i$={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},r$={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let s$=(()=>{class i extends IL{constructor(t){super(t)}supports(t){return null!=i.parseEventName(t)}addEventListener(t,n,r){const s=i.parseEventName(n),a=i.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>C_().onAndCancel(t,s.domEventName,a))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const s=i._normalizeKey(n.pop());let a="",l=n.indexOf("code");if(l>-1&&(n.splice(l,1),a="code."),HL.forEach(d=>{const A=n.indexOf(d);A>-1&&(n.splice(A,1),a+=d+".")}),a+=s,0!=n.length||0===s.length)return null;const u={};return u.domEventName=r,u.fullKey=a,u}static matchEventFullKeyCode(t,n){let r=i$[t.key]||t.key,s="";return n.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),HL.forEach(a=>{a!==r&&(0,r$[a])(t)&&(s+=a+".")}),s+=r,s===n)}static eventCallback(t,n,r){return s=>{i.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>n(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();const GL=[{provide:LT,useValue:wL},{provide:MO,useValue:function o$(){iI.makeCurrent()},multi:!0},{provide:Zo,useFactory:function l$(){return function Ps(i){No=i}(document),document},deps:[]}],c$=kO(HQ,"browser",GL),qL=new sr(""),QL=[{provide:NT,useClass:class jj{addToWindow(e){Cs.getAngularTestability=(n,r=!0)=>{const s=e.findTestabilityInTree(n,r);if(null==s)throw new Error("Could not find testability for element.");return s},Cs.getAllAngularTestabilities=()=>e.getAllTestabilities(),Cs.getAllAngularRootElements=()=>e.getAllRootElements(),Cs.frameworkStabilizers||(Cs.frameworkStabilizers=[]),Cs.frameworkStabilizers.push(n=>{const r=Cs.getAllAngularTestabilities();let s=r.length,a=!1;const l=function(u){a=a||u,s--,0==s&&n(a)};r.forEach(function(u){u.whenStable(l)})})}findTestabilityInTree(e,t,n){return null==t?null:e.getTestability(t)??(n?C_().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:BO,useClass:BB,deps:[po,IB,NT]},{provide:BB,useClass:BB,deps:[po,IB,NT]}],WL=[{provide:$s,useValue:"root"},{provide:ud,useFactory:function a$(){return new ud},deps:[]},{provide:tE,useClass:n$,multi:!0,deps:[Zo,po,LT]},{provide:tE,useClass:s$,multi:!0,deps:[Zo]},{provide:iE,useClass:iE,deps:[nE,yM,Ix,kL]},{provide:kp,useExisting:iE},{provide:PL,useExisting:yM},{provide:yM,useClass:yM,deps:[Zo]},{provide:nE,useClass:nE,deps:[tE,po]},{provide:CL,useClass:$j,deps:[]},[]];let jL=(()=>{class i{constructor(t){}static withServerTransition(t){return{ngModule:i,providers:[{provide:Ix,useValue:t.appId},{provide:BL,useExisting:Ix},Wj]}}}return i.\u0275fac=function(t){return new(t||i)(oi(qL,12))},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({providers:[...WL,...QL],imports:[K1,VQ]}),i})(),$L=(()=>{class i{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo))},i.\u0275prov=Ue({token:i,factory:function(t){let n=null;return n=t?new t:function h$(){return new $L(oi(Zo))}(),n},providedIn:"root"}),i})();function Zs(...i){return un(i,wt(i))}function Z1(i,e){return ze(e)?ga(i,e,1):ga(i,1)}function Yc(i,e){return Ee((t,n)=>{let r=0;t.subscribe(Ve(n,s=>i.call(e,s,r++)&&n.next(s)))})}typeof window<"u"&&window;class rE{}class hI{}class jg{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const n=t.indexOf(":");if(n>0){const r=t.slice(0,n),s=r.toLowerCase(),a=t.slice(n+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(a):this.headers.set(s,[a])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,n])=>{let r;if(r="string"==typeof n?[n]:"number"==typeof n?[n.toString()]:n.map(s=>s.toString()),r.length>0){const s=t.toLowerCase();this.headers.set(s,r),this.maybeSetNormalizedName(t,s)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof jg?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new jg;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof jg?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let n=e.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...n),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let a=this.headers.get(t);if(!a)return;a=a.filter(l=>-1===s.indexOf(l)),0===a.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,a)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class g${encodeKey(e){return ZL(e)}encodeValue(e){return ZL(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const y$=/%(\d[a-f0-9])/gi,v$={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ZL(i){return encodeURIComponent(i).replace(y$,(e,t)=>v$[t]??e)}function sE(i){return`${i}`}class J1{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new g$,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function _$(i,e){const t=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[a,l]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],u=t.get(a)||[];u.push(l),t.set(a,u)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const n=e.fromObject[t],r=Array.isArray(n)?n.map(sE):[sE(n)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(n=>{const r=e[n];Array.isArray(r)?r.forEach(s=>{t.push({param:n,value:s,op:"a"})}):t.push({param:n,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(n=>t+"="+this.encoder.encodeValue(n)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new J1({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(sE(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let n=this.map.get(e.param)||[];const r=n.indexOf(sE(e.value));-1!==r&&n.splice(r,1),n.length>0?this.map.set(e.param,n):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class b${constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function JL(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function e8(i){return typeof Blob<"u"&&i instanceof Blob}function t8(i){return typeof FormData<"u"&&i instanceof FormData}class vM{constructor(e,t,n,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function x$(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,s=r):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new jg),this.context||(this.context=new b$),this.params){const a=this.params.toString();if(0===a.length)this.urlWithParams=t;else{const l=t.indexOf("?");this.urlWithParams=t+(-1===l?"?":l<t.length-1?"&":"")+a}}else this.params=new J1,this.urlWithParams=t}serializeBody(){return null===this.body?null:JL(this.body)||e8(this.body)||t8(this.body)||function w$(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof J1?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||t8(this.body)?null:e8(this.body)?this.body.type||null:JL(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof J1?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,n=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,l=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let u=e.headers||this.headers,d=e.params||this.params;const A=e.context??this.context;return void 0!==e.setHeaders&&(u=Object.keys(e.setHeaders).reduce((y,C)=>y.set(C,e.setHeaders[C]),u)),e.setParams&&(d=Object.keys(e.setParams).reduce((y,C)=>y.set(C,e.setParams[C]),d)),new vM(t,n,s,{params:d,headers:u,context:A,reportProgress:l,responseType:r,withCredentials:a})}}var qu=(()=>((qu=qu||{})[qu.Sent=0]="Sent",qu[qu.UploadProgress=1]="UploadProgress",qu[qu.ResponseHeader=2]="ResponseHeader",qu[qu.DownloadProgress=3]="DownloadProgress",qu[qu.Response=4]="Response",qu[qu.User=5]="User",qu))();class dI{constructor(e,t=200,n="OK"){this.headers=e.headers||new jg,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||n,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class fI extends dI{constructor(e={}){super(e),this.type=qu.ResponseHeader}clone(e={}){return new fI({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class oE extends dI{constructor(e={}){super(e),this.type=qu.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new oE({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class n8 extends dI{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function pI(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let bM=(()=>{class i{constructor(t){this.handler=t}request(t,n,r={}){let s;if(t instanceof vM)s=t;else{let u,d;u=r.headers instanceof jg?r.headers:new jg(r.headers),r.params&&(d=r.params instanceof J1?r.params:new J1({fromObject:r.params})),s=new vM(t,n,void 0!==r.body?r.body:null,{headers:u,context:r.context,params:d,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const a=Zs(s).pipe(Z1(u=>this.handler.handle(u)));if(t instanceof vM||"events"===r.observe)return a;const l=a.pipe(Yc(u=>u instanceof oE));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(et(u=>{if(null!==u.body&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return l.pipe(et(u=>{if(null!==u.body&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return l.pipe(et(u=>{if(null!==u.body&&"string"!=typeof u.body)throw new Error("Response is not a string.");return u.body}));default:return l.pipe(et(u=>u.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,n={}){return this.request("DELETE",t,n)}get(t,n={}){return this.request("GET",t,n)}head(t,n={}){return this.request("HEAD",t,n)}jsonp(t,n){return this.request("JSONP",t,{params:(new J1).append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,n={}){return this.request("OPTIONS",t,n)}patch(t,n,r={}){return this.request("PATCH",t,pI(r,n))}post(t,n,r={}){return this.request("POST",t,pI(r,n))}put(t,n,r={}){return this.request("PUT",t,pI(r,n))}}return i.\u0275fac=function(t){return new(t||i)(oi(rE))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();function i8(i,e){return e(i)}function M$(i,e){return(t,n)=>e.intercept(t,{handle:r=>i(r,n)})}const S$=new sr("HTTP_INTERCEPTORS"),xM=new sr("HTTP_INTERCEPTOR_FNS");function T$(){let i=null;return(e,t)=>(null===i&&(i=(Do(S$,{optional:!0})??[]).reduceRight(M$,i8)),i(e,t))}let r8=(()=>{class i extends rE{constructor(t,n){super(),this.backend=t,this.injector=n,this.chain=null}handle(t){if(null===this.chain){const n=Array.from(new Set(this.injector.get(xM)));this.chain=n.reduceRight((r,s)=>function C$(i,e,t){return(n,r)=>t.runInContext(()=>e(n,s=>i(s,r)))}(r,s,this.injector),i8)}return this.chain(t,n=>this.backend.handle(n))}}return i.\u0275fac=function(t){return new(t||i)(oi(hI),oi(zr))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();const I$=/^\)\]\}',?\n/;let o8=(()=>{class i{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new fe(n=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((k,Q)=>r.setRequestHeader(k,Q.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const k=t.detectContentTypeHeader();null!==k&&r.setRequestHeader("Content-Type",k)}if(t.responseType){const k=t.responseType.toLowerCase();r.responseType="json"!==k?k:"text"}const s=t.serializeBody();let a=null;const l=()=>{if(null!==a)return a;const k=r.statusText||"OK",Q=new jg(r.getAllResponseHeaders()),se=function P$(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}(r)||t.url;return a=new fI({headers:Q,status:r.status,statusText:k,url:se}),a},u=()=>{let{headers:k,status:Q,statusText:se,url:he}=l(),re=null;204!==Q&&(re=typeof r.response>"u"?r.responseText:r.response),0===Q&&(Q=re?200:0);let Le=Q>=200&&Q<300;if("json"===t.responseType&&"string"==typeof re){const be=re;re=re.replace(I$,"");try{re=""!==re?JSON.parse(re):null}catch(Ye){re=be,Le&&(Le=!1,re={error:Ye,text:re})}}Le?(n.next(new oE({body:re,headers:k,status:Q,statusText:se,url:he||void 0})),n.complete()):n.error(new n8({error:re,headers:k,status:Q,statusText:se,url:he||void 0}))},d=k=>{const{url:Q}=l(),se=new n8({error:k,status:r.status||0,statusText:r.statusText||"Unknown Error",url:Q||void 0});n.error(se)};let A=!1;const y=k=>{A||(n.next(l()),A=!0);let Q={type:qu.DownloadProgress,loaded:k.loaded};k.lengthComputable&&(Q.total=k.total),"text"===t.responseType&&r.responseText&&(Q.partialText=r.responseText),n.next(Q)},C=k=>{let Q={type:qu.UploadProgress,loaded:k.loaded};k.lengthComputable&&(Q.total=k.total),n.next(Q)};return r.addEventListener("load",u),r.addEventListener("error",d),r.addEventListener("timeout",d),r.addEventListener("abort",d),t.reportProgress&&(r.addEventListener("progress",y),null!==s&&r.upload&&r.upload.addEventListener("progress",C)),r.send(s),n.next({type:qu.Sent}),()=>{r.removeEventListener("error",d),r.removeEventListener("abort",d),r.removeEventListener("load",u),r.removeEventListener("timeout",d),t.reportProgress&&(r.removeEventListener("progress",y),null!==s&&r.upload&&r.upload.removeEventListener("progress",C)),r.readyState!==r.DONE&&r.abort()}})}}return i.\u0275fac=function(t){return new(t||i)(oi(CL))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();const AI=new sr("XSRF_ENABLED"),a8=new sr("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),l8=new sr("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class c8{}let k$=(()=>{class i{constructor(t,n,r){this.doc=t,this.platform=n,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=dL(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo),oi(LT),oi(a8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();function O$(i,e){const t=i.url.toLowerCase();if(!Do(AI)||"GET"===i.method||"HEAD"===i.method||t.startsWith("http://")||t.startsWith("https://"))return e(i);const n=Do(c8).getToken(),r=Do(l8);return null!=n&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,n)})),e(i)}var Mu=(()=>((Mu=Mu||{})[Mu.Interceptors=0]="Interceptors",Mu[Mu.LegacyInterceptors=1]="LegacyInterceptors",Mu[Mu.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Mu[Mu.NoXsrfProtection=3]="NoXsrfProtection",Mu[Mu.JsonpSupport=4]="JsonpSupport",Mu[Mu.RequestsMadeViaParent=5]="RequestsMadeViaParent",Mu))();function Rx(i,e){return{\u0275kind:i,\u0275providers:e}}function L$(...i){const e=[bM,o8,r8,{provide:rE,useExisting:r8},{provide:hI,useExisting:o8},{provide:xM,useValue:O$,multi:!0},{provide:AI,useValue:!0},{provide:c8,useClass:k$}];for(const t of i)e.push(...t.\u0275providers);return function Ge(i){return{\u0275providers:i}}(e)}const u8=new sr("LEGACY_INTERCEPTOR_FN");let U$=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({providers:[L$(Rx(Mu.LegacyInterceptors,[{provide:u8,useFactory:T$},{provide:xM,useExisting:u8,multi:!0}]))]}),i})();class op extends D{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:n}=this;if(e)throw t;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}}const aE=M(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:z$}=Array,{getPrototypeOf:H$,prototype:V$,keys:G$}=Object;function h8(i){if(1===i.length){const e=i[0];if(z$(e))return{args:e,keys:null};if(function q$(i){return i&&"object"==typeof i&&H$(i)===V$}(e)){const t=G$(e);return{args:t.map(n=>e[n]),keys:t}}}return{args:i,keys:null}}const{isArray:Q$}=Array;function mI(i){return et(e=>function W$(i,e){return Q$(e)?i(...e):i(e)}(i,e))}function d8(i,e){return i.reduce((t,n,r)=>(t[n]=e[r],t),{})}function gI(...i){const e=wt(i),t=ot(i),{args:n,keys:r}=h8(i);if(0===n.length)return un([],e);const s=new fe(function j$(i,e,t=ie){return n=>{f8(e,()=>{const{length:r}=i,s=new Array(r);let a=r,l=r;for(let u=0;u<r;u++)f8(e,()=>{const d=un(i[u],e);let A=!1;d.subscribe(Ve(n,y=>{s[u]=y,A||(A=!0,l--),l||n.next(t(s.slice()))},()=>{--a||n.complete()}))},n)},n)}}(n,e,r?a=>d8(r,a):ie));return t?s.pipe(mI(t)):s}function f8(i,e,t){i?lo(t,i,e):e()}function wM(...i){return function X$(){return xa(1)}()(un(i,wt(i)))}function lE(i){return new fe(e=>{Yo(i()).subscribe(e)})}function kx(i,e){const t=ze(i)?i:()=>i,n=r=>r.error(t());return new fe(e?r=>e.schedule(n,0,r):n)}function _I(){return Ee((i,e)=>{let t=null;i._refCount++;const n=Ve(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(t=null);const r=i._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});i.subscribe(n),n.closed||(t=i.connect())})}class yI extends fe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,_e(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Be;const t=this.getSubject();e.add(this.source.subscribe(Ve(t,void 0,()=>{this._teardown(),t.complete()},n=>{this._teardown(),t.error(n)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Be.EMPTY)}return e}refCount(){return _I()(this)}}function ap(i,e){return Ee((t,n)=>{let r=null,s=0,a=!1;const l=()=>a&&!r&&n.complete();t.subscribe(Ve(n,u=>{r?.unsubscribe();let d=0;const A=s++;Yo(i(u,A)).subscribe(r=Ve(n,y=>n.next(e?e(u,y,A,d++):y),()=>{r=null,l()}))},()=>{a=!0,l()}))})}function Nc(i){return i<=0?()=>Ta:Ee((e,t)=>{let n=0;e.subscribe(Ve(t,r=>{++n<=i&&(t.next(r),i<=n&&t.complete())}))})}function lp(...i){const e=wt(i);return Ee((t,n)=>{(e?wM(i,t,e):wM(i,t)).subscribe(n)})}function cE(i){return Ee((e,t)=>{let n=!1;e.subscribe(Ve(t,r=>{n=!0,t.next(r)},()=>{n||t.next(i),t.complete()}))})}function p8(i=K$){return Ee((e,t)=>{let n=!1;e.subscribe(Ve(t,r=>{n=!0,t.next(r)},()=>n?t.complete():t.error(i())))})}function K$(){return new aE}function ey(i,e){const t=arguments.length>=2;return n=>n.pipe(i?Yc((r,s)=>i(r,s,n)):ie,Nc(1),t?cE(e):p8(()=>new aE))}function Cu(i,e,t){const n=ze(i)||e||t?{next:i,error:e,complete:t}:i;return n?Ee((r,s)=>{var a;null===(a=n.subscribe)||void 0===a||a.call(n);let l=!0;r.subscribe(Ve(s,u=>{var d;null===(d=n.next)||void 0===d||d.call(n,u),s.next(u)},()=>{var u;l=!1,null===(u=n.complete)||void 0===u||u.call(n),s.complete()},u=>{var d;l=!1,null===(d=n.error)||void 0===d||d.call(n,u),s.error(u)},()=>{var u,d;l&&(null===(u=n.unsubscribe)||void 0===u||u.call(n)),null===(d=n.finalize)||void 0===d||d.call(n)}))}):ie}function E_(i){return Ee((e,t)=>{let s,n=null,r=!1;n=e.subscribe(Ve(t,void 0,void 0,a=>{s=Yo(i(a,E_(i)(e))),n?(n.unsubscribe(),n=null,s.subscribe(t)):r=!0})),r&&(n.unsubscribe(),n=null,s.subscribe(t))})}function A8(i,e){return Ee(function Y$(i,e,t,n,r){return(s,a)=>{let l=t,u=e,d=0;s.subscribe(Ve(a,A=>{const y=d++;u=l?i(u,A,y):(l=!0,A),n&&a.next(u)},r&&(()=>{l&&a.next(u),a.complete()})))}}(i,e,arguments.length>=2,!0))}function vI(i){return i<=0?()=>Ta:Ee((e,t)=>{let n=[];e.subscribe(Ve(t,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(const r of n)t.next(r);t.complete()},void 0,()=>{n=null}))})}function m8(i,e){const t=arguments.length>=2;return n=>n.pipe(i?Yc((r,s)=>i(r,s,n)):ie,vI(1),t?cE(e):p8(()=>new aE))}function g8(i){return et(()=>i)}function uE(i){return Ee((e,t)=>{try{e.subscribe(t)}finally{t.add(i)}})}const pa="primary",MM=Symbol("RouteTitle");class J${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ox(i){return new J$(i)}function eX(i,e,t){const n=t.path.split("/");if(n.length>i.length||"full"===t.pathMatch&&(e.hasChildren()||n.length<i.length))return null;const r={};for(let s=0;s<n.length;s++){const a=n[s],l=i[s];if(a.startsWith(":"))r[a.substring(1)]=l;else if(a!==l.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function $g(i,e){const t=i?Object.keys(i):void 0,n=e?Object.keys(e):void 0;if(!t||!n||t.length!=n.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!_8(i[r],e[r]))return!1;return!0}function _8(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const t=[...i].sort(),n=[...e].sort();return t.every((r,s)=>n[s]===r)}return i===e}function y8(i){return Array.prototype.concat.apply([],i)}function v8(i){return i.length>0?i[i.length-1]:null}function gd(i,e){for(const t in i)i.hasOwnProperty(t)&&e(i[t],t)}function ty(i){return Q2(i)?i:A_(i)?un(Promise.resolve(i)):Zs(i)}const hE=!1,nX={exact:function w8(i,e,t){if(!Rv(i.segments,e.segments)||!dE(i.segments,e.segments,t)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children)if(!i.children[n]||!w8(i.children[n],e.children[n],t))return!1;return!0},subset:M8},b8={exact:function iX(i,e){return $g(i,e)},subset:function rX(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(t=>_8(i[t],e[t]))},ignored:()=>!0};function x8(i,e,t){return nX[t.paths](i.root,e.root,t.matrixParams)&&b8[t.queryParams](i.queryParams,e.queryParams)&&!("exact"===t.fragment&&i.fragment!==e.fragment)}function M8(i,e,t){return C8(i,e,e.segments,t)}function C8(i,e,t,n){if(i.segments.length>t.length){const r=i.segments.slice(0,t.length);return!(!Rv(r,t)||e.hasChildren()||!dE(r,t,n))}if(i.segments.length===t.length){if(!Rv(i.segments,t)||!dE(i.segments,t,n))return!1;for(const r in e.children)if(!i.children[r]||!M8(i.children[r],e.children[r],n))return!1;return!0}{const r=t.slice(0,i.segments.length),s=t.slice(i.segments.length);return!!(Rv(i.segments,r)&&dE(i.segments,r,n)&&i.children[pa])&&C8(i.children[pa],e,s,n)}}function dE(i,e,t){return e.every((n,r)=>b8[t](i[r].parameters,n.parameters))}class ny{constructor(e=new Na([],{}),t={},n=null){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ox(this.queryParams)),this._queryParamMap}toString(){return aX.serialize(this)}}class Na{constructor(e,t){this.segments=e,this.children=t,this.parent=null,gd(t,(n,r)=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return fE(this)}}class CM{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ox(this.parameters)),this._parameterMap}toString(){return E8(this)}}function Rv(i,e){return i.length===e.length&&i.every((t,n)=>t.path===e[n].path)}let SM=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:function(){return new bI},providedIn:"root"}),i})();class bI{parse(e){const t=new mX(e);return new ny(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${TM(e.root,!0)}`,n=function uX(i){const e=Object.keys(i).map(t=>{const n=i[t];return Array.isArray(n)?n.map(r=>`${pE(t)}=${pE(r)}`).join("&"):`${pE(t)}=${pE(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${n}${"string"==typeof e.fragment?`#${function lX(i){return encodeURI(i)}(e.fragment)}`:""}`}}const aX=new bI;function fE(i){return i.segments.map(e=>E8(e)).join("/")}function TM(i,e){if(!i.hasChildren())return fE(i);if(e){const t=i.children[pa]?TM(i.children[pa],!1):"",n=[];return gd(i.children,(r,s)=>{s!==pa&&n.push(`${s}:${TM(r,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function oX(i,e){let t=[];return gd(i.children,(n,r)=>{r===pa&&(t=t.concat(e(n,r)))}),gd(i.children,(n,r)=>{r!==pa&&(t=t.concat(e(n,r)))}),t}(i,(n,r)=>r===pa?[TM(i.children[pa],!1)]:[`${r}:${TM(n,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[pa]?`${fE(i)}/${t[0]}`:`${fE(i)}/(${t.join("//")})`}}function S8(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pE(i){return S8(i).replace(/%3B/gi,";")}function xI(i){return S8(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function AE(i){return decodeURIComponent(i)}function T8(i){return AE(i.replace(/\+/g,"%20"))}function E8(i){return`${xI(i.path)}${function cX(i){return Object.keys(i).map(e=>`;${xI(e)}=${xI(i[e])}`).join("")}(i.parameters)}`}const hX=/^[^\/()?;=#]+/;function mE(i){const e=i.match(hX);return e?e[0]:""}const dX=/^[^=?&#]+/,pX=/^[^&#]+/;class mX{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Na([],{}):new Na([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[pa]=new Na(e,t)),n}parseSegment(){const e=mE(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new pi(4009,hE);return this.capture(e),new CM(AE(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=mE(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const r=mE(this.remaining);r&&(n=r,this.capture(n))}e[AE(t)]=AE(n)}parseQueryParam(e){const t=function fX(i){const e=i.match(dX);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const a=function AX(i){const e=i.match(pX);return e?e[0]:""}(this.remaining);a&&(n=a,this.capture(n))}const r=T8(t),s=T8(n);if(e.hasOwnProperty(r)){let a=e[r];Array.isArray(a)||(a=[a],e[r]=a),a.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=mE(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new pi(4010,hE);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=pa);const a=this.parseChildren();t[s]=1===Object.keys(a).length?a[pa]:new Na([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new pi(4011,hE)}}function wI(i){return i.segments.length>0?new Na([],{[pa]:i}):i}function gE(i){const e={};for(const n of Object.keys(i.children)){const s=gE(i.children[n]);(s.segments.length>0||s.hasChildren())&&(e[n]=s)}return function gX(i){if(1===i.numberOfChildren&&i.children[pa]){const e=i.children[pa];return new Na(i.segments.concat(e.segments),e.children)}return i}(new Na(i.segments,e))}function kv(i){return i instanceof ny}const MI=!1;function _X(i,e,t,n,r){if(0===t.length)return Lx(e.root,e.root,e.root,n,r);const s=function F8(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new P8(!0,0,i);let e=0,t=!1;const n=i.reduce((r,s,a)=>{if("object"==typeof s&&null!=s){if(s.outlets){const l={};return gd(s.outlets,(u,d)=>{l[d]="string"==typeof u?u.split("/"):u}),[...r,{outlets:l}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===a?(s.split("/").forEach((l,u)=>{0==u&&"."===l||(0==u&&""===l?t=!0:".."===l?e++:""!=l&&r.push(l))}),r):[...r,s]},[]);return new P8(t,e,n)}(t);return s.toRoot()?Lx(e.root,e.root,new Na([],{}),n,r):function a(u){const d=function vX(i,e,t,n){if(i.isAbsolute)return new Nx(e.root,!0,0);if(-1===n)return new Nx(t,t===e.root,0);return function R8(i,e,t){let n=i,r=e,s=t;for(;s>r;){if(s-=r,n=n.parent,!n)throw new pi(4005,MI&&"Invalid number of '../'");r=n.segments.length}return new Nx(n,!1,r-s)}(t,n+(EM(i.commands[0])?0:1),i.numberOfDoubleDots)}(s,e,i.snapshot?._urlSegment,u),A=d.processChildren?Ux(d.segmentGroup,d.index,s.commands):CI(d.segmentGroup,d.index,s.commands);return Lx(e.root,d.segmentGroup,A,n,r)}(i.snapshot?._lastPathIndex)}function EM(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function DM(i){return"object"==typeof i&&null!=i&&i.outlets}function Lx(i,e,t,n,r){let a,s={};n&&gd(n,(u,d)=>{s[d]=Array.isArray(u)?u.map(A=>`${A}`):`${u}`}),a=i===e?t:I8(i,e,t);const l=wI(gE(a));return new ny(l,s,r)}function I8(i,e,t){const n={};return gd(i.children,(r,s)=>{n[s]=r===e?t:I8(r,e,t)}),new Na(i.segments,n)}class P8{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&EM(n[0]))throw new pi(4003,MI&&"Root segment cannot have matrix parameters");const r=n.find(DM);if(r&&r!==v8(n))throw new pi(4004,MI&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nx{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function CI(i,e,t){if(i||(i=new Na([],{})),0===i.segments.length&&i.hasChildren())return Ux(i,e,t);const n=function xX(i,e,t){let n=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=t.length)return s;const a=i.segments[r],l=t[n];if(DM(l))break;const u=`${l}`,d=n<t.length-1?t[n+1]:null;if(r>0&&void 0===u)break;if(u&&d&&"object"==typeof d&&void 0===d.outlets){if(!O8(u,d,a))return s;n+=2}else{if(!O8(u,{},a))return s;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}(i,e,t),r=t.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){const s=new Na(i.segments.slice(0,n.pathIndex),{});return s.children[pa]=new Na(i.segments.slice(n.pathIndex),i.children),Ux(s,0,r)}return n.match&&0===r.length?new Na(i.segments,{}):n.match&&!i.hasChildren()?SI(i,e,t):n.match?Ux(i,0,r):SI(i,e,t)}function Ux(i,e,t){if(0===t.length)return new Na(i.segments,{});{const n=function bX(i){return DM(i[0])?i[0].outlets:{[pa]:i}}(t),r={};if(!n[pa]&&i.children[pa]&&1===i.numberOfChildren&&0===i.children[pa].segments.length){const s=Ux(i.children[pa],e,t);return new Na(i.segments,s.children)}return gd(n,(s,a)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[a]=CI(i.children[a],e,s))}),gd(i.children,(s,a)=>{void 0===n[a]&&(r[a]=s)}),new Na(i.segments,r)}}function SI(i,e,t){const n=i.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(DM(s)){const u=wX(s.outlets);return new Na(n,u)}if(0===r&&EM(t[0])){n.push(new CM(i.segments[e].path,k8(t[0]))),r++;continue}const a=DM(s)?s.outlets[pa]:`${s}`,l=r<t.length-1?t[r+1]:null;a&&l&&EM(l)?(n.push(new CM(a,k8(l))),r+=2):(n.push(new CM(a,{})),r++)}return new Na(n,{})}function wX(i){const e={};return gd(i,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=SI(new Na([],{}),0,t))}),e}function k8(i){const e={};return gd(i,(t,n)=>e[n]=`${t}`),e}function O8(i,e,t){return i==t.path&&$g(e,t.parameters)}const BM="imperative";class Xg{constructor(e,t){this.id=e,this.url=t}}class TI extends Xg{constructor(e,t,n="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ov extends Xg{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _E extends Xg{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class yE extends Xg{constructor(e,t,n,r){super(e,t),this.reason=n,this.code=r,this.type=16}}class EI extends Xg{constructor(e,t,n,r){super(e,t),this.error=n,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class MX extends Xg{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CX extends Xg{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class SX extends Xg{constructor(e,t,n,r,s){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class TX extends Xg{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EX extends Xg{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DX{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class BX{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class IX{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class PX{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class FX{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class RX{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class L8{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let LX=(()=>{class i{createUrlTree(t,n,r,s,a,l){return _X(t||n.root,r,s,a,l)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})(),UX=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:function(e){return LX.\u0275fac(e)},providedIn:"root"}),i})();class N8{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=DI(e,this._root);return t?t.children.map(n=>n.value):[]}firstChild(e){const t=DI(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=BI(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return BI(e,this._root).map(t=>t.value)}}function DI(i,e){if(i===e.value)return e;for(const t of e.children){const n=DI(i,t);if(n)return n}return null}function BI(i,e){if(i===e.value)return[e];for(const t of e.children){const n=BI(i,t);if(n.length)return n.unshift(e),n}return[]}class D_{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function zx(i){const e={};return i&&i.children.forEach(t=>e[t.value.outlet]=t),e}class U8 extends N8{constructor(e,t){super(e),this.snapshot=t,II(this,e)}toString(){return this.snapshot.toString()}}function z8(i,e){const t=function zX(i,e){const a=new vE([],{},{},"",{},pa,e,null,i.root,-1,{});return new V8("",new D_(a,[]))}(i,e),n=new op([new CM("",{})]),r=new op({}),s=new op({}),a=new op({}),l=new op(""),u=new Hx(n,r,a,l,s,pa,e,t.root);return u.snapshot=t.root,new U8(new D_(u,[]),t)}class Hx{constructor(e,t,n,r,s,a,l,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=a,this.component=l,this.title=this.data?.pipe(et(d=>d[MM]))??Zs(void 0),this._futureSnapshot=u}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(et(e=>Ox(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(et(e=>Ox(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function H8(i,e="emptyOnly"){const t=i.pathFromRoot;let n=0;if("always"!==e)for(n=t.length-1;n>=1;){const r=t[n],s=t[n-1];if(r.routeConfig&&""===r.routeConfig.path)n--;else{if(s.component)break;n--}}return function HX(i){return i.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(n))}class vE{get title(){return this.data?.[MM]}constructor(e,t,n,r,s,a,l,u,d,A,y){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=s,this.outlet=a,this.component=l,this.routeConfig=u,this._urlSegment=d,this._lastPathIndex=A,this._resolve=y}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ox(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ox(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(n=>n.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class V8 extends N8{constructor(e,t){super(t),this.url=e,II(this,t)}toString(){return G8(this._root)}}function II(i,e){e.value._routerState=i,e.children.forEach(t=>II(i,t))}function G8(i){const e=i.children.length>0?` { ${i.children.map(G8).join(", ")} } `:"";return`${i.value}${e}`}function PI(i){if(i.snapshot){const e=i.snapshot,t=i._futureSnapshot;i.snapshot=t,$g(e.queryParams,t.queryParams)||i.queryParams.next(t.queryParams),e.fragment!==t.fragment&&i.fragment.next(t.fragment),$g(e.params,t.params)||i.params.next(t.params),function tX(i,e){if(i.length!==e.length)return!1;for(let t=0;t<i.length;++t)if(!$g(i[t],e[t]))return!1;return!0}(e.url,t.url)||i.url.next(t.url),$g(e.data,t.data)||i.data.next(t.data)}else i.snapshot=i._futureSnapshot,i.data.next(i._futureSnapshot.data)}function FI(i,e){const t=$g(i.params,e.params)&&function sX(i,e){return Rv(i,e)&&i.every((t,n)=>$g(t.parameters,e[n].parameters))}(i.url,e.url);return t&&!(!i.parent!=!e.parent)&&(!i.parent||FI(i.parent,e.parent))}function IM(i,e,t){if(t&&i.shouldReuseRoute(e.value,t.value.snapshot)){const n=t.value;n._futureSnapshot=e.value;const r=function GX(i,e,t){return e.children.map(n=>{for(const r of t.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return IM(i,n,r);return IM(i,n)})}(i,e,t);return new D_(n,r)}{if(i.shouldAttach(e.value)){const s=i.retrieve(e.value);if(null!==s){const a=s.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(l=>IM(i,l)),a}}const n=function qX(i){return new Hx(new op(i.url),new op(i.params),new op(i.queryParams),new op(i.fragment),new op(i.data),i.outlet,i.component,i)}(e.value),r=e.children.map(s=>IM(i,s));return new D_(n,r)}}const RI="ngNavigationCancelingError";function q8(i,e){const{redirectTo:t,navigationBehaviorOptions:n}=kv(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Q8(!1,0,e);return r.url=t,r.navigationBehaviorOptions=n,r}function Q8(i,e,t){const n=new Error("NavigationCancelingError: "+(i||""));return n[RI]=!0,n.cancellationCode=e,t&&(n.url=t),n}function W8(i){return j8(i)&&kv(i.url)}function j8(i){return i&&i[RI]}class QX{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new PM,this.attachRef=null}}let PM=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const r=this.getOrCreateContext(t);r.outlet=n,this.contexts.set(t,r)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new QX,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const bE=!1;let kI=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=pa,this.activateEvents=new ao,this.deactivateEvents=new ao,this.attachEvents=new ao,this.detachEvents=new ao,this.parentContexts=Do(PM),this.location=Do(bu),this.changeDetector=Do(zl),this.environmentInjector=Do(zr)}ngOnChanges(t){if(t.name){const{firstChange:n,previousValue:r}=t.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new pi(4012,bE);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new pi(4012,bE);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new pi(4012,bE);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new pi(4013,bE);this._activatedRoute=t;const r=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new WX(t,l,r.injector);if(n&&function jX(i){return!!i.resolveComponentFactory}(n)){const d=n.resolveComponentFactory(a);this.activated=r.createComponent(d,r.length,u)}else this.activated=r.createComponent(a,{index:r.length,injector:u,environmentInjector:n??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=gr({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ic]}),i})();class WX{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===Hx?this.route:e===PM?this.childContexts:this.parent.get(e,t)}}let OI=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=Kr({type:i,selectors:[["ng-component"]],standalone:!0,features:[dB],decls:1,vars:0,template:function(t,n){1&t&&kr(0,"router-outlet")},dependencies:[kI],encapsulation:2}),i})();function $8(i,e){return i.providers&&!i._injector&&(i._injector=BT(i.providers,e,`Route: ${i.path}`)),i._injector??e}function NI(i){const e=i.children&&i.children.map(NI),t=e?{...i,children:e}:{...i};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pa&&(t.component=OI),t}function RA(i){return i.outlet||pa}function X8(i,e){const t=i.filter(n=>RA(n)===e);return t.push(...i.filter(n=>RA(n)!==e)),t}function FM(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class ZX{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),PI(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=zx(t);e.children.forEach(s=>{const a=s.value.outlet;this.deactivateRoutes(s,r[a],n),delete r[a]}),gd(r,(s,a)=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const a=n.getContext(r.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,n);else s&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=zx(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);if(n&&n.outlet){const a=n.outlet.detach(),l=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,s=zx(e);for(const a of Object.keys(s))this.deactivateRouteAndItsChildren(s[a],r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=zx(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],n),this.forwardEvent(new RX(s.value.snapshot))}),e.children.length&&this.forwardEvent(new PX(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,s=t?t.value:null;if(PI(r),r===s)if(r.component){const a=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const l=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(l.contexts),a.attachRef=l.componentRef,a.route=l.route.value,a.outlet&&a.outlet.attach(l.componentRef,l.route.value),PI(l.route.value),this.activateChildRoutes(e,null,a.children)}else{const l=FM(r.snapshot),u=l?.get(Od)??null;a.attachRef=null,a.route=r,a.resolver=u,a.injector=l,a.outlet&&a.outlet.activateWith(r,a.injector),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,n)}}class K8{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xE{constructor(e,t){this.component=e,this.route=t}}function JX(i,e,t){const n=i._root;return RM(n,e?e._root:null,t,[n.value])}function Vx(i,e){const t=Symbol(),n=e.get(i,t);return n===t?"function"!=typeof i||function Ht(i){return null!==vt(i)}(i)?e.get(i):i:n}function RM(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=zx(e);return i.children.forEach(a=>{(function tK(i,e,t,n,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,a=e?e.value:null,l=t?t.getContext(i.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const u=function nK(i,e,t){if("function"==typeof t)return t(i,e);switch(t){case"pathParamsChange":return!Rv(i.url,e.url);case"pathParamsOrQueryParamsChange":return!Rv(i.url,e.url)||!$g(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!FI(i,e)||!$g(i.queryParams,e.queryParams);default:return!FI(i,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);u?r.canActivateChecks.push(new K8(n)):(s.data=a.data,s._resolvedData=a._resolvedData),RM(i,e,s.component?l?l.children:null:t,n,r),u&&l&&l.outlet&&l.outlet.isActivated&&r.canDeactivateChecks.push(new xE(l.outlet.component,a))}else a&&kM(e,l,r),r.canActivateChecks.push(new K8(n)),RM(i,null,s.component?l?l.children:null:t,n,r)})(a,s[a.value.outlet],t,n.concat([a.value]),r),delete s[a.value.outlet]}),gd(s,(a,l)=>kM(a,t.getContext(l),r)),r}function kM(i,e,t){const n=zx(i),r=i.value;gd(n,(s,a)=>{kM(s,r.component?e?e.children.getContext(a):null:e,t)}),t.canDeactivateChecks.push(new xE(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function OM(i){return"function"==typeof i}function UI(i){return i instanceof aE||"EmptyError"===i?.name}const wE=Symbol("INITIAL_VALUE");function Gx(){return ap(i=>gI(i.map(e=>e.pipe(Nc(1),lp(wE)))).pipe(et(e=>{for(const t of e)if(!0!==t){if(t===wE)return wE;if(!1===t||t instanceof ny)return t}return!0}),Yc(e=>e!==wE),Nc(1)))}function Y8(i){return function Me(...i){return de(i)}(Cu(e=>{if(kv(e))throw q8(0,e)}),et(e=>!0===e))}const zI={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Z8(i,e,t,n,r){const s=HI(i,e,t);return s.matched?function yK(i,e,t,n){const r=e.canMatch;return r&&0!==r.length?Zs(r.map(a=>{const l=Vx(a,i);return ty(function lK(i){return i&&OM(i.canMatch)}(l)?l.canMatch(e,t):i.runInContext(()=>l(e,t)))})).pipe(Gx(),Y8()):Zs(!0)}(n=$8(e,n),e,t).pipe(et(a=>!0===a?s:{...zI})):Zs(s)}function HI(i,e,t){if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||t.length>0)?{...zI}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||eX)(t,i,e);if(!r)return{...zI};const s={};gd(r.posParams,(l,u)=>{s[u]=l.path});const a=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:a,positionalParamSegments:r.posParams??{}}}function ME(i,e,t,n){if(t.length>0&&function xK(i,e,t){return t.some(n=>CE(i,e,n)&&RA(n)!==pa)}(i,t,n)){const s=new Na(e,function bK(i,e,t,n){const r={};r[pa]=n,n._sourceSegment=i,n._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&RA(s)!==pa){const a=new Na([],{});a._sourceSegment=i,a._segmentIndexShift=e.length,r[RA(s)]=a}return r}(i,e,n,new Na(t,i.children)));return s._sourceSegment=i,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function wK(i,e,t){return t.some(n=>CE(i,e,n))}(i,t,n)){const s=new Na(i.segments,function vK(i,e,t,n,r){const s={};for(const a of n)if(CE(i,t,a)&&!r[RA(a)]){const l=new Na([],{});l._sourceSegment=i,l._segmentIndexShift=e.length,s[RA(a)]=l}return{...r,...s}}(i,e,t,n,i.children));return s._sourceSegment=i,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new Na(i.segments,i.children);return r._sourceSegment=i,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function CE(i,e,t){return(!(i.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function J8(i,e,t,n){return!!(RA(i)===n||n!==pa&&CE(e,t,i))&&("**"===i.path||HI(e,i,t).matched)}function e6(i,e,t){return 0===e.length&&!i.children[t]}const SE=!1;class TE{constructor(e){this.segmentGroup=e||null}}class t6{constructor(e){this.urlTree=e}}function LM(i){return kx(new TE(i))}function n6(i){return kx(new t6(i))}class TK{constructor(e,t,n,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=ME(this.urlTree.root,[],[],this.config).segmentGroup,t=new Na(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,pa).pipe(et(s=>this.createUrlTree(gE(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(E_(s=>{if(s instanceof t6)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof TE?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,pa).pipe(et(r=>this.createUrlTree(gE(r),e.queryParams,e.fragment))).pipe(E_(r=>{throw r instanceof TE?this.noMatchError(r):r}))}noMatchError(e){return new pi(4002,SE)}createUrlTree(e,t,n){const r=wI(e);return new ny(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe(et(s=>new Na([],s))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const s of Object.keys(n.children))"primary"===s?r.unshift(s):r.push(s);return un(r).pipe(Z1(s=>{const a=n.children[s],l=X8(t,s);return this.expandSegmentGroup(e,l,a,s).pipe(et(u=>({segment:u,outlet:s})))}),A8((s,a)=>(s[a.outlet]=a.segment,s),{}),m8())}expandSegment(e,t,n,r,s,a){return un(n).pipe(Z1(l=>this.expandSegmentAgainstRoute(e,t,n,l,r,s,a).pipe(E_(d=>{if(d instanceof TE)return Zs(null);throw d}))),ey(l=>!!l),E_((l,u)=>{if(UI(l))return e6(t,r,s)?Zs(new Na([],{})):LM(t);throw l}))}expandSegmentAgainstRoute(e,t,n,r,s,a,l){return J8(r,t,s,a)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,a):l&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,a):LM(t):LM(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,s,a){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,a):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,a)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const s=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?n6(s):this.lineralizeSegments(n,s).pipe(ga(a=>{const l=new Na(a,{});return this.expandSegment(e,l,t,a,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,s,a){const{matched:l,consumedSegments:u,remainingSegments:d,positionalParamSegments:A}=HI(t,r,s);if(!l)return LM(t);const y=this.applyRedirectCommands(u,r.redirectTo,A);return r.redirectTo.startsWith("/")?n6(y):this.lineralizeSegments(r,y).pipe(ga(C=>this.expandSegment(e,t,n,C.concat(d),a,!1)))}matchSegmentAgainstRoute(e,t,n,r,s){return"**"===n.path?(e=$8(n,e),n.loadChildren?(n._loadedRoutes?Zs({routes:n._loadedRoutes,injector:n._loadedInjector}):this.configLoader.loadChildren(e,n)).pipe(et(l=>(n._loadedRoutes=l.routes,n._loadedInjector=l.injector,new Na(r,{})))):Zs(new Na(r,{}))):Z8(t,n,r,e).pipe(ap(({matched:a,consumedSegments:l,remainingSegments:u})=>a?this.getChildConfig(e=n._injector??e,n,r).pipe(ga(A=>{const y=A.injector??e,C=A.routes,{segmentGroup:k,slicedSegments:Q}=ME(t,l,u,C),se=new Na(k.segments,k.children);if(0===Q.length&&se.hasChildren())return this.expandChildren(y,C,se).pipe(et(be=>new Na(l,be)));if(0===C.length&&0===Q.length)return Zs(new Na(l,{}));const he=RA(n)===s;return this.expandSegment(y,se,C,Q,he?pa:s,!0).pipe(et(Le=>new Na(l.concat(Le.segments),Le.children)))})):LM(t)))}getChildConfig(e,t,n){return t.children?Zs({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Zs({routes:t._loadedRoutes,injector:t._loadedInjector}):function _K(i,e,t,n){const r=e.canLoad;return void 0===r||0===r.length?Zs(!0):Zs(r.map(a=>{const l=Vx(a,i);return ty(function rK(i){return i&&OM(i.canLoad)}(l)?l.canLoad(e,t):i.runInContext(()=>l(e,t)))})).pipe(Gx(),Y8())}(e,t,n).pipe(ga(r=>r?this.configLoader.loadChildren(e,t).pipe(Cu(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function CK(i){return kx(Q8(SE,3))}())):Zs({routes:[],injector:e})}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Zs(n);if(r.numberOfChildren>1||!r.children[pa])return e.redirectTo,kx(new pi(4e3,SE));r=r.children[pa]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreateUrlTree(e,t,n,r){const s=this.createSegmentGroup(e,t.root,n,r);return new ny(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return gd(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const l=r.substring(1);n[s]=t[l]}else n[s]=r}),n}createSegmentGroup(e,t,n,r){const s=this.createSegments(e,t.segments,n,r);let a={};return gd(t.children,(l,u)=>{a[u]=this.createSegmentGroup(e,l,n,r)}),new Na(s,a)}createSegments(e,t,n,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new pi(4001,SE);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}class DK{}class PK{constructor(e,t,n,r,s,a,l){this.injector=e,this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=a,this.urlSerializer=l}recognize(){const e=ME(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,pa).pipe(et(t=>{if(null===t)return null;const n=new vE([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pa,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new D_(n,t),s=new V8(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,n=H8(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,t,n):this.processSegment(e,t,n,n.segments,r)}processChildren(e,t,n){return un(Object.keys(n.children)).pipe(Z1(r=>{const s=n.children[r],a=X8(t,r);return this.processSegmentGroup(e,a,s,r)}),A8((r,s)=>r&&s?(r.push(...s),r):null),function Z$(i,e=!1){return Ee((t,n)=>{let r=0;t.subscribe(Ve(n,s=>{const a=i(s,r++);(a||e)&&n.next(s),!a&&n.complete()}))})}(r=>null!==r),cE(null),m8(),et(r=>{if(null===r)return null;const s=r6(r);return function FK(i){i.sort((e,t)=>e.value.outlet===pa?-1:t.value.outlet===pa?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,n,r,s){return un(t).pipe(Z1(a=>this.processSegmentAgainstRoute(a._injector??e,a,n,r,s)),ey(a=>!!a),E_(a=>{if(UI(a))return e6(n,r,s)?Zs([]):Zs(null);throw a}))}processSegmentAgainstRoute(e,t,n,r,s){if(t.redirectTo||!J8(t,n,r,s))return Zs(null);let a;if("**"===t.path){const l=r.length>0?v8(r).parameters:{},u=o6(n)+r.length;a=Zs({snapshot:new vE(r,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,a6(t),RA(t),t.component??t._loadedComponent??null,t,s6(n),u,l6(t)),consumedSegments:[],remainingSegments:[]})}else a=Z8(n,t,r,e).pipe(et(({matched:l,consumedSegments:u,remainingSegments:d,parameters:A})=>{if(!l)return null;const y=o6(n)+u.length;return{snapshot:new vE(u,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,a6(t),RA(t),t.component??t._loadedComponent??null,t,s6(n),y,l6(t)),consumedSegments:u,remainingSegments:d}}));return a.pipe(ap(l=>{if(null===l)return Zs(null);const{snapshot:u,consumedSegments:d,remainingSegments:A}=l;e=t._injector??e;const y=t._loadedInjector??e,C=function RK(i){return i.children?i.children:i.loadChildren?i._loadedRoutes:[]}(t),{segmentGroup:k,slicedSegments:Q}=ME(n,d,A,C.filter(he=>void 0===he.redirectTo));if(0===Q.length&&k.hasChildren())return this.processChildren(y,C,k).pipe(et(he=>null===he?null:[new D_(u,he)]));if(0===C.length&&0===Q.length)return Zs([new D_(u,[])]);const se=RA(t)===s;return this.processSegment(y,C,k,Q,se?pa:s).pipe(et(he=>null===he?null:[new D_(u,he)]))}))}}function kK(i){const e=i.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function r6(i){const e=[],t=new Set;for(const n of i){if(!kK(n)){e.push(n);continue}const r=e.find(s=>n.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...n.children),t.add(r)):e.push(n)}for(const n of t){const r=r6(n.children);e.push(new D_(n.value,r))}return e.filter(n=>!t.has(n))}function s6(i){let e=i;for(;e._sourceSegment;)e=e._sourceSegment;return e}function o6(i){let e=i,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function a6(i){return i.data||{}}function l6(i){return i.resolve||{}}function c6(i){return"string"==typeof i.title||null===i.title}function VI(i){return ap(e=>{const t=i(e);return t?un(t).pipe(et(()=>e)):Zs(e)})}const qx=new sr("ROUTES");let GI=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=Do(CO)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Zs(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const n=ty(t.loadComponent()).pipe(et(h6),Cu(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),uE(()=>{this.componentLoaders.delete(t)})),r=new yI(n,()=>new D).pipe(_I());return this.componentLoaders.set(t,r),r}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return Zs({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);const s=this.loadModuleFactoryOrRoutes(n.loadChildren).pipe(et(l=>{this.onLoadEndListener&&this.onLoadEndListener(n);let u,d,A=!1;Array.isArray(l)?d=l:(u=l.create(t).injector,d=y8(u.get(qx,[],Mn.Self|Mn.Optional)));return{routes:d.map(NI),injector:u}}),uE(()=>{this.childrenLoaders.delete(n)})),a=new yI(s,()=>new D).pipe(_I());return this.childrenLoaders.set(n,a),a}loadModuleFactoryOrRoutes(t){return ty(t()).pipe(et(h6),ga(n=>n instanceof kk||Array.isArray(n)?Zs(n):un(this.compiler.compileModuleAsync(n))))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function h6(i){return function GK(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let DE=(()=>{class i{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new D,this.configLoader=Do(GI),this.environmentInjector=Do(zr),this.urlSerializer=Do(SM),this.rootContexts=Do(PM),this.navigationId=0,this.afterPreactivation=()=>Zs(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=r=>this.events.next(new BX(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new DX(r))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const n=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:n})}setupNavigations(t){return this.transitions=new op({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:BM,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Yc(n=>0!==n.id),et(n=>({...n,extractedUrl:t.urlHandlingStrategy.extract(n.rawUrl)})),ap(n=>{let r=!1,s=!1;return Zs(n).pipe(Cu(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ap(a=>{const l=t.browserUrlTree.toString(),u=!t.navigated||a.extractedUrl.toString()!==l||l!==t.currentUrlTree.toString();if(!u&&"reload"!==(a.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new yE(a.id,t.serializeUrl(n.rawUrl),A,0)),t.rawUrlTree=a.rawUrl,a.resolve(null),Ta}if(t.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return d6(a.source)&&(t.browserUrlTree=a.extractedUrl),Zs(a).pipe(ap(A=>{const y=this.transitions?.getValue();return this.events.next(new TI(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),y!==this.transitions?.getValue()?Ta:Promise.resolve(A)}),function EK(i,e,t,n){return ap(r=>function SK(i,e,t,n,r){return new TK(i,e,t,n,r).apply()}(i,e,t,r.extractedUrl,n).pipe(et(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),Cu(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},n.urlAfterRedirects=A.urlAfterRedirects}),function LK(i,e,t,n,r){return ga(s=>function IK(i,e,t,n,r,s,a="emptyOnly"){return new PK(i,e,t,n,r,a,s).recognize().pipe(ap(l=>null===l?function BK(i){return new fe(e=>e.error(i))}(new DK):Zs(l)))}(i,e,t,s.urlAfterRedirects,n.serialize(s.urlAfterRedirects),n,r).pipe(et(a=>({...s,targetSnapshot:a}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),Cu(A=>{if(n.targetSnapshot=A.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const C=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl(C,A)}t.browserUrlTree=A.urlAfterRedirects}const y=new MX(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(y)}));if(u&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:A,extractedUrl:y,source:C,restoredState:k,extras:Q}=a,se=new TI(A,this.urlSerializer.serialize(y),C,k);this.events.next(se);const he=z8(y,this.rootComponentType).snapshot;return Zs(n={...a,targetSnapshot:he,urlAfterRedirects:y,extras:{...Q,skipLocationChange:!1,replaceUrl:!1}})}{const A="";return this.events.next(new yE(a.id,t.serializeUrl(n.extractedUrl),A,1)),t.rawUrlTree=a.rawUrl,a.resolve(null),Ta}}),Cu(a=>{const l=new CX(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),et(a=>n={...a,guards:JX(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),function uK(i,e){return ga(t=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:a}}=t;return 0===a.length&&0===s.length?Zs({...t,guardsResult:!0}):function hK(i,e,t,n){return un(i).pipe(ga(r=>function gK(i,e,t,n,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Zs(s.map(l=>{const u=FM(e)??r,d=Vx(l,u);return ty(function aK(i){return i&&OM(i.canDeactivate)}(d)?d.canDeactivate(i,e,t,n):u.runInContext(()=>d(i,e,t,n))).pipe(ey())})).pipe(Gx()):Zs(!0)}(r.component,r.route,t,e,n)),ey(r=>!0!==r,!0))}(a,n,r,i).pipe(ga(l=>l&&function iK(i){return"boolean"==typeof i}(l)?function dK(i,e,t,n){return un(e).pipe(Z1(r=>wM(function pK(i,e){return null!==i&&e&&e(new IX(i)),Zs(!0)}(r.route.parent,n),function fK(i,e){return null!==i&&e&&e(new FX(i)),Zs(!0)}(r.route,n),function mK(i,e,t){const n=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(a=>function eK(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(a)).filter(a=>null!==a).map(a=>lE(()=>Zs(a.guards.map(u=>{const d=FM(a.node)??t,A=Vx(u,d);return ty(function oK(i){return i&&OM(i.canActivateChild)}(A)?A.canActivateChild(n,i):d.runInContext(()=>A(n,i))).pipe(ey())})).pipe(Gx())));return Zs(s).pipe(Gx())}(i,r.path,t),function AK(i,e,t){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return Zs(!0);const r=n.map(s=>lE(()=>{const a=FM(e)??t,l=Vx(s,a);return ty(function sK(i){return i&&OM(i.canActivate)}(l)?l.canActivate(e,i):a.runInContext(()=>l(e,i))).pipe(ey())}));return Zs(r).pipe(Gx())}(i,r.route,t))),ey(r=>!0!==r,!0))}(n,s,i,e):Zs(l)),et(l=>({...t,guardsResult:l})))})}(this.environmentInjector,a=>this.events.next(a)),Cu(a=>{if(n.guardsResult=a.guardsResult,kv(a.guardsResult))throw q8(0,a.guardsResult);const l=new SX(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.events.next(l)}),Yc(a=>!!a.guardsResult||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",3),!1)),VI(a=>{if(a.guards.canActivateChecks.length)return Zs(a).pipe(Cu(l=>{const u=new TX(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ap(l=>{let u=!1;return Zs(l).pipe(function NK(i,e){return ga(t=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return Zs(t);let s=0;return un(r).pipe(Z1(a=>function UK(i,e,t,n){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!c6(r)&&(s[MM]=r.title),function zK(i,e,t,n){const r=function HK(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return Zs({});const s={};return un(r).pipe(ga(a=>function VK(i,e,t,n){const r=FM(e)??n,s=Vx(i,r);return ty(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(i[a],e,t,n).pipe(ey(),Cu(l=>{s[a]=l}))),vI(1),g8(s),E_(a=>UI(a)?Ta:kx(a)))}(s,i,e,n).pipe(et(a=>(i._resolvedData=a,i.data=H8(i,t).resolve,r&&c6(r)&&(i.data[MM]=r.title),null)))}(a.route,n,i,e)),Cu(()=>s++),vI(1),ga(a=>s===r.length?Zs(t):Ta))})}(t.paramsInheritanceStrategy,this.environmentInjector),Cu({next:()=>u=!0,complete:()=>{u||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",2))}}))}),Cu(l=>{const u=new EX(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),VI(a=>{const l=u=>{const d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Cu(A=>{u.component=A}),et(()=>{})));for(const A of u.children)d.push(...l(A));return d};return gI(l(a.targetSnapshot.root)).pipe(cE(),Nc(1))}),VI(()=>this.afterPreactivation()),et(a=>{const l=function VX(i,e,t){const n=IM(i,e._root,t?t._root:void 0);return new U8(n,e)}(t.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return n={...a,targetRouterState:l}}),Cu(a=>{t.currentUrlTree=a.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),t.routerState=a.targetRouterState,"deferred"===t.urlUpdateStrategy&&(a.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,a),t.browserUrlTree=a.urlAfterRedirects)}),((i,e,t)=>et(n=>(new ZX(e,n.targetRouterState,n.currentRouterState,t).activate(i),n)))(this.rootContexts,t.routeReuseStrategy,a=>this.events.next(a)),Nc(1),Cu({next:a=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Ov(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)},complete:()=>{r=!0}}),uE(()=>{r||s||this.cancelNavigationTransition(n,"",1),this.currentNavigation?.id===n.id&&(this.currentNavigation=null)}),E_(a=>{if(s=!0,j8(a)){W8(a)||(t.navigated=!0,t.restoreHistory(n,!0));const l=new _E(n.id,this.urlSerializer.serialize(n.extractedUrl),a.message,a.cancellationCode);if(this.events.next(l),W8(a)){const u=t.urlHandlingStrategy.merge(a.url,t.rawUrlTree),d={skipLocationChange:n.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||d6(n.source)};t.scheduleNavigation(u,BM,null,d,{resolve:n.resolve,reject:n.reject,promise:n.promise})}else n.resolve(!1)}else{t.restoreHistory(n,!0);const l=new EI(n.id,this.urlSerializer.serialize(n.extractedUrl),a,n.targetSnapshot??void 0);this.events.next(l);try{n.resolve(t.errorHandler(a))}catch(u){n.reject(u)}}return Ta}))}))}cancelNavigationTransition(t,n,r){const s=new _E(t.id,this.urlSerializer.serialize(t.extractedUrl),n,r);this.events.next(s),t.resolve(!1)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function d6(i){return i!==BM}let f6=(()=>{class i{buildTitle(t){let n,r=t.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(s=>s.outlet===pa);return n}getResolvedTitleForRoute(t){return t.data[MM]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:function(){return Do(qK)},providedIn:"root"}),i})(),qK=(()=>{class i extends f6{constructor(t){super(),this.title=t}updateTitle(t){const n=this.buildTitle(t);void 0!==n&&this.title.setTitle(n)}}return i.\u0275fac=function(t){return new(t||i)(oi($L))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),QK=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:function(){return Do(jK)},providedIn:"root"}),i})();class WK{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let jK=(()=>{class i extends WK{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=il(i)))(n||i)}}(),i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const BE=new sr("",{providedIn:"root",factory:()=>({})});let XK=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:function(){return Do(KK)},providedIn:"root"}),i})(),KK=(()=>{class i{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function YK(i){throw i}function ZK(i,e,t){return e.parse("/")}const JK={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},eY={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Up=(()=>{class i{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=Do(lQ),this.isNgZoneEnabled=!1,this.options=Do(BE,{optional:!0})||{},this.errorHandler=this.options.errorHandler||YK,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||ZK,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=Do(XK),this.routeReuseStrategy=Do(QK),this.urlCreationStrategy=Do(UX),this.titleStrategy=Do(f6),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=y8(Do(qx,{optional:!0})??[]),this.navigationTransitions=Do(DE),this.urlSerializer=Do(SM),this.location=Do(pM),this.isNgZoneEnabled=Do(po)instanceof po&&po.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new ny,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=z8(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),BM,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const n="popstate"===t.type?"popstate":"hashchange";"popstate"===n&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,n,t.state)},0)}))}navigateToSyncWithBrowser(t,n,r){const s={replaceUrl:!0},a=r?.navigationId?r:null;if(r){const u={...r};delete u.navigationId,delete u.\u0275routerPageId,0!==Object.keys(u).length&&(s.state=u)}const l=this.parseUrl(t);this.scheduleNavigation(l,n,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(NI),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,n={}){const{relativeTo:r,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:u}=n,d=u?this.currentUrlTree.fragment:a;let A=null;switch(l){case"merge":A={...this.currentUrlTree.queryParams,...s};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=s||null}return null!==A&&(A=this.removeEmptyProps(A)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,A,d??null)}navigateByUrl(t,n={skipLocationChange:!1}){const r=kv(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,BM,null,n)}navigate(t,n={skipLocationChange:!1}){return function tY(i){for(let e=0;e<i.length;e++){const t=i[e];if(null==t)throw new pi(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let n;try{n=this.urlSerializer.parse(t)}catch(r){n=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return n}isActive(t,n){let r;if(r=!0===n?{...JK}:!1===n?{...eY}:n,kv(t))return x8(this.currentUrlTree,t,r);const s=this.parseUrl(t);return x8(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((n,r)=>{const s=t[r];return null!=s&&(n[r]=s),n},{})}scheduleNavigation(t,n,r,s,a){if(this.disposed)return Promise.resolve(!1);let l,u,d,A;return a?(l=a.resolve,u=a.reject,d=a.promise):d=new Promise((y,C)=>{l=y,u=C}),A="computed"===this.canceledNavigationResolution?r&&r.\u0275routerPageId?r.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:l,reject:u,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(y=>Promise.reject(y))}setBrowserUrl(t,n){const r=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){const a={...n.extras.state,...this.generateNgRouterState(n.id,this.browserPageId)};this.location.replaceState(r,"",a)}else{const s={...n.extras.state,...this.generateNgRouterState(n.id,n.targetPageId)};this.location.go(r,"",s)}}restoreHistory(t,n=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),NM=(()=>{class i{constructor(t,n,r,s,a,l){this.router=t,this.route=n,this.tabIndexAttribute=r,this.renderer=s,this.el=a,this.locationStrategy=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new D;const u=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===u||"area"===u,this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Ov&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Fx(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Fx(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Fx(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,n,r,s,a){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||n||r||s||a||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function ov(i,e,t){return function sv(i,e){return"src"===e&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===e&&("base"===i||"link"===i)?Yb:cd}(e,t)(i)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,n){const r=this.renderer,s=this.el.nativeElement;null!==n?r.setAttribute(s,t,n):r.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return i.\u0275fac=function(t){return new(t||i)(Et(Up),Et(Hx),Th("tabindex"),Et(ds),Et(Bs),Et(Fv))},i.\u0275dir=gr({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,n){1&t&&ki("click",function(s){return n.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&ja("target",n.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Ic]}),i})();class p6{}let rY=(()=>{class i{constructor(t,n,r,s,a){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Yc(t=>t instanceof Ov),Z1(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){const r=[];for(const s of n){s.providers&&!s._injector&&(s._injector=BT(s.providers,t,`Route: ${s.path}`));const a=s._injector??t,l=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&r.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&r.push(this.processRoutes(l,s.children??s._loadedRoutes))}return un(r).pipe(xa())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let r;r=n.loadChildren&&void 0===n.canLoad?this.loader.loadChildren(t,n):Zs(null);const s=r.pipe(ga(a=>null===a?Zs(void 0):(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));return n.loadComponent&&!n._loadedComponent?un([s,this.loader.loadComponent(n)]).pipe(xa()):s})}}return i.\u0275fac=function(t){return new(t||i)(oi(Up),oi(CO),oi(zr),oi(p6),oi(GI))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const QI=new sr("");let A6=(()=>{class i{constructor(t,n,r,s,a={}){this.urlSerializer=t,this.transitions=n,this.viewportScroller=r,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof TI?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ov&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof L8&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new L8(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return i.\u0275fac=function(t){Nd()},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();var zp=(()=>((zp=zp||{})[zp.COMPLETE=0]="COMPLETE",zp[zp.FAILED=1]="FAILED",zp[zp.REDIRECTING=2]="REDIRECTING",zp))();const Qx=!1;function iy(i,e){return{\u0275kind:i,\u0275providers:e}}const WI=new sr("",{providedIn:"root",factory:()=>!1});function g6(){const i=Do($c);return e=>{const t=i.get(Px);if(e!==t.components[0])return;const n=i.get(Up),r=i.get(_6);1===i.get(jI)&&n.initialNavigation(),i.get(y6,null,Mn.Optional)?.setUpPreloading(),i.get(QI,null,Mn.Optional)?.init(),n.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const _6=new sr(Qx?"bootstrap done indicator":"",{factory:()=>new D}),jI=new sr(Qx?"initial navigation":"",{providedIn:"root",factory:()=>1});function cY(){let i=[];return i=Qx?[{provide:g,multi:!0,useFactory:()=>{const e=Do(Up);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function kX(i){if(!("type"in i))return`Unknown Router Event: ${i.constructor.name}`;switch(i.type){case 14:return`ActivationEnd(path: '${i.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${i.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${i.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${i.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state}, shouldActivate: ${i.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 2:return`NavigationCancel(id: ${i.id}, url: '${i.url}')`;case 16:return`NavigationSkipped(id: ${i.id}, url: '${i.url}')`;case 1:return`NavigationEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${i.id}, url: '${i.url}', error: ${i.error})`;case 0:return`NavigationStart(id: ${i.id}, url: '${i.url}')`;case 6:return`ResolveEnd(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 5:return`ResolveStart(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 10:return`RouteConfigLoadEnd(path: ${i.route.path})`;case 9:return`RouteConfigLoadStart(path: ${i.route.path})`;case 4:return`RoutesRecognized(id: ${i.id}, url: '${i.url}', urlAfterRedirects: '${i.urlAfterRedirects}', state: ${i.state})`;case 15:return`Scroll(anchor: '${i.anchor}', position: '${i.position?`${i.position[0]}, ${i.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],iy(1,i)}const y6=new sr(Qx?"router preloader":"");function uY(i){return iy(0,[{provide:y6,useExisting:rY},{provide:p6,useExisting:i}])}const UM=!1,v6=new sr(UM?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),hY=[pM,{provide:SM,useClass:bI},Up,PM,{provide:Hx,useFactory:function m6(i){return i.routerState.root},deps:[Up]},GI,UM?{provide:WI,useValue:!0}:[]];function dY(){return new FO("Router",Up)}let b6=(()=>{class i{constructor(t){}static forRoot(t,n){return{ngModule:i,providers:[hY,UM&&n?.enableTracing?cY().\u0275providers:[],{provide:qx,multi:!0,useValue:t},{provide:v6,useFactory:mY,deps:[[Up,new Bd,new vA]]},{provide:BE,useValue:n||{}},n?.useHash?{provide:Fv,useClass:XQ}:{provide:Fv,useClass:nL},{provide:QI,useFactory:()=>{const i=Do(fj),e=Do(po),t=Do(BE),n=Do(DE),r=Do(SM);return t.scrollOffset&&i.setOffset(t.scrollOffset),new A6(r,n,i,e,t)}},n?.preloadingStrategy?uY(n.preloadingStrategy).\u0275providers:[],{provide:FO,multi:!0,useFactory:dY},n?.initialNavigation?gY(n):[],[{provide:x6,useFactory:g6},{provide:PO,multi:!0,useExisting:x6}]]}}static forChild(t){return{ngModule:i,providers:[{provide:qx,multi:!0,useValue:t}]}}}return i.\u0275fac=function(t){return new(t||i)(oi(v6,8))},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[OI]}),i})();function mY(i){if(UM&&i)throw new pi(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function gY(i){return["disabled"===i.initialNavigation?iy(3,[{provide:kT,multi:!0,useFactory:()=>{const e=Do(Up);return()=>{e.setUpLocationChangeListener()}}},{provide:jI,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?iy(2,[{provide:jI,useValue:0},{provide:kT,multi:!0,deps:[$c],useFactory:e=>{const t=e.get(jQ,Promise.resolve());return()=>t.then(()=>new Promise(n=>{const r=e.get(Up),s=e.get(_6);(function sY(i,e){i.events.pipe(Yc(t=>t instanceof Ov||t instanceof _E||t instanceof EI||t instanceof yE),et(t=>t instanceof Ov||t instanceof yE?zp.COMPLETE:t instanceof _E&&(0===t.code||1===t.code)?zp.REDIRECTING:zp.FAILED),Yc(t=>t!==zp.REDIRECTING),Nc(1)).subscribe(()=>{e()})})(r,()=>{n(!0)}),e.get(DE).afterPreactivation=()=>(n(!0),s.closed?Zs(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const x6=new sr(UM?"Router Initializer":"");let yY=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Kr({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&kr(0,"router-outlet")},dependencies:[kI]})}return i})();var w6=Ce(9542),M6=(Ce(2253),Ce(3675),Ce(6458),Ce(629),Ce(8189),Ce(5906),Ce(9665)),vY=(Ce(9622),Ce(7825),Ce(8538));Ce(2487),Ce(4074),Ce(3414);var i,Im=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return this.None(i)},Out:function(i){return this.None(i)},InOut:function(i){return this.None(i)}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return.5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return 0===i?0:Math.pow(1024,i-1)},Out:function(i){return 1===i?1:1-Math.pow(2,-10*i)},InOut:function(i){return 0===i?0:1===i?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(2-Math.pow(2,-10*(i-1)))}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return 0===i?0:1===i?1:-Math.pow(2,10*(i-1))*Math.sin(5*(i-1.1)*Math.PI)},Out:function(i){return 0===i?0:1===i?1:Math.pow(2,-10*i)*Math.sin(5*(i-.1)*Math.PI)+1},InOut:function(i){return 0===i?0:1===i?1:(i*=2)<1?-.5*Math.pow(2,10*(i-1))*Math.sin(5*(i-1.1)*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin(5*(i-1.1)*Math.PI)+1}}),Back:Object.freeze({In:function(i){var e=1.70158;return 1===i?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return 0===i?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?i*i*((e+1)*i-e)*.5:.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-Im.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?.5*Im.Bounce.In(2*i):.5*Im.Bounce.Out(2*i-1)+.5}}),generatePow:function(i){return void 0===i&&(i=4),i=(i=i<Number.EPSILON?Number.EPSILON:i)>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(2*e,i)/2:(1-Math.pow(2-2*e,i))/2+.5}}}}),Wx=function(){return performance.now()},C6=function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},i.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},i.prototype.update=function(e,t){void 0===e&&(e=Wx()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var s=this._tweens[n[r]];s&&!1===s.update(e,!t)&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},i}(),Lv={Linear:function(i,e){var t=i.length-1,n=t*e,r=Math.floor(n),s=Lv.Utils.Linear;return e<0?s(i[0],i[1],n):e>1?s(i[t],i[t-1],t-n):s(i[r],i[r+1>t?t:r+1],n-r)},Bezier:function(i,e){for(var t=0,n=i.length-1,r=Math.pow,s=Lv.Utils.Bernstein,a=0;a<=n;a++)t+=r(1-e,n-a)*r(e,a)*i[a]*s(n,a);return t},CatmullRom:function(i,e){var t=i.length-1,n=t*e,r=Math.floor(n),s=Lv.Utils.CatmullRom;return i[0]===i[t]?(e<0&&(r=Math.floor(n=t*(1+e))),s(i[(r-1+t)%t],i[r],i[(r+1)%t],i[(r+2)%t],n-r)):e<0?i[0]-(s(i[0],i[0],i[1],i[1],-n)-i[0]):e>1?i[t]-(s(i[t],i[t],i[t-1],i[t-1],n-t)-i[t]):s(i[r?r-1:0],i[r],i[t<r+1?t:r+1],i[t<r+2?t:r+2],n-r)},Utils:{Linear:function(i,e,t){return(e-i)*t+i},Bernstein:function(i,e){var t=Lv.Utils.Factorial;return t(i)/t(e)/t(i-e)},Factorial:(i=[1],function(e){var t=1;if(i[e])return i[e];for(var n=e;n>1;n--)t*=n;return i[e]=t,t}),CatmullRom:function(i,e,t,n,r){var s=.5*(t-i),a=.5*(n-e),l=r*r;return(2*e-2*t+s+a)*(r*l)+(-3*e+3*t-2*s-a)*l+s*r+e}}},XI=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),KI=new C6,Cf=function(){function i(e,t){void 0===t&&(t=KI),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Im.Linear.None,this._interpolationFunction=Lv.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=XI.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.to=function(e,t){if(void 0===t&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t,this},i.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e,this},i.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,t){if(void 0===e&&(e=Wx()),void 0===t&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,t,n,r,s){for(var a in n){var l=e[a],u=Array.isArray(l),d=u?"array":typeof l,A=!u&&Array.isArray(n[a]);if("undefined"!==d&&"function"!==d){if(A){if(0===(y=n[a]).length)continue;for(var C=[l],k=0,Q=y.length;k<Q;k+=1){var se=this._handleRelativeValue(l,y[k]);if(isNaN(se)){A=!1,console.warn("Found invalid interpolation list. Skipping.");break}C.push(se)}A&&(n[a]=C)}if("object"!==d&&!u||!l||A)(typeof t[a]>"u"||s)&&(t[a]=l),u||(t[a]*=1),r[a]=A?n[a].slice().reverse():t[a]||0;else{t[a]=u?[]:{};var he=l;for(var re in he)t[a][re]=he[re];r[a]=u?[]:{};var y=n[a];if(!this._isDynamic){var Le={};for(var re in y)Le[re]=y[re];n[a]=y=Le}this._setupProperties(he,t[a],y,r[a],s)}}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(e){return void 0===e&&(e=Wx()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},i.prototype.resume=function(e){return void 0===e&&(e=Wx()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},i.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return void 0===e&&(e=KI),this._group=e,this},i.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return void 0===e&&(e=Im.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return void 0===e&&(e=Lv.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,t){if(void 0===e&&(e=Wx()),void 0===t&&(t=!0),this._isPaused)return!0;var n,r;if(!this._goToEnd&&!this._isPlaying){if(e>this._startTime+this._duration)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),r=(e-this._startTime)/this._duration;var a=this._easingFunction(r=0===this._duration||r>1?1:r);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,a),this._onUpdateCallback&&this._onUpdateCallback(this._object,r),1===r){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)!this._yoyo&&"string"==typeof this._valuesEnd[n]&&(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo&&this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];return this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0!==this._repeatDelayTime?e+this._repeatDelayTime:e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var l=0,u=this._chainedTweens.length;l<u;l++)this._chainedTweens[l].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(e,t,n,r){for(var s in n)if(void 0!==t[s]){var a=t[s]||0,l=n[s],u=Array.isArray(e[s]),d=Array.isArray(l);!u&&d?e[s]=this._interpolationFunction(l,r):"object"==typeof l&&l?this._updateProperties(e[s],a,l,r):"number"==typeof(l=this._handleRelativeValue(a,l))&&(e[s]=a+(l-a)*r)}},i.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},i.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},i}(),Kg=KI,S6=(Kg.getAll.bind(Kg),Kg.removeAll.bind(Kg),Kg.add.bind(Kg),Kg.remove.bind(Kg),Kg.update.bind(Kg)),Hp=Ce(5835);const jx="152",$x={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Xx={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},EY=0,T6=1,DY=2,E6=1,BY=2,B_=3,Yg=0,cp=1,zd=2,Zg=0,Nv=1,YI=2,D6=3,B6=4,IY=5,Kx=100,PY=101,FY=102,I6=103,P6=104,RY=200,kY=201,OY=202,LY=203,F6=204,R6=205,NY=206,UY=207,zY=208,HY=209,VY=210,GY=0,qY=1,QY=2,ZI=3,WY=4,jY=5,$Y=6,XY=7,IE=0,KY=1,YY=2,I_=0,ZY=1,JY=2,eZ=3,tZ=4,nZ=5,Uv=301,zv=302,PE=303,FE=304,zM=306,ry=1e3,_d=1001,Yx=1002,ou=1003,HM=1004,Zx=1005,Zc=1006,RE=1007,Jg=1008,Hv=1009,iZ=1010,rZ=1011,k6=1012,sZ=1013,Vv=1014,sy=1015,VM=1016,oZ=1017,aZ=1018,Jx=1020,lZ=1021,Vp=1023,cZ=1024,uZ=1025,Gv=1026,ew=1027,hZ=1028,dZ=1029,fZ=1030,pZ=1031,AZ=1033,e5=33776,t5=33777,n5=33778,r5=33779,O6=35840,L6=35841,N6=35842,U6=35843,mZ=36196,z6=37492,H6=37496,V6=37808,G6=37809,q6=37810,Q6=37811,W6=37812,j6=37813,$6=37814,X6=37815,K6=37816,Y6=37817,Z6=37818,J6=37819,eN=37820,tN=37821,s5=36492,gZ=36283,nN=36284,iN=36285,rN=36286,tw=2300,qv=2301,bZ=0,oN=1,l5=2,Qv=3001,lN=3201,Wv=0,wZ=1,oy="",Jo="srgb",Pm="srgb-linear",cN="display-p3",uN="300 es",u5=1035;class jv{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const r=this._listeners[e];if(void 0!==r){const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const n=this._listeners[e.type];if(void 0!==n){e.target=this;const r=n.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const Hd=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let hN=1234567;const $v=Math.PI/180,rw=180/Math.PI;function Gp(){const i=4294967295*Math.random()|0,e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Hd[255&i]+Hd[i>>8&255]+Hd[i>>16&255]+Hd[i>>24&255]+"-"+Hd[255&e]+Hd[e>>8&255]+"-"+Hd[e>>16&15|64]+Hd[e>>24&255]+"-"+Hd[63&t|128]+Hd[t>>8&255]+"-"+Hd[t>>16&255]+Hd[t>>24&255]+Hd[255&n]+Hd[n>>8&255]+Hd[n>>16&255]+Hd[n>>24&255]).toLowerCase()}function au(i,e,t){return Math.max(e,Math.min(t,i))}function h5(i,e){return(i%e+e)%e}function GM(i,e,t){return(1-t)*i+t*e}function d5(i){return 0==(i&i-1)&&0!==i}function dN(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function fN(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function qp(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Fa(i,e){switch(e.constructor){case Float32Array:return i;case Uint16Array:return Math.round(65535*i);case Uint8Array:return Math.round(255*i);case Int16Array:return Math.round(32767*i);case Int8Array:return Math.round(127*i);default:throw new Error("Invalid component type.")}}const LE={DEG2RAD:$v,RAD2DEG:rw,generateUUID:Gp,clamp:au,euclideanModulo:h5,mapLinear:function CZ(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)},inverseLerp:function SZ(i,e,t){return i!==e?(t-i)/(e-i):0},lerp:GM,damp:function TZ(i,e,t,n){return GM(i,e,1-Math.exp(-t*n))},pingpong:function EZ(i,e=1){return e-Math.abs(h5(i,2*e)-e)},smoothstep:function DZ(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*(3-2*i)},smootherstep:function BZ(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e))*i*i*(i*(6*i-15)+10)},randInt:function IZ(i,e){return i+Math.floor(Math.random()*(e-i+1))},randFloat:function PZ(i,e){return i+Math.random()*(e-i)},randFloatSpread:function FZ(i){return i*(.5-Math.random())},seededRandom:function RZ(i){void 0!==i&&(hN=i);let e=hN+=1831565813;return e=Math.imul(e^e>>>15,1|e),e^=e+Math.imul(e^e>>>7,61|e),((e^e>>>14)>>>0)/4294967296},degToRad:function kZ(i){return i*$v},radToDeg:function OZ(i){return i*rw},isPowerOfTwo:d5,ceilPowerOfTwo:dN,floorPowerOfTwo:fN,setQuaternionFromProperEuler:function LZ(i,e,t,n,r){const s=Math.cos,a=Math.sin,l=s(t/2),u=a(t/2),d=s((e+n)/2),A=a((e+n)/2),y=s((e-n)/2),C=a((e-n)/2),k=s((n-e)/2),Q=a((n-e)/2);switch(r){case"XYX":i.set(l*A,u*y,u*C,l*d);break;case"YZY":i.set(u*C,l*A,u*y,l*d);break;case"ZXZ":i.set(u*y,u*C,l*A,l*d);break;case"XZX":i.set(l*A,u*Q,u*k,l*d);break;case"YXY":i.set(u*k,l*A,u*Q,l*d);break;case"ZYZ":i.set(u*Q,u*k,l*A,l*d);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:Fa,denormalize:qp};class qi{constructor(e=0,t=0){qi.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(au(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*n-a*r+e.x,this.y=s*r+a*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ka{constructor(){Ka.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,r,s,a,l,u,d){const A=this.elements;return A[0]=e,A[1]=r,A[2]=l,A[3]=t,A[4]=s,A[5]=u,A[6]=n,A[7]=a,A[8]=d,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],l=n[3],u=n[6],d=n[1],A=n[4],y=n[7],C=n[2],k=n[5],Q=n[8],se=r[0],he=r[3],re=r[6],Le=r[1],be=r[4],Ye=r[7],dt=r[2],xt=r[5],$t=r[8];return s[0]=a*se+l*Le+u*dt,s[3]=a*he+l*be+u*xt,s[6]=a*re+l*Ye+u*$t,s[1]=d*se+A*Le+y*dt,s[4]=d*he+A*be+y*xt,s[7]=d*re+A*Ye+y*$t,s[2]=C*se+k*Le+Q*dt,s[5]=C*he+k*be+Q*xt,s[8]=C*re+k*Ye+Q*$t,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],d=e[7],A=e[8];return t*a*A-t*l*d-n*s*A+n*l*u+r*s*d-r*a*u}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],d=e[7],A=e[8],y=A*a-l*d,C=l*u-A*s,k=d*s-a*u,Q=t*y+n*C+r*k;if(0===Q)return this.set(0,0,0,0,0,0,0,0,0);const se=1/Q;return e[0]=y*se,e[1]=(r*d-A*n)*se,e[2]=(l*n-r*a)*se,e[3]=C*se,e[4]=(A*t-r*u)*se,e[5]=(r*s-l*t)*se,e[6]=k*se,e[7]=(n*u-d*t)*se,e[8]=(a*t-n*s)*se,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,a,l){const u=Math.cos(s),d=Math.sin(s);return this.set(n*u,n*d,-n*(u*a+d*l)+a+e,-r*d,r*u,-r*(-d*a+u*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(f5.makeScale(e,t)),this}rotate(e){return this.premultiply(f5.makeRotation(-e)),this}translate(e,t){return this.premultiply(f5.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const f5=new Ka;function pN(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const NZ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function sw(i,e){return new NZ[i](e)}function qM(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}const AN={};function QM(i){i in AN||(AN[i]=!0,console.warn(i))}function ow(i){return i<.04045?.0773993808*i:Math.pow(.9478672986*i+.0521327014,2.4)}function p5(i){return i<.0031308?12.92*i:1.055*Math.pow(i,.41666)-.055}const UZ=(new Ka).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),zZ=(new Ka).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),GZ={[Pm]:i=>i,[Jo]:i=>i.convertSRGBToLinear(),[cN]:function HZ(i){return i.convertSRGBToLinear().applyMatrix3(zZ)}},qZ={[Pm]:i=>i,[Jo]:i=>i.convertLinearToSRGB(),[cN]:function VZ(i){return i.applyMatrix3(UZ).convertLinearToSRGB()}},Fm={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(i){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!i},get workingColorSpace(){return Pm},set workingColorSpace(i){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(i,e,t){if(!1===this.enabled||e===t||!e||!t)return i;const n=GZ[e],r=qZ[t];if(void 0===n||void 0===r)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this.workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this.workingColorSpace)}};let aw;class mN{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===aw&&(aw=qM("canvas")),aw.width=e.width,aw.height=e.height;const n=aw.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=aw}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=qM("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=255*ow(s[a]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t[n]=t instanceof Uint8Array||t instanceof Uint8ClampedArray?Math.floor(255*ow(t[n]/255)):ow(t[n]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Xv{constructor(e=null){this.isSource=!0,this.uuid=Gp(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let s;if(Array.isArray(r)){s=[];for(let a=0,l=r.length;a<l;a++)s.push(A5(r[a].isDataTexture?r[a].image:r[a]))}else s=A5(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function A5(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?mN.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let QZ=0,kA=(()=>{class i extends jv{constructor(t=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=_d,s=_d,a=Zc,l=Jg,u=Vp,d=Hv,A=i.DEFAULT_ANISOTROPY,y=oy){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:QZ++}),this.uuid=Gp(),this.name="",this.source=new Xv(t),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=s,this.magFilter=a,this.minFilter=l,this.anisotropy=A,this.format=u,this.internalFormat=null,this.type=d,this.offset=new qi(0,0),this.repeat=new qi(1,1),this.center=new qi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ka,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof y?this.colorSpace=y:(QM("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=y===Qv?Jo:oy),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const n=void 0===t||"string"==typeof t;if(!n&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ry:t.x=t.x-Math.floor(t.x);break;case _d:t.x=t.x<0?0:1;break;case Yx:t.x=1===Math.abs(Math.floor(t.x)%2)?Math.ceil(t.x)-t.x:t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ry:t.y=t.y-Math.floor(t.y);break;case _d:t.y=t.y<0?0:1;break;case Yx:t.y=1===Math.abs(Math.floor(t.y)%2)?Math.ceil(t.y)-t.y:t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return QM("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Jo?Qv:3e3}set encoding(t){QM("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=t===Qv?Jo:oy}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=300,i.DEFAULT_ANISOTROPY=1,i})();class Kl{constructor(e=0,t=0,n=0,r=1){Kl.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*n+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*n+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*n+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const u=e.elements,d=u[0],A=u[4],y=u[8],C=u[1],k=u[5],Q=u[9],se=u[2],he=u[6],re=u[10];if(Math.abs(A-C)<.01&&Math.abs(y-se)<.01&&Math.abs(Q-he)<.01){if(Math.abs(A+C)<.1&&Math.abs(y+se)<.1&&Math.abs(Q+he)<.1&&Math.abs(d+k+re-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const be=(d+1)/2,Ye=(k+1)/2,dt=(re+1)/2,xt=(A+C)/4,$t=(y+se)/4,nn=(Q+he)/4;return be>Ye&&be>dt?be<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(be),r=xt/n,s=$t/n):Ye>dt?Ye<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(Ye),n=xt/r,s=nn/r):dt<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(dt),n=$t/s,r=nn/s),this.set(n,r,s,t),this}let Le=Math.sqrt((he-Q)*(he-Q)+(y-se)*(y-se)+(C-A)*(C-A));return Math.abs(Le)<.001&&(Le=1),this.x=(he-Q)/Le,this.y=(y-se)/Le,this.z=(C-A)/Le,this.w=Math.acos((d+k+re-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Sf extends jv{constructor(e=1,t=1,n={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Kl(0,0,e,t),this.scissorTest=!1,this.viewport=new Kl(0,0,e,t);const r={width:e,height:t,depth:1};void 0!==n.encoding&&(QM("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Qv?Jo:oy),this.texture=new kA(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Zc,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Xv(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class m5 extends kA{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ou,this.minFilter=ou,this.wrapR=_d,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class gN extends kA{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=ou,this.minFilter=ou,this.wrapR=_d,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Uc{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,a,l){let u=n[r+0],d=n[r+1],A=n[r+2],y=n[r+3];const C=s[a+0],k=s[a+1],Q=s[a+2],se=s[a+3];if(0===l)return e[t+0]=u,e[t+1]=d,e[t+2]=A,void(e[t+3]=y);if(1===l)return e[t+0]=C,e[t+1]=k,e[t+2]=Q,void(e[t+3]=se);if(y!==se||u!==C||d!==k||A!==Q){let he=1-l;const re=u*C+d*k+A*Q+y*se,Le=re>=0?1:-1,be=1-re*re;if(be>Number.EPSILON){const dt=Math.sqrt(be),xt=Math.atan2(dt,re*Le);he=Math.sin(he*xt)/dt,l=Math.sin(l*xt)/dt}const Ye=l*Le;if(u=u*he+C*Ye,d=d*he+k*Ye,A=A*he+Q*Ye,y=y*he+se*Ye,he===1-l){const dt=1/Math.sqrt(u*u+d*d+A*A+y*y);u*=dt,d*=dt,A*=dt,y*=dt}}e[t]=u,e[t+1]=d,e[t+2]=A,e[t+3]=y}static multiplyQuaternionsFlat(e,t,n,r,s,a){const l=n[r],u=n[r+1],d=n[r+2],A=n[r+3],y=s[a],C=s[a+1],k=s[a+2],Q=s[a+3];return e[t]=l*Q+A*y+u*k-d*C,e[t+1]=u*Q+A*C+d*y-l*k,e[t+2]=d*Q+A*k+l*C-u*y,e[t+3]=A*Q-l*y-u*C-d*k,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,r=e._y,s=e._z,a=e._order,l=Math.cos,u=Math.sin,d=l(n/2),A=l(r/2),y=l(s/2),C=u(n/2),k=u(r/2),Q=u(s/2);switch(a){case"XYZ":this._x=C*A*y+d*k*Q,this._y=d*k*y-C*A*Q,this._z=d*A*Q+C*k*y,this._w=d*A*y-C*k*Q;break;case"YXZ":this._x=C*A*y+d*k*Q,this._y=d*k*y-C*A*Q,this._z=d*A*Q-C*k*y,this._w=d*A*y+C*k*Q;break;case"ZXY":this._x=C*A*y-d*k*Q,this._y=d*k*y+C*A*Q,this._z=d*A*Q+C*k*y,this._w=d*A*y-C*k*Q;break;case"ZYX":this._x=C*A*y-d*k*Q,this._y=d*k*y+C*A*Q,this._z=d*A*Q-C*k*y,this._w=d*A*y+C*k*Q;break;case"YZX":this._x=C*A*y+d*k*Q,this._y=d*k*y+C*A*Q,this._z=d*A*Q-C*k*y,this._w=d*A*y-C*k*Q;break;case"XZY":this._x=C*A*y-d*k*Q,this._y=d*k*y-C*A*Q,this._z=d*A*Q+C*k*y,this._w=d*A*y+C*k*Q;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],a=t[1],l=t[5],u=t[9],d=t[2],A=t[6],y=t[10],C=n+l+y;if(C>0){const k=.5/Math.sqrt(C+1);this._w=.25/k,this._x=(A-u)*k,this._y=(s-d)*k,this._z=(a-r)*k}else if(n>l&&n>y){const k=2*Math.sqrt(1+n-l-y);this._w=(A-u)/k,this._x=.25*k,this._y=(r+a)/k,this._z=(s+d)/k}else if(l>y){const k=2*Math.sqrt(1+l-n-y);this._w=(s-d)/k,this._x=(r+a)/k,this._y=.25*k,this._z=(u+A)/k}else{const k=2*Math.sqrt(1+y-n-l);this._w=(a-r)/k,this._x=(s+d)/k,this._y=(u+A)/k,this._z=.25*k}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(au(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,a=e._w,l=t._x,u=t._y,d=t._z,A=t._w;return this._x=n*A+a*l+r*d-s*u,this._y=r*A+a*u+s*l-n*d,this._z=s*A+a*d+n*u-r*l,this._w=a*A-n*l-r*u-s*d,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,s=this._z,a=this._w;let l=a*e._w+n*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=n,this._y=r,this._z=s,this;const u=1-l*l;if(u<=Number.EPSILON){const k=1-t;return this._w=k*a+t*this._w,this._x=k*n+t*this._x,this._y=k*r+t*this._y,this._z=k*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const d=Math.sqrt(u),A=Math.atan2(d,l),y=Math.sin((1-t)*A)/d,C=Math.sin(t*A)/d;return this._w=a*y+this._w*C,this._x=n*y+this._x*C,this._y=r*y+this._y*C,this._z=s*y+this._z*C,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class kt{constructor(e=0,t=0,n=0){kt.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(_N.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(_N.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,a=e.y,l=e.z,u=e.w,d=u*t+a*r-l*n,A=u*n+l*t-s*r,y=u*r+s*n-a*t,C=-s*t-a*n-l*r;return this.x=d*u+C*-s+A*-l-y*-a,this.y=A*u+C*-a+y*-s-d*-l,this.z=y*u+C*-l+d*-a-A*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,a=t.x,l=t.y,u=t.z;return this.x=r*u-s*l,this.y=s*a-n*u,this.z=n*l-r*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return g5.copy(this).projectOnVector(e),this.sub(g5)}reflect(e){return this.sub(g5.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(au(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const g5=new kt,_N=new Uc;class e0{constructor(e=new kt(1/0,1/0,1/0),t=new kt(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(F_.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(F_.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=F_.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),lw.copy(e.boundingBox),lw.applyMatrix4(e.matrixWorld),this.union(lw);else{const r=e.geometry;if(void 0!==r)if(t&&void 0!==r.attributes&&void 0!==r.attributes.position){const s=r.attributes.position;for(let a=0,l=s.count;a<l;a++)F_.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(F_)}else null===r.boundingBox&&r.computeBoundingBox(),lw.copy(r.boundingBox),lw.applyMatrix4(e.matrixWorld),this.union(lw)}const n=e.children;for(let r=0,s=n.length;r<s;r++)this.expandByObject(n[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,F_),F_.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(WM),NE.subVectors(this.max,WM),cw.subVectors(e.a,WM),uw.subVectors(e.b,WM),hw.subVectors(e.c,WM),ay.subVectors(uw,cw),ly.subVectors(hw,uw),Kv.subVectors(cw,hw);let t=[0,-ay.z,ay.y,0,-ly.z,ly.y,0,-Kv.z,Kv.y,ay.z,0,-ay.x,ly.z,0,-ly.x,Kv.z,0,-Kv.x,-ay.y,ay.x,0,-ly.y,ly.x,0,-Kv.y,Kv.x,0];return!(!_5(t,cw,uw,hw,NE)||(t=[1,0,0,0,1,0,0,0,1],!_5(t,cw,uw,hw,NE)))&&(UE.crossVectors(ay,ly),t=[UE.x,UE.y,UE.z],_5(t,cw,uw,hw,NE))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,F_).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(F_).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(P_[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),P_[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),P_[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),P_[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),P_[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),P_[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),P_[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),P_[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(P_)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const P_=[new kt,new kt,new kt,new kt,new kt,new kt,new kt,new kt],F_=new kt,lw=new e0,cw=new kt,uw=new kt,hw=new kt,ay=new kt,ly=new kt,Kv=new kt,WM=new kt,NE=new kt,UE=new kt,Yv=new kt;function _5(i,e,t,n,r){for(let s=0,a=i.length-3;s<=a;s+=3){Yv.fromArray(i,s);const l=r.x*Math.abs(Yv.x)+r.y*Math.abs(Yv.y)+r.z*Math.abs(Yv.z),u=e.dot(Yv),d=t.dot(Yv),A=n.dot(Yv);if(Math.max(-Math.max(u,d,A),Math.min(u,d,A))>l)return!1}return!0}const WZ=new e0,jM=new kt,y5=new kt;class OA{constructor(e=new kt,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):WZ.setFromPoints(e).getCenter(n);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;jM.subVectors(e,this.center);const t=jM.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=.5*(n-this.radius);this.center.addScaledVector(jM,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(y5.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(jM.copy(e.center).add(y5)),this.expandByPoint(jM.copy(e.center).sub(y5))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const R_=new kt,v5=new kt,zE=new kt,cy=new kt,b5=new kt,HE=new kt,x5=new kt;class VE{constructor(e=new kt,t=new kt(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,R_)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=R_.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(R_.copy(this.origin).addScaledVector(this.direction,t),R_.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){v5.copy(e).add(t).multiplyScalar(.5),zE.copy(t).sub(e).normalize(),cy.copy(this.origin).sub(v5);const s=.5*e.distanceTo(t),a=-this.direction.dot(zE),l=cy.dot(this.direction),u=-cy.dot(zE),d=cy.lengthSq(),A=Math.abs(1-a*a);let y,C,k,Q;if(A>0)if(y=a*u-l,C=a*l-u,Q=s*A,y>=0)if(C>=-Q)if(C<=Q){const se=1/A;y*=se,C*=se,k=y*(y+a*C+2*l)+C*(a*y+C+2*u)+d}else C=s,y=Math.max(0,-(a*C+l)),k=-y*y+C*(C+2*u)+d;else C=-s,y=Math.max(0,-(a*C+l)),k=-y*y+C*(C+2*u)+d;else C<=-Q?(y=Math.max(0,-(-a*s+l)),C=y>0?-s:Math.min(Math.max(-s,-u),s),k=-y*y+C*(C+2*u)+d):C<=Q?(y=0,C=Math.min(Math.max(-s,-u),s),k=C*(C+2*u)+d):(y=Math.max(0,-(a*s+l)),C=y>0?s:Math.min(Math.max(-s,-u),s),k=-y*y+C*(C+2*u)+d);else C=a>0?-s:s,y=Math.max(0,-(a*C+l)),k=-y*y+C*(C+2*u)+d;return n&&n.copy(this.origin).addScaledVector(this.direction,y),r&&r.copy(v5).addScaledVector(zE,C),k}intersectSphere(e,t){R_.subVectors(e.center,this.origin);const n=R_.dot(this.direction),r=R_.dot(R_)-n*n,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),l=n-a,u=n+a;return u<0?null:this.at(l<0?u:l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,a,l,u;const d=1/this.direction.x,A=1/this.direction.y,y=1/this.direction.z,C=this.origin;return d>=0?(n=(e.min.x-C.x)*d,r=(e.max.x-C.x)*d):(n=(e.max.x-C.x)*d,r=(e.min.x-C.x)*d),A>=0?(s=(e.min.y-C.y)*A,a=(e.max.y-C.y)*A):(s=(e.max.y-C.y)*A,a=(e.min.y-C.y)*A),n>a||s>r||((s>n||isNaN(n))&&(n=s),(a<r||isNaN(r))&&(r=a),y>=0?(l=(e.min.z-C.z)*y,u=(e.max.z-C.z)*y):(l=(e.max.z-C.z)*y,u=(e.min.z-C.z)*y),n>u||l>r)||((l>n||n!=n)&&(n=l),(u<r||r!=r)&&(r=u),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return null!==this.intersectBox(e,R_)}intersectTriangle(e,t,n,r,s){b5.subVectors(t,e),HE.subVectors(n,e),x5.crossVectors(b5,HE);let l,a=this.direction.dot(x5);if(a>0){if(r)return null;l=1}else{if(!(a<0))return null;l=-1,a=-a}cy.subVectors(this.origin,e);const u=l*this.direction.dot(HE.crossVectors(cy,HE));if(u<0)return null;const d=l*this.direction.dot(b5.cross(cy));if(d<0||u+d>a)return null;const A=-l*cy.dot(x5);return A<0?null:this.at(A/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ea{constructor(){ea.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,r,s,a,l,u,d,A,y,C,k,Q,se,he){const re=this.elements;return re[0]=e,re[4]=t,re[8]=n,re[12]=r,re[1]=s,re[5]=a,re[9]=l,re[13]=u,re[2]=d,re[6]=A,re[10]=y,re[14]=C,re[3]=k,re[7]=Q,re[11]=se,re[15]=he,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ea).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/dw.setFromMatrixColumn(e,0).length(),s=1/dw.setFromMatrixColumn(e,1).length(),a=1/dw.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,a=Math.cos(n),l=Math.sin(n),u=Math.cos(r),d=Math.sin(r),A=Math.cos(s),y=Math.sin(s);if("XYZ"===e.order){const C=a*A,k=a*y,Q=l*A,se=l*y;t[0]=u*A,t[4]=-u*y,t[8]=d,t[1]=k+Q*d,t[5]=C-se*d,t[9]=-l*u,t[2]=se-C*d,t[6]=Q+k*d,t[10]=a*u}else if("YXZ"===e.order){const C=u*A,k=u*y,Q=d*A,se=d*y;t[0]=C+se*l,t[4]=Q*l-k,t[8]=a*d,t[1]=a*y,t[5]=a*A,t[9]=-l,t[2]=k*l-Q,t[6]=se+C*l,t[10]=a*u}else if("ZXY"===e.order){const C=u*A,k=u*y,Q=d*A,se=d*y;t[0]=C-se*l,t[4]=-a*y,t[8]=Q+k*l,t[1]=k+Q*l,t[5]=a*A,t[9]=se-C*l,t[2]=-a*d,t[6]=l,t[10]=a*u}else if("ZYX"===e.order){const C=a*A,k=a*y,Q=l*A,se=l*y;t[0]=u*A,t[4]=Q*d-k,t[8]=C*d+se,t[1]=u*y,t[5]=se*d+C,t[9]=k*d-Q,t[2]=-d,t[6]=l*u,t[10]=a*u}else if("YZX"===e.order){const C=a*u,k=a*d,Q=l*u,se=l*d;t[0]=u*A,t[4]=se-C*y,t[8]=Q*y+k,t[1]=y,t[5]=a*A,t[9]=-l*A,t[2]=-d*A,t[6]=k*y+Q,t[10]=C-se*y}else if("XZY"===e.order){const C=a*u,k=a*d,Q=l*u,se=l*d;t[0]=u*A,t[4]=-y,t[8]=d*A,t[1]=C*y+se,t[5]=a*A,t[9]=k*y-Q,t[2]=Q*y-k,t[6]=l*A,t[10]=se*y+C}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(jZ,e,$Z)}lookAt(e,t,n){const r=this.elements;return Qp.subVectors(e,t),0===Qp.lengthSq()&&(Qp.z=1),Qp.normalize(),uy.crossVectors(n,Qp),0===uy.lengthSq()&&(1===Math.abs(n.z)?Qp.x+=1e-4:Qp.z+=1e-4,Qp.normalize(),uy.crossVectors(n,Qp)),uy.normalize(),GE.crossVectors(Qp,uy),r[0]=uy.x,r[4]=GE.x,r[8]=Qp.x,r[1]=uy.y,r[5]=GE.y,r[9]=Qp.y,r[2]=uy.z,r[6]=GE.z,r[10]=Qp.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,a=n[0],l=n[4],u=n[8],d=n[12],A=n[1],y=n[5],C=n[9],k=n[13],Q=n[2],se=n[6],he=n[10],re=n[14],Le=n[3],be=n[7],Ye=n[11],dt=n[15],xt=r[0],$t=r[4],nn=r[8],gt=r[12],Wt=r[1],Nn=r[5],yi=r[9],Rn=r[13],kn=r[2],li=r[6],Wn=r[10],ni=r[14],si=r[3],Ei=r[7],Ki=r[11],Zr=r[15];return s[0]=a*xt+l*Wt+u*kn+d*si,s[4]=a*$t+l*Nn+u*li+d*Ei,s[8]=a*nn+l*yi+u*Wn+d*Ki,s[12]=a*gt+l*Rn+u*ni+d*Zr,s[1]=A*xt+y*Wt+C*kn+k*si,s[5]=A*$t+y*Nn+C*li+k*Ei,s[9]=A*nn+y*yi+C*Wn+k*Ki,s[13]=A*gt+y*Rn+C*ni+k*Zr,s[2]=Q*xt+se*Wt+he*kn+re*si,s[6]=Q*$t+se*Nn+he*li+re*Ei,s[10]=Q*nn+se*yi+he*Wn+re*Ki,s[14]=Q*gt+se*Rn+he*ni+re*Zr,s[3]=Le*xt+be*Wt+Ye*kn+dt*si,s[7]=Le*$t+be*Nn+Ye*li+dt*Ei,s[11]=Le*nn+be*yi+Ye*Wn+dt*Ki,s[15]=Le*gt+be*Rn+Ye*ni+dt*Zr,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],a=e[1],l=e[5],u=e[9],d=e[13],A=e[2],y=e[6],C=e[10],k=e[14];return e[3]*(+s*u*y-r*d*y-s*l*C+n*d*C+r*l*k-n*u*k)+e[7]*(+t*u*k-t*d*C+s*a*C-r*a*k+r*d*A-s*u*A)+e[11]*(+t*d*y-t*l*k-s*a*y+n*a*k+s*l*A-n*d*A)+e[15]*(-r*l*A-t*u*y+t*l*C+r*a*y-n*a*C+n*u*A)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],a=e[4],l=e[5],u=e[6],d=e[7],A=e[8],y=e[9],C=e[10],k=e[11],Q=e[12],se=e[13],he=e[14],re=e[15],Le=y*he*d-se*C*d+se*u*k-l*he*k-y*u*re+l*C*re,be=Q*C*d-A*he*d-Q*u*k+a*he*k+A*u*re-a*C*re,Ye=A*se*d-Q*y*d+Q*l*k-a*se*k-A*l*re+a*y*re,dt=Q*y*u-A*se*u-Q*l*C+a*se*C+A*l*he-a*y*he,xt=t*Le+n*be+r*Ye+s*dt;if(0===xt)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const $t=1/xt;return e[0]=Le*$t,e[1]=(se*C*s-y*he*s-se*r*k+n*he*k+y*r*re-n*C*re)*$t,e[2]=(l*he*s-se*u*s+se*r*d-n*he*d-l*r*re+n*u*re)*$t,e[3]=(y*u*s-l*C*s-y*r*d+n*C*d+l*r*k-n*u*k)*$t,e[4]=be*$t,e[5]=(A*he*s-Q*C*s+Q*r*k-t*he*k-A*r*re+t*C*re)*$t,e[6]=(Q*u*s-a*he*s-Q*r*d+t*he*d+a*r*re-t*u*re)*$t,e[7]=(a*C*s-A*u*s+A*r*d-t*C*d-a*r*k+t*u*k)*$t,e[8]=Ye*$t,e[9]=(Q*y*s-A*se*s-Q*n*k+t*se*k+A*n*re-t*y*re)*$t,e[10]=(a*se*s-Q*l*s+Q*n*d-t*se*d-a*n*re+t*l*re)*$t,e[11]=(A*l*s-a*y*s-A*n*d+t*y*d+a*n*k-t*l*k)*$t,e[12]=dt*$t,e[13]=(A*se*r-Q*y*r+Q*n*C-t*se*C-A*n*he+t*y*he)*$t,e[14]=(Q*l*r-a*se*r-Q*n*u+t*se*u+a*n*he-t*l*he)*$t,e[15]=(a*y*r-A*l*r+A*n*u-t*y*u-a*n*C+t*l*C)*$t,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,a=e.x,l=e.y,u=e.z,d=s*a,A=s*l;return this.set(d*a+n,d*l-r*u,d*u+r*l,0,d*l+r*u,A*l+n,A*u-r*a,0,d*u-r*l,A*u+r*a,s*u*u+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,a){return this.set(1,n,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,a=t._y,l=t._z,u=t._w,d=s+s,A=a+a,y=l+l,C=s*d,k=s*A,Q=s*y,se=a*A,he=a*y,re=l*y,Le=u*d,be=u*A,Ye=u*y,dt=n.x,xt=n.y,$t=n.z;return r[0]=(1-(se+re))*dt,r[1]=(k+Ye)*dt,r[2]=(Q-be)*dt,r[3]=0,r[4]=(k-Ye)*xt,r[5]=(1-(C+re))*xt,r[6]=(he+Le)*xt,r[7]=0,r[8]=(Q+be)*$t,r[9]=(he-Le)*$t,r[10]=(1-(C+se))*$t,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=dw.set(r[0],r[1],r[2]).length();const a=dw.set(r[4],r[5],r[6]).length(),l=dw.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Rm.copy(this);const d=1/s,A=1/a,y=1/l;return Rm.elements[0]*=d,Rm.elements[1]*=d,Rm.elements[2]*=d,Rm.elements[4]*=A,Rm.elements[5]*=A,Rm.elements[6]*=A,Rm.elements[8]*=y,Rm.elements[9]*=y,Rm.elements[10]*=y,t.setFromRotationMatrix(Rm),n.x=s,n.y=a,n.z=l,this}makePerspective(e,t,n,r,s,a){const l=this.elements,d=2*s/(n-r),A=(t+e)/(t-e),y=(n+r)/(n-r),C=-(a+s)/(a-s),k=-2*a*s/(a-s);return l[0]=2*s/(t-e),l[4]=0,l[8]=A,l[12]=0,l[1]=0,l[5]=d,l[9]=y,l[13]=0,l[2]=0,l[6]=0,l[10]=C,l[14]=k,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,n,r,s,a){const l=this.elements,u=1/(t-e),d=1/(n-r),A=1/(a-s),y=(t+e)*u,C=(n+r)*d,k=(a+s)*A;return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-y,l[1]=0,l[5]=2*d,l[9]=0,l[13]=-C,l[2]=0,l[6]=0,l[10]=-2*A,l[14]=-k,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const dw=new kt,Rm=new ea,jZ=new kt(0,0,0),$Z=new kt(1,1,1),uy=new kt,GE=new kt,Qp=new kt,yN=new ea,vN=new Uc;let bN=(()=>{class i{constructor(t=0,n=0,r=0,s=i.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=n,this._z=r,this._order=s}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,n,r,s=this._order){return this._x=t,this._y=n,this._z=r,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,n=this._order,r=!0){const s=t.elements,a=s[0],l=s[4],u=s[8],d=s[1],A=s[5],y=s[9],C=s[2],k=s[6],Q=s[10];switch(n){case"XYZ":this._y=Math.asin(au(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-y,Q),this._z=Math.atan2(-l,a)):(this._x=Math.atan2(k,A),this._z=0);break;case"YXZ":this._x=Math.asin(-au(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(u,Q),this._z=Math.atan2(d,A)):(this._y=Math.atan2(-C,a),this._z=0);break;case"ZXY":this._x=Math.asin(au(k,-1,1)),Math.abs(k)<.9999999?(this._y=Math.atan2(-C,Q),this._z=Math.atan2(-l,A)):(this._y=0,this._z=Math.atan2(d,a));break;case"ZYX":this._y=Math.asin(-au(C,-1,1)),Math.abs(C)<.9999999?(this._x=Math.atan2(k,Q),this._z=Math.atan2(d,a)):(this._x=0,this._z=Math.atan2(-l,A));break;case"YZX":this._z=Math.asin(au(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-y,A),this._y=Math.atan2(-C,a)):(this._x=0,this._y=Math.atan2(u,Q));break;case"XZY":this._z=Math.asin(-au(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(k,A),this._y=Math.atan2(u,a)):(this._x=Math.atan2(-y,Q),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,!0===r&&this._onChangeCallback(),this}setFromQuaternion(t,n,r){return yN.makeRotationFromQuaternion(t),this.setFromRotationMatrix(yN,n,r)}setFromVector3(t,n=this._order){return this.set(t.x,t.y,t.z,n)}reorder(t){return vN.setFromEuler(this),this.setFromQuaternion(vN,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],n=0){return t[n]=this._x,t[n+1]=this._y,t[n+2]=this._z,t[n+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})();class w5{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let XZ=0;const xN=new kt,fw=new Uc,k_=new ea,qE=new kt,$M=new kt,KZ=new kt,YZ=new Uc,wN=new kt(1,0,0),MN=new kt(0,1,0),CN=new kt(0,0,1),ZZ={type:"added"},SN={type:"removed"};let Tc=(()=>{class i extends jv{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:XZ++}),this.uuid=Gp(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();const t=new kt,n=new bN,r=new Uc,s=new kt(1,1,1);n._onChange(function a(){r.setFromEuler(n,!1)}),r._onChange(function l(){n.setFromQuaternion(r,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new ea},normalMatrix:{value:new Ka}}),this.matrix=new ea,this.matrixWorld=new ea,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new w5,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,n){this.quaternion.setFromAxisAngle(t,n)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,n){return fw.setFromAxisAngle(t,n),this.quaternion.multiply(fw),this}rotateOnWorldAxis(t,n){return fw.setFromAxisAngle(t,n),this.quaternion.premultiply(fw),this}rotateX(t){return this.rotateOnAxis(wN,t)}rotateY(t){return this.rotateOnAxis(MN,t)}rotateZ(t){return this.rotateOnAxis(CN,t)}translateOnAxis(t,n){return xN.copy(t).applyQuaternion(this.quaternion),this.position.add(xN.multiplyScalar(n)),this}translateX(t){return this.translateOnAxis(wN,t)}translateY(t){return this.translateOnAxis(MN,t)}translateZ(t){return this.translateOnAxis(CN,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(k_.copy(this.matrixWorld).invert())}lookAt(t,n,r){t.isVector3?qE.copy(t):qE.set(t,n,r);const s=this.parent;this.updateWorldMatrix(!0,!1),$M.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?k_.lookAt($M,qE,this.up):k_.lookAt(qE,$M,this.up),this.quaternion.setFromRotationMatrix(k_),s&&(k_.extractRotation(s.matrixWorld),fw.setFromRotationMatrix(k_),this.quaternion.premultiply(fw.invert()))}add(t){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(ZZ)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(SN)),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const n=this.children[t];n.parent=null,n.dispatchEvent(SN)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),k_.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),k_.multiply(t.parent.matrixWorld)),t.applyMatrix4(k_),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,n){if(this[t]===n)return this;for(let r=0,s=this.children.length;r<s;r++){const l=this.children[r].getObjectByProperty(t,n);if(void 0!==l)return l}}getObjectsByProperty(t,n){let r=[];this[t]===n&&r.push(this);for(let s=0,a=this.children.length;s<a;s++){const l=this.children[s].getObjectsByProperty(t,n);l.length>0&&(r=r.concat(l))}return r}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($M,t,KZ),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose($M,YZ,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return t.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(t){t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].traverseVisible(t)}traverseAncestors(t){const n=this.parent;null!==n&&(t(n),n.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const n=this.children;for(let r=0,s=n.length;r<s;r++){const a=n[r];(!0===a.matrixWorldAutoUpdate||!0===t)&&a.updateMatrixWorld(t)}}updateWorldMatrix(t,n){const r=this.parent;if(!0===t&&null!==r&&!0===r.matrixWorldAutoUpdate&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===n){const s=this.children;for(let a=0,l=s.length;a<l;a++){const u=s[a];!0===u.matrixWorldAutoUpdate&&u.updateWorldMatrix(!1,!0)}}}toJSON(t){const n=void 0===t||"string"==typeof t,r={};n&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const s={};function a(u,d){return void 0===u[d.uuid]&&(u[d.uuid]=d.toJSON(t)),d.uuid}if(s.uuid=this.uuid,s.type=this.type,""!==this.name&&(s.name=this.name),!0===this.castShadow&&(s.castShadow=!0),!0===this.receiveShadow&&(s.receiveShadow=!0),!1===this.visible&&(s.visible=!1),!1===this.frustumCulled&&(s.frustumCulled=!1),0!==this.renderOrder&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(s.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(s.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=a(t.geometries,this.geometry);const u=this.geometry.parameters;if(void 0!==u&&void 0!==u.shapes){const d=u.shapes;if(Array.isArray(d))for(let A=0,y=d.length;A<y;A++)a(t.shapes,d[A]);else a(t.shapes,d)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(a(t.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const u=[];for(let d=0,A=this.material.length;d<A;d++)u.push(a(t.materials,this.material[d]));s.material=u}else s.material=a(t.materials,this.material);if(this.children.length>0){s.children=[];for(let u=0;u<this.children.length;u++)s.children.push(this.children[u].toJSON(t).object)}if(this.animations.length>0){s.animations=[];for(let u=0;u<this.animations.length;u++)s.animations.push(a(t.animations,this.animations[u]))}if(n){const u=l(t.geometries),d=l(t.materials),A=l(t.textures),y=l(t.images),C=l(t.shapes),k=l(t.skeletons),Q=l(t.animations),se=l(t.nodes);u.length>0&&(r.geometries=u),d.length>0&&(r.materials=d),A.length>0&&(r.textures=A),y.length>0&&(r.images=y),C.length>0&&(r.shapes=C),k.length>0&&(r.skeletons=k),Q.length>0&&(r.animations=Q),se.length>0&&(r.nodes=se)}return r.object=s,r;function l(u){const d=[];for(const A in u){const y=u[A];delete y.metadata,d.push(y)}return d}}clone(t){return(new this.constructor).copy(this,t)}copy(t,n=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===n)for(let r=0;r<t.children.length;r++)this.add(t.children[r].clone());return this}}return i.DEFAULT_UP=new kt(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})();const km=new kt,O_=new kt,M5=new kt,L_=new kt,pw=new kt,Aw=new kt,TN=new kt,C5=new kt,S5=new kt,T5=new kt;let QE=!1;class up{constructor(e=new kt,t=new kt,n=new kt){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),km.subVectors(e,t),r.cross(km);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){km.subVectors(r,t),O_.subVectors(n,t),M5.subVectors(e,t);const a=km.dot(km),l=km.dot(O_),u=km.dot(M5),d=O_.dot(O_),A=O_.dot(M5),y=a*d-l*l;if(0===y)return s.set(-2,-1,-1);const C=1/y,k=(d*u-l*A)*C,Q=(a*A-l*u)*C;return s.set(1-k-Q,Q,k)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,L_),L_.x>=0&&L_.y>=0&&L_.x+L_.y<=1}static getUV(e,t,n,r,s,a,l,u){return!1===QE&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),QE=!0),this.getInterpolation(e,t,n,r,s,a,l,u)}static getInterpolation(e,t,n,r,s,a,l,u){return this.getBarycoord(e,t,n,r,L_),u.setScalar(0),u.addScaledVector(s,L_.x),u.addScaledVector(a,L_.y),u.addScaledVector(l,L_.z),u}static isFrontFacing(e,t,n,r){return km.subVectors(n,t),O_.subVectors(e,t),km.cross(O_).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return km.subVectors(this.c,this.b),O_.subVectors(this.a,this.b),.5*km.cross(O_).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return up.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return up.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return!1===QE&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),QE=!0),up.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}getInterpolation(e,t,n,r,s){return up.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return up.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return up.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let a,l;pw.subVectors(r,n),Aw.subVectors(s,n),C5.subVectors(e,n);const u=pw.dot(C5),d=Aw.dot(C5);if(u<=0&&d<=0)return t.copy(n);S5.subVectors(e,r);const A=pw.dot(S5),y=Aw.dot(S5);if(A>=0&&y<=A)return t.copy(r);const C=u*y-A*d;if(C<=0&&u>=0&&A<=0)return a=u/(u-A),t.copy(n).addScaledVector(pw,a);T5.subVectors(e,s);const k=pw.dot(T5),Q=Aw.dot(T5);if(Q>=0&&k<=Q)return t.copy(s);const se=k*d-u*Q;if(se<=0&&d>=0&&Q<=0)return l=d/(d-Q),t.copy(n).addScaledVector(Aw,l);const he=A*Q-k*y;if(he<=0&&y-A>=0&&k-Q>=0)return TN.subVectors(s,r),l=(y-A)/(y-A+(k-Q)),t.copy(r).addScaledVector(TN,l);const re=1/(he+se+C);return a=se*re,l=C*re,t.copy(n).addScaledVector(pw,a).addScaledVector(Aw,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let JZ=0;class Jc extends jv{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:JZ++}),this.uuid=Gp(),this.name="",this.type="Material",this.blending=Nv,this.side=Yg,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=F6,this.blendDst=R6,this.blendEquation=Kx,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ZI,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(s){const a=[];for(const l in s){const u=s[l];delete u.metadata,a.push(u)}return a}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Nv&&(n.blending=this.blending),this.side!==Yg&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const s=r(e.textures),a=r(e.images);s.length>0&&(n.textures=s),a.length>0&&(n.images=a)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const EN={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Om={h:0,s:0,l:0},WE={h:0,s:0,l:0};function E5(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+6*(e-i)*t:t<.5?e:t<2/3?i+6*(e-i)*(2/3-t):i}class Ir{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Jo){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Fm.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=Fm.workingColorSpace){return this.r=e,this.g=t,this.b=n,Fm.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=Fm.workingColorSpace){if(e=h5(e,1),t=au(t,0,1),n=au(n,0,1),0===t)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,a=2*n-s;this.r=E5(a,s,e+1/3),this.g=E5(a,s,e),this.b=E5(a,s,e-1/3)}return Fm.toWorkingColorSpace(this,r),this}setStyle(e,t=Jo){function n(s){void 0!==s&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const l=r[2];switch(r[1]){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(3===a)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(6===a)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Jo){const n=EN[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ow(e.r),this.g=ow(e.g),this.b=ow(e.b),this}copyLinearToSRGB(e){return this.r=p5(e.r),this.g=p5(e.g),this.b=p5(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Jo){return Fm.fromWorkingColorSpace(Vd.copy(this),e),65536*Math.round(au(255*Vd.r,0,255))+256*Math.round(au(255*Vd.g,0,255))+Math.round(au(255*Vd.b,0,255))}getHexString(e=Jo){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Fm.workingColorSpace){Fm.fromWorkingColorSpace(Vd.copy(this),t);const n=Vd.r,r=Vd.g,s=Vd.b,a=Math.max(n,r,s),l=Math.min(n,r,s);let u,d;const A=(l+a)/2;if(l===a)u=0,d=0;else{const y=a-l;switch(d=A<=.5?y/(a+l):y/(2-a-l),a){case n:u=(r-s)/y+(r<s?6:0);break;case r:u=(s-n)/y+2;break;case s:u=(n-r)/y+4}u/=6}return e.h=u,e.s=d,e.l=A,e}getRGB(e,t=Fm.workingColorSpace){return Fm.fromWorkingColorSpace(Vd.copy(this),t),e.r=Vd.r,e.g=Vd.g,e.b=Vd.b,e}getStyle(e=Jo){Fm.fromWorkingColorSpace(Vd.copy(this),e);const t=Vd.r,n=Vd.g,r=Vd.b;return e!==Jo?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(Om),Om.h+=e,Om.s+=t,Om.l+=n,this.setHSL(Om.h,Om.s,Om.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Om),e.getHSL(WE);const n=GM(Om.h,WE.h,t),r=GM(Om.s,WE.s,t),s=GM(Om.l,WE.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Vd=new Ir;Ir.NAMES=EN;class Ah extends Jc{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ir(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=IE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Qu=new kt,jE=new qi;class va{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)jE.fromBufferAttribute(this,t),jE.applyMatrix3(e),this.setXY(t,jE.x,jE.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Qu.fromBufferAttribute(this,t),Qu.applyMatrix3(e),this.setXYZ(t,Qu.x,Qu.y,Qu.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Qu.fromBufferAttribute(this,t),Qu.applyMatrix4(e),this.setXYZ(t,Qu.x,Qu.y,Qu.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Qu.fromBufferAttribute(this,t),Qu.applyNormalMatrix(e),this.setXYZ(t,Qu.x,Qu.y,Qu.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Qu.fromBufferAttribute(this,t),Qu.transformDirection(e),this.setXYZ(t,Qu.x,Qu.y,Qu.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=qp(t,this.array)),t}setX(e,t){return this.normalized&&(t=Fa(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=qp(t,this.array)),t}setY(e,t){return this.normalized&&(t=Fa(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=qp(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Fa(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=qp(t,this.array)),t}setW(e,t){return this.normalized&&(t=Fa(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Fa(t,this.array),n=Fa(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Fa(t,this.array),n=Fa(n,this.array),r=Fa(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Fa(t,this.array),n=Fa(n,this.array),r=Fa(r,this.array),s=Fa(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class DN extends va{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class BN extends va{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class Fs extends va{constructor(e,t,n){super(new Float32Array(e),t,n)}}let tJ=0;const LA=new ea,D5=new Tc,mw=new kt,Wp=new e0,KM=new e0,Oh=new kt;class bo extends jv{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tJ++}),this.uuid=Gp(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return this.index=Array.isArray(e)?new(pN(e)?BN:DN)(e,1):e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const s=(new Ka).getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return LA.makeRotationFromQuaternion(e),this.applyMatrix4(LA),this}rotateX(e){return LA.makeRotationX(e),this.applyMatrix4(LA),this}rotateY(e){return LA.makeRotationY(e),this.applyMatrix4(LA),this}rotateZ(e){return LA.makeRotationZ(e),this.applyMatrix4(LA),this}translate(e,t,n){return LA.makeTranslation(e,t,n),this.applyMatrix4(LA),this}scale(e,t,n){return LA.makeScale(e,t,n),this.applyMatrix4(LA),this}lookAt(e){return D5.lookAt(e),D5.updateMatrix(),this.applyMatrix4(D5.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(mw).negate(),this.translate(mw.x,mw.y,mw.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Fs(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new e0);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new kt(-1/0,-1/0,-1/0),new kt(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++)Wp.setFromBufferAttribute(t[n]),this.morphTargetsRelative?(Oh.addVectors(this.boundingBox.min,Wp.min),this.boundingBox.expandByPoint(Oh),Oh.addVectors(this.boundingBox.max,Wp.max),this.boundingBox.expandByPoint(Oh)):(this.boundingBox.expandByPoint(Wp.min),this.boundingBox.expandByPoint(Wp.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new OA);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new kt,1/0);if(e){const n=this.boundingSphere.center;if(Wp.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++)KM.setFromBufferAttribute(t[s]),this.morphTargetsRelative?(Oh.addVectors(Wp.min,KM.min),Wp.expandByPoint(Oh),Oh.addVectors(Wp.max,KM.max),Wp.expandByPoint(Oh)):(Wp.expandByPoint(KM.min),Wp.expandByPoint(KM.max));Wp.getCenter(n);let r=0;for(let s=0,a=e.count;s<a;s++)Oh.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Oh));if(t)for(let s=0,a=t.length;s<a;s++){const l=t[s],u=this.morphTargetsRelative;for(let d=0,A=l.count;d<A;d++)Oh.fromBufferAttribute(l,d),u&&(mw.fromBufferAttribute(e,d),Oh.add(mw)),r=Math.max(r,n.distanceToSquared(Oh))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,l=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new va(new Float32Array(4*l),4));const u=this.getAttribute("tangent").array,d=[],A=[];for(let Wt=0;Wt<l;Wt++)d[Wt]=new kt,A[Wt]=new kt;const y=new kt,C=new kt,k=new kt,Q=new qi,se=new qi,he=new qi,re=new kt,Le=new kt;function be(Wt,Nn,yi){y.fromArray(r,3*Wt),C.fromArray(r,3*Nn),k.fromArray(r,3*yi),Q.fromArray(a,2*Wt),se.fromArray(a,2*Nn),he.fromArray(a,2*yi),C.sub(y),k.sub(y),se.sub(Q),he.sub(Q);const Rn=1/(se.x*he.y-he.x*se.y);isFinite(Rn)&&(re.copy(C).multiplyScalar(he.y).addScaledVector(k,-se.y).multiplyScalar(Rn),Le.copy(k).multiplyScalar(se.x).addScaledVector(C,-he.x).multiplyScalar(Rn),d[Wt].add(re),d[Nn].add(re),d[yi].add(re),A[Wt].add(Le),A[Nn].add(Le),A[yi].add(Le))}let Ye=this.groups;0===Ye.length&&(Ye=[{start:0,count:n.length}]);for(let Wt=0,Nn=Ye.length;Wt<Nn;++Wt){const yi=Ye[Wt],Rn=yi.start;for(let li=Rn,Wn=Rn+yi.count;li<Wn;li+=3)be(n[li+0],n[li+1],n[li+2])}const dt=new kt,xt=new kt,$t=new kt,nn=new kt;function gt(Wt){$t.fromArray(s,3*Wt),nn.copy($t);const Nn=d[Wt];dt.copy(Nn),dt.sub($t.multiplyScalar($t.dot(Nn))).normalize(),xt.crossVectors(nn,Nn);const Rn=xt.dot(A[Wt])<0?-1:1;u[4*Wt]=dt.x,u[4*Wt+1]=dt.y,u[4*Wt+2]=dt.z,u[4*Wt+3]=Rn}for(let Wt=0,Nn=Ye.length;Wt<Nn;++Wt){const yi=Ye[Wt],Rn=yi.start;for(let li=Rn,Wn=Rn+yi.count;li<Wn;li+=3)gt(n[li+0]),gt(n[li+1]),gt(n[li+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new va(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let C=0,k=n.count;C<k;C++)n.setXYZ(C,0,0,0);const r=new kt,s=new kt,a=new kt,l=new kt,u=new kt,d=new kt,A=new kt,y=new kt;if(e)for(let C=0,k=e.count;C<k;C+=3){const Q=e.getX(C+0),se=e.getX(C+1),he=e.getX(C+2);r.fromBufferAttribute(t,Q),s.fromBufferAttribute(t,se),a.fromBufferAttribute(t,he),A.subVectors(a,s),y.subVectors(r,s),A.cross(y),l.fromBufferAttribute(n,Q),u.fromBufferAttribute(n,se),d.fromBufferAttribute(n,he),l.add(A),u.add(A),d.add(A),n.setXYZ(Q,l.x,l.y,l.z),n.setXYZ(se,u.x,u.y,u.z),n.setXYZ(he,d.x,d.y,d.z)}else for(let C=0,k=t.count;C<k;C+=3)r.fromBufferAttribute(t,C+0),s.fromBufferAttribute(t,C+1),a.fromBufferAttribute(t,C+2),A.subVectors(a,s),y.subVectors(r,s),A.cross(y),n.setXYZ(C+0,A.x,A.y,A.z),n.setXYZ(C+1,A.x,A.y,A.z),n.setXYZ(C+2,A.x,A.y,A.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Oh.fromBufferAttribute(e,t),Oh.normalize(),e.setXYZ(t,Oh.x,Oh.y,Oh.z)}toNonIndexed(){function e(l,u){const d=l.array,A=l.itemSize,y=l.normalized,C=new d.constructor(u.length*A);let k=0,Q=0;for(let se=0,he=u.length;se<he;se++){k=l.isInterleavedBufferAttribute?u[se]*l.data.stride+l.offset:u[se]*A;for(let re=0;re<A;re++)C[Q++]=d[k++]}return new va(C,A,y)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new bo,n=this.index.array,r=this.attributes;for(const l in r){const d=e(r[l],n);t.setAttribute(l,d)}const s=this.morphAttributes;for(const l in s){const u=[],d=s[l];for(let A=0,y=d.length;A<y;A++){const k=e(d[A],n);u.push(k)}t.morphAttributes[l]=u}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,u=a.length;l<u;l++){const d=a[l];t.addGroup(d.start,d.count,d.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const u=this.parameters;for(const d in u)void 0!==u[d]&&(e[d]=u[d]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const u in n)e.data.attributes[u]=n[u].toJSON(e.data);const r={};let s=!1;for(const u in this.morphAttributes){const d=this.morphAttributes[u],A=[];for(let y=0,C=d.length;y<C;y++)A.push(d[y].toJSON(e.data));A.length>0&&(r[u]=A,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const d in r)this.setAttribute(d,r[d].clone(t));const s=e.morphAttributes;for(const d in s){const A=[],y=s[d];for(let C=0,k=y.length;C<k;C++)A.push(y[C].clone(t));this.morphAttributes[d]=A}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let d=0,A=a.length;d<A;d++){const y=a[d];this.addGroup(y.start,y.count,y.materialIndex)}const l=e.boundingBox;null!==l&&(this.boundingBox=l.clone());const u=e.boundingSphere;return null!==u&&(this.boundingSphere=u.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const IN=new ea,t0=new VE,$E=new OA,PN=new kt,gw=new kt,_w=new kt,yw=new kt,B5=new kt,XE=new kt,KE=new qi,YE=new qi,ZE=new qi,FN=new kt,RN=new kt,kN=new kt,JE=new kt,e3=new kt;class Ua extends Tc{constructor(e=new bo,t=new Ah){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const n=this.geometry,s=n.morphAttributes.position,a=n.morphTargetsRelative;t.fromBufferAttribute(n.attributes.position,e);const l=this.morphTargetInfluences;if(s&&l){XE.set(0,0,0);for(let u=0,d=s.length;u<d;u++){const A=l[u];0!==A&&(B5.fromBufferAttribute(s[u],e),XE.addScaledVector(a?B5:B5.sub(t),A))}t.add(XE)}return t}raycast(e,t){const n=this.geometry,s=this.matrixWorld;void 0!==this.material&&(null===n.boundingSphere&&n.computeBoundingSphere(),$E.copy(n.boundingSphere),$E.applyMatrix4(s),t0.copy(e.ray).recast(e.near),(!1!==$E.containsPoint(t0.origin)||!(null===t0.intersectSphere($E,PN)||t0.origin.distanceToSquared(PN)>(e.far-e.near)**2))&&(IN.copy(s).invert(),t0.copy(e.ray).applyMatrix4(IN),(null===n.boundingBox||!1!==t0.intersectsBox(n.boundingBox))&&this._computeIntersections(e,t)))}_computeIntersections(e,t){let n;const r=this.geometry,s=this.material,a=r.index,l=r.attributes.position,u=r.attributes.uv,d=r.attributes.uv1,A=r.attributes.normal,y=r.groups,C=r.drawRange;if(null!==a)if(Array.isArray(s))for(let k=0,Q=y.length;k<Q;k++){const se=y[k],he=s[se.materialIndex];for(let be=Math.max(se.start,C.start),Ye=Math.min(a.count,Math.min(se.start+se.count,C.start+C.count));be<Ye;be+=3){const dt=a.getX(be),xt=a.getX(be+1),$t=a.getX(be+2);n=t3(this,he,e,t0,u,d,A,dt,xt,$t),n&&(n.faceIndex=Math.floor(be/3),n.face.materialIndex=se.materialIndex,t.push(n))}}else for(let se=Math.max(0,C.start),he=Math.min(a.count,C.start+C.count);se<he;se+=3){const re=a.getX(se),Le=a.getX(se+1),be=a.getX(se+2);n=t3(this,s,e,t0,u,d,A,re,Le,be),n&&(n.faceIndex=Math.floor(se/3),t.push(n))}else if(void 0!==l)if(Array.isArray(s))for(let k=0,Q=y.length;k<Q;k++){const se=y[k],he=s[se.materialIndex];for(let be=Math.max(se.start,C.start),Ye=Math.min(l.count,Math.min(se.start+se.count,C.start+C.count));be<Ye;be+=3)n=t3(this,he,e,t0,u,d,A,be,be+1,be+2),n&&(n.faceIndex=Math.floor(be/3),n.face.materialIndex=se.materialIndex,t.push(n))}else for(let se=Math.max(0,C.start),he=Math.min(l.count,C.start+C.count);se<he;se+=3)n=t3(this,s,e,t0,u,d,A,se,se+1,se+2),n&&(n.faceIndex=Math.floor(se/3),t.push(n))}}function t3(i,e,t,n,r,s,a,l,u,d){i.getVertexPosition(l,gw),i.getVertexPosition(u,_w),i.getVertexPosition(d,yw);const A=function nJ(i,e,t,n,r,s,a,l){let u;if(u=e.side===cp?n.intersectTriangle(a,s,r,!0,l):n.intersectTriangle(r,s,a,e.side===Yg,l),null===u)return null;e3.copy(l),e3.applyMatrix4(i.matrixWorld);const d=t.ray.origin.distanceTo(e3);return d<t.near||d>t.far?null:{distance:d,point:e3.clone(),object:i}}(i,e,t,n,gw,_w,yw,JE);if(A){r&&(KE.fromBufferAttribute(r,l),YE.fromBufferAttribute(r,u),ZE.fromBufferAttribute(r,d),A.uv=up.getInterpolation(JE,gw,_w,yw,KE,YE,ZE,new qi)),s&&(KE.fromBufferAttribute(s,l),YE.fromBufferAttribute(s,u),ZE.fromBufferAttribute(s,d),A.uv1=up.getInterpolation(JE,gw,_w,yw,KE,YE,ZE,new qi),A.uv2=A.uv1),a&&(FN.fromBufferAttribute(a,l),RN.fromBufferAttribute(a,u),kN.fromBufferAttribute(a,d),A.normal=up.getInterpolation(JE,gw,_w,yw,FN,RN,kN,new kt),A.normal.dot(n.direction)>0&&A.normal.multiplyScalar(-1));const y={a:l,b:u,c:d,normal:new kt,materialIndex:0};up.getNormal(gw,_w,yw,y.normal),A.face=y}return A}class Lm extends bo{constructor(e=1,t=1,n=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:a};const l=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const u=[],d=[],A=[],y=[];let C=0,k=0;function Q(se,he,re,Le,be,Ye,dt,xt,$t,nn,gt){const Wt=Ye/$t,Nn=dt/nn,yi=Ye/2,Rn=dt/2,kn=xt/2,li=$t+1,Wn=nn+1;let ni=0,si=0;const Ei=new kt;for(let Ki=0;Ki<Wn;Ki++){const Zr=Ki*Nn-Rn;for(let Hr=0;Hr<li;Hr++)Ei[se]=(Hr*Wt-yi)*Le,Ei[he]=Zr*be,Ei[re]=kn,d.push(Ei.x,Ei.y,Ei.z),Ei[se]=0,Ei[he]=0,Ei[re]=xt>0?1:-1,A.push(Ei.x,Ei.y,Ei.z),y.push(Hr/$t),y.push(1-Ki/nn),ni+=1}for(let Ki=0;Ki<nn;Ki++)for(let Zr=0;Zr<$t;Zr++){const Ci=C+Zr+li*(Ki+1),Ii=C+(Zr+1)+li*(Ki+1),jr=C+(Zr+1)+li*Ki;u.push(C+Zr+li*Ki,Ci,jr),u.push(Ci,Ii,jr),si+=6}l.addGroup(k,si,gt),k+=si,C+=ni}Q("z","y","x",-1,-1,n,t,e,a,s,0),Q("z","y","x",1,-1,n,t,-e,a,s,1),Q("x","z","y",1,1,e,n,t,r,a,2),Q("x","z","y",1,-1,e,n,-t,r,a,3),Q("x","y","z",1,-1,e,t,n,r,s,4),Q("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(u),this.setAttribute("position",new Fs(d,3)),this.setAttribute("normal",new Fs(A,3)),this.setAttribute("uv",new Fs(y,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lm(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function vw(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():e[t][n]=Array.isArray(r)?r.slice():r}}return e}function Tf(i){const e={};for(let t=0;t<i.length;t++){const n=vw(i[t]);for(const r in n)e[r]=n[r]}return e}function ON(i){return null===i.getRenderTarget()?i.outputColorSpace:Pm}const I5={clone:vw,merge:Tf};class yd extends Jc{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vw(e.uniforms),this.uniformsGroups=function iJ(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;t.uniforms[r]=a&&a.isTexture?{type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?{type:"c",value:a.getHex()}:a&&a.isVector2?{type:"v2",value:a.toArray()}:a&&a.isVector3?{type:"v3",value:a.toArray()}:a&&a.isVector4?{type:"v4",value:a.toArray()}:a&&a.isMatrix3?{type:"m3",value:a.toArray()}:a&&a.isMatrix4?{type:"m4",value:a.toArray()}:{value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class P5 extends Tc{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ea,this.projectionMatrix=new ea,this.projectionMatrixInverse=new ea}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class Lh extends P5{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*rw*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*$v*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*rw*Math.atan(Math.tan(.5*$v*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*$v*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const a=this.view;if(null!==this.view&&this.view.enabled){const u=a.fullWidth,d=a.fullHeight;s+=a.offsetX*r/u,t-=a.offsetY*n/d,r*=a.width/u,n*=a.height/d}const l=this.filmOffset;0!==l&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class oJ extends Tc{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const r=new Lh(-90,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new Lh(-90,1,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const a=new Lh(-90,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);const l=new Lh(-90,1,e,t);l.layers=this.layers,l.up.set(0,0,1),l.lookAt(0,-1,0),this.add(l);const u=new Lh(-90,1,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,1),this.add(u);const d=new Lh(-90,1,e,t);d.layers=this.layers,d.up.set(0,1,0),d.lookAt(0,0,-1),this.add(d)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[r,s,a,l,u,d]=this.children,A=e.getRenderTarget(),y=e.toneMapping,C=e.xr.enabled;e.toneMapping=I_,e.xr.enabled=!1;const k=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,r),e.setRenderTarget(n,1),e.render(t,s),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,l),e.setRenderTarget(n,4),e.render(t,u),n.texture.generateMipmaps=k,e.setRenderTarget(n,5),e.render(t,d),e.setRenderTarget(A),e.toneMapping=y,e.xr.enabled=C,n.texture.needsPMREMUpdate=!0}}class n3 extends kA{constructor(e,t,n,r,s,a,l,u,d,A){super(e=void 0!==e?e:[],t=void 0!==t?t:Uv,n,r,s,a,l,u,d,A),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class aJ extends Sf{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];void 0!==t.encoding&&(QM("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Qv?Jo:oy),this.texture=new n3(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Zc}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n_uniforms={tEquirect:{value:null}},n_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",r=new Lm(5,5,5),s=new yd({name:"CubemapFromEquirect",uniforms:vw(n_uniforms),vertexShader:n_vertexShader,fragmentShader:n_fragmentShader,side:cp,blending:Zg});s.uniforms.tEquirect.value=t;const a=new Ua(r,s),l=t.minFilter;return t.minFilter===Jg&&(t.minFilter=Zc),new oJ(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,n,r);e.setRenderTarget(s)}}const F5=new kt,lJ=new kt,cJ=new Ka;class Nm{constructor(e=new kt(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=F5.subVectors(n,t).cross(lJ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(F5),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||cJ.getNormalMatrix(e),r=this.coplanarPoint(F5).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Zv=new OA,r3=new kt;class R5{constructor(e=new Nm,t=new Nm,n=new Nm,r=new Nm,s=new Nm,a=new Nm){this.planes=[e,t,n,r,s,a]}set(e,t,n,r,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(a),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,r=n[0],s=n[1],a=n[2],l=n[3],u=n[4],d=n[5],A=n[6],y=n[7],C=n[8],k=n[9],Q=n[10],se=n[11],he=n[12],re=n[13],Le=n[14],be=n[15];return t[0].setComponents(l-r,y-u,se-C,be-he).normalize(),t[1].setComponents(l+r,y+u,se+C,be+he).normalize(),t[2].setComponents(l+s,y+d,se+k,be+re).normalize(),t[3].setComponents(l-s,y-d,se-k,be-re).normalize(),t[4].setComponents(l-a,y-A,se-Q,be-Le).normalize(),t[5].setComponents(l+a,y+A,se+Q,be+Le).normalize(),this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Zv.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Zv.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Zv)}intersectsSprite(e){return Zv.center.set(0,0,0),Zv.radius=.7071067811865476,Zv.applyMatrix4(e.matrixWorld),this.intersectsSphere(Zv)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(r3.x=r.normal.x>0?e.max.x:e.min.x,r3.y=r.normal.y>0?e.max.y:e.min.y,r3.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(r3)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function LN(){let i=null,e=!1,t=null,n=null;function r(s,a){t(s,a),n=i.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==t&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function uJ(i,e){const t=e.isWebGL2,n=new WeakMap;return{get:function a(d){return d.isInterleavedBufferAttribute&&(d=d.data),n.get(d)},remove:function l(d){d.isInterleavedBufferAttribute&&(d=d.data);const A=n.get(d);A&&(i.deleteBuffer(A.buffer),n.delete(d))},update:function u(d,A){if(d.isGLBufferAttribute){const C=n.get(d);return void((!C||C.version<d.version)&&n.set(d,{buffer:d.buffer,type:d.type,bytesPerElement:d.elementSize,version:d.version}))}d.isInterleavedBufferAttribute&&(d=d.data);const y=n.get(d);void 0===y?n.set(d,function r(d,A){const y=d.array,C=d.usage,k=i.createBuffer();let Q;if(i.bindBuffer(A,k),i.bufferData(A,y,C),d.onUploadCallback(),y instanceof Float32Array)Q=i.FLOAT;else if(y instanceof Uint16Array)if(d.isFloat16BufferAttribute){if(!t)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");Q=i.HALF_FLOAT}else Q=i.UNSIGNED_SHORT;else if(y instanceof Int16Array)Q=i.SHORT;else if(y instanceof Uint32Array)Q=i.UNSIGNED_INT;else if(y instanceof Int32Array)Q=i.INT;else if(y instanceof Int8Array)Q=i.BYTE;else if(y instanceof Uint8Array)Q=i.UNSIGNED_BYTE;else{if(!(y instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+y);Q=i.UNSIGNED_BYTE}return{buffer:k,type:Q,bytesPerElement:y.BYTES_PER_ELEMENT,version:d.version}}(d,A)):y.version<d.version&&(function s(d,A,y){const C=A.array,k=A.updateRange;i.bindBuffer(y,d),-1===k.count?i.bufferSubData(y,0,C):(t?i.bufferSubData(y,k.offset*C.BYTES_PER_ELEMENT,C,k.offset,k.count):i.bufferSubData(y,k.offset*C.BYTES_PER_ELEMENT,C.subarray(k.offset,k.offset+k.count)),k.count=-1),A.onUploadCallback()}(y.buffer,d,A),y.version=d.version)}}}class s3 extends bo{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,a=t/2,l=Math.floor(n),u=Math.floor(r),d=l+1,A=u+1,y=e/l,C=t/u,k=[],Q=[],se=[],he=[];for(let re=0;re<A;re++){const Le=re*C-a;for(let be=0;be<d;be++)Q.push(be*y-s,-Le,0),se.push(0,0,1),he.push(be/l),he.push(1-re/u)}for(let re=0;re<u;re++)for(let Le=0;Le<l;Le++){const Ye=Le+d*(re+1),dt=Le+1+d*(re+1),xt=Le+1+d*re;k.push(Le+d*re,Ye,xt),k.push(Ye,dt,xt)}this.setIndex(k),this.setAttribute("position",new Fs(Q,3)),this.setAttribute("normal",new Fs(se,3)),this.setAttribute("uv",new Fs(he,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new s3(e.width,e.height,e.widthSegments,e.heightSegments)}}const Aa={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},gs={common:{diffuse:{value:new Ir(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ka},alphaMap:{value:null},alphaMapTransform:{value:new Ka},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ka}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ka}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ka}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ka},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ka},normalScale:{value:new qi(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ka},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ka}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ka}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ka}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ir(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ir(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ka}},sprite:{diffuse:{value:new Ir(16777215)},opacity:{value:1},center:{value:new qi(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ka},alphaMap:{value:null},alphaTest:{value:0}}},n0={basic:{uniforms:Tf([gs.common,gs.specularmap,gs.envmap,gs.aomap,gs.lightmap,gs.fog]),vertexShader:Aa.meshbasic_vert,fragmentShader:Aa.meshbasic_frag},lambert:{uniforms:Tf([gs.common,gs.specularmap,gs.envmap,gs.aomap,gs.lightmap,gs.emissivemap,gs.bumpmap,gs.normalmap,gs.displacementmap,gs.fog,gs.lights,{emissive:{value:new Ir(0)}}]),vertexShader:Aa.meshlambert_vert,fragmentShader:Aa.meshlambert_frag},phong:{uniforms:Tf([gs.common,gs.specularmap,gs.envmap,gs.aomap,gs.lightmap,gs.emissivemap,gs.bumpmap,gs.normalmap,gs.displacementmap,gs.fog,gs.lights,{emissive:{value:new Ir(0)},specular:{value:new Ir(1118481)},shininess:{value:30}}]),vertexShader:Aa.meshphong_vert,fragmentShader:Aa.meshphong_frag},standard:{uniforms:Tf([gs.common,gs.envmap,gs.aomap,gs.lightmap,gs.emissivemap,gs.bumpmap,gs.normalmap,gs.displacementmap,gs.roughnessmap,gs.metalnessmap,gs.fog,gs.lights,{emissive:{value:new Ir(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Aa.meshphysical_vert,fragmentShader:Aa.meshphysical_frag},toon:{uniforms:Tf([gs.common,gs.aomap,gs.lightmap,gs.emissivemap,gs.bumpmap,gs.normalmap,gs.displacementmap,gs.gradientmap,gs.fog,gs.lights,{emissive:{value:new Ir(0)}}]),vertexShader:Aa.meshtoon_vert,fragmentShader:Aa.meshtoon_frag},matcap:{uniforms:Tf([gs.common,gs.bumpmap,gs.normalmap,gs.displacementmap,gs.fog,{matcap:{value:null}}]),vertexShader:Aa.meshmatcap_vert,fragmentShader:Aa.meshmatcap_frag},points:{uniforms:Tf([gs.points,gs.fog]),vertexShader:Aa.points_vert,fragmentShader:Aa.points_frag},dashed:{uniforms:Tf([gs.common,gs.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Aa.linedashed_vert,fragmentShader:Aa.linedashed_frag},depth:{uniforms:Tf([gs.common,gs.displacementmap]),vertexShader:Aa.depth_vert,fragmentShader:Aa.depth_frag},normal:{uniforms:Tf([gs.common,gs.bumpmap,gs.normalmap,gs.displacementmap,{opacity:{value:1}}]),vertexShader:Aa.meshnormal_vert,fragmentShader:Aa.meshnormal_frag},sprite:{uniforms:Tf([gs.sprite,gs.fog]),vertexShader:Aa.sprite_vert,fragmentShader:Aa.sprite_frag},background:{uniforms:{uvTransform:{value:new Ka},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Aa.background_vert,fragmentShader:Aa.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Aa.backgroundCube_vert,fragmentShader:Aa.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Aa.cube_vert,fragmentShader:Aa.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Aa.equirect_vert,fragmentShader:Aa.equirect_frag},distanceRGBA:{uniforms:Tf([gs.common,gs.displacementmap,{referencePosition:{value:new kt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Aa.distanceRGBA_vert,fragmentShader:Aa.distanceRGBA_frag},shadow:{uniforms:Tf([gs.lights,gs.fog,{color:{value:new Ir(0)},opacity:{value:1}}]),vertexShader:Aa.shadow_vert,fragmentShader:Aa.shadow_frag}};n0.physical={uniforms:Tf([n0.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ka},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ka},clearcoatNormalScale:{value:new qi(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ka},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ka},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ka},sheen:{value:0},sheenColor:{value:new Ir(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ka},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ka},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ka},transmissionSamplerSize:{value:new qi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ka},attenuationDistance:{value:0},attenuationColor:{value:new Ir(0)},specularColor:{value:new Ir(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ka},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ka}}]),vertexShader:Aa.meshphysical_vert,fragmentShader:Aa.meshphysical_frag};const o3={r:0,b:0,g:0};function ote(i,e,t,n,r,s,a){const l=new Ir(0);let d,A,u=!0===s?0:1,y=null,C=0,k=null;function se(he,re){he.getRGB(o3,ON(i)),n.buffers.color.setClear(o3.r,o3.g,o3.b,re,a)}return{getClearColor:function(){return l},setClearColor:function(he,re=1){l.set(he),u=re,se(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(he){u=he,se(l,u)},render:function Q(he,re){let Le=!1,be=!0===re.isScene?re.background:null;switch(be&&be.isTexture&&(be=(re.backgroundBlurriness>0?t:e).get(be)),null===be?se(l,u):be&&be.isColor&&(se(be,1),Le=!0),i.xr.getEnvironmentBlendMode()){case"opaque":Le=!0;break;case"additive":n.buffers.color.setClear(0,0,0,1,a),Le=!0;break;case"alpha-blend":n.buffers.color.setClear(0,0,0,0,a),Le=!0}(i.autoClear||Le)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),be&&(be.isCubeTexture||be.mapping===zM)?(void 0===A&&(A=new Ua(new Lm(1,1,1),new yd({name:"BackgroundCubeMaterial",uniforms:vw(n0.backgroundCube.uniforms),vertexShader:n0.backgroundCube.vertexShader,fragmentShader:n0.backgroundCube.fragmentShader,side:cp,depthTest:!1,depthWrite:!1,fog:!1})),A.geometry.deleteAttribute("normal"),A.geometry.deleteAttribute("uv"),A.onBeforeRender=function(xt,$t,nn){this.matrixWorld.copyPosition(nn.matrixWorld)},Object.defineProperty(A.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(A)),A.material.uniforms.envMap.value=be,A.material.uniforms.flipEnvMap.value=be.isCubeTexture&&!1===be.isRenderTargetTexture?-1:1,A.material.uniforms.backgroundBlurriness.value=re.backgroundBlurriness,A.material.uniforms.backgroundIntensity.value=re.backgroundIntensity,A.material.toneMapped=be.colorSpace!==Jo,(y!==be||C!==be.version||k!==i.toneMapping)&&(A.material.needsUpdate=!0,y=be,C=be.version,k=i.toneMapping),A.layers.enableAll(),he.unshift(A,A.geometry,A.material,0,0,null)):be&&be.isTexture&&(void 0===d&&(d=new Ua(new s3(2,2),new yd({name:"BackgroundMaterial",uniforms:vw(n0.background.uniforms),vertexShader:n0.background.vertexShader,fragmentShader:n0.background.fragmentShader,side:Yg,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),Object.defineProperty(d.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(d)),d.material.uniforms.t2D.value=be,d.material.uniforms.backgroundIntensity.value=re.backgroundIntensity,d.material.toneMapped=be.colorSpace!==Jo,!0===be.matrixAutoUpdate&&be.updateMatrix(),d.material.uniforms.uvTransform.value.copy(be.matrix),(y!==be||C!==be.version||k!==i.toneMapping)&&(d.material.needsUpdate=!0,y=be,C=be.version,k=i.toneMapping),d.layers.enableAll(),he.unshift(d,d.geometry,d.material,0,0,null))}}}function ate(i,e,t,n){const r=i.getParameter(i.MAX_VERTEX_ATTRIBS),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),a=n.isWebGL2||null!==s,l={},u=he(null);let d=u,A=!1;function k(kn){return n.isWebGL2?i.bindVertexArray(kn):s.bindVertexArrayOES(kn)}function Q(kn){return n.isWebGL2?i.deleteVertexArray(kn):s.deleteVertexArrayOES(kn)}function he(kn){const li=[],Wn=[],ni=[];for(let si=0;si<r;si++)li[si]=0,Wn[si]=0,ni[si]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:li,enabledAttributes:Wn,attributeDivisors:ni,object:kn,attributes:{},index:null}}function be(){const kn=d.newAttributes;for(let li=0,Wn=kn.length;li<Wn;li++)kn[li]=0}function Ye(kn){dt(kn,0)}function dt(kn,li){const ni=d.enabledAttributes,si=d.attributeDivisors;d.newAttributes[kn]=1,0===ni[kn]&&(i.enableVertexAttribArray(kn),ni[kn]=1),si[kn]!==li&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](kn,li),si[kn]=li)}function xt(){const kn=d.newAttributes,li=d.enabledAttributes;for(let Wn=0,ni=li.length;Wn<ni;Wn++)li[Wn]!==kn[Wn]&&(i.disableVertexAttribArray(Wn),li[Wn]=0)}function $t(kn,li,Wn,ni,si,Ei){!0!==n.isWebGL2||Wn!==i.INT&&Wn!==i.UNSIGNED_INT?i.vertexAttribPointer(kn,li,Wn,ni,si,Ei):i.vertexAttribIPointer(kn,li,Wn,si,Ei)}function yi(){Rn(),A=!0,d!==u&&(d=u,k(d.object))}function Rn(){u.geometry=null,u.program=null,u.wireframe=!1}return{setup:function y(kn,li,Wn,ni,si){let Ei=!1;if(a){const Ki=function se(kn,li,Wn){const ni=!0===Wn.wireframe;let si=l[kn.id];void 0===si&&(si={},l[kn.id]=si);let Ei=si[li.id];void 0===Ei&&(Ei={},si[li.id]=Ei);let Ki=Ei[ni];return void 0===Ki&&(Ki=he(function C(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}()),Ei[ni]=Ki),Ki}(ni,Wn,li);d!==Ki&&(d=Ki,k(d.object)),Ei=function re(kn,li,Wn,ni){const si=d.attributes,Ei=li.attributes;let Ki=0;const Zr=Wn.getAttributes();for(const Hr in Zr)if(Zr[Hr].location>=0){const Ii=si[Hr];let jr=Ei[Hr];if(void 0===jr&&("instanceMatrix"===Hr&&kn.instanceMatrix&&(jr=kn.instanceMatrix),"instanceColor"===Hr&&kn.instanceColor&&(jr=kn.instanceColor)),void 0===Ii||Ii.attribute!==jr||jr&&Ii.data!==jr.data)return!0;Ki++}return d.attributesNum!==Ki||d.index!==ni}(kn,ni,Wn,si),Ei&&function Le(kn,li,Wn,ni){const si={},Ei=li.attributes;let Ki=0;const Zr=Wn.getAttributes();for(const Hr in Zr)if(Zr[Hr].location>=0){let Ii=Ei[Hr];void 0===Ii&&("instanceMatrix"===Hr&&kn.instanceMatrix&&(Ii=kn.instanceMatrix),"instanceColor"===Hr&&kn.instanceColor&&(Ii=kn.instanceColor));const jr={};jr.attribute=Ii,Ii&&Ii.data&&(jr.data=Ii.data),si[Hr]=jr,Ki++}d.attributes=si,d.attributesNum=Ki,d.index=ni}(kn,ni,Wn,si)}else{const Ki=!0===li.wireframe;(d.geometry!==ni.id||d.program!==Wn.id||d.wireframe!==Ki)&&(d.geometry=ni.id,d.program=Wn.id,d.wireframe=Ki,Ei=!0)}null!==si&&t.update(si,i.ELEMENT_ARRAY_BUFFER),(Ei||A)&&(A=!1,function nn(kn,li,Wn,ni){if(!1===n.isWebGL2&&(kn.isInstancedMesh||ni.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;be();const si=ni.attributes,Ei=Wn.getAttributes(),Ki=li.defaultAttributeValues;for(const Zr in Ei){const Hr=Ei[Zr];if(Hr.location>=0){let Ci=si[Zr];if(void 0===Ci&&("instanceMatrix"===Zr&&kn.instanceMatrix&&(Ci=kn.instanceMatrix),"instanceColor"===Zr&&kn.instanceColor&&(Ci=kn.instanceColor)),void 0!==Ci){const Ii=Ci.normalized,jr=Ci.itemSize,Jr=t.get(Ci);if(void 0===Jr)continue;const Bn=Jr.buffer,io=Jr.type,qs=Jr.bytesPerElement;if(Ci.isInterleavedBufferAttribute){const Br=Ci.data,Ls=Br.stride,Tr=Ci.offset;if(Br.isInstancedInterleavedBuffer){for(let ar=0;ar<Hr.locationSize;ar++)dt(Hr.location+ar,Br.meshPerAttribute);!0!==kn.isInstancedMesh&&void 0===ni._maxInstanceCount&&(ni._maxInstanceCount=Br.meshPerAttribute*Br.count)}else for(let ar=0;ar<Hr.locationSize;ar++)Ye(Hr.location+ar);i.bindBuffer(i.ARRAY_BUFFER,Bn);for(let ar=0;ar<Hr.locationSize;ar++)$t(Hr.location+ar,jr/Hr.locationSize,io,Ii,Ls*qs,(Tr+jr/Hr.locationSize*ar)*qs)}else{if(Ci.isInstancedBufferAttribute){for(let Br=0;Br<Hr.locationSize;Br++)dt(Hr.location+Br,Ci.meshPerAttribute);!0!==kn.isInstancedMesh&&void 0===ni._maxInstanceCount&&(ni._maxInstanceCount=Ci.meshPerAttribute*Ci.count)}else for(let Br=0;Br<Hr.locationSize;Br++)Ye(Hr.location+Br);i.bindBuffer(i.ARRAY_BUFFER,Bn);for(let Br=0;Br<Hr.locationSize;Br++)$t(Hr.location+Br,jr/Hr.locationSize,io,Ii,jr*qs,jr/Hr.locationSize*Br*qs)}}else if(void 0!==Ki){const Ii=Ki[Zr];if(void 0!==Ii)switch(Ii.length){case 2:i.vertexAttrib2fv(Hr.location,Ii);break;case 3:i.vertexAttrib3fv(Hr.location,Ii);break;case 4:i.vertexAttrib4fv(Hr.location,Ii);break;default:i.vertexAttrib1fv(Hr.location,Ii)}}}}xt()}(kn,li,Wn,ni),null!==si&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(si).buffer))},reset:yi,resetDefaultState:Rn,dispose:function gt(){yi();for(const kn in l){const li=l[kn];for(const Wn in li){const ni=li[Wn];for(const si in ni)Q(ni[si].object),delete ni[si];delete li[Wn]}delete l[kn]}},releaseStatesOfGeometry:function Wt(kn){if(void 0===l[kn.id])return;const li=l[kn.id];for(const Wn in li){const ni=li[Wn];for(const si in ni)Q(ni[si].object),delete ni[si];delete li[Wn]}delete l[kn.id]},releaseStatesOfProgram:function Nn(kn){for(const li in l){const Wn=l[li];if(void 0===Wn[kn.id])continue;const ni=Wn[kn.id];for(const si in ni)Q(ni[si].object),delete ni[si];delete Wn[kn.id]}},initAttributes:be,enableAttribute:Ye,disableUnusedAttributes:xt}}function lte(i,e,t,n){const r=n.isWebGL2;let s;this.setMode=function a(d){s=d},this.render=function l(d,A){i.drawArrays(s,d,A),t.update(A,s,1)},this.renderInstances=function u(d,A,y){if(0===y)return;let C,k;if(r)C=i,k="drawArraysInstanced";else if(C=e.get("ANGLE_instanced_arrays"),k="drawArraysInstancedANGLE",null===C)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");C[k](s,d,A,y),t.update(A,s,y)}}function cte(i,e,t){let n;function s($t){if("highp"===$t){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";$t="mediump"}return"mediump"===$t&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&"WebGL2RenderingContext"===i.constructor.name;let l=void 0!==t.precision?t.precision:"highp";const u=s(l);u!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",u,"instead."),l=u);const d=a||e.has("WEBGL_draw_buffers"),A=!0===t.logarithmicDepthBuffer,y=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),C=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),k=i.getParameter(i.MAX_TEXTURE_SIZE),Q=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),se=i.getParameter(i.MAX_VERTEX_ATTRIBS),he=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),re=i.getParameter(i.MAX_VARYING_VECTORS),Le=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),be=C>0,Ye=a||e.has("OES_texture_float");return{isWebGL2:a,drawBuffers:d,getMaxAnisotropy:function r(){if(void 0!==n)return n;if(!0===e.has("EXT_texture_filter_anisotropic")){const $t=e.get("EXT_texture_filter_anisotropic");n=i.getParameter($t.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:s,precision:l,logarithmicDepthBuffer:A,maxTextures:y,maxVertexTextures:C,maxTextureSize:k,maxCubemapSize:Q,maxAttributes:se,maxVertexUniforms:he,maxVaryings:re,maxFragmentUniforms:Le,vertexTextures:be,floatFragmentTextures:Ye,floatVertexTextures:be&&Ye,maxSamples:a?i.getParameter(i.MAX_SAMPLES):0}}function ute(i){const e=this;let t=null,n=0,r=!1,s=!1;const a=new Nm,l=new Ka,u={value:null,needsUpdate:!1};function A(y,C,k,Q){const se=null!==y?y.length:0;let he=null;if(0!==se){if(he=u.value,!0!==Q||null===he){const re=k+4*se,Le=C.matrixWorldInverse;l.getNormalMatrix(Le),(null===he||he.length<re)&&(he=new Float32Array(re));for(let be=0,Ye=k;be!==se;++be,Ye+=4)a.copy(y[be]).applyMatrix4(Le,l),a.normal.toArray(he,Ye),he[Ye+3]=a.constant}u.value=he,u.needsUpdate=!0}return e.numPlanes=se,e.numIntersection=0,he}this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(y,C){const k=0!==y.length||C||0!==n||r;return r=C,n=y.length,k},this.beginShadows=function(){s=!0,A(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(y,C){t=A(y,C,0)},this.setState=function(y,C,k){const Q=y.clippingPlanes,se=y.clipIntersection,he=y.clipShadows,re=i.get(y);if(!r||null===Q||0===Q.length||s&&!he)s?A(null):function d(){u.value!==t&&(u.value=t,u.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}();else{const Le=s?0:n,be=4*Le;let Ye=re.clippingState||null;u.value=Ye,Ye=A(Q,C,be,k);for(let dt=0;dt!==be;++dt)Ye[dt]=t[dt];re.clippingState=Ye,this.numIntersection=se?this.numPlanes:0,this.numPlanes+=Le}}}function hte(i){let e=new WeakMap;function t(a,l){return l===PE?a.mapping=Uv:l===FE&&(a.mapping=zv),a}function r(a){const l=a.target;l.removeEventListener("dispose",r);const u=e.get(l);void 0!==u&&(e.delete(l),u.dispose())}return{get:function n(a){if(a&&a.isTexture&&!1===a.isRenderTargetTexture){const l=a.mapping;if(l===PE||l===FE){if(e.has(a))return t(e.get(a).texture,a.mapping);{const u=a.image;if(u&&u.height>0){const d=new aJ(u.height/2);return d.fromEquirectangularTexture(i,a),e.set(a,d),a.addEventListener("dispose",r),t(d.texture,a.mapping)}return null}}}return a},dispose:function s(){e=new WeakMap}}}class ww extends P5{constructor(e=-1,t=1,n=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,a=n+e,l=r+t,u=r-t;if(null!==this.view&&this.view.enabled){const d=(this.right-this.left)/this.view.fullWidth/this.zoom,A=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=d*this.view.offsetX,a=s+d*this.view.width,l-=A*this.view.offsetY,u=l-A*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,u,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const NN=[.125,.215,.35,.446,.526,.582],k5=new ww,UN=new Ir;let O5=null;const eb=(1+Math.sqrt(5))/2,Cw=1/eb,zN=[new kt(1,1,1),new kt(-1,1,1),new kt(1,1,-1),new kt(-1,1,-1),new kt(0,eb,Cw),new kt(0,eb,-Cw),new kt(Cw,0,eb),new kt(-Cw,0,eb),new kt(eb,Cw,0),new kt(-eb,Cw,0)];class HN{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){O5=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=qN(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=GN(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(O5),e.scissorTest=!1,a3(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSize(e.mapping===Uv||e.mapping===zv?0===e.image.length?16:e.image[0].width||e.image[0].image.width:e.image.width/4),O5=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Zc,minFilter:Zc,generateMipmaps:!1,type:VM,format:Vp,colorSpace:Pm,depthBuffer:!1},r=VN(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=VN(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function dte(i){const e=[],t=[],n=[];let r=i;const s=i-4+1+NN.length;for(let a=0;a<s;a++){const l=Math.pow(2,r);t.push(l);let u=1/l;a>i-4?u=NN[a-i+4-1]:0===a&&(u=0),n.push(u);const d=1/(l-2),A=-d,y=1+d,C=[A,A,y,A,y,y,A,A,y,y,A,y],k=6,Q=6,se=3,he=2,re=1,Le=new Float32Array(se*Q*k),be=new Float32Array(he*Q*k),Ye=new Float32Array(re*Q*k);for(let xt=0;xt<k;xt++){const $t=xt%3*2/3-1,nn=xt>2?0:-1;Le.set([$t,nn,0,$t+2/3,nn,0,$t+2/3,nn+1,0,$t,nn,0,$t+2/3,nn+1,0,$t,nn+1,0],se*Q*xt),be.set(C,he*Q*xt),Ye.set([xt,xt,xt,xt,xt,xt],re*Q*xt)}const dt=new bo;dt.setAttribute("position",new va(Le,se)),dt.setAttribute("uv",new va(be,he)),dt.setAttribute("faceIndex",new va(Ye,re)),e.push(dt),r>4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}(s)),this._blurMaterial=function fte(i,e,t){const n=new Float32Array(20),r=new kt(0,1,0);return new yd({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Zg,depthTest:!1,depthWrite:!1})}(s,e,t)}return r}_compileMaterial(e){const t=new Ua(this._lodPlanes[0],e);this._renderer.compile(t,k5)}_sceneToCubeUV(e,t,n,r){const l=new Lh(90,1,t,n),u=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],A=this._renderer,y=A.autoClear,C=A.toneMapping;A.getClearColor(UN),A.toneMapping=I_,A.autoClear=!1;const k=new Ah({name:"PMREM.Background",side:cp,depthWrite:!1,depthTest:!1}),Q=new Ua(new Lm,k);let se=!1;const he=e.background;he?he.isColor&&(k.color.copy(he),e.background=null,se=!0):(k.color.copy(UN),se=!0);for(let re=0;re<6;re++){const Le=re%3;0===Le?(l.up.set(0,u[re],0),l.lookAt(d[re],0,0)):1===Le?(l.up.set(0,0,u[re]),l.lookAt(0,d[re],0)):(l.up.set(0,u[re],0),l.lookAt(0,0,d[re]));const be=this._cubeSize;a3(r,Le*be,re>2?be:0,be,be),A.setRenderTarget(r),se&&A.render(Q,l),A.render(e,l)}Q.geometry.dispose(),Q.material.dispose(),A.toneMapping=C,A.autoClear=y,e.background=he}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Uv||e.mapping===zv;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=qN()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=GN());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new Ua(this._lodPlanes[0],s);s.uniforms.envMap.value=e;const u=this._cubeSize;a3(t,0,0,3*u,2*u),n.setRenderTarget(t),n.render(a,k5)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]);this._blur(e,r-1,r,s,zN[(r-1)%zN.length])}t.autoClear=n}_blur(e,t,n,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,n,r,"latitudinal",s),this._halfBlur(a,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,a,l){const u=this._renderer,d=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const y=new Ua(this._lodPlanes[r],d),C=d.uniforms,k=this._sizeLods[n]-1,Q=isFinite(s)?Math.PI/(2*k):2*Math.PI/39,se=s/Q,he=isFinite(s)?1+Math.floor(3*se):20;he>20&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${he} samples when the maximum is set to 20`);const re=[];let Le=0;for(let $t=0;$t<20;++$t){const nn=$t/se,gt=Math.exp(-nn*nn/2);re.push(gt),0===$t?Le+=gt:$t<he&&(Le+=2*gt)}for(let $t=0;$t<re.length;$t++)re[$t]=re[$t]/Le;C.envMap.value=e.texture,C.samples.value=he,C.weights.value=re,C.latitudinal.value="latitudinal"===a,l&&(C.poleAxis.value=l);const{_lodMax:be}=this;C.dTheta.value=Q,C.mipInt.value=be-n;const Ye=this._sizeLods[r];a3(t,3*Ye*(r>be-4?r-be+4:0),4*(this._cubeSize-Ye),3*Ye,2*Ye),u.setRenderTarget(t),u.render(y,k5)}}function VN(i,e,t){const n=new Sf(i,e,t);return n.texture.mapping=zM,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function a3(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function GN(){return new yd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Zg,depthTest:!1,depthWrite:!1})}function qN(){return new yd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Zg,depthTest:!1,depthWrite:!1})}function pte(i){let e=new WeakMap,t=null;function s(l){const u=l.target;u.removeEventListener("dispose",s);const d=e.get(u);void 0!==d&&(e.delete(u),d.dispose())}return{get:function n(l){if(l&&l.isTexture){const u=l.mapping,d=u===PE||u===FE,A=u===Uv||u===zv;if(d||A){if(l.isRenderTargetTexture&&!0===l.needsPMREMUpdate){l.needsPMREMUpdate=!1;let y=e.get(l);return null===t&&(t=new HN(i)),y=d?t.fromEquirectangular(l,y):t.fromCubemap(l,y),e.set(l,y),y.texture}if(e.has(l))return e.get(l).texture;{const y=l.image;if(d&&y&&y.height>0||A&&y&&function r(l){let u=0;for(let A=0;A<6;A++)void 0!==l[A]&&u++;return 6===u}(y)){null===t&&(t=new HN(i));const C=d?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,C),l.addEventListener("dispose",s),C.texture}return null}}}return l},dispose:function a(){e=new WeakMap,null!==t&&(t.dispose(),t=null)}}}function Ate(i){const e={};function t(n){if(void 0!==e[n])return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return null!==t(n)},init:function(n){n.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){const r=t(n);return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function mte(i,e,t,n){const r={},s=new WeakMap;function a(y){const C=y.target;null!==C.index&&e.remove(C.index);for(const Q in C.attributes)e.remove(C.attributes[Q]);C.removeEventListener("dispose",a),delete r[C.id];const k=s.get(C);k&&(e.remove(k),s.delete(C)),n.releaseStatesOfGeometry(C),!0===C.isInstancedBufferGeometry&&delete C._maxInstanceCount,t.memory.geometries--}function d(y){const C=[],k=y.index,Q=y.attributes.position;let se=0;if(null!==k){const Le=k.array;se=k.version;for(let be=0,Ye=Le.length;be<Ye;be+=3){const dt=Le[be+0],xt=Le[be+1],$t=Le[be+2];C.push(dt,xt,xt,$t,$t,dt)}}else{se=Q.version;for(let be=0,Ye=Q.array.length/3-1;be<Ye;be+=3){const dt=be+0,xt=be+1,$t=be+2;C.push(dt,xt,xt,$t,$t,dt)}}const he=new(pN(C)?BN:DN)(C,1);he.version=se;const re=s.get(y);re&&e.remove(re),s.set(y,he)}return{get:function l(y,C){return!0===r[C.id]||(C.addEventListener("dispose",a),r[C.id]=!0,t.memory.geometries++),C},update:function u(y){const C=y.attributes;for(const Q in C)e.update(C[Q],i.ARRAY_BUFFER);const k=y.morphAttributes;for(const Q in k){const se=k[Q];for(let he=0,re=se.length;he<re;he++)e.update(se[he],i.ARRAY_BUFFER)}},getWireframeAttribute:function A(y){const C=s.get(y);if(C){const k=y.index;null!==k&&C.version<k.version&&d(y)}else d(y);return s.get(y)}}}function gte(i,e,t,n){const r=n.isWebGL2;let s,l,u;this.setMode=function a(C){s=C},this.setIndex=function d(C){l=C.type,u=C.bytesPerElement},this.render=function A(C,k){i.drawElements(s,k,l,C*u),t.update(k,s,1)},this.renderInstances=function y(C,k,Q){if(0===Q)return;let se,he;if(r)se=i,he="drawElementsInstanced";else if(se=e.get("ANGLE_instanced_arrays"),he="drawElementsInstancedANGLE",null===se)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");se[he](s,k,l,C*u,Q),t.update(k,s,Q)}}function _te(i){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function n(s,a,l){switch(t.calls++,a){case i.TRIANGLES:t.triangles+=l*(s/3);break;case i.LINES:t.lines+=l*(s/2);break;case i.LINE_STRIP:t.lines+=l*(s-1);break;case i.LINE_LOOP:t.lines+=l*s;break;case i.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a)}}}}function yte(i,e){return i[0]-e[0]}function vte(i,e){return Math.abs(e[1])-Math.abs(i[1])}function bte(i,e,t){const n={},r=new Float32Array(8),s=new WeakMap,a=new Kl,l=[];for(let d=0;d<8;d++)l[d]=[d,0];return{update:function u(d,A,y){const C=d.morphTargetInfluences;if(!0===e.isWebGL2){const k=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,Q=void 0!==k?k.length:0;let se=s.get(A);if(void 0===se||se.count!==Q){let kn=function(){yi.dispose(),s.delete(A),A.removeEventListener("dispose",kn)};void 0!==se&&se.texture.dispose();const Le=void 0!==A.morphAttributes.position,be=void 0!==A.morphAttributes.normal,Ye=void 0!==A.morphAttributes.color,dt=A.morphAttributes.position||[],xt=A.morphAttributes.normal||[],$t=A.morphAttributes.color||[];let nn=0;!0===Le&&(nn=1),!0===be&&(nn=2),!0===Ye&&(nn=3);let gt=A.attributes.position.count*nn,Wt=1;gt>e.maxTextureSize&&(Wt=Math.ceil(gt/e.maxTextureSize),gt=e.maxTextureSize);const Nn=new Float32Array(gt*Wt*4*Q),yi=new m5(Nn,gt,Wt,Q);yi.type=sy,yi.needsUpdate=!0;const Rn=4*nn;for(let li=0;li<Q;li++){const Wn=dt[li],ni=xt[li],si=$t[li],Ei=gt*Wt*4*li;for(let Ki=0;Ki<Wn.count;Ki++){const Zr=Ki*Rn;!0===Le&&(a.fromBufferAttribute(Wn,Ki),Nn[Ei+Zr+0]=a.x,Nn[Ei+Zr+1]=a.y,Nn[Ei+Zr+2]=a.z,Nn[Ei+Zr+3]=0),!0===be&&(a.fromBufferAttribute(ni,Ki),Nn[Ei+Zr+4]=a.x,Nn[Ei+Zr+5]=a.y,Nn[Ei+Zr+6]=a.z,Nn[Ei+Zr+7]=0),!0===Ye&&(a.fromBufferAttribute(si,Ki),Nn[Ei+Zr+8]=a.x,Nn[Ei+Zr+9]=a.y,Nn[Ei+Zr+10]=a.z,Nn[Ei+Zr+11]=4===si.itemSize?a.w:1)}}se={count:Q,texture:yi,size:new qi(gt,Wt)},s.set(A,se),A.addEventListener("dispose",kn)}let he=0;for(let Le=0;Le<C.length;Le++)he+=C[Le];const re=A.morphTargetsRelative?1:1-he;y.getUniforms().setValue(i,"morphTargetBaseInfluence",re),y.getUniforms().setValue(i,"morphTargetInfluences",C),y.getUniforms().setValue(i,"morphTargetsTexture",se.texture,t),y.getUniforms().setValue(i,"morphTargetsTextureSize",se.size)}else{const k=void 0===C?0:C.length;let Q=n[A.id];if(void 0===Q||Q.length!==k){Q=[];for(let be=0;be<k;be++)Q[be]=[be,0];n[A.id]=Q}for(let be=0;be<k;be++){const Ye=Q[be];Ye[0]=be,Ye[1]=C[be]}Q.sort(vte);for(let be=0;be<8;be++)be<k&&Q[be][1]?(l[be][0]=Q[be][0],l[be][1]=Q[be][1]):(l[be][0]=Number.MAX_SAFE_INTEGER,l[be][1]=0);l.sort(yte);const se=A.morphAttributes.position,he=A.morphAttributes.normal;let re=0;for(let be=0;be<8;be++){const Ye=l[be],dt=Ye[0],xt=Ye[1];dt!==Number.MAX_SAFE_INTEGER&&xt?(se&&A.getAttribute("morphTarget"+be)!==se[dt]&&A.setAttribute("morphTarget"+be,se[dt]),he&&A.getAttribute("morphNormal"+be)!==he[dt]&&A.setAttribute("morphNormal"+be,he[dt]),r[be]=xt,re+=xt):(se&&!0===A.hasAttribute("morphTarget"+be)&&A.deleteAttribute("morphTarget"+be),he&&!0===A.hasAttribute("morphNormal"+be)&&A.deleteAttribute("morphNormal"+be),r[be]=0)}const Le=A.morphTargetsRelative?1:1-re;y.getUniforms().setValue(i,"morphTargetBaseInfluence",Le),y.getUniforms().setValue(i,"morphTargetInfluences",r)}}}}function xte(i,e,t,n){let r=new WeakMap;function l(u){const d=u.target;d.removeEventListener("dispose",l),t.remove(d.instanceMatrix),null!==d.instanceColor&&t.remove(d.instanceColor)}return{update:function s(u){const d=n.render.frame,y=e.get(u,u.geometry);return r.get(y)!==d&&(e.update(y),r.set(y,d)),u.isInstancedMesh&&(!1===u.hasEventListener("dispose",l)&&u.addEventListener("dispose",l),t.update(u.instanceMatrix,i.ARRAY_BUFFER),null!==u.instanceColor&&t.update(u.instanceColor,i.ARRAY_BUFFER)),y},dispose:function a(){r=new WeakMap}}}const QN=new kA,WN=new m5,jN=new gN,$N=new n3,XN=[],KN=[],YN=new Float32Array(16),ZN=new Float32Array(9),JN=new Float32Array(4);function Sw(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=XN[r];if(void 0===s&&(s=new Float32Array(r),XN[r]=s),0!==e){n.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=t,i[a].toArray(s,l)}return s}function mh(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function gh(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function l3(i,e){let t=KN[e];void 0===t&&(t=new Int32Array(e),KN[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function wte(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Mte(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mh(t,e))return;i.uniform2fv(this.addr,e),gh(t,e)}}function Cte(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(void 0!==e.r)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(mh(t,e))return;i.uniform3fv(this.addr,e),gh(t,e)}}function Ste(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mh(t,e))return;i.uniform4fv(this.addr,e),gh(t,e)}}function Tte(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(mh(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),gh(t,e)}else{if(mh(t,n))return;JN.set(n),i.uniformMatrix2fv(this.addr,!1,JN),gh(t,n)}}function Ete(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(mh(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),gh(t,e)}else{if(mh(t,n))return;ZN.set(n),i.uniformMatrix3fv(this.addr,!1,ZN),gh(t,n)}}function Dte(i,e){const t=this.cache,n=e.elements;if(void 0===n){if(mh(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),gh(t,e)}else{if(mh(t,n))return;YN.set(n),i.uniformMatrix4fv(this.addr,!1,YN),gh(t,n)}}function Bte(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function Ite(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mh(t,e))return;i.uniform2iv(this.addr,e),gh(t,e)}}function Pte(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(mh(t,e))return;i.uniform3iv(this.addr,e),gh(t,e)}}function Fte(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mh(t,e))return;i.uniform4iv(this.addr,e),gh(t,e)}}function Rte(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function kte(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mh(t,e))return;i.uniform2uiv(this.addr,e),gh(t,e)}}function Ote(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(mh(t,e))return;i.uniform3uiv(this.addr,e),gh(t,e)}}function Lte(i,e){const t=this.cache;if(void 0!==e.x)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mh(t,e))return;i.uniform4uiv(this.addr,e),gh(t,e)}}function Nte(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2D(e||QN,r)}function Ute(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||jN,r)}function zte(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||$N,r)}function Hte(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||WN,r)}function Gte(i,e){i.uniform1fv(this.addr,e)}function qte(i,e){const t=Sw(e,this.size,2);i.uniform2fv(this.addr,t)}function Qte(i,e){const t=Sw(e,this.size,3);i.uniform3fv(this.addr,t)}function Wte(i,e){const t=Sw(e,this.size,4);i.uniform4fv(this.addr,t)}function jte(i,e){const t=Sw(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function $te(i,e){const t=Sw(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function Xte(i,e){const t=Sw(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function Kte(i,e){i.uniform1iv(this.addr,e)}function Yte(i,e){i.uniform2iv(this.addr,e)}function Zte(i,e){i.uniform3iv(this.addr,e)}function Jte(i,e){i.uniform4iv(this.addr,e)}function ene(i,e){i.uniform1uiv(this.addr,e)}function tne(i,e){i.uniform2uiv(this.addr,e)}function nne(i,e){i.uniform3uiv(this.addr,e)}function ine(i,e){i.uniform4uiv(this.addr,e)}function rne(i,e,t){const n=this.cache,r=e.length,s=l3(t,r);mh(n,s)||(i.uniform1iv(this.addr,s),gh(n,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||QN,s[a])}function sne(i,e,t){const n=this.cache,r=e.length,s=l3(t,r);mh(n,s)||(i.uniform1iv(this.addr,s),gh(n,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||jN,s[a])}function one(i,e,t){const n=this.cache,r=e.length,s=l3(t,r);mh(n,s)||(i.uniform1iv(this.addr,s),gh(n,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||$N,s[a])}function ane(i,e,t){const n=this.cache,r=e.length,s=l3(t,r);mh(n,s)||(i.uniform1iv(this.addr,s),gh(n,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||WN,s[a])}class cne{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function Vte(i){switch(i){case 5126:return wte;case 35664:return Mte;case 35665:return Cte;case 35666:return Ste;case 35674:return Tte;case 35675:return Ete;case 35676:return Dte;case 5124:case 35670:return Bte;case 35667:case 35671:return Ite;case 35668:case 35672:return Pte;case 35669:case 35673:return Fte;case 5125:return Rte;case 36294:return kte;case 36295:return Ote;case 36296:return Lte;case 35678:case 36198:case 36298:case 36306:case 35682:return Nte;case 35679:case 36299:case 36307:return Ute;case 35680:case 36300:case 36308:case 36293:return zte;case 36289:case 36303:case 36311:case 36292:return Hte}}(t.type)}}class une{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function lne(i){switch(i){case 5126:return Gte;case 35664:return qte;case 35665:return Qte;case 35666:return Wte;case 35674:return jte;case 35675:return $te;case 35676:return Xte;case 5124:case 35670:return Kte;case 35667:case 35671:return Yte;case 35668:case 35672:return Zte;case 35669:case 35673:return Jte;case 5125:return ene;case 36294:return tne;case 36295:return nne;case 36296:return ine;case 35678:case 36198:case 36298:case 36306:case 35682:return rne;case 35679:case 36299:case 36307:return sne;case 35680:case 36300:case 36308:case 36293:return one;case 36289:case 36303:case 36311:case 36292:return ane}}(t.type)}}class hne{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const l=r[s];l.setValue(e,t[l.id],n)}}}const N5=/(\w+)(\])?(\[|\.)?/g;function e7(i,e){i.seq.push(e),i.map[e.id]=e}function dne(i,e,t){const n=i.name,r=n.length;for(N5.lastIndex=0;;){const s=N5.exec(n);let l=s[1];const d=s[3];if("]"===s[2]&&(l|=0),void 0===d||"["===d&&N5.lastIndex+2===r){e7(t,void 0===d?new cne(l,i,e):new une(l,i,e));break}{let y=t.map[l];void 0===y&&(y=new hne(l),e7(t,y)),t=y}}}class c3{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r);dne(s,e.getUniformLocation(t,s.name),this)}}setValue(e,t,n,r){const s=this.map[t];void 0!==s&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,a=t.length;s!==a;++s){const l=t[s],u=n[l.id];!1!==u.needsUpdate&&l.setValue(e,u.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&n.push(a)}return n}}function t7(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}let fne=0;function n7(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+"\n\n"+r+"\n\n"+function pne(i,e){const t=i.split("\n"),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const l=a+1;n.push(`${l===e?">":" "} ${l}: ${t[a]}`)}return n.join("\n")}(i.getShaderSource(e),a)}return r}function mne(i,e){const t=function Ane(i){switch(i){case Pm:return["Linear","( value )"];case Jo:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),["Linear","( value )"]}}(e);return"vec4 "+i+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function gne(i,e){let t;switch(e){case ZY:t="Linear";break;case JY:t="Reinhard";break;case eZ:t="OptimizedCineon";break;case tZ:t="ACESFilmic";break;case nZ:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function YM(i){return""!==i}function i7(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function r7(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const bne=/^[ \t]*#include +<([\w\d./]+)>/gm;function U5(i){return i.replace(bne,xne)}function xne(i,e){const t=Aa[e];if(void 0===t)throw new Error("Can not resolve #include <"+e+">");return U5(t)}const wne=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s7(i){return i.replace(wne,Mne)}function Mne(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function o7(i){let e="precision "+i.precision+" float;\nprecision "+i.precision+" int;";return"highp"===i.precision?e+="\n#define HIGH_PRECISION":"mediump"===i.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===i.precision&&(e+="\n#define LOW_PRECISION"),e}function Bne(i,e,t,n){const r=i.getContext(),s=t.defines;let a=t.vertexShader,l=t.fragmentShader;const u=function Cne(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===E6?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===BY?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===B_&&(e="SHADOWMAP_TYPE_VSM"),e}(t),d=function Sne(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Uv:case zv:e="ENVMAP_TYPE_CUBE";break;case zM:e="ENVMAP_TYPE_CUBE_UV"}return e}(t),A=function Tne(i){let e="ENVMAP_MODE_REFLECTION";return i.envMap&&i.envMapMode===zv&&(e="ENVMAP_MODE_REFRACTION"),e}(t),y=function Ene(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case IE:e="ENVMAP_BLENDING_MULTIPLY";break;case KY:e="ENVMAP_BLENDING_MIX";break;case YY:e="ENVMAP_BLENDING_ADD"}return e}(t),C=function Dne(i){const e=i.envMapCubeUVHeight;if(null===e)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}(t),k=t.isWebGL2?"":function _ne(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||"physical"===i.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(YM).join("\n")}(t),Q=function yne(i){const e=[];for(const t in i){const n=i[t];!1!==n&&e.push("#define "+t+" "+n)}return e.join("\n")}(s),se=r.createProgram();let he,re,Le=t.glslVersion?"#version "+t.glslVersion+"\n":"";t.isRawShaderMaterial?(he=[Q].filter(YM).join("\n"),he.length>0&&(he+="\n"),re=[k,Q].filter(YM).join("\n"),re.length>0&&(re+="\n")):(he=[o7(t),"#define SHADER_NAME "+t.shaderName,Q,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+A:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&!1===t.flatShading?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(YM).join("\n"),re=[k,o7(t),"#define SHADER_NAME "+t.shaderName,Q,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+d:"",t.envMap?"#define "+A:"",t.envMap?"#define "+y:"",C?"#define CUBEUV_TEXEL_WIDTH "+C.texelWidth:"",C?"#define CUBEUV_TEXEL_HEIGHT "+C.texelHeight:"",C?"#define CUBEUV_MAX_MIP "+C.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+u:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==I_?"#define TONE_MAPPING":"",t.toneMapping!==I_?Aa.tonemapping_pars_fragment:"",t.toneMapping!==I_?gne("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Aa.encodings_pars_fragment,mne("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"","\n"].filter(YM).join("\n")),a=U5(a),a=i7(a,t),a=r7(a,t),l=U5(l),l=i7(l,t),l=r7(l,t),a=s7(a),l=s7(l),t.isWebGL2&&!0!==t.isRawShaderMaterial&&(Le="#version 300 es\n",he=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+he,re=["#define varying in",t.glslVersion===uN?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===uN?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+re);const Ye=Le+re+l,dt=t7(r,r.VERTEX_SHADER,Le+he+a),xt=t7(r,r.FRAGMENT_SHADER,Ye);if(r.attachShader(se,dt),r.attachShader(se,xt),void 0!==t.index0AttributeName?r.bindAttribLocation(se,0,t.index0AttributeName):!0===t.morphTargets&&r.bindAttribLocation(se,0,"position"),r.linkProgram(se),i.debug.checkShaderErrors){const gt=r.getProgramInfoLog(se).trim(),Wt=r.getShaderInfoLog(dt).trim(),Nn=r.getShaderInfoLog(xt).trim();let yi=!0,Rn=!0;if(!1===r.getProgramParameter(se,r.LINK_STATUS))if(yi=!1,"function"==typeof i.debug.onShaderError)i.debug.onShaderError(r,se,dt,xt);else{const kn=n7(r,dt,"vertex"),li=n7(r,xt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(se,r.VALIDATE_STATUS)+"\n\nProgram Info Log: "+gt+"\n"+kn+"\n"+li)}else""!==gt?console.warn("THREE.WebGLProgram: Program Info Log:",gt):(""===Wt||""===Nn)&&(Rn=!1);Rn&&(this.diagnostics={runnable:yi,programLog:gt,vertexShader:{log:Wt,prefix:he},fragmentShader:{log:Nn,prefix:re}})}let $t,nn;return r.deleteShader(dt),r.deleteShader(xt),this.getUniforms=function(){return void 0===$t&&($t=new c3(r,se)),$t},this.getAttributes=function(){return void 0===nn&&(nn=function vne(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),a=s.name;let l=1;s.type===i.FLOAT_MAT2&&(l=2),s.type===i.FLOAT_MAT3&&(l=3),s.type===i.FLOAT_MAT4&&(l=4),t[a]={type:s.type,location:i.getAttribLocation(e,a),locationSize:l}}return t}(r,se)),nn},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(se),this.program=void 0},this.name=t.shaderName,this.id=fne++,this.cacheKey=e,this.usedTimes=1,this.program=se,this.vertexShader=dt,this.fragmentShader=xt,this}let Ine=0;class Pne{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.fragmentShader,r=this._getShaderStage(e.vertexShader),s=this._getShaderStage(n),a=this._getShaderCacheForMaterial(e);return!1===a.has(r)&&(a.add(r),r.usedTimes++),!1===a.has(s)&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Fne(e),t.set(e,n)),n}}class Fne{constructor(e){this.id=Ine++,this.code=e,this.usedTimes=0}}function Rne(i,e,t,n,r,s,a){const l=new w5,u=new Pne,d=[],A=r.isWebGL2,y=r.logarithmicDepthBuffer,C=r.vertexTextures;let k=r.precision;const Q={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function se(gt){return 1===gt?"uv1":2===gt?"uv2":3===gt?"uv3":"uv"}return{getParameters:function he(gt,Wt,Nn,yi,Rn){const kn=yi.fog,li=Rn.geometry,ni=(gt.isMeshStandardMaterial?t:e).get(gt.envMap||(gt.isMeshStandardMaterial?yi.environment:null)),si=ni&&ni.mapping===zM?ni.image.height:null,Ei=Q[gt.type];null!==gt.precision&&(k=r.getMaxPrecision(gt.precision),k!==gt.precision&&console.warn("THREE.WebGLProgram.getParameters:",gt.precision,"not supported, using",k,"instead."));const Ki=li.morphAttributes.position||li.morphAttributes.normal||li.morphAttributes.color,Zr=void 0!==Ki?Ki.length:0;let Ci,Ii,jr,Jr,Hr=0;if(void 0!==li.morphAttributes.position&&(Hr=1),void 0!==li.morphAttributes.normal&&(Hr=2),void 0!==li.morphAttributes.color&&(Hr=3),Ei){const lc=n0[Ei];Ci=lc.vertexShader,Ii=lc.fragmentShader}else Ci=gt.vertexShader,Ii=gt.fragmentShader,u.update(gt),jr=u.getVertexShaderID(gt),Jr=u.getFragmentShaderID(gt);const Bn=i.getRenderTarget(),io=!0===Rn.isInstancedMesh,qs=!!gt.map,Ls=!!ni,Tr=!!gt.aoMap,ar=!!gt.lightMap,Cr=!!gt.bumpMap,zs=!!gt.normalMap,hs=!!gt.displacementMap,Ho=!!gt.emissiveMap,Vo=!!gt.metalnessMap,Eo=!!gt.roughnessMap,ba=gt.clearcoat>0,yl=gt.iridescence>0,yn=gt.sheen>0,Jt=gt.transmission>0,Ni=ba&&!!gt.clearcoatMap,Rr=ba&&!!gt.clearcoatNormalMap,Vr=ba&&!!gt.clearcoatRoughnessMap,_s=yl&&!!gt.iridescenceMap,On=yl&&!!gt.iridescenceThicknessMap,mr=yn&&!!gt.sheenColorMap,Fi=yn&&!!gt.sheenRoughnessMap,xs=!!gt.specularMap,Js=!!gt.specularColorMap,xo=!!gt.specularIntensityMap,Ns=Jt&&!!gt.transmissionMap,Ao=Jt&&!!gt.thicknessMap,qa=!!gt.alphaMap,qn=!!gt.extensions,tr=!!li.attributes.uv1,Gr=!!li.attributes.uv2,Hs=!!li.attributes.uv3;return{isWebGL2:A,shaderID:Ei,shaderName:gt.type,vertexShader:Ci,fragmentShader:Ii,defines:gt.defines,customVertexShaderID:jr,customFragmentShaderID:Jr,isRawShaderMaterial:!0===gt.isRawShaderMaterial,glslVersion:gt.glslVersion,precision:k,instancing:io,instancingColor:io&&null!==Rn.instanceColor,supportsVertexTextures:C,outputColorSpace:null===Bn?i.outputColorSpace:!0===Bn.isXRRenderTarget?Bn.texture.colorSpace:Pm,map:qs,matcap:!!gt.matcap,envMap:Ls,envMapMode:Ls&&ni.mapping,envMapCubeUVHeight:si,aoMap:Tr,lightMap:ar,bumpMap:Cr,normalMap:zs,displacementMap:C&&hs,emissiveMap:Ho,normalMapObjectSpace:zs&&gt.normalMapType===wZ,normalMapTangentSpace:zs&&gt.normalMapType===Wv,metalnessMap:Vo,roughnessMap:Eo,clearcoat:ba,clearcoatMap:Ni,clearcoatNormalMap:Rr,clearcoatRoughnessMap:Vr,iridescence:yl,iridescenceMap:_s,iridescenceThicknessMap:On,sheen:yn,sheenColorMap:mr,sheenRoughnessMap:Fi,specularMap:xs,specularColorMap:Js,specularIntensityMap:xo,transmission:Jt,transmissionMap:Ns,thicknessMap:Ao,gradientMap:!!gt.gradientMap,opaque:!1===gt.transparent&&gt.blending===Nv,alphaMap:qa,alphaTest:gt.alphaTest>0,combine:gt.combine,mapUv:qs&&se(gt.map.channel),aoMapUv:Tr&&se(gt.aoMap.channel),lightMapUv:ar&&se(gt.lightMap.channel),bumpMapUv:Cr&&se(gt.bumpMap.channel),normalMapUv:zs&&se(gt.normalMap.channel),displacementMapUv:hs&&se(gt.displacementMap.channel),emissiveMapUv:Ho&&se(gt.emissiveMap.channel),metalnessMapUv:Vo&&se(gt.metalnessMap.channel),roughnessMapUv:Eo&&se(gt.roughnessMap.channel),clearcoatMapUv:Ni&&se(gt.clearcoatMap.channel),clearcoatNormalMapUv:Rr&&se(gt.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Vr&&se(gt.clearcoatRoughnessMap.channel),iridescenceMapUv:_s&&se(gt.iridescenceMap.channel),iridescenceThicknessMapUv:On&&se(gt.iridescenceThicknessMap.channel),sheenColorMapUv:mr&&se(gt.sheenColorMap.channel),sheenRoughnessMapUv:Fi&&se(gt.sheenRoughnessMap.channel),specularMapUv:xs&&se(gt.specularMap.channel),specularColorMapUv:Js&&se(gt.specularColorMap.channel),specularIntensityMapUv:xo&&se(gt.specularIntensityMap.channel),transmissionMapUv:Ns&&se(gt.transmissionMap.channel),thicknessMapUv:Ao&&se(gt.thicknessMap.channel),alphaMapUv:qa&&se(gt.alphaMap.channel),vertexTangents:zs&&!!li.attributes.tangent,vertexColors:gt.vertexColors,vertexAlphas:!0===gt.vertexColors&&!!li.attributes.color&&4===li.attributes.color.itemSize,vertexUv1s:tr,vertexUv2s:Gr,vertexUv3s:Hs,pointsUvs:!0===Rn.isPoints&&!!li.attributes.uv&&(qs||qa),fog:!!kn,useFog:!0===gt.fog,fogExp2:kn&&kn.isFogExp2,flatShading:!0===gt.flatShading,sizeAttenuation:!0===gt.sizeAttenuation,logarithmicDepthBuffer:y,skinning:!0===Rn.isSkinnedMesh,morphTargets:void 0!==li.morphAttributes.position,morphNormals:void 0!==li.morphAttributes.normal,morphColors:void 0!==li.morphAttributes.color,morphTargetsCount:Zr,morphTextureStride:Hr,numDirLights:Wt.directional.length,numPointLights:Wt.point.length,numSpotLights:Wt.spot.length,numSpotLightMaps:Wt.spotLightMap.length,numRectAreaLights:Wt.rectArea.length,numHemiLights:Wt.hemi.length,numDirLightShadows:Wt.directionalShadowMap.length,numPointLightShadows:Wt.pointShadowMap.length,numSpotLightShadows:Wt.spotShadowMap.length,numSpotLightShadowsWithMaps:Wt.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:gt.dithering,shadowMapEnabled:i.shadowMap.enabled&&Nn.length>0,shadowMapType:i.shadowMap.type,toneMapping:gt.toneMapped?i.toneMapping:I_,useLegacyLights:i.useLegacyLights,premultipliedAlpha:gt.premultipliedAlpha,doubleSided:gt.side===zd,flipSided:gt.side===cp,useDepthPacking:gt.depthPacking>=0,depthPacking:gt.depthPacking||0,index0AttributeName:gt.index0AttributeName,extensionDerivatives:qn&&!0===gt.extensions.derivatives,extensionFragDepth:qn&&!0===gt.extensions.fragDepth,extensionDrawBuffers:qn&&!0===gt.extensions.drawBuffers,extensionShaderTextureLOD:qn&&!0===gt.extensions.shaderTextureLOD,rendererExtensionFragDepth:A||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:A||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:A||n.has("EXT_shader_texture_lod"),customProgramCacheKey:gt.customProgramCacheKey()}},getProgramCacheKey:function re(gt){const Wt=[];if(gt.shaderID?Wt.push(gt.shaderID):(Wt.push(gt.customVertexShaderID),Wt.push(gt.customFragmentShaderID)),void 0!==gt.defines)for(const Nn in gt.defines)Wt.push(Nn),Wt.push(gt.defines[Nn]);return!1===gt.isRawShaderMaterial&&(function Le(gt,Wt){gt.push(Wt.precision),gt.push(Wt.outputColorSpace),gt.push(Wt.envMapMode),gt.push(Wt.envMapCubeUVHeight),gt.push(Wt.mapUv),gt.push(Wt.alphaMapUv),gt.push(Wt.lightMapUv),gt.push(Wt.aoMapUv),gt.push(Wt.bumpMapUv),gt.push(Wt.normalMapUv),gt.push(Wt.displacementMapUv),gt.push(Wt.emissiveMapUv),gt.push(Wt.metalnessMapUv),gt.push(Wt.roughnessMapUv),gt.push(Wt.clearcoatMapUv),gt.push(Wt.clearcoatNormalMapUv),gt.push(Wt.clearcoatRoughnessMapUv),gt.push(Wt.iridescenceMapUv),gt.push(Wt.iridescenceThicknessMapUv),gt.push(Wt.sheenColorMapUv),gt.push(Wt.sheenRoughnessMapUv),gt.push(Wt.specularMapUv),gt.push(Wt.specularColorMapUv),gt.push(Wt.specularIntensityMapUv),gt.push(Wt.transmissionMapUv),gt.push(Wt.thicknessMapUv),gt.push(Wt.combine),gt.push(Wt.fogExp2),gt.push(Wt.sizeAttenuation),gt.push(Wt.morphTargetsCount),gt.push(Wt.morphAttributeCount),gt.push(Wt.numDirLights),gt.push(Wt.numPointLights),gt.push(Wt.numSpotLights),gt.push(Wt.numSpotLightMaps),gt.push(Wt.numHemiLights),gt.push(Wt.numRectAreaLights),gt.push(Wt.numDirLightShadows),gt.push(Wt.numPointLightShadows),gt.push(Wt.numSpotLightShadows),gt.push(Wt.numSpotLightShadowsWithMaps),gt.push(Wt.shadowMapType),gt.push(Wt.toneMapping),gt.push(Wt.numClippingPlanes),gt.push(Wt.numClipIntersection),gt.push(Wt.depthPacking)}(Wt,gt),function be(gt,Wt){l.disableAll(),Wt.isWebGL2&&l.enable(0),Wt.supportsVertexTextures&&l.enable(1),Wt.instancing&&l.enable(2),Wt.instancingColor&&l.enable(3),Wt.matcap&&l.enable(4),Wt.envMap&&l.enable(5),Wt.normalMapObjectSpace&&l.enable(6),Wt.normalMapTangentSpace&&l.enable(7),Wt.clearcoat&&l.enable(8),Wt.iridescence&&l.enable(9),Wt.alphaTest&&l.enable(10),Wt.vertexColors&&l.enable(11),Wt.vertexAlphas&&l.enable(12),Wt.vertexUv1s&&l.enable(13),Wt.vertexUv2s&&l.enable(14),Wt.vertexUv3s&&l.enable(15),Wt.vertexTangents&&l.enable(16),gt.push(l.mask),l.disableAll(),Wt.fog&&l.enable(0),Wt.useFog&&l.enable(1),Wt.flatShading&&l.enable(2),Wt.logarithmicDepthBuffer&&l.enable(3),Wt.skinning&&l.enable(4),Wt.morphTargets&&l.enable(5),Wt.morphNormals&&l.enable(6),Wt.morphColors&&l.enable(7),Wt.premultipliedAlpha&&l.enable(8),Wt.shadowMapEnabled&&l.enable(9),Wt.useLegacyLights&&l.enable(10),Wt.doubleSided&&l.enable(11),Wt.flipSided&&l.enable(12),Wt.useDepthPacking&&l.enable(13),Wt.dithering&&l.enable(14),Wt.transmission&&l.enable(15),Wt.sheen&&l.enable(16),Wt.opaque&&l.enable(17),Wt.pointsUvs&&l.enable(18),gt.push(l.mask)}(Wt,gt),Wt.push(i.outputColorSpace)),Wt.push(gt.customProgramCacheKey),Wt.join()},getUniforms:function Ye(gt){const Wt=Q[gt.type];let Nn;return Nn=Wt?I5.clone(n0[Wt].uniforms):gt.uniforms,Nn},acquireProgram:function dt(gt,Wt){let Nn;for(let yi=0,Rn=d.length;yi<Rn;yi++){const kn=d[yi];if(kn.cacheKey===Wt){Nn=kn,++Nn.usedTimes;break}}return void 0===Nn&&(Nn=new Bne(i,Wt,gt,s),d.push(Nn)),Nn},releaseProgram:function xt(gt){if(0==--gt.usedTimes){const Wt=d.indexOf(gt);d[Wt]=d[d.length-1],d.pop(),gt.destroy()}},releaseShaderCache:function $t(gt){u.remove(gt)},programs:d,dispose:function nn(){u.dispose()}}}function kne(){let i=new WeakMap;return{get:function e(s){let a=i.get(s);return void 0===a&&(a={},i.set(s,a)),a},remove:function t(s){i.delete(s)},update:function n(s,a,l){i.get(s)[a]=l},dispose:function r(){i=new WeakMap}}}function One(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function a7(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function l7(){const i=[];let e=0;const t=[],n=[],r=[];function a(y,C,k,Q,se,he){let re=i[e];return void 0===re?(re={id:y.id,object:y,geometry:C,material:k,groupOrder:Q,renderOrder:y.renderOrder,z:se,group:he},i[e]=re):(re.id=y.id,re.object=y,re.geometry=C,re.material=k,re.groupOrder=Q,re.renderOrder=y.renderOrder,re.z=se,re.group=he),e++,re}return{opaque:t,transmissive:n,transparent:r,init:function s(){e=0,t.length=0,n.length=0,r.length=0},push:function l(y,C,k,Q,se,he){const re=a(y,C,k,Q,se,he);k.transmission>0?n.push(re):!0===k.transparent?r.push(re):t.push(re)},unshift:function u(y,C,k,Q,se,he){const re=a(y,C,k,Q,se,he);k.transmission>0?n.unshift(re):!0===k.transparent?r.unshift(re):t.unshift(re)},finish:function A(){for(let y=e,C=i.length;y<C;y++){const k=i[y];if(null===k.id)break;k.id=null,k.object=null,k.geometry=null,k.material=null,k.group=null}},sort:function d(y,C){t.length>1&&t.sort(y||One),n.length>1&&n.sort(C||a7),r.length>1&&r.sort(C||a7)}}}function Lne(){let i=new WeakMap;return{get:function e(n,r){const s=i.get(n);let a;return void 0===s?(a=new l7,i.set(n,[a])):r>=s.length?(a=new l7,s.push(a)):a=s[r],a},dispose:function t(){i=new WeakMap}}}function Nne(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new kt,color:new Ir};break;case"SpotLight":t={position:new kt,direction:new kt,color:new Ir,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new kt,color:new Ir,distance:0,decay:0};break;case"HemisphereLight":t={direction:new kt,skyColor:new Ir,groundColor:new Ir};break;case"RectAreaLight":t={color:new Ir,position:new kt,halfWidth:new kt,halfHeight:new kt}}return i[e.id]=t,t}}}let zne=0;function Hne(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function Vne(i,e){const t=new Nne,n=function Une(){const i={};return{get:function(e){if(void 0!==i[e.id])return i[e.id];let t;switch(e.type){case"DirectionalLight":case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qi};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qi,shadowCameraNear:1,shadowCameraFar:1e3}}return i[e.id]=t,t}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let A=0;A<9;A++)r.probe.push(new kt);const s=new kt,a=new ea,l=new ea;return{setup:function u(A,y){let C=0,k=0,Q=0;for(let Nn=0;Nn<9;Nn++)r.probe[Nn].set(0,0,0);let se=0,he=0,re=0,Le=0,be=0,Ye=0,dt=0,xt=0,$t=0,nn=0;A.sort(Hne);const gt=!0===y?Math.PI:1;for(let Nn=0,yi=A.length;Nn<yi;Nn++){const Rn=A[Nn],kn=Rn.color,li=Rn.intensity,Wn=Rn.distance,ni=Rn.shadow&&Rn.shadow.map?Rn.shadow.map.texture:null;if(Rn.isAmbientLight)C+=kn.r*li*gt,k+=kn.g*li*gt,Q+=kn.b*li*gt;else if(Rn.isLightProbe)for(let si=0;si<9;si++)r.probe[si].addScaledVector(Rn.sh.coefficients[si],li);else if(Rn.isDirectionalLight){const si=t.get(Rn);if(si.color.copy(Rn.color).multiplyScalar(Rn.intensity*gt),Rn.castShadow){const Ei=Rn.shadow,Ki=n.get(Rn);Ki.shadowBias=Ei.bias,Ki.shadowNormalBias=Ei.normalBias,Ki.shadowRadius=Ei.radius,Ki.shadowMapSize=Ei.mapSize,r.directionalShadow[se]=Ki,r.directionalShadowMap[se]=ni,r.directionalShadowMatrix[se]=Rn.shadow.matrix,Ye++}r.directional[se]=si,se++}else if(Rn.isSpotLight){const si=t.get(Rn);si.position.setFromMatrixPosition(Rn.matrixWorld),si.color.copy(kn).multiplyScalar(li*gt),si.distance=Wn,si.coneCos=Math.cos(Rn.angle),si.penumbraCos=Math.cos(Rn.angle*(1-Rn.penumbra)),si.decay=Rn.decay,r.spot[re]=si;const Ei=Rn.shadow;if(Rn.map&&(r.spotLightMap[$t]=Rn.map,$t++,Ei.updateMatrices(Rn),Rn.castShadow&&nn++),r.spotLightMatrix[re]=Ei.matrix,Rn.castShadow){const Ki=n.get(Rn);Ki.shadowBias=Ei.bias,Ki.shadowNormalBias=Ei.normalBias,Ki.shadowRadius=Ei.radius,Ki.shadowMapSize=Ei.mapSize,r.spotShadow[re]=Ki,r.spotShadowMap[re]=ni,xt++}re++}else if(Rn.isRectAreaLight){const si=t.get(Rn);si.color.copy(kn).multiplyScalar(li),si.halfWidth.set(.5*Rn.width,0,0),si.halfHeight.set(0,.5*Rn.height,0),r.rectArea[Le]=si,Le++}else if(Rn.isPointLight){const si=t.get(Rn);if(si.color.copy(Rn.color).multiplyScalar(Rn.intensity*gt),si.distance=Rn.distance,si.decay=Rn.decay,Rn.castShadow){const Ei=Rn.shadow,Ki=n.get(Rn);Ki.shadowBias=Ei.bias,Ki.shadowNormalBias=Ei.normalBias,Ki.shadowRadius=Ei.radius,Ki.shadowMapSize=Ei.mapSize,Ki.shadowCameraNear=Ei.camera.near,Ki.shadowCameraFar=Ei.camera.far,r.pointShadow[he]=Ki,r.pointShadowMap[he]=ni,r.pointShadowMatrix[he]=Rn.shadow.matrix,dt++}r.point[he]=si,he++}else if(Rn.isHemisphereLight){const si=t.get(Rn);si.skyColor.copy(Rn.color).multiplyScalar(li*gt),si.groundColor.copy(Rn.groundColor).multiplyScalar(li*gt),r.hemi[be]=si,be++}}Le>0&&(e.isWebGL2||!0===i.has("OES_texture_float_linear")?(r.rectAreaLTC1=gs.LTC_FLOAT_1,r.rectAreaLTC2=gs.LTC_FLOAT_2):!0===i.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=gs.LTC_HALF_1,r.rectAreaLTC2=gs.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=C,r.ambient[1]=k,r.ambient[2]=Q;const Wt=r.hash;(Wt.directionalLength!==se||Wt.pointLength!==he||Wt.spotLength!==re||Wt.rectAreaLength!==Le||Wt.hemiLength!==be||Wt.numDirectionalShadows!==Ye||Wt.numPointShadows!==dt||Wt.numSpotShadows!==xt||Wt.numSpotMaps!==$t)&&(r.directional.length=se,r.spot.length=re,r.rectArea.length=Le,r.point.length=he,r.hemi.length=be,r.directionalShadow.length=Ye,r.directionalShadowMap.length=Ye,r.pointShadow.length=dt,r.pointShadowMap.length=dt,r.spotShadow.length=xt,r.spotShadowMap.length=xt,r.directionalShadowMatrix.length=Ye,r.pointShadowMatrix.length=dt,r.spotLightMatrix.length=xt+$t-nn,r.spotLightMap.length=$t,r.numSpotLightShadowsWithMaps=nn,Wt.directionalLength=se,Wt.pointLength=he,Wt.spotLength=re,Wt.rectAreaLength=Le,Wt.hemiLength=be,Wt.numDirectionalShadows=Ye,Wt.numPointShadows=dt,Wt.numSpotShadows=xt,Wt.numSpotMaps=$t,r.version=zne++)},setupView:function d(A,y){let C=0,k=0,Q=0,se=0,he=0;const re=y.matrixWorldInverse;for(let Le=0,be=A.length;Le<be;Le++){const Ye=A[Le];if(Ye.isDirectionalLight){const dt=r.directional[C];dt.direction.setFromMatrixPosition(Ye.matrixWorld),s.setFromMatrixPosition(Ye.target.matrixWorld),dt.direction.sub(s),dt.direction.transformDirection(re),C++}else if(Ye.isSpotLight){const dt=r.spot[Q];dt.position.setFromMatrixPosition(Ye.matrixWorld),dt.position.applyMatrix4(re),dt.direction.setFromMatrixPosition(Ye.matrixWorld),s.setFromMatrixPosition(Ye.target.matrixWorld),dt.direction.sub(s),dt.direction.transformDirection(re),Q++}else if(Ye.isRectAreaLight){const dt=r.rectArea[se];dt.position.setFromMatrixPosition(Ye.matrixWorld),dt.position.applyMatrix4(re),l.identity(),a.copy(Ye.matrixWorld),a.premultiply(re),l.extractRotation(a),dt.halfWidth.set(.5*Ye.width,0,0),dt.halfHeight.set(0,.5*Ye.height,0),dt.halfWidth.applyMatrix4(l),dt.halfHeight.applyMatrix4(l),se++}else if(Ye.isPointLight){const dt=r.point[k];dt.position.setFromMatrixPosition(Ye.matrixWorld),dt.position.applyMatrix4(re),k++}else if(Ye.isHemisphereLight){const dt=r.hemi[he];dt.direction.setFromMatrixPosition(Ye.matrixWorld),dt.direction.transformDirection(re),he++}}},state:r}}function c7(i,e){const t=new Vne(i,e),n=[],r=[];return{init:function s(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:function u(y){t.setup(n,y)},setupLightsView:function d(y){t.setupView(n,y)},pushLight:function a(y){n.push(y)},pushShadow:function l(y){r.push(y)}}}function Gne(i,e){let t=new WeakMap;return{get:function n(s,a=0){const l=t.get(s);let u;return void 0===l?(u=new c7(i,e),t.set(s,[u])):a>=l.length?(u=new c7(i,e),l.push(u)):u=l[a],u},dispose:function r(){t=new WeakMap}}}class z5 extends Jc{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class u7 extends Jc{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const qne="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",Qne="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function Wne(i,e,t){let n=new R5;const r=new qi,s=new qi,a=new Kl,l=new z5({depthPacking:lN}),u=new u7,d={},A=t.maxTextureSize,y={[Yg]:cp,[cp]:Yg,[zd]:zd},C=new yd({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qi},radius:{value:4}},vertexShader:qne,fragmentShader:Qne}),k=C.clone();k.defines.HORIZONTAL_PASS=1;const Q=new bo;Q.setAttribute("position",new va(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const se=new Ua(Q,C),he=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=E6;let re=this.type;function Le(dt,xt){const $t=e.update(se);C.defines.VSM_SAMPLES!==dt.blurSamples&&(C.defines.VSM_SAMPLES=dt.blurSamples,k.defines.VSM_SAMPLES=dt.blurSamples,C.needsUpdate=!0,k.needsUpdate=!0),null===dt.mapPass&&(dt.mapPass=new Sf(r.x,r.y)),C.uniforms.shadow_pass.value=dt.map.texture,C.uniforms.resolution.value=dt.mapSize,C.uniforms.radius.value=dt.radius,i.setRenderTarget(dt.mapPass),i.clear(),i.renderBufferDirect(xt,null,$t,C,se,null),k.uniforms.shadow_pass.value=dt.mapPass.texture,k.uniforms.resolution.value=dt.mapSize,k.uniforms.radius.value=dt.radius,i.setRenderTarget(dt.map),i.clear(),i.renderBufferDirect(xt,null,$t,k,se,null)}function be(dt,xt,$t,nn){let gt=null;const Wt=!0===$t.isPointLight?dt.customDistanceMaterial:dt.customDepthMaterial;if(void 0!==Wt)gt=Wt;else if(gt=!0===$t.isPointLight?u:l,i.localClippingEnabled&&!0===xt.clipShadows&&Array.isArray(xt.clippingPlanes)&&0!==xt.clippingPlanes.length||xt.displacementMap&&0!==xt.displacementScale||xt.alphaMap&&xt.alphaTest>0||xt.map&&xt.alphaTest>0){const Nn=gt.uuid,yi=xt.uuid;let Rn=d[Nn];void 0===Rn&&(Rn={},d[Nn]=Rn);let kn=Rn[yi];void 0===kn&&(kn=gt.clone(),Rn[yi]=kn),gt=kn}return gt.visible=xt.visible,gt.wireframe=xt.wireframe,gt.side=nn===B_?null!==xt.shadowSide?xt.shadowSide:xt.side:null!==xt.shadowSide?xt.shadowSide:y[xt.side],gt.alphaMap=xt.alphaMap,gt.alphaTest=xt.alphaTest,gt.map=xt.map,gt.clipShadows=xt.clipShadows,gt.clippingPlanes=xt.clippingPlanes,gt.clipIntersection=xt.clipIntersection,gt.displacementMap=xt.displacementMap,gt.displacementScale=xt.displacementScale,gt.displacementBias=xt.displacementBias,gt.wireframeLinewidth=xt.wireframeLinewidth,gt.linewidth=xt.linewidth,!0===$t.isPointLight&&!0===gt.isMeshDistanceMaterial&&(i.properties.get(gt).light=$t),gt}function Ye(dt,xt,$t,nn,gt){if(!1===dt.visible)return;if(dt.layers.test(xt.layers)&&(dt.isMesh||dt.isLine||dt.isPoints)&&(dt.castShadow||dt.receiveShadow&&gt===B_)&&(!dt.frustumCulled||n.intersectsObject(dt))){dt.modelViewMatrix.multiplyMatrices($t.matrixWorldInverse,dt.matrixWorld);const yi=e.update(dt),Rn=dt.material;if(Array.isArray(Rn)){const kn=yi.groups;for(let li=0,Wn=kn.length;li<Wn;li++){const ni=kn[li],si=Rn[ni.materialIndex];if(si&&si.visible){const Ei=be(dt,si,nn,gt);i.renderBufferDirect($t,null,yi,Ei,dt,ni)}}}else if(Rn.visible){const kn=be(dt,Rn,nn,gt);i.renderBufferDirect($t,null,yi,kn,dt,null)}}const Nn=dt.children;for(let yi=0,Rn=Nn.length;yi<Rn;yi++)Ye(Nn[yi],xt,$t,nn,gt)}this.render=function(dt,xt,$t){if(!1===he.enabled||!1===he.autoUpdate&&!1===he.needsUpdate||0===dt.length)return;const nn=i.getRenderTarget(),gt=i.getActiveCubeFace(),Wt=i.getActiveMipmapLevel(),Nn=i.state;Nn.setBlending(Zg),Nn.buffers.color.setClear(1,1,1,1),Nn.buffers.depth.setTest(!0),Nn.setScissorTest(!1);const yi=re!==B_&&this.type===B_,Rn=re===B_&&this.type!==B_;for(let kn=0,li=dt.length;kn<li;kn++){const Wn=dt[kn],ni=Wn.shadow;if(void 0===ni){console.warn("THREE.WebGLShadowMap:",Wn,"has no shadow.");continue}if(!1===ni.autoUpdate&&!1===ni.needsUpdate)continue;r.copy(ni.mapSize);const si=ni.getFrameExtents();if(r.multiply(si),s.copy(ni.mapSize),(r.x>A||r.y>A)&&(r.x>A&&(s.x=Math.floor(A/si.x),r.x=s.x*si.x,ni.mapSize.x=s.x),r.y>A&&(s.y=Math.floor(A/si.y),r.y=s.y*si.y,ni.mapSize.y=s.y)),null===ni.map||!0===yi||!0===Rn){const Ki=this.type!==B_?{minFilter:ou,magFilter:ou}:{};null!==ni.map&&ni.map.dispose(),ni.map=new Sf(r.x,r.y,Ki),ni.map.texture.name=Wn.name+".shadowMap",ni.camera.updateProjectionMatrix()}i.setRenderTarget(ni.map),i.clear();const Ei=ni.getViewportCount();for(let Ki=0;Ki<Ei;Ki++){const Zr=ni.getViewport(Ki);a.set(s.x*Zr.x,s.y*Zr.y,s.x*Zr.z,s.y*Zr.w),Nn.viewport(a),ni.updateMatrices(Wn,Ki),n=ni.getFrustum(),Ye(xt,$t,ni.camera,Wn,this.type)}!0!==ni.isPointLightShadow&&this.type===B_&&Le(ni,$t),ni.needsUpdate=!1}re=this.type,he.needsUpdate=!1,i.setRenderTarget(nn,gt,Wt)}}function jne(i,e,t){const n=t.isWebGL2,l=new function r(){let qn=!1;const tr=new Kl;let Gr=null;const Hs=new Kl(0,0,0,0);return{setMask:function(wo){Gr!==wo&&!qn&&(i.colorMask(wo,wo,wo,wo),Gr=wo)},setLocked:function(wo){qn=wo},setClear:function(wo,lc,cc,Gd,Iy){!0===Iy&&(wo*=Gd,lc*=Gd,cc*=Gd),tr.set(wo,lc,cc,Gd),!1===Hs.equals(tr)&&(i.clearColor(wo,lc,cc,Gd),Hs.copy(tr))},reset:function(){qn=!1,Gr=null,Hs.set(-1,0,0,0)}}},u=new function s(){let qn=!1,tr=null,Gr=null,Hs=null;return{setTest:function(wo){wo?Bn(i.DEPTH_TEST):io(i.DEPTH_TEST)},setMask:function(wo){tr!==wo&&!qn&&(i.depthMask(wo),tr=wo)},setFunc:function(wo){if(Gr!==wo){switch(wo){case GY:i.depthFunc(i.NEVER);break;case qY:i.depthFunc(i.ALWAYS);break;case QY:i.depthFunc(i.LESS);break;case ZI:i.depthFunc(i.LEQUAL);break;case WY:i.depthFunc(i.EQUAL);break;case jY:i.depthFunc(i.GEQUAL);break;case $Y:i.depthFunc(i.GREATER);break;case XY:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Gr=wo}},setLocked:function(wo){qn=wo},setClear:function(wo){Hs!==wo&&(i.clearDepth(wo),Hs=wo)},reset:function(){qn=!1,tr=null,Gr=null,Hs=null}}},d=new function a(){let qn=!1,tr=null,Gr=null,Hs=null,wo=null,lc=null,cc=null,Gd=null,Iy=null;return{setTest:function(Bu){qn||(Bu?Bn(i.STENCIL_TEST):io(i.STENCIL_TEST))},setMask:function(Bu){tr!==Bu&&!qn&&(i.stencilMask(Bu),tr=Bu)},setFunc:function(Bu,WA,A0){(Gr!==Bu||Hs!==WA||wo!==A0)&&(i.stencilFunc(Bu,WA,A0),Gr=Bu,Hs=WA,wo=A0)},setOp:function(Bu,WA,A0){(lc!==Bu||cc!==WA||Gd!==A0)&&(i.stencilOp(Bu,WA,A0),lc=Bu,cc=WA,Gd=A0)},setLocked:function(Bu){qn=Bu},setClear:function(Bu){Iy!==Bu&&(i.clearStencil(Bu),Iy=Bu)},reset:function(){qn=!1,tr=null,Gr=null,Hs=null,wo=null,lc=null,cc=null,Gd=null,Iy=null}}},A=new WeakMap,y=new WeakMap;let C={},k={},Q=new WeakMap,se=[],he=null,re=!1,Le=null,be=null,Ye=null,dt=null,xt=null,$t=null,nn=null,gt=!1,Wt=null,Nn=null,yi=null,Rn=null,kn=null;const li=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Wn=!1,ni=0;const si=i.getParameter(i.VERSION);-1!==si.indexOf("WebGL")?(ni=parseFloat(/^WebGL (\d)/.exec(si)[1]),Wn=ni>=1):-1!==si.indexOf("OpenGL ES")&&(ni=parseFloat(/^OpenGL ES (\d)/.exec(si)[1]),Wn=ni>=2);let Ei=null,Ki={};const Zr=i.getParameter(i.SCISSOR_BOX),Hr=i.getParameter(i.VIEWPORT),Ci=(new Kl).fromArray(Zr),Ii=(new Kl).fromArray(Hr);function jr(qn,tr,Gr,Hs){const wo=new Uint8Array(4),lc=i.createTexture();i.bindTexture(qn,lc),i.texParameteri(qn,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(qn,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let cc=0;cc<Gr;cc++)!n||qn!==i.TEXTURE_3D&&qn!==i.TEXTURE_2D_ARRAY?i.texImage2D(tr+cc,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,wo):i.texImage3D(tr,0,i.RGBA,1,1,Hs,0,i.RGBA,i.UNSIGNED_BYTE,wo);return lc}const Jr={};function Bn(qn){!0!==C[qn]&&(i.enable(qn),C[qn]=!0)}function io(qn){!1!==C[qn]&&(i.disable(qn),C[qn]=!1)}Jr[i.TEXTURE_2D]=jr(i.TEXTURE_2D,i.TEXTURE_2D,1),Jr[i.TEXTURE_CUBE_MAP]=jr(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(Jr[i.TEXTURE_2D_ARRAY]=jr(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Jr[i.TEXTURE_3D]=jr(i.TEXTURE_3D,i.TEXTURE_3D,1,1)),l.setClear(0,0,0,1),u.setClear(1),d.setClear(0),Bn(i.DEPTH_TEST),u.setFunc(ZI),hs(!1),Ho(T6),Bn(i.CULL_FACE),Cr(Zg);const Tr={[Kx]:i.FUNC_ADD,[PY]:i.FUNC_SUBTRACT,[FY]:i.FUNC_REVERSE_SUBTRACT};if(n)Tr[I6]=i.MIN,Tr[P6]=i.MAX;else{const qn=e.get("EXT_blend_minmax");null!==qn&&(Tr[I6]=qn.MIN_EXT,Tr[P6]=qn.MAX_EXT)}const ar={[RY]:i.ZERO,[kY]:i.ONE,[OY]:i.SRC_COLOR,[F6]:i.SRC_ALPHA,[VY]:i.SRC_ALPHA_SATURATE,[zY]:i.DST_COLOR,[NY]:i.DST_ALPHA,[LY]:i.ONE_MINUS_SRC_COLOR,[R6]:i.ONE_MINUS_SRC_ALPHA,[HY]:i.ONE_MINUS_DST_COLOR,[UY]:i.ONE_MINUS_DST_ALPHA};function Cr(qn,tr,Gr,Hs,wo,lc,cc,Gd){if(qn!==Zg){if(!1===re&&(Bn(i.BLEND),re=!0),qn===IY)wo=wo||tr,lc=lc||Gr,cc=cc||Hs,(tr!==be||wo!==xt)&&(i.blendEquationSeparate(Tr[tr],Tr[wo]),be=tr,xt=wo),(Gr!==Ye||Hs!==dt||lc!==$t||cc!==nn)&&(i.blendFuncSeparate(ar[Gr],ar[Hs],ar[lc],ar[cc]),Ye=Gr,dt=Hs,$t=lc,nn=cc),Le=qn,gt=!1;else if(qn!==Le||Gd!==gt){if((be!==Kx||xt!==Kx)&&(i.blendEquation(i.FUNC_ADD),be=Kx,xt=Kx),Gd)switch(qn){case Nv:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case YI:i.blendFunc(i.ONE,i.ONE);break;case D6:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case B6:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",qn)}else switch(qn){case Nv:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case YI:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case D6:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case B6:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",qn)}Ye=null,dt=null,$t=null,nn=null,Le=qn,gt=Gd}}else!0===re&&(io(i.BLEND),re=!1)}function hs(qn){Wt!==qn&&(i.frontFace(qn?i.CW:i.CCW),Wt=qn)}function Ho(qn){qn!==EY?(Bn(i.CULL_FACE),qn!==Nn&&i.cullFace(qn===T6?i.BACK:qn===DY?i.FRONT:i.FRONT_AND_BACK)):io(i.CULL_FACE),Nn=qn}function Eo(qn,tr,Gr){qn?(Bn(i.POLYGON_OFFSET_FILL),(Rn!==tr||kn!==Gr)&&(i.polygonOffset(tr,Gr),Rn=tr,kn=Gr)):io(i.POLYGON_OFFSET_FILL)}return{buffers:{color:l,depth:u,stencil:d},enable:Bn,disable:io,bindFramebuffer:function qs(qn,tr){return k[qn]!==tr&&(i.bindFramebuffer(qn,tr),k[qn]=tr,n&&(qn===i.DRAW_FRAMEBUFFER&&(k[i.FRAMEBUFFER]=tr),qn===i.FRAMEBUFFER&&(k[i.DRAW_FRAMEBUFFER]=tr)),!0)},drawBuffers:function Br(qn,tr){let Gr=se,Hs=!1;if(qn)if(Gr=Q.get(tr),void 0===Gr&&(Gr=[],Q.set(tr,Gr)),qn.isWebGLMultipleRenderTargets){const wo=qn.texture;if(Gr.length!==wo.length||Gr[0]!==i.COLOR_ATTACHMENT0){for(let lc=0,cc=wo.length;lc<cc;lc++)Gr[lc]=i.COLOR_ATTACHMENT0+lc;Gr.length=wo.length,Hs=!0}}else Gr[0]!==i.COLOR_ATTACHMENT0&&(Gr[0]=i.COLOR_ATTACHMENT0,Hs=!0);else Gr[0]!==i.BACK&&(Gr[0]=i.BACK,Hs=!0);Hs&&(t.isWebGL2?i.drawBuffers(Gr):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Gr))},useProgram:function Ls(qn){return he!==qn&&(i.useProgram(qn),he=qn,!0)},setBlending:Cr,setMaterial:function zs(qn,tr){qn.side===zd?io(i.CULL_FACE):Bn(i.CULL_FACE);let Gr=qn.side===cp;tr&&(Gr=!Gr),hs(Gr),qn.blending===Nv&&!1===qn.transparent?Cr(Zg):Cr(qn.blending,qn.blendEquation,qn.blendSrc,qn.blendDst,qn.blendEquationAlpha,qn.blendSrcAlpha,qn.blendDstAlpha,qn.premultipliedAlpha),u.setFunc(qn.depthFunc),u.setTest(qn.depthTest),u.setMask(qn.depthWrite),l.setMask(qn.colorWrite);const Hs=qn.stencilWrite;d.setTest(Hs),Hs&&(d.setMask(qn.stencilWriteMask),d.setFunc(qn.stencilFunc,qn.stencilRef,qn.stencilFuncMask),d.setOp(qn.stencilFail,qn.stencilZFail,qn.stencilZPass)),Eo(qn.polygonOffset,qn.polygonOffsetFactor,qn.polygonOffsetUnits),!0===qn.alphaToCoverage?Bn(i.SAMPLE_ALPHA_TO_COVERAGE):io(i.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:hs,setCullFace:Ho,setLineWidth:function Vo(qn){qn!==yi&&(Wn&&i.lineWidth(qn),yi=qn)},setPolygonOffset:Eo,setScissorTest:function ba(qn){qn?Bn(i.SCISSOR_TEST):io(i.SCISSOR_TEST)},activeTexture:function yl(qn){void 0===qn&&(qn=i.TEXTURE0+li-1),Ei!==qn&&(i.activeTexture(qn),Ei=qn)},bindTexture:function yn(qn,tr,Gr){void 0===Gr&&(Gr=null===Ei?i.TEXTURE0+li-1:Ei);let Hs=Ki[Gr];void 0===Hs&&(Hs={type:void 0,texture:void 0},Ki[Gr]=Hs),(Hs.type!==qn||Hs.texture!==tr)&&(Ei!==Gr&&(i.activeTexture(Gr),Ei=Gr),i.bindTexture(qn,tr||Jr[qn]),Hs.type=qn,Hs.texture=tr)},unbindTexture:function Jt(){const qn=Ki[Ei];void 0!==qn&&void 0!==qn.type&&(i.bindTexture(qn.type,null),qn.type=void 0,qn.texture=void 0)},compressedTexImage2D:function Ni(){try{i.compressedTexImage2D.apply(i,arguments)}catch(qn){console.error("THREE.WebGLState:",qn)}},compressedTexImage3D:function Rr(){try{i.compressedTexImage3D.apply(i,arguments)}catch(qn){console.error("THREE.WebGLState:",qn)}},texImage2D:function Js(){try{i.texImage2D.apply(i,arguments)}catch(qn){console.error("THREE.WebGLState:",qn)}},texImage3D:function xo(){try{i.texImage3D.apply(i,arguments)}catch(qn){console.error("THREE.WebGLState:",qn)}},updateUBOMapping:function la(qn,tr){let Gr=y.get(tr);void 0===Gr&&(Gr=new WeakMap,y.set(tr,Gr));let Hs=Gr.get(qn);void 0===Hs&&(Hs=i.getUniformBlockIndex(tr,qn.name),Gr.set(qn,Hs))},uniformBlockBinding:function qa(qn,tr){const Hs=y.get(tr).get(qn);A.get(tr)!==Hs&&(i.uniformBlockBinding(tr,Hs,qn.__bindingPointIndex),A.set(tr,Hs))},texStorage2D:function Fi(){try{i.texStorage2D.apply(i,arguments)}catch(qn){console.error("THREE.WebGLState:",qn)}},texStorage3D:function xs(){try{i.texStorage3D.apply(i,arguments)}catch(qn){console.error("THREE.WebGLState:",qn)}},texSubImage2D:function Vr(){try{i.texSubImage2D.apply(i,arguments)}catch(qn){console.error("THREE.WebGLState:",qn)}},texSubImage3D:function _s(){try{i.texSubImage3D.apply(i,arguments)}catch(qn){console.error("THREE.WebGLState:",qn)}},compressedTexSubImage2D:function On(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(qn){console.error("THREE.WebGLState:",qn)}},compressedTexSubImage3D:function mr(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(qn){console.error("THREE.WebGLState:",qn)}},scissor:function Ns(qn){!1===Ci.equals(qn)&&(i.scissor(qn.x,qn.y,qn.z,qn.w),Ci.copy(qn))},viewport:function Ao(qn){!1===Ii.equals(qn)&&(i.viewport(qn.x,qn.y,qn.z,qn.w),Ii.copy(qn))},reset:function Du(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),!0===n&&(i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),C={},Ei=null,Ki={},k={},Q=new WeakMap,se=[],he=null,re=!1,Le=null,be=null,Ye=null,dt=null,xt=null,$t=null,nn=null,gt=!1,Wt=null,Nn=null,yi=null,Rn=null,kn=null,Ci.set(0,0,i.canvas.width,i.canvas.height),Ii.set(0,0,i.canvas.width,i.canvas.height),l.reset(),u.reset(),d.reset()}}}function $ne(i,e,t,n,r,s,a){const l=r.isWebGL2,u=r.maxTextures,d=r.maxCubemapSize,A=r.maxTextureSize,y=r.maxSamples,C=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,k=!(typeof navigator>"u")&&/OculusBrowser/g.test(navigator.userAgent),Q=new WeakMap;let se;const he=new WeakMap;let re=!1;try{re=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function Le(yn,Jt){return re?new OffscreenCanvas(yn,Jt):qM("canvas")}function be(yn,Jt,Ni,Rr){let Vr=1;if((yn.width>Rr||yn.height>Rr)&&(Vr=Rr/Math.max(yn.width,yn.height)),Vr<1||!0===Jt){if(typeof HTMLImageElement<"u"&&yn instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&yn instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&yn instanceof ImageBitmap){const _s=Jt?fN:Math.floor,On=_s(Vr*yn.width),mr=_s(Vr*yn.height);void 0===se&&(se=Le(On,mr));const Fi=Ni?Le(On,mr):se;return Fi.width=On,Fi.height=mr,Fi.getContext("2d").drawImage(yn,0,0,On,mr),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+yn.width+"x"+yn.height+") to ("+On+"x"+mr+")."),Fi}return"data"in yn&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+yn.width+"x"+yn.height+")."),yn}return yn}function Ye(yn){return d5(yn.width)&&d5(yn.height)}function xt(yn,Jt){return yn.generateMipmaps&&Jt&&yn.minFilter!==ou&&yn.minFilter!==Zc}function $t(yn){i.generateMipmap(yn)}function nn(yn,Jt,Ni,Rr,Vr=!1){if(!1===l)return Jt;if(null!==yn){if(void 0!==i[yn])return i[yn];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+yn+"'")}let _s=Jt;return Jt===i.RED&&(Ni===i.FLOAT&&(_s=i.R32F),Ni===i.HALF_FLOAT&&(_s=i.R16F),Ni===i.UNSIGNED_BYTE&&(_s=i.R8)),Jt===i.RG&&(Ni===i.FLOAT&&(_s=i.RG32F),Ni===i.HALF_FLOAT&&(_s=i.RG16F),Ni===i.UNSIGNED_BYTE&&(_s=i.RG8)),Jt===i.RGBA&&(Ni===i.FLOAT&&(_s=i.RGBA32F),Ni===i.HALF_FLOAT&&(_s=i.RGBA16F),Ni===i.UNSIGNED_BYTE&&(_s=Rr===Jo&&!1===Vr?i.SRGB8_ALPHA8:i.RGBA8),Ni===i.UNSIGNED_SHORT_4_4_4_4&&(_s=i.RGBA4),Ni===i.UNSIGNED_SHORT_5_5_5_1&&(_s=i.RGB5_A1)),(_s===i.R16F||_s===i.R32F||_s===i.RG16F||_s===i.RG32F||_s===i.RGBA16F||_s===i.RGBA32F)&&e.get("EXT_color_buffer_float"),_s}function gt(yn,Jt,Ni){return!0===xt(yn,Ni)||yn.isFramebufferTexture&&yn.minFilter!==ou&&yn.minFilter!==Zc?Math.log2(Math.max(Jt.width,Jt.height))+1:void 0!==yn.mipmaps&&yn.mipmaps.length>0?yn.mipmaps.length:yn.isCompressedTexture&&Array.isArray(yn.image)?Jt.mipmaps.length:1}function Wt(yn){return yn===ou||yn===HM||yn===Zx?i.NEAREST:i.LINEAR}function Nn(yn){const Jt=yn.target;Jt.removeEventListener("dispose",Nn),function Rn(yn){const Jt=n.get(yn);if(void 0===Jt.__webglInit)return;const Ni=yn.source,Rr=he.get(Ni);if(Rr){const Vr=Rr[Jt.__cacheKey];Vr.usedTimes--,0===Vr.usedTimes&&kn(yn),0===Object.keys(Rr).length&&he.delete(Ni)}n.remove(yn)}(Jt),Jt.isVideoTexture&&Q.delete(Jt)}function yi(yn){const Jt=yn.target;Jt.removeEventListener("dispose",yi),function li(yn){const Jt=yn.texture,Ni=n.get(yn),Rr=n.get(Jt);if(void 0!==Rr.__webglTexture&&(i.deleteTexture(Rr.__webglTexture),a.memory.textures--),yn.depthTexture&&yn.depthTexture.dispose(),yn.isWebGLCubeRenderTarget)for(let Vr=0;Vr<6;Vr++)i.deleteFramebuffer(Ni.__webglFramebuffer[Vr]),Ni.__webglDepthbuffer&&i.deleteRenderbuffer(Ni.__webglDepthbuffer[Vr]);else{if(i.deleteFramebuffer(Ni.__webglFramebuffer),Ni.__webglDepthbuffer&&i.deleteRenderbuffer(Ni.__webglDepthbuffer),Ni.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Ni.__webglMultisampledFramebuffer),Ni.__webglColorRenderbuffer)for(let Vr=0;Vr<Ni.__webglColorRenderbuffer.length;Vr++)Ni.__webglColorRenderbuffer[Vr]&&i.deleteRenderbuffer(Ni.__webglColorRenderbuffer[Vr]);Ni.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Ni.__webglDepthRenderbuffer)}if(yn.isWebGLMultipleRenderTargets)for(let Vr=0,_s=Jt.length;Vr<_s;Vr++){const On=n.get(Jt[Vr]);On.__webglTexture&&(i.deleteTexture(On.__webglTexture),a.memory.textures--),n.remove(Jt[Vr])}n.remove(Jt),n.remove(yn)}(Jt)}function kn(yn){const Jt=n.get(yn);i.deleteTexture(Jt.__webglTexture),delete he.get(yn.source)[Jt.__cacheKey],a.memory.textures--}let Wn=0;function Ki(yn,Jt){const Ni=n.get(yn);if(yn.isVideoTexture&&function ba(yn){const Jt=a.render.frame;Q.get(yn)!==Jt&&(Q.set(yn,Jt),yn.update())}(yn),!1===yn.isRenderTargetTexture&&yn.version>0&&Ni.__version!==yn.version){const Rr=yn.image;if(null===Rr)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Rr.complete)return void io(Ni,yn,Jt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}t.bindTexture(i.TEXTURE_2D,Ni.__webglTexture,i.TEXTURE0+Jt)}const Ii={[ry]:i.REPEAT,[_d]:i.CLAMP_TO_EDGE,[Yx]:i.MIRRORED_REPEAT},jr={[ou]:i.NEAREST,[HM]:i.NEAREST_MIPMAP_NEAREST,[Zx]:i.NEAREST_MIPMAP_LINEAR,[Zc]:i.LINEAR,[RE]:i.LINEAR_MIPMAP_NEAREST,[Jg]:i.LINEAR_MIPMAP_LINEAR};function Jr(yn,Jt,Ni){if(Ni?(i.texParameteri(yn,i.TEXTURE_WRAP_S,Ii[Jt.wrapS]),i.texParameteri(yn,i.TEXTURE_WRAP_T,Ii[Jt.wrapT]),(yn===i.TEXTURE_3D||yn===i.TEXTURE_2D_ARRAY)&&i.texParameteri(yn,i.TEXTURE_WRAP_R,Ii[Jt.wrapR]),i.texParameteri(yn,i.TEXTURE_MAG_FILTER,jr[Jt.magFilter]),i.texParameteri(yn,i.TEXTURE_MIN_FILTER,jr[Jt.minFilter])):(i.texParameteri(yn,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(yn,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(yn===i.TEXTURE_3D||yn===i.TEXTURE_2D_ARRAY)&&i.texParameteri(yn,i.TEXTURE_WRAP_R,i.CLAMP_TO_EDGE),(Jt.wrapS!==_d||Jt.wrapT!==_d)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(yn,i.TEXTURE_MAG_FILTER,Wt(Jt.magFilter)),i.texParameteri(yn,i.TEXTURE_MIN_FILTER,Wt(Jt.minFilter)),Jt.minFilter!==ou&&Jt.minFilter!==Zc&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){const Rr=e.get("EXT_texture_filter_anisotropic");if(Jt.magFilter===ou||Jt.minFilter!==Zx&&Jt.minFilter!==Jg||Jt.type===sy&&!1===e.has("OES_texture_float_linear")||!1===l&&Jt.type===VM&&!1===e.has("OES_texture_half_float_linear"))return;(Jt.anisotropy>1||n.get(Jt).__currentAnisotropy)&&(i.texParameterf(yn,Rr.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Jt.anisotropy,r.getMaxAnisotropy())),n.get(Jt).__currentAnisotropy=Jt.anisotropy)}}function Bn(yn,Jt){let Ni=!1;void 0===yn.__webglInit&&(yn.__webglInit=!0,Jt.addEventListener("dispose",Nn));const Rr=Jt.source;let Vr=he.get(Rr);void 0===Vr&&(Vr={},he.set(Rr,Vr));const _s=function Ei(yn){const Jt=[];return Jt.push(yn.wrapS),Jt.push(yn.wrapT),Jt.push(yn.wrapR||0),Jt.push(yn.magFilter),Jt.push(yn.minFilter),Jt.push(yn.anisotropy),Jt.push(yn.internalFormat),Jt.push(yn.format),Jt.push(yn.type),Jt.push(yn.generateMipmaps),Jt.push(yn.premultiplyAlpha),Jt.push(yn.flipY),Jt.push(yn.unpackAlignment),Jt.push(yn.colorSpace),Jt.join()}(Jt);if(_s!==yn.__cacheKey){void 0===Vr[_s]&&(Vr[_s]={texture:i.createTexture(),usedTimes:0},a.memory.textures++,Ni=!0),Vr[_s].usedTimes++;const On=Vr[yn.__cacheKey];void 0!==On&&(Vr[yn.__cacheKey].usedTimes--,0===On.usedTimes&&kn(Jt)),yn.__cacheKey=_s,yn.__webglTexture=Vr[_s].texture}return Ni}function io(yn,Jt,Ni){let Rr=i.TEXTURE_2D;(Jt.isDataArrayTexture||Jt.isCompressedArrayTexture)&&(Rr=i.TEXTURE_2D_ARRAY),Jt.isData3DTexture&&(Rr=i.TEXTURE_3D);const Vr=Bn(yn,Jt),_s=Jt.source;t.bindTexture(Rr,yn.__webglTexture,i.TEXTURE0+Ni);const On=n.get(_s);if(_s.version!==On.__version||!0===Vr){t.activeTexture(i.TEXTURE0+Ni),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Jt.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Jt.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Jt.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);const mr=function dt(yn){return!l&&(yn.wrapS!==_d||yn.wrapT!==_d||yn.minFilter!==ou&&yn.minFilter!==Zc)}(Jt)&&!1===Ye(Jt.image);let Fi=be(Jt.image,mr,!1,A);Fi=yl(Jt,Fi);const xs=Ye(Fi)||l,Js=s.convert(Jt.format,Jt.colorSpace);let Ao,xo=s.convert(Jt.type),Ns=nn(Jt.internalFormat,Js,xo,Jt.colorSpace);Jr(Rr,Jt,xs);const la=Jt.mipmaps,qa=l&&!0!==Jt.isVideoTexture,Du=void 0===On.__version||!0===Vr,qn=gt(Jt,Fi,xs);if(Jt.isDepthTexture)Ns=i.DEPTH_COMPONENT,l?Ns=Jt.type===sy?i.DEPTH_COMPONENT32F:Jt.type===Vv?i.DEPTH_COMPONENT24:Jt.type===Jx?i.DEPTH24_STENCIL8:i.DEPTH_COMPONENT16:Jt.type===sy&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Jt.format===Gv&&Ns===i.DEPTH_COMPONENT&&Jt.type!==k6&&Jt.type!==Vv&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Jt.type=Vv,xo=s.convert(Jt.type)),Jt.format===ew&&Ns===i.DEPTH_COMPONENT&&(Ns=i.DEPTH_STENCIL,Jt.type!==Jx&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Jt.type=Jx,xo=s.convert(Jt.type))),Du&&(qa?t.texStorage2D(i.TEXTURE_2D,1,Ns,Fi.width,Fi.height):t.texImage2D(i.TEXTURE_2D,0,Ns,Fi.width,Fi.height,0,Js,xo,null));else if(Jt.isDataTexture)if(la.length>0&&xs){qa&&Du&&t.texStorage2D(i.TEXTURE_2D,qn,Ns,la[0].width,la[0].height);for(let tr=0,Gr=la.length;tr<Gr;tr++)Ao=la[tr],qa?t.texSubImage2D(i.TEXTURE_2D,tr,0,0,Ao.width,Ao.height,Js,xo,Ao.data):t.texImage2D(i.TEXTURE_2D,tr,Ns,Ao.width,Ao.height,0,Js,xo,Ao.data);Jt.generateMipmaps=!1}else qa?(Du&&t.texStorage2D(i.TEXTURE_2D,qn,Ns,Fi.width,Fi.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,Fi.width,Fi.height,Js,xo,Fi.data)):t.texImage2D(i.TEXTURE_2D,0,Ns,Fi.width,Fi.height,0,Js,xo,Fi.data);else if(Jt.isCompressedTexture)if(Jt.isCompressedArrayTexture){qa&&Du&&t.texStorage3D(i.TEXTURE_2D_ARRAY,qn,Ns,la[0].width,la[0].height,Fi.depth);for(let tr=0,Gr=la.length;tr<Gr;tr++)Ao=la[tr],Jt.format!==Vp?null!==Js?qa?t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,tr,0,0,0,Ao.width,Ao.height,Fi.depth,Js,Ao.data,0,0):t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,tr,Ns,Ao.width,Ao.height,Fi.depth,0,Ao.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qa?t.texSubImage3D(i.TEXTURE_2D_ARRAY,tr,0,0,0,Ao.width,Ao.height,Fi.depth,Js,xo,Ao.data):t.texImage3D(i.TEXTURE_2D_ARRAY,tr,Ns,Ao.width,Ao.height,Fi.depth,0,Js,xo,Ao.data)}else{qa&&Du&&t.texStorage2D(i.TEXTURE_2D,qn,Ns,la[0].width,la[0].height);for(let tr=0,Gr=la.length;tr<Gr;tr++)Ao=la[tr],Jt.format!==Vp?null!==Js?qa?t.compressedTexSubImage2D(i.TEXTURE_2D,tr,0,0,Ao.width,Ao.height,Js,Ao.data):t.compressedTexImage2D(i.TEXTURE_2D,tr,Ns,Ao.width,Ao.height,0,Ao.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):qa?t.texSubImage2D(i.TEXTURE_2D,tr,0,0,Ao.width,Ao.height,Js,xo,Ao.data):t.texImage2D(i.TEXTURE_2D,tr,Ns,Ao.width,Ao.height,0,Js,xo,Ao.data)}else if(Jt.isDataArrayTexture)qa?(Du&&t.texStorage3D(i.TEXTURE_2D_ARRAY,qn,Ns,Fi.width,Fi.height,Fi.depth),t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Fi.width,Fi.height,Fi.depth,Js,xo,Fi.data)):t.texImage3D(i.TEXTURE_2D_ARRAY,0,Ns,Fi.width,Fi.height,Fi.depth,0,Js,xo,Fi.data);else if(Jt.isData3DTexture)qa?(Du&&t.texStorage3D(i.TEXTURE_3D,qn,Ns,Fi.width,Fi.height,Fi.depth),t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Fi.width,Fi.height,Fi.depth,Js,xo,Fi.data)):t.texImage3D(i.TEXTURE_3D,0,Ns,Fi.width,Fi.height,Fi.depth,0,Js,xo,Fi.data);else if(Jt.isFramebufferTexture){if(Du)if(qa)t.texStorage2D(i.TEXTURE_2D,qn,Ns,Fi.width,Fi.height);else{let tr=Fi.width,Gr=Fi.height;for(let Hs=0;Hs<qn;Hs++)t.texImage2D(i.TEXTURE_2D,Hs,Ns,tr,Gr,0,Js,xo,null),tr>>=1,Gr>>=1}}else if(la.length>0&&xs){qa&&Du&&t.texStorage2D(i.TEXTURE_2D,qn,Ns,la[0].width,la[0].height);for(let tr=0,Gr=la.length;tr<Gr;tr++)Ao=la[tr],qa?t.texSubImage2D(i.TEXTURE_2D,tr,0,0,Js,xo,Ao):t.texImage2D(i.TEXTURE_2D,tr,Ns,Js,xo,Ao);Jt.generateMipmaps=!1}else qa?(Du&&t.texStorage2D(i.TEXTURE_2D,qn,Ns,Fi.width,Fi.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,Js,xo,Fi)):t.texImage2D(i.TEXTURE_2D,0,Ns,Js,xo,Fi);xt(Jt,xs)&&$t(Rr),On.__version=_s.version,Jt.onUpdate&&Jt.onUpdate(Jt)}yn.__version=Jt.version}function Br(yn,Jt,Ni,Rr,Vr){const _s=s.convert(Ni.format,Ni.colorSpace),On=s.convert(Ni.type),mr=nn(Ni.internalFormat,_s,On,Ni.colorSpace);n.get(Jt).__hasExternalTextures||(Vr===i.TEXTURE_3D||Vr===i.TEXTURE_2D_ARRAY?t.texImage3D(Vr,0,mr,Jt.width,Jt.height,Jt.depth,0,_s,On,null):t.texImage2D(Vr,0,mr,Jt.width,Jt.height,0,_s,On,null)),t.bindFramebuffer(i.FRAMEBUFFER,yn),Eo(Jt)?C.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,Rr,Vr,n.get(Ni).__webglTexture,0,Vo(Jt)):(Vr===i.TEXTURE_2D||Vr>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Vr<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,Rr,Vr,n.get(Ni).__webglTexture,0),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Ls(yn,Jt,Ni){if(i.bindRenderbuffer(i.RENDERBUFFER,yn),Jt.depthBuffer&&!Jt.stencilBuffer){let Rr=i.DEPTH_COMPONENT16;if(Ni||Eo(Jt)){const Vr=Jt.depthTexture;Vr&&Vr.isDepthTexture&&(Vr.type===sy?Rr=i.DEPTH_COMPONENT32F:Vr.type===Vv&&(Rr=i.DEPTH_COMPONENT24));const _s=Vo(Jt);Eo(Jt)?C.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,_s,Rr,Jt.width,Jt.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,_s,Rr,Jt.width,Jt.height)}else i.renderbufferStorage(i.RENDERBUFFER,Rr,Jt.width,Jt.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,yn)}else if(Jt.depthBuffer&&Jt.stencilBuffer){const Rr=Vo(Jt);Ni&&!1===Eo(Jt)?i.renderbufferStorageMultisample(i.RENDERBUFFER,Rr,i.DEPTH24_STENCIL8,Jt.width,Jt.height):Eo(Jt)?C.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Rr,i.DEPTH24_STENCIL8,Jt.width,Jt.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,Jt.width,Jt.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,yn)}else{const Rr=!0===Jt.isWebGLMultipleRenderTargets?Jt.texture:[Jt.texture];for(let Vr=0;Vr<Rr.length;Vr++){const _s=Rr[Vr],On=s.convert(_s.format,_s.colorSpace),mr=s.convert(_s.type),Fi=nn(_s.internalFormat,On,mr,_s.colorSpace),xs=Vo(Jt);Ni&&!1===Eo(Jt)?i.renderbufferStorageMultisample(i.RENDERBUFFER,xs,Fi,Jt.width,Jt.height):Eo(Jt)?C.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,xs,Fi,Jt.width,Jt.height):i.renderbufferStorage(i.RENDERBUFFER,Fi,Jt.width,Jt.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function ar(yn){const Jt=n.get(yn),Ni=!0===yn.isWebGLCubeRenderTarget;if(yn.depthTexture&&!Jt.__autoAllocateDepthBuffer){if(Ni)throw new Error("target.depthTexture not supported in Cube render targets");!function Tr(yn,Jt){if(Jt&&Jt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,yn),!Jt.depthTexture||!Jt.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(Jt.depthTexture).__webglTexture||Jt.depthTexture.image.width!==Jt.width||Jt.depthTexture.image.height!==Jt.height)&&(Jt.depthTexture.image.width=Jt.width,Jt.depthTexture.image.height=Jt.height,Jt.depthTexture.needsUpdate=!0),Ki(Jt.depthTexture,0);const Rr=n.get(Jt.depthTexture).__webglTexture,Vr=Vo(Jt);if(Jt.depthTexture.format===Gv)Eo(Jt)?C.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Rr,0,Vr):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,Rr,0);else{if(Jt.depthTexture.format!==ew)throw new Error("Unknown depthTexture format");Eo(Jt)?C.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Rr,0,Vr):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,Rr,0)}}(Jt.__webglFramebuffer,yn)}else if(Ni){Jt.__webglDepthbuffer=[];for(let Rr=0;Rr<6;Rr++)t.bindFramebuffer(i.FRAMEBUFFER,Jt.__webglFramebuffer[Rr]),Jt.__webglDepthbuffer[Rr]=i.createRenderbuffer(),Ls(Jt.__webglDepthbuffer[Rr],yn,!1)}else t.bindFramebuffer(i.FRAMEBUFFER,Jt.__webglFramebuffer),Jt.__webglDepthbuffer=i.createRenderbuffer(),Ls(Jt.__webglDepthbuffer,yn,!1);t.bindFramebuffer(i.FRAMEBUFFER,null)}function Vo(yn){return Math.min(y,yn.samples)}function Eo(yn){const Jt=n.get(yn);return l&&yn.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==Jt.__useRenderToTexture}function yl(yn,Jt){const Ni=yn.colorSpace,Rr=yn.format,Vr=yn.type;return!0===yn.isCompressedTexture||yn.format===u5||Ni!==Pm&&Ni!==oy&&(Ni===Jo?!1===l?!0===e.has("EXT_sRGB")&&Rr===Vp?(yn.format=u5,yn.minFilter=Zc,yn.generateMipmaps=!1):Jt=mN.sRGBToLinear(Jt):(Rr!==Vp||Vr!==Hv)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ni)),Jt}this.allocateTextureUnit=function si(){const yn=Wn;return yn>=u&&console.warn("THREE.WebGLTextures: Trying to use "+yn+" texture units while this GPU supports only "+u),Wn+=1,yn},this.resetTextureUnits=function ni(){Wn=0},this.setTexture2D=Ki,this.setTexture2DArray=function Zr(yn,Jt){const Ni=n.get(yn);yn.version>0&&Ni.__version!==yn.version?io(Ni,yn,Jt):t.bindTexture(i.TEXTURE_2D_ARRAY,Ni.__webglTexture,i.TEXTURE0+Jt)},this.setTexture3D=function Hr(yn,Jt){const Ni=n.get(yn);yn.version>0&&Ni.__version!==yn.version?io(Ni,yn,Jt):t.bindTexture(i.TEXTURE_3D,Ni.__webglTexture,i.TEXTURE0+Jt)},this.setTextureCube=function Ci(yn,Jt){const Ni=n.get(yn);yn.version>0&&Ni.__version!==yn.version?function qs(yn,Jt,Ni){if(6!==Jt.image.length)return;const Rr=Bn(yn,Jt),Vr=Jt.source;t.bindTexture(i.TEXTURE_CUBE_MAP,yn.__webglTexture,i.TEXTURE0+Ni);const _s=n.get(Vr);if(Vr.version!==_s.__version||!0===Rr){t.activeTexture(i.TEXTURE0+Ni),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Jt.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Jt.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Jt.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE);const On=Jt.isCompressedTexture||Jt.image[0].isCompressedTexture,mr=Jt.image[0]&&Jt.image[0].isDataTexture,Fi=[];for(let tr=0;tr<6;tr++)Fi[tr]=On||mr?mr?Jt.image[tr].image:Jt.image[tr]:be(Jt.image[tr],!1,!0,d),Fi[tr]=yl(Jt,Fi[tr]);const xs=Fi[0],Js=Ye(xs)||l,xo=s.convert(Jt.format,Jt.colorSpace),Ns=s.convert(Jt.type),Ao=nn(Jt.internalFormat,xo,Ns,Jt.colorSpace),la=l&&!0!==Jt.isVideoTexture,qa=void 0===_s.__version||!0===Rr;let qn,Du=gt(Jt,xs,Js);if(Jr(i.TEXTURE_CUBE_MAP,Jt,Js),On){la&&qa&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Du,Ao,xs.width,xs.height);for(let tr=0;tr<6;tr++){qn=Fi[tr].mipmaps;for(let Gr=0;Gr<qn.length;Gr++){const Hs=qn[Gr];Jt.format!==Vp?null!==xo?la?t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,Gr,0,0,Hs.width,Hs.height,xo,Hs.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,Gr,Ao,Hs.width,Hs.height,0,Hs.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):la?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,Gr,0,0,Hs.width,Hs.height,xo,Ns,Hs.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,Gr,Ao,Hs.width,Hs.height,0,xo,Ns,Hs.data)}}}else{qn=Jt.mipmaps,la&&qa&&(qn.length>0&&Du++,t.texStorage2D(i.TEXTURE_CUBE_MAP,Du,Ao,Fi[0].width,Fi[0].height));for(let tr=0;tr<6;tr++)if(mr){la?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,0,0,0,Fi[tr].width,Fi[tr].height,xo,Ns,Fi[tr].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,0,Ao,Fi[tr].width,Fi[tr].height,0,xo,Ns,Fi[tr].data);for(let Gr=0;Gr<qn.length;Gr++){const wo=qn[Gr].image[tr].image;la?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,Gr+1,0,0,wo.width,wo.height,xo,Ns,wo.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,Gr+1,Ao,wo.width,wo.height,0,xo,Ns,wo.data)}}else{la?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,0,0,0,xo,Ns,Fi[tr]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,0,Ao,xo,Ns,Fi[tr]);for(let Gr=0;Gr<qn.length;Gr++){const Hs=qn[Gr];la?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,Gr+1,0,0,xo,Ns,Hs.image[tr]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+tr,Gr+1,Ao,xo,Ns,Hs.image[tr])}}}xt(Jt,Js)&&$t(i.TEXTURE_CUBE_MAP),_s.__version=Vr.version,Jt.onUpdate&&Jt.onUpdate(Jt)}yn.__version=Jt.version}(Ni,yn,Jt):t.bindTexture(i.TEXTURE_CUBE_MAP,Ni.__webglTexture,i.TEXTURE0+Jt)},this.rebindTextures=function Cr(yn,Jt,Ni){const Rr=n.get(yn);void 0!==Jt&&Br(Rr.__webglFramebuffer,yn,yn.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D),void 0!==Ni&&ar(yn)},this.setupRenderTarget=function zs(yn){const Jt=yn.texture,Ni=n.get(yn),Rr=n.get(Jt);yn.addEventListener("dispose",yi),!0!==yn.isWebGLMultipleRenderTargets&&(void 0===Rr.__webglTexture&&(Rr.__webglTexture=i.createTexture()),Rr.__version=Jt.version,a.memory.textures++);const Vr=!0===yn.isWebGLCubeRenderTarget,_s=!0===yn.isWebGLMultipleRenderTargets,On=Ye(yn)||l;if(Vr){Ni.__webglFramebuffer=[];for(let mr=0;mr<6;mr++)Ni.__webglFramebuffer[mr]=i.createFramebuffer()}else{if(Ni.__webglFramebuffer=i.createFramebuffer(),_s)if(r.drawBuffers){const mr=yn.texture;for(let Fi=0,xs=mr.length;Fi<xs;Fi++){const Js=n.get(mr[Fi]);void 0===Js.__webglTexture&&(Js.__webglTexture=i.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&yn.samples>0&&!1===Eo(yn)){const mr=_s?Jt:[Jt];Ni.__webglMultisampledFramebuffer=i.createFramebuffer(),Ni.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,Ni.__webglMultisampledFramebuffer);for(let Fi=0;Fi<mr.length;Fi++){const xs=mr[Fi];Ni.__webglColorRenderbuffer[Fi]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,Ni.__webglColorRenderbuffer[Fi]);const Js=s.convert(xs.format,xs.colorSpace),xo=s.convert(xs.type),Ns=nn(xs.internalFormat,Js,xo,xs.colorSpace,!0===yn.isXRRenderTarget),Ao=Vo(yn);i.renderbufferStorageMultisample(i.RENDERBUFFER,Ao,Ns,yn.width,yn.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Fi,i.RENDERBUFFER,Ni.__webglColorRenderbuffer[Fi])}i.bindRenderbuffer(i.RENDERBUFFER,null),yn.depthBuffer&&(Ni.__webglDepthRenderbuffer=i.createRenderbuffer(),Ls(Ni.__webglDepthRenderbuffer,yn,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(Vr){t.bindTexture(i.TEXTURE_CUBE_MAP,Rr.__webglTexture),Jr(i.TEXTURE_CUBE_MAP,Jt,On);for(let mr=0;mr<6;mr++)Br(Ni.__webglFramebuffer[mr],yn,Jt,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+mr);xt(Jt,On)&&$t(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(_s){const mr=yn.texture;for(let Fi=0,xs=mr.length;Fi<xs;Fi++){const Js=mr[Fi],xo=n.get(Js);t.bindTexture(i.TEXTURE_2D,xo.__webglTexture),Jr(i.TEXTURE_2D,Js,On),Br(Ni.__webglFramebuffer,yn,Js,i.COLOR_ATTACHMENT0+Fi,i.TEXTURE_2D),xt(Js,On)&&$t(i.TEXTURE_2D)}t.unbindTexture()}else{let mr=i.TEXTURE_2D;(yn.isWebGL3DRenderTarget||yn.isWebGLArrayRenderTarget)&&(l?mr=yn.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(mr,Rr.__webglTexture),Jr(mr,Jt,On),Br(Ni.__webglFramebuffer,yn,Jt,i.COLOR_ATTACHMENT0,mr),xt(Jt,On)&&$t(mr),t.unbindTexture()}yn.depthBuffer&&ar(yn)},this.updateRenderTargetMipmap=function hs(yn){const Jt=Ye(yn)||l,Ni=!0===yn.isWebGLMultipleRenderTargets?yn.texture:[yn.texture];for(let Rr=0,Vr=Ni.length;Rr<Vr;Rr++){const _s=Ni[Rr];if(xt(_s,Jt)){const On=yn.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,mr=n.get(_s).__webglTexture;t.bindTexture(On,mr),$t(On),t.unbindTexture()}}},this.updateMultisampleRenderTarget=function Ho(yn){if(l&&yn.samples>0&&!1===Eo(yn)){const Jt=yn.isWebGLMultipleRenderTargets?yn.texture:[yn.texture],Ni=yn.width,Rr=yn.height;let Vr=i.COLOR_BUFFER_BIT;const _s=[],On=yn.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,mr=n.get(yn),Fi=!0===yn.isWebGLMultipleRenderTargets;if(Fi)for(let xs=0;xs<Jt.length;xs++)t.bindFramebuffer(i.FRAMEBUFFER,mr.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+xs,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,mr.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+xs,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,mr.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,mr.__webglFramebuffer);for(let xs=0;xs<Jt.length;xs++){_s.push(i.COLOR_ATTACHMENT0+xs),yn.depthBuffer&&_s.push(On);const Js=void 0!==mr.__ignoreDepthValues&&mr.__ignoreDepthValues;if(!1===Js&&(yn.depthBuffer&&(Vr|=i.DEPTH_BUFFER_BIT),yn.stencilBuffer&&(Vr|=i.STENCIL_BUFFER_BIT)),Fi&&i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,mr.__webglColorRenderbuffer[xs]),!0===Js&&(i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[On]),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[On])),Fi){const xo=n.get(Jt[xs]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,xo,0)}i.blitFramebuffer(0,0,Ni,Rr,0,0,Ni,Rr,Vr,i.NEAREST),k&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,_s)}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Fi)for(let xs=0;xs<Jt.length;xs++){t.bindFramebuffer(i.FRAMEBUFFER,mr.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+xs,i.RENDERBUFFER,mr.__webglColorRenderbuffer[xs]);const Js=n.get(Jt[xs]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,mr.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+xs,i.TEXTURE_2D,Js,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,mr.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ar,this.setupFrameBufferTexture=Br,this.useMultisampledRTT=Eo}function Xne(i,e,t){const n=t.isWebGL2;return{convert:function r(s,a=oy){let l;if(s===Hv)return i.UNSIGNED_BYTE;if(s===oZ)return i.UNSIGNED_SHORT_4_4_4_4;if(s===aZ)return i.UNSIGNED_SHORT_5_5_5_1;if(s===iZ)return i.BYTE;if(s===rZ)return i.SHORT;if(s===k6)return i.UNSIGNED_SHORT;if(s===sZ)return i.INT;if(s===Vv)return i.UNSIGNED_INT;if(s===sy)return i.FLOAT;if(s===VM)return n?i.HALF_FLOAT:(l=e.get("OES_texture_half_float"),null!==l?l.HALF_FLOAT_OES:null);if(s===lZ)return i.ALPHA;if(s===Vp)return i.RGBA;if(s===cZ)return i.LUMINANCE;if(s===uZ)return i.LUMINANCE_ALPHA;if(s===Gv)return i.DEPTH_COMPONENT;if(s===ew)return i.DEPTH_STENCIL;if(s===u5)return l=e.get("EXT_sRGB"),null!==l?l.SRGB_ALPHA_EXT:null;if(s===hZ)return i.RED;if(s===dZ)return i.RED_INTEGER;if(s===fZ)return i.RG;if(s===pZ)return i.RG_INTEGER;if(s===AZ)return i.RGBA_INTEGER;if(s===e5||s===t5||s===n5||s===r5)if(a===Jo){if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===l)return null;if(s===e5)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===t5)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===n5)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===r5)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(l=e.get("WEBGL_compressed_texture_s3tc"),null===l)return null;if(s===e5)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===t5)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===n5)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===r5)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(s===O6||s===L6||s===N6||s===U6){if(l=e.get("WEBGL_compressed_texture_pvrtc"),null===l)return null;if(s===O6)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===L6)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===N6)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===U6)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(s===mZ)return l=e.get("WEBGL_compressed_texture_etc1"),null!==l?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===z6||s===H6){if(l=e.get("WEBGL_compressed_texture_etc"),null===l)return null;if(s===z6)return a===Jo?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===H6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}if(s===V6||s===G6||s===q6||s===Q6||s===W6||s===j6||s===$6||s===X6||s===K6||s===Y6||s===Z6||s===J6||s===eN||s===tN){if(l=e.get("WEBGL_compressed_texture_astc"),null===l)return null;if(s===V6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===G6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===q6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Q6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===W6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===j6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===$6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===X6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===K6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Y6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Z6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===J6)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===eN)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===tN)return a===Jo?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}if(s===s5){if(l=e.get("EXT_texture_compression_bptc"),null===l)return null;if(s===s5)return a===Jo?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(s===gZ||s===nN||s===iN||s===rN){if(l=e.get("EXT_texture_compression_rgtc"),null===l)return null;if(s===s5)return l.COMPRESSED_RED_RGTC1_EXT;if(s===nN)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===iN)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===rN)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return s===Jx?n?i.UNSIGNED_INT_24_8:(l=e.get("WEBGL_depth_texture"),null!==l?l.UNSIGNED_INT_24_8_WEBGL:null):void 0!==i[s]?i[s]:null}}}class h7 extends Lh{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Wu extends Tc{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Kne={type:"move"};class H5{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Wu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Wu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new kt,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new kt),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Wu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new kt,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new kt),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,a=null;const l=this._targetRay,u=this._grip,d=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(d&&e.hand){a=!0;for(const se of e.hand.values()){const he=t.getJointPose(se,n),re=this._getHandJoint(d,se);null!==he&&(re.matrix.fromArray(he.transform.matrix),re.matrix.decompose(re.position,re.rotation,re.scale),re.matrixWorldNeedsUpdate=!0,re.jointRadius=he.radius),re.visible=null!==he}const C=d.joints["index-finger-tip"].position.distanceTo(d.joints["thumb-tip"].position),k=.02,Q=.005;d.inputState.pinching&&C>k+Q?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!d.inputState.pinching&&C<=k-Q&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==u&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),null!==s&&(u.matrix.fromArray(s.transform.matrix),u.matrix.decompose(u.position,u.rotation,u.scale),u.matrixWorldNeedsUpdate=!0,s.linearVelocity?(u.hasLinearVelocity=!0,u.linearVelocity.copy(s.linearVelocity)):u.hasLinearVelocity=!1,s.angularVelocity?(u.hasAngularVelocity=!0,u.angularVelocity.copy(s.angularVelocity)):u.hasAngularVelocity=!1));null!==l&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==s&&(r=s),null!==r&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(Kne)))}return null!==l&&(l.visible=null!==r),null!==u&&(u.visible=null!==s),null!==d&&(d.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Wu;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Yne extends kA{constructor(e,t,n,r,s,a,l,u,d,A){if((A=void 0!==A?A:Gv)!==Gv&&A!==ew)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&A===Gv&&(n=Vv),void 0===n&&A===ew&&(n=Jx),super(null,r,s,a,l,u,A,n,d),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==l?l:ou,this.minFilter=void 0!==u?u:ou,this.flipY=!1,this.generateMipmaps=!1}}class Zne extends jv{constructor(e,t){super();const n=this;let r=null,s=1,a=null,l="local-floor",u=1,d=null,A=null,y=null,C=null,k=null,Q=null;const se=t.getContextAttributes();let he=null,re=null;const Le=[],be=[],Ye=new Set,dt=new Map,xt=new Lh;xt.layers.enable(1),xt.viewport=new Kl;const $t=new Lh;$t.layers.enable(2),$t.viewport=new Kl;const nn=[xt,$t],gt=new h7;gt.layers.enable(1),gt.layers.enable(2);let Wt=null,Nn=null;function yi(Ci){const Ii=be.indexOf(Ci.inputSource);if(-1===Ii)return;const jr=Le[Ii];void 0!==jr&&(jr.update(Ci.inputSource,Ci.frame,d||a),jr.dispatchEvent({type:Ci.type,data:Ci.inputSource}))}function Rn(){r.removeEventListener("select",yi),r.removeEventListener("selectstart",yi),r.removeEventListener("selectend",yi),r.removeEventListener("squeeze",yi),r.removeEventListener("squeezestart",yi),r.removeEventListener("squeezeend",yi),r.removeEventListener("end",Rn),r.removeEventListener("inputsourceschange",kn);for(let Ci=0;Ci<Le.length;Ci++){const Ii=be[Ci];null!==Ii&&(be[Ci]=null,Le[Ci].disconnect(Ii))}Wt=null,Nn=null,e.setRenderTarget(he),k=null,C=null,y=null,r=null,re=null,Hr.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function kn(Ci){for(let Ii=0;Ii<Ci.removed.length;Ii++){const jr=Ci.removed[Ii],Jr=be.indexOf(jr);Jr>=0&&(be[Jr]=null,Le[Jr].disconnect(jr))}for(let Ii=0;Ii<Ci.added.length;Ii++){const jr=Ci.added[Ii];let Jr=be.indexOf(jr);if(-1===Jr){for(let io=0;io<Le.length;io++){if(io>=be.length){be.push(jr),Jr=io;break}if(null===be[io]){be[io]=jr,Jr=io;break}}if(-1===Jr)break}const Bn=Le[Jr];Bn&&Bn.connect(jr)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ci){let Ii=Le[Ci];return void 0===Ii&&(Ii=new H5,Le[Ci]=Ii),Ii.getTargetRaySpace()},this.getControllerGrip=function(Ci){let Ii=Le[Ci];return void 0===Ii&&(Ii=new H5,Le[Ci]=Ii),Ii.getGripSpace()},this.getHand=function(Ci){let Ii=Le[Ci];return void 0===Ii&&(Ii=new H5,Le[Ci]=Ii),Ii.getHandSpace()},this.setFramebufferScaleFactor=function(Ci){s=Ci,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ci){l=Ci,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return d||a},this.setReferenceSpace=function(Ci){d=Ci},this.getBaseLayer=function(){return null!==C?C:k},this.getBinding=function(){return y},this.getFrame=function(){return Q},this.getSession=function(){return r},this.setSession=function(){var Ci=(0,Hp.Z)(function*(Ii){if(r=Ii,null!==r){if(he=e.getRenderTarget(),r.addEventListener("select",yi),r.addEventListener("selectstart",yi),r.addEventListener("selectend",yi),r.addEventListener("squeeze",yi),r.addEventListener("squeezestart",yi),r.addEventListener("squeezeend",yi),r.addEventListener("end",Rn),r.addEventListener("inputsourceschange",kn),!0!==se.xrCompatible&&(yield t.makeXRCompatible()),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2)k=new XRWebGLLayer(r,t,{antialias:void 0!==r.renderState.layers||se.antialias,alpha:!0,depth:se.depth,stencil:se.stencil,framebufferScaleFactor:s}),r.updateRenderState({baseLayer:k}),re=new Sf(k.framebufferWidth,k.framebufferHeight,{format:Vp,type:Hv,colorSpace:e.outputColorSpace,stencilBuffer:se.stencil});else{let jr=null,Jr=null,Bn=null;se.depth&&(Bn=se.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,jr=se.stencil?ew:Gv,Jr=se.stencil?Jx:Vv);const io={colorFormat:t.RGBA8,depthFormat:Bn,scaleFactor:s};y=new XRWebGLBinding(r,t),C=y.createProjectionLayer(io),r.updateRenderState({layers:[C]}),re=new Sf(C.textureWidth,C.textureHeight,{format:Vp,type:Hv,depthTexture:new Yne(C.textureWidth,C.textureHeight,Jr,void 0,void 0,void 0,void 0,void 0,void 0,jr),stencilBuffer:se.stencil,colorSpace:e.outputColorSpace,samples:se.antialias?4:0}),e.properties.get(re).__ignoreDepthValues=C.ignoreDepthValues}re.isXRRenderTarget=!0,this.setFoveation(u),d=null,a=yield r.requestReferenceSpace(l),Hr.setContext(r),Hr.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}});return function(Ii){return Ci.apply(this,arguments)}}(),this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const li=new kt,Wn=new kt;function si(Ci,Ii){null===Ii?Ci.matrixWorld.copy(Ci.matrix):Ci.matrixWorld.multiplyMatrices(Ii.matrixWorld,Ci.matrix),Ci.matrixWorldInverse.copy(Ci.matrixWorld).invert()}this.updateCamera=function(Ci){if(null===r)return;gt.near=$t.near=xt.near=Ci.near,gt.far=$t.far=xt.far=Ci.far,(Wt!==gt.near||Nn!==gt.far)&&(r.updateRenderState({depthNear:gt.near,depthFar:gt.far}),Wt=gt.near,Nn=gt.far);const Ii=Ci.parent,jr=gt.cameras;si(gt,Ii);for(let Jr=0;Jr<jr.length;Jr++)si(jr[Jr],Ii);2===jr.length?function ni(Ci,Ii,jr){li.setFromMatrixPosition(Ii.matrixWorld),Wn.setFromMatrixPosition(jr.matrixWorld);const Jr=li.distanceTo(Wn),Bn=Ii.projectionMatrix.elements,io=jr.projectionMatrix.elements,qs=Bn[14]/(Bn[10]-1),Br=Bn[14]/(Bn[10]+1),Ls=(Bn[9]+1)/Bn[5],Tr=(Bn[9]-1)/Bn[5],ar=(Bn[8]-1)/Bn[0],Cr=(io[8]+1)/io[0],zs=qs*ar,hs=qs*Cr,Ho=Jr/(-ar+Cr),Vo=Ho*-ar;Ii.matrixWorld.decompose(Ci.position,Ci.quaternion,Ci.scale),Ci.translateX(Vo),Ci.translateZ(Ho),Ci.matrixWorld.compose(Ci.position,Ci.quaternion,Ci.scale),Ci.matrixWorldInverse.copy(Ci.matrixWorld).invert();const Eo=qs+Ho,ba=Br+Ho;Ci.projectionMatrix.makePerspective(zs-Vo,hs+(Jr-Vo),Ls*Br/ba*Eo,Tr*Br/ba*Eo,Eo,ba),Ci.projectionMatrixInverse.copy(Ci.projectionMatrix).invert()}(gt,xt,$t):gt.projectionMatrix.copy(xt.projectionMatrix),function Ei(Ci,Ii,jr){null===jr?Ci.matrix.copy(Ii.matrixWorld):(Ci.matrix.copy(jr.matrixWorld),Ci.matrix.invert(),Ci.matrix.multiply(Ii.matrixWorld)),Ci.matrix.decompose(Ci.position,Ci.quaternion,Ci.scale),Ci.updateMatrixWorld(!0);const Jr=Ci.children;for(let Bn=0,io=Jr.length;Bn<io;Bn++)Jr[Bn].updateMatrixWorld(!0);Ci.projectionMatrix.copy(Ii.projectionMatrix),Ci.projectionMatrixInverse.copy(Ii.projectionMatrixInverse),Ci.isPerspectiveCamera&&(Ci.fov=2*rw*Math.atan(1/Ci.projectionMatrix.elements[5]),Ci.zoom=1)}(Ci,gt,Ii)},this.getCamera=function(){return gt},this.getFoveation=function(){if(null!==C||null!==k)return u},this.setFoveation=function(Ci){u=Ci,null!==C&&(C.fixedFoveation=Ci),null!==k&&void 0!==k.fixedFoveation&&(k.fixedFoveation=Ci)},this.getPlanes=function(){return Ye};let Ki=null;const Hr=new LN;Hr.setAnimationLoop(function Zr(Ci,Ii){if(A=Ii.getViewerPose(d||a),Q=Ii,null!==A){const jr=A.views;null!==k&&(e.setRenderTargetFramebuffer(re,k.framebuffer),e.setRenderTarget(re));let Jr=!1;jr.length!==gt.cameras.length&&(gt.cameras.length=0,Jr=!0);for(let Bn=0;Bn<jr.length;Bn++){const io=jr[Bn];let qs=null;if(null!==k)qs=k.getViewport(io);else{const Ls=y.getViewSubImage(C,io);qs=Ls.viewport,0===Bn&&(e.setRenderTargetTextures(re,Ls.colorTexture,C.ignoreDepthValues?void 0:Ls.depthStencilTexture),e.setRenderTarget(re))}let Br=nn[Bn];void 0===Br&&(Br=new Lh,Br.layers.enable(Bn),Br.viewport=new Kl,nn[Bn]=Br),Br.matrix.fromArray(io.transform.matrix),Br.matrix.decompose(Br.position,Br.quaternion,Br.scale),Br.projectionMatrix.fromArray(io.projectionMatrix),Br.projectionMatrixInverse.copy(Br.projectionMatrix).invert(),Br.viewport.set(qs.x,qs.y,qs.width,qs.height),0===Bn&&(gt.matrix.copy(Br.matrix),gt.matrix.decompose(gt.position,gt.quaternion,gt.scale)),!0===Jr&&gt.cameras.push(Br)}}for(let jr=0;jr<Le.length;jr++){const Jr=be[jr],Bn=Le[jr];null!==Jr&&void 0!==Bn&&Bn.update(Jr,Ii,d||a)}if(Ki&&Ki(Ci,Ii),Ii.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:Ii.detectedPlanes});let jr=null;for(const Jr of Ye)Ii.detectedPlanes.has(Jr)||(null===jr&&(jr=[]),jr.push(Jr));if(null!==jr)for(const Jr of jr)Ye.delete(Jr),dt.delete(Jr),n.dispatchEvent({type:"planeremoved",data:Jr});for(const Jr of Ii.detectedPlanes)if(Ye.has(Jr)){const Bn=dt.get(Jr);Jr.lastChangedTime>Bn&&(dt.set(Jr,Jr.lastChangedTime),n.dispatchEvent({type:"planechanged",data:Jr}))}else Ye.add(Jr),dt.set(Jr,Ii.lastChangedTime),n.dispatchEvent({type:"planeadded",data:Jr})}Q=null}),this.setAnimationLoop=function(Ci){Ki=Ci},this.dispose=function(){}}}function Jne(i,e){function t(he,re){!0===he.matrixAutoUpdate&&he.updateMatrix(),re.value.copy(he.matrix)}function s(he,re){he.opacity.value=re.opacity,re.color&&he.diffuse.value.copy(re.color),re.emissive&&he.emissive.value.copy(re.emissive).multiplyScalar(re.emissiveIntensity),re.map&&(he.map.value=re.map,t(re.map,he.mapTransform)),re.alphaMap&&(he.alphaMap.value=re.alphaMap,t(re.alphaMap,he.alphaMapTransform)),re.bumpMap&&(he.bumpMap.value=re.bumpMap,t(re.bumpMap,he.bumpMapTransform),he.bumpScale.value=re.bumpScale,re.side===cp&&(he.bumpScale.value*=-1)),re.normalMap&&(he.normalMap.value=re.normalMap,t(re.normalMap,he.normalMapTransform),he.normalScale.value.copy(re.normalScale),re.side===cp&&he.normalScale.value.negate()),re.displacementMap&&(he.displacementMap.value=re.displacementMap,t(re.displacementMap,he.displacementMapTransform),he.displacementScale.value=re.displacementScale,he.displacementBias.value=re.displacementBias),re.emissiveMap&&(he.emissiveMap.value=re.emissiveMap,t(re.emissiveMap,he.emissiveMapTransform)),re.specularMap&&(he.specularMap.value=re.specularMap,t(re.specularMap,he.specularMapTransform)),re.alphaTest>0&&(he.alphaTest.value=re.alphaTest);const Le=e.get(re).envMap;if(Le&&(he.envMap.value=Le,he.flipEnvMap.value=Le.isCubeTexture&&!1===Le.isRenderTargetTexture?-1:1,he.reflectivity.value=re.reflectivity,he.ior.value=re.ior,he.refractionRatio.value=re.refractionRatio),re.lightMap){he.lightMap.value=re.lightMap;const be=!0===i.useLegacyLights?Math.PI:1;he.lightMapIntensity.value=re.lightMapIntensity*be,t(re.lightMap,he.lightMapTransform)}re.aoMap&&(he.aoMap.value=re.aoMap,he.aoMapIntensity.value=re.aoMapIntensity,t(re.aoMap,he.aoMapTransform))}return{refreshFogUniforms:function n(he,re){re.color.getRGB(he.fogColor.value,ON(i)),re.isFog?(he.fogNear.value=re.near,he.fogFar.value=re.far):re.isFogExp2&&(he.fogDensity.value=re.density)},refreshMaterialUniforms:function r(he,re,Le,be,Ye){re.isMeshBasicMaterial||re.isMeshLambertMaterial?s(he,re):re.isMeshToonMaterial?(s(he,re),function y(he,re){re.gradientMap&&(he.gradientMap.value=re.gradientMap)}(he,re)):re.isMeshPhongMaterial?(s(he,re),function A(he,re){he.specular.value.copy(re.specular),he.shininess.value=Math.max(re.shininess,1e-4)}(he,re)):re.isMeshStandardMaterial?(s(he,re),function C(he,re){he.metalness.value=re.metalness,re.metalnessMap&&(he.metalnessMap.value=re.metalnessMap,t(re.metalnessMap,he.metalnessMapTransform)),he.roughness.value=re.roughness,re.roughnessMap&&(he.roughnessMap.value=re.roughnessMap,t(re.roughnessMap,he.roughnessMapTransform)),e.get(re).envMap&&(he.envMapIntensity.value=re.envMapIntensity)}(he,re),re.isMeshPhysicalMaterial&&function k(he,re,Le){he.ior.value=re.ior,re.sheen>0&&(he.sheenColor.value.copy(re.sheenColor).multiplyScalar(re.sheen),he.sheenRoughness.value=re.sheenRoughness,re.sheenColorMap&&(he.sheenColorMap.value=re.sheenColorMap,t(re.sheenColorMap,he.sheenColorMapTransform)),re.sheenRoughnessMap&&(he.sheenRoughnessMap.value=re.sheenRoughnessMap,t(re.sheenRoughnessMap,he.sheenRoughnessMapTransform))),re.clearcoat>0&&(he.clearcoat.value=re.clearcoat,he.clearcoatRoughness.value=re.clearcoatRoughness,re.clearcoatMap&&(he.clearcoatMap.value=re.clearcoatMap,t(re.clearcoatMap,he.clearcoatMapTransform)),re.clearcoatRoughnessMap&&(he.clearcoatRoughnessMap.value=re.clearcoatRoughnessMap,t(re.clearcoatRoughnessMap,he.clearcoatRoughnessMapTransform)),re.clearcoatNormalMap&&(he.clearcoatNormalMap.value=re.clearcoatNormalMap,t(re.clearcoatNormalMap,he.clearcoatNormalMapTransform),he.clearcoatNormalScale.value.copy(re.clearcoatNormalScale),re.side===cp&&he.clearcoatNormalScale.value.negate())),re.iridescence>0&&(he.iridescence.value=re.iridescence,he.iridescenceIOR.value=re.iridescenceIOR,he.iridescenceThicknessMinimum.value=re.iridescenceThicknessRange[0],he.iridescenceThicknessMaximum.value=re.iridescenceThicknessRange[1],re.iridescenceMap&&(he.iridescenceMap.value=re.iridescenceMap,t(re.iridescenceMap,he.iridescenceMapTransform)),re.iridescenceThicknessMap&&(he.iridescenceThicknessMap.value=re.iridescenceThicknessMap,t(re.iridescenceThicknessMap,he.iridescenceThicknessMapTransform))),re.transmission>0&&(he.transmission.value=re.transmission,he.transmissionSamplerMap.value=Le.texture,he.transmissionSamplerSize.value.set(Le.width,Le.height),re.transmissionMap&&(he.transmissionMap.value=re.transmissionMap,t(re.transmissionMap,he.transmissionMapTransform)),he.thickness.value=re.thickness,re.thicknessMap&&(he.thicknessMap.value=re.thicknessMap,t(re.thicknessMap,he.thicknessMapTransform)),he.attenuationDistance.value=re.attenuationDistance,he.attenuationColor.value.copy(re.attenuationColor)),he.specularIntensity.value=re.specularIntensity,he.specularColor.value.copy(re.specularColor),re.specularColorMap&&(he.specularColorMap.value=re.specularColorMap,t(re.specularColorMap,he.specularColorMapTransform)),re.specularIntensityMap&&(he.specularIntensityMap.value=re.specularIntensityMap,t(re.specularIntensityMap,he.specularIntensityMapTransform))}(he,re,Ye)):re.isMeshMatcapMaterial?(s(he,re),function Q(he,re){re.matcap&&(he.matcap.value=re.matcap)}(he,re)):re.isMeshDepthMaterial?s(he,re):re.isMeshDistanceMaterial?(s(he,re),function se(he,re){const Le=e.get(re).light;he.referencePosition.value.setFromMatrixPosition(Le.matrixWorld),he.nearDistance.value=Le.shadow.camera.near,he.farDistance.value=Le.shadow.camera.far}(he,re)):re.isMeshNormalMaterial?s(he,re):re.isLineBasicMaterial?(function a(he,re){he.diffuse.value.copy(re.color),he.opacity.value=re.opacity,re.map&&(he.map.value=re.map,t(re.map,he.mapTransform))}(he,re),re.isLineDashedMaterial&&function l(he,re){he.dashSize.value=re.dashSize,he.totalSize.value=re.dashSize+re.gapSize,he.scale.value=re.scale}(he,re)):re.isPointsMaterial?function u(he,re,Le,be){he.diffuse.value.copy(re.color),he.opacity.value=re.opacity,he.size.value=re.size*Le,he.scale.value=.5*be,re.map&&(he.map.value=re.map,t(re.map,he.uvTransform)),re.alphaMap&&(he.alphaMap.value=re.alphaMap),re.alphaTest>0&&(he.alphaTest.value=re.alphaTest)}(he,re,Le,be):re.isSpriteMaterial?function d(he,re){he.diffuse.value.copy(re.color),he.opacity.value=re.opacity,he.rotation.value=re.rotation,re.map&&(he.map.value=re.map,t(re.map,he.mapTransform)),re.alphaMap&&(he.alphaMap.value=re.alphaMap),re.alphaTest>0&&(he.alphaTest.value=re.alphaTest)}(he,re):re.isShadowMaterial?(he.color.value.copy(re.color),he.opacity.value=re.opacity):re.isShaderMaterial&&(re.uniformsNeedUpdate=!1)}}}function eie(i,e,t,n){let r={},s={},a=[];const l=t.isWebGL2?i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS):0;function k(Le,be,Ye){const dt=Le.value;if(void 0===Ye[be]){if("number"==typeof dt)Ye[be]=dt;else{const xt=Array.isArray(dt)?dt:[dt],$t=[];for(let nn=0;nn<xt.length;nn++)$t.push(xt[nn].clone());Ye[be]=$t}return!0}if("number"==typeof dt){if(Ye[be]!==dt)return Ye[be]=dt,!0}else{const xt=Array.isArray(Ye[be])?Ye[be]:[Ye[be]],$t=Array.isArray(dt)?dt:[dt];for(let nn=0;nn<xt.length;nn++){const gt=xt[nn];if(!1===gt.equals($t[nn]))return gt.copy($t[nn]),!0}}return!1}function se(Le){const be={boundary:0,storage:0};return"number"==typeof Le?(be.boundary=4,be.storage=4):Le.isVector2?(be.boundary=8,be.storage=8):Le.isVector3||Le.isColor?(be.boundary=16,be.storage=12):Le.isVector4?(be.boundary=16,be.storage=16):Le.isMatrix3?(be.boundary=48,be.storage=48):Le.isMatrix4?(be.boundary=64,be.storage=64):Le.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Le),be}function he(Le){const be=Le.target;be.removeEventListener("dispose",he);const Ye=a.indexOf(be.__bindingPointIndex);a.splice(Ye,1),i.deleteBuffer(r[be.id]),delete r[be.id],delete s[be.id]}return{bind:function u(Le,be){n.uniformBlockBinding(Le,be.program)},update:function d(Le,be){let Ye=r[Le.id];void 0===Ye&&(function Q(Le){const be=Le.uniforms;let Ye=0;let xt=0;for(let $t=0,nn=be.length;$t<nn;$t++){const gt=be[$t],Wt={boundary:0,storage:0},Nn=Array.isArray(gt.value)?gt.value:[gt.value];for(let yi=0,Rn=Nn.length;yi<Rn;yi++){const li=se(Nn[yi]);Wt.boundary+=li.boundary,Wt.storage+=li.storage}gt.__data=new Float32Array(Wt.storage/Float32Array.BYTES_PER_ELEMENT),gt.__offset=Ye,$t>0&&(xt=Ye%16,0!==xt&&16-xt-Wt.boundary<0&&(Ye+=16-xt,gt.__offset=Ye)),Ye+=Wt.storage}xt=Ye%16,xt>0&&(Ye+=16-xt),Le.__size=Ye,Le.__cache={}}(Le),Ye=function A(Le){const be=function y(){for(let Le=0;Le<l;Le++)if(-1===a.indexOf(Le))return a.push(Le),Le;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();Le.__bindingPointIndex=be;const Ye=i.createBuffer(),dt=Le.__size,xt=Le.usage;return i.bindBuffer(i.UNIFORM_BUFFER,Ye),i.bufferData(i.UNIFORM_BUFFER,dt,xt),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,be,Ye),Ye}(Le),r[Le.id]=Ye,Le.addEventListener("dispose",he)),n.updateUBOMapping(Le,be.program);const xt=e.render.frame;s[Le.id]!==xt&&(function C(Le){const Ye=Le.uniforms,dt=Le.__cache;i.bindBuffer(i.UNIFORM_BUFFER,r[Le.id]);for(let xt=0,$t=Ye.length;xt<$t;xt++){const nn=Ye[xt];if(!0===k(nn,xt,dt)){const gt=nn.__offset,Wt=Array.isArray(nn.value)?nn.value:[nn.value];let Nn=0;for(let yi=0;yi<Wt.length;yi++){const Rn=Wt[yi],kn=se(Rn);"number"==typeof Rn?(nn.__data[0]=Rn,i.bufferSubData(i.UNIFORM_BUFFER,gt+Nn,nn.__data)):Rn.isMatrix3?(nn.__data[0]=Rn.elements[0],nn.__data[1]=Rn.elements[1],nn.__data[2]=Rn.elements[2],nn.__data[3]=Rn.elements[0],nn.__data[4]=Rn.elements[3],nn.__data[5]=Rn.elements[4],nn.__data[6]=Rn.elements[5],nn.__data[7]=Rn.elements[0],nn.__data[8]=Rn.elements[6],nn.__data[9]=Rn.elements[7],nn.__data[10]=Rn.elements[8],nn.__data[11]=Rn.elements[0]):(Rn.toArray(nn.__data,Nn),Nn+=kn.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,gt,nn.__data)}}i.bindBuffer(i.UNIFORM_BUFFER,null)}(Le),s[Le.id]=xt)},dispose:function re(){for(const Le in r)i.deleteBuffer(r[Le]);a=[],r={},s={}}}}function tie(){const i=qM("canvas");return i.style.display="block",i}class V5{constructor(e={}){const{canvas:t=tie(),context:n=null,depth:r=!0,stencil:s=!0,alpha:a=!1,antialias:l=!1,premultipliedAlpha:u=!0,preserveDrawingBuffer:d=!1,powerPreference:A="default",failIfMajorPerformanceCaveat:y=!1}=e;let C;this.isWebGLRenderer=!0,C=null!==n?n.getContextAttributes().alpha:a;let k=null,Q=null;const se=[],he=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Jo,this.useLegacyLights=!0,this.toneMapping=I_,this.toneMappingExposure=1;const re=this;let Le=!1,be=0,Ye=0,dt=null,xt=-1,$t=null;const nn=new Kl,gt=new Kl;let Wt=null,Nn=t.width,yi=t.height,Rn=1,kn=null,li=null;const Wn=new Kl(0,0,Nn,yi),ni=new Kl(0,0,Nn,yi);let si=!1;const Ei=new R5;let Ki=!1,Zr=!1,Hr=null;const Ci=new ea,Ii=new kt,jr={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Jr(){return null===dt?Rn:1}let qs,Br,Ls,Tr,ar,Cr,zs,hs,Ho,Vo,Eo,ba,yl,yn,Jt,Ni,Rr,Vr,_s,On,mr,Fi,xs,Js,Bn=n;function io(cn,Si){for(let nr=0;nr<cn.length;nr++){const fr=t.getContext(cn[nr],Si);if(null!==fr)return fr}return null}try{const cn={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:u,preserveDrawingBuffer:d,powerPreference:A,failIfMajorPerformanceCaveat:y};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${jx}`),t.addEventListener("webglcontextlost",Ao,!1),t.addEventListener("webglcontextrestored",la,!1),t.addEventListener("webglcontextcreationerror",qa,!1),null===Bn){const Si=["webgl2","webgl","experimental-webgl"];if(!0===re.isWebGL1Renderer&&Si.shift(),Bn=io(Si,cn),null===Bn)throw io(Si)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Bn.getShaderPrecisionFormat&&(Bn.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(cn){throw console.error("THREE.WebGLRenderer: "+cn.message),cn}function xo(){qs=new Ate(Bn),Br=new cte(Bn,qs,e),qs.init(Br),Fi=new Xne(Bn,qs,Br),Ls=new jne(Bn,qs,Br),Tr=new _te(Bn),ar=new kne,Cr=new $ne(Bn,qs,Ls,ar,Br,Fi,Tr),zs=new hte(re),hs=new pte(re),Ho=new uJ(Bn,Br),xs=new ate(Bn,qs,Ho,Br),Vo=new mte(Bn,Ho,Tr,xs),Eo=new xte(Bn,Vo,Ho,Tr),_s=new bte(Bn,Br,Cr),Ni=new ute(ar),ba=new Rne(re,zs,hs,qs,Br,xs,Ni),yl=new Jne(re,ar),yn=new Lne,Jt=new Gne(qs,Br),Vr=new ote(re,zs,hs,Ls,Eo,C,u),Rr=new Wne(re,Eo,Br),Js=new eie(Bn,Tr,Br,Ls),On=new lte(Bn,qs,Tr,Br),mr=new gte(Bn,qs,Tr,Br),Tr.programs=ba.programs,re.capabilities=Br,re.extensions=qs,re.properties=ar,re.renderLists=yn,re.shadowMap=Rr,re.state=Ls,re.info=Tr}xo();const Ns=new Zne(re,Bn);function Ao(cn){cn.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Le=!0}function la(){console.log("THREE.WebGLRenderer: Context Restored."),Le=!1;const cn=Tr.autoReset,Si=Rr.enabled,nr=Rr.autoUpdate,gi=Rr.needsUpdate,fr=Rr.type;xo(),Tr.autoReset=cn,Rr.enabled=Si,Rr.autoUpdate=nr,Rr.needsUpdate=gi,Rr.type=fr}function qa(cn){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",cn.statusMessage)}function Du(cn){const Si=cn.target;Si.removeEventListener("dispose",Du),function qn(cn){(function tr(cn){const Si=ar.get(cn).programs;void 0!==Si&&(Si.forEach(function(nr){ba.releaseProgram(nr)}),cn.isShaderMaterial&&ba.releaseShaderCache(cn))})(cn),ar.remove(cn)}(Si)}this.xr=Ns,this.getContext=function(){return Bn},this.getContextAttributes=function(){return Bn.getContextAttributes()},this.forceContextLoss=function(){const cn=qs.get("WEBGL_lose_context");cn&&cn.loseContext()},this.forceContextRestore=function(){const cn=qs.get("WEBGL_lose_context");cn&&cn.restoreContext()},this.getPixelRatio=function(){return Rn},this.setPixelRatio=function(cn){void 0!==cn&&(Rn=cn,this.setSize(Nn,yi,!1))},this.getSize=function(cn){return cn.set(Nn,yi)},this.setSize=function(cn,Si,nr=!0){Ns.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Nn=cn,yi=Si,t.width=Math.floor(cn*Rn),t.height=Math.floor(Si*Rn),!0===nr&&(t.style.width=cn+"px",t.style.height=Si+"px"),this.setViewport(0,0,cn,Si))},this.getDrawingBufferSize=function(cn){return cn.set(Nn*Rn,yi*Rn).floor()},this.setDrawingBufferSize=function(cn,Si,nr){Nn=cn,yi=Si,Rn=nr,t.width=Math.floor(cn*nr),t.height=Math.floor(Si*nr),this.setViewport(0,0,cn,Si)},this.getCurrentViewport=function(cn){return cn.copy(nn)},this.getViewport=function(cn){return cn.copy(Wn)},this.setViewport=function(cn,Si,nr,gi){cn.isVector4?Wn.set(cn.x,cn.y,cn.z,cn.w):Wn.set(cn,Si,nr,gi),Ls.viewport(nn.copy(Wn).multiplyScalar(Rn).floor())},this.getScissor=function(cn){return cn.copy(ni)},this.setScissor=function(cn,Si,nr,gi){cn.isVector4?ni.set(cn.x,cn.y,cn.z,cn.w):ni.set(cn,Si,nr,gi),Ls.scissor(gt.copy(ni).multiplyScalar(Rn).floor())},this.getScissorTest=function(){return si},this.setScissorTest=function(cn){Ls.setScissorTest(si=cn)},this.setOpaqueSort=function(cn){kn=cn},this.setTransparentSort=function(cn){li=cn},this.getClearColor=function(cn){return cn.copy(Vr.getClearColor())},this.setClearColor=function(){Vr.setClearColor.apply(Vr,arguments)},this.getClearAlpha=function(){return Vr.getClearAlpha()},this.setClearAlpha=function(){Vr.setClearAlpha.apply(Vr,arguments)},this.clear=function(cn=!0,Si=!0,nr=!0){let gi=0;cn&&(gi|=Bn.COLOR_BUFFER_BIT),Si&&(gi|=Bn.DEPTH_BUFFER_BIT),nr&&(gi|=Bn.STENCIL_BUFFER_BIT),Bn.clear(gi)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ao,!1),t.removeEventListener("webglcontextrestored",la,!1),t.removeEventListener("webglcontextcreationerror",qa,!1),yn.dispose(),Jt.dispose(),ar.dispose(),zs.dispose(),hs.dispose(),Eo.dispose(),xs.dispose(),Js.dispose(),ba.dispose(),Ns.dispose(),Ns.removeEventListener("sessionstart",wo),Ns.removeEventListener("sessionend",lc),Hr&&(Hr.dispose(),Hr=null),cc.stop()},this.renderBufferDirect=function(cn,Si,nr,gi,fr,Oo){null===Si&&(Si=jr);const Ko=fr.isMesh&&fr.matrixWorld.determinant()<0,ca=function Nge(cn,Si,nr,gi,fr){!0!==Si.isScene&&(Si=jr),Cr.resetTextureUnits();const Oo=Si.fog,ca=null===dt?re.outputColorSpace:!0===dt.isXRRenderTarget?dt.texture.colorSpace:Pm,za=(gi.isMeshStandardMaterial?hs:zs).get(gi.envMap||(gi.isMeshStandardMaterial?Si.environment:null)),Za=!0===gi.vertexColors&&!!nr.attributes.color&&4===nr.attributes.color.itemSize,Ja=!!gi.normalMap&&!!nr.attributes.tangent,ol=!!nr.morphAttributes.position,Yl=!!nr.morphAttributes.normal,Rf=!!nr.morphAttributes.color,Qm=gi.toneMapped?re.toneMapping:I_,Fb=nr.morphAttributes.position||nr.morphAttributes.normal||nr.morphAttributes.color,Ku=void 0!==Fb?Fb.length:0,vl=ar.get(gi),mk=Q.state.lights;!0!==Ki||!0!==Zr&&cn===$t||Ni.setState(gi,cn,cn===$t&&gi.id===xt);let Vh=!1;gi.version===vl.__version?(vl.needsLights&&vl.lightsStateVersion!==mk.state.version||vl.outputColorSpace!==ca||fr.isInstancedMesh&&!1===vl.instancing||!fr.isInstancedMesh&&!0===vl.instancing||fr.isSkinnedMesh&&!1===vl.skinning||!fr.isSkinnedMesh&&!0===vl.skinning||vl.envMap!==za||!0===gi.fog&&vl.fog!==Oo||void 0!==vl.numClippingPlanes&&(vl.numClippingPlanes!==Ni.numPlanes||vl.numIntersection!==Ni.numIntersection)||vl.vertexAlphas!==Za||vl.vertexTangents!==Ja||vl.morphTargets!==ol||vl.morphNormals!==Yl||vl.morphColors!==Rf||vl.toneMapping!==Qm||!0===Br.isWebGL2&&vl.morphTargetsCount!==Ku)&&(Vh=!0):(Vh=!0,vl.__version=gi.version);let Rb=vl.currentProgram;!0===Vh&&(Rb=aD(gi,Si,fr));let jG=!1,gS=!1,gk=!1;const kf=Rb.getUniforms(),kb=vl.uniforms;if(Ls.useProgram(Rb.program)&&(jG=!0,gS=!0,gk=!0),gi.id!==xt&&(xt=gi.id,gS=!0),jG||$t!==cn){if(kf.setValue(Bn,"projectionMatrix",cn.projectionMatrix),Br.logarithmicDepthBuffer&&kf.setValue(Bn,"logDepthBufFC",2/(Math.log(cn.far+1)/Math.LN2)),$t!==cn&&($t=cn,gS=!0,gk=!0),gi.isShaderMaterial||gi.isMeshPhongMaterial||gi.isMeshToonMaterial||gi.isMeshStandardMaterial||gi.envMap){const Zp=kf.map.cameraPosition;void 0!==Zp&&Zp.setValue(Bn,Ii.setFromMatrixPosition(cn.matrixWorld))}(gi.isMeshPhongMaterial||gi.isMeshToonMaterial||gi.isMeshLambertMaterial||gi.isMeshBasicMaterial||gi.isMeshStandardMaterial||gi.isShaderMaterial)&&kf.setValue(Bn,"isOrthographic",!0===cn.isOrthographicCamera),(gi.isMeshPhongMaterial||gi.isMeshToonMaterial||gi.isMeshLambertMaterial||gi.isMeshBasicMaterial||gi.isMeshStandardMaterial||gi.isShaderMaterial||gi.isShadowMaterial||fr.isSkinnedMesh)&&kf.setValue(Bn,"viewMatrix",cn.matrixWorldInverse)}if(fr.isSkinnedMesh){kf.setOptional(Bn,fr,"bindMatrix"),kf.setOptional(Bn,fr,"bindMatrixInverse");const Zp=fr.skeleton;Zp&&(Br.floatVertexTextures?(null===Zp.boneTexture&&Zp.computeBoneTexture(),kf.setValue(Bn,"boneTexture",Zp.boneTexture,Cr),kf.setValue(Bn,"boneTextureSize",Zp.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const _k=nr.morphAttributes;if((void 0!==_k.position||void 0!==_k.normal||void 0!==_k.color&&!0===Br.isWebGL2)&&_s.update(fr,nr,Rb),(gS||vl.receiveShadow!==fr.receiveShadow)&&(vl.receiveShadow=fr.receiveShadow,kf.setValue(Bn,"receiveShadow",fr.receiveShadow)),gi.isMeshGouraudMaterial&&null!==gi.envMap&&(kb.envMap.value=za,kb.flipEnvMap.value=za.isCubeTexture&&!1===za.isRenderTargetTexture?-1:1),gS&&(kf.setValue(Bn,"toneMappingExposure",re.toneMappingExposure),vl.needsLights&&function Uge(cn,Si){cn.ambientLightColor.needsUpdate=Si,cn.lightProbe.needsUpdate=Si,cn.directionalLights.needsUpdate=Si,cn.directionalLightShadows.needsUpdate=Si,cn.pointLights.needsUpdate=Si,cn.pointLightShadows.needsUpdate=Si,cn.spotLights.needsUpdate=Si,cn.spotLightShadows.needsUpdate=Si,cn.rectAreaLights.needsUpdate=Si,cn.hemisphereLights.needsUpdate=Si}(kb,gk),Oo&&!0===gi.fog&&yl.refreshFogUniforms(kb,Oo),yl.refreshMaterialUniforms(kb,gi,Rn,yi,Hr),c3.upload(Bn,vl.uniformsList,kb,Cr)),gi.isShaderMaterial&&!0===gi.uniformsNeedUpdate&&(c3.upload(Bn,vl.uniformsList,kb,Cr),gi.uniformsNeedUpdate=!1),gi.isSpriteMaterial&&kf.setValue(Bn,"center",fr.center),kf.setValue(Bn,"modelViewMatrix",fr.modelViewMatrix),kf.setValue(Bn,"normalMatrix",fr.normalMatrix),kf.setValue(Bn,"modelMatrix",fr.matrixWorld),gi.isShaderMaterial||gi.isRawShaderMaterial){const Zp=gi.uniformsGroups;for(let yk=0,Hge=Zp.length;yk<Hge;yk++)if(Br.isWebGL2){const $G=Zp[yk];Js.update($G,Rb),Js.bind($G,Rb)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Rb}(cn,Si,nr,gi,fr);Ls.setMaterial(gi,Ko);let za=nr.index,Za=1;!0===gi.wireframe&&(za=Vo.getWireframeAttribute(nr),Za=2);const Ja=nr.drawRange,ol=nr.attributes.position;let Yl=Ja.start*Za,Rf=(Ja.start+Ja.count)*Za;null!==Oo&&(Yl=Math.max(Yl,Oo.start*Za),Rf=Math.min(Rf,(Oo.start+Oo.count)*Za)),null!==za?(Yl=Math.max(Yl,0),Rf=Math.min(Rf,za.count)):null!=ol&&(Yl=Math.max(Yl,0),Rf=Math.min(Rf,ol.count));const Qm=Rf-Yl;if(Qm<0||Qm===1/0)return;xs.setup(fr,gi,ca,nr,za);let Fb,Ku=On;if(null!==za&&(Fb=Ho.get(za),Ku=mr,Ku.setIndex(Fb)),fr.isMesh)!0===gi.wireframe?(Ls.setLineWidth(gi.wireframeLinewidth*Jr()),Ku.setMode(Bn.LINES)):Ku.setMode(Bn.TRIANGLES);else if(fr.isLine){let vl=gi.linewidth;void 0===vl&&(vl=1),Ls.setLineWidth(vl*Jr()),Ku.setMode(fr.isLineSegments?Bn.LINES:fr.isLineLoop?Bn.LINE_LOOP:Bn.LINE_STRIP)}else fr.isPoints?Ku.setMode(Bn.POINTS):fr.isSprite&&Ku.setMode(Bn.TRIANGLES);if(fr.isInstancedMesh)Ku.renderInstances(Yl,Qm,fr.count);else if(nr.isInstancedBufferGeometry){const mk=Math.min(nr.instanceCount,void 0!==nr._maxInstanceCount?nr._maxInstanceCount:1/0);Ku.renderInstances(Yl,Qm,mk)}else Ku.render(Yl,Qm)},this.compile=function(cn,Si){function nr(gi,fr,Oo){!0===gi.transparent&&gi.side===zd&&!1===gi.forceSinglePass?(gi.side=cp,gi.needsUpdate=!0,aD(gi,fr,Oo),gi.side=Yg,gi.needsUpdate=!0,aD(gi,fr,Oo),gi.side=zd):aD(gi,fr,Oo)}Q=Jt.get(cn),Q.init(),he.push(Q),cn.traverseVisible(function(gi){gi.isLight&&gi.layers.test(Si.layers)&&(Q.pushLight(gi),gi.castShadow&&Q.pushShadow(gi))}),Q.setupLights(re.useLegacyLights),cn.traverse(function(gi){const fr=gi.material;if(fr)if(Array.isArray(fr))for(let Oo=0;Oo<fr.length;Oo++)nr(fr[Oo],cn,gi);else nr(fr,cn,gi)}),he.pop(),Q=null};let Gr=null;function wo(){cc.stop()}function lc(){cc.start()}const cc=new LN;function Gd(cn,Si,nr,gi){if(!1===cn.visible)return;if(cn.layers.test(Si.layers))if(cn.isGroup)nr=cn.renderOrder;else if(cn.isLOD)!0===cn.autoUpdate&&cn.update(Si);else if(cn.isLight)Q.pushLight(cn),cn.castShadow&&Q.pushShadow(cn);else if(cn.isSprite){if(!cn.frustumCulled||Ei.intersectsSprite(cn)){gi&&Ii.setFromMatrixPosition(cn.matrixWorld).applyMatrix4(Ci);const Ko=Eo.update(cn),ca=cn.material;ca.visible&&k.push(cn,Ko,ca,nr,Ii.z,null)}}else if((cn.isMesh||cn.isLine||cn.isPoints)&&(!cn.frustumCulled||Ei.intersectsObject(cn))){cn.isSkinnedMesh&&cn.skeleton.frame!==Tr.render.frame&&(cn.skeleton.update(),cn.skeleton.frame=Tr.render.frame);const Ko=Eo.update(cn),ca=cn.material;if(gi&&(null===Ko.boundingSphere&&Ko.computeBoundingSphere(),Ii.copy(Ko.boundingSphere.center).applyMatrix4(cn.matrixWorld).applyMatrix4(Ci)),Array.isArray(ca)){const za=Ko.groups;for(let Za=0,Ja=za.length;Za<Ja;Za++){const ol=za[Za],Yl=ca[ol.materialIndex];Yl&&Yl.visible&&k.push(cn,Ko,Yl,nr,Ii.z,ol)}}else ca.visible&&k.push(cn,Ko,ca,nr,Ii.z,null)}const Oo=cn.children;for(let Ko=0,ca=Oo.length;Ko<ca;Ko++)Gd(Oo[Ko],Si,nr,gi)}function Iy(cn,Si,nr,gi){const fr=cn.opaque,Oo=cn.transmissive,Ko=cn.transparent;Q.setupLightsView(nr),!0===Ki&&Ni.setGlobalState(re.clippingPlanes,nr),Oo.length>0&&function Bu(cn,Si,nr,gi){if(null===Hr){const ca=Br.isWebGL2;Hr=new Sf(1024,1024,{generateMipmaps:!0,type:qs.has("EXT_color_buffer_half_float")?VM:Hv,minFilter:Jg,samples:ca&&!0===l?4:0})}const fr=re.getRenderTarget();re.setRenderTarget(Hr),re.clear();const Oo=re.toneMapping;re.toneMapping=I_,WA(cn,nr,gi),Cr.updateMultisampleRenderTarget(Hr),Cr.updateRenderTargetMipmap(Hr);let Ko=!1;for(let ca=0,za=Si.length;ca<za;ca++){const Za=Si[ca],Ja=Za.object,ol=Za.geometry,Yl=Za.material,Rf=Za.group;if(Yl.side===zd&&Ja.layers.test(gi.layers)){const Qm=Yl.side;Yl.side=cp,Yl.needsUpdate=!0,A0(Ja,nr,gi,ol,Yl,Rf),Yl.side=Qm,Yl.needsUpdate=!0,Ko=!0}}!0===Ko&&(Cr.updateMultisampleRenderTarget(Hr),Cr.updateRenderTargetMipmap(Hr)),re.setRenderTarget(fr),re.toneMapping=Oo}(fr,Oo,Si,nr),gi&&Ls.viewport(nn.copy(gi)),fr.length>0&&WA(fr,Si,nr),Oo.length>0&&WA(Oo,Si,nr),Ko.length>0&&WA(Ko,Si,nr),Ls.buffers.depth.setTest(!0),Ls.buffers.depth.setMask(!0),Ls.buffers.color.setMask(!0),Ls.setPolygonOffset(!1)}function WA(cn,Si,nr){const gi=!0===Si.isScene?Si.overrideMaterial:null;for(let fr=0,Oo=cn.length;fr<Oo;fr++){const Ko=cn[fr],ca=Ko.object,za=Ko.geometry,Za=null===gi?Ko.material:gi,Ja=Ko.group;ca.layers.test(nr.layers)&&A0(ca,Si,nr,za,Za,Ja)}}function A0(cn,Si,nr,gi,fr,Oo){cn.onBeforeRender(re,Si,nr,gi,fr,Oo),cn.modelViewMatrix.multiplyMatrices(nr.matrixWorldInverse,cn.matrixWorld),cn.normalMatrix.getNormalMatrix(cn.modelViewMatrix),fr.onBeforeRender(re,Si,nr,gi,cn,Oo),!0===fr.transparent&&fr.side===zd&&!1===fr.forceSinglePass?(fr.side=cp,fr.needsUpdate=!0,re.renderBufferDirect(nr,Si,gi,fr,cn,Oo),fr.side=Yg,fr.needsUpdate=!0,re.renderBufferDirect(nr,Si,gi,fr,cn,Oo),fr.side=zd):re.renderBufferDirect(nr,Si,gi,fr,cn,Oo),cn.onAfterRender(re,Si,nr,gi,fr,Oo)}function aD(cn,Si,nr){!0!==Si.isScene&&(Si=jr);const gi=ar.get(cn),fr=Q.state.lights,Ko=fr.state.version,ca=ba.getParameters(cn,fr.state,Q.state.shadowsArray,Si,nr),za=ba.getProgramCacheKey(ca);let Za=gi.programs;gi.environment=cn.isMeshStandardMaterial?Si.environment:null,gi.fog=Si.fog,gi.envMap=(cn.isMeshStandardMaterial?hs:zs).get(cn.envMap||gi.environment),void 0===Za&&(cn.addEventListener("dispose",Du),Za=new Map,gi.programs=Za);let Ja=Za.get(za);if(void 0!==Ja){if(gi.currentProgram===Ja&&gi.lightsStateVersion===Ko)return WG(cn,ca),Ja}else ca.uniforms=ba.getUniforms(cn),cn.onBuild(nr,ca,re),cn.onBeforeCompile(ca,re),Ja=ba.acquireProgram(ca,za),Za.set(za,Ja),gi.uniforms=ca.uniforms;const ol=gi.uniforms;(!cn.isShaderMaterial&&!cn.isRawShaderMaterial||!0===cn.clipping)&&(ol.clippingPlanes=Ni.uniform),WG(cn,ca),gi.needsLights=function zge(cn){return cn.isMeshLambertMaterial||cn.isMeshToonMaterial||cn.isMeshPhongMaterial||cn.isMeshStandardMaterial||cn.isShadowMaterial||cn.isShaderMaterial&&!0===cn.lights}(cn),gi.lightsStateVersion=Ko,gi.needsLights&&(ol.ambientLightColor.value=fr.state.ambient,ol.lightProbe.value=fr.state.probe,ol.directionalLights.value=fr.state.directional,ol.directionalLightShadows.value=fr.state.directionalShadow,ol.spotLights.value=fr.state.spot,ol.spotLightShadows.value=fr.state.spotShadow,ol.rectAreaLights.value=fr.state.rectArea,ol.ltc_1.value=fr.state.rectAreaLTC1,ol.ltc_2.value=fr.state.rectAreaLTC2,ol.pointLights.value=fr.state.point,ol.pointLightShadows.value=fr.state.pointShadow,ol.hemisphereLights.value=fr.state.hemi,ol.directionalShadowMap.value=fr.state.directionalShadowMap,ol.directionalShadowMatrix.value=fr.state.directionalShadowMatrix,ol.spotShadowMap.value=fr.state.spotShadowMap,ol.spotLightMatrix.value=fr.state.spotLightMatrix,ol.spotLightMap.value=fr.state.spotLightMap,ol.pointShadowMap.value=fr.state.pointShadowMap,ol.pointShadowMatrix.value=fr.state.pointShadowMatrix);const Yl=Ja.getUniforms(),Rf=c3.seqWithValue(Yl.seq,ol);return gi.currentProgram=Ja,gi.uniformsList=Rf,Ja}function WG(cn,Si){const nr=ar.get(cn);nr.outputColorSpace=Si.outputColorSpace,nr.instancing=Si.instancing,nr.skinning=Si.skinning,nr.morphTargets=Si.morphTargets,nr.morphNormals=Si.morphNormals,nr.morphColors=Si.morphColors,nr.morphTargetsCount=Si.morphTargetsCount,nr.numClippingPlanes=Si.numClippingPlanes,nr.numIntersection=Si.numClipIntersection,nr.vertexAlphas=Si.vertexAlphas,nr.vertexTangents=Si.vertexTangents,nr.toneMapping=Si.toneMapping}cc.setAnimationLoop(function Hs(cn){Gr&&Gr(cn)}),typeof self<"u"&&cc.setContext(self),this.setAnimationLoop=function(cn){Gr=cn,Ns.setAnimationLoop(cn),null===cn?cc.stop():cc.start()},Ns.addEventListener("sessionstart",wo),Ns.addEventListener("sessionend",lc),this.render=function(cn,Si){if(void 0===Si||!0===Si.isCamera){if(!0!==Le){if(!0===cn.matrixWorldAutoUpdate&&cn.updateMatrixWorld(),null===Si.parent&&!0===Si.matrixWorldAutoUpdate&&Si.updateMatrixWorld(),!0===Ns.enabled&&!0===Ns.isPresenting&&(!0===Ns.cameraAutoUpdate&&Ns.updateCamera(Si),Si=Ns.getCamera()),!0===cn.isScene&&cn.onBeforeRender(re,cn,Si,dt),Q=Jt.get(cn,he.length),Q.init(),he.push(Q),Ci.multiplyMatrices(Si.projectionMatrix,Si.matrixWorldInverse),Ei.setFromProjectionMatrix(Ci),Zr=this.localClippingEnabled,Ki=Ni.init(this.clippingPlanes,Zr),k=yn.get(cn,se.length),k.init(),se.push(k),Gd(cn,Si,0,re.sortObjects),k.finish(),!0===re.sortObjects&&k.sort(kn,li),!0===Ki&&Ni.beginShadows(),Rr.render(Q.state.shadowsArray,cn,Si),!0===Ki&&Ni.endShadows(),!0===this.info.autoReset&&this.info.reset(),Vr.render(k,cn),Q.setupLights(re.useLegacyLights),Si.isArrayCamera){const gi=Si.cameras;for(let fr=0,Oo=gi.length;fr<Oo;fr++){const Ko=gi[fr];Iy(k,cn,Ko,Ko.viewport)}}else Iy(k,cn,Si);null!==dt&&(Cr.updateMultisampleRenderTarget(dt),Cr.updateRenderTargetMipmap(dt)),!0===cn.isScene&&cn.onAfterRender(re,cn,Si),xs.resetDefaultState(),xt=-1,$t=null,he.pop(),Q=he.length>0?he[he.length-1]:null,se.pop(),k=se.length>0?se[se.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return be},this.getActiveMipmapLevel=function(){return Ye},this.getRenderTarget=function(){return dt},this.setRenderTargetTextures=function(cn,Si,nr){ar.get(cn.texture).__webglTexture=Si,ar.get(cn.depthTexture).__webglTexture=nr;const gi=ar.get(cn);gi.__hasExternalTextures=!0,gi.__hasExternalTextures&&(gi.__autoAllocateDepthBuffer=void 0===nr,gi.__autoAllocateDepthBuffer||!0===qs.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),gi.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(cn,Si){const nr=ar.get(cn);nr.__webglFramebuffer=Si,nr.__useDefaultFramebuffer=void 0===Si},this.setRenderTarget=function(cn,Si=0,nr=0){dt=cn,be=Si,Ye=nr;let gi=!0,fr=null,Oo=!1,Ko=!1;if(cn){const za=ar.get(cn);void 0!==za.__useDefaultFramebuffer?(Ls.bindFramebuffer(Bn.FRAMEBUFFER,null),gi=!1):void 0===za.__webglFramebuffer?Cr.setupRenderTarget(cn):za.__hasExternalTextures&&Cr.rebindTextures(cn,ar.get(cn.texture).__webglTexture,ar.get(cn.depthTexture).__webglTexture);const Za=cn.texture;(Za.isData3DTexture||Za.isDataArrayTexture||Za.isCompressedArrayTexture)&&(Ko=!0);const Ja=ar.get(cn).__webglFramebuffer;cn.isWebGLCubeRenderTarget?(fr=Ja[Si],Oo=!0):fr=Br.isWebGL2&&cn.samples>0&&!1===Cr.useMultisampledRTT(cn)?ar.get(cn).__webglMultisampledFramebuffer:Ja,nn.copy(cn.viewport),gt.copy(cn.scissor),Wt=cn.scissorTest}else nn.copy(Wn).multiplyScalar(Rn).floor(),gt.copy(ni).multiplyScalar(Rn).floor(),Wt=si;if(Ls.bindFramebuffer(Bn.FRAMEBUFFER,fr)&&Br.drawBuffers&&gi&&Ls.drawBuffers(cn,fr),Ls.viewport(nn),Ls.scissor(gt),Ls.setScissorTest(Wt),Oo){const za=ar.get(cn.texture);Bn.framebufferTexture2D(Bn.FRAMEBUFFER,Bn.COLOR_ATTACHMENT0,Bn.TEXTURE_CUBE_MAP_POSITIVE_X+Si,za.__webglTexture,nr)}else if(Ko){const za=ar.get(cn.texture);Bn.framebufferTextureLayer(Bn.FRAMEBUFFER,Bn.COLOR_ATTACHMENT0,za.__webglTexture,nr||0,Si||0)}xt=-1},this.readRenderTargetPixels=function(cn,Si,nr,gi,fr,Oo,Ko){if(!cn||!cn.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ca=ar.get(cn).__webglFramebuffer;if(cn.isWebGLCubeRenderTarget&&void 0!==Ko&&(ca=ca[Ko]),ca){Ls.bindFramebuffer(Bn.FRAMEBUFFER,ca);try{const za=cn.texture,Za=za.format,Ja=za.type;if(Za!==Vp&&Fi.convert(Za)!==Bn.getParameter(Bn.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const ol=Ja===VM&&(qs.has("EXT_color_buffer_half_float")||Br.isWebGL2&&qs.has("EXT_color_buffer_float"));if(!(Ja===Hv||Fi.convert(Ja)===Bn.getParameter(Bn.IMPLEMENTATION_COLOR_READ_TYPE)||Ja===sy&&(Br.isWebGL2||qs.has("OES_texture_float")||qs.has("WEBGL_color_buffer_float"))||ol))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Si>=0&&Si<=cn.width-gi&&nr>=0&&nr<=cn.height-fr&&Bn.readPixels(Si,nr,gi,fr,Fi.convert(Za),Fi.convert(Ja),Oo)}finally{const za=null!==dt?ar.get(dt).__webglFramebuffer:null;Ls.bindFramebuffer(Bn.FRAMEBUFFER,za)}}},this.copyFramebufferToTexture=function(cn,Si,nr=0){const gi=Math.pow(2,-nr),fr=Math.floor(Si.image.width*gi),Oo=Math.floor(Si.image.height*gi);Cr.setTexture2D(Si,0),Bn.copyTexSubImage2D(Bn.TEXTURE_2D,nr,0,0,cn.x,cn.y,fr,Oo),Ls.unbindTexture()},this.copyTextureToTexture=function(cn,Si,nr,gi=0){const fr=Si.image.width,Oo=Si.image.height,Ko=Fi.convert(nr.format),ca=Fi.convert(nr.type);Cr.setTexture2D(nr,0),Bn.pixelStorei(Bn.UNPACK_FLIP_Y_WEBGL,nr.flipY),Bn.pixelStorei(Bn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,nr.premultiplyAlpha),Bn.pixelStorei(Bn.UNPACK_ALIGNMENT,nr.unpackAlignment),Si.isDataTexture?Bn.texSubImage2D(Bn.TEXTURE_2D,gi,cn.x,cn.y,fr,Oo,Ko,ca,Si.image.data):Si.isCompressedTexture?Bn.compressedTexSubImage2D(Bn.TEXTURE_2D,gi,cn.x,cn.y,Si.mipmaps[0].width,Si.mipmaps[0].height,Ko,Si.mipmaps[0].data):Bn.texSubImage2D(Bn.TEXTURE_2D,gi,cn.x,cn.y,Ko,ca,Si.image),0===gi&&nr.generateMipmaps&&Bn.generateMipmap(Bn.TEXTURE_2D),Ls.unbindTexture()},this.copyTextureToTexture3D=function(cn,Si,nr,gi,fr=0){if(re.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Oo=cn.max.x-cn.min.x+1,Ko=cn.max.y-cn.min.y+1,ca=cn.max.z-cn.min.z+1,za=Fi.convert(gi.format),Za=Fi.convert(gi.type);let Ja;if(gi.isData3DTexture)Cr.setTexture3D(gi,0),Ja=Bn.TEXTURE_3D;else{if(!gi.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Cr.setTexture2DArray(gi,0),Ja=Bn.TEXTURE_2D_ARRAY}Bn.pixelStorei(Bn.UNPACK_FLIP_Y_WEBGL,gi.flipY),Bn.pixelStorei(Bn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,gi.premultiplyAlpha),Bn.pixelStorei(Bn.UNPACK_ALIGNMENT,gi.unpackAlignment);const ol=Bn.getParameter(Bn.UNPACK_ROW_LENGTH),Yl=Bn.getParameter(Bn.UNPACK_IMAGE_HEIGHT),Rf=Bn.getParameter(Bn.UNPACK_SKIP_PIXELS),Qm=Bn.getParameter(Bn.UNPACK_SKIP_ROWS),Fb=Bn.getParameter(Bn.UNPACK_SKIP_IMAGES),Ku=nr.isCompressedTexture?nr.mipmaps[0]:nr.image;Bn.pixelStorei(Bn.UNPACK_ROW_LENGTH,Ku.width),Bn.pixelStorei(Bn.UNPACK_IMAGE_HEIGHT,Ku.height),Bn.pixelStorei(Bn.UNPACK_SKIP_PIXELS,cn.min.x),Bn.pixelStorei(Bn.UNPACK_SKIP_ROWS,cn.min.y),Bn.pixelStorei(Bn.UNPACK_SKIP_IMAGES,cn.min.z),nr.isDataTexture||nr.isData3DTexture?Bn.texSubImage3D(Ja,fr,Si.x,Si.y,Si.z,Oo,Ko,ca,za,Za,Ku.data):nr.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Bn.compressedTexSubImage3D(Ja,fr,Si.x,Si.y,Si.z,Oo,Ko,ca,za,Ku.data)):Bn.texSubImage3D(Ja,fr,Si.x,Si.y,Si.z,Oo,Ko,ca,za,Za,Ku),Bn.pixelStorei(Bn.UNPACK_ROW_LENGTH,ol),Bn.pixelStorei(Bn.UNPACK_IMAGE_HEIGHT,Yl),Bn.pixelStorei(Bn.UNPACK_SKIP_PIXELS,Rf),Bn.pixelStorei(Bn.UNPACK_SKIP_ROWS,Qm),Bn.pixelStorei(Bn.UNPACK_SKIP_IMAGES,Fb),0===fr&&gi.generateMipmaps&&Bn.generateMipmap(Ja),Ls.unbindTexture()},this.initTexture=function(cn){cn.isCubeTexture?Cr.setTextureCube(cn,0):cn.isData3DTexture?Cr.setTexture3D(cn,0):cn.isDataArrayTexture||cn.isCompressedArrayTexture?Cr.setTexture2DArray(cn,0):Cr.setTexture2D(cn,0),Ls.unbindTexture()},this.resetState=function(){be=0,Ye=0,dt=null,Ls.reset(),xs.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Jo?Qv:3e3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Qv?Jo:Pm}}(class nie extends V5{}).prototype.isWebGL1Renderer=!0;class G5{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ir(e),this.density=t}clone(){return new G5(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class q5{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Ir(e),this.near=t,this.far=n}clone(){return new q5(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class u3 extends Tc{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Q5{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Gp()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Gp()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Gp()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ef=new kt;class tb{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Ef.fromBufferAttribute(this,t),Ef.applyMatrix4(e),this.setXYZ(t,Ef.x,Ef.y,Ef.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Ef.fromBufferAttribute(this,t),Ef.applyNormalMatrix(e),this.setXYZ(t,Ef.x,Ef.y,Ef.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Ef.fromBufferAttribute(this,t),Ef.transformDirection(e),this.setXYZ(t,Ef.x,Ef.y,Ef.z);return this}setX(e,t){return this.normalized&&(t=Fa(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Fa(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Fa(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Fa(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=qp(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=qp(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=qp(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=qp(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Fa(t,this.array),n=Fa(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Fa(t,this.array),n=Fa(n,this.array),r=Fa(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Fa(t,this.array),n=Fa(n,this.array),r=Fa(r,this.array),s=Fa(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new va(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new tb(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class d7 extends Jc{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ir(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Tw;const ZM=new kt,Ew=new kt,Dw=new kt,Bw=new qi,JM=new qi,f7=new ea,h3=new kt,eC=new kt,d3=new kt,p7=new qi,W5=new qi,A7=new qi;class iie extends Tc{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Tw){Tw=new bo;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Q5(t,5);Tw.setIndex([0,1,2,0,2,3]),Tw.setAttribute("position",new tb(n,3,0,!1)),Tw.setAttribute("uv",new tb(n,2,3,!1))}this.geometry=Tw,this.material=void 0!==e?e:new d7,this.center=new qi(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ew.setFromMatrixScale(this.matrixWorld),f7.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Dw.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Ew.multiplyScalar(-Dw.z);const n=this.material.rotation;let r,s;0!==n&&(s=Math.cos(n),r=Math.sin(n));const a=this.center;f3(h3.set(-.5,-.5,0),Dw,a,Ew,r,s),f3(eC.set(.5,-.5,0),Dw,a,Ew,r,s),f3(d3.set(.5,.5,0),Dw,a,Ew,r,s),p7.set(0,0),W5.set(1,0),A7.set(1,1);let l=e.ray.intersectTriangle(h3,eC,d3,!1,ZM);if(null===l&&(f3(eC.set(-.5,.5,0),Dw,a,Ew,r,s),W5.set(0,1),l=e.ray.intersectTriangle(h3,d3,eC,!1,ZM),null===l))return;const u=e.ray.origin.distanceTo(ZM);u<e.near||u>e.far||t.push({distance:u,point:ZM.clone(),uv:up.getInterpolation(ZM,h3,eC,d3,p7,W5,A7,new qi),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function f3(i,e,t,n,r,s){Bw.subVectors(i,t).addScalar(.5).multiply(n),void 0!==r?(JM.x=s*Bw.x-r*Bw.y,JM.y=r*Bw.x+s*Bw.y):JM.copy(Bw),i.copy(e),i.x+=JM.x,i.y+=JM.y,i.applyMatrix4(f7)}const p3=new kt,m7=new kt;class rie extends Tc{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){p3.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(p3);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){p3.setFromMatrixPosition(e.matrixWorld),m7.setFromMatrixPosition(this.matrixWorld);const n=p3.distanceTo(m7)/e.zoom;let r,s;for(t[0].object.visible=!0,r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),!(n>=a))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const a=n[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const g7=new kt,_7=new Kl,y7=new Kl,sie=new kt,v7=new ea,Iw=new kt;class b7 extends Ua{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ea,this.bindMatrixInverse=new ea,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new e0),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)Iw.fromBufferAttribute(t,n),this.applyBoneTransform(n,Iw),this.boundingBox.expandByPoint(Iw)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new OA),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)Iw.fromBufferAttribute(t,n),this.applyBoneTransform(n,Iw),this.boundingSphere.expandByPoint(Iw)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Kl,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;_7.fromBufferAttribute(r.attributes.skinIndex,e),y7.fromBufferAttribute(r.attributes.skinWeight,e),g7.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=y7.getComponent(s);if(0!==a){const l=_7.getComponent(s);v7.multiplyMatrices(n.bones[l].matrixWorld,n.boneInverses[l]),t.addScaledVector(sie.copy(g7).applyMatrix4(v7),a)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class j5 extends Tc{constructor(){super(),this.isBone=!0,this.type="Bone"}}class tC extends kA{constructor(e=null,t=1,n=1,r,s,a,l,u,d=ou,A=ou,y,C){super(null,a,l,u,d,A,r,s,y,C),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const x7=new ea,oie=new ea;class A3{constructor(e=[],t=[]){this.uuid=Gp(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new ea)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new ea;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++)x7.multiplyMatrices(e[s]?e[s].matrixWorld:oie,t[s]),x7.toArray(n,16*s);null!==r&&(r.needsUpdate=!0)}clone(){return new A3(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=dN(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new tC(t,e,e,Vp,sy);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let a=t[s];void 0===a&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new j5),this.bones.push(a),this.boneInverses.push((new ea).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++)e.bones.push(t[r].uuid),e.boneInverses.push(n[r].toArray());return e}}class nC extends va{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Pw=new ea,w7=new ea,m3=[],M7=new e0,aie=new ea,iC=new Ua,rC=new OA;class C7 extends Ua{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new nC(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,aie)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new e0),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Pw),M7.copy(e.boundingBox).applyMatrix4(Pw),this.boundingBox.union(M7)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new OA),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Pw),rC.copy(e.boundingSphere).applyMatrix4(Pw),this.boundingSphere.union(rC)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,r=this.count;if(iC.geometry=this.geometry,iC.material=this.material,void 0!==iC.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),rC.copy(this.boundingSphere),rC.applyMatrix4(n),!1!==e.ray.intersectsSphere(rC)))for(let s=0;s<r;s++){this.getMatrixAt(s,Pw),w7.multiplyMatrices(n,Pw),iC.matrixWorld=w7,iC.raycast(e,m3);for(let a=0,l=m3.length;a<l;a++){const u=m3[a];u.instanceId=s,u.object=this,t.push(u)}m3.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new nC(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class eu extends Jc{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ir(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const S7=new kt,T7=new kt,E7=new ea,$5=new VE,g3=new OA;class r0 extends Tc{constructor(e=new bo,t=new eu){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)S7.fromBufferAttribute(t,r-1),T7.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=S7.distanceTo(T7);e.setAttribute("lineDistance",new Fs(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),g3.copy(n.boundingSphere),g3.applyMatrix4(r),g3.radius+=s,!1===e.ray.intersectsSphere(g3))return;E7.copy(r).invert(),$5.copy(e.ray).applyMatrix4(E7);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,d=new kt,A=new kt,y=new kt,C=new kt,k=this.isLineSegments?2:1,Q=n.index,he=n.attributes.position;if(null!==Q)for(let be=Math.max(0,a.start),Ye=Math.min(Q.count,a.start+a.count)-1;be<Ye;be+=k){const dt=Q.getX(be),xt=Q.getX(be+1);if(d.fromBufferAttribute(he,dt),A.fromBufferAttribute(he,xt),$5.distanceSqToSegment(d,A,C,y)>u)continue;C.applyMatrix4(this.matrixWorld);const nn=e.ray.origin.distanceTo(C);nn<e.near||nn>e.far||t.push({distance:nn,point:y.clone().applyMatrix4(this.matrixWorld),index:be,face:null,faceIndex:null,object:this})}else for(let be=Math.max(0,a.start),Ye=Math.min(he.count,a.start+a.count)-1;be<Ye;be+=k){if(d.fromBufferAttribute(he,be),A.fromBufferAttribute(he,be+1),$5.distanceSqToSegment(d,A,C,y)>u)continue;C.applyMatrix4(this.matrixWorld);const xt=e.ray.origin.distanceTo(C);xt<e.near||xt>e.far||t.push({distance:xt,point:y.clone().applyMatrix4(this.matrixWorld),index:be,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const D7=new kt,B7=new kt;class NA extends r0{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)D7.fromBufferAttribute(t,r),B7.fromBufferAttribute(t,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+D7.distanceTo(B7);e.setAttribute("lineDistance",new Fs(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class I7 extends r0{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class U_ extends Jc{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ir(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const P7=new ea,X5=new VE,_3=new OA,y3=new kt;class nb extends Tc{constructor(e=new bo,t=new U_){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),_3.copy(n.boundingSphere),_3.applyMatrix4(r),_3.radius+=s,!1===e.ray.intersectsSphere(_3))return;P7.copy(r).invert(),X5.copy(e.ray).applyMatrix4(P7);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,d=n.index,y=n.attributes.position;if(null!==d)for(let Q=Math.max(0,a.start),se=Math.min(d.count,a.start+a.count);Q<se;Q++){const he=d.getX(Q);y3.fromBufferAttribute(y,he),F7(y3,he,u,r,e,t,this)}else for(let Q=Math.max(0,a.start),se=Math.min(y.count,a.start+a.count);Q<se;Q++)y3.fromBufferAttribute(y,Q),F7(y3,Q,u,r,e,t,this)}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function F7(i,e,t,n,r,s,a){const l=X5.distanceSqToPoint(i);if(l<t){const u=new kt;X5.closestPointToPoint(i,u),u.applyMatrix4(n);const d=r.ray.origin.distanceTo(u);if(d<r.near||d>r.far)return;s.push({distance:d,distanceToRay:Math.sqrt(l),point:u,index:e,face:null,object:a})}}class cie extends kA{constructor(e,t,n,r,s,a,l,u,d){super(e,t,n,r,s,a,l,u,d),this.isCanvasTexture=!0,this.needsUpdate=!0}}class s0{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)n=this.getPoint(a/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const s=n.length;let a;a=t||e*n[s-1];let d,l=0,u=s-1;for(;l<=u;)if(r=Math.floor(l+(u-l)/2),d=n[r]-a,d<0)l=r+1;else{if(!(d>0)){u=r;break}u=r-1}if(r=u,n[r]===a)return r/(s-1);const A=n[r];return(r+(a-A)/(n[r+1]-A))/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),l=this.getPoint(s),u=t||(a.isVector2?new qi:new kt);return u.copy(l).sub(a).normalize(),u}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new kt,r=[],s=[],a=[],l=new kt,u=new ea;for(let k=0;k<=e;k++)r[k]=this.getTangentAt(k/e,new kt);s[0]=new kt,a[0]=new kt;let d=Number.MAX_VALUE;const A=Math.abs(r[0].x),y=Math.abs(r[0].y),C=Math.abs(r[0].z);A<=d&&(d=A,n.set(1,0,0)),y<=d&&(d=y,n.set(0,1,0)),C<=d&&n.set(0,0,1),l.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],l),a[0].crossVectors(r[0],s[0]);for(let k=1;k<=e;k++){if(s[k]=s[k-1].clone(),a[k]=a[k-1].clone(),l.crossVectors(r[k-1],r[k]),l.length()>Number.EPSILON){l.normalize();const Q=Math.acos(au(r[k-1].dot(r[k]),-1,1));s[k].applyMatrix4(u.makeRotationAxis(l,Q))}a[k].crossVectors(r[k],s[k])}if(!0===t){let k=Math.acos(au(s[0].dot(s[e]),-1,1));k/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(k=-k);for(let Q=1;Q<=e;Q++)s[Q].applyMatrix4(u.makeRotationAxis(r[Q],k*Q)),a[Q].crossVectors(r[Q],s[Q])}return{tangents:r,normals:s,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class K5 extends s0{constructor(e=0,t=0,n=1,r=1,s=0,a=2*Math.PI,l=!1,u=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=u}getPoint(e,t){const n=t||new qi,r=2*Math.PI;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(s=a?0:r),!0===this.aClockwise&&!a&&(s===r?s=-r:s-=r);const l=this.aStartAngle+e*s;let u=this.aX+this.xRadius*Math.cos(l),d=this.aY+this.yRadius*Math.sin(l);if(0!==this.aRotation){const A=Math.cos(this.aRotation),y=Math.sin(this.aRotation),C=u-this.aX,k=d-this.aY;u=C*A-k*y+this.aX,d=C*y+k*A+this.aY}return n.set(u,d)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function Y5(){let i=0,e=0,t=0,n=0;function r(s,a,l,u){i=s,e=l,t=-3*s+3*a-2*l-u,n=2*s-2*a+l+u}return{initCatmullRom:function(s,a,l,u,d){r(a,l,d*(l-s),d*(u-a))},initNonuniformCatmullRom:function(s,a,l,u,d,A,y){let C=(a-s)/d-(l-s)/(d+A)+(l-a)/A,k=(l-a)/A-(u-a)/(A+y)+(u-l)/y;C*=A,k*=A,r(a,l,C,k)},calc:function(s){const a=s*s;return i+e*s+t*a+n*(a*s)}}}const v3=new kt,Z5=new Y5,J5=new Y5,eP=new Y5;class tP extends s0{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new kt){const n=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let d,A,l=Math.floor(a),u=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:0===u&&l===s-1&&(l=s-2,u=1),this.closed||l>0?d=r[(l-1)%s]:(v3.subVectors(r[0],r[1]).add(r[0]),d=v3);const y=r[l%s],C=r[(l+1)%s];if(this.closed||l+2<s?A=r[(l+2)%s]:(v3.subVectors(r[s-1],r[s-2]).add(r[s-1]),A=v3),"centripetal"===this.curveType||"chordal"===this.curveType){const k="chordal"===this.curveType?.5:.25;let Q=Math.pow(d.distanceToSquared(y),k),se=Math.pow(y.distanceToSquared(C),k),he=Math.pow(C.distanceToSquared(A),k);se<1e-4&&(se=1),Q<1e-4&&(Q=se),he<1e-4&&(he=se),Z5.initNonuniformCatmullRom(d.x,y.x,C.x,A.x,Q,se,he),J5.initNonuniformCatmullRom(d.y,y.y,C.y,A.y,Q,se,he),eP.initNonuniformCatmullRom(d.z,y.z,C.z,A.z,Q,se,he)}else"catmullrom"===this.curveType&&(Z5.initCatmullRom(d.x,y.x,C.x,A.x,this.tension),J5.initCatmullRom(d.y,y.y,C.y,A.y,this.tension),eP.initCatmullRom(d.z,y.z,C.z,A.z,this.tension));return n.set(Z5.calc(u),J5.calc(u),eP.calc(u)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new kt).fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function R7(i,e,t,n,r){const s=.5*(n-e),a=.5*(r-t),l=i*i;return(2*t-2*n+s+a)*(i*l)+(-3*t+3*n-2*s-a)*l+s*i+t}function sC(i,e,t,n){return function hie(i,e){const t=1-i;return t*t*e}(i,e)+function die(i,e){return 2*(1-i)*i*e}(i,t)+function fie(i,e){return i*i*e}(i,n)}function oC(i,e,t,n,r){return function pie(i,e){const t=1-i;return t*t*t*e}(i,e)+function Aie(i,e){const t=1-i;return 3*t*t*i*e}(i,t)+function mie(i,e){return 3*(1-i)*i*i*e}(i,n)+function gie(i,e){return i*i*i*e}(i,r)}class k7 extends s0{constructor(e=new qi,t=new qi,n=new qi,r=new qi){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new qi){const n=t,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return n.set(oC(e,r.x,s.x,a.x,l.x),oC(e,r.y,s.y,a.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class nP extends s0{constructor(e=new qi,t=new qi){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new qi){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new qi){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class O7 extends s0{constructor(e=new qi,t=new qi,n=new qi){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new qi){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(sC(e,r.x,s.x,a.x),sC(e,r.y,s.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iP extends s0{constructor(e=new kt,t=new kt,n=new kt){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new kt){const n=t,r=this.v0,s=this.v1,a=this.v2;return n.set(sC(e,r.x,s.x,a.x),sC(e,r.y,s.y,a.y),sC(e,r.z,s.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class L7 extends s0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new qi){const n=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),l=s-a,u=r[0===a?a:a-1],d=r[a],A=r[a>r.length-2?r.length-1:a+1],y=r[a>r.length-3?r.length-1:a+2];return n.set(R7(l,u.x,d.x,A.x,y.x),R7(l,u.y,d.y,A.y,y.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++)this.points.push(e.points[t].clone());return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++)e.points.push(this.points[t].toArray());return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push((new qi).fromArray(r))}return this}}var rP=Object.freeze({__proto__:null,ArcCurve:class uie extends K5{constructor(e,t,n,r,s,a){super(e,t,n,n,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:tP,CubicBezierCurve:k7,CubicBezierCurve3:class _ie extends s0{constructor(e=new kt,t=new kt,n=new kt,r=new kt){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new kt){const n=t,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return n.set(oC(e,r.x,s.x,a.x,l.x),oC(e,r.y,s.y,a.y,l.y),oC(e,r.z,s.z,a.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}},EllipseCurve:K5,LineCurve:nP,LineCurve3:class yie extends s0{constructor(e=new kt,t=new kt){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new kt){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new kt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}},QuadraticBezierCurve:O7,QuadraticBezierCurve3:iP,SplineCurve:L7});class vie extends s0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new nP(t,e))}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const a=r[s]-n,l=this.curves[s],u=l.getLength();return l.getPointAt(0===u?0:1-a/u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],u=a.getPoints(a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e);for(let d=0;d<u.length;d++){const A=u[d];n&&n.equals(A)||(t.push(A),n=A)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++)e.curves.push(this.curves[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push((new rP[r.type]).fromJSON(r))}return this}}class b3 extends vie{constructor(e){super(),this.type="Path",this.currentPoint=new qi,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new nP(this.currentPoint.clone(),new qi(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new O7(this.currentPoint.clone(),new qi(e,t),new qi(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,a){const l=new k7(this.currentPoint.clone(),new qi(e,t),new qi(n,r),new qi(s,a));return this.curves.push(l),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new L7(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,a){return this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,a),this}absarc(e,t,n,r,s,a){return this.absellipse(e,t,n,n,r,s,a),this}ellipse(e,t,n,r,s,a,l,u){return this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,n,r,s,a,l,u),this}absellipse(e,t,n,r,s,a,l,u){const d=new K5(e,t,n,r,s,a,l,u);if(this.curves.length>0){const y=d.getPoint(0);y.equals(this.currentPoint)||this.lineTo(y.x,y.y)}this.curves.push(d);const A=d.getPoint(1);return this.currentPoint.copy(A),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class x3 extends bo{constructor(e=[new qi(0,-.5),new qi(.5,0),new qi(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=au(r,0,2*Math.PI);const s=[],a=[],l=[],u=[],d=[],A=1/t,y=new kt,C=new qi,k=new kt,Q=new kt,se=new kt;let he=0,re=0;for(let Le=0;Le<=e.length-1;Le++)switch(Le){case 0:he=e[Le+1].x-e[Le].x,re=e[Le+1].y-e[Le].y,k.x=1*re,k.y=-he,k.z=0*re,se.copy(k),k.normalize(),u.push(k.x,k.y,k.z);break;case e.length-1:u.push(se.x,se.y,se.z);break;default:he=e[Le+1].x-e[Le].x,re=e[Le+1].y-e[Le].y,k.x=1*re,k.y=-he,k.z=0*re,Q.copy(k),k.x+=se.x,k.y+=se.y,k.z+=se.z,k.normalize(),u.push(k.x,k.y,k.z),se.copy(Q)}for(let Le=0;Le<=t;Le++){const be=n+Le*A*r,Ye=Math.sin(be),dt=Math.cos(be);for(let xt=0;xt<=e.length-1;xt++)y.x=e[xt].x*Ye,y.y=e[xt].y,y.z=e[xt].x*dt,a.push(y.x,y.y,y.z),C.x=Le/t,C.y=xt/(e.length-1),l.push(C.x,C.y),d.push(u[3*xt+0]*Ye,u[3*xt+1],u[3*xt+0]*dt)}for(let Le=0;Le<t;Le++)for(let be=0;be<e.length-1;be++){const Ye=be+Le*e.length,xt=Ye+e.length,$t=Ye+e.length+1,nn=Ye+1;s.push(Ye,xt,nn),s.push($t,nn,xt)}this.setIndex(s),this.setAttribute("position",new Fs(a,3)),this.setAttribute("uv",new Fs(l,2)),this.setAttribute("normal",new Fs(d,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new x3(e.points,e.segments,e.phiStart,e.phiLength)}}class sP extends x3{constructor(e=1,t=1,n=4,r=8){const s=new b3;s.absarc(0,-t/2,e,1.5*Math.PI,0),s.absarc(0,t/2,e,0,.5*Math.PI),super(s.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new sP(e.radius,e.length,e.capSegments,e.radialSegments)}}class oP extends bo{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],a=[],l=[],u=[],d=new kt,A=new qi;a.push(0,0,0),l.push(0,0,1),u.push(.5,.5);for(let y=0,C=3;y<=t;y++,C+=3){const k=n+y/t*r;d.x=e*Math.cos(k),d.y=e*Math.sin(k),a.push(d.x,d.y,d.z),l.push(0,0,1),A.x=(a[C]/e+1)/2,A.y=(a[C+1]/e+1)/2,u.push(A.x,A.y)}for(let y=1;y<=t;y++)s.push(y,y+1,0);this.setIndex(s),this.setAttribute("position",new Fs(a,3)),this.setAttribute("normal",new Fs(l,3)),this.setAttribute("uv",new Fs(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oP(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Fw extends bo{constructor(e=1,t=1,n=1,r=32,s=1,a=!1,l=0,u=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:u};const d=this;r=Math.floor(r),s=Math.floor(s);const A=[],y=[],C=[],k=[];let Q=0;const se=[],he=n/2;let re=0;function be(Ye){const dt=Q,xt=new qi,$t=new kt;let nn=0;const gt=!0===Ye?e:t,Wt=!0===Ye?1:-1;for(let yi=1;yi<=r;yi++)y.push(0,he*Wt,0),C.push(0,Wt,0),k.push(.5,.5),Q++;const Nn=Q;for(let yi=0;yi<=r;yi++){const kn=yi/r*u+l,li=Math.cos(kn),Wn=Math.sin(kn);$t.x=gt*Wn,$t.y=he*Wt,$t.z=gt*li,y.push($t.x,$t.y,$t.z),C.push(0,Wt,0),xt.x=.5*li+.5,xt.y=.5*Wn*Wt+.5,k.push(xt.x,xt.y),Q++}for(let yi=0;yi<r;yi++){const Rn=dt+yi,kn=Nn+yi;!0===Ye?A.push(kn,kn+1,Rn):A.push(kn+1,kn,Rn),nn+=3}d.addGroup(re,nn,!0===Ye?1:2),re+=nn}(function Le(){const Ye=new kt,dt=new kt;let xt=0;const $t=(t-e)/n;for(let nn=0;nn<=s;nn++){const gt=[],Wt=nn/s,Nn=Wt*(t-e)+e;for(let yi=0;yi<=r;yi++){const Rn=yi/r,kn=Rn*u+l,li=Math.sin(kn),Wn=Math.cos(kn);dt.x=Nn*li,dt.y=-Wt*n+he,dt.z=Nn*Wn,y.push(dt.x,dt.y,dt.z),Ye.set(li,$t,Wn).normalize(),C.push(Ye.x,Ye.y,Ye.z),k.push(Rn,1-Wt),gt.push(Q++)}se.push(gt)}for(let nn=0;nn<r;nn++)for(let gt=0;gt<s;gt++){const Nn=se[gt+1][nn],yi=se[gt+1][nn+1],Rn=se[gt][nn+1];A.push(se[gt][nn],Nn,Rn),A.push(Nn,yi,Rn),xt+=6}d.addGroup(re,xt,0),re+=xt})(),!1===a&&(e>0&&be(!0),t>0&&be(!1)),this.setIndex(A),this.setAttribute("position",new Fs(y,3)),this.setAttribute("normal",new Fs(C,3)),this.setAttribute("uv",new Fs(k,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fw(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class aP extends Fw{constructor(e=1,t=1,n=32,r=1,s=!1,a=0,l=2*Math.PI){super(0,e,t,n,r,s,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(e){return new aP(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ib extends bo{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],a=[];function u(Le,be,Ye,dt){const xt=dt+1,$t=[];for(let nn=0;nn<=xt;nn++){$t[nn]=[];const gt=Le.clone().lerp(Ye,nn/xt),Wt=be.clone().lerp(Ye,nn/xt),Nn=xt-nn;for(let yi=0;yi<=Nn;yi++)$t[nn][yi]=0===yi&&nn===xt?gt:gt.clone().lerp(Wt,yi/Nn)}for(let nn=0;nn<xt;nn++)for(let gt=0;gt<2*(xt-nn)-1;gt++){const Wt=Math.floor(gt/2);gt%2==0?(C($t[nn][Wt+1]),C($t[nn+1][Wt]),C($t[nn][Wt])):(C($t[nn][Wt+1]),C($t[nn+1][Wt+1]),C($t[nn+1][Wt]))}}function C(Le){s.push(Le.x,Le.y,Le.z)}function k(Le,be){const Ye=3*Le;be.x=e[Ye+0],be.y=e[Ye+1],be.z=e[Ye+2]}function se(Le,be,Ye,dt){dt<0&&1===Le.x&&(a[be]=Le.x-1),0===Ye.x&&0===Ye.z&&(a[be]=dt/2/Math.PI+.5)}function he(Le){return Math.atan2(Le.z,-Le.x)}function re(Le){return Math.atan2(-Le.y,Math.sqrt(Le.x*Le.x+Le.z*Le.z))}(function l(Le){const be=new kt,Ye=new kt,dt=new kt;for(let xt=0;xt<t.length;xt+=3)k(t[xt+0],be),k(t[xt+1],Ye),k(t[xt+2],dt),u(be,Ye,dt,Le)})(r),function d(Le){const be=new kt;for(let Ye=0;Ye<s.length;Ye+=3)be.x=s[Ye+0],be.y=s[Ye+1],be.z=s[Ye+2],be.normalize().multiplyScalar(Le),s[Ye+0]=be.x,s[Ye+1]=be.y,s[Ye+2]=be.z}(n),function A(){const Le=new kt;for(let be=0;be<s.length;be+=3){Le.x=s[be+0],Le.y=s[be+1],Le.z=s[be+2];const Ye=he(Le)/2/Math.PI+.5,dt=re(Le)/Math.PI+.5;a.push(Ye,1-dt)}(function Q(){const Le=new kt,be=new kt,Ye=new kt,dt=new kt,xt=new qi,$t=new qi,nn=new qi;for(let gt=0,Wt=0;gt<s.length;gt+=9,Wt+=6){Le.set(s[gt+0],s[gt+1],s[gt+2]),be.set(s[gt+3],s[gt+4],s[gt+5]),Ye.set(s[gt+6],s[gt+7],s[gt+8]),xt.set(a[Wt+0],a[Wt+1]),$t.set(a[Wt+2],a[Wt+3]),nn.set(a[Wt+4],a[Wt+5]),dt.copy(Le).add(be).add(Ye).divideScalar(3);const Nn=he(dt);se(xt,Wt+0,Le,Nn),se($t,Wt+2,be,Nn),se(nn,Wt+4,Ye,Nn)}})(),function y(){for(let Le=0;Le<a.length;Le+=6){const be=a[Le+0],Ye=a[Le+2],dt=a[Le+4],xt=Math.max(be,Ye,dt),$t=Math.min(be,Ye,dt);xt>.9&&$t<.1&&(be<.2&&(a[Le+0]+=1),Ye<.2&&(a[Le+2]+=1),dt<.2&&(a[Le+4]+=1))}}()}(),this.setAttribute("position",new Fs(s,3)),this.setAttribute("normal",new Fs(s.slice(),3)),this.setAttribute("uv",new Fs(a,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ib(e.vertices,e.indices,e.radius,e.details)}}class lP extends ib{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new lP(e.radius,e.detail)}}const w3=new kt,M3=new kt,cP=new kt,C3=new up;class N7 extends bo{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const r=Math.pow(10,4),s=Math.cos($v*t),a=e.getIndex(),l=e.getAttribute("position"),u=a?a.count:l.count,d=[0,0,0],A=["a","b","c"],y=new Array(3),C={},k=[];for(let Q=0;Q<u;Q+=3){a?(d[0]=a.getX(Q),d[1]=a.getX(Q+1),d[2]=a.getX(Q+2)):(d[0]=Q,d[1]=Q+1,d[2]=Q+2);const{a:se,b:he,c:re}=C3;if(se.fromBufferAttribute(l,d[0]),he.fromBufferAttribute(l,d[1]),re.fromBufferAttribute(l,d[2]),C3.getNormal(cP),y[0]=`${Math.round(se.x*r)},${Math.round(se.y*r)},${Math.round(se.z*r)}`,y[1]=`${Math.round(he.x*r)},${Math.round(he.y*r)},${Math.round(he.z*r)}`,y[2]=`${Math.round(re.x*r)},${Math.round(re.y*r)},${Math.round(re.z*r)}`,y[0]!==y[1]&&y[1]!==y[2]&&y[2]!==y[0])for(let Le=0;Le<3;Le++){const be=(Le+1)%3,Ye=y[Le],dt=y[be],xt=C3[A[Le]],$t=C3[A[be]],nn=`${Ye}_${dt}`,gt=`${dt}_${Ye}`;gt in C&&C[gt]?(cP.dot(C[gt].normal)<=s&&(k.push(xt.x,xt.y,xt.z),k.push($t.x,$t.y,$t.z)),C[gt]=null):nn in C||(C[nn]={index0:d[Le],index1:d[be],normal:cP.clone()})}}for(const Q in C)if(C[Q]){const{index0:se,index1:he}=C[Q];w3.fromBufferAttribute(l,se),M3.fromBufferAttribute(l,he),k.push(w3.x,w3.y,w3.z),k.push(M3.x,M3.y,M3.z)}this.setAttribute("position",new Fs(k,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Rw extends b3{constructor(e){super(e),this.uuid=Gp(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++)this.holes.push(e.holes[t].clone());return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++)e.holes.push(this.holes[t].toJSON());return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push((new b3).fromJSON(r))}return this}}function U7(i,e,t,n,r){let s,a;if(r===function Lie(i,e,t,n){let r=0;for(let s=e,a=t-n;s<t;s+=n)r+=(i[a]-i[s])*(i[s+1]+i[a+1]),a=s;return r}(i,e,t,n)>0)for(s=e;s<t;s+=n)a=V7(s,i[s],i[s+1],a);else for(s=t-n;s>=e;s-=n)a=V7(s,i[s],i[s+1],a);return a&&S3(a,a.next)&&(cC(a),a=a.next),a}function rb(i,e){if(!i)return i;e||(e=i);let n,t=i;do{if(n=!1,t.steiner||!S3(t,t.next)&&0!==tu(t.prev,t,t.next))t=t.next;else{if(cC(t),t=e=t.prev,t===t.next)break;n=!0}}while(n||t!==e);return e}function aC(i,e,t,n,r,s,a){if(!i)return;!a&&s&&function Iie(i,e,t,n){let r=i;do{0===r.z&&(r.z=uP(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,function Pie(i){let e,t,n,r,s,a,l,u,d=1;do{for(t=i,i=null,s=null,a=0;t;){for(a++,n=t,l=0,e=0;e<d&&(l++,n=n.nextZ,n);e++);for(u=d;l>0||u>0&&n;)0!==l&&(0===u||!n||t.z<=n.z)?(r=t,t=t.nextZ,l--):(r=n,n=n.nextZ,u--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,d*=2}while(a>1)}(r)}(i,n,r,s);let u,d,l=i;for(;i.prev!==i.next;)if(u=i.prev,d=i.next,s?wie(i,n,r,s):xie(i))e.push(u.i/t|0),e.push(i.i/t|0),e.push(d.i/t|0),cC(i),i=d.next,l=d.next;else if((i=d)===l){a?1===a?aC(i=Mie(rb(i),e,t),e,t,n,r,s,2):2===a&&Cie(i,e,t,n,r,s):aC(rb(i),e,t,n,r,s,1);break}}function xie(i){const e=i.prev,t=i,n=i.next;if(tu(e,t,n)>=0)return!1;const r=e.x,s=t.x,a=n.x,l=e.y,u=t.y,d=n.y,A=r<s?r<a?r:a:s<a?s:a,y=l<u?l<d?l:d:u<d?u:d,C=r>s?r>a?r:a:s>a?s:a,k=l>u?l>d?l:d:u>d?u:d;let Q=n.next;for(;Q!==e;){if(Q.x>=A&&Q.x<=C&&Q.y>=y&&Q.y<=k&&kw(r,l,s,u,a,d,Q.x,Q.y)&&tu(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function wie(i,e,t,n){const r=i.prev,s=i,a=i.next;if(tu(r,s,a)>=0)return!1;const l=r.x,u=s.x,d=a.x,A=r.y,y=s.y,C=a.y,k=l<u?l<d?l:d:u<d?u:d,Q=A<y?A<C?A:C:y<C?y:C,se=l>u?l>d?l:d:u>d?u:d,he=A>y?A>C?A:C:y>C?y:C,re=uP(k,Q,e,t,n),Le=uP(se,he,e,t,n);let be=i.prevZ,Ye=i.nextZ;for(;be&&be.z>=re&&Ye&&Ye.z<=Le;){if(be.x>=k&&be.x<=se&&be.y>=Q&&be.y<=he&&be!==r&&be!==a&&kw(l,A,u,y,d,C,be.x,be.y)&&tu(be.prev,be,be.next)>=0||(be=be.prevZ,Ye.x>=k&&Ye.x<=se&&Ye.y>=Q&&Ye.y<=he&&Ye!==r&&Ye!==a&&kw(l,A,u,y,d,C,Ye.x,Ye.y)&&tu(Ye.prev,Ye,Ye.next)>=0))return!1;Ye=Ye.nextZ}for(;be&&be.z>=re;){if(be.x>=k&&be.x<=se&&be.y>=Q&&be.y<=he&&be!==r&&be!==a&&kw(l,A,u,y,d,C,be.x,be.y)&&tu(be.prev,be,be.next)>=0)return!1;be=be.prevZ}for(;Ye&&Ye.z<=Le;){if(Ye.x>=k&&Ye.x<=se&&Ye.y>=Q&&Ye.y<=he&&Ye!==r&&Ye!==a&&kw(l,A,u,y,d,C,Ye.x,Ye.y)&&tu(Ye.prev,Ye,Ye.next)>=0)return!1;Ye=Ye.nextZ}return!0}function Mie(i,e,t){let n=i;do{const r=n.prev,s=n.next.next;!S3(r,s)&&z7(r,n,n.next,s)&&lC(r,s)&&lC(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),cC(n),cC(n.next),n=i=s),n=n.next}while(n!==i);return rb(n)}function Cie(i,e,t,n,r,s){let a=i;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&Rie(a,l)){let u=H7(a,l);return a=rb(a,a.next),u=rb(u,u.next),aC(a,e,t,n,r,s,0),void aC(u,e,t,n,r,s,0)}l=l.next}a=a.next}while(a!==i)}function Tie(i,e){return i.x-e.x}function Eie(i,e){const t=function Die(i,e){let r,t=e,n=-1/0;const s=i.x,a=i.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const C=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(C<=s&&C>n&&(n=C,r=t.x<t.next.x?t:t.next,C===s))return r}t=t.next}while(t!==e);if(!r)return null;const l=r,u=r.x,d=r.y;let y,A=1/0;t=r;do{s>=t.x&&t.x>=u&&s!==t.x&&kw(a<d?s:n,a,u,d,a<d?n:s,a,t.x,t.y)&&(y=Math.abs(a-t.y)/(s-t.x),lC(t,i)&&(y<A||y===A&&(t.x>r.x||t.x===r.x&&Bie(r,t)))&&(r=t,A=y)),t=t.next}while(t!==l);return r}(i,e);if(!t)return e;const n=H7(t,i);return rb(n,n.next),rb(t,t.next)}function Bie(i,e){return tu(i.prev,i,e.prev)<0&&tu(e.next,i,i.next)<0}function uP(i,e,t,n,r){return(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-t)*r|0)|i<<8))|i<<4))|i<<2))|i<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function Fie(i){let e=i,t=i;do{(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next}while(e!==i);return t}function kw(i,e,t,n,r,s,a,l){return(r-a)*(e-l)>=(i-a)*(s-l)&&(i-a)*(n-l)>=(t-a)*(e-l)&&(t-a)*(s-l)>=(r-a)*(n-l)}function Rie(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!function kie(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&z7(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}(i,e)&&(lC(i,e)&&lC(e,i)&&function Oie(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do{t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next}while(t!==i);return n}(i,e)&&(tu(i.prev,i,e.prev)||tu(i,e.prev,e))||S3(i,e)&&tu(i.prev,i,i.next)>0&&tu(e.prev,e,e.next)>0)}function tu(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function S3(i,e){return i.x===e.x&&i.y===e.y}function z7(i,e,t,n){const r=E3(tu(i,e,t)),s=E3(tu(i,e,n)),a=E3(tu(t,n,i)),l=E3(tu(t,n,e));return!!(r!==s&&a!==l||0===r&&T3(i,t,e)||0===s&&T3(i,n,e)||0===a&&T3(t,i,n)||0===l&&T3(t,e,n))}function T3(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function E3(i){return i>0?1:i<0?-1:0}function lC(i,e){return tu(i.prev,i,i.next)<0?tu(i,e,i.next)>=0&&tu(i,i.prev,e)>=0:tu(i,e,i.prev)<0||tu(i,i.next,e)<0}function H7(i,e){const t=new hP(i.i,i.x,i.y),n=new hP(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function V7(i,e,t,n){const r=new hP(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function cC(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function hP(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class z_{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return.5*n}static isClockWise(e){return z_.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];G7(e),q7(n,e);let a=e.length;t.forEach(G7);for(let u=0;u<t.length;u++)r.push(a),a+=t[u].length,q7(n,t[u]);const l=function(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=U7(i,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let l,u,d,A,y,C,k;if(n&&(s=function Sie(i,e,t,n){const r=[];let s,a,l,u,d;for(s=0,a=e.length;s<a;s++)l=e[s]*n,u=s<a-1?e[s+1]*n:i.length,d=U7(i,l,u,n,!1),d===d.next&&(d.steiner=!0),r.push(Fie(d));for(r.sort(Tie),s=0;s<r.length;s++)t=Eie(r[s],t);return t}(i,e,s,t)),i.length>80*t){l=d=i[0],u=A=i[1];for(let Q=t;Q<r;Q+=t)y=i[Q],C=i[Q+1],y<l&&(l=y),C<u&&(u=C),y>d&&(d=y),C>A&&(A=C);k=Math.max(d-l,A-u),k=0!==k?32767/k:0}return aC(s,a,t,l,u,k,0),a}(n,r);for(let u=0;u<l.length;u+=3)s.push(l.slice(u,u+3));return s}}function G7(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function q7(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class D3 extends bo{constructor(e=new Rw([new qi(.5,.5),new qi(-.5,.5),new qi(-.5,-.5),new qi(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let l=0,u=e.length;l<u;l++)a(e[l]);function a(l){const u=[],d=void 0!==t.curveSegments?t.curveSegments:12,A=void 0!==t.steps?t.steps:1,y=void 0!==t.depth?t.depth:1;let C=void 0===t.bevelEnabled||t.bevelEnabled,k=void 0!==t.bevelThickness?t.bevelThickness:.2,Q=void 0!==t.bevelSize?t.bevelSize:k-.1,se=void 0!==t.bevelOffset?t.bevelOffset:0,he=void 0!==t.bevelSegments?t.bevelSegments:3;const re=t.extrudePath,Le=void 0!==t.UVGenerator?t.UVGenerator:Nie;let be,dt,xt,$t,nn,Ye=!1;re&&(be=re.getSpacedPoints(A),Ye=!0,C=!1,dt=re.computeFrenetFrames(A,!1),xt=new kt,$t=new kt,nn=new kt),C||(he=0,k=0,Q=0,se=0);const gt=l.extractPoints(d);let Wt=gt.shape;const Nn=gt.holes;if(!z_.isClockWise(Wt)){Wt=Wt.reverse();for(let Tr=0,ar=Nn.length;Tr<ar;Tr++){const Cr=Nn[Tr];z_.isClockWise(Cr)&&(Nn[Tr]=Cr.reverse())}}const Rn=z_.triangulateShape(Wt,Nn),kn=Wt;for(let Tr=0,ar=Nn.length;Tr<ar;Tr++)Wt=Wt.concat(Nn[Tr]);function li(Tr,ar,Cr){return ar||console.error("THREE.ExtrudeGeometry: vec does not exist"),Tr.clone().addScaledVector(ar,Cr)}const Wn=Wt.length,ni=Rn.length;function si(Tr,ar,Cr){let zs,hs,Ho;const Vo=Tr.x-ar.x,Eo=Tr.y-ar.y,ba=Cr.x-Tr.x,yl=Cr.y-Tr.y,yn=Vo*Vo+Eo*Eo;if(Math.abs(Vo*yl-Eo*ba)>Number.EPSILON){const Ni=Math.sqrt(yn),Rr=Math.sqrt(ba*ba+yl*yl),Vr=ar.x-Eo/Ni,_s=ar.y+Vo/Ni,Fi=((Cr.x-yl/Rr-Vr)*yl-(Cr.y+ba/Rr-_s)*ba)/(Vo*yl-Eo*ba);zs=Vr+Vo*Fi-Tr.x,hs=_s+Eo*Fi-Tr.y;const xs=zs*zs+hs*hs;if(xs<=2)return new qi(zs,hs);Ho=Math.sqrt(xs/2)}else{let Ni=!1;Vo>Number.EPSILON?ba>Number.EPSILON&&(Ni=!0):Vo<-Number.EPSILON?ba<-Number.EPSILON&&(Ni=!0):Math.sign(Eo)===Math.sign(yl)&&(Ni=!0),Ni?(zs=-Eo,hs=Vo,Ho=Math.sqrt(yn)):(zs=Vo,hs=Eo,Ho=Math.sqrt(yn/2))}return new qi(zs/Ho,hs/Ho)}const Ei=[];for(let Tr=0,ar=kn.length,Cr=ar-1,zs=Tr+1;Tr<ar;Tr++,Cr++,zs++)Cr===ar&&(Cr=0),zs===ar&&(zs=0),Ei[Tr]=si(kn[Tr],kn[Cr],kn[zs]);const Ki=[];let Zr,Hr=Ei.concat();for(let Tr=0,ar=Nn.length;Tr<ar;Tr++){const Cr=Nn[Tr];Zr=[];for(let zs=0,hs=Cr.length,Ho=hs-1,Vo=zs+1;zs<hs;zs++,Ho++,Vo++)Ho===hs&&(Ho=0),Vo===hs&&(Vo=0),Zr[zs]=si(Cr[zs],Cr[Ho],Cr[Vo]);Ki.push(Zr),Hr=Hr.concat(Zr)}for(let Tr=0;Tr<he;Tr++){const ar=Tr/he,Cr=k*Math.cos(ar*Math.PI/2),zs=Q*Math.sin(ar*Math.PI/2)+se;for(let hs=0,Ho=kn.length;hs<Ho;hs++){const Vo=li(kn[hs],Ei[hs],zs);Bn(Vo.x,Vo.y,-Cr)}for(let hs=0,Ho=Nn.length;hs<Ho;hs++){const Vo=Nn[hs];Zr=Ki[hs];for(let Eo=0,ba=Vo.length;Eo<ba;Eo++){const yl=li(Vo[Eo],Zr[Eo],zs);Bn(yl.x,yl.y,-Cr)}}}const Ci=Q+se;for(let Tr=0;Tr<Wn;Tr++){const ar=C?li(Wt[Tr],Hr[Tr],Ci):Wt[Tr];Ye?($t.copy(dt.normals[0]).multiplyScalar(ar.x),xt.copy(dt.binormals[0]).multiplyScalar(ar.y),nn.copy(be[0]).add($t).add(xt),Bn(nn.x,nn.y,nn.z)):Bn(ar.x,ar.y,0)}for(let Tr=1;Tr<=A;Tr++)for(let ar=0;ar<Wn;ar++){const Cr=C?li(Wt[ar],Hr[ar],Ci):Wt[ar];Ye?($t.copy(dt.normals[Tr]).multiplyScalar(Cr.x),xt.copy(dt.binormals[Tr]).multiplyScalar(Cr.y),nn.copy(be[Tr]).add($t).add(xt),Bn(nn.x,nn.y,nn.z)):Bn(Cr.x,Cr.y,y/A*Tr)}for(let Tr=he-1;Tr>=0;Tr--){const ar=Tr/he,Cr=k*Math.cos(ar*Math.PI/2),zs=Q*Math.sin(ar*Math.PI/2)+se;for(let hs=0,Ho=kn.length;hs<Ho;hs++){const Vo=li(kn[hs],Ei[hs],zs);Bn(Vo.x,Vo.y,y+Cr)}for(let hs=0,Ho=Nn.length;hs<Ho;hs++){const Vo=Nn[hs];Zr=Ki[hs];for(let Eo=0,ba=Vo.length;Eo<ba;Eo++){const yl=li(Vo[Eo],Zr[Eo],zs);Ye?Bn(yl.x,yl.y+be[A-1].y,be[A-1].x+Cr):Bn(yl.x,yl.y,y+Cr)}}}function Jr(Tr,ar){let Cr=Tr.length;for(;--Cr>=0;){const zs=Cr;let hs=Cr-1;hs<0&&(hs=Tr.length-1);for(let Ho=0,Vo=A+2*he;Ho<Vo;Ho++){const Eo=Wn*Ho,ba=Wn*(Ho+1);qs(ar+zs+Eo,ar+hs+Eo,ar+hs+ba,ar+zs+ba)}}}function Bn(Tr,ar,Cr){u.push(Tr),u.push(ar),u.push(Cr)}function io(Tr,ar,Cr){Br(Tr),Br(ar),Br(Cr);const zs=r.length/3,hs=Le.generateTopUV(n,r,zs-3,zs-2,zs-1);Ls(hs[0]),Ls(hs[1]),Ls(hs[2])}function qs(Tr,ar,Cr,zs){Br(Tr),Br(ar),Br(zs),Br(ar),Br(Cr),Br(zs);const hs=r.length/3,Ho=Le.generateSideWallUV(n,r,hs-6,hs-3,hs-2,hs-1);Ls(Ho[0]),Ls(Ho[1]),Ls(Ho[3]),Ls(Ho[1]),Ls(Ho[2]),Ls(Ho[3])}function Br(Tr){r.push(u[3*Tr+0]),r.push(u[3*Tr+1]),r.push(u[3*Tr+2])}function Ls(Tr){s.push(Tr.x),s.push(Tr.y)}(function Ii(){const Tr=r.length/3;if(C){let ar=0,Cr=Wn*ar;for(let zs=0;zs<ni;zs++){const hs=Rn[zs];io(hs[2]+Cr,hs[1]+Cr,hs[0]+Cr)}ar=A+2*he,Cr=Wn*ar;for(let zs=0;zs<ni;zs++){const hs=Rn[zs];io(hs[0]+Cr,hs[1]+Cr,hs[2]+Cr)}}else{for(let ar=0;ar<ni;ar++){const Cr=Rn[ar];io(Cr[2],Cr[1],Cr[0])}for(let ar=0;ar<ni;ar++){const Cr=Rn[ar];io(Cr[0]+Wn*A,Cr[1]+Wn*A,Cr[2]+Wn*A)}}n.addGroup(Tr,r.length/3-Tr,0)})(),function jr(){const Tr=r.length/3;let ar=0;Jr(kn,ar),ar+=kn.length;for(let Cr=0,zs=Nn.length;Cr<zs;Cr++){const hs=Nn[Cr];Jr(hs,ar),ar+=hs.length}n.addGroup(Tr,r.length/3-Tr,1)}()}this.setAttribute("position",new Fs(r,3)),this.setAttribute("uv",new Fs(s,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function Uie(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++)t.shapes.push(i[n].uuid);else t.shapes.push(i.uuid);return t.options=Object.assign({},e),void 0!==e.extrudePath&&(t.options.extrudePath=e.extrudePath.toJSON()),t}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let s=0,a=e.shapes.length;s<a;s++)n.push(t[e.shapes[s]]);const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new rP[r.type]).fromJSON(r)),new D3(n,e.options)}}const Nie={generateTopUV:function(i,e,t,n,r){const l=e[3*n],u=e[3*n+1],d=e[3*r],A=e[3*r+1];return[new qi(e[3*t],e[3*t+1]),new qi(l,u),new qi(d,A)]},generateSideWallUV:function(i,e,t,n,r,s){const a=e[3*t],l=e[3*t+1],u=e[3*t+2],d=e[3*n],A=e[3*n+1],y=e[3*n+2],C=e[3*r],k=e[3*r+1],Q=e[3*r+2],se=e[3*s],he=e[3*s+1],re=e[3*s+2];return Math.abs(l-A)<Math.abs(a-d)?[new qi(a,1-u),new qi(d,1-y),new qi(C,1-Q),new qi(se,1-re)]:[new qi(l,1-u),new qi(A,1-y),new qi(k,1-Q),new qi(he,1-re)]}};class dP extends ib{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new dP(e.radius,e.detail)}}class B3 extends ib{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new B3(e.radius,e.detail)}}class fP extends bo{constructor(e=.5,t=1,n=32,r=1,s=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:a},n=Math.max(3,n);const l=[],u=[],d=[],A=[];let y=e;const C=(t-e)/(r=Math.max(1,r)),k=new kt,Q=new qi;for(let se=0;se<=r;se++){for(let he=0;he<=n;he++){const re=s+he/n*a;k.x=y*Math.cos(re),k.y=y*Math.sin(re),u.push(k.x,k.y,k.z),d.push(0,0,1),Q.x=(k.x/t+1)/2,Q.y=(k.y/t+1)/2,A.push(Q.x,Q.y)}y+=C}for(let se=0;se<r;se++){const he=se*(n+1);for(let re=0;re<n;re++){const Le=re+he,Ye=Le+n+1,dt=Le+n+2,xt=Le+1;l.push(Le,Ye,xt),l.push(Ye,dt,xt)}}this.setIndex(l),this.setAttribute("position",new Fs(u,3)),this.setAttribute("normal",new Fs(d,3)),this.setAttribute("uv",new Fs(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fP(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class pP extends bo{constructor(e=new Rw([new qi(0,.5),new qi(-.5,-.5),new qi(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],a=[];let l=0,u=0;if(!1===Array.isArray(e))d(e);else for(let A=0;A<e.length;A++)d(e[A]),this.addGroup(l,u,A),l+=u,u=0;function d(A){const y=r.length/3,C=A.extractPoints(t);let k=C.shape;const Q=C.holes;!1===z_.isClockWise(k)&&(k=k.reverse());for(let he=0,re=Q.length;he<re;he++){const Le=Q[he];!0===z_.isClockWise(Le)&&(Q[he]=Le.reverse())}const se=z_.triangulateShape(k,Q);for(let he=0,re=Q.length;he<re;he++)k=k.concat(Q[he]);for(let he=0,re=k.length;he<re;he++){const Le=k[he];r.push(Le.x,Le.y,0),s.push(0,0,1),a.push(Le.x,Le.y)}for(let he=0,re=se.length;he<re;he++){const Le=se[he];n.push(Le[0]+y,Le[1]+y,Le[2]+y),u+=3}}this.setIndex(n),this.setAttribute("position",new Fs(r,3)),this.setAttribute("normal",new Fs(s,3)),this.setAttribute("uv",new Fs(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function zie(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++)e.shapes.push(i[t].uuid);else e.shapes.push(i.uuid);return e}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++)n.push(t[e.shapes[r]]);return new pP(n,e.curveSegments)}}class hy extends bo{constructor(e=1,t=32,n=16,r=0,s=2*Math.PI,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:a,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const u=Math.min(a+l,Math.PI);let d=0;const A=[],y=new kt,C=new kt,k=[],Q=[],se=[],he=[];for(let re=0;re<=n;re++){const Le=[],be=re/n;let Ye=0;0===re&&0===a?Ye=.5/t:re===n&&u===Math.PI&&(Ye=-.5/t);for(let dt=0;dt<=t;dt++){const xt=dt/t;y.x=-e*Math.cos(r+xt*s)*Math.sin(a+be*l),y.y=e*Math.cos(a+be*l),y.z=e*Math.sin(r+xt*s)*Math.sin(a+be*l),Q.push(y.x,y.y,y.z),C.copy(y).normalize(),se.push(C.x,C.y,C.z),he.push(xt+Ye,1-be),Le.push(d++)}A.push(Le)}for(let re=0;re<n;re++)for(let Le=0;Le<t;Le++){const Ye=A[re][Le],dt=A[re+1][Le],xt=A[re+1][Le+1];(0!==re||a>0)&&k.push(A[re][Le+1],Ye,xt),(re!==n-1||u<Math.PI)&&k.push(Ye,dt,xt)}this.setIndex(k),this.setAttribute("position",new Fs(Q,3)),this.setAttribute("normal",new Fs(se,3)),this.setAttribute("uv",new Fs(he,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hy(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class AP extends ib{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new AP(e.radius,e.detail)}}class mP extends bo{constructor(e=1,t=.4,n=12,r=48,s=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const a=[],l=[],u=[],d=[],A=new kt,y=new kt,C=new kt;for(let k=0;k<=n;k++)for(let Q=0;Q<=r;Q++){const se=Q/r*s,he=k/n*Math.PI*2;y.x=(e+t*Math.cos(he))*Math.cos(se),y.y=(e+t*Math.cos(he))*Math.sin(se),y.z=t*Math.sin(he),l.push(y.x,y.y,y.z),A.x=e*Math.cos(se),A.y=e*Math.sin(se),C.subVectors(y,A).normalize(),u.push(C.x,C.y,C.z),d.push(Q/r),d.push(k/n)}for(let k=1;k<=n;k++)for(let Q=1;Q<=r;Q++){const he=(r+1)*(k-1)+Q-1,re=(r+1)*(k-1)+Q,Le=(r+1)*k+Q;a.push((r+1)*k+Q-1,he,Le),a.push(he,re,Le)}this.setIndex(a),this.setAttribute("position",new Fs(l,3)),this.setAttribute("normal",new Fs(u,3)),this.setAttribute("uv",new Fs(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mP(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class gP extends bo{constructor(e=1,t=.4,n=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:a},n=Math.floor(n),r=Math.floor(r);const l=[],u=[],d=[],A=[],y=new kt,C=new kt,k=new kt,Q=new kt,se=new kt,he=new kt,re=new kt;for(let be=0;be<=n;++be){const Ye=be/n*s*Math.PI*2;Le(Ye,s,a,e,k),Le(Ye+.01,s,a,e,Q),he.subVectors(Q,k),re.addVectors(Q,k),se.crossVectors(he,re),re.crossVectors(se,he),se.normalize(),re.normalize();for(let dt=0;dt<=r;++dt){const xt=dt/r*Math.PI*2,$t=-t*Math.cos(xt),nn=t*Math.sin(xt);y.x=k.x+($t*re.x+nn*se.x),y.y=k.y+($t*re.y+nn*se.y),y.z=k.z+($t*re.z+nn*se.z),u.push(y.x,y.y,y.z),C.subVectors(y,k).normalize(),d.push(C.x,C.y,C.z),A.push(be/n),A.push(dt/r)}}for(let be=1;be<=n;be++)for(let Ye=1;Ye<=r;Ye++){const xt=(r+1)*be+(Ye-1),$t=(r+1)*be+Ye,nn=(r+1)*(be-1)+Ye;l.push((r+1)*(be-1)+(Ye-1),xt,nn),l.push(xt,$t,nn)}function Le(be,Ye,dt,xt,$t){const nn=Math.cos(be),gt=Math.sin(be),Wt=dt/Ye*be,Nn=Math.cos(Wt);$t.x=xt*(2+Nn)*.5*nn,$t.y=xt*(2+Nn)*gt*.5,$t.z=xt*Math.sin(Wt)*.5}this.setIndex(l),this.setAttribute("position",new Fs(u,3)),this.setAttribute("normal",new Fs(d,3)),this.setAttribute("uv",new Fs(A,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gP(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class sb extends bo{constructor(e=new iP(new kt(-1,-1,0),new kt(-1,1,0),new kt(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new kt,u=new kt,d=new qi;let A=new kt;const y=[],C=[],k=[],Q=[];function he(be){A=e.getPointAt(be/t,A);const Ye=a.normals[be],dt=a.binormals[be];for(let xt=0;xt<=r;xt++){const $t=xt/r*Math.PI*2,nn=Math.sin($t),gt=-Math.cos($t);u.x=gt*Ye.x+nn*dt.x,u.y=gt*Ye.y+nn*dt.y,u.z=gt*Ye.z+nn*dt.z,u.normalize(),C.push(u.x,u.y,u.z),l.x=A.x+n*u.x,l.y=A.y+n*u.y,l.z=A.z+n*u.z,y.push(l.x,l.y,l.z)}}(function se(){for(let be=0;be<t;be++)he(be);he(!1===s?t:0),function Le(){for(let be=0;be<=t;be++)for(let Ye=0;Ye<=r;Ye++)d.x=be/t,d.y=Ye/r,k.push(d.x,d.y)}(),function re(){for(let be=1;be<=t;be++)for(let Ye=1;Ye<=r;Ye++){const xt=(r+1)*be+(Ye-1),$t=(r+1)*be+Ye,nn=(r+1)*(be-1)+Ye;Q.push((r+1)*(be-1)+(Ye-1),xt,nn),Q.push(xt,$t,nn)}}()})(),this.setIndex(Q),this.setAttribute("position",new Fs(y,3)),this.setAttribute("normal",new Fs(C,3)),this.setAttribute("uv",new Fs(k,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new sb((new rP[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}function Q7(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return!0!==t.has(n)&&!0!==t.has(r)&&(t.add(n),t.add(r),!0)}var W7=Object.freeze({__proto__:null,BoxGeometry:Lm,CapsuleGeometry:sP,CircleGeometry:oP,ConeGeometry:aP,CylinderGeometry:Fw,DodecahedronGeometry:lP,EdgesGeometry:N7,ExtrudeGeometry:D3,IcosahedronGeometry:dP,LatheGeometry:x3,OctahedronGeometry:B3,PlaneGeometry:s3,PolyhedronGeometry:ib,RingGeometry:fP,ShapeGeometry:pP,SphereGeometry:hy,TetrahedronGeometry:AP,TorusGeometry:mP,TorusKnotGeometry:gP,TubeGeometry:sb,WireframeGeometry:class Hie extends bo{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new kt,s=new kt;if(null!==e.index){const a=e.attributes.position,l=e.index;let u=e.groups;0===u.length&&(u=[{start:0,count:l.count,materialIndex:0}]);for(let d=0,A=u.length;d<A;++d){const y=u[d],C=y.start;for(let Q=C,se=C+y.count;Q<se;Q+=3)for(let he=0;he<3;he++){const re=l.getX(Q+he),Le=l.getX(Q+(he+1)%3);r.fromBufferAttribute(a,re),s.fromBufferAttribute(a,Le),!0===Q7(r,s,n)&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let l=0,u=a.count/3;l<u;l++)for(let d=0;d<3;d++){const y=3*l+(d+1)%3;r.fromBufferAttribute(a,3*l+d),s.fromBufferAttribute(a,y),!0===Q7(r,s,n)&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Fs(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}});class Vie extends Jc{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ir(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Gie extends yd{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class I3 extends Jc{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ir(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ir(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wv,this.normalScale=new qi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dy extends I3{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new qi(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return au(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ir(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ir(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ir(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Um extends Jc{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ir(16777215),this.specular=new Ir(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ir(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wv,this.normalScale=new qi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=IE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class j7 extends Jc{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ir(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ir(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wv,this.normalScale=new qi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class qie extends Jc{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wv,this.normalScale=new qi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Qie extends Jc{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ir(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ir(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wv,this.normalScale=new qi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=IE,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Wie extends Jc{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ir(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Wv,this.normalScale=new qi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class P3 extends eu{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function UA(i,e,t){return _P(i)?new i.constructor(i.subarray(e,void 0!==t?t:i.length)):i.slice(e,t)}function ob(i,e,t){return!i||!t&&i.constructor===e?i:"number"==typeof e.BYTES_PER_ELEMENT?new e(i):Array.prototype.slice.call(i)}function _P(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function $7(i){const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(function e(r,s){return i[r]-i[s]}),n}function yP(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,a=0;a!==n;++s){const l=t[s]*e;for(let u=0;u!==e;++u)r[a++]=i[l+u]}return r}function vP(i,e,t,n){let r=1,s=i[0];for(;void 0!==s&&void 0===s[n];)s=i[r++];if(void 0===s)return;let a=s[n];if(void 0!==a)if(Array.isArray(a))do{a=s[n],void 0!==a&&(e.push(s.time),t.push.apply(t,a)),s=i[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[n],void 0!==a&&(e.push(s.time),a.toArray(t,t.length)),s=i[r++]}while(void 0!==s);else do{a=s[n],void 0!==a&&(e.push(s.time),t.push(a)),s=i[r++]}while(void 0!==s)}class uC{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let a;n:{i:if(!(e<r)){for(let l=n+2;;){if(void 0===r){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=r,r=t[++n],e<r)break t}a=t.length;break n}if(e>=s)break e;{const l=t[1];e<l&&(n=2,s=l);for(let u=n-2;;){if(void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(n===u)break;if(r=s,s=t[--n-1],e>=s)break t}a=n,n=0}}for(;n<a;){const l=n+a>>>1;e<t[l]?a=l:n=l+1}if(r=t[n],s=t[n-1],void 0===s)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=n[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Xie extends uC{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,a=e+1,l=r[s],u=r[a];if(void 0===l)switch(this.getSettings_().endingStart){case 2401:s=e,l=2*t-n;break;case 2402:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=n}if(void 0===u)switch(this.getSettings_().endingEnd){case 2401:a=e,u=2*n-t;break;case 2402:a=1,u=n+r[1]-r[0];break;default:a=e-1,u=t}const d=.5*(n-t),A=this.valueSize;this._weightPrev=d/(t-l),this._weightNext=d/(u-n),this._offsetPrev=s*A,this._offsetNext=a*A}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=e*l,d=u-l,A=this._offsetPrev,y=this._offsetNext,C=this._weightPrev,k=this._weightNext,Q=(n-t)/(r-t),se=Q*Q,he=se*Q,re=-C*he+2*C*se-C*Q,Le=(1+C)*he+(-1.5-2*C)*se+(-.5+C)*Q+1,be=(-1-k)*he+(1.5+k)*se+.5*Q,Ye=k*he-k*se;for(let dt=0;dt!==l;++dt)s[dt]=re*a[A+dt]+Le*a[d+dt]+be*a[u+dt]+Ye*a[y+dt];return s}}class X7 extends uC{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=e*l,d=u-l,A=(n-t)/(r-t),y=1-A;for(let C=0;C!==l;++C)s[C]=a[d+C]*y+a[u+C]*A;return s}}class Kie extends uC{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class o0{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=ob(t,this.TimeBufferType),this.values=ob(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:ob(e.times,Array),values:ob(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Kie(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new X7(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Xie(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case tw:t=this.InterpolantFactoryMethodDiscrete;break;case qv:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return tw;case this.InterpolantFactoryMethodLinear:return qv;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,a=r-1;for(;s!==r&&n[s]<e;)++s;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==s||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const l=this.getValueSize();this.times=UA(n,s,a),this.values=UA(this.values,s*l,a*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==s;l++){const u=n[l];if("number"==typeof u&&isNaN(u)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,u),e=!1;break}if(null!==a&&a>u){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,u,a),e=!1;break}a=u}if(void 0!==r&&_P(r))for(let l=0,u=r.length;l!==u;++l){const d=r[l];if(isNaN(d)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,d),e=!1;break}}return e}optimize(){const e=UA(this.times),t=UA(this.values),n=this.getValueSize(),r=2302===this.getInterpolation(),s=e.length-1;let a=1;for(let l=1;l<s;++l){let u=!1;const d=e[l];if(d!==e[l+1]&&(1!==l||d!==e[0]))if(r)u=!0;else{const y=l*n,C=y-n,k=y+n;for(let Q=0;Q!==n;++Q){const se=t[y+Q];if(se!==t[C+Q]||se!==t[k+Q]){u=!0;break}}}if(u){if(l!==a){e[a]=e[l];const y=l*n,C=a*n;for(let k=0;k!==n;++k)t[C+k]=t[y+k]}++a}}if(s>0){e[a]=e[s];for(let l=s*n,u=a*n,d=0;d!==n;++d)t[u+d]=t[l+d];++a}return a!==e.length?(this.times=UA(e,0,a),this.values=UA(t,0,a*n)):(this.times=e,this.values=t),this}clone(){const e=UA(this.times,0),t=UA(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}o0.prototype.TimeBufferType=Float32Array,o0.prototype.ValueBufferType=Float32Array,o0.prototype.DefaultInterpolation=qv;class Ow extends o0{}Ow.prototype.ValueTypeName="bool",Ow.prototype.ValueBufferType=Array,Ow.prototype.DefaultInterpolation=tw,Ow.prototype.InterpolantFactoryMethodLinear=void 0,Ow.prototype.InterpolantFactoryMethodSmooth=void 0;class K7 extends o0{}K7.prototype.ValueTypeName="color";class hC extends o0{}hC.prototype.ValueTypeName="number";class Yie extends uC{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=(n-t)/(r-t);let d=e*l;for(let A=d+l;d!==A;d+=4)Uc.slerpFlat(s,0,a,d-l,a,d,u);return s}}class ab extends o0{InterpolantFactoryMethodLinear(e){return new Yie(this.times,this.values,this.getValueSize(),e)}}ab.prototype.ValueTypeName="quaternion",ab.prototype.DefaultInterpolation=qv,ab.prototype.InterpolantFactoryMethodSmooth=void 0;class Lw extends o0{}Lw.prototype.ValueTypeName="string",Lw.prototype.ValueBufferType=Array,Lw.prototype.DefaultInterpolation=tw,Lw.prototype.InterpolantFactoryMethodLinear=void 0,Lw.prototype.InterpolantFactoryMethodSmooth=void 0;class dC extends o0{}dC.prototype.ValueTypeName="vector";class fC{constructor(e,t=-1,n,r=2500){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Gp(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let a=0,l=n.length;a!==l;++a)t.push(Jie(n[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=n.length;s!==a;++s)t.push(o0.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,a=[];for(let l=0;l<s;l++){let u=[],d=[];u.push((l+s-1)%s,l,(l+1)%s),d.push(0,1,0);const A=$7(u);u=yP(u,1,A),d=yP(d,1,A),!r&&0===u[0]&&(u.push(s),d.push(d[0])),a.push(new hC(".morphTargetInfluences["+t[l].name+"]",u,d).scale(1/n))}return new this(e,-1,a)}static findByName(e,t){let n=e;Array.isArray(e)||(n=e.geometry&&e.geometry.animations||e.animations);for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,u=e.length;l<u;l++){const d=e[l],A=d.name.match(s);if(A&&A.length>1){const y=A[1];let C=r[y];C||(r[y]=C=[]),C.push(d)}}const a=[];for(const l in r)a.push(this.CreateFromMorphTargetSequence(l,r[l],t,n));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(y,C,k,Q,se){if(0!==k.length){const he=[],re=[];vP(k,he,re,Q),0!==he.length&&se.push(new y(C,he,re))}},r=[],s=e.name||"default",a=e.fps||30,l=e.blendMode;let u=e.length||-1;const d=e.hierarchy||[];for(let y=0;y<d.length;y++){const C=d[y].keys;if(C&&0!==C.length)if(C[0].morphTargets){const k={};let Q;for(Q=0;Q<C.length;Q++)if(C[Q].morphTargets)for(let se=0;se<C[Q].morphTargets.length;se++)k[C[Q].morphTargets[se]]=-1;for(const se in k){const he=[],re=[];for(let Le=0;Le!==C[Q].morphTargets.length;++Le){const be=C[Q];he.push(be.time),re.push(be.morphTarget===se?1:0)}r.push(new hC(".morphTargetInfluence["+se+"]",he,re))}u=k.length*a}else{const k=".bones["+t[y].name+"]";n(dC,k+".position",C,"pos",r),n(ab,k+".quaternion",C,"rot",r),n(dC,k+".scale",C,"scl",r)}}return 0===r.length?null:new this(s,u,r,l)}resetDuration(){let t=0;for(let n=0,r=this.tracks.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Jie(i){if(void 0===i.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=function Zie(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return hC;case"vector":case"vector2":case"vector3":case"vector4":return dC;case"color":return K7;case"quaternion":return ab;case"bool":case"boolean":return Ow;case"string":return Lw}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}(i.type);if(void 0===i.times){const t=[],n=[];vP(i.keys,t,n,"value"),i.times=t,i.values=n}return void 0!==e.parse?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const Nw={enabled:!1,files:{},add:function(i,e){!1!==this.enabled&&(this.files[i]=e)},get:function(i){if(!1!==this.enabled)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Y7{constructor(e,t,n){const r=this;let u,s=!1,a=0,l=0;const d=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(A){l++,!1===s&&void 0!==r.onStart&&r.onStart(A,a,l),s=!0},this.itemEnd=function(A){a++,void 0!==r.onProgress&&r.onProgress(A,a,l),a===l&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(A){void 0!==r.onError&&r.onError(A)},this.resolveURL=function(A){return u?u(A):A},this.setURLModifier=function(A){return u=A,this},this.addHandler=function(A,y){return d.push(A,y),this},this.removeHandler=function(A){const y=d.indexOf(A);return-1!==y&&d.splice(y,2),this},this.getHandler=function(A){for(let y=0,C=d.length;y<C;y+=2){const k=d[y],Q=d[y+1];if(k.global&&(k.lastIndex=0),k.test(A))return Q}return null}}}const ere=new Y7;class a0{constructor(e){this.manager=void 0!==e?e:ere,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const H_={};class tre extends Error{constructor(e,t){super(e),this.response=t}}class jp extends a0{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Nw.get(e);if(void 0!==s)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(void 0!==H_[e])return void H_[e].push({onLoad:t,onProgress:n,onError:r});H_[e]=[],H_[e].push({onLoad:t,onProgress:n,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,u=this.responseType;fetch(a).then(d=>{if(200===d.status||0===d.status){if(0===d.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===d.body||void 0===d.body.getReader)return d;const A=H_[e],y=d.body.getReader(),C=d.headers.get("Content-Length")||d.headers.get("X-File-Size"),k=C?parseInt(C):0,Q=0!==k;let se=0;const he=new ReadableStream({start(re){!function Le(){y.read().then(({done:be,value:Ye})=>{if(be)re.close();else{se+=Ye.byteLength;const dt=new ProgressEvent("progress",{lengthComputable:Q,loaded:se,total:k});for(let xt=0,$t=A.length;xt<$t;xt++){const nn=A[xt];nn.onProgress&&nn.onProgress(dt)}re.enqueue(Ye),Le()}})}()}});return new Response(he)}throw new tre(`fetch for "${d.url}" responded with ${d.status}: ${d.statusText}`,d)}).then(d=>{switch(u){case"arraybuffer":return d.arrayBuffer();case"blob":return d.blob();case"document":return d.text().then(A=>(new DOMParser).parseFromString(A,l));case"json":return d.json();default:if(void 0===l)return d.text();{const y=/charset="?([^;"\s]*)"?/i.exec(l),C=y&&y[1]?y[1].toLowerCase():void 0,k=new TextDecoder(C);return d.arrayBuffer().then(Q=>k.decode(Q))}}}).then(d=>{Nw.add(e,d);const A=H_[e];delete H_[e];for(let y=0,C=A.length;y<C;y++){const k=A[y];k.onLoad&&k.onLoad(d)}}).catch(d=>{const A=H_[e];if(void 0===A)throw this.manager.itemError(e),d;delete H_[e];for(let y=0,C=A.length;y<C;y++){const k=A[y];k.onError&&k.onError(d)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class F3 extends a0{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Nw.get(e);if(void 0!==a)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const l=qM("img");function u(){A(),Nw.add(e,this),t&&t(this),s.manager.itemEnd(e)}function d(y){A(),r&&r(y),s.manager.itemError(e),s.manager.itemEnd(e)}function A(){l.removeEventListener("load",u,!1),l.removeEventListener("error",d,!1)}return l.addEventListener("load",u,!1),l.addEventListener("error",d,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class nre extends a0{constructor(e){super(e)}load(e,t,n,r){const s=new kA,a=new F3(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){s.image=l,s.needsUpdate=!0,void 0!==t&&t(s)},n,r),s}}class lb extends Tc{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ir(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class ire extends lb{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Tc.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ir(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const bP=new ea,Z7=new kt,J7=new kt;class xP{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qi(512,512),this.map=null,this.mapPass=null,this.matrix=new ea,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new R5,this._frameExtents=new qi(1,1),this._viewportCount=1,this._viewports=[new Kl(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Z7.setFromMatrixPosition(e.matrixWorld),t.position.copy(Z7),J7.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(J7),t.updateMatrixWorld(),bP.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bP),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(bP)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class rre extends xP{constructor(){super(new Lh(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*rw*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class eU extends lb{constructor(e,t,n=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Tc.DEFAULT_UP),this.updateMatrix(),this.target=new Tc,this.distance=n,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new rre}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const tU=new ea,pC=new kt,wP=new kt;class sre extends xP{constructor(){super(new Lh(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new qi(4,2),this._viewportCount=6,this._viewports=[new Kl(2,1,1,1),new Kl(0,1,1,1),new Kl(3,1,1,1),new Kl(1,1,1,1),new Kl(3,0,1,1),new Kl(1,0,1,1)],this._cubeDirections=[new kt(1,0,0),new kt(-1,0,0),new kt(0,0,1),new kt(0,0,-1),new kt(0,1,0),new kt(0,-1,0)],this._cubeUps=[new kt(0,1,0),new kt(0,1,0),new kt(0,1,0),new kt(0,1,0),new kt(0,0,1),new kt(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),pC.setFromMatrixPosition(e.matrixWorld),n.position.copy(pC),wP.copy(n.position),wP.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(wP),n.updateMatrixWorld(),r.makeTranslation(-pC.x,-pC.y,-pC.z),tU.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(tU)}}class nU extends lb{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new sre}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class ore extends xP{constructor(){super(new ww(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Uw extends lb{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Tc.DEFAULT_UP),this.updateMatrix(),this.target=new Tc,this.shadow=new ore}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class R3 extends lb{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class are extends lb{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class lre{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new kt)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*n),t.addScaledVector(a[4],n*r*1.092548),t.addScaledVector(a[5],r*s*1.092548),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],n*s*1.092548),t.addScaledVector(a[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*r),t.addScaledVector(a[2],1.023328*s),t.addScaledVector(a[3],1.023328*n),t.addScaledVector(a[4],.858086*n*r),t.addScaledVector(a[5],.858086*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],.858086*n*s),t.addScaledVector(a[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class cre extends lb{constructor(e=new lre,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class MP extends a0{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,a=new jp(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return void 0===t[s]&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=MP.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new Ir).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&(r.vertexColors="number"==typeof e.vertexColors?e.vertexColors>0:e.vertexColors),void 0!==e.uniforms)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=n(a.value);break;case"c":r.uniforms[s].value=(new Ir).setHex(a.value);break;case"v2":r.uniforms[s].value=(new qi).fromArray(a.value);break;case"v3":r.uniforms[s].value=(new kt).fromArray(a.value);break;case"v4":r.uniforms[s].value=(new Kl).fromArray(a.value);break;case"m3":r.uniforms[s].value=(new Ka).fromArray(a.value);break;case"m4":r.uniforms[s].value=(new ea).fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new qi).fromArray(s)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new qi).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:Vie,SpriteMaterial:d7,RawShaderMaterial:Gie,ShaderMaterial:yd,PointsMaterial:U_,MeshPhysicalMaterial:dy,MeshStandardMaterial:I3,MeshPhongMaterial:Um,MeshToonMaterial:j7,MeshNormalMaterial:qie,MeshLambertMaterial:Qie,MeshDepthMaterial:z5,MeshDistanceMaterial:u7,MeshBasicMaterial:Ah,MeshMatcapMaterial:Wie,LineDashedMaterial:P3,LineBasicMaterial:eu,Material:Jc}[e]}}class AC{static decodeText(e){if(typeof TextDecoder<"u")return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class ure extends bo{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hre extends a0{constructor(e){super(e)}load(e,t,n,r){const s=this,a=new jp(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(k,Q){if(void 0!==t[Q])return t[Q];const he=k.interleavedBuffers[Q],re=function s(k,Q){if(void 0!==n[Q])return n[Q];const re=new Uint32Array(k.arrayBuffers[Q]).buffer;return n[Q]=re,re}(k,he.buffer),Le=sw(he.type,re),be=new Q5(Le,he.stride);return be.uuid=he.uuid,t[Q]=be,be}const a=e.isInstancedBufferGeometry?new ure:new bo,l=e.data.index;if(void 0!==l){const k=sw(l.type,l.array);a.setIndex(new va(k,1))}const u=e.data.attributes;for(const k in u){const Q=u[k];let se;if(Q.isInterleavedBufferAttribute){const he=r(e.data,Q.data);se=new tb(he,Q.itemSize,Q.offset,Q.normalized)}else{const he=sw(Q.type,Q.array);se=new(Q.isInstancedBufferAttribute?nC:va)(he,Q.itemSize,Q.normalized)}void 0!==Q.name&&(se.name=Q.name),void 0!==Q.usage&&se.setUsage(Q.usage),void 0!==Q.updateRange&&(se.updateRange.offset=Q.updateRange.offset,se.updateRange.count=Q.updateRange.count),a.setAttribute(k,se)}const d=e.data.morphAttributes;if(d)for(const k in d){const Q=d[k],se=[];for(let he=0,re=Q.length;he<re;he++){const Le=Q[he];let be;if(Le.isInterleavedBufferAttribute){const Ye=r(e.data,Le.data);be=new tb(Ye,Le.itemSize,Le.offset,Le.normalized)}else{const Ye=sw(Le.type,Le.array);be=new va(Ye,Le.itemSize,Le.normalized)}void 0!==Le.name&&(be.name=Le.name),se.push(be)}a.morphAttributes[k]=se}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const y=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==y)for(let k=0,Q=y.length;k!==Q;++k){const se=y[k];a.addGroup(se.start,se.count,se.materialIndex)}const C=e.data.boundingSphere;if(void 0!==C){const k=new kt;void 0!==C.center&&k.fromArray(C.center),a.boundingSphere=new OA(k,C.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class dre extends a0{constructor(e){super(e)}load(e,t,n,r){const s=this,a=""===this.path?AC.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new jp(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){let d=null;try{d=JSON.parse(u)}catch(y){return void 0!==r&&r(y),void console.error("THREE:ObjectLoader: Can't parse "+e+".",y.message)}const A=d.metadata;if(void 0===A||void 0===A.type||"geometry"===A.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);s.parse(d,t)},n,r)}loadAsync(e,t){var n=this;return(0,Hp.Z)(function*(){const r=n,s=""===n.path?AC.extractUrlBase(e):n.path;n.resourcePath=n.resourcePath||s;const a=new jp(n.manager);a.setPath(n.path),a.setRequestHeader(n.requestHeader),a.setWithCredentials(n.withCredentials);const l=yield a.loadAsync(e,t),u=JSON.parse(l),d=u.metadata;if(void 0===d||void 0===d.type||"geometry"===d.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return yield r.parseAsync(u)})()}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){void 0!==t&&t(d)}),l=this.parseTextures(e.textures,a),u=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,s,u,l,n),A=this.parseSkeletons(e.skeletons,d);if(this.bindSkeletons(d,A),void 0!==t){let y=!1;for(const C in a)if(a[C].data instanceof HTMLImageElement){y=!0;break}!1===y&&t(d)}return d}parseAsync(e){var t=this;return(0,Hp.Z)(function*(){const n=t.parseAnimations(e.animations),r=t.parseShapes(e.shapes),s=t.parseGeometries(e.geometries,r),a=yield t.parseImagesAsync(e.images),l=t.parseTextures(e.textures,a),u=t.parseMaterials(e.materials,l),d=t.parseObject(e.object,s,u,l,n),A=t.parseSkeletons(e.skeletons,d);return t.bindSkeletons(d,A),d})()}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const s=(new Rw).fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),void 0!==e)for(let s=0,a=e.length;s<a;s++){const l=(new A3).fromJSON(e[s],r);n[l.uuid]=l}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new hre;for(let s=0,a=e.length;s<a;s++){let l;const u=e[s];switch(u.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(u);break;default:u.type in W7?l=W7[u.type].fromJSON(u,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${u.type}"`)}l.uuid=u.uuid,void 0!==u.name&&(l.name=u.name),void 0!==u.userData&&(l.userData=u.userData),n[u.uuid]=l}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const s=new MP;s.setTextures(t);for(let a=0,l=e.length;a<l;a++){const u=e[a];void 0===n[u.uuid]&&(n[u.uuid]=s.parse(u)),r[u.uuid]=n[u.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const s=fC.parse(e[n]);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function l(u){if("string"==typeof u){const d=u;return function a(u){return n.manager.itemStart(u),s.load(u,function(){n.manager.itemEnd(u)},void 0,function(){n.manager.itemError(u),n.manager.itemEnd(u)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d)}return u.data?{data:sw(u.type,u.data),width:u.width,height:u.height}:null}if(void 0!==e&&e.length>0){const u=new Y7(t);s=new F3(u),s.setCrossOrigin(this.crossOrigin);for(let d=0,A=e.length;d<A;d++){const y=e[d],C=y.url;if(Array.isArray(C)){const k=[];for(let Q=0,se=C.length;Q<se;Q++){const re=l(C[Q]);null!==re&&(re instanceof HTMLImageElement?k.push(re):k.push(new tC(re.data,re.width,re.height)))}r[y.uuid]=new Xv(k)}else{const k=l(y.url);r[y.uuid]=new Xv(k)}}}return r}parseImagesAsync(e){var t=this;return(0,Hp.Z)(function*(){const n=t,r={};let s;function a(u){return l.apply(this,arguments)}function l(){return(l=(0,Hp.Z)(function*(u){if("string"==typeof u){const d=u,A=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:n.resourcePath+d;return yield s.loadAsync(A)}return u.data?{data:sw(u.type,u.data),width:u.width,height:u.height}:null})).apply(this,arguments)}if(void 0!==e&&e.length>0){s=new F3(t.manager),s.setCrossOrigin(t.crossOrigin);for(let u=0,d=e.length;u<d;u++){const A=e[u],y=A.url;if(Array.isArray(y)){const C=[];for(let k=0,Q=y.length;k<Q;k++){const se=y[k],he=yield a(se);null!==he&&(he instanceof HTMLImageElement?C.push(he):C.push(new tC(he.data,he.width,he.height)))}r[A.uuid]=new Xv(C)}else{const C=yield a(A.url);r[A.uuid]=new Xv(C)}}}return r})()}parseTextures(e,t){function n(s,a){return"number"==typeof s?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(void 0!==e)for(let s=0,a=e.length;s<a;s++){const l=e[s];void 0===l.image&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),void 0===t[l.image]&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const u=t[l.image],d=u.data;let A;Array.isArray(d)?(A=new n3,6===d.length&&(A.needsUpdate=!0)):(A=d&&d.data?new tC:new kA,d&&(A.needsUpdate=!0)),A.source=u,A.uuid=l.uuid,void 0!==l.name&&(A.name=l.name),void 0!==l.mapping&&(A.mapping=n(l.mapping,fre)),void 0!==l.channel&&(A.channel=l.channel),void 0!==l.offset&&A.offset.fromArray(l.offset),void 0!==l.repeat&&A.repeat.fromArray(l.repeat),void 0!==l.center&&A.center.fromArray(l.center),void 0!==l.rotation&&(A.rotation=l.rotation),void 0!==l.wrap&&(A.wrapS=n(l.wrap[0],iU),A.wrapT=n(l.wrap[1],iU)),void 0!==l.format&&(A.format=l.format),void 0!==l.internalFormat&&(A.internalFormat=l.internalFormat),void 0!==l.type&&(A.type=l.type),void 0!==l.colorSpace&&(A.colorSpace=l.colorSpace),void 0!==l.encoding&&(A.encoding=l.encoding),void 0!==l.minFilter&&(A.minFilter=n(l.minFilter,rU)),void 0!==l.magFilter&&(A.magFilter=n(l.magFilter,rU)),void 0!==l.anisotropy&&(A.anisotropy=l.anisotropy),void 0!==l.flipY&&(A.flipY=l.flipY),void 0!==l.generateMipmaps&&(A.generateMipmaps=l.generateMipmaps),void 0!==l.premultiplyAlpha&&(A.premultiplyAlpha=l.premultiplyAlpha),void 0!==l.unpackAlignment&&(A.unpackAlignment=l.unpackAlignment),void 0!==l.userData&&(A.userData=l.userData),r[l.uuid]=A}return r}parseObject(e,t,n,r,s){let a,A,y;function l(C){return void 0===t[C]&&console.warn("THREE.ObjectLoader: Undefined geometry",C),t[C]}function u(C){if(void 0!==C){if(Array.isArray(C)){const k=[];for(let Q=0,se=C.length;Q<se;Q++){const he=C[Q];void 0===n[he]&&console.warn("THREE.ObjectLoader: Undefined material",he),k.push(n[he])}return k}return void 0===n[C]&&console.warn("THREE.ObjectLoader: Undefined material",C),n[C]}}function d(C){return void 0===r[C]&&console.warn("THREE.ObjectLoader: Undefined texture",C),r[C]}switch(e.type){case"Scene":a=new u3,void 0!==e.background&&(a.background=Number.isInteger(e.background)?new Ir(e.background):d(e.background)),void 0!==e.environment&&(a.environment=d(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new q5(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new G5(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new Lh(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ww(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new R3(e.color,e.intensity);break;case"DirectionalLight":a=new Uw(e.color,e.intensity);break;case"PointLight":a=new nU(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new are(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new eU(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new ire(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new cre).fromJSON(e);break;case"SkinnedMesh":A=l(e.geometry),y=u(e.material),a=new b7(A,y),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":A=l(e.geometry),y=u(e.material),a=new Ua(A,y);break;case"InstancedMesh":A=l(e.geometry),y=u(e.material);const k=e.instanceMatrix,Q=e.instanceColor;a=new C7(A,y,e.count),a.instanceMatrix=new nC(new Float32Array(k.array),16),void 0!==Q&&(a.instanceColor=new nC(new Float32Array(Q.array),Q.itemSize));break;case"LOD":a=new rie;break;case"Line":a=new r0(l(e.geometry),u(e.material));break;case"LineLoop":a=new I7(l(e.geometry),u(e.material));break;case"LineSegments":a=new NA(l(e.geometry),u(e.material));break;case"PointCloud":case"Points":a=new nb(l(e.geometry),u(e.material));break;case"Sprite":a=new iie(u(e.material));break;case"Group":a=new Wu;break;case"Bone":a=new j5;break;default:a=new Tc}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const C=e.children;for(let k=0;k<C.length;k++)a.add(this.parseObject(C[k],t,n,r,s))}if(void 0!==e.animations){const C=e.animations;for(let k=0;k<C.length;k++)a.animations.push(s[C[k]])}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const C=e.levels;for(let k=0;k<C.length;k++){const Q=C[k],se=a.getObjectByProperty("uuid",Q.object);void 0!==se&&a.addLevel(se,Q.distance,Q.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(n){if(!0===n.isSkinnedMesh&&void 0!==n.skeleton){const r=t[n.skeleton];void 0===r?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}}const fre={UVMapping:300,CubeReflectionMapping:Uv,CubeRefractionMapping:zv,EquirectangularReflectionMapping:PE,EquirectangularRefractionMapping:FE,CubeUVReflectionMapping:zM},iU={RepeatWrapping:ry,ClampToEdgeWrapping:_d,MirroredRepeatWrapping:Yx},rU={NearestFilter:ou,NearestMipmapNearestFilter:HM,NearestMipmapLinearFilter:Zx,LinearFilter:Zc,LinearMipmapNearestFilter:RE,LinearMipmapLinearFilter:Jg};class pre extends a0{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Nw.get(e);if(void 0!==a)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const l={};l.credentials="anonymous"===this.crossOrigin?"same-origin":"include",l.headers=this.requestHeader,fetch(e,l).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){Nw.add(e,u),t&&t(u),s.manager.itemEnd(e)}).catch(function(u){r&&r(u),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}class lU{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=cU(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=cU();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function cU(){return(typeof performance>"u"?Date:performance).now()}const CP="\\[\\]\\.:\\/",_re=new RegExp("["+CP+"]","g"),SP="[^"+CP+"]",yre="[^"+CP.replace("\\.","")+"]",Mre=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",SP)+/(WCOD+)?/.source.replace("WCOD",yre)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",SP)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",SP)+"$"),Cre=["material","materials","bones","map"];class Sre{constructor(e,t,n){const r=n||Hl.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const r=this._bindings[this._targetGroup.nCachedObjects_];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}let Hl=(()=>{class i{constructor(t,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,n,r){return t&&t.isAnimationObjectGroup?new i.Composite(t,n,r):new i(t,n,r)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(_re,"")}static parseTrackName(t){const n=Mre.exec(t);if(null===n)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},s=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==s&&-1!==s){const a=r.nodeName.substring(s+1);-1!==Cre.indexOf(a)&&(r.nodeName=r.nodeName.substring(0,s),r.objectName=a)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return r}static findNode(t,n){if(void 0===n||""===n||"."===n||-1===n||n===t.name||n===t.uuid)return t;if(t.skeleton){const r=t.skeleton.getBoneByName(n);if(void 0!==r)return r}if(t.children){const r=function(a){for(let l=0;l<a.length;l++){const u=a[l];if(u.name===n||u.uuid===n)return u;const d=r(u.children);if(d)return d}return null},s=r(t.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,n){t[n]=this.targetObject[this.propertyName]}_getValue_array(t,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)t[n++]=r[s]}_getValue_arrayElement(t,n){t[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,n){this.resolvedProperty.toArray(t,n)}_setValue_direct(t,n){this.targetObject[this.propertyName]=t[n]}_setValue_direct_setNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,n){this.targetObject[this.propertyName]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=t[n++]}_setValue_array_setNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=t[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,n){const r=this.resolvedProperty;for(let s=0,a=r.length;s!==a;++s)r[s]=t[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,n){this.resolvedProperty[this.propertyIndex]=t[n]}_setValue_arrayElement_setNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty[this.propertyIndex]=t[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,n){this.resolvedProperty.fromArray(t,n)}_setValue_fromArray_setNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,n){this.resolvedProperty.fromArray(t,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,n){this.bind(),this.getValue(t,n)}_setValue_unbound(t,n){this.bind(),this.setValue(t,n)}bind(){let t=this.node;const n=this.parsedPath,r=n.objectName,s=n.propertyName;let a=n.propertyIndex;if(t||(t=i.findNode(this.rootNode,n.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(r){let A=n.objectIndex;switch(r){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let y=0;y<t.length;y++)if(t[y].name===A){A=y;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[r]}if(void 0!==A){if(void 0===t[A])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[A]}}const l=t[s];if(void 0===l)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n.nodeName+"."+s+" but it wasn't found.",t);let u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===s){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[a]&&(a=t.morphTargetDictionary[a])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=a}else void 0!==l.fromArray&&void 0!==l.toArray?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=s;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=Sre,i})();Hl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Hl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Hl.prototype.GetterByBindingType=[Hl.prototype._getValue_direct,Hl.prototype._getValue_array,Hl.prototype._getValue_arrayElement,Hl.prototype._getValue_toArray],Hl.prototype.SetterByBindingTypeAndVersioning=[[Hl.prototype._setValue_direct,Hl.prototype._setValue_direct_setNeedsUpdate,Hl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Hl.prototype._setValue_array,Hl.prototype._setValue_array_setNeedsUpdate,Hl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Hl.prototype._setValue_arrayElement,Hl.prototype._setValue_arrayElement_setNeedsUpdate,Hl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Hl.prototype._setValue_fromArray,Hl.prototype._setValue_fromArray_setNeedsUpdate,Hl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);class Bre{constructor(e,t,n=0,r=1/0){this.ray=new VE(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new w5,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,n=[]){return TP(e,this,n,t),n.sort(fU),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)TP(e[r],this,n,t);return n.sort(fU),n}}function fU(i,e){return i.distance-e.distance}function TP(i,e,t,n){if(i.layers.test(e.layers)&&i.raycast(e,t),!0===n){const r=i.children;for(let s=0,a=r.length;s<a;s++)TP(r[s],e,t,!0)}}class pU{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(au(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const mU=new kt,O3=new kt;class BP extends NA{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new bo;r.setAttribute("position",new Fs(t,3)),r.setAttribute("color",new Fs([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(r,new eu({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Ir,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Fre{constructor(){this.type="ShapePath",this.color=new Ir,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new b3,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,a){return this.currentPath.bezierCurveTo(e,t,n,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(re,Le){const be=Le.length;let Ye=!1;for(let dt=be-1,xt=0;xt<be;dt=xt++){let $t=Le[dt],nn=Le[xt],gt=nn.x-$t.x,Wt=nn.y-$t.y;if(Math.abs(Wt)>Number.EPSILON){if(Wt<0&&($t=Le[xt],gt=-gt,nn=Le[dt],Wt=-Wt),re.y<$t.y||re.y>nn.y)continue;if(re.y===$t.y){if(re.x===$t.x)return!0}else{const Nn=Wt*(re.x-$t.x)-gt*(re.y-$t.y);if(0===Nn)return!0;if(Nn<0)continue;Ye=!Ye}}else{if(re.y!==$t.y)continue;if(nn.x<=re.x&&re.x<=$t.x||$t.x<=re.x&&re.x<=nn.x)return!0}}return Ye}const r=z_.isClockWise,s=this.subPaths;if(0===s.length)return[];let a,l,u;const d=[];if(1===s.length)return l=s[0],u=new Rw,u.curves=l.curves,d.push(u),d;let A=!r(s[0].getPoints());A=e?!A:A;const y=[],C=[];let se,he,k=[],Q=0;C[Q]=void 0,k[Q]=[];for(let re=0,Le=s.length;re<Le;re++)l=s[re],se=l.getPoints(),a=r(se),a=e?!a:a,a?(!A&&C[Q]&&Q++,C[Q]={s:new Rw,p:se},C[Q].s.curves=l.curves,A&&Q++,k[Q]=[]):k[Q].push({h:l,p:se[0]});if(!C[0])return function t(re){const Le=[];for(let be=0,Ye=re.length;be<Ye;be++){const dt=re[be],xt=new Rw;xt.curves=dt.curves,Le.push(xt)}return Le}(s);if(C.length>1){let re=!1,Le=0;for(let be=0,Ye=C.length;be<Ye;be++)y[be]=[];for(let be=0,Ye=C.length;be<Ye;be++){const dt=k[be];for(let xt=0;xt<dt.length;xt++){const $t=dt[xt];let nn=!0;for(let gt=0;gt<C.length;gt++)n($t.p,C[gt].p)&&(be!==gt&&Le++,nn?(nn=!1,y[gt].push($t)):re=!0);nn&&y[be].push($t)}}Le>0&&!1===re&&(k=y)}for(let re=0,Le=C.length;re<Le;re++){u=C[re].s,d.push(u),he=k[re];for(let be=0,Ye=he.length;be<Ye;be++)u.holes.push(he[be].h)}return d}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:jx}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=jx);var Rre=Ce(3960),kre=Ce.n(Rre);const MU={type:"change"},IP={type:"start"},CU={type:"end"};class Ore extends jv{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new kt,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:$x.ROTATE,MIDDLE:$x.DOLLY,RIGHT:$x.PAN},this.touches={ONE:Xx.ROTATE,TWO:Xx.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(On){On.addEventListener("keydown",ba),this._domElementKeyEvents=On},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ba),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(MU),n.update(),s=r.NONE},this.update=function(){const On=new kt,mr=(new Uc).setFromUnitVectors(e.up,new kt(0,1,0)),Fi=mr.clone().invert(),xs=new kt,Js=new Uc,xo=2*Math.PI;return function(){const Ao=n.object.position;On.copy(Ao).sub(n.target),On.applyQuaternion(mr),l.setFromVector3(On),n.autoRotate&&s===r.NONE&&gt(function $t(){return 2*Math.PI/60/60*n.autoRotateSpeed}()),n.enableDamping?(l.theta+=u.theta*n.dampingFactor,l.phi+=u.phi*n.dampingFactor):(l.theta+=u.theta,l.phi+=u.phi);let la=n.minAzimuthAngle,qa=n.maxAzimuthAngle;return isFinite(la)&&isFinite(qa)&&(la<-Math.PI?la+=xo:la>Math.PI&&(la-=xo),qa<-Math.PI?qa+=xo:qa>Math.PI&&(qa-=xo),l.theta=la<=qa?Math.max(la,Math.min(qa,l.theta)):l.theta>(la+qa)/2?Math.max(la,l.theta):Math.min(qa,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=d,l.radius=Math.max(n.minDistance,Math.min(n.maxDistance,l.radius)),!0===n.enableDamping?n.target.addScaledVector(A,n.dampingFactor):n.target.add(A),On.setFromSpherical(l),On.applyQuaternion(Fi),Ao.copy(n.target).add(On),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,A.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),A.set(0,0,0)),d=1,!!(y||xs.distanceToSquared(n.object.position)>a||8*(1-Js.dot(n.object.quaternion))>a)&&(n.dispatchEvent(MU),xs.copy(n.object.position),Js.copy(n.object.quaternion),y=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",Jt),n.domElement.removeEventListener("pointerdown",Cr),n.domElement.removeEventListener("pointercancel",hs),n.domElement.removeEventListener("wheel",Eo),n.domElement.removeEventListener("pointermove",zs),n.domElement.removeEventListener("pointerup",hs),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",ba),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=r.NONE;const a=1e-6,l=new pU,u=new pU;let d=1;const A=new kt;let y=!1;const C=new qi,k=new qi,Q=new qi,se=new qi,he=new qi,re=new qi,Le=new qi,be=new qi,Ye=new qi,dt=[],xt={};function nn(){return Math.pow(.95,n.zoomSpeed)}function gt(On){u.theta-=On}function Wt(On){u.phi-=On}const Nn=function(){const On=new kt;return function(Fi,xs){On.setFromMatrixColumn(xs,0),On.multiplyScalar(-Fi),A.add(On)}}(),yi=function(){const On=new kt;return function(Fi,xs){!0===n.screenSpacePanning?On.setFromMatrixColumn(xs,1):(On.setFromMatrixColumn(xs,0),On.crossVectors(n.object.up,On)),On.multiplyScalar(Fi),A.add(On)}}(),Rn=function(){const On=new kt;return function(Fi,xs){const Js=n.domElement;if(n.object.isPerspectiveCamera){On.copy(n.object.position).sub(n.target);let Ns=On.length();Ns*=Math.tan(n.object.fov/2*Math.PI/180),Nn(2*Fi*Ns/Js.clientHeight,n.object.matrix),yi(2*xs*Ns/Js.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(Nn(Fi*(n.object.right-n.object.left)/n.object.zoom/Js.clientWidth,n.object.matrix),yi(xs*(n.object.top-n.object.bottom)/n.object.zoom/Js.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function kn(On){n.object.isPerspectiveCamera?d/=On:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom*On)),n.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function li(On){n.object.isPerspectiveCamera?d*=On:n.object.isOrthographicCamera?(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/On)),n.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function Wn(On){C.set(On.clientX,On.clientY)}function si(On){se.set(On.clientX,On.clientY)}function Ii(){1===dt.length?C.set(dt[0].pageX,dt[0].pageY):C.set(.5*(dt[0].pageX+dt[1].pageX),.5*(dt[0].pageY+dt[1].pageY))}function jr(){1===dt.length?se.set(dt[0].pageX,dt[0].pageY):se.set(.5*(dt[0].pageX+dt[1].pageX),.5*(dt[0].pageY+dt[1].pageY))}function Jr(){const On=dt[0].pageX-dt[1].pageX,mr=dt[0].pageY-dt[1].pageY,Fi=Math.sqrt(On*On+mr*mr);Le.set(0,Fi)}function qs(On){if(1==dt.length)k.set(On.pageX,On.pageY);else{const Fi=_s(On);k.set(.5*(On.pageX+Fi.x),.5*(On.pageY+Fi.y))}Q.subVectors(k,C).multiplyScalar(n.rotateSpeed);const mr=n.domElement;gt(2*Math.PI*Q.x/mr.clientHeight),Wt(2*Math.PI*Q.y/mr.clientHeight),C.copy(k)}function Br(On){if(1===dt.length)he.set(On.pageX,On.pageY);else{const mr=_s(On);he.set(.5*(On.pageX+mr.x),.5*(On.pageY+mr.y))}re.subVectors(he,se).multiplyScalar(n.panSpeed),Rn(re.x,re.y),se.copy(he)}function Ls(On){const mr=_s(On),Fi=On.pageX-mr.x,xs=On.pageY-mr.y,Js=Math.sqrt(Fi*Fi+xs*xs);be.set(0,Js),Ye.set(0,Math.pow(be.y/Le.y,n.zoomSpeed)),kn(Ye.y),Le.copy(be)}function Cr(On){!1!==n.enabled&&(0===dt.length&&(n.domElement.setPointerCapture(On.pointerId),n.domElement.addEventListener("pointermove",zs),n.domElement.addEventListener("pointerup",hs)),function Ni(On){dt.push(On)}(On),"touch"===On.pointerType?function yl(On){switch(Vr(On),dt.length){case 1:switch(n.touches.ONE){case Xx.ROTATE:if(!1===n.enableRotate)return;Ii(),s=r.TOUCH_ROTATE;break;case Xx.PAN:if(!1===n.enablePan)return;jr(),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(n.touches.TWO){case Xx.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function Bn(){n.enableZoom&&Jr(),n.enablePan&&jr()})(),s=r.TOUCH_DOLLY_PAN;break;case Xx.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function io(){n.enableZoom&&Jr(),n.enableRotate&&Ii()})(),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(IP)}(On):function Ho(On){let mr;switch(On.button){case 0:mr=n.mouseButtons.LEFT;break;case 1:mr=n.mouseButtons.MIDDLE;break;case 2:mr=n.mouseButtons.RIGHT;break;default:mr=-1}switch(mr){case $x.DOLLY:if(!1===n.enableZoom)return;(function ni(On){Le.set(On.clientX,On.clientY)})(On),s=r.DOLLY;break;case $x.ROTATE:if(On.ctrlKey||On.metaKey||On.shiftKey){if(!1===n.enablePan)return;si(On),s=r.PAN}else{if(!1===n.enableRotate)return;Wn(On),s=r.ROTATE}break;case $x.PAN:if(On.ctrlKey||On.metaKey||On.shiftKey){if(!1===n.enableRotate)return;Wn(On),s=r.ROTATE}else{if(!1===n.enablePan)return;si(On),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(IP)}(On))}function zs(On){!1!==n.enabled&&("touch"===On.pointerType?function yn(On){switch(Vr(On),s){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;qs(On),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;Br(On),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;(function Tr(On){n.enableZoom&&Ls(On),n.enablePan&&Br(On)})(On),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;(function ar(On){n.enableZoom&&Ls(On),n.enableRotate&&qs(On)})(On),n.update();break;default:s=r.NONE}}(On):function Vo(On){switch(s){case r.ROTATE:if(!1===n.enableRotate)return;!function Ei(On){k.set(On.clientX,On.clientY),Q.subVectors(k,C).multiplyScalar(n.rotateSpeed);const mr=n.domElement;gt(2*Math.PI*Q.x/mr.clientHeight),Wt(2*Math.PI*Q.y/mr.clientHeight),C.copy(k),n.update()}(On);break;case r.DOLLY:if(!1===n.enableZoom)return;!function Ki(On){be.set(On.clientX,On.clientY),Ye.subVectors(be,Le),Ye.y>0?kn(nn()):Ye.y<0&&li(nn()),Le.copy(be),n.update()}(On);break;case r.PAN:if(!1===n.enablePan)return;!function Zr(On){he.set(On.clientX,On.clientY),re.subVectors(he,se).multiplyScalar(n.panSpeed),Rn(re.x,re.y),se.copy(he),n.update()}(On)}}(On))}function hs(On){(function Rr(On){delete xt[On.pointerId];for(let mr=0;mr<dt.length;mr++)if(dt[mr].pointerId==On.pointerId)return void dt.splice(mr,1)})(On),0===dt.length&&(n.domElement.releasePointerCapture(On.pointerId),n.domElement.removeEventListener("pointermove",zs),n.domElement.removeEventListener("pointerup",hs)),n.dispatchEvent(CU),s=r.NONE}function Eo(On){!1===n.enabled||!1===n.enableZoom||s!==r.NONE||(On.preventDefault(),n.dispatchEvent(IP),function Hr(On){On.deltaY<0?li(nn()):On.deltaY>0&&kn(nn()),n.update()}(On),n.dispatchEvent(CU))}function ba(On){!1===n.enabled||!1===n.enablePan||function Ci(On){let mr=!1;switch(On.code){case n.keys.UP:On.ctrlKey||On.metaKey||On.shiftKey?Wt(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Rn(0,n.keyPanSpeed),mr=!0;break;case n.keys.BOTTOM:On.ctrlKey||On.metaKey||On.shiftKey?Wt(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Rn(0,-n.keyPanSpeed),mr=!0;break;case n.keys.LEFT:On.ctrlKey||On.metaKey||On.shiftKey?gt(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Rn(n.keyPanSpeed,0),mr=!0;break;case n.keys.RIGHT:On.ctrlKey||On.metaKey||On.shiftKey?gt(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):Rn(-n.keyPanSpeed,0),mr=!0}mr&&(On.preventDefault(),n.update())}(On)}function Jt(On){!1!==n.enabled&&On.preventDefault()}function Vr(On){let mr=xt[On.pointerId];void 0===mr&&(mr=new qi,xt[On.pointerId]=mr),mr.set(On.pageX,On.pageY)}function _s(On){return xt[(On.pointerId===dt[0].pointerId?dt[1]:dt[0]).pointerId]}n.domElement.addEventListener("contextmenu",Jt),n.domElement.addEventListener("pointerdown",Cr),n.domElement.addEventListener("pointercancel",hs),n.domElement.addEventListener("wheel",Eo,{passive:!1}),this.update()}}class Lre{constructor(e,t=[0,0,200]){var n;this.controls=[],this.mainControls=null,this.overlayControls=null;const r=null===(n=e.getMainRenderer())||void 0===n?void 0:n.domElement,s=new Lh(75,r.offsetWidth/r.offsetHeight,10,1e5),a=new ww(r.offsetWidth/-2,r.offsetWidth/2,r.offsetHeight/2,r.offsetHeight/-2,10,1e5);this.perspectiveControls=this.setOrbitControls(s,r),this.orthographicControls=this.setOrbitControls(a,r),s.position.z=a.position.z=t[2],s.position.y=a.position.y=t[1],s.position.x=a.position.x=t[0],t.length>=6&&(this.perspectiveControls.target=this.orthographicControls.target=new kt(t[3],t[4],t[5])),this.addControls(this.perspectiveControls),this.addControls(this.orthographicControls),this.setActiveControls(this.perspectiveControls),this.setMainControls(this.perspectiveControls),this.setOverlayControls(this.orthographicControls),this.getActiveControls().addEventListener("change",()=>{this.transformSync(),this.updateSync()}),this.initializeZoomControls(),this.setupResize(r)}setOrbitControls(e,t){const n=new Ore(e,t);return n.enableDamping=!0,n.dampingFactor=.25,n.enableZoom=!0,n.autoRotate=!1,n}setActiveControls(e){this.activeControls=e}setMainControls(e){this.mainControls=e}setOverlayControls(e){this.overlayControls=e}getActiveControls(){return this.activeControls}getMainControls(){return this.mainControls}getOverlayControls(){return this.overlayControls}getActiveCamera(){return this.activeControls.object}getMainCamera(){return this.mainControls.object}getOverlayCamera(){return this.overlayControls.object}getAllCameras(){return[this.getMainCamera(),this.getOverlayCamera()]}addControls(e){this.containsObject(e,this.controls)||this.controls.push(e)}removeControls(e){const t=this.controls.indexOf(e);t>-1&&this.controls.splice(t,1)}swapControls(){const e=this.mainControls;this.mainControls=this.overlayControls,this.overlayControls=e}updateSync(){for(const e of this.controls)e!==this.activeControls&&this.update(e)}update(e){e.update()}transformSync(){for(const e of this.controls)e!==this.activeControls&&(this.positionSync(e),this.rotationSync(e))}zoomTo(e,t){for(const n of this.zoomCameraAnimPairs){const r=n.camera,s=n.anim;if(r.isOrthographicCamera)s.to({zoom:r.zoom*(1/e)},t),r.updateProjectionMatrix();else{const a=r.position;s.to({x:a.x*e,y:a.y*e,z:a.z*e},t)}s.start()}}lookAtObject(e,t){const n=new kt(0,0,0),r=this.getObjectPosition(e,t);if(r&&r.distanceTo(n)>.001)for(const s of this.getAllCameras())new Cf(s.position).to({x:1.1*r.x,y:1.1*r.y,z:1.1*r.z},200).start()}getObjectPosition(e,t){var n,r;const s=t.getObjectByProperty("uuid",e);if(s){const a=new kt(0,0,0);let l=new kt;return s instanceof Wu?s.traverse(u=>{var d,A;if(0===u.children.length)if(u.position.equals(a)){if(null!==(d=u.geometry)&&void 0!==d&&d.boundingSphere)try{l.add(u.geometry.boundingSphere.getBoundingBox().max)}catch{l.add(null===(A=u.geometry.boundingSphere)||void 0===A?void 0:A.center)}}else l.add(u.position)}):l=s.position.equals(a)?null===(r=null===(n=s.geometry)||void 0===n?void 0:n.boundingSphere)||void 0===r?void 0:r.center:s.position,l}}hideTubeTracksOnZoom(e,t){let n=!1;const r=new kt;this.activeControls.addEventListener("change",s=>{var a,l,u,d;const A=(null===(l=null===(a=s?.target)||void 0===a?void 0:a.object)||void 0===l?void 0:l.position).distanceTo(r)<t;A&&!n?(null===(u=e.getObjectByName("Tracks"))||void 0===u||u.traverse(y=>{"Track"===y.name&&y.geometry instanceof sb&&(y.visible=!1)}),n=!0):!A&&n&&(null===(d=e.getObjectByName("Tracks"))||void 0===d||d.traverse(y=>{"Track"===y.name&&y.geometry instanceof sb&&(y.visible=!0)}),n=!1)})}initializeZoomControls(){const e=this.getAllCameras();this.zoomCameraAnimPairs=[];for(const t of e){const n=new Cf(t.isOrthographicCamera?t:t.position);this.zoomCameraAnimPairs.push({camera:t,anim:n})}}positionSync(e){e.object.position.set(this.activeControls.object.position.x,this.activeControls.object.position.y,this.activeControls.object.position.z)}rotationSync(e){e.target=this.activeControls.target}containsObject(e,t){for(const n of t)if(n===e)return!0;return!1}setupResize(e){window.addEventListener("resize",()=>{let t=this.getMainCamera();t.isOrthographicCamera?(t.left=e.offsetWidth/-2,t.right=e.offsetWidth/2,t.top=e.offsetHeight/2,t.bottom=e.offsetHeight/-2,t.updateProjectionMatrix()):(t.aspect=e.offsetWidth/e.offsetHeight,t.updateProjectionMatrix())})}objectIndex(e,t){for(let n=0;n<t.length;n++)if(t[n]===e)return n;return-1}}class Nre{constructor(){this.mainRenderer=null,this.overlayRenderer=null,this.renderers=[];const e=new V5({antialias:!0,alpha:!0,powerPreference:"high-performance"});this.addRenderer(e),this.setMainRenderer(e)}init(e="eventDisplay"){this.getMainRenderer().setAnimationLoop(null),this.initRenderer(e)}render(e,t){if(this.getOverlayRenderer()&&!this.getOverlayRenderer().domElement.hidden){const n=e.background;e.background=null,this.isFixedOverlay()||this.getOverlayRenderer().render(e,t),e.background=n}}initRenderer(e){let t=document.getElementById(e);t||(t=document.body);const n=()=>t.offsetWidth>0?t.offsetWidth:window.innerWidth,r=()=>t.offsetHeight>0?t.offsetHeight:window.innerHeight,s=this.getMainRenderer();s.setSize(n(),r(),!1),s.setPixelRatio(window.devicePixelRatio),s.domElement.id="three-canvas",t.appendChild(this.getMainRenderer().domElement),window.addEventListener("resize",()=>{s.setSize(n(),r())})}setMainRenderer(e){this.mainRenderer=e}setOverlayRenderer(e){const t=new V5({canvas:e,antialias:!1,alpha:!0});this.addRenderer(t),this.overlayRenderer=t}setRenderers(e){this.renderers=e}getMainRenderer(){return this.mainRenderer}getOverlayRenderer(){return this.overlayRenderer}getRenderers(){return this.renderers}addRenderer(e){this.containsObject(e,this.renderers)||this.renderers.push(e)}removeControls(e){const t=this.renderers.indexOf(e);t>-1&&this.renderers.splice(t,1)}swapRenderers(e,t){const n=e;e=t,t=n}containsObject(e,t){for(const n of t)if(n===e)return!0;return!1}setLocalClippingEnabled(e){for(const t of this.renderers)t.localClippingEnabled=e}getLocalClipping(){if(this.renderers.length>0)return this.renderers[0].localClippingEnabled}isFixedOverlay(){return this.fixedOverlay}setFixOverlay(e){this.fixedOverlay=e}}class Ure{parse(e){let t="",n=0,r=0,s=0;const a=new kt,l=new Ir,u=new kt,d=new qi,A=[];return e.traverse(function(Q){!0===Q.isMesh&&function y(Q){let se=0,he=0,re=0;const Le=Q.geometry,be=new Ka,Ye=Le.getAttribute("position"),dt=Le.getAttribute("normal"),xt=Le.getAttribute("uv"),$t=Le.getIndex();if(t+="o "+Q.name+"\n",Q.material&&Q.material.name&&(t+="usemtl "+Q.material.name+"\n"),void 0!==Ye)for(let nn=0,gt=Ye.count;nn<gt;nn++,se++)a.fromBufferAttribute(Ye,nn),a.applyMatrix4(Q.matrixWorld),t+="v "+a.x+" "+a.y+" "+a.z+"\n";if(void 0!==xt)for(let nn=0,gt=xt.count;nn<gt;nn++,re++)d.fromBufferAttribute(xt,nn),t+="vt "+d.x+" "+d.y+"\n";if(void 0!==dt){be.getNormalMatrix(Q.matrixWorld);for(let nn=0,gt=dt.count;nn<gt;nn++,he++)u.fromBufferAttribute(dt,nn),u.applyMatrix3(be).normalize(),t+="vn "+u.x+" "+u.y+" "+u.z+"\n"}if(null!==$t)for(let nn=0,gt=$t.count;nn<gt;nn+=3){for(let Wt=0;Wt<3;Wt++){const Nn=$t.getX(nn+Wt)+1;A[Wt]=n+Nn+(dt||xt?"/"+(xt?r+Nn:"")+(dt?"/"+(s+Nn):""):"")}t+="f "+A.join(" ")+"\n"}else for(let nn=0,gt=Ye.count;nn<gt;nn+=3){for(let Wt=0;Wt<3;Wt++){const Nn=nn+Wt+1;A[Wt]=n+Nn+(dt||xt?"/"+(xt?r+Nn:"")+(dt?"/"+(s+Nn):""):"")}t+="f "+A.join(" ")+"\n"}n+=se,r+=re,s+=he}(Q),!0===Q.isLine&&function C(Q){let se=0;const re=Q.type,Le=Q.geometry.getAttribute("position");if(t+="o "+Q.name+"\n",void 0!==Le)for(let be=0,Ye=Le.count;be<Ye;be++,se++)a.fromBufferAttribute(Le,be),a.applyMatrix4(Q.matrixWorld),t+="v "+a.x+" "+a.y+" "+a.z+"\n";if("Line"===re){t+="l ";for(let be=1,Ye=Le.count;be<=Ye;be++)t+=n+be+" ";t+="\n"}if("LineSegments"===re)for(let be=1,Ye=be+1,dt=Le.count;be<dt;be+=2,Ye=be+1)t+="l "+(n+be)+" "+(n+Ye)+"\n";n+=se}(Q),!0===Q.isPoints&&function k(Q){let se=0;const he=Q.geometry,re=he.getAttribute("position"),Le=he.getAttribute("color");if(t+="o "+Q.name+"\n",void 0!==re){for(let be=0,Ye=re.count;be<Ye;be++,se++)a.fromBufferAttribute(re,be),a.applyMatrix4(Q.matrixWorld),t+="v "+a.x+" "+a.y+" "+a.z,void 0!==Le&&(l.fromBufferAttribute(Le,be).convertLinearToSRGB(),t+=" "+l.r+" "+l.g+" "+l.b),t+="\n";t+="p ";for(let be=1,Ye=re.count;be<=Ye;be++)t+=n+be+" ";t+="\n"}n+=se}(Q)}),t}}const SU={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class PP{constructor(){this.pluginCallbacks=[],this.register(function(e){return new Xre(e)}),this.register(function(e){return new Kre(e)}),this.register(function(e){return new Jre(e)}),this.register(function(e){return new ese(e)}),this.register(function(e){return new tse(e)}),this.register(function(e){return new nse(e)}),this.register(function(e){return new Yre(e)}),this.register(function(e){return new Zre(e)}),this.register(function(e){return new ise(e)}),this.register(function(e){return new rse(e)})}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){const s=new $re,a=[];for(let l=0,u=this.pluginCallbacks.length;l<u;l++)a.push(this.pluginCallbacks[l](s));s.setPlugins(a),s.write(e,t,r).catch(n)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,r,s,t)})}}const FP="KHR_mesh_quantization",$p={};$p[ou]=9728,$p[HM]=9984,$p[Zx]=9986,$p[Zc]=9729,$p[RE]=9985,$p[Jg]=9987,$p[_d]=33071,$p[ry]=10497,$p[Yx]=33648;const TU={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},zre=new Ir;function mC(i,e){return i.length===e.length&&i.every(function(t,n){return t===e[n]})}function BU(i){return 4*Math.ceil(i/4)}function RP(i,e=0){const t=BU(i.byteLength);if(t!==i.byteLength){const n=new Uint8Array(t);if(n.set(new Uint8Array(i)),0!==e)for(let r=i.byteLength;r<t;r++)n[r]=e;return n.buffer}return i}function IU(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function PU(i,e){if(void 0!==i.toBlob)return new Promise(n=>i.toBlob(n,e));let t;return"image/jpeg"===e?t=.92:"image/webp"===e&&(t=.8),i.convertToBlob({type:e,quality:t})}class $re{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}write(e,t,n={}){var r=this;return(0,Hp.Z)(function*(){r.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),r.options.animations.length>0&&(r.options.trs=!0),r.processInput(e),yield Promise.all(r.pending);const l=r.json;n=r.options;const u=r.extensionsUsed,d=r.extensionsRequired,A=new Blob(r.buffers,{type:"application/octet-stream"}),y=Object.keys(u),C=Object.keys(d);if(y.length>0&&(l.extensionsUsed=y),C.length>0&&(l.extensionsRequired=C),l.buffers&&l.buffers.length>0&&(l.buffers[0].byteLength=A.size),!0===n.binary){const k=new FileReader;k.readAsArrayBuffer(A),k.onloadend=function(){const Q=RP(k.result),se=new DataView(new ArrayBuffer(8));se.setUint32(0,Q.byteLength,!0),se.setUint32(4,5130562,!0);const he=RP(function Qre(i){return(new TextEncoder).encode(i).buffer}(JSON.stringify(l)),32),re=new DataView(new ArrayBuffer(8));re.setUint32(0,he.byteLength,!0),re.setUint32(4,1313821514,!0);const Le=new ArrayBuffer(12),be=new DataView(Le);be.setUint32(0,1179937895,!0),be.setUint32(4,2,!0),be.setUint32(8,12+re.byteLength+he.byteLength+se.byteLength+Q.byteLength,!0);const dt=new Blob([Le,re,he,se,Q],{type:"application/octet-stream"}),xt=new FileReader;xt.readAsArrayBuffer(dt),xt.onloadend=function(){t(xt.result)}}}else if(l.buffers&&l.buffers.length>0){const k=new FileReader;k.readAsDataURL(A),k.onloadend=function(){l.buffers[0].uri=k.result,t(l)}}else t(l)})()}serializeUserData(e,t){if(0===Object.keys(e.userData).length)return;const n=this.options,r=this.extensionsUsed;try{const s=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&s.gltfExtensions){void 0===t.extensions&&(t.extensions={});for(const a in s.gltfExtensions)t.extensions[a]=s.gltfExtensions[a],r[a]=!0;delete s.gltfExtensions}Object.keys(s).length>0&&(t.extras=s)}catch(s){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+s.message)}}getUID(e,t=!1){if(!1===this.uids.has(e)){const r=new Map;r.set(!0,this.uid++),r.set(!1,this.uid++),this.uids.set(e,r)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const n=new kt;for(let r=0,s=e.count;r<s;r++)if(Math.abs(n.fromBufferAttribute(e,r).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const n=e.clone(),r=new kt;for(let s=0,a=n.count;s<a;s++)r.fromBufferAttribute(n,s),0===r.x&&0===r.y&&0===r.z?r.setX(1):r.normalize(),n.setXYZ(s,r.x,r.y,r.z);return t.attributesNormalized.set(e,n),n}applyTextureTransform(e,t){let n=!1;const r={};(0!==t.offset.x||0!==t.offset.y)&&(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),(1!==t.repeat.x||1!==t.repeat.y)&&(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function n(k){return k.colorSpace===Jo?function(se){return se<.04045?.0773993808*se:Math.pow(.9478672986*se+.0521327014,2.4)}:function(se){return se}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const r=e?e.image:null,s=t?t.image:null,a=Math.max(r?r.width:0,s?s.width:0),l=Math.max(r?r.height:0,s?s.height:0),u=IU();u.width=a,u.height=l;const d=u.getContext("2d");d.fillStyle="#00ffff",d.fillRect(0,0,a,l);const A=d.getImageData(0,0,a,l);if(r){d.drawImage(r,0,0,a,l);const k=n(e),Q=d.getImageData(0,0,a,l).data;for(let se=2;se<Q.length;se+=4)A.data[se]=256*k(Q[se]/256)}if(s){d.drawImage(s,0,0,a,l);const k=n(t),Q=d.getImageData(0,0,a,l).data;for(let se=1;se<Q.length;se+=4)A.data[se]=256*k(Q[se]/256)}d.putImageData(A,0,0);const C=(e||t).clone();return C.source=new Xv(u),C.colorSpace=oy,C.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),C}processBuffer(e){const t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,t,n,r,s){const a=this.json;let l;switch(a.bufferViews||(a.bufferViews=[]),t){case 5120:case 5121:l=1;break;case 5122:case 5123:l=2;break;default:l=4}const u=BU(r*e.itemSize*l),d=new DataView(new ArrayBuffer(u));let A=0;for(let k=n;k<n+r;k++)for(let Q=0;Q<e.itemSize;Q++){let se;e.itemSize>4?se=e.array[k*e.itemSize+Q]:(0===Q?se=e.getX(k):1===Q?se=e.getY(k):2===Q?se=e.getZ(k):3===Q&&(se=e.getW(k)),!0===e.normalized&&(se=LE.normalize(se,e.array))),5126===t?d.setFloat32(A,se,!0):5124===t?d.setInt32(A,se,!0):5125===t?d.setUint32(A,se,!0):5122===t?d.setInt16(A,se,!0):5123===t?d.setUint16(A,se,!0):5120===t?d.setInt8(A,se):5121===t&&d.setUint8(A,se),A+=l}const y={buffer:this.processBuffer(d.buffer),byteOffset:this.byteOffset,byteLength:u};return void 0!==s&&(y.target=s),34962===s&&(y.byteStride=e.itemSize*l),this.byteOffset+=u,a.bufferViews.push(y),{id:a.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise(function(r){const s=new FileReader;s.readAsArrayBuffer(e),s.onloadend=function(){const a=RP(s.result),l={buffer:t.processBuffer(a),byteOffset:t.byteOffset,byteLength:a.byteLength};t.byteOffset+=a.byteLength,r(n.bufferViews.push(l)-1)}})}processAccessor(e,t,n,r){const s=this.json;let l;if(e.array.constructor===Float32Array)l=5126;else if(e.array.constructor===Int32Array)l=5124;else if(e.array.constructor===Uint32Array)l=5125;else if(e.array.constructor===Int16Array)l=5122;else if(e.array.constructor===Uint16Array)l=5123;else if(e.array.constructor===Int8Array)l=5120;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");l=5121}if(void 0===n&&(n=0),void 0===r&&(r=e.count),0===r)return null;const u=function jre(i,e,t){const n={min:new Array(i.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(i.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=e;r<e+t;r++)for(let s=0;s<i.itemSize;s++){let a;i.itemSize>4?a=i.array[r*i.itemSize+s]:(0===s?a=i.getX(r):1===s?a=i.getY(r):2===s?a=i.getZ(r):3===s&&(a=i.getW(r)),!0===i.normalized&&(a=LE.normalize(a,i.array))),n.min[s]=Math.min(n.min[s],a),n.max[s]=Math.max(n.max[s],a)}return n}(e,n,r);let d;void 0!==t&&(d=e===t.index?34963:34962);const A=this.processBufferView(e,l,n,r,d),y={bufferView:A.id,byteOffset:A.byteOffset,componentType:l,count:r,max:u.max,min:u.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(y.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(y)-1}processImage(e,t,n,r="image/png"){if(null!==e){const s=this,a=s.cache,l=s.json,u=s.options,d=s.pending;a.images.has(e)||a.images.set(e,{});const A=a.images.get(e),y=r+":flipY/"+n.toString();if(void 0!==A[y])return A[y];l.images||(l.images=[]);const C={mimeType:r},k=IU();k.width=Math.min(e.width,u.maxTextureSize),k.height=Math.min(e.height,u.maxTextureSize);const Q=k.getContext("2d");if(!0===n&&(Q.translate(0,k.height),Q.scale(1,-1)),void 0!==e.data){t!==Vp&&console.error("GLTFExporter: Only RGBAFormat is supported."),(e.width>u.maxTextureSize||e.height>u.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const he=new Uint8ClampedArray(e.height*e.width*4);for(let re=0;re<he.length;re+=4)he[re+0]=e.data[re+0],he[re+1]=e.data[re+1],he[re+2]=e.data[re+2],he[re+3]=e.data[re+3];Q.putImageData(new ImageData(he,e.width,e.height),0,0)}else Q.drawImage(e,0,0,k.width,k.height);!0===u.binary?d.push(PU(k,r).then(he=>s.processBufferViewImage(he)).then(he=>{C.bufferView=he})):void 0!==k.toDataURL?C.uri=k.toDataURL(r):d.push(PU(k,r).then(he=>(new FileReader).readAsDataURL(he)).then(he=>{C.uri=he}));const se=l.images.push(C)-1;return A[y]=se,se}throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;return t.samplers||(t.samplers=[]),t.samplers.push({magFilter:$p[e.magFilter],minFilter:$p[e.minFilter],wrapS:$p[e.wrapS],wrapT:$p[e.wrapT]})-1}processTexture(e){const t=this.cache,n=this.json;if(t.textures.has(e))return t.textures.get(e);n.textures||(n.textures=[]);let r=e.userData.mimeType;"image/webp"===r&&(r="image/png");const s={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,r)};e.name&&(s.name=e.name),this._invokeAll(function(l){l.writeTexture&&l.writeTexture(e,s)});const a=n.textures.push(s)-1;return t.textures.set(e,a),a}processMaterial(e){const t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const r={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(mC(s,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=e.metalness,r.pbrMetallicRoughness.roughnessFactor=e.roughness):(r.pbrMetallicRoughness.metallicFactor=.5,r.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const l=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),u={index:this.processTexture(l),channel:l.channel};this.applyTextureTransform(u,l),r.pbrMetallicRoughness.metallicRoughnessTexture=u}if(e.map){const l={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(l,e.map),r.pbrMetallicRoughness.baseColorTexture=l}if(e.emissive){const l=e.emissive;if(Math.max(l.r,l.g,l.b)>0&&(r.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const d={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(d,e.emissiveMap),r.emissiveTexture=d}}if(e.normalMap){const l={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&1!==e.normalScale.x&&(l.scale=e.normalScale.x),this.applyTextureTransform(l,e.normalMap),r.normalTexture=l}if(e.aoMap){const l={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};1!==e.aoMapIntensity&&(l.strength=e.aoMapIntensity),this.applyTextureTransform(l,e.aoMap),r.occlusionTexture=l}e.transparent?r.alphaMode="BLEND":e.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=e.alphaTest),e.side===zd&&(r.doubleSided=!0),""!==e.name&&(r.name=e.name),this.serializeUserData(e,r),this._invokeAll(function(l){l.writeMaterial&&l.writeMaterial(e,r)});const a=n.materials.push(r)-1;return t.materials.set(e,a),a}processMesh(e){const t=this.cache,n=this.json,r=[e.geometry.uuid];if(Array.isArray(e.material))for(let be=0,Ye=e.material.length;be<Ye;be++)r.push(e.material[be].uuid);else r.push(e.material.uuid);const s=r.join(":");if(t.meshes.has(s))return t.meshes.get(s);const a=e.geometry;let l;l=e.isLineSegments?1:e.isLineLoop?2:e.isLine?3:e.isPoints?0:e.material.wireframe?1:4;const u={},d={},A=[],y=[],C={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},k=a.getAttribute("normal");void 0!==k&&!this.isNormalizedNormalAttribute(k)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),a.setAttribute("normal",this.createNormalizedNormalAttribute(k)));let Q=null;for(let be in a.attributes){if("morph"===be.slice(0,5))continue;const Ye=a.attributes[be];if(be=C[be]||be.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(be)||(be="_"+be),t.attributes.has(this.getUID(Ye))){d[be]=t.attributes.get(this.getUID(Ye));continue}Q=null;const xt=Ye.array;"JOINTS_0"===be&&!(xt instanceof Uint16Array)&&!(xt instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),Q=new va(new Uint16Array(xt),Ye.itemSize,Ye.normalized));const $t=this.processAccessor(Q||Ye,a);null!==$t&&(be.startsWith("_")||this.detectMeshQuantization(be,Ye),d[be]=$t,t.attributes.set(this.getUID(Ye),$t))}if(void 0!==k&&a.setAttribute("normal",k),0===Object.keys(d).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){const be=[],Ye=[],dt={};if(void 0!==e.morphTargetDictionary)for(const xt in e.morphTargetDictionary)dt[e.morphTargetDictionary[xt]]=xt;for(let xt=0;xt<e.morphTargetInfluences.length;++xt){const $t={};let nn=!1;for(const gt in a.morphAttributes){if("position"!==gt&&"normal"!==gt){nn||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),nn=!0);continue}const Wt=a.morphAttributes[gt][xt],Nn=gt.toUpperCase(),yi=a.attributes[gt];if(t.attributes.has(this.getUID(Wt,!0))){$t[Nn]=t.attributes.get(this.getUID(Wt,!0));continue}const Rn=Wt.clone();if(!a.morphTargetsRelative)for(let kn=0,li=Wt.count;kn<li;kn++)for(let Wn=0;Wn<Wt.itemSize;Wn++)0===Wn&&Rn.setX(kn,Wt.getX(kn)-yi.getX(kn)),1===Wn&&Rn.setY(kn,Wt.getY(kn)-yi.getY(kn)),2===Wn&&Rn.setZ(kn,Wt.getZ(kn)-yi.getZ(kn)),3===Wn&&Rn.setW(kn,Wt.getW(kn)-yi.getW(kn));$t[Nn]=this.processAccessor(Rn,a),t.attributes.set(this.getUID(yi,!0),$t[Nn])}y.push($t),be.push(e.morphTargetInfluences[xt]),void 0!==e.morphTargetDictionary&&Ye.push(dt[xt])}u.weights=be,Ye.length>0&&(u.extras={},u.extras.targetNames=Ye)}const se=Array.isArray(e.material);if(se&&0===a.groups.length)return null;const he=se?e.material:[e.material],re=se?a.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let be=0,Ye=re.length;be<Ye;be++){const dt={mode:l,attributes:d};if(this.serializeUserData(a,dt),y.length>0&&(dt.targets=y),null!==a.index){let $t=this.getUID(a.index);(void 0!==re[be].start||void 0!==re[be].count)&&($t+=":"+re[be].start+":"+re[be].count),t.attributes.has($t)?dt.indices=t.attributes.get($t):(dt.indices=this.processAccessor(a.index,a,re[be].start,re[be].count),t.attributes.set($t,dt.indices)),null===dt.indices&&delete dt.indices}const xt=this.processMaterial(he[re[be].materialIndex]);null!==xt&&(dt.material=xt),A.push(dt)}u.primitives=A,n.meshes||(n.meshes=[]),this._invokeAll(function(be){be.writeMesh&&be.writeMesh(e,u)});const Le=n.meshes.push(u)-1;return t.meshes.set(s,Le),Le}detectMeshQuantization(e,t){if(this.extensionsUsed[FP])return;let n;switch(t.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}t.normalized&&(n+=" normalized");const r=e.split("_",1)[0];SU[r]&&SU[r].includes(n)&&(this.extensionsUsed[FP]=!0,this.extensionsRequired[FP]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const n=e.isOrthographicCamera,r={type:n?"orthographic":"perspective"};return n?r.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:r.perspective={aspectRatio:e.aspect,yfov:LE.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(r.name=e.type),t.cameras.push(r)-1}processAnimation(e,t){const n=this.json,r=this.nodeMap;n.animations||(n.animations=[]);const s=(e=PP.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,a=[],l=[];for(let u=0;u<s.length;++u){const d=s[u],A=Hl.parseTrackName(d.name);let y=Hl.findNode(t,A.nodeName);const C=TU[A.propertyName];if("bones"===A.objectName&&(y=!0===y.isSkinnedMesh?y.skeleton.getBoneByName(A.objectIndex):void 0),!y||!C)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',d.name),null;const k=1;let se,Q=d.values.length/d.times.length;C===TU.morphTargetInfluences&&(Q/=y.morphTargetInfluences.length),!0===d.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(se="CUBICSPLINE",Q/=3):se=d.getInterpolation()===tw?"STEP":"LINEAR",l.push({input:this.processAccessor(new va(d.times,k)),output:this.processAccessor(new va(d.values,Q)),interpolation:se}),a.push({sampler:l.length-1,target:{node:r.get(y),path:C}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:l,channels:a}),n.animations.length-1}processSkin(e){const t=this.json,n=this.nodeMap,r=t.nodes[n.get(e)],s=e.skeleton;if(void 0===s)return null;const a=e.skeleton.bones[0];if(void 0===a)return null;const l=[],u=new Float32Array(16*s.bones.length),d=new ea;for(let y=0;y<s.bones.length;++y)l.push(n.get(s.bones[y])),d.copy(s.boneInverses[y]),d.multiply(e.bindMatrix).toArray(u,16*y);return void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new va(u,16)),joints:l,skeleton:n.get(a)}),r.skin=t.skins.length-1}processNode(e){const t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);const s={};if(n.trs){const l=e.quaternion.toArray(),u=e.position.toArray(),d=e.scale.toArray();mC(l,[0,0,0,1])||(s.rotation=l),mC(u,[0,0,0])||(s.translation=u),mC(d,[1,1,1])||(s.scale=d)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===function Wre(i){return mC(i.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}(e.matrix)&&(s.matrix=e.matrix.elements);if(""!==e.name&&(s.name=String(e.name)),this.serializeUserData(e,s),e.isMesh||e.isLine||e.isPoints){const l=this.processMesh(e);null!==l&&(s.mesh=l)}else e.isCamera&&(s.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const l=[];for(let u=0,d=e.children.length;u<d;u++){const A=e.children[u];if(A.visible||!1===n.onlyVisible){const y=this.processNode(A);null!==y&&l.push(y)}}l.length>0&&(s.children=l)}this._invokeAll(function(l){l.writeNode&&l.writeNode(e,s)});const a=t.nodes.push(s)-1;return r.set(e,a),a}processScene(e){const t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);const r={};""!==e.name&&(r.name=e.name),t.scenes.push(r);const s=[];for(let a=0,l=e.children.length;a<l;a++){const u=e.children[a];if(u.visible||!1===n.onlyVisible){const d=this.processNode(u);null!==d&&s.push(d)}}s.length>0&&(r.nodes=s),this.serializeUserData(e,r)}processObjects(e){const t=new u3;t.name="AuxScene";for(let n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll(function(r){r.beforeParse&&r.beforeParse(e)});const n=[];for(let r=0;r<e.length;r++)e[r]instanceof u3?this.processScene(e[r]):n.push(e[r]);n.length>0&&this.processObjects(n);for(let r=0;r<this.skins.length;++r)this.processSkin(this.skins[r]);for(let r=0;r<t.animations.length;++r)this.processAnimation(t.animations[r],e[0]);this._invokeAll(function(r){r.afterParse&&r.afterParse(e)})}_invokeAll(e){for(let t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}class Xre{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);const n=this.writer,r=n.json,s=n.extensionsUsed,a={};e.name&&(a.name=e.name),a.color=e.color.toArray(),a.intensity=e.intensity,e.isDirectionalLight?a.type="directional":e.isPointLight?(a.type="point",e.distance>0&&(a.range=e.distance)):e.isSpotLight&&(a.type="spot",e.distance>0&&(a.range=e.distance),a.spot={},a.spot.innerConeAngle=(e.penumbra-1)*e.angle*-1,a.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),e.target&&(e.target.parent!==e||0!==e.target.position.x||0!==e.target.position.y||-1!==e.target.position.z)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),s[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},s[this.name]=!0);const l=r.extensions[this.name].lights;l.push(a),t.extensions=t.extensions||{},t.extensions[this.name]={light:l.length-1}}}class Kre{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const r=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},r[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class Yre{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.clearcoat)return;const n=this.writer,r=n.extensionsUsed,s={};if(s.clearcoatFactor=e.clearcoat,e.clearcoatMap){const a={index:n.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};n.applyTextureTransform(a,e.clearcoatMap),s.clearcoatTexture=a}if(s.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const a={index:n.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};n.applyTextureTransform(a,e.clearcoatRoughnessMap),s.clearcoatRoughnessTexture=a}if(e.clearcoatNormalMap){const a={index:n.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};n.applyTextureTransform(a,e.clearcoatNormalMap),s.clearcoatNormalTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=s,r[this.name]=!0}}class Zre{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.iridescence)return;const n=this.writer,r=n.extensionsUsed,s={};if(s.iridescenceFactor=e.iridescence,e.iridescenceMap){const a={index:n.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};n.applyTextureTransform(a,e.iridescenceMap),s.iridescenceTexture=a}if(s.iridescenceIor=e.iridescenceIOR,s.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],s.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const a={index:n.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};n.applyTextureTransform(a,e.iridescenceThicknessMap),s.iridescenceThicknessTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=s,r[this.name]=!0}}class Jre{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const n=this.writer,r=n.extensionsUsed,s={};if(s.transmissionFactor=e.transmission,e.transmissionMap){const a={index:n.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};n.applyTextureTransform(a,e.transmissionMap),s.transmissionTexture=a}t.extensions=t.extensions||{},t.extensions[this.name]=s,r[this.name]=!0}}class ese{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const n=this.writer,r=n.extensionsUsed,s={};if(s.thicknessFactor=e.thickness,e.thicknessMap){const a={index:n.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};n.applyTextureTransform(a,e.thicknessMap),s.thicknessTexture=a}s.attenuationDistance=e.attenuationDistance,s.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,r[this.name]=!0}}class tse{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||1.5===e.ior)return;const r=this.writer.extensionsUsed,s={};s.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=s,r[this.name]=!0}}class nse{constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||1===e.specularIntensity&&e.specularColor.equals(zre)&&!e.specularIntensityMap&&!e.specularColorTexture)return;const n=this.writer,r=n.extensionsUsed,s={};if(e.specularIntensityMap){const a={index:n.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};n.applyTextureTransform(a,e.specularIntensityMap),s.specularTexture=a}if(e.specularColorMap){const a={index:n.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};n.applyTextureTransform(a,e.specularColorMap),s.specularColorTexture=a}s.specularFactor=e.specularIntensity,s.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,r[this.name]=!0}}class ise{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0==e.sheen)return;const n=this.writer,r=n.extensionsUsed,s={};if(e.sheenRoughnessMap){const a={index:n.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};n.applyTextureTransform(a,e.sheenRoughnessMap),s.sheenRoughnessTexture=a}if(e.sheenColorMap){const a={index:n.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};n.applyTextureTransform(a,e.sheenColorMap),s.sheenColorTexture=a}s.sheenRoughnessFactor=e.sheenRoughness,s.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=s,r[this.name]=!0}}class rse{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||1===e.emissiveIntensity)return;const r=this.writer.extensionsUsed,s={};s.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=s,r[this.name]=!0}}PP.Utils={insertKeyframe:function(i,e){const n=i.getValueSize(),r=new i.TimeBufferType(i.times.length+1),s=new i.ValueBufferType(i.values.length+n),a=i.createInterpolant(new i.ValueBufferType(n));let l;if(0===i.times.length){r[0]=e;for(let u=0;u<n;u++)s[u]=0;l=0}else if(e<i.times[0]){if(Math.abs(i.times[0]-e)<.001)return 0;r[0]=e,r.set(i.times,1),s.set(a.evaluate(e),0),s.set(i.values,n),l=0}else if(e>i.times[i.times.length-1]){if(Math.abs(i.times[i.times.length-1]-e)<.001)return i.times.length-1;r[r.length-1]=e,r.set(i.times,0),s.set(i.values,0),s.set(a.evaluate(e),i.values.length),l=r.length-1}else for(let u=0;u<i.times.length;u++){if(Math.abs(i.times[u]-e)<.001)return u;if(i.times[u]<e&&i.times[u+1]>e){r.set(i.times.slice(0,u+1),0),r[u+1]=e,r.set(i.times.slice(u+1),u+2),s.set(i.values.slice(0,(u+1)*n),0),s.set(a.evaluate(e),(u+1)*n),s.set(i.values.slice((u+1)*n),(u+2)*n),l=u+1;break}}return i.times=r,i.values=s,l},mergeMorphTargetTracks:function(i,e){const t=[],n={},r=i.tracks;for(let s=0;s<r.length;++s){let a=r[s];const l=Hl.parseTrackName(a.name),u=Hl.findNode(e,l.nodeName);if("morphTargetInfluences"!==l.propertyName||void 0===l.propertyIndex){t.push(a);continue}if(a.createInterpolant!==a.InterpolantFactoryMethodDiscrete&&a.createInterpolant!==a.InterpolantFactoryMethodLinear){if(a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),a=a.clone(),a.setInterpolation(qv)}const d=u.morphTargetInfluences.length,A=u.morphTargetDictionary[l.propertyIndex];if(void 0===A)throw new Error("THREE.GLTFExporter: Morph target name not found: "+l.propertyIndex);let y;if(void 0===n[u.uuid]){y=a.clone();const k=new y.ValueBufferType(d*y.times.length);for(let Q=0;Q<y.times.length;Q++)k[Q*d+A]=y.values[Q];y.name=(l.nodeName||"")+".morphTargetInfluences",y.values=k,n[u.uuid]=y,t.push(y);continue}const C=a.createInterpolant(new a.ValueBufferType(1));y=n[u.uuid];for(let k=0;k<y.times.length;k++)y.values[k*d+A]=C.evaluate(y.times[k]);for(let k=0;k<a.times.length;k++){const Q=this.insertKeyframe(y,a.times[k]);y.values[Q*d+A]=a.values[k]}}return i.tracks=t,i}};const V3=(i,e,t="application/json")=>{const n=new Blob([i],{type:t}),r=document.createElement("a");r.style.display="none",r.href=URL.createObjectURL(n),r.download=e,r.click(),r.remove()},FU=(i,e="application/json")=>{let t=document.createElement("input");t.type="file",t.accept=e,t.onchange=n=>{var r;const s=null===(r=n.target)||void 0===r?void 0:r.files[0],a=new FileReader;a.onload=l=>{i?.(l.target.result.toString()),t.remove(),t=null},a.readAsText(s)},t.click()};class sse{exportSceneToOBJ(e){const n=(new Ure).parse(e);V3(n,"phoenix-obj.obj","text/plain")}exportPhoenixScene(e,t,n){const r=new PP,s=this.saveSceneConfig(t,n);r.parse(e,a=>{const u=JSON.stringify({sceneConfiguration:s,scene:a},null,2);V3(u,"phoenix-scene.phnx","text/plain")},null)}saveSceneConfig(e,t){return{eventData:this.saveEventDataConfiguration(e),geometries:this.saveGeometriesConfiguration(t)}}saveEventDataConfiguration(e){const t={};for(const n of e.children)if(n.name){t[n.name]=[];for(const r of n.children)r.name&&t[n.name].push(r.name)}return t}saveGeometriesConfiguration(e){const t=[];return e.children.forEach(n=>{"EventData"!==n.name&&t.push(n.name)}),t}}const ose=/^[og]\s*(.+)?/,ase=/^mtllib /,lse=/^usemtl /,cse=/^usemap /,RU=/\s+/,kU=new kt,kP=new kt,OU=new kt,LU=new kt,zA=new kt,G3=new Ir;function use(){const i={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(r,s){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const l={index:this.materials.length,name:r||"",mtllib:Array.isArray(s)&&s.length>0?s[s.length-1]:"",smooth:void 0!==a?a.smooth:this.smooth,groupStart:void 0!==a?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(u){const d={index:"number"==typeof u?u:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return d.clone=this.clone.bind(d),d}};return this.materials.push(l),l},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(r){const s=this.currentMaterial();if(s&&-1===s.groupEnd&&(s.groupEnd=this.geometry.vertices.length/3,s.groupCount=s.groupEnd-s.groupStart,s.inherited=!1),r&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return r&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),s}},n&&n.name&&"function"==typeof n.clone){const r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,s=this.object.geometry.normals;kU.fromArray(r,e),kP.fromArray(r,t),OU.fromArray(r,n),zA.subVectors(OU,kP),LU.subVectors(kU,kP),zA.cross(LU),zA.normalize(),s.push(zA.x,zA.y,zA.z),s.push(zA.x,zA.y,zA.z),s.push(zA.x,zA.y,zA.z)},addColor:function(e,t,n){const r=this.colors,s=this.object.geometry.colors;void 0!==r[e]&&s.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&s.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&s.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,s,a,l,u,d){const A=this.vertices.length;let y=this.parseVertexIndex(e,A),C=this.parseVertexIndex(t,A),k=this.parseVertexIndex(n,A);if(this.addVertex(y,C,k),this.addColor(y,C,k),void 0!==l&&""!==l){const Q=this.normals.length;y=this.parseNormalIndex(l,Q),C=this.parseNormalIndex(u,Q),k=this.parseNormalIndex(d,Q),this.addNormal(y,C,k)}else this.addFaceNormal(y,C,k);if(void 0!==r&&""!==r){const Q=this.uvs.length;y=this.parseUVIndex(r,Q),C=this.parseUVIndex(s,Q),k=this.parseUVIndex(a,Q),this.addUV(y,C,k),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const s=this.parseVertexIndex(e[n],t);this.addVertexPoint(s),this.addColor(s)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let s=0,a=e.length;s<a;s++)this.addVertexLine(this.parseVertexIndex(e[s],n));for(let s=0,a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return i.startObject("",!1),i}class NU extends a0{constructor(e){super(e),this.materials=null}load(e,t,n,r){const s=this,a=new jp(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(s.parse(l))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},n,r)}setMaterials(e){return this.materials=e,this}parse(e){const t=new use;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let r=[];for(let l=0,u=n.length;l<u;l++){const d=n[l].trimStart();if(0===d.length)continue;const A=d.charAt(0);if("#"!==A)if("v"===A){const y=d.split(RU);switch(y[0]){case"v":t.vertices.push(parseFloat(y[1]),parseFloat(y[2]),parseFloat(y[3])),y.length>=7?(G3.setRGB(parseFloat(y[4]),parseFloat(y[5]),parseFloat(y[6])).convertSRGBToLinear(),t.colors.push(G3.r,G3.g,G3.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(y[1]),parseFloat(y[2]),parseFloat(y[3]));break;case"vt":t.uvs.push(parseFloat(y[1]),parseFloat(y[2]))}}else if("f"===A){const C=d.slice(1).trim().split(RU),k=[];for(let se=0,he=C.length;se<he;se++){const re=C[se];if(re.length>0){const Le=re.split("/");k.push(Le)}}const Q=k[0];for(let se=1,he=k.length-1;se<he;se++){const re=k[se],Le=k[se+1];t.addFace(Q[0],re[0],Le[0],Q[1],re[1],Le[1],Q[2],re[2],Le[2])}}else if("l"===A){const y=d.substring(1).trim().split(" ");let C=[];const k=[];if(-1===d.indexOf("/"))C=y;else for(let Q=0,se=y.length;Q<se;Q++){const he=y[Q].split("/");""!==he[0]&&C.push(he[0]),""!==he[1]&&k.push(he[1])}t.addLineGeometry(C,k)}else if("p"===A){const C=d.slice(1).trim().split(" ");t.addPointGeometry(C)}else if(null!==(r=ose.exec(d))){const y=(" "+r[0].slice(1).trim()).slice(1);t.startObject(y)}else if(lse.test(d))t.object.startMaterial(d.substring(7).trim(),t.materialLibraries);else if(ase.test(d))t.materialLibraries.push(d.substring(7).trim());else if(cse.test(d))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===A){if(r=d.split(" "),r.length>1){const C=r[1].trim().toLowerCase();t.object.smooth="0"!==C&&"off"!==C}else t.object.smooth=!0;const y=t.object.currentMaterial();y&&(y.smooth=t.object.smooth)}else{if("\0"===d)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+d+'"')}}t.finalize();const s=new Wu;if(s.materialLibraries=[].concat(t.materialLibraries),1==!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let l=0,u=t.objects.length;l<u;l++){const d=t.objects[l],A=d.geometry,y=d.materials,C="Line"===A.type,k="Points"===A.type;let Q=!1;if(0===A.vertices.length)continue;const se=new bo;se.setAttribute("position",new Fs(A.vertices,3)),A.normals.length>0&&se.setAttribute("normal",new Fs(A.normals,3)),A.colors.length>0&&(Q=!0,se.setAttribute("color",new Fs(A.colors,3))),!0===A.hasUVIndices&&se.setAttribute("uv",new Fs(A.uvs,2));const he=[];for(let Le=0,be=y.length;Le<be;Le++){const Ye=y[Le],dt=Ye.name+"_"+Ye.smooth+"_"+Q;let xt=t.materials[dt];if(null!==this.materials)if(xt=this.materials.create(Ye.name),!C||!xt||xt instanceof eu){if(k&&xt&&!(xt instanceof U_)){const $t=new U_({size:10,sizeAttenuation:!1});Jc.prototype.copy.call($t,xt),$t.color.copy(xt.color),$t.map=xt.map,xt=$t}}else{const $t=new eu;Jc.prototype.copy.call($t,xt),$t.color.copy(xt.color),xt=$t}void 0===xt&&(xt=C?new eu:k?new U_({size:1,sizeAttenuation:!1}):new Um,xt.name=Ye.name,xt.flatShading=!Ye.smooth,xt.vertexColors=Q,t.materials[dt]=xt),he.push(xt)}let re;if(he.length>1){for(let Le=0,be=y.length;Le<be;Le++){const Ye=y[Le];se.addGroup(Ye.groupStart,Ye.groupCount,Le)}re=C?new NA(se,he):k?new nb(se,he):new Ua(se,he)}else re=C?new NA(se,he[0]):k?new nb(se,he[0]):new Ua(se,he[0]);re.name=d.name,s.add(re)}else if(t.vertices.length>0){const l=new U_({size:1,sizeAttenuation:!1}),u=new bo;u.setAttribute("position",new Fs(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(u.setAttribute("color",new Fs(t.colors,3)),l.vertexColors=!0);const d=new nb(u,l);s.add(d)}return s}}function OP(i){let e,t,n,r=0;for(let l=0;l<i.length;++l){const u=i[l];if(u.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===e&&(e=u.array.constructor),e!==u.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===t&&(t=u.itemSize),t!==u.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===n&&(n=u.normalized),n!==u.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;r+=u.array.length}const s=new e(r);let a=0;for(let l=0;l<i.length;++l)s.set(i[l].array,a),a+=i[l].array.length;return new va(s,t,n)}function UU(i,e){if(e===bZ)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===l5||e===oN){let t=i.getIndex();if(null===t){const a=[],l=i.getAttribute("position");if(void 0===l)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i;for(let u=0;u<l.count;u++)a.push(u);i.setIndex(a),t=i.getIndex()}const n=t.count-2,r=[];if(e===l5)for(let a=1;a<=n;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<n;a++)a%2==0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}function NP(i,e=!1){return console.warn("THREE.BufferGeometryUtils: mergeBufferGeometries() has been renamed to mergeGeometries()."),function hse(i,e=!1){const t=null!==i[0].index,n=new Set(Object.keys(i[0].attributes)),r=new Set(Object.keys(i[0].morphAttributes)),s={},a={},l=i[0].morphTargetsRelative,u=new bo;let d=0;for(let A=0;A<i.length;++A){const y=i[A];let C=0;if(t!==(null!==y.index))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const k in y.attributes){if(!n.has(k))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+'. All geometries must have compatible attributes; make sure "'+k+'" attribute exists among all geometries, or in none of them.'),null;void 0===s[k]&&(s[k]=[]),s[k].push(y.attributes[k]),C++}if(C!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+". Make sure all geometries have the same number of attributes."),null;if(l!==y.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const k in y.morphAttributes){if(!r.has(k))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===a[k]&&(a[k]=[]),a[k].push(y.morphAttributes[k])}if(e){let k;if(t)k=y.index.count;else{if(void 0===y.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+A+". The geometry must have either an index or a position attribute"),null;k=y.attributes.position.count}u.addGroup(d,k,A),d+=k}}if(t){let A=0;const y=[];for(let C=0;C<i.length;++C){const k=i[C].index;for(let Q=0;Q<k.count;++Q)y.push(k.getX(Q)+A);A+=i[C].attributes.position.count}u.setIndex(y)}for(const A in s){const y=OP(s[A]);if(!y)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+A+" attribute."),null;u.setAttribute(A,y)}for(const A in a){const y=a[A][0].length;if(0===y)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[A]=[];for(let C=0;C<y;++C){const k=[];for(let se=0;se<a[A].length;++se)k.push(a[A][se][C]);const Q=OP(k);if(!Q)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+A+" morphAttribute."),null;u.morphAttributes[A].push(Q)}}return u}(i,e)}class q3 extends a0{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new mse(t)}),this.register(function(t){return new wse(t)}),this.register(function(t){return new Mse(t)}),this.register(function(t){return new Cse(t)}),this.register(function(t){return new _se(t)}),this.register(function(t){return new yse(t)}),this.register(function(t){return new vse(t)}),this.register(function(t){return new bse(t)}),this.register(function(t){return new Ase(t)}),this.register(function(t){return new xse(t)}),this.register(function(t){return new gse(t)}),this.register(function(t){return new fse(t)}),this.register(function(t){return new Sse(t)}),this.register(function(t){return new Tse(t)})}load(e,t,n,r){const s=this;let a;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:AC.extractUrlBase(e),this.manager.itemStart(e);const l=function(d){r?r(d):console.error(d),s.manager.itemError(e),s.manager.itemEnd(e)},u=new jp(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader),u.setWithCredentials(this.withCredentials),u.load(e,function(d){try{s.parse(d,a,function(A){t(A),s.manager.itemEnd(e)},l)}catch(A){l(A)}},n,l)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let s;const a={},l={},u=new TextDecoder;if("string"==typeof e)s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(u.decode(new Uint8Array(e,0,4))===zU){try{a[_l.KHR_BINARY_GLTF]=new Ese(e)}catch(y){return void(r&&r(y))}s=JSON.parse(a[_l.KHR_BINARY_GLTF].content)}else s=JSON.parse(u.decode(e));else s=e;if(void 0===s.asset||s.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const d=new Hse(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let A=0;A<this.pluginCallbacks.length;A++){const y=this.pluginCallbacks[A](d);l[y.name]=y,a[y.name]=!0}if(s.extensionsUsed)for(let A=0;A<s.extensionsUsed.length;++A){const y=s.extensionsUsed[A],C=s.extensionsRequired||[];switch(y){case _l.KHR_MATERIALS_UNLIT:a[y]=new pse;break;case _l.KHR_DRACO_MESH_COMPRESSION:a[y]=new Dse(s,this.dracoLoader);break;case _l.KHR_TEXTURE_TRANSFORM:a[y]=new Bse;break;case _l.KHR_MESH_QUANTIZATION:a[y]=new Ise;break;default:C.indexOf(y)>=0&&void 0===l[y]&&console.warn('THREE.GLTFLoader: Unknown extension "'+y+'".')}}d.setExtensions(a),d.setPlugins(l),d.parse(n,r)}parseAsync(e,t){const n=this;return new Promise(function(r,s){n.parse(e,t,r,s)})}}function dse(){let i={};return{get:function(e){return i[e]},add:function(e,t){i[e]=t},remove:function(e){delete i[e]},removeAll:function(){i={}}}}const _l={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class fse{constructor(e){this.parser=e,this.name=_l.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const s=t[n];s.extensions&&s.extensions[this.name]&&void 0!==s.extensions[this.name].light&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const s=t.json,u=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let d;const A=new Ir(16777215);void 0!==u.color&&A.fromArray(u.color);const y=void 0!==u.range?u.range:0;switch(u.type){case"directional":d=new Uw(A),d.target.position.set(0,0,-1),d.add(d.target);break;case"point":d=new nU(A),d.distance=y;break;case"spot":d=new eU(A),d.distance=y,u.spot=u.spot||{},u.spot.innerConeAngle=void 0!==u.spot.innerConeAngle?u.spot.innerConeAngle:0,u.spot.outerConeAngle=void 0!==u.spot.outerConeAngle?u.spot.outerConeAngle:Math.PI/4,d.angle=u.spot.outerConeAngle,d.penumbra=1-u.spot.innerConeAngle/u.spot.outerConeAngle,d.target.position.set(0,0,-1),d.add(d.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+u.type)}return d.position.set(0,0,0),d.decay=2,Ay(d,u),void 0!==u.intensity&&(d.intensity=u.intensity),d.name=t.createUniqueName(u.name||"light_"+e),r=Promise.resolve(d),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,s=n.json.nodes[e],l=(s.extensions&&s.extensions[this.name]||{}).light;return void 0===l?null:this._loadLight(l).then(function(u){return n._getNodeRef(t.cache,l,u)})}}class pse{constructor(){this.name=_l.KHR_MATERIALS_UNLIT}getMaterialType(){return Ah}extendParams(e,t,n){const r=[];e.color=new Ir(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(e,"map",s.baseColorTexture,Jo))}return Promise.all(r)}}class Ase{constructor(e){this.parser=e,this.name=_l.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return void 0!==s&&(t.emissiveIntensity=s),Promise.resolve()}}class mse{constructor(e){this.parser=e,this.name=_l.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?dy:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&s.push(n.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(s.push(n.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){const l=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new qi(l,l)}return Promise.all(s)}}class gse{constructor(e){this.parser=e,this.name=_l.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?dy:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return void 0!==a.iridescenceFactor&&(t.iridescence=a.iridescenceFactor),void 0!==a.iridescenceTexture&&s.push(n.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),void 0!==a.iridescenceIor&&(t.iridescenceIOR=a.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==a.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),void 0!==a.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),void 0!==a.iridescenceThicknessTexture&&s.push(n.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class _se{constructor(e){this.parser=e,this.name=_l.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?dy:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Ir(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];return void 0!==a.sheenColorFactor&&t.sheenColor.fromArray(a.sheenColorFactor),void 0!==a.sheenRoughnessFactor&&(t.sheenRoughness=a.sheenRoughnessFactor),void 0!==a.sheenColorTexture&&s.push(n.assignTexture(t,"sheenColorMap",a.sheenColorTexture,Jo)),void 0!==a.sheenRoughnessTexture&&s.push(n.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class yse{constructor(e){this.parser=e,this.name=_l.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?dy:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return void 0!==a.transmissionFactor&&(t.transmission=a.transmissionFactor),void 0!==a.transmissionTexture&&s.push(n.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class vse{constructor(e){this.parser=e,this.name=_l.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?dy:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=void 0!==a.thicknessFactor?a.thicknessFactor:0,void 0!==a.thicknessTexture&&s.push(n.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const l=a.attenuationColor||[1,1,1];return t.attenuationColor=new Ir(l[0],l[1],l[2]),Promise.all(s)}}class bse{constructor(e){this.parser=e,this.name=_l.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?dy:null}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=void 0!==s.ior?s.ior:1.5,Promise.resolve()}}class xse{constructor(e){this.parser=e,this.name=_l.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return n.extensions&&n.extensions[this.name]?dy:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=void 0!==a.specularFactor?a.specularFactor:1,void 0!==a.specularTexture&&s.push(n.assignTexture(t,"specularIntensityMap",a.specularTexture));const l=a.specularColorFactor||[1,1,1];return t.specularColor=new Ir(l[0],l[1],l[2]),void 0!==a.specularColorTexture&&s.push(n.assignTexture(t,"specularColorMap",a.specularColorTexture,Jo)),Promise.all(s)}}class wse{constructor(e){this.parser=e,this.name=_l.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class Mse{constructor(e){this.parser=e,this.name=_l.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],l=r.images[a.source];let u=n.textureLoader;if(l.uri){const d=n.options.manager.getHandler(l.uri);null!==d&&(u=d)}return this.detectSupport().then(function(d){if(d)return n.loadTextureImage(e,a.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Cse{constructor(e){this.parser=e,this.name=_l.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],l=r.images[a.source];let u=n.textureLoader;if(l.uri){const d=n.options.manager.getHandler(l.uri);null!==d&&(u=d)}return this.detectSupport().then(function(d){if(d)return n.loadTextureImage(e,a.source,u);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported}}class Sse{constructor(e){this.name=_l.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const r=n.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(l){const A=r.count,y=r.byteStride,C=new Uint8Array(l,r.byteOffset||0,r.byteLength||0);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(A,y,C,r.mode,r.filter).then(function(k){return k.buffer}):a.ready.then(function(){const k=new ArrayBuffer(A*y);return a.decodeGltfBuffer(new Uint8Array(k),A,y,C,r.mode,r.filter),k})})}return null}}class Tse{constructor(e){this.name=_l.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const d of r.primitives)if(d.mode!==HA.TRIANGLES&&d.mode!==HA.TRIANGLE_STRIP&&d.mode!==HA.TRIANGLE_FAN&&void 0!==d.mode)return null;const a=n.extensions[this.name].attributes,l=[],u={};for(const d in a)l.push(this.parser.getDependency("accessor",a[d]).then(A=>(u[d]=A,u[d])));return l.length<1?null:(l.push(this.parser.createNodeMesh(e)),Promise.all(l).then(d=>{const A=d.pop(),y=A.isGroup?A.children:[A],C=d[0].count,k=[];for(const Q of y){const se=new ea,he=new kt,re=new Uc,Le=new kt(1,1,1),be=new C7(Q.geometry,Q.material,C);for(let Ye=0;Ye<C;Ye++)u.TRANSLATION&&he.fromBufferAttribute(u.TRANSLATION,Ye),u.ROTATION&&re.fromBufferAttribute(u.ROTATION,Ye),u.SCALE&&Le.fromBufferAttribute(u.SCALE,Ye),be.setMatrixAt(Ye,se.compose(he,re,Le));for(const Ye in u)"TRANSLATION"!==Ye&&"ROTATION"!==Ye&&"SCALE"!==Ye&&Q.geometry.setAttribute(Ye,u[Ye]);Tc.prototype.copy.call(be,Q),this.parser.assignFinalMaterial(be),k.push(be)}return A.isGroup?(A.clear(),A.add(...k),A):k[0]}))}}const zU="glTF";class Ese{constructor(e){this.name=_l.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==zU)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,s=new DataView(e,12);let a=0;for(;a<r;){const l=s.getUint32(a,!0);a+=4;const u=s.getUint32(a,!0);if(a+=4,1313821514===u){const d=new Uint8Array(e,12+a,l);this.content=n.decode(d)}else if(5130562===u){const d=12+a;this.body=e.slice(d,d+l)}a+=l}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class Dse{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=_l.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,l={},u={},d={};for(const A in a){const y=zP[A]||A.toLowerCase();l[y]=a[A]}for(const A in e.attributes){const y=zP[A]||A.toLowerCase();if(void 0!==a[A]){const C=n.accessors[e.attributes[A]];d[y]=zw[C.componentType].name,u[y]=!0===C.normalized}}return t.getDependency("bufferView",s).then(function(A){return new Promise(function(y){r.decodeDracoFile(A,function(C){for(const k in C.attributes){const se=u[k];void 0!==se&&(C.attributes[k].normalized=se)}y(C)},l,d)})})}}class Bse{constructor(){this.name=_l.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(void 0===t.texCoord||t.texCoord===e.channel)&&void 0===t.offset&&void 0===t.rotation&&void 0===t.scale||(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class Ise{constructor(){this.name=_l.KHR_MESH_QUANTIZATION}}class VU extends uC{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=n[s+a];return t}interpolate_(e,t,n,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,u=2*l,d=3*l,A=r-t,y=(n-t)/A,C=y*y,k=C*y,Q=e*d,se=Q-d,he=-2*k+3*C,re=k-C,Le=1-he,be=re-C+y;for(let Ye=0;Ye!==l;Ye++)s[Ye]=Le*a[se+Ye+l]+be*(a[se+Ye+u]*A)+he*a[Q+Ye+l]+re*(a[Q+Ye]*A);return s}}const Pse=new Uc;class Fse extends VU{interpolate_(e,t,n,r){const s=super.interpolate_(e,t,n,r);return Pse.fromArray(s).normalize().toArray(s),s}}const HA={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},zw={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},GU={9728:ou,9729:Zc,9984:HM,9985:RE,9986:Zx,9987:Jg},qU={33071:_d,33648:Yx,10497:ry},UP={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},zP={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},py={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Rse={CUBICSPLINE:void 0,LINEAR:qv,STEP:tw};function kse(i){return void 0===i.DefaultMaterial&&(i.DefaultMaterial=new I3({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Yg})),i.DefaultMaterial}function _C(i,e,t){for(const n in t.extensions)void 0===i[n]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function Ay(i,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(i.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Lse(i,e){if(i.updateMorphTargets(),void 0!==e.weights)for(let t=0,n=e.weights.length;t<n;t++)i.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(i.morphTargetInfluences.length===t.length){i.morphTargetDictionary={};for(let n=0,r=t.length;n<r;n++)i.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Nse(i){const e=i.extensions&&i.extensions[_l.KHR_DRACO_MESH_COMPRESSION];let t;return t=e?"draco:"+e.bufferView+":"+e.indices+":"+QU(e.attributes):i.indices+":"+QU(i.attributes)+":"+i.mode,t}function QU(i){let e="";const t=Object.keys(i).sort();for(let n=0,r=t.length;n<r;n++)e+=t[n]+":"+i[t[n]]+";";return e}function VP(i){switch(i){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const zse=new ea;class Hse{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new dse,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,s=-1;typeof navigator<"u"&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),this.textureLoader=typeof createImageBitmap>"u"||n||r&&s<98?new nre(this.options.manager):new pre(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new jp(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(a){const l={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:n,userData:{}};_C(s,l,r),Ay(l,r),Promise.all(n._invokeAll(function(u){return u.afterRoot&&u.afterRoot(l)})).then(function(){e(l)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let l=0,u=a.length;l<u;l++)e[a[l]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];void 0!==a.mesh&&(this._addNodeRef(this.meshCache,a.mesh),void 0!==a.skin&&(n[a.mesh].isSkinnedMesh=!0)),void 0!==a.camera&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),s=(a,l)=>{const u=this.associations.get(a);null!=u&&this.associations.set(l,u);for(const[d,A]of a.children.entries())s(A,l.children[d])};return s(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&n.push(s)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this;t=Promise.all((this.json[e+("mesh"===e?"es":"s")]||[]).map(function(s,a){return n.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[_l.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){n.load(AC.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const s=t.byteOffset||0;return n.slice(s,s+(t.byteLength||0))})}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const a=UP[r.type],u=!0===r.normalized,d=new(0,zw[r.componentType])(r.count*a);return Promise.resolve(new va(d,a,u))}const s=[];return s.push(void 0!==r.bufferView?this.getDependency("bufferView",r.bufferView):null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const l=a[0],u=UP[r.type],d=zw[r.componentType],A=d.BYTES_PER_ELEMENT,C=r.byteOffset||0,k=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,Q=!0===r.normalized;let se,he;if(k&&k!==A*u){const re=Math.floor(C/k),Le="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+re+":"+r.count;let be=t.cache.get(Le);be||(se=new d(l,re*k,r.count*k/A),be=new Q5(se,k/A),t.cache.add(Le,be)),he=new tb(be,u,C%k/A,Q)}else se=null===l?new d(r.count*u):new d(l,C,r.count*u),he=new va(se,u,Q);if(void 0!==r.sparse){const Ye=r.sparse.values.byteOffset||0,dt=new(0,zw[r.sparse.indices.componentType])(a[1],r.sparse.indices.byteOffset||0,r.sparse.count*UP.SCALAR),xt=new d(a[2],Ye,r.sparse.count*u);null!==l&&(he=new va(he.array.slice(),he.itemSize,he.normalized));for(let $t=0,nn=dt.length;$t<nn;$t++){const gt=dt[$t];if(he.setX(gt,xt[$t*u]),u>=2&&he.setY(gt,xt[$t*u+1]),u>=3&&he.setZ(gt,xt[$t*u+2]),u>=4&&he.setW(gt,xt[$t*u+3]),u>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return he})}loadTexture(e){const t=this.json,s=t.textures[e].source,a=t.images[s];let l=this.textureLoader;if(a.uri){const u=this.options.manager.getHandler(a.uri);null!==u&&(l=u)}return this.loadTextureImage(e,s,l)}loadTextureImage(e,t,n){const r=this,s=this.json,a=s.textures[e],l=s.images[t],u=(l.uri||l.bufferView)+":"+a.sampler;if(this.textureCache[u])return this.textureCache[u];const d=this.loadImageSource(t,n).then(function(A){A.flipY=!1,A.name=a.name||l.name||"",""===A.name&&"string"==typeof l.uri&&!1===l.uri.startsWith("data:image/")&&(A.name=l.uri);const C=(s.samplers||{})[a.sampler]||{};return A.magFilter=GU[C.magFilter]||Zc,A.minFilter=GU[C.minFilter]||Jg,A.wrapS=qU[C.wrapS]||ry,A.wrapT=qU[C.wrapT]||ry,r.associations.set(A,{textures:e}),A}).catch(function(){return null});return this.textureCache[u]=d,d}loadImageSource(e,t){const r=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then(y=>y.clone());const a=r.images[e],l=self.URL||self.webkitURL;let u=a.uri||"",d=!1;if(void 0!==a.bufferView)u=this.getDependency("bufferView",a.bufferView).then(function(y){d=!0;const C=new Blob([y],{type:a.mimeType});return u=l.createObjectURL(C),u});else if(void 0===a.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const A=Promise.resolve(u).then(function(y){return new Promise(function(C,k){let Q=C;!0===t.isImageBitmapLoader&&(Q=function(se){const he=new kA(se);he.needsUpdate=!0,C(he)}),t.load(AC.resolveURL(y,s.path),Q,void 0,k)})}).then(function(y){return!0===d&&l.revokeObjectURL(u),y.userData.mimeType=a.mimeType||function Use(i){return i.search(/\.jpe?g($|\?)/i)>0||0===i.search(/^data\:image\/jpeg/)?"image/jpeg":i.search(/\.webp($|\?)/i)>0||0===i.search(/^data\:image\/webp/)?"image/webp":"image/png"}(a.uri),y}).catch(function(y){throw console.error("THREE.GLTFLoader: Couldn't load texture",u),y});return this.sourceCache[e]=A,A}assignTexture(e,t,n,r){const s=this;return this.getDependency("texture",n.index).then(function(a){if(!a)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((a=a.clone()).channel=n.texCoord),s.extensions[_l.KHR_TEXTURE_TRANSFORM]){const l=void 0!==n.extensions?n.extensions[_l.KHR_TEXTURE_TRANSFORM]:void 0;if(l){const u=s.associations.get(a);a=s.extensions[_l.KHR_TEXTURE_TRANSFORM].extendTexture(a,l),s.associations.set(a,u)}}return void 0!==r&&(a.colorSpace=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,a=void 0===t.attributes.normal;if(e.isPoints){const l="PointsMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new U_,Jc.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(l,u)),n=u}else if(e.isLine){const l="LineBasicMaterial:"+n.uuid;let u=this.cache.get(l);u||(u=new eu,Jc.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,this.cache.add(l,u)),n=u}if(r||s||a){let l="ClonedMaterial:"+n.uuid+":";r&&(l+="derivative-tangents:"),s&&(l+="vertex-colors:"),a&&(l+="flat-shading:");let u=this.cache.get(l);u||(u=n.clone(),s&&(u.vertexColors=!0),a&&(u.flatShading=!0),r&&(u.normalScale&&(u.normalScale.y*=-1),u.clearcoatNormalScale&&(u.clearcoatNormalScale.y*=-1)),this.cache.add(l,u),this.associations.set(u,this.associations.get(n))),n=u}e.material=n}getMaterialType(){return I3}loadMaterial(e){const t=this,r=this.extensions,s=this.json.materials[e];let a;const l={},d=[];if((s.extensions||{})[_l.KHR_MATERIALS_UNLIT]){const y=r[_l.KHR_MATERIALS_UNLIT];a=y.getMaterialType(),d.push(y.extendParams(l,s,t))}else{const y=s.pbrMetallicRoughness||{};if(l.color=new Ir(1,1,1),l.opacity=1,Array.isArray(y.baseColorFactor)){const C=y.baseColorFactor;l.color.fromArray(C),l.opacity=C[3]}void 0!==y.baseColorTexture&&d.push(t.assignTexture(l,"map",y.baseColorTexture,Jo)),l.metalness=void 0!==y.metallicFactor?y.metallicFactor:1,l.roughness=void 0!==y.roughnessFactor?y.roughnessFactor:1,void 0!==y.metallicRoughnessTexture&&(d.push(t.assignTexture(l,"metalnessMap",y.metallicRoughnessTexture)),d.push(t.assignTexture(l,"roughnessMap",y.metallicRoughnessTexture))),a=this._invokeOne(function(C){return C.getMaterialType&&C.getMaterialType(e)}),d.push(Promise.all(this._invokeAll(function(C){return C.extendMaterialParams&&C.extendMaterialParams(e,l)})))}!0===s.doubleSided&&(l.side=zd);const A=s.alphaMode||"OPAQUE";if("BLEND"===A?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,"MASK"===A&&(l.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&a!==Ah&&(d.push(t.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new qi(1,1),void 0!==s.normalTexture.scale)){const y=s.normalTexture.scale;l.normalScale.set(y,y)}return void 0!==s.occlusionTexture&&a!==Ah&&(d.push(t.assignTexture(l,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(l.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&a!==Ah&&(l.emissive=(new Ir).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&a!==Ah&&d.push(t.assignTexture(l,"emissiveMap",s.emissiveTexture,Jo)),Promise.all(d).then(function(){const y=new a(l);return s.name&&(y.name=s.name),Ay(y,s),t.associations.set(y,{materials:e}),s.extensions&&_C(r,y,s),y})}createUniqueName(e){const t=Hl.sanitizeNodeName(e||"");let n=t;for(let r=1;this.nodeNamesUsed[n];++r)n=t+"_"+r;return this.nodeNamesUsed[n]=!0,n}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function s(l){return n[_l.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(l,t).then(function(u){return WU(u,l,t)})}const a=[];for(let l=0,u=e.length;l<u;l++){const d=e[l],A=Nse(d),y=r[A];if(y)a.push(y.promise);else{let C;C=d.extensions&&d.extensions[_l.KHR_DRACO_MESH_COMPRESSION]?s(d):WU(new bo,d,t),r[A]={primitive:d,promise:C},a.push(C)}}return Promise.all(a)}loadMesh(e){const t=this,r=this.extensions,s=this.json.meshes[e],a=s.primitives,l=[];for(let u=0,d=a.length;u<d;u++){const A=void 0===a[u].material?kse(this.cache):this.getDependency("material",a[u].material);l.push(A)}return l.push(t.loadGeometries(a)),Promise.all(l).then(function(u){const d=u.slice(0,u.length-1),A=u[u.length-1],y=[];for(let k=0,Q=A.length;k<Q;k++){const se=A[k],he=a[k];let re;const Le=d[k];if(he.mode===HA.TRIANGLES||he.mode===HA.TRIANGLE_STRIP||he.mode===HA.TRIANGLE_FAN||void 0===he.mode)re=!0===s.isSkinnedMesh?new b7(se,Le):new Ua(se,Le),!0===re.isSkinnedMesh&&re.normalizeSkinWeights(),he.mode===HA.TRIANGLE_STRIP?re.geometry=UU(re.geometry,oN):he.mode===HA.TRIANGLE_FAN&&(re.geometry=UU(re.geometry,l5));else if(he.mode===HA.LINES)re=new NA(se,Le);else if(he.mode===HA.LINE_STRIP)re=new r0(se,Le);else if(he.mode===HA.LINE_LOOP)re=new I7(se,Le);else{if(he.mode!==HA.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+he.mode);re=new nb(se,Le)}Object.keys(re.geometry.morphAttributes).length>0&&Lse(re,s),re.name=t.createUniqueName(s.name||"mesh_"+e),Ay(re,s),he.extensions&&_C(r,re,he),t.assignFinalMaterial(re),y.push(re)}for(let k=0,Q=y.length;k<Q;k++)t.associations.set(y[k],{meshes:e,primitives:k});if(1===y.length)return y[0];const C=new Wu;t.associations.set(C,{meshes:e});for(let k=0,Q=y.length;k<Q;k++)C.add(y[k]);return C})}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new Lh(LE.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new ww(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),Ay(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,s=t.joints.length;r<s;r++)n.push(this._loadNodeShallow(t.joints[r]));return n.push(void 0!==t.inverseBindMatrices?this.getDependency("accessor",t.inverseBindMatrices):null),Promise.all(n).then(function(r){const s=r.pop(),a=r,l=[],u=[];for(let d=0,A=a.length;d<A;d++){const y=a[d];if(y){l.push(y);const C=new ea;null!==s&&C.fromArray(s.array,16*d),u.push(C)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[d])}return new A3(l,u)})}loadAnimation(e){const n=this.json.animations[e],r=n.name?n.name:"animation_"+e,s=[],a=[],l=[],u=[],d=[];for(let A=0,y=n.channels.length;A<y;A++){const C=n.channels[A],k=n.samplers[C.sampler],Q=C.target,he=void 0!==n.parameters?n.parameters[k.input]:k.input,re=void 0!==n.parameters?n.parameters[k.output]:k.output;void 0!==Q.node&&(s.push(this.getDependency("node",Q.node)),a.push(this.getDependency("accessor",he)),l.push(this.getDependency("accessor",re)),u.push(k),d.push(Q))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(l),Promise.all(u),Promise.all(d)]).then(function(A){const y=A[0],C=A[1],k=A[2],Q=A[3],se=A[4],he=[];for(let re=0,Le=y.length;re<Le;re++){const be=y[re],Ye=C[re],dt=k[re],xt=Q[re],$t=se[re];if(void 0===be)continue;let nn;switch(be.updateMatrix(),py[$t.path]){case py.weights:nn=hC;break;case py.rotation:nn=ab;break;default:nn=dC}const gt=be.name?be.name:be.uuid,Wt=void 0!==xt.interpolation?Rse[xt.interpolation]:qv,Nn=[];py[$t.path]===py.weights?be.traverse(function(Rn){Rn.morphTargetInfluences&&Nn.push(Rn.name?Rn.name:Rn.uuid)}):Nn.push(gt);let yi=dt.array;if(dt.normalized){const Rn=VP(yi.constructor),kn=new Float32Array(yi.length);for(let li=0,Wn=yi.length;li<Wn;li++)kn[li]=yi[li]*Rn;yi=kn}for(let Rn=0,kn=Nn.length;Rn<kn;Rn++){const li=new nn(Nn[Rn]+"."+py[$t.path],Ye.array,yi,Wt);"CUBICSPLINE"===xt.interpolation&&(li.createInterpolant=function(ni){return new(this instanceof ab?Fse:VU)(this.times,this.values,this.getValueSize()/3,ni)},li.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),he.push(li)}}return new fC(r,void 0,he)})}createNodeMesh(e){const n=this,r=this.json.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then(function(s){const a=n._getNodeRef(n.meshCache,r.mesh,s);return void 0!==r.weights&&a.traverse(function(l){if(l.isMesh)for(let u=0,d=r.weights.length;u<d;u++)l.morphTargetInfluences[u]=r.weights[u]}),a})}loadNode(e){const n=this,r=this.json.nodes[e],s=n._loadNodeShallow(e),a=[],l=r.children||[];for(let d=0,A=l.length;d<A;d++)a.push(n.getDependency("node",l[d]));const u=void 0===r.skin?Promise.resolve(null):n.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),u]).then(function(d){const A=d[0],y=d[1],C=d[2];null!==C&&A.traverse(function(k){k.isSkinnedMesh&&k.bind(C,zse)});for(let k=0,Q=y.length;k<Q;k++)A.add(y[k]);return A})}_loadNodeShallow(e){const n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=this.json.nodes[e],a=s.name?r.createUniqueName(s.name):"",l=[],u=r._invokeOne(function(d){return d.createNodeMesh&&d.createNodeMesh(e)});return u&&l.push(u),void 0!==s.camera&&l.push(r.getDependency("camera",s.camera).then(function(d){return r._getNodeRef(r.cameraCache,s.camera,d)})),r._invokeAll(function(d){return d.createNodeAttachment&&d.createNodeAttachment(e)}).forEach(function(d){l.push(d)}),this.nodeCache[e]=Promise.all(l).then(function(d){let A;if(A=!0===s.isBone?new j5:d.length>1?new Wu:1===d.length?d[0]:new Tc,A!==d[0])for(let y=0,C=d.length;y<C;y++)A.add(d[y]);if(s.name&&(A.userData.name=s.name,A.name=a),Ay(A,s),s.extensions&&_C(n,A,s),void 0!==s.matrix){const y=new ea;y.fromArray(s.matrix),A.applyMatrix4(y)}else void 0!==s.translation&&A.position.fromArray(s.translation),void 0!==s.rotation&&A.quaternion.fromArray(s.rotation),void 0!==s.scale&&A.scale.fromArray(s.scale);return r.associations.has(A)||r.associations.set(A,{}),r.associations.get(A).nodes=e,A}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,s=new Wu;n.name&&(s.name=r.createUniqueName(n.name)),Ay(s,n),n.extensions&&_C(t,s,n);const a=n.nodes||[],l=[];for(let u=0,d=a.length;u<d;u++)l.push(r.getDependency("node",a[u]));return Promise.all(l).then(function(u){for(let A=0,y=u.length;A<y;A++)s.add(u[A]);return r.associations=(A=>{const y=new Map;for(const[C,k]of r.associations)(C instanceof Jc||C instanceof kA)&&y.set(C,k);return A.traverse(C=>{const k=r.associations.get(C);null!=k&&y.set(C,k)}),y})(s),s})}}function WU(i,e,t){const n=e.attributes,r=[];function s(a,l){return t.getDependency("accessor",a).then(function(u){i.setAttribute(l,u)})}for(const a in n){const l=zP[a]||a.toLowerCase();l in i.attributes||r.push(s(n[a],l))}if(void 0!==e.indices&&!i.index){const a=t.getDependency("accessor",e.indices).then(function(l){i.setIndex(l)});r.push(a)}return Ay(i,e),function Vse(i,e,t){const n=e.attributes,r=new e0;if(void 0===n.POSITION)return;{const l=t.json.accessors[n.POSITION],u=l.min,d=l.max;if(void 0===u||void 0===d)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(r.set(new kt(u[0],u[1],u[2]),new kt(d[0],d[1],d[2])),l.normalized){const A=VP(zw[l.componentType]);r.min.multiplyScalar(A),r.max.multiplyScalar(A)}}const s=e.targets;if(void 0!==s){const l=new kt,u=new kt;for(let d=0,A=s.length;d<A;d++){const y=s[d];if(void 0!==y.POSITION){const C=t.json.accessors[y.POSITION],k=C.min,Q=C.max;if(void 0!==k&&void 0!==Q){if(u.setX(Math.max(Math.abs(k[0]),Math.abs(Q[0]))),u.setY(Math.max(Math.abs(k[1]),Math.abs(Q[1]))),u.setZ(Math.max(Math.abs(k[2]),Math.abs(Q[2]))),C.normalized){const se=VP(zw[C.componentType]);u.multiplyScalar(se)}l.max(u)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(l)}i.boundingBox=r;const a=new OA;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,i.boundingSphere=a}(i,e,t),Promise.all(r).then(function(){return void 0!==e.targets?function Ose(i,e,t){let n=!1,r=!1,s=!1;for(let d=0,A=e.length;d<A;d++){const y=e[d];if(void 0!==y.POSITION&&(n=!0),void 0!==y.NORMAL&&(r=!0),void 0!==y.COLOR_0&&(s=!0),n&&r&&s)break}if(!n&&!r&&!s)return Promise.resolve(i);const a=[],l=[],u=[];for(let d=0,A=e.length;d<A;d++){const y=e[d];if(n){const C=void 0!==y.POSITION?t.getDependency("accessor",y.POSITION):i.attributes.position;a.push(C)}if(r){const C=void 0!==y.NORMAL?t.getDependency("accessor",y.NORMAL):i.attributes.normal;l.push(C)}if(s){const C=void 0!==y.COLOR_0?t.getDependency("accessor",y.COLOR_0):i.attributes.color;u.push(C)}}return Promise.all([Promise.all(a),Promise.all(l),Promise.all(u)]).then(function(d){const y=d[1],C=d[2];return n&&(i.morphAttributes.position=d[0]),r&&(i.morphAttributes.normal=y),s&&(i.morphAttributes.color=C),i.morphTargetsRelative=!0,i})}(i,e.targets,t):i})}const GP=new WeakMap;class qP extends a0{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const s=new jp(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{this.parse(a,t,r)},n,r)}parse(e,t,n){this.decodeDracoFile(e,t,null,null,Jo).catch(n)}decodeDracoFile(e,t,n,r,s=Pm){return this.decodeGeometry(e,{attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:s}).then(t)}decodeGeometry(e,t){const n=JSON.stringify(t);if(GP.has(e)){const u=GP.get(e);if(u.key===n)return u.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,l=this._getWorker(s,e.byteLength).then(u=>(r=u,new Promise((d,A)=>{r._callbacks[s]={resolve:d,reject:A},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(u=>this._createGeometry(u.geometry));return l.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),GP.set(e,{key:n,promise:l}),l}_createGeometry(e){const t=new bo;e.index&&t.setIndex(new va(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],s=r.name,u=new va(r.array,r.itemSize);"color"===s&&this._assignVertexColorSpace(u,r.vertexColorSpace),t.setAttribute(s,u)}return t}_assignVertexColorSpace(e,t){if(t!==Jo)return;const n=new Ir;for(let r=0,s=e.count;r<s;r++)n.fromBufferAttribute(e,r).convertSRGBToLinear(),e.setXYZ(r,n.r,n.g,n.b)}_loadLibrary(e,t){const n=new jp(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((r,s)=>{n.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const r=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const s=Gse.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function Gse(){let i,e;function r(a,l,u,d,A,y){const C=y.num_components(),Q=u.num_points()*C,se=Q*A.BYTES_PER_ELEMENT,he=function s(a,l){switch(l){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}(a,A),re=a._malloc(se);l.GetAttributeDataArrayForAllPoints(u,y,he,se,re);const Le=new A(a.HEAPF32.buffer,re,Q).slice();return a._free(re),{name:d,array:Le,itemSize:C}}onmessage=function(a){const l=a.data;switch(l.type){case"init":i=l.decoderConfig,e=new Promise(function(A){i.onModuleLoaded=function(y){A({draco:y})},DracoDecoderModule(i)});break;case"decode":const u=l.buffer,d=l.taskConfig;e.then(A=>{const y=A.draco,C=new y.Decoder;try{const k=function t(a,l,u,d){const A=d.attributeIDs,y=d.attributeTypes;let C,k;const Q=l.GetEncodedGeometryType(u);if(Q===a.TRIANGULAR_MESH)C=new a.Mesh,k=l.DecodeArrayToMesh(u,u.byteLength,C);else{if(Q!==a.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");C=new a.PointCloud,k=l.DecodeArrayToPointCloud(u,u.byteLength,C)}if(!k.ok()||0===C.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+k.error_msg());const se={index:null,attributes:[]};for(const he in A){const re=self[y[he]];let Le,be;if(d.useUniqueIDs)be=A[he],Le=l.GetAttributeByUniqueId(C,be);else{if(be=l.GetAttributeId(C,a[A[he]]),-1===be)continue;Le=l.GetAttribute(C,be)}const Ye=r(a,l,C,he,re,Le);"color"===he&&(Ye.vertexColorSpace=d.vertexColorSpace),se.attributes.push(Ye)}return Q===a.TRIANGULAR_MESH&&(se.index=function n(a,l,u){const A=3*u.num_faces(),y=4*A,C=a._malloc(y);l.GetTrianglesUInt32Array(u,y,C);const k=new Uint32Array(a.HEAPF32.buffer,C,A).slice();return a._free(C),{array:k,itemSize:1}}(a,l,C)),a.destroy(C),se}(y,C,new Int8Array(u),d),Q=k.attributes.map(se=>se.array.buffer);k.index&&Q.push(k.index.array.buffer),self.postMessage({type:"decode",id:l.id,geometry:k},Q)}catch(k){console.error(k),self.postMessage({type:"error",id:l.id,error:k.message})}finally{y.destroy(C)}})}}}class qse{constructor(e,t,n){this.clipPlanes=e,this.EVENT_DATA_ID=t,this.GEOMETRIES_ID=n}loadOBJGeometry(e,t,n,r,s){n=n??4302580;const a=new NU;return new Promise((l,u)=>{a.load(e,d=>{const A=this.processOBJ(d,t,n,r,s);l({object:A})},null,d=>{u(d)})})}parseOBJGeometry(e,t){const r=(new NU).parse(e);return this.processOBJ(r,t,4302580,!1,!1)}processOBJ(e,t,n,r,s){return e.name=t,e.userData={name:t},this.setObjFlat(e,n,r,s)}setObjFlat(e,t,n,r){const s=new Um({color:t,shininess:0,wireframe:!1,clippingPlanes:this.clipPlanes,clipIntersection:!0,clipShadows:!1,side:n?zd:Yg,flatShading:r});return e.traverse(a=>{a instanceof Ua?(a.name=e.name,a.userData=e.userData,a.userData.size=this.getObjectSize(a),a.material instanceof Jc&&(a.material.dispose(),a.material=s),a.castShadow=!1,a.receiveShadow=!1):a instanceof NA&&a.material instanceof eu&&a.material.color.set(t)}),e}parsePhnxScene(e,t){const n=new q3,r=new qP;r.setDecoderPath(`https://cdn.jsdelivr.net/npm/three@0.${jx}.0/examples/jsm/libs/draco/`),n.setDRACOLoader(r);const s=JSON.stringify(e,null,2);return new Promise((a,l)=>{n.parse(s,"",u=>{const d=u.scene.getObjectByName(this.EVENT_DATA_ID),A=u.scene.getObjectByName(this.GEOMETRIES_ID);t(d,A),a()},u=>{l(u)})})}loadGLTFGeometry(e,t,n,r,s){const a=new q3,l=new qP;return l.setDecoderPath(`https://cdn.jsdelivr.net/npm/three@0.${jx}.0/examples/jsm/libs/draco/`),a.setDRACOLoader(l),new Promise((u,d)=>{a.load(e,A=>{var y;const C=[];for(const k of A.scenes){k.visible=null!==(y=k.userData.visible)&&void 0!==y?y:s;const Q=this.processGLTFSceneName(k.name,n),se={},he=(re,Le,be)=>{const Ye=Le.clone().multiply(re.matrix);if(re instanceof Ua){const dt=re.material.id;se[dt]||(se[dt]={material:re.material,geoms:[],renderOrder:-be}),se[dt].geoms.push(re.geometry.clone().applyMatrix4(Ye))}for(const dt of re.children)he(dt,Ye,be+1)};he(k,new ea,0),k.remove(...k.children);for(const re of Object.values(se)){const Le=new Ua(NP(re.geoms),re.material);Le.renderOrder=re.renderOrder,k.add(Le)}this.processGeometry(k,t??Q.name,r,!0),C.push({object:k,menuNodeName:n??Q.menuNodeName})}u(C)},void 0,A=>{d(A)})})}parseGLTFGeometry(e,t){const n=new q3,r=new qP;return r.setDecoderPath(`https://cdn.jsdelivr.net/npm/three@0.${jx}.0/examples/jsm/libs/draco/`),n.setDRACOLoader(r),new Promise((s,a)=>{n.parse(e,"",l=>{const u=[];for(const d of l.scenes){d.visible=d.userData.visible;const A=this.processGLTFSceneName(d.name);this.processGeometry(d,t??A.name),u.push({object:d})}s(u)},l=>{a(l)})})}processGLTFSceneName(e,t){if(e){const n=e.split("_>_");t&&n.unshift(t);const r=n.join(" > ");return n.pop(),{name:r,menuNodeName:n.join(" > ")}}}loadJSONGeometry(e,t,n,r){const s=new dre;switch(typeof e){case"string":return new Promise((a,l)=>{s.load(e,u=>{this.processGeometry(u,t,n,r),a({object:u})},null,u=>{l(u)})});case"object":return new Promise(a=>{const l=s.parse(e);this.processGeometry(l,t,n,r),a({object:l})})}}processGeometry(e,t,n,r){e.name=t,n&&e.scale.setScalar(n),e.traverse(s=>{var a;if(s instanceof Ua&&(s.name=s.userData.name=t,s.userData.size=this.getObjectSize(s),s.material instanceof Jc)){const l=s.material.color?s.material.color:3135121,u=r?zd:s.material.side;s.material.dispose();let d=!1;e.userData.opacity&&(d=!0),s.material=new Um({color:l,shininess:0,side:u,transparent:d,opacity:null!==(a=e.userData.opacity)&&void 0!==a?a:1}),s.material.clippingPlanes=this.clipPlanes,s.material.clipIntersection=!0,s.material.clipShadows=!1}})}getObjectSize(e){var t,n;const r=new kt;return e.geometry.computeBoundingBox(),null===(n=null===(t=e.geometry)||void 0===t?void 0:t.boundingBox)||void 0===n||n.getSize(r),JSON.stringify(r,null,2)}}let my=(()=>{class i{static getPrettySymbol(t){return Object.keys(i.symbols).find(r=>i.symbols[r].includes(t))||t}static getPrettyParams(t){const n=Object.assign({},t);for(const r of Object.keys(n)){const s=i.getPrettySymbol(r);s!==r&&(n[s]=n[r],delete n[r])}if(delete n.pos,n?.dparams){const r={};return r.\u03b8=n.dparams[3],r.\u03d5=n.dparams[2],r["|p|"]=Math.abs(1/n.dparams[4]),r.q=Math.sign(1/n.dparams[4]),r.d0=n.dparams[0],r.z0=n.dparams[1],delete n.dparams,Object.assign(Object.assign({},n),r)}return n}}return i.symbols={\u03b8:["theta"],\u03d5:["phi"],pT:["pt"],\u{1d6d8}2:["chi2"],\u03b7:["eta"],q:["charge"],NDOF:["ndof"],DOF:["dof"],Energy:["energy"],ET:["et"],"|p|":["momentum","mom"]},i})();class Hw{constructor(e){this.value=e,this.callbacks=[]}update(e){this.value=e,this.callbacks.forEach(t=>t(e))}onUpdate(e){this.callbacks.push(e)}}class Qse{constructor(){this.activeObject=new Hw(""),this.onTouchMove=e=>{const t=this.intersectObject(e);if(t){if(this.ignoreList.includes(t.type))return;this.outlinePass.selectedObjects=[t]}},this.onDocumentMouseDown=()=>{const e=this.outlinePass.selectedObjects[0];if(e){this.selectedObject.name=e.name,this.selectedObject.attributes.splice(0,this.selectedObject.attributes.length),this.activeObject.update(e.uuid);const t=my.getPrettyParams(e.userData);for(const s of Object.keys(t))this.selectedObject.attributes.push({attributeName:s,attributeValue:t[s]});const n=Object.keys(e.userData).map(s=>{if(["string","number"].includes(typeof e.userData[s]))return s+"="+e.userData[s]}).filter(s=>s),r=e.name+(n.length>0?" with "+n.join(", "):"");r&&this.infoLogger.add(r,"Clicked")}},this.onTouchDown=e=>{e.preventDefault(),this.onTouchMove(e.targetTouches[0]),this.onDocumentMouseDown()},this.isInit=!1,this.ignoreList=[(new R3).type,(new Uw).type,(new BP).type]}init(e,t,n,r){this.camera=e,this.scene=t,this.isInit=!0,this.infoLogger=r,this.effectsManager=n,this.outlinePass=this.effectsManager.addOutlinePassForSelection()}setSelectedObject(e){this.selectedObject=e}getActiveObjectId(){return this.activeObject}setSelecting(e){this.isInit&&(e?this.enableSelecting():this.disableSelecting())}enableSelecting(){document.getElementById("three-canvas").addEventListener("mousemove",this.onTouchMove,!0),document.getElementById("three-canvas").addEventListener("click",this.onDocumentMouseDown,!0),document.getElementById("three-canvas").addEventListener("touchstart",this.onTouchDown),this.preSelectionAntialias=this.effectsManager.antialiasing,this.effectsManager.setAntialiasing(!1)}disableSelecting(){document.getElementById("three-canvas").removeEventListener("mousemove",this.onTouchMove,!0),document.getElementById("three-canvas").removeEventListener("click",this.onDocumentMouseDown,!0),document.getElementById("three-canvas").removeEventListener("touchstart",this.onTouchDown),this.outlinePass.selectedObjects=[],this.effectsManager.setAntialiasing(this.preSelectionAntialias)}intersectObject(e){var t;null===(t=e.preventDefault)||void 0===t||t.call(e);const n=new qi,r=this.effectsManager.composer.renderer.domElement;n.x=e.clientX/r.clientWidth*2-1,n.y=-e.clientY/r.clientHeight*2+1;const s=new Bre;s.setFromCamera(n,this.camera),s.params.Line.threshold=3;const a=s.intersectObjects(this.scene.children,!0);if(a.length>0)return a[0].object}highlightObject(e,t){const n=t.getObjectByProperty("uuid",e);n&&(this.outlinePass.selectedObjects=[n])}}class Wse extends D3{constructor(e,t={}){const n=t.font;if(void 0===n)super();else{const r=n.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}class jU{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=function jse(i,e,t){const n=Array.from(i),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,a=[];let l=0,u=0;for(let d=0;d<n.length;d++){const A=n[d];if("\n"===A)l=0,u-=s;else{const y=$se(A,r,l,u,t);l+=y.offsetX,a.push(y.path)}}return a}(e,t,this.data);for(let s=0,a=r.length;s<a;s++)n.push(...r[s].toShapes());return n}}function $se(i,e,t,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");const a=new Fre;let l,u,d,A,y,C,k,Q;if(s.o){const se=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let he=0,re=se.length;he<re;)switch(se[he++]){case"m":l=se[he++]*e+t,u=se[he++]*e+n,a.moveTo(l,u);break;case"l":l=se[he++]*e+t,u=se[he++]*e+n,a.lineTo(l,u);break;case"q":d=se[he++]*e+t,A=se[he++]*e+n,y=se[he++]*e+t,C=se[he++]*e+n,a.quadraticCurveTo(y,C,d,A);break;case"b":d=se[he++]*e+t,A=se[he++]*e+n,y=se[he++]*e+t,C=se[he++]*e+n,k=se[he++]*e+t,Q=se[he++]*e+n,a.bezierCurveTo(y,C,k,Q,d,A)}}return{offsetX:s.ha*e,path:a}}class Df{static anglesAreSane(e,t){const n=-Math.PI<t&&Math.PI>t,r=0<e&&Math.PI>e;return n&&r}static etaToTheta(e){return 2*Math.atan(Math.pow(Math.E,-e))}static thetaToEta(e){return-Math.log(Math.tan(e/2))}static sphericalToCartesian(e,t,n){const r=new kt;return r.setFromSphericalCoords(e,t,n),r.applyQuaternion(Df.atlasQuaternion()),r}static etaPhiToCartesian(e,t,n){const r=new kt;return r.setFromSphericalCoords(e,this.etaToTheta(t),n),r.applyQuaternion(Df.atlasQuaternion()),r}static atlasQuaternion(){const e=new kt(0,1,0),t=new kt(0,0,1),n=new Uc;n.setFromUnitVectors(e,t);const r=new Uc;return r.setFromAxisAngle(new kt(0,1,0),Math.PI/2),n.multiply(r),n}}const Xse=JSON.parse('{"glyphs":{"0":{"x_min":73,"x_max":715,"ha":792,"o":"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},"1":{"x_min":215.671875,"x_max":574,"ha":792,"o":"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},"2":{"x_min":59,"x_max":731,"ha":792,"o":"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},"3":{"x_min":54,"x_max":737,"ha":792,"o":"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},"4":{"x_min":48,"x_max":742.453125,"ha":792,"o":"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},"5":{"x_min":54.171875,"x_max":738,"ha":792,"o":"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},"6":{"x_min":53,"x_max":739,"ha":792,"o":"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},"7":{"x_min":58.71875,"x_max":730.953125,"ha":792,"o":"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},"8":{"x_min":55,"x_max":736,"ha":792,"o":"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},"9":{"x_min":53,"x_max":739,"ha":792,"o":"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},"\u03bf":{"x_min":0,"x_max":712,"ha":815,"o":"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},"S":{"x_min":0,"x_max":788,"ha":890,"o":"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"\xa6":{"x_min":343,"x_max":449,"ha":792,"o":"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{"x_min":183.25,"x_max":608.328125,"ha":792,"o":"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},"\u03a4":{"x_min":-0.4375,"x_max":777.453125,"ha":839,"o":"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},"y":{"x_min":0,"x_max":684.78125,"ha":771,"o":"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},"\u03a0":{"x_min":0,"x_max":803,"ha":917,"o":"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},"\u0390":{"x_min":-111,"x_max":339,"ha":361,"o":"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},"g":{"x_min":0,"x_max":686,"ha":838,"o":"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"\xb2":{"x_min":0,"x_max":442,"ha":539,"o":"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"\u2013":{"x_min":0,"x_max":705.5625,"ha":803,"o":"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},"\u039a":{"x_min":0,"x_max":819.5625,"ha":893,"o":"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},"\u0192":{"x_min":-46.265625,"x_max":392,"ha":513,"o":"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},"e":{"x_min":0,"x_max":714,"ha":813,"o":"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},"\u03cc":{"x_min":0,"x_max":712,"ha":815,"o":"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},"J":{"x_min":0,"x_max":588,"ha":699,"o":"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"\xbb":{"x_min":-1,"x_max":503,"ha":601,"o":"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"\xa9":{"x_min":-3,"x_max":1008,"ha":1106,"o":"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},"\u03ce":{"x_min":0,"x_max":922,"ha":1030,"o":"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{"x_min":193.0625,"x_max":598.609375,"ha":792,"o":"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"\xab":{"x_min":0,"x_max":507.203125,"ha":604,"o":"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},"D":{"x_min":0,"x_max":828,"ha":935,"o":"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"\u2219":{"x_min":0,"x_max":142,"ha":239,"o":"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},"\xff":{"x_min":0,"x_max":47,"ha":125,"o":"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},"w":{"x_min":0,"x_max":1009.71875,"ha":1100,"o":"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},"$":{"x_min":0,"x_max":700,"ha":793,"o":"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\\\":{"x_min":-0.015625,"x_max":425.0625,"ha":522,"o":"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},"\xb5":{"x_min":0,"x_max":697.21875,"ha":747,"o":"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},"\u0399":{"x_min":42,"x_max":181,"ha":297,"o":"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},"\u038e":{"x_min":0,"x_max":1144.5,"ha":1214,"o":"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u2019":{"x_min":0,"x_max":139,"ha":236,"o":"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},"\u039d":{"x_min":0,"x_max":801,"ha":915,"o":"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{"x_min":8.71875,"x_max":350.390625,"ha":478,"o":"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},"Q":{"x_min":0,"x_max":968,"ha":1072,"o":"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},"\u03c2":{"x_min":1,"x_max":676.28125,"ha":740,"o":"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},"M":{"x_min":0,"x_max":954,"ha":1067,"o":"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},"\u03a8":{"x_min":0,"x_max":1006,"ha":1094,"o":"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},"C":{"x_min":0,"x_max":886,"ha":944,"o":"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{"x_min":0,"x_max":138,"ha":236,"o":"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{"x_min":0,"x_max":480.5625,"ha":578,"o":"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},"X":{"x_min":-0.015625,"x_max":854.15625,"ha":940,"o":"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{"x_min":0,"x_max":963.890625,"ha":1061,"o":"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},"\u03b9":{"x_min":42,"x_max":284,"ha":361,"o":"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},"\u0386":{"x_min":0,"x_max":906.953125,"ha":982,"o":"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{"x_min":0,"x_max":318,"ha":415,"o":"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},"\u03b5":{"x_min":0,"x_max":634.71875,"ha":714,"o":"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},"\u0394":{"x_min":0,"x_max":952.78125,"ha":1028,"o":"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{"x_min":0,"x_max":481,"ha":578,"o":"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"\u2030":{"x_min":-3,"x_max":1672,"ha":1821,"o":"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},"a":{"x_min":0,"x_max":698.609375,"ha":794,"o":"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"\u2014":{"x_min":0,"x_max":941.671875,"ha":1039,"o":"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{"x_min":8.71875,"x_max":780.953125,"ha":792,"o":"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},"N":{"x_min":0,"x_max":801,"ha":914,"o":"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},"\u03c1":{"x_min":0,"x_max":712,"ha":797,"o":"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"\xaf":{"x_min":0,"x_max":941.671875,"ha":938,"o":"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},"Z":{"x_min":0,"x_max":779,"ha":849,"o":"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},"u":{"x_min":0,"x_max":617,"ha":729,"o":"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},"k":{"x_min":0,"x_max":612.484375,"ha":697,"o":"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},"\u0397":{"x_min":0,"x_max":803,"ha":917,"o":"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},"\u0391":{"x_min":0,"x_max":906.953125,"ha":985,"o":"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},"s":{"x_min":0,"x_max":604,"ha":697,"o":"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},"B":{"x_min":0,"x_max":778,"ha":876,"o":"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"\u2026":{"x_min":0,"x_max":614,"ha":708,"o":"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{"x_min":0,"x_max":607,"ha":704,"o":"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},"H":{"x_min":0,"x_max":803,"ha":915,"o":"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},"\u03bd":{"x_min":0,"x_max":675,"ha":761,"o":"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},"c":{"x_min":1,"x_max":701.390625,"ha":775,"o":"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"\xb6":{"x_min":0,"x_max":566.671875,"ha":678,"o":"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},"\u03b2":{"x_min":0,"x_max":660,"ha":745,"o":"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},"\u039c":{"x_min":0,"x_max":954,"ha":1068,"o":"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},"\u038c":{"x_min":0.109375,"x_max":1120,"ha":1217,"o":"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u0389":{"x_min":0,"x_max":1158,"ha":1275,"o":"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u2022":{"x_min":0,"x_max":663.890625,"ha":775,"o":"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"\xa5":{"x_min":0.1875,"x_max":819.546875,"ha":886,"o":"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{"x_min":0,"x_max":318.0625,"ha":415,"o":"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},"U":{"x_min":0,"x_max":796,"ha":904,"o":"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},"\u03b3":{"x_min":0.5,"x_max":744.953125,"ha":822,"o":"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},"\u03b1":{"x_min":0,"x_max":765.5625,"ha":809,"o":"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},"F":{"x_min":0,"x_max":683.328125,"ha":717,"o":"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"\xad":{"x_min":0,"x_max":705.5625,"ha":803,"o":"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{"x_min":0,"x_max":142,"ha":239,"o":"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},"\u03a7":{"x_min":0,"x_max":854.171875,"ha":935,"o":"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{"x_min":116,"x_max":674,"ha":792,"o":"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"\u2020":{"x_min":0,"x_max":777,"ha":835,"o":"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"\xb0":{"x_min":0,"x_max":347,"ha":444,"o":"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},"V":{"x_min":0,"x_max":862.71875,"ha":940,"o":"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},"\u039e":{"x_min":0,"x_max":734.71875,"ha":763,"o":"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "},"\xa0":{"x_min":0,"x_max":0,"ha":853},"\u03ab":{"x_min":0.328125,"x_max":819.515625,"ha":889,"o":"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"\u201d":{"x_min":0,"x_max":347,"ha":454,"o":"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{"x_min":0,"x_max":1260,"ha":1357,"o":"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},"\u038a":{"x_min":0,"x_max":499,"ha":613,"o":"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},"i":{"x_min":14,"x_max":136,"ha":275,"o":"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},"\u0392":{"x_min":0,"x_max":778,"ha":877,"o":"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},"\u03c5":{"x_min":0,"x_max":617,"ha":725,"o":"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{"x_min":0,"x_max":275,"ha":372,"o":"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},"m":{"x_min":0,"x_max":1019,"ha":1128,"o":"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},"\u03c7":{"x_min":8.328125,"x_max":780.5625,"ha":815,"o":"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},"\u03af":{"x_min":42,"x_max":326.71875,"ha":361,"o":"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},"\u0396":{"x_min":0,"x_max":779.171875,"ha":850,"o":"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},"R":{"x_min":0,"x_max":781.953125,"ha":907,"o":"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},"o":{"x_min":0,"x_max":713,"ha":821,"o":"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},"K":{"x_min":0,"x_max":819.46875,"ha":906,"o":"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{"x_min":0,"x_max":142,"ha":239,"o":"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},"d":{"x_min":0,"x_max":683,"ha":796,"o":"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"\xa8":{"x_min":-109,"x_max":247,"ha":232,"o":"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},"E":{"x_min":0,"x_max":736.109375,"ha":789,"o":"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"Y":{"x_min":0,"x_max":820,"ha":886,"o":"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},"\\"":{"x_min":0,"x_max":299,"ha":396,"o":"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"\u2039":{"x_min":17.984375,"x_max":773.609375,"ha":792,"o":"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"\u201e":{"x_min":0,"x_max":364,"ha":467,"o":"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},"\u03b4":{"x_min":1,"x_max":710,"ha":810,"o":"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},"\u03ad":{"x_min":0,"x_max":634.71875,"ha":714,"o":"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},"\u03c9":{"x_min":0,"x_max":922,"ha":1031,"o":"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"\xb4":{"x_min":0,"x_max":96,"ha":251,"o":"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"\xb1":{"x_min":11,"x_max":781,"ha":792,"o":"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{"x_min":343,"x_max":449,"ha":792,"o":"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"\u03cb":{"x_min":0,"x_max":617,"ha":725,"o":"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"\xa7":{"x_min":0,"x_max":593,"ha":690,"o":"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},"b":{"x_min":0,"x_max":685,"ha":783,"o":"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},"q":{"x_min":0,"x_max":683,"ha":876,"o":"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},"\u03a9":{"x_min":-0.171875,"x_max":969.5625,"ha":1068,"o":"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},"\u03cd":{"x_min":0,"x_max":617,"ha":725,"o":"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},"z":{"x_min":-0.015625,"x_max":613.890625,"ha":697,"o":"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"\u2122":{"x_min":0,"x_max":894,"ha":1000,"o":"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},"\u03ae":{"x_min":0.78125,"x_max":697,"ha":810,"o":"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},"\u0398":{"x_min":0,"x_max":960,"ha":1056,"o":"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"\xae":{"x_min":-3,"x_max":1008,"ha":1106,"o":"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{"x_min":0,"x_max":833,"ha":931,"o":"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},"\u0395":{"x_min":0,"x_max":736.21875,"ha":778,"o":"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"\xb3":{"x_min":0,"x_max":450,"ha":547,"o":"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{"x_min":0,"x_max":273.609375,"ha":371,"o":"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},"L":{"x_min":0,"x_max":645.828125,"ha":696,"o":"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},"\u03c3":{"x_min":0,"x_max":803.390625,"ha":894,"o":"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},"\u03b6":{"x_min":0,"x_max":573,"ha":642,"o":"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},"\u03b8":{"x_min":0,"x_max":674,"ha":778,"o":"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},"\u039f":{"x_min":0,"x_max":958,"ha":1054,"o":"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},"\u0393":{"x_min":0,"x_max":705.28125,"ha":749,"o":"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{"x_min":0,"x_max":0,"ha":375},"%":{"x_min":-3,"x_max":1089,"ha":1186,"o":"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},"P":{"x_min":0,"x_max":726,"ha":806,"o":"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},"\u0388":{"x_min":0,"x_max":1078.21875,"ha":1118,"o":"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u038f":{"x_min":0.125,"x_max":1136.546875,"ha":1235,"o":"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},"_":{"x_min":0,"x_max":705.5625,"ha":803,"o":"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},"\u03aa":{"x_min":-110,"x_max":246,"ha":275,"o":"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{"x_min":23,"x_max":768,"ha":792,"o":"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"\xbd":{"x_min":0,"x_max":1050,"ha":1149,"o":"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},"\u03a1":{"x_min":0,"x_max":720,"ha":783,"o":"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"\'":{"x_min":0,"x_max":139,"ha":236,"o":"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},"\xaa":{"x_min":0,"x_max":350,"ha":397,"o":"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"\u0385":{"x_min":0,"x_max":450,"ha":553,"o":"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},"T":{"x_min":0,"x_max":777,"ha":835,"o":"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},"\u03a6":{"x_min":0,"x_max":915,"ha":997,"o":"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"\u204b":{"x_min":0,"x_max":0,"ha":694},"j":{"x_min":-77.78125,"x_max":167,"ha":349,"o":"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},"\u03a3":{"x_min":0,"x_max":756.953125,"ha":819,"o":"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"\u203a":{"x_min":18.0625,"x_max":774,"ha":792,"o":"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{"x_min":17.984375,"x_max":773.609375,"ha":792,"o":"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"\xa3":{"x_min":0,"x_max":704.484375,"ha":801,"o":"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},"t":{"x_min":0,"x_max":367,"ha":458,"o":"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"\xac":{"x_min":0,"x_max":706,"ha":803,"o":"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},"\u03bb":{"x_min":0,"x_max":750,"ha":803,"o":"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},"W":{"x_min":0,"x_max":1263.890625,"ha":1351,"o":"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{"x_min":18.0625,"x_max":774,"ha":792,"o":"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"v":{"x_min":0,"x_max":675.15625,"ha":761,"o":"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},"\u03c4":{"x_min":0.28125,"x_max":644.5,"ha":703,"o":"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},"\u03be":{"x_min":0,"x_max":624.9375,"ha":699,"o":"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{"x_min":-3,"x_max":894.25,"ha":992,"o":"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},"\u039b":{"x_min":0,"x_max":862.5,"ha":942,"o":"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},"I":{"x_min":41,"x_max":180,"ha":293,"o":"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},"G":{"x_min":0,"x_max":921,"ha":1011,"o":"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},"\u03b0":{"x_min":0,"x_max":617,"ha":725,"o":"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{"x_min":0,"x_max":138.890625,"ha":236,"o":"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"\xb7":{"x_min":0,"x_max":142,"ha":239,"o":"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},"\u03a5":{"x_min":0.328125,"x_max":819.515625,"ha":889,"o":"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},"r":{"x_min":0,"x_max":355.5625,"ha":432,"o":"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},"x":{"x_min":0,"x_max":675,"ha":764,"o":"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},"\u03bc":{"x_min":0,"x_max":696.609375,"ha":747,"o":"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},"h":{"x_min":0,"x_max":615,"ha":724,"o":"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{"x_min":0,"x_max":142,"ha":239,"o":"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},"\u03c6":{"x_min":-2,"x_max":878,"ha":974,"o":"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{"x_min":0,"x_max":142,"ha":239,"o":"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},"f":{"x_min":0,"x_max":378,"ha":472,"o":"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"\u201c":{"x_min":1,"x_max":348.21875,"ha":454,"o":"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},"A":{"x_min":0.03125,"x_max":906.953125,"ha":1008,"o":"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"\u2018":{"x_min":1,"x_max":139.890625,"ha":236,"o":"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},"\u03ca":{"x_min":-70,"x_max":283,"ha":361,"o":"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},"\u03c0":{"x_min":-0.21875,"x_max":773.21875,"ha":857,"o":"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},"\u03ac":{"x_min":0,"x_max":765.5625,"ha":809,"o":"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},"O":{"x_min":0,"x_max":958,"ha":1057,"o":"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},"n":{"x_min":0,"x_max":615,"ha":724,"o":"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},"l":{"x_min":41,"x_max":166,"ha":279,"o":"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"\xa4":{"x_min":40.09375,"x_max":728.796875,"ha":825,"o":"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},"\u03ba":{"x_min":0,"x_max":632.328125,"ha":679,"o":"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},"p":{"x_min":0,"x_max":685,"ha":786,"o":"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"\u2021":{"x_min":0,"x_max":777,"ha":835,"o":"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},"\u03c8":{"x_min":0,"x_max":808,"ha":907,"o":"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},"\u03b7":{"x_min":0.78125,"x_max":697,"ha":810,"o":"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},"cssFontWeight":"normal","ascender":1189,"underlinePosition":-100,"cssFontStyle":"normal","boundingBox":{"yMin":-334,"xMin":-111,"yMax":1189,"xMax":1672},"resolution":1000,"original_font_information":{"postscript_name":"Helvetiker-Regular","version_string":"Version 1.00 2004 initial release","vendor_url":"http://www.magenta.gr/","full_font_name":"Helvetiker","font_family_name":"Helvetiker","copyright":"Copyright (c) \u039cagenta ltd, 2004","description":"","trademark":"","designer":"","designer_url":"","unique_font_identifier":"\u039cagenta ltd:Helvetiker:22-10-104","license_url":"http://www.ellak.gr/fonts/MgOpen/license.html","license_description":"Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\\r\\n\\r\\nPermission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license (\\"Fonts\\") and associated documentation files (the \\"Font Software\\"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \\r\\n\\r\\nThe above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\\r\\n\\r\\nThe Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word \\"MgOpen\\", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\\r\\n\\r\\nThis License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the \\"MgOpen\\" name.\\r\\n\\r\\nThe Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \\r\\n\\r\\nTHE FONT SOFTWARE IS PROVIDED \\"AS IS\\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.","manufacturer_name":"\u039cagenta ltd","font_sub_family_name":"Regular"},"descender":-334,"familyName":"Helvetiker","lineHeight":1522,"underlineThickness":50}');let Ya=(()=>{class i{constructor(t,n=!0){this.useCameraLight=!0,this.textFont=new jU(Xse),this.labelTextLookCallbacks={},this.getScene(),this.ignoreList=t,this.axis=null,this.setLights(n)}setLights(t=!0){this.useCameraLight=t;const n=new R3(16777215,.6);this.scene.add(n),this.useCameraLight?(this.cameraLight=new Uw(16777215,.45),this.cameraLight.position.set(0,0,10),this.scene.add(this.cameraLight)):[[-100,-50,100],[100,50,-100],[-100,50,-100],[100,-50,100]].forEach(r=>{const s=new Uw(16777215,.2);s.position.set(r[0],r[1],r[2]),this.scene.add(s)})}updateLights(t){this.useCameraLight&&this.cameraLight.position.copy(t.position)}getScene(){return this.scene||(this.scene=new u3),this.scene}getCleanScene(){const t=this.scene.clone(),n=[];return t.traverse(r=>{this.ignoreList.includes(r.type)&&n.push(r)}),t.remove(...n),t}setGeometryOpacity(t,n){n&&t&&t.traverse(r=>{r?.material&&(r.material.transparent=!0,r.material.opacity=n)})}changeObjectColor(t,n){t&&t.traverse(r=>{(r instanceof Ua||r instanceof NA)&&(r.material instanceof Um||r.material instanceof Ah||r.material instanceof eu)&&r.material.color.set(n)})}objectVisibility(t,n){t&&(t.visible=n,t.traverse(r=>{n?(r.layers.enable(0),r.layers.disable(1)):(r.layers.disable(0),r.layers.enable(1))}))}getObjectPosition(t){var n;return null===(n=this.scene.getObjectByName(t))||void 0===n?void 0:n.position}removeGeometry(t){this.getGeometries().remove(t)}removeLabel(t){const n=this.scene.getObjectByName(t);this.getObjectsGroup(i.LABELS_ID).remove(n)}scaleObject(t,n){t.scale.setScalar(n)}addEventDataTypeGroup(t){const n=this.getEventData();let r=this.scene.getObjectByName(t);return r||(r=new Wu),r.name=t,n.add(r),r}collectionFilter(t,n){const r=this.getScene().getObjectByName(i.EVENT_DATA_ID).getObjectByName(t);for(const s of Object.values(r.children))if(s.userData)for(const a of n){const l=s.userData[a.field];if(l){if(!a.cutPassed(l)){s.visible=!1;break}s.visible=!0}}}groupVisibility(t,n,r){const a=(r?this.scene.getObjectByName(r):this.scene).getObjectByName(t);for(const l of Object.values(a.children))l.visible=n}getObjectsGroup(t){let n=this.scene.getObjectByName(t);return null==n&&(n=new Wu,n.name=t,this.scene.add(n)),n}getEventData(){return this.getObjectsGroup(i.EVENT_DATA_ID)}getGeometries(){return this.getObjectsGroup(i.GEOMETRIES_ID)}clearEventData(){const t=this.getEventData();null!=t&&this.scene.remove(t),this.getEventData()}getText(t,n){const r=new Wse(t,{font:this.textFont,size:60,curveSegments:1,height:1});return new Ua(r,new Ah({color:new Ir(n)}))}setAxis(t,n=2e3,r=!0){if(null==this.axis&&(this.axis=new BP(n),this.scene.add(this.axis)),this.axis.visible=t,r&&null==this.axisLabels){this.axisLabels=new Wu;const s=["X","Y","Z"],a=[16711680,65280,255];let l=0;for(const u of s){const d=this.getText(u,new Ir(a[l++]));this.axisLabels.add(d)}this.axisLabels.children[0].position.set(n+20,0,0),this.axisLabels.children[1].position.set(0,n+20,0),this.axisLabels.children[2].position.set(0,0,n+20),this.scene.add(this.axisLabels)}this.axisLabels.visible=t}eventDataDepthTest(t){const n=this.getEventData();null!==n&&n.traverse(r=>{r.material&&(r.renderOrder=t?0:999,r.material.depthTest=t)})}wireframeGeometries(t){this.getGeometries().traverse(r=>{r.material&&(r.material.wireframe=t,t?(r.material.transparent=!0,r.material.opacity=.1):(r.material.transparent=!1,r.material.opacity=1))})}wireframeObjects(t,n){t.traverse(r=>{r.material&&(r.material.wireframe=n)})}scaleJets(t){t<=0||this.scene.getObjectByName("Jets").traverse(r=>{if("Jet"===r.name){const s=r.scale.x;r.scale.setScalar(t),r.position.divideScalar(s).multiplyScalar(t)}})}scaleChildObjects(t,n,r){this.scene.getObjectByName(t).traverse(a=>{0===a.children.length&&(r?a.scale[r]=n:a.scale.setScalar(n))})}addLabelToObject(t,n,r,s,a){this.scene.getObjectByProperty("uuid",n).userData.label=t;const u=this.getObjectsGroup(i.LABELS_ID),d=this.scene.getObjectByName(r);d&&u.remove(d);const A=this.getText(t,new Ir("#a8a8a8"));A.position.fromArray(s.toArray()),A.name=r,u.add(A),a.removeEventListener("change",this.labelTextLookCallbacks[n]),this.labelTextLookCallbacks[n]=()=>{A.lookAt(a.object.position)},this.labelTextLookCallbacks[n](),a.addEventListener("change",this.labelTextLookCallbacks[n])}setEtaPhiGrid(t,n=3e3){if(null==this.grid){this.grid=new Wu;let r=[];const s=n,a=new Ir(255);for(let Le=-3;Le<=3;Le+=1){r.push(new kt(0,0,0));const be=Df.etaPhiToCartesian(s,Le,Math.PI/2),Ye=this.getText("\u03b7="+Le.toPrecision(2),a);Ye.position.set(be.x,be.y,be.z),Ye.rotateOnWorldAxis(new kt(0,1,0),Math.PI/2),this.grid.add(Ye),r.push(be)}const l=(new bo).setFromPoints(r),u=new P3({color:a,dashSize:2,gapSize:1,scale:.01}),d=new NA(l,u);d.computeLineDistances();const A=2*Math.PI/8,y=["-\u03c0","-3\u03c0/4","-\u03c0/2,","-\u03c0/4","0","\u03c0/4","\u03c0/2,","3\u03c0/4"];let C=0;const k=new Ir(16711680);r=[];const Q=.9*s;for(let Le=-Math.PI;Le<Math.PI;Le+=A){r.push(new kt(0,0,0));const be=Df.etaPhiToCartesian(Q,0,Le),Ye=this.getText("\u03c6="+y[C++],k);Ye.position.set(be.x,be.y,be.z),this.grid.add(Ye),r.push(be)}const se=(new bo).setFromPoints(r),he=new P3({color:k,dashSize:1,gapSize:1,scale:.01}),re=new NA(se,he);re.computeLineDistances(),this.grid.add(d),this.grid.add(re),this.scene.add(this.grid)}this.grid.visible=t}getObjectByName(t){return this.scene.getObjectByName(t)}}return i.EVENT_DATA_ID="EventData",i.GEOMETRIES_ID="Geometries",i.LABELS_ID="Labels",i})();class $U extends bo{constructor(){super(),this.type="TracksMesh",this.positions=[],this.previous=[],this.next=[],this.side=[],this.counter=[],this.track_id=[],this.colors=[],this.indices_array=[],this.next_track_id=0}addTrack(e,t){const n=this.next_track_id++,r=new Ir(t);this.previous.push(e[0].x,e[0].y,e[0].z),this.previous.push(e[0].x,e[0].y,e[0].z);for(let a=0;a<e.length;a++){const l=e[a],u=this.positions.length/3;this.positions.push(l.x,l.y,l.z),this.positions.push(l.x,l.y,l.z),this.side.push(1,-1),this.track_id.push(n,n),this.colors.push(r.r,r.g,r.b),this.colors.push(r.r,r.g,r.b),this.counter.push(a/e.length,a/e.length),a<e.length-1?(this.previous.push(l.x,l.y,l.z),this.previous.push(l.x,l.y,l.z),this.indices_array.push(u,u+1,u+2),this.indices_array.push(u+2,u+1,u+3)):a>0&&(this.next.push(l.x,l.y,l.z),this.next.push(l.x,l.y,l.z))}const s=e.length-1;return this.next.push(e[s].x,e[s].y,e[s].z),this.next.push(e[s].x,e[s].y,e[s].z),n}process(){this._attributes&&this._attributes.position.count===this.positions.length?(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.track_id.copyArray(new Int32Array(this.track_id)),this._attributes.track_id.needsUpdate=!0,this._attributes.color.copyArray(new Float32Array(this.colors)),this._attributes.color.needsUpdate=!0,this._attributes.counter.copyArray(new Float32Array(this.counter)),this._attributes.counter.needsUpdate=!0,this._attributes.index.copyArray(new Uint32Array(this.indices_array)),this._attributes.index.needsUpdate=!0):this._attributes={position:new va(new Float32Array(this.positions),3),previous:new va(new Float32Array(this.previous),3),next:new va(new Float32Array(this.next),3),side:new va(new Float32Array(this.side),1),track_id:new va(new Int32Array(this.track_id),1),color:new va(new Float32Array(this.colors),3),counter:new va(new Float32Array(this.counter),1),index:new va(new Uint32Array(this.indices_array),1)},this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("track_id",this._attributes.track_id),this.setAttribute("color",this._attributes.color),this.setAttribute("counter",this._attributes.counter),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}}Aa.tracks_vert=["attribute vec3 previous;","attribute vec3 next;","attribute int track_id;","attribute float side;","attribute vec3 color;","attribute float counter;","varying vec3 v_color;","varying float v_counter;","flat varying int v_track_id;","uniform vec2 resolution;","uniform float lineWidth;","void main() {","  vec2 aspect = vec2(resolution.x / resolution.y, 1.0);","","  v_color = color;","  v_counter = counter;","  v_track_id = track_id;","","  mat4 m = projectionMatrix * modelViewMatrix;","  vec4 finalPosition = m * vec4(position, 1.0);","  vec4 prevPos = m * vec4(previous, 1.0);","  vec4 nextPos = m * vec4(next, 1.0);","","  vec2 curP = finalPosition.xy / finalPosition.w * aspect;","  vec2 prevP = prevPos.xy / prevPos.w * aspect;","  vec2 nextP = nextPos.xy / nextPos.w * aspect;","","  vec2 dir;","  if (curP == prevP) dir = normalize(nextP - curP);","  else if (curP == nextP) dir = normalize(curP - prevP);","  else dir = normalize(curP - prevP);","","  vec2 normal = vec2(-dir.y, dir.x);","  normal.xy *= .5 * lineWidth;","  normal.x /= aspect.x;","  normal.xy *= finalPosition.w * 0.001;","  finalPosition.xy += normal.xy * side;","  gl_Position = finalPosition;","}"].join("\n"),Aa.tracks_frag=["uniform float progress;","varying vec3 v_color;","varying float v_counter;","flat varying int v_track_id;","void main() {","  if (v_counter > progress) discard;","  gl_FragColor = vec4(v_color, 1.0);","}"].join("\n");class Kse extends yd{constructor(e){super({uniforms:Object.assign({},{lineWidth:{value:1},resolution:{value:new qi(1,1)},progress:{value:1}}),vertexShader:Aa.tracks_vert,fragmentShader:Aa.tracks_vert}),this.isTracksMaterial=!0,this.type="TracksMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(t){this.uniforms.lineWidth.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},progress:{enumerable:!0,get:function(){return this.uniforms.progress.value},set:function(t){this.uniforms.progress.value=t}}}),this.setValues(e)}}class Yse{constructor(e,t,n){this.scene=e,this.activeCamera=t,this.rendererManager=n,this.animateEvent=this.animateEvent.bind(this),this.animateEventWithClipping=this.animateEventWithClipping.bind(this)}getCameraTween(e,t=1e3,n){const r=new Cf(this.activeCamera.position).to({x:e[0],y:e[1],z:e[2]},t);return n&&r.easing(n),r}animateThroughEvent(e,t,n){const r=this.getCameraTween(e,1e3,Im.Cubic.Out),a=this.getCameraTween([0,0,e[2]],t),A=3*Math.PI/24,y=[];for(let be=1;be<=24;be++)y.push([500*Math.sin(A*be),0,500*Math.cos(A*be)]);const C=this.getCameraTween([0,0,500],t,Im.Cubic.Out);let k=C;const se=4*t/24;for(const be of y){const Ye=this.getCameraTween(be,se);k.chain(Ye),k=Ye}const re=this.getCameraTween([0,0,-e[2]],t,Im.Cubic.In),Le=this.getCameraTween(e,t,Im.Cubic.Out);Le.onComplete(()=>n?.()),Le.delay(500),r.chain(a),a.chain(C),k.chain(re),re.chain(Le),r.start()}animateEvent(e,t,n){const r=.25*e;e*=.75;const s=this.scene.getObjectByName(Ya.EVENT_DATA_ID),a=new OA(new kt,0),l=[],u=[];s.traverse(C=>{var k,Q,se;if(C.geometry)if("Track"===C.name||"LineHit"===C.name){let he=null===(se=null===(Q=null===(k=C.geometry)||void 0===k?void 0:k.attributes)||void 0===Q?void 0:Q.position)||void 0===se?void 0:se.count;if(he)if(C.geometry instanceof sb&&(he*=6),C.geometry instanceof $U){C.material.progress=0;const re=new Cf(C.material).to({progress:1},e);re.onComplete(()=>{C.material.progress=1}),u.push(re)}else if(C.geometry instanceof bo){const re=C.geometry.drawRange.count;C.geometry.setDrawRange(0,0);const Le=new Cf(C.geometry.drawRange).to({count:he},e);Le.onComplete(()=>{C.geometry.drawRange.count=re}),u.push(Le)}}else if("Jet"===C.name){const he=new Cf({x:.01,y:.01,z:.01}).to({x:C.scale.x,y:C.scale.y,z:C.scale.z},e);he.onUpdate(re=>{const Le=C.scale.x;C.scale.setScalar(re.x),C.position.divideScalar(Le).multiplyScalar(re.x)}),u.push(he)}else{let re=C.position.equals(new kt(0,0,0))?C.geometry.boundingSphere.center:C.position;"Hit"===C.name?(re=Array.from(C.geometry.attributes.position.array),C.geometry.deleteAttribute("position"),C.geometry.computeBoundingSphere()):C.visible=!1,l.push({eventObject:C,position:re})}});const d=new Cf(a).to({radius:3e3},e),A=C=>{l.forEach(k=>{if("Hit"===k.eventObject.name){const Q=k.eventObject.geometry,he=this.getHitsPositions(k.position).filter(re=>C.containsPoint((new kt).fromArray(re)));he.length>0&&(Q.setAttribute("position",new va(new Float32Array([].concat(...he)),3)),Q.computeBoundingSphere())}else C.containsPoint(k.position)&&(k.eventObject.visible=!0)})};d.onUpdate(A);const y=new Cf(a).to({radius:1e4},r);y.onUpdate(A),d.chain(y),u.push(d),u[0].onStart(()=>n?.());for(const C of u)C.easing(Im.Quartic.Out).start();y.onComplete(()=>{A(new OA(new kt,1/0)),t?.()})}animateEventWithClipping(e,t,n,r=11e3){const s=this.scene.getObjectByName(Ya.EVENT_DATA_ID),a=new hy(1,8,8),l=[],u=a.attributes.position,d=new kt;for(let C=0;C<u.count;C++)d.fromBufferAttribute(u,C),l.push(new Nm(d.clone(),0));const A=this.rendererManager.getMainRenderer().localClippingEnabled;A||this.rendererManager.setLocalClippingEnabled(!0),s.traverse(C=>{C.geometry&&C.material&&(C.material.clippingPlanes=l)});const y=[];for(const C of l){C.constant=0;const k=new Cf(C).to({constant:r},e);y.push(k)}y[0].onStart(()=>n?.());for(const C of y)C.start();y[y.length-1].onComplete(()=>{A||(this.rendererManager.getMainRenderer().localClippingEnabled=A),s.traverse(C=>{C.geometry&&C.material&&(C.material.clippingPlanes=null)}),t?.()})}collideParticles(e,t=10,n=5e3,r=new Ir(16777215),s){const a=new hy(t,32,32),l=new Ah({color:r,transparent:!0,opacity:0}),u=new Ua(a,l),d=u.clone();u.position.setZ(n),d.position.setZ(-n);const A=[u,d];this.scene.add(...A);const y=[];for(const C of A){new Cf(C.material).to({opacity:1},300).start();const k=new Cf(C.position).to({z:0},e).start();y.push(k)}y[0].onComplete(()=>{this.scene.remove(...A),s?.()})}animateWithCollision(e,t,n){var r,s;const a=this.scene.getObjectByName(Ya.EVENT_DATA_ID),l=a.getObjectByName("Track");let u;u=l instanceof Wu?null===(s=null===(r=l.children[0])||void 0===r?void 0:r.material)||void 0===s?void 0:s.color:l?.material.color,a&&(a.visible=!1),this.collideParticles(1500,30,5e3,u,()=>{e(t,n,()=>{a&&(a.visible=!0)})})}animateEventWithCollision(e,t){this.animateWithCollision(this.animateEvent,e,t)}animateClippingWithCollision(e,t){this.animateWithCollision(this.animateEventWithClipping,e,t)}getHitsPositions(e){const t=[];for(let n=0;n<e.length;n+=3)t.push(e.slice(n,n+3));return t}animatePreset(e,t){var n;const{positions:r,animateEventAfterInterval:s,collisionDuration:a}=e;s&&a&&(this.scene.getObjectByName(Ya.EVENT_DATA_ID).visible=!1,setTimeout(()=>{this.animateEventWithCollision(a)},s));const l=this.getCameraTween(r[0].position,null!==(n=r[0].duration)&&void 0!==n?n:2e3,r[0].easing);let u=l;r.slice(1).forEach(({position:d,duration:A,easing:y})=>{const C=this.getCameraTween(d,A??2e3,y);u.chain(C),u=C}),u.onComplete(t),l.start()}}const XU={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class yC{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const Zse=new ww(-1,1,1,-1,0,1),QP=new bo;QP.setAttribute("position",new Fs([-1,3,0,-1,-1,0,3,-1,0],3)),QP.setAttribute("uv",new Fs([0,2,0,0,2,0],2));class KU{constructor(e){this._mesh=new Ua(QP,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Zse)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class Jse extends yC{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof yd?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=I5.clone(e.uniforms),this.material=new yd({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new KU(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class YU extends yC{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),s=e.state;let a,l;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0),this.inverse?(a=0,l=1):(a=1,l=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),s.buffers.stencil.setFunc(r.ALWAYS,a,4294967295),s.buffers.stencil.setClear(l),s.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(r.EQUAL,1,4294967295),s.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),s.buffers.stencil.setLocked(!0)}}class eoe extends yC{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class toe{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===t){const n=e.getSize(new qi);this._width=n.width,this._height=n.height,(t=new Sf(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new Jse(XU),this.clock=new lU}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let r=0,s=this.passes.length;r<s;r++){const a=this.passes[r];if(!1!==a.enabled){if(a.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),a.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),a.needsSwap){if(n){const l=this.renderer.getContext(),u=this.renderer.state.buffers.stencil;u.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),u.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==YU&&(a instanceof YU?n=!0:a instanceof eoe&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new qi);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class noe extends yC{constructor(e,t,n,r,s){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==s?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new Ir}render(e,t,n){const r=e.autoClear;let s,a;e.autoClear=!1,void 0!==this.overrideMaterial&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,s),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=a),e.autoClear=r}}class gy extends yC{constructor(e,t,n,r){super(),this.renderScene=t,this.renderCamera=n,this.selectedObjects=void 0!==r?r:[],this.visibleEdgeColor=new Ir(1,1,1),this.hiddenEdgeColor=new Ir(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==e?new qi(e.x,e.y):new qi(256,256);const s=Math.round(this.resolution.x/this.downSampleRatio),a=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Sf(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new z5,this.depthMaterial.side=zd,this.depthMaterial.depthPacking=lN,this.depthMaterial.blending=Zg,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=zd,this.prepareMaskMaterial.fragmentShader=function A(y,C){return y.replace(/DEPTH_TO_VIEW_Z/g,(C.isPerspectiveCamera?"perspective":"orthographic")+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Sf(this.resolution.x,this.resolution.y),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Sf(s,a),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Sf(s,a),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Sf(Math.round(s/2),Math.round(a/2)),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Sf(s,a),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Sf(Math.round(s/2),Math.round(a/2)),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1,this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(s,a),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(s/2),Math.round(a/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial();const d=XU;this.copyUniforms=I5.clone(d.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new yd({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:Zg,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new Ir,this.oldClearAlpha=1,this.fsQuad=new KU(null),this.tempPulseColor1=new Ir,this.tempPulseColor2=new Ir,this.textureMatrix=new ea}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let n=Math.round(e/this.downSampleRatio),r=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(n,r),this.renderTargetBlurBuffer1.setSize(n,r),this.renderTargetEdgeBuffer1.setSize(n,r),this.separableBlurMaterial1.uniforms.texSize.value.set(n,r),n=Math.round(n/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(n,r),this.renderTargetEdgeBuffer2.setSize(n,r),this.separableBlurMaterial2.uniforms.texSize.value.set(n,r)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function n(r){r.isMesh&&(!0===e?r.visible=t.get(r):(t.set(r,r.visible),r.visible=e))}for(let r=0;r<this.selectedObjects.length;r++)this.selectedObjects[r].traverse(n)}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,n=[];function r(a){a.isMesh&&n.push(a)}for(let a=0;a<this.selectedObjects.length;a++)this.selectedObjects[a].traverse(r);this.renderScene.traverse(function s(a){if(a.isMesh||a.isSprite){let l=!1;for(let u=0;u<n.length;u++)if(n[u].id===a.id){l=!0;break}if(!1===l){const u=a.visible;(!1===e||!0===t.get(a))&&(a.visible=e),t.set(a,u)}}else(a.isPoints||a.isLine)&&(!0===e?a.visible=t.get(a):(t.set(a,a.visible),a.visible=e))})}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,n,r,s){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const a=e.autoClear;e.autoClear=!1,s&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const l=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=l,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const u=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(u),this.tempPulseColor2.multiplyScalar(u)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=gy.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=gy.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=gy.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=gy.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,s&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(n),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=a}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=n.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new yd({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new qi(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\n\t\t\t\t\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t\t\t\t\t#ifdef USE_INSTANCING\n\n\t\t\t\t\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t\t\t\t\t#endif\n\t\t\t\t\t\n\t\t\t\t\tworldPosition = modelMatrix * worldPosition;\n\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new yd({uniforms:{maskTexture:{value:null},texSize:{value:new qi(.5,.5)},visibleEdgeColor:{value:new kt(1,1,1)},hiddenEdgeColor:{value:new kt(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(e){return new yd({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new qi(.5,.5)},direction:{value:new qi(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new yd({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:YI,depthTest:!1,depthWrite:!1,transparent:!0})}}gy.BlurDirectionX=new qi(1,0),gy.BlurDirectionY=new qi(0,1);class ioe{constructor(e,t,n){this.antialiasing=!0,this.composer=new toe(n),this.camera=e,this.scene=t,this.defaultRenderPass=new noe(this.scene,this.camera),this.composer.addPass(this.defaultRenderPass),this.render=this.antialiasing?this.antialiasRender:this.effectsRender}effectsRender(e,t){this.composer&&(this.defaultRenderPass.camera=t,this.defaultRenderPass.scene=e,this.composer.render())}antialiasRender(e,t){this.composer.renderer.render(e,t)}addOutlinePassForSelection(){const e=new gy(new qi(window.innerWidth,window.innerHeight),this.scene,this.camera);return e.overlayMaterial.blending=Nv,e.visibleEdgeColor.set(16777062),e.visibleEdgeColor.set(14635824),this.composer.addPass(e),e}removePass(e){const t=this.composer.passes.indexOf(e);this.composer.passes.splice(t,1)}setAntialiasing(e){this.antialiasing=e,this.render=this.antialiasing?this.antialiasRender:this.effectsRender}}class zm{constructor(){return this.clippingEnabled=new Hw(!1),this.startClippingAngle=new Hw(0),this.openingClippingAngle=new Hw(0),this.eventMetadata={runNumber:"000",eventNumber:"000"},void 0===zm.instance&&(zm.instance=this),zm.instance}static getInstance(){return zm.instance}setPhoenixMenuRoot(e){this.phoenixMenuRoot=e,this.phoenixMenuRoot&&this.phoenixMenuRoot.addConfig("button",{label:"Save state",onClick:()=>{this.saveStateAsJSON()}}).addConfig("button",{label:"Load state",onClick:()=>{FU(t=>{this.loadStateFromJSON(JSON.parse(t))})}})}saveStateAsJSON(){const e={phoenixMenu:this.phoenixMenuRoot.getNodeState(),eventDisplay:{cameraPosition:this.activeCamera.position.toArray(),startClippingAngle:this.clippingEnabled.value?this.startClippingAngle.value:null,openingClippingAngle:this.clippingEnabled.value?this.openingClippingAngle.value:null}};V3(JSON.stringify(e),`run${this.eventMetadata.runNumber}_evt${this.eventMetadata.eventNumber}.json`)}loadStateFromJSON(e){var t,n,r;const s="string"==typeof e?JSON.parse(e):e;if(s.phoenixMenu&&this.phoenixMenuRoot&&(this.phoenixMenuRoot.loadStateFromJSON(s.phoenixMenu),this.phoenixMenuRoot.configActive=!1),s.eventDisplay){this.activeCamera.position.fromArray(null===(t=s.eventDisplay)||void 0===t?void 0:t.cameraPosition);const a=null===(n=s.eventDisplay)||void 0===n?void 0:n.startClippingAngle,l=null===(r=s.eventDisplay)||void 0===r?void 0:r.openingClippingAngle;(a||l)&&(this.setClippingEnabled(!0),this.eventDisplay.getUIManager().setClipping(!0),a&&this.eventDisplay.getUIManager().rotateStartAngleClipping(s.eventDisplay.startClippingAngle),l&&this.eventDisplay.getUIManager().rotateOpeningAngleClipping(s.eventDisplay.openingClippingAngle))}}setClippingEnabled(e){this.clippingEnabled.update(e)}setStartClippingAngle(e){this.startClippingAngle.update(e)}getStartClippingAngle(){return this.startClippingAngle.value}setOpeningClippingAngle(e){this.openingClippingAngle.update(e)}getOpeningClippingAngle(){return this.openingClippingAngle.value}setCamera(e){this.activeCamera=e}setEventDisplay(e){this.eventDisplay=e}}class pb{constructor(){return this.toLoad=[],this.loaded=[],this.onLoadCallbacks=[],this.onProgressCallbacks=[],this.progressItems={},void 0===pb.instance&&(pb.instance=this),pb.instance}addLoadableItem(e=""){this.toLoad.push(e),this.progressItems[e]=0}itemLoaded(e=""){this.loaded.push(e),this.onProgress(e,100),this.toLoad.length===this.loaded.length&&this.toLoad.sort().join(",")===this.loaded.sort().join(",")&&(this.onLoadCallbacks.forEach(t=>t()),this.reset())}onProgress(e,t){this.progressItems[e]=t;const s=Object.values(this.progressItems).reduce((a,l)=>a+l,0)/Object.keys(this.progressItems).length;for(const a of this.onProgressCallbacks)a(s)}addLoadListener(e){this.onLoadCallbacks.push(e)}addLoadListenerWithCheck(e){this.toLoad.length>0&&this.toLoad.length!==this.loaded.length?this.onLoadCallbacks.push(e):e()}addProgressListener(e){this.onProgressCallbacks.push(e)}reset(){this.toLoad=[],this.loaded=[],this.onLoadCallbacks=[],this.onProgressCallbacks=[],this.progressItems={}}}class roe{constructor(e){this.sceneManager=e}colorObjectsByProperty(e,t,n){this.sceneManager.getScene().getObjectByName(t).traverse(s=>{var a;null!==(a=s.material)&&void 0!==a&&a.color&&n(s.userData)&&s.material.color.set(e)})}collectionColor(e,t){const n=this.sceneManager.getScene().getObjectByName(Ya.EVENT_DATA_ID).getObjectByName(e);for(const r of Object.values(n.children))r.traverse(s=>{var a,l;null===(l=null===(a=s.material)||void 0===a?void 0:a.color)||void 0===l||l.set(t)})}collectionColorRandom(e){const t=this.sceneManager.getScene().getObjectByName(Ya.EVENT_DATA_ID).getObjectByName(e);for(const n of Object.values(t.children))n.traverse(r=>{var s,a;null===(a=null===(s=r.material)||void 0===s?void 0:s.color)||void 0===a||a.set(16777215*Math.random())})}colorTracksByVertex(e){const t=this.sceneManager.getScene();t.getObjectByName("Vertices").traverse(r=>{const{linkedTrackCollection:s,linkedTracks:a}=r.userData;if("Vertex"===r.name&&s===e&&a){const l=r.material.color,u=t.getObjectByName(s);a.forEach(d=>{u.children[d].traverse(A=>{var y,C;null===(C=null===(y=A?.material)||void 0===y?void 0:y.color)||void 0===C||C.set(l)})})}})}}var Bf=(()=>(function(i){i.VR="VR",i.AR="AR"}(Bf||(Bf={})),Bf))();class ZU{constructor(e){this.sessionType=e,this.xrActive=!1,this.currentXRSession=null}setXRSession(e,t,n){var r;this.renderer=e,this.onSessionEnded=n;const s=navigator?.xr,a=this.sessionType===Bf.VR?"vr":"ar";s?.requestSession(`immersive-${a}`,null===(r=this.sessionInit)||void 0===r?void 0:r.call(this)).then(l=>{this.onXRSessionStarted.bind(this)(l),t?.()}).catch(l=>{console.error(`${a.toUpperCase()} Error:`,l)})}onXRSessionStarted(e){return function(i,e,t,n){return new(t||(t=Promise))(function(s,a){function l(A){try{d(n.next(A))}catch(y){a(y)}}function u(A){try{d(n.throw(A))}catch(y){a(y)}}function d(A){A.done?s(A.value):function r(s){return s instanceof t?s:new t(function(a){a(s)})}(A.value).then(l,u)}d((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){this.xrActive=!0,e.addEventListener("end",this.onXRSessionEnded.bind(this)),yield this.renderer.xr.setSession(e),this.currentXRSession=e})}onXRSessionEnded(){var e;this.xrActive=!1,this.currentXRSession.removeEventListener("end",this.onXRSessionEnded),this.currentXRSession=null,this.cameraGroup=void 0,null===(e=this.onSessionEnded)||void 0===e||e.call(this)}endXRSession(){var e;null===(e=this.currentXRSession)||void 0===e||e.end()}getCameraGroup(e){if(this.cameraGroup||(this.cameraGroup=new Wu),e&&this.xrActive){this.xrCamera=this.renderer.xr.getCamera().copy(new h7([e.clone()])),this.xrCamera.name="XR_CAMERA";const t=this.sessionType===Bf.VR?this.xrCamera.position:new kt(0,0,.1);this.cameraGroup.position.copy(t),this.cameraGroup.add(this.xrCamera)}return this.cameraGroup}getXRCamera(){return this.xrCamera}}const cu={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};function JU(i){return WP.apply(this,arguments)}function WP(){return WP=(0,Hp.Z)(function*(i){const e=yield fetch(i);if(e.ok)return e.json();throw new Error(e.statusText)}),WP.apply(this,arguments)}function jP(){return jP=(0,Hp.Z)(function*(i){if(!i)throw new Error("No basePath supplied");return yield JU(`${i}/profilesList.json`)}),jP.apply(this,arguments)}function $P(){return $P=(0,Hp.Z)(function*(i,e,t=null,n=!0){if(!i)throw new Error("No xrInputSource supplied");if(!e)throw new Error("No basePath supplied");const r=yield function ooe(i){return jP.apply(this,arguments)}(e);let s;if(i.profiles.some(u=>{const d=r[u];return d&&(s={profileId:u,profilePath:`${e}/${d.path}`,deprecated:!!d.deprecated}),!!s}),!s){if(!t)throw new Error("No matching profile name found");const u=r[t];if(!u)throw new Error(`No matching profile name found and default profile "${t}" missing.`);s={profileId:t,profilePath:`${e}/${u.path}`,deprecated:!!u.deprecated}}const a=yield JU(s.profilePath);let l;if(n){let u;if(u="any"===i.handedness?a.layouts[Object.keys(a.layouts)[0]]:a.layouts[i.handedness],!u)throw new Error(`No matching handedness, ${i.handedness}, in profile ${s.profileId}`);u.assetPath&&(l=s.profilePath.replace("profile.json",u.assetPath))}return{profile:a,assetPath:l}}),$P.apply(this,arguments)}const loe={xAxis:0,yAxis:0,button:0,state:cu.ComponentState.DEFAULT};class uoe{constructor(e){this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===cu.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(loe)}updateFromComponent({xAxis:e,yAxis:t,button:n,state:r}){const{normalizedXAxis:s,normalizedYAxis:a}=function coe(i=0,e=0){let t=i,n=e;if(Math.sqrt(i*i+e*e)>1){const a=Math.atan2(e,i);t=Math.cos(a),n=Math.sin(a)}return{normalizedXAxis:.5*t+.5,normalizedYAxis:.5*n+.5}}(e,t);switch(this.componentProperty){case cu.ComponentProperty.X_AXIS:this.value=this.states.includes(r)?s:.5;break;case cu.ComponentProperty.Y_AXIS:this.value=this.states.includes(r)?a:.5;break;case cu.ComponentProperty.BUTTON:this.value=this.states.includes(r)?n:0;break;case cu.ComponentProperty.STATE:this.value=this.valueNodeProperty===cu.VisualResponseProperty.VISIBILITY?this.states.includes(r):this.states.includes(r)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class hoe{constructor(e,t){if(!(e&&t&&t.visualResponses&&t.gamepadIndices&&0!==Object.keys(t.gamepadIndices).length))throw new Error("Invalid arguments supplied");this.id=e,this.type=t.type,this.rootNodeName=t.rootNodeName,this.touchPointNodeName=t.touchPointNodeName,this.visualResponses={},Object.keys(t.visualResponses).forEach(n=>{const r=new uoe(t.visualResponses[n]);this.visualResponses[n]=r}),this.gamepadIndices=Object.assign({},t.gamepadIndices),this.values={state:cu.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(e){if(this.values.state=cu.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&e.buttons.length>this.gamepadIndices.button){const t=e.buttons[this.gamepadIndices.button];this.values.button=t.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,t.pressed||1===this.values.button?this.values.state=cu.ComponentState.PRESSED:(t.touched||this.values.button>cu.ButtonTouchThreshold)&&(this.values.state=cu.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===cu.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>cu.AxisTouchThreshold&&(this.values.state=cu.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===cu.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>cu.AxisTouchThreshold&&(this.values.state=cu.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(t=>{t.updateFromComponent(this.values)})}}class doe{constructor(e,t,n){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No profile supplied");this.xrInputSource=e,this.assetUrl=n,this.id=t.profileId,this.layoutDescription=t.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(r=>{this.components[r]=new hoe(r,this.layoutDescription.components[r])}),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach(t=>{e.push(t.data)}),e}updateFromGamepad(){Object.values(this.components).forEach(e=>{e.updateFromGamepad(this.xrInputSource.gamepad)})}}class Aoe extends Tc{constructor(){super(),this.motionController=null,this.envMap=null}setEnvironmentMap(e){return this.envMap==e||(this.envMap=e,this.traverse(t=>{t.isMesh&&(t.material.envMap=this.envMap,t.material.needsUpdate=!0)})),this}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(t=>{Object.values(t.visualResponses).forEach(n=>{const{valueNode:r,minNode:s,maxNode:a,value:l,valueNodeProperty:u}=n;r&&(u===cu.VisualResponseProperty.VISIBILITY?r.visible=l:u===cu.VisualResponseProperty.TRANSFORM&&(r.quaternion.slerpQuaternions(s.quaternion,a.quaternion,l),r.position.lerpVectors(s.position,a.position,l)))})}))}}function e9(i,e){(function moe(i,e){Object.values(i.components).forEach(t=>{const{type:n,touchPointNodeName:r,visualResponses:s}=t;if(n===cu.ComponentType.TOUCHPAD)if(t.touchPointNode=e.getObjectByName(r),t.touchPointNode){const a=new hy(.001),l=new Ah({color:255}),u=new Ua(a,l);t.touchPointNode.add(u)}else console.warn(`Could not find touch dot, ${t.touchPointNodeName}, in touchpad component ${t.id}`);Object.values(s).forEach(a=>{const{valueNodeName:l,minNodeName:u,maxNodeName:d,valueNodeProperty:A}=a;if(A===cu.VisualResponseProperty.TRANSFORM){if(a.minNode=e.getObjectByName(u),a.maxNode=e.getObjectByName(d),!a.minNode)return void console.warn(`Could not find ${u} in the model`);if(!a.maxNode)return void console.warn(`Could not find ${d} in the model`)}a.valueNode=e.getObjectByName(l),a.valueNode||console.warn(`Could not find ${l} in the model`)})})})(i.motionController,e),i.envMap&&e.traverse(t=>{t.isMesh&&(t.material.envMap=i.envMap,t.material.needsUpdate=!0)}),i.add(e)}class goe{constructor(e=null){this.gltfLoader=e,this.path="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",this._assetCache={},this.gltfLoader||(this.gltfLoader=new q3)}createControllerModel(e){const t=new Aoe;let n=null;return e.addEventListener("connected",r=>{const s=r.data;"tracked-pointer"!==s.targetRayMode||!s.gamepad||function aoe(i,e){return $P.apply(this,arguments)}(s,this.path,"generic-trigger").then(({profile:a,assetPath:l})=>{t.motionController=new doe(s,a,l);const u=this._assetCache[t.motionController.assetUrl];if(u)n=u.scene.clone(),e9(t,n);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(t.motionController.assetUrl,d=>{this._assetCache[t.motionController.assetUrl]=d,n=d.scene.clone(),e9(t,n)},null,()=>{throw new Error(`Asset ${t.motionController.assetUrl} missing or malformed.`)})}}).catch(a=>{console.warn(a)})}),e.addEventListener("disconnected",()=>{t.motionController=null,t.remove(n),n=null}),t}}let t9=(()=>{class i extends ZU{constructor(){super(Bf.VR),this.sessionInit=()=>({optionalFeatures:["local-floor","bounded-floor","hand-tracking"]})}setXRSession(t,n,r){super.setXRSession(t,n,r),this.setupVRControls()}onXRSessionEnded(){var t,n;super.onXRSessionEnded(),null===(t=this.controller1)||void 0===t||t.removeEventListener("selectstart",this.onControllerSelectStart),null===(n=this.controller1)||void 0===n||n.removeEventListener("selectend",this.onControllerSelectEnd)}setupVRControls(){this.controller1=this.renderer.xr.getController(0),this.getCameraGroup().add(this.controller1),this.controller2=this.renderer.xr.getController(1),this.getCameraGroup().add(this.controller2);const t=new goe;this.controllerGrip1=this.renderer.xr.getControllerGrip(0),this.controllerGrip1.add(t.createControllerModel(this.controllerGrip1)),this.getCameraGroup().add(this.controllerGrip1),this.controllerGrip2=this.renderer.xr.getControllerGrip(1),this.controllerGrip2.add(t.createControllerModel(this.controllerGrip2)),this.getCameraGroup().add(this.controllerGrip2);const n=(new bo).setFromPoints([new kt(0,0,0),new kt(0,0,-1)]),r=new r0(n);r.name="line",r.scale.z=50,this.controller1.add(r.clone()),this.controller2.add(r.clone());const a=new kt;let l;this.onControllerSelectStart=()=>{console.log("Select: c1 position "+this.controller1.position.toArray().join(", ")),console.log("Select: CG position "+this.cameraGroup.position.toArray().join(", ")),l=setInterval(()=>{this.moveInDirection(a,30)},20)},this.onControllerSelectEnd=()=>{clearInterval(l)},this.controller1.addEventListener("selectstart",this.onControllerSelectStart),this.controller1.addEventListener("selectend",this.onControllerSelectEnd)}moveInDirection(t,n){var r;null===(r=this.xrCamera)||void 0===r||r.getWorldDirection(t),this.cameraGroup.position.addScaledVector(t,n),this.xrCamera.position.addScaledVector(t,n)}}return i.SESSION_TYPE="immersive-vr",i})();let XP=(()=>{class i extends ZU{constructor(t,n){super(Bf.AR),this.scene=t,this.camera=n,this.previousValues={sceneScale:1,cameraNear:10},this.previousValues.sceneScale=t.scale.x,this.previousValues.cameraNear=n.near,this.sessionInit=()=>i.enableDomOverlay?{optionalFeatures:["dom-overlay"],domOverlay:{root:document.body}}:{}}onXRSessionStarted(t){const n=Object.create(null,{onXRSessionStarted:{get:()=>super.onXRSessionStarted}});return function(i,e,t,n){return new(t||(t=Promise))(function(s,a){function l(A){try{d(n.next(A))}catch(y){a(y)}}function u(A){try{d(n.throw(A))}catch(y){a(y)}}function d(A){A.done?s(A.value):function r(s){return s instanceof t?s:new t(function(a){a(s)})}(A.value).then(l,u)}d((n=n.apply(i,e||[])).next())})}(this,void 0,void 0,function*(){document.body.style.setProperty("background-color","transparent"),this.previousValues.sceneScale=this.scene.scale.x,this.previousValues.cameraNear=this.camera.near,this.scaleScene(1e-5),this.camera.near=.01,this.renderer.xr.setReferenceSpaceType("local"),yield n.onXRSessionStarted.call(this,t)})}onXRSessionEnded(){document.body.style.removeProperty("background-color"),this.scaleScene(this.previousValues.sceneScale),this.camera.near=this.previousValues.cameraNear,super.onXRSessionEnded()}scaleScene(t){[Ya.EVENT_DATA_ID,Ya.GEOMETRIES_ID,Ya.LABELS_ID].forEach(n=>{var r;null===(r=this.scene.getObjectByName(n))||void 0===r||r.scale.setScalar(t)})}}return i.SESSION_TYPE="immersive-ar",i.enableDomOverlay=!0,i})();var vC=function(i,e,t,n){return new(t||(t=Promise))(function(s,a){function l(A){try{d(n.next(A))}catch(y){a(y)}}function u(A){try{d(n.throw(A))}catch(y){a(y)}}function d(A){A.done?s(A.value):function r(s){return s instanceof t?s:new t(function(a){a(s)})}(A.value).then(l,u)}d((n=n.apply(i,e||[])).next())})};!function(){const i=Tc.prototype.updateMatrixWorld;Tc.prototype.updateMatrixWorld=function(){this.visible&&i.apply(this)}}();class yoe{constructor(e){this.infoLogger=e,this.ignoreList=[(new R3).type,(new Uw).type,(new BP).type],this.saveBlob=function(){const t=document.createElement("a");return document.body.appendChild(t),t.style.display="none",function(r,s){const a=window.URL.createObjectURL(r);t.href=a,t.download=s,t.click()}}(),this.rendererManager=new Nre,this.loadingManager=new pb}init(e){this.clipPlanes=[new Nm(new kt(0,1,0),0),new Nm(new kt(0,-1,0),0)],this.sceneManager=new Ya(this.ignoreList),this.exportManager=new sse,this.importManager=new qse(this.clipPlanes,Ya.EVENT_DATA_ID,Ya.GEOMETRIES_ID),this.rendererManager.init(e.elementId),this.controlsManager=new Lre(this.rendererManager,e.defaultView),this.controlsManager.hideTubeTracksOnZoom(this.sceneManager.getScene(),200),this.effectsManager=new ioe(this.controlsManager.getMainCamera(),this.sceneManager.getScene(),this.rendererManager.getMainRenderer()),this.animationsManager=new Yse(this.sceneManager.getScene(),this.controlsManager.getActiveCamera(),this.rendererManager),this.vrManager=new t9,this.arManager=new XP(this.sceneManager.getScene(),this.controlsManager.getMainCamera()),this.colorManager=new roe(this.sceneManager),this.getSelectionManager().init(this.controlsManager.getMainCamera(),this.sceneManager.getScene(),this.effectsManager,this.infoLogger),(new zm).setCamera(this.controlsManager.getActiveCamera())}updateControls(){this.controlsManager.getActiveControls().update(),this.controlsManager.updateSync(),S6()}setAnimationLoop(e){this.uiLoop=e,this.animationLoop=()=>{this.uiLoop(),this.updateControls(),this.render()},this.rendererManager.getMainRenderer().setAnimationLoop(this.animationLoop)}stopAnimationLoop(){this.rendererManager.getMainRenderer().setAnimationLoop(null)}render(){this.rendererManager.render(this.sceneManager.getScene(),this.controlsManager.getOverlayCamera()),this.effectsManager.render(this.sceneManager.getScene(),this.controlsManager.getMainCamera()),this.sceneManager.updateLights(this.controlsManager.getActiveCamera())}xrRender(e){this.uiLoop(),this.rendererManager.getMainRenderer().render(this.sceneManager.getScene(),e.getXRCamera()),this.sceneManager.updateLights(e.getXRCamera())}getSceneManager(){return this.sceneManager||(this.sceneManager=new Ya(this.ignoreList)),this.sceneManager}autoRotate(e){this.controlsManager.getActiveControls().autoRotate=e}setClipping(e){this.rendererManager.setLocalClippingEnabled(e)}setClippingAngle(e,t){const n=new Uc;n.setFromAxisAngle(new kt(0,0,1),e*Math.PI/180),this.clipPlanes[0].normal.set(0,-1,0).applyQuaternion(n);const r=new Uc;r.setFromAxisAngle(new kt(0,0,1),(e+t)*Math.PI/180),this.clipPlanes[1].normal.set(0,1,0).applyQuaternion(r),(this.clipIntersection&&t>180||!this.clipIntersection&&t<180)&&(this.clipIntersection=t<180,this.sceneManager.getGeometries().traverse(a=>{a instanceof Ua&&a.material instanceof Jc&&(a.material.clipIntersection=this.clipIntersection)}))}animateCameraTransform(e,t,n){this.animateCameraPosition(e,n),this.animateCameraTarget(t,n)}swapCameras(e){let t;t=e?"OrthographicCamera":"PerspectiveCamera",this.controlsManager.getMainCamera().type!==t&&this.controlsManager.swapControls()}loadOBJGeometry(e,t,n,r,s=!0,a=!0){return vC(this,void 0,void 0,function*(){const l=this.sceneManager.getGeometries(),u=yield this.importManager.loadOBJGeometry(e,t,n,r,a),{object:d}=u;return d.visible=s,l.add(d),u})}loadGLTFGeometry(e,t,n,r,s){return vC(this,void 0,void 0,function*(){const a=this.sceneManager.getGeometries(),l=yield this.importManager.loadGLTFGeometry(e,t,n,r,s);for(const{object:u}of l)a.add(u),this.infoLogger.add(t,"Loaded GLTF scene");return l})}parseOBJGeometry(e,t,n=!0){const r=this.sceneManager.getGeometries(),s=this.importManager.parseOBJGeometry(e,t);return s.visible=n,r.add(s),{object:s}}parseGLTFGeometry(e,t){return vC(this,void 0,void 0,function*(){const n=yield this.importManager.parseGLTFGeometry(e,t);for(const{object:r}of n)this.sceneManager.getGeometries().add(r),this.infoLogger.add(t,"Parsed GLTF geometry");return n})}parsePhnxScene(e){return vC(this,void 0,void 0,function*(){yield this.importManager.parsePhnxScene(e,(n,r)=>{this.sceneManager.getScene().add(n),this.sceneManager.getScene().add(r)})})}loadJSONGeometry(e,t,n,r,s=!0){return vC(this,void 0,void 0,function*(){const a=this.sceneManager.getGeometries(),{object:l}=yield this.importManager.loadJSONGeometry(e,t,n,r);return l.visible=s,a.add(l),{object:l}})}exportSceneToOBJ(){const e=this.sceneManager.getCleanScene();this.exportManager.exportSceneToOBJ(e)}exportPhoenixScene(){const e=this.sceneManager.getCleanScene();this.exportManager.exportPhoenixScene(e,this.sceneManager.getEventData(),this.sceneManager.getGeometries())}fixOverlayView(e){this.rendererManager.setFixOverlay(e)}setSelectedObjectDisplay(e){this.getSelectionManager().setSelectedObject(e)}eventDataDepthTest(e){this.sceneManager.eventDataDepthTest(e)}enableSelecting(e){this.getSelectionManager().setSelecting(e)}clearEventData(){this.sceneManager.clearEventData()}addEventDataTypeGroup(e){return this.sceneManager.addEventDataTypeGroup(e)}setOverlayRenderer(e){this.rendererManager&&this.rendererManager.setOverlayRenderer(e)}zoomTo(e,t){this.controlsManager.zoomTo(e,t)}getSelectionManager(){return this.selectionManager||(this.selectionManager=new Qse),this.selectionManager}animateCameraPosition(e,t){const n=new Cf(this.controlsManager.getActiveCamera().position);n.to({x:e[0],y:e[1],z:e[2]},t),n.start()}animateCameraTarget(e,t){const n=new Cf(this.controlsManager.getActiveControls().target);n.to({x:e[0],y:e[1],z:e[2]},t),n.start()}getActiveObjectId(){return this.getSelectionManager().getActiveObjectId()}lookAtObject(e){this.controlsManager.lookAtObject(e,this.getSceneManager().getEventData())}getObjectPosition(e){return this.controlsManager.getObjectPosition(e,this.getSceneManager().getScene())}highlightObject(e){this.selectionManager.highlightObject(e,this.getSceneManager().getEventData())}enableKeyboardControls(){document.addEventListener("keydown",e=>{var t;if(!["input","textarea"].includes(null===(t=e.target)||void 0===t?void 0:t.tagName.toLowerCase())&&e.shiftKey)switch(e.code){case"KeyR":this.autoRotate(!this.controlsManager.getActiveControls().autoRotate);break;case"Equal":this.zoomTo(1/1.2,100);break;case"Minus":this.zoomTo(1.2,100);break;case"KeyC":this.setClipping(!this.rendererManager.getLocalClipping()),this.rendererManager.getLocalClipping()&&this.setClippingAngle(0,180);break;case"KeyV":{const r="OrthographicCamera"===this.controlsManager.getMainCamera().type;this.swapCameras(!r);break}}})}animateThroughEvent(e,t,n){this.animationsManager.animateThroughEvent(e,t,n)}animatePreset(e,t){this.animationsManager.animatePreset(e,t)}animateEventWithCollision(e,t){this.animationsManager.animateEventWithCollision(e,t)}animateClippingWithCollision(e,t){this.animationsManager.animateClippingWithCollision(e,t)}makeScreenShot(e,t,n="Strech"){const r=this.rendererManager.getMainRenderer(),s=new qi;r.getSize(s);let a=t,l=e;"Crop"==n&&(s.width*t<s.height*e?a=s.height*e/s.width:l=s.width*t/s.height);const u=(a-t)/2,d=(l-e)/2,A=getComputedStyle(document.body).getPropertyValue("--phoenix-background-color"),y=window.devicePixelRatio,C=document.getElementById("screenshotCanvas");C.width=e,C.height=t,C.style.width=(e/y).toString()+"px",C.style.height=(t/y).toString()+"px";const k=C.getContext("2d");k.fillStyle=A,k.fillRect(0,0,e,t),r.setSize(l/y,a/y,!1),this.render(),k.drawImage(r.domElement,d,u,e,t,0,0,e,t),r.setSize(s.width,s.height,!1),this.render();const Q=document.getElementById("experimentInfo");if(null!=Q){const se=Q.clientHeight*a/s.height,he=Q.clientWidth*l/s.width;kre()(Q,{backgroundColor:A,ignoreElements:re=>"CANVAS"==re.tagName}).then(re=>{re.toBlob(Le=>{k.drawImage(re,se/6,se/6,he,se),C.toBlob(be=>{const Ye=document.createElement("a");document.body.appendChild(Ye),Ye.style.display="none";const dt=window.URL.createObjectURL(be);Ye.href=dt,Ye.download="screencapture.png",Ye.click()})})})}}initXRSession(e,t){const n=e===Bf.VR?this.vrManager:this.arManager,r=this.rendererManager.getMainRenderer();r.xr.enabled=!0,r.xr.setAnimationLoop(this.xrRender.bind(this,n)),n.setXRSession(r,()=>{const a=n.getCameraGroup(this.controlsManager.getMainCamera());this.sceneManager.getScene().add(a)},t)}endXRSession(e){const t=e===Bf.VR?this.vrManager:this.arManager;this.sceneManager.getScene().remove(t.getCameraGroup());const n=this.rendererManager.getMainRenderer();n.xr.setAnimationLoop(null),n.xr.enabled=!1,t.endXRSession()}getObjectByName(e){return this.getSceneManager().getScene().getObjectByName(e)}setAntialiasing(e){this.effectsManager.setAntialiasing(e)}addGeometryFromParameters(e){this.loadingManager.addLoadableItem("geom_from_params");const t=this.getSceneManager().getScene(),l=e.NumPhiEl,u=e.NumZEl,d=e.Radius,A=e.MinZ,y=e.MaxZ,C=e.TiltAngle,k=e.ZTiltAngle,Q=e.PhiOffset,se=e.Colour,re=new Lm(e.Xdim,e.Ydim,e.Zdim),Le=new Ah({color:se,opacity:.5,transparent:!0}),be=(y-A)/u,Ye=2*Math.PI/l;let dt=A+be/2;const xt=Math.PI/2;let $t;for(let nn=0;nn<u;nn++){let gt=Q;for(let Wt=0;Wt<l;Wt++){gt+=Ye,$t=new kt(d*Math.cos(gt),d*Math.sin(gt),dt);const Nn=new Ua(re.clone(),Le);Nn.matrix.makeRotationFromEuler(new bN(k,0,xt+gt+C)),Nn.matrix.setPosition($t),Nn.matrixAutoUpdate=!1,t.add(Nn)}dt+=be}this.loadingManager.itemLoaded("geom_from_params")}addLabelToObject(e,t,n){const r=this.controlsManager.getActiveControls(),s=this.getObjectPosition(t);this.getSceneManager().addLabelToObject(e,t,n,s,r)}getColorManager(){return this.colorManager}}var voe=Ce(1583),_y=(()=>(function(i){i[i.NotForced=0]="NotForced",i[i.On=1]="On",i[i.Off=2]="Off"}(_y||(_y={})),_y))();class Nh{constructor(e,t,n,r,s=_y.NotForced,a=0,l=0){this.name=e,this.cameraPos=t,this.cameraTarget=n,this.icon=r,this.clipping=s,this.clippingStartAngle=a,this.clippingOpeningAngle=l}getIconURL(){return"assets/preset-views/"+this.icon+".svg#"+this.icon}}function Vw(i,e){var t=i.__state.conversionName.toString(),n=Math.round(i.r),r=Math.round(i.g),s=Math.round(i.b),a=i.a,l=Math.round(i.h),u=i.s.toFixed(1),d=i.v.toFixed(1);if(e||"THREE_CHAR_HEX"===t||"SIX_CHAR_HEX"===t){for(var A=i.hex.toString(16);A.length<6;)A="0"+A;return"#"+A}return"CSS_RGB"===t?"rgb("+n+","+r+","+s+")":"CSS_RGBA"===t?"rgba("+n+","+r+","+s+","+a+")":"HEX"===t?"0x"+i.hex.toString(16):"RGB_ARRAY"===t?"["+n+","+r+","+s+"]":"RGBA_ARRAY"===t?"["+n+","+r+","+s+","+a+"]":"RGB_OBJ"===t?"{r:"+n+",g:"+r+",b:"+s+"}":"RGBA_OBJ"===t?"{r:"+n+",g:"+r+",b:"+s+",a:"+a+"}":"HSV_OBJ"===t?"{h:"+l+",s:"+u+",v:"+d+"}":"HSVA_OBJ"===t?"{h:"+l+",s:"+u+",v:"+d+",a:"+a+"}":"unknown format"}var n9=Array.prototype.forEach,bC=Array.prototype.slice,yr={BREAK:{},extend:function(e){return this.each(bC.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(r){this.isUndefined(t[r])||(e[r]=t[r])}.bind(this))},this),e},defaults:function(e){return this.each(bC.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(r){this.isUndefined(e[r])&&(e[r]=t[r])}.bind(this))},this),e},compose:function(){var e=bC.call(arguments);return function(){for(var t=bC.call(arguments),n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},each:function(e,t,n){if(e)if(n9&&e.forEach&&e.forEach===n9)e.forEach(t,n);else if(e.length===e.length+0){var s,r=void 0;for(r=0,s=e.length;r<s;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(var a in e)if(t.call(n,e[a],a)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,n){var r=void 0;return function(){var s=this,a=arguments,u=n||!r;clearTimeout(r),r=setTimeout(function l(){r=null,n||e.apply(s,a)},t),u&&e.apply(s,a)}},toArray:function(e){return e.toArray?e.toArray():bC.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(i){function e(t){return i.apply(this,arguments)}return e.toString=function(){return i.toString()},e}(function(i){return isNaN(i)}),isArray:Array.isArray||function(i){return i.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},xoe=[{litmus:yr.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:Vw},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:Vw},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:Vw},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*,\s*(\S+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:Vw}}},{litmus:yr.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:yr.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:yr.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(yr.isNumber(e.r)&&yr.isNumber(e.g)&&yr.isNumber(e.b)&&yr.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(yr.isNumber(e.r)&&yr.isNumber(e.g)&&yr.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(yr.isNumber(e.h)&&yr.isNumber(e.s)&&yr.isNumber(e.v)&&yr.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(yr.isNumber(e.h)&&yr.isNumber(e.s)&&yr.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],xC=void 0,Q3=void 0,W3=function(){Q3=!1;var e=arguments.length>1?yr.toArray(arguments):arguments[0];return yr.each(xoe,function(t){if(t.litmus(e))return yr.each(t.conversions,function(n,r){if(xC=n.read(e),!1===Q3&&!1!==xC)return Q3=xC,xC.conversionName=r,xC.conversion=n,yr.BREAK}),yr.BREAK}),Q3},i9=void 0,wC={hsv_to_rgb:function(e,t,n){var r=Math.floor(e/60)%6,s=e/60-Math.floor(e/60),a=n*(1-t),l=n*(1-s*t),u=n*(1-(1-s)*t),d=[[n,u,a],[l,n,a],[a,n,u],[a,l,n],[u,a,n],[n,a,l]][r];return{r:255*d[0],g:255*d[1],b:255*d[2]}},rgb_to_hsv:function(e,t,n){var r=Math.min(e,t,n),s=Math.max(e,t,n),a=s-r,l=void 0;return 0===s?{h:NaN,s:0,v:0}:(l=e===s?(t-n)/a:t===s?2+(n-e)/a:4+(e-t)/a,(l/=6)<0&&(l+=1),{h:360*l,s:a/s,v:s/255})},rgb_to_hex:function(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),this.hex_with_component(r,0,n)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,n){return n<<(i9=8*t)|e&~(255<<i9)}},woe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(i){return typeof i}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},Hm=function(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")},Vm=function(){function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),yy=function i(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:i(s,t,n)}if("value"in r)return r.value;var a=r.get;return void 0===a?void 0:a.call(n)},vy=function(i,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)},by=function(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?i:e},_h=function(){function i(){if(Hm(this,i),this.__state=W3.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return Vm(i,[{key:"toString",value:function(){return Vw(this)}},{key:"toHexString",value:function(){return Vw(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),i}();function KP(i,e,t){Object.defineProperty(i,e,{get:function(){return"RGB"===this.__state.space||_h.recalculateRGB(this,e,t),this.__state[e]},set:function(r){"RGB"!==this.__state.space&&(_h.recalculateRGB(this,e,t),this.__state.space="RGB"),this.__state[e]=r}})}function YP(i,e){Object.defineProperty(i,e,{get:function(){return"HSV"===this.__state.space||_h.recalculateHSV(this),this.__state[e]},set:function(n){"HSV"!==this.__state.space&&(_h.recalculateHSV(this),this.__state.space="HSV"),this.__state[e]=n}})}_h.recalculateRGB=function(i,e,t){if("HEX"===i.__state.space)i.__state[e]=wC.component_from_hex(i.__state.hex,t);else{if("HSV"!==i.__state.space)throw new Error("Corrupted color state");yr.extend(i.__state,wC.hsv_to_rgb(i.__state.h,i.__state.s,i.__state.v))}},_h.recalculateHSV=function(i){var e=wC.rgb_to_hsv(i.r,i.g,i.b);yr.extend(i.__state,{s:e.s,v:e.v}),yr.isNaN(e.h)?yr.isUndefined(i.__state.h)&&(i.__state.h=0):i.__state.h=e.h},_h.COMPONENTS=["r","g","b","h","s","v","hex","a"],KP(_h.prototype,"r",2),KP(_h.prototype,"g",1),KP(_h.prototype,"b",0),YP(_h.prototype,"h"),YP(_h.prototype,"s"),YP(_h.prototype,"v"),Object.defineProperty(_h.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(_h.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=wC.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var xy=function(){function i(e,t){Hm(this,i),this.initialValue=e[t],this.domElement=document.createElement("div"),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}return Vm(i,[{key:"onChange",value:function(t){return this.__onChange=t,this}},{key:"onFinishChange",value:function(t){return this.__onFinishChange=t,this}},{key:"setValue",value:function(t){return this.object[this.property]=t,this.__onChange&&this.__onChange.call(this,t),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),i}(),r9={};yr.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(i,e){yr.each(i,function(t){r9[t]=e})});var Coe=/(\d+(\.\d+)?)px/;function l0(i){if("0"===i||yr.isUndefined(i))return 0;var e=i.match(Coe);return yr.isNull(e)?0:parseFloat(e[1])}var Ti={makeSelectable:function(e,t){void 0===e||void 0===e.style||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,n){var r=n,s=t;yr.isUndefined(s)&&(s=!0),yr.isUndefined(r)&&(r=!0),e.style.position="absolute",s&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,n,r){var s=n||{},a=r9[t];if(!a)throw new Error("Event type "+t+" not supported.");var l=document.createEvent(a);switch(a){case"MouseEvents":l.initMouseEvent(t,s.bubbles||!1,s.cancelable||!0,window,s.clickCount||1,0,0,s.x||s.clientX||0,s.y||s.clientY||0,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var A=l.initKeyboardEvent||l.initKeyEvent;yr.defaults(s,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),A(t,s.bubbles||!1,s.cancelable,window,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.keyCode,s.charCode);break;default:l.initEvent(t,s.bubbles||!1,s.cancelable||!0)}yr.defaults(l,r),e.dispatchEvent(l)},bind:function(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent("on"+t,n),Ti},unbind:function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent("on"+t,n),Ti},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return Ti},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(" "))}else e.className=void 0;return Ti},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return l0(t["border-left-width"])+l0(t["border-right-width"])+l0(t["padding-left"])+l0(t["padding-right"])+l0(t.width)},getHeight:function(e){var t=getComputedStyle(e);return l0(t["border-top-width"])+l0(t["border-bottom-width"])+l0(t["padding-top"])+l0(t["padding-bottom"])+l0(t.height)},getOffset:function(e){var t=e,n={left:0,top:0};if(t.offsetParent)do{n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent}while(t);return n},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},ZP=function(i){function e(t,n){Hm(this,e);var r=by(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=r;return r.__prev=r.getValue(),r.__checkbox=document.createElement("input"),r.__checkbox.setAttribute("type","checkbox"),Ti.bind(r.__checkbox,"change",function a(){s.setValue(!s.__prev)},!1),r.domElement.appendChild(r.__checkbox),r.updateDisplay(),r}return vy(e,i),Vm(e,[{key:"setValue",value:function(n){var r=yy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),r}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),yy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(xy),s9=function(i){function e(t,n,r){Hm(this,e);var s=by(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=r,l=s;if(s.__select=document.createElement("select"),yr.isArray(a)){var u={};yr.each(a,function(d){u[d]=d}),a=u}return yr.each(a,function(d,A){var y=document.createElement("option");y.innerHTML=A,y.setAttribute("value",d),l.__select.appendChild(y)}),s.updateDisplay(),Ti.bind(s.__select,"change",function(){l.setValue(this.options[this.selectedIndex].value)}),s.domElement.appendChild(s.__select),s}return vy(e,i),Vm(e,[{key:"setValue",value:function(n){var r=yy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,n);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),r}},{key:"updateDisplay",value:function(){return Ti.isActive(this.__select)?this:(this.__select.value=this.getValue(),yy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this))}}]),e}(xy),o9=function(i){function e(t,n){Hm(this,e);var r=by(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),s=r;function a(){s.setValue(s.__input.value)}return r.__input=document.createElement("input"),r.__input.setAttribute("type","text"),Ti.bind(r.__input,"keyup",a),Ti.bind(r.__input,"change",a),Ti.bind(r.__input,"blur",function l(){s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}),Ti.bind(r.__input,"keydown",function(u){13===u.keyCode&&this.blur()}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return vy(e,i),Vm(e,[{key:"updateDisplay",value:function(){return Ti.isActive(this.__input)||(this.__input.value=this.getValue()),yy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(xy);function a9(i){var e=i.toString();return e.indexOf(".")>-1?e.length-e.indexOf(".")-1:0}var JP=function(i){function e(t,n,r){Hm(this,e);var s=by(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=r||{};return s.__min=a.min,s.__max=a.max,s.__step=a.step,s.__impliedStep=yr.isUndefined(s.__step)?0===s.initialValue?1:Math.pow(10,Math.floor(Math.log(Math.abs(s.initialValue))/Math.LN10))/10:s.__step,s.__precision=a9(s.__impliedStep),s}return vy(e,i),Vm(e,[{key:"setValue",value:function(n){var r=n;return void 0!==this.__min&&r<this.__min?r=this.__min:void 0!==this.__max&&r>this.__max&&(r=this.__max),void 0!==this.__step&&r%this.__step!=0&&(r=Math.round(r/this.__step)*this.__step),yy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"setValue",this).call(this,r)}},{key:"min",value:function(n){return this.__min=n,this}},{key:"max",value:function(n){return this.__max=n,this}},{key:"step",value:function(n){return this.__step=n,this.__impliedStep=n,this.__precision=a9(n),this}}]),e}(xy),MC=function(i){function e(t,n,r){Hm(this,e);var s=by(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r));s.__truncationSuspended=!1;var a=s,l=void 0;function d(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function y(Q){var se=l-Q.clientY;a.setValue(a.getValue()+se*a.__impliedStep),l=Q.clientY}function C(){Ti.unbind(window,"mousemove",y),Ti.unbind(window,"mouseup",C),d()}return s.__input=document.createElement("input"),s.__input.setAttribute("type","text"),Ti.bind(s.__input,"change",function u(){var Q=parseFloat(a.__input.value);yr.isNaN(Q)||a.setValue(Q)}),Ti.bind(s.__input,"blur",function A(){d()}),Ti.bind(s.__input,"mousedown",function k(Q){Ti.bind(window,"mousemove",y),Ti.bind(window,"mouseup",C),l=Q.clientY}),Ti.bind(s.__input,"keydown",function(Q){13===Q.keyCode&&(a.__truncationSuspended=!0,this.blur(),a.__truncationSuspended=!1,d())}),s.updateDisplay(),s.domElement.appendChild(s.__input),s}return vy(e,i),Vm(e,[{key:"updateDisplay",value:function(){return this.__input.value=this.__truncationSuspended?this.getValue():function Soe(i,e){var t=Math.pow(10,e);return Math.round(i*t)/t}(this.getValue(),this.__precision),yy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(JP);function l9(i,e,t,n,r){return n+(i-e)/(t-e)*(r-n)}var j3=function(i){function e(t,n,r,s,a){Hm(this,e);var l=by(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,{min:r,max:s,step:a})),u=l;function A(se){se.preventDefault();var he=u.__background.getBoundingClientRect();return u.setValue(l9(se.clientX,he.left,he.right,u.__min,u.__max)),!1}function y(){Ti.unbind(window,"mousemove",A),Ti.unbind(window,"mouseup",y),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}function k(se){var he=se.touches[0].clientX,re=u.__background.getBoundingClientRect();u.setValue(l9(he,re.left,re.right,u.__min,u.__max))}function Q(){Ti.unbind(window,"touchmove",k),Ti.unbind(window,"touchend",Q),u.__onFinishChange&&u.__onFinishChange.call(u,u.getValue())}return l.__background=document.createElement("div"),l.__foreground=document.createElement("div"),Ti.bind(l.__background,"mousedown",function d(se){document.activeElement.blur(),Ti.bind(window,"mousemove",A),Ti.bind(window,"mouseup",y),A(se)}),Ti.bind(l.__background,"touchstart",function C(se){1===se.touches.length&&(Ti.bind(window,"touchmove",k),Ti.bind(window,"touchend",Q),k(se))}),Ti.addClass(l.__background,"slider"),Ti.addClass(l.__foreground,"slider-fg"),l.updateDisplay(),l.__background.appendChild(l.__foreground),l.domElement.appendChild(l.__background),l}return vy(e,i),Vm(e,[{key:"updateDisplay",value:function(){var n=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*n+"%",yy(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateDisplay",this).call(this)}}]),e}(JP),eF=function(i){function e(t,n,r){Hm(this,e);var s=by(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n)),a=s;return s.__button=document.createElement("div"),s.__button.innerHTML=void 0===r?"Fire":r,Ti.bind(s.__button,"click",function(l){return l.preventDefault(),a.fire(),!1}),Ti.addClass(s.__button,"button"),s.domElement.appendChild(s.__button),s}return vy(e,i),Vm(e,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),e}(xy),$3=function(i){function e(t,n){Hm(this,e);var r=by(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.__color=new _h(r.getValue()),r.__temp=new _h(0);var s=r;r.domElement=document.createElement("div"),Ti.makeSelectable(r.domElement,!1),r.__selector=document.createElement("div"),r.__selector.className="selector",r.__saturation_field=document.createElement("div"),r.__saturation_field.className="saturation-field",r.__field_knob=document.createElement("div"),r.__field_knob.className="field-knob",r.__field_knob_border="2px solid ",r.__hue_knob=document.createElement("div"),r.__hue_knob.className="hue-knob",r.__hue_field=document.createElement("div"),r.__hue_field.className="hue-field",r.__input=document.createElement("input"),r.__input.type="text",r.__input_textShadow="0 1px 1px ",Ti.bind(r.__input,"keydown",function(se){13===se.keyCode&&y.call(this)}),Ti.bind(r.__input,"blur",y),Ti.bind(r.__selector,"mousedown",function(){Ti.addClass(this,"drag").bind(window,"mouseup",function(){Ti.removeClass(s.__selector,"drag")})}),Ti.bind(r.__selector,"touchstart",function(){Ti.addClass(this,"drag").bind(window,"touchend",function(){Ti.removeClass(s.__selector,"drag")})});var a=document.createElement("div");function l(se){k(se),Ti.bind(window,"mousemove",k),Ti.bind(window,"touchmove",k),Ti.bind(window,"mouseup",d),Ti.bind(window,"touchend",d)}function u(se){Q(se),Ti.bind(window,"mousemove",Q),Ti.bind(window,"touchmove",Q),Ti.bind(window,"mouseup",A),Ti.bind(window,"touchend",A)}function d(){Ti.unbind(window,"mousemove",k),Ti.unbind(window,"touchmove",k),Ti.unbind(window,"mouseup",d),Ti.unbind(window,"touchend",d),C()}function A(){Ti.unbind(window,"mousemove",Q),Ti.unbind(window,"touchmove",Q),Ti.unbind(window,"mouseup",A),Ti.unbind(window,"touchend",A),C()}function y(){var se=W3(this.value);!1!==se?(s.__color.__state=se,s.setValue(s.__color.toOriginal())):this.value=s.__color.toString()}function C(){s.__onFinishChange&&s.__onFinishChange.call(s,s.__color.toOriginal())}function k(se){-1===se.type.indexOf("touch")&&se.preventDefault();var he=s.__saturation_field.getBoundingClientRect(),re=se.touches&&se.touches[0]||se,Ye=(re.clientX-he.left)/(he.right-he.left),dt=1-(re.clientY-he.top)/(he.bottom-he.top);return dt>1?dt=1:dt<0&&(dt=0),Ye>1?Ye=1:Ye<0&&(Ye=0),s.__color.v=dt,s.__color.s=Ye,s.setValue(s.__color.toOriginal()),!1}function Q(se){-1===se.type.indexOf("touch")&&se.preventDefault();var he=s.__hue_field.getBoundingClientRect(),be=1-((se.touches&&se.touches[0]||se).clientY-he.top)/(he.bottom-he.top);return be>1?be=1:be<0&&(be=0),s.__color.h=360*be,s.setValue(s.__color.toOriginal()),!1}return yr.extend(r.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),yr.extend(r.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:r.__field_knob_border+(r.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),yr.extend(r.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),yr.extend(r.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),yr.extend(a.style,{width:"100%",height:"100%",background:"none"}),c9(a,"top","rgba(0,0,0,0)","#000"),yr.extend(r.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),function Eoe(i){i.style.background="",i.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",i.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",i.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"}(r.__hue_field),yr.extend(r.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:r.__input_textShadow+"rgba(0,0,0,0.7)"}),Ti.bind(r.__saturation_field,"mousedown",l),Ti.bind(r.__saturation_field,"touchstart",l),Ti.bind(r.__field_knob,"mousedown",l),Ti.bind(r.__field_knob,"touchstart",l),Ti.bind(r.__hue_field,"mousedown",u),Ti.bind(r.__hue_field,"touchstart",u),r.__saturation_field.appendChild(a),r.__selector.appendChild(r.__field_knob),r.__selector.appendChild(r.__saturation_field),r.__selector.appendChild(r.__hue_field),r.__hue_field.appendChild(r.__hue_knob),r.domElement.appendChild(r.__input),r.domElement.appendChild(r.__selector),r.updateDisplay(),r}return vy(e,i),Vm(e,[{key:"updateDisplay",value:function(){var n=W3(this.getValue());if(!1!==n){var r=!1;yr.each(_h.COMPONENTS,function(l){if(!yr.isUndefined(n[l])&&!yr.isUndefined(this.__color.__state[l])&&n[l]!==this.__color.__state[l])return r=!0,{}},this),r&&yr.extend(this.__color.__state,n)}yr.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var s=this.__color.v<.5||this.__color.s>.5?255:0,a=255-s;yr.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+s+","+s+","+s+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,c9(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),yr.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+s+","+s+","+s+")",textShadow:this.__input_textShadow+"rgba("+a+","+a+","+a+",.7)"})}}]),e}(xy),Toe=["-moz-","-o-","-webkit-","-ms-",""];function c9(i,e,t,n){i.style.background="",yr.each(Toe,function(r){i.style.cssText+="background: "+r+"linear-gradient("+e+", "+t+" 0%, "+n+" 100%); "})}var Boe='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',Ioe=function(e,t){var n=e[t];return yr.isArray(arguments[2])||yr.isObject(arguments[2])?new s9(e,t,arguments[2]):yr.isNumber(n)?yr.isNumber(arguments[2])&&yr.isNumber(arguments[3])?yr.isNumber(arguments[4])?new j3(e,t,arguments[2],arguments[3],arguments[4]):new j3(e,t,arguments[2],arguments[3]):yr.isNumber(arguments[4])?new MC(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new MC(e,t,{min:arguments[2],max:arguments[3]}):yr.isString(n)?new o9(e,t):yr.isFunction(n)?new eF(e,t,""):yr.isBoolean(n)?new ZP(e,t):null},Foe=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function Poe(i){setTimeout(i,1e3/60)},Roe=function(){function i(){Hm(this,i),this.backgroundElement=document.createElement("div"),yr.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),Ti.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),yr.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;Ti.bind(this.backgroundElement,"click",function(){e.hide()})}return Vm(i,[{key:"show",value:function(){var t=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),yr.defer(function(){t.backgroundElement.style.opacity=1,t.domElement.style.opacity=1,t.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var t=this,n=function r(){t.domElement.style.display="none",t.backgroundElement.style.display="none",Ti.unbind(t.domElement,"webkitTransitionEnd",r),Ti.unbind(t.domElement,"transitionend",r),Ti.unbind(t.domElement,"oTransitionEnd",r)};Ti.bind(this.domElement,"webkitTransitionEnd",n),Ti.bind(this.domElement,"transitionend",n),Ti.bind(this.domElement,"oTransitionEnd",n),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-Ti.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-Ti.getHeight(this.domElement)/2+"px"}}]),i}(),koe=function boe(i){if(i&&!(typeof window>"u")){var e=document.createElement("style");return e.setAttribute("type","text/css"),e.innerHTML=i,document.head.appendChild(e),i}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .cr.function .property-name{width:100%}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n");!function(e,t){var n=t||document,r=document.createElement("style");r.type="text/css",r.innerHTML=e;var s=n.getElementsByTagName("head")[0];try{s.appendChild(r)}catch{}}(koe);var CC="Default",SC=function(){try{return!!window.localStorage}catch{return!1}}(),TC=void 0,f9=!0,Gw=void 0,tF=!1,p9=[],ac=function i(e){var t=this,n=e||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),Ti.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=yr.defaults(n,{closeOnTop:!1,autoPlace:!0,width:i.DEFAULT_WIDTH}),n=yr.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),yr.isUndefined(n.load)?n.load={preset:CC}:n.preset&&(n.load.preset=n.preset),yr.isUndefined(n.parent)&&n.hideable&&p9.push(this),n.resizable=yr.isUndefined(n.parent)&&n.resizable,n.autoPlace&&yr.isUndefined(n.scrollable)&&(n.scrollable=!0);var r=SC&&"true"===localStorage.getItem(qw(0,"isLocal")),s=void 0,a=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return t.parent?t.getRoot().preset:n.load.preset},set:function(C){t.parent?t.getRoot().preset=C:n.load.preset=C,function Uoe(i){for(var e=0;e<i.__preset_select.length;e++)i.__preset_select[e].value===i.preset&&(i.__preset_select.selectedIndex=e)}(this),t.revert()}},width:{get:function(){return n.width},set:function(C){n.width=C,sF(t,C)}},name:{get:function(){return n.name},set:function(C){n.name=C,a&&(a.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(C){n.closed=C,n.closed?Ti.addClass(t.__ul,i.CLASS_CLOSED):Ti.removeClass(t.__ul,i.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=C?i.TEXT_OPEN:i.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return r},set:function(C){SC&&(r=C,C?Ti.bind(window,"unload",s):Ti.unbind(window,"unload",s),localStorage.setItem(qw(0,"isLocal"),C))}}}),yr.isUndefined(n.parent)){if(this.closed=n.closed||!1,Ti.addClass(this.domElement,i.CLASS_MAIN),Ti.makeSelectable(this.domElement,!1),SC&&r){t.useLocalStorage=!0;var l=localStorage.getItem(qw(0,"gui"));l&&(n.load=JSON.parse(l))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=i.TEXT_CLOSED,Ti.addClass(this.__closeButton,i.CLASS_CLOSE_BUTTON),n.closeOnTop?(Ti.addClass(this.__closeButton,i.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(Ti.addClass(this.__closeButton,i.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),Ti.bind(this.__closeButton,"click",function(){t.closed=!t.closed})}else{void 0===n.closed&&(n.closed=!0);var u=document.createTextNode(n.name);Ti.addClass(u,"controller-name"),a=nF(t,u),Ti.addClass(this.__ul,i.CLASS_CLOSED),Ti.addClass(a,"title"),Ti.bind(a,"click",function(C){return C.preventDefault(),t.closed=!t.closed,!1}),n.closed||(this.closed=!1)}n.autoPlace&&(yr.isUndefined(n.parent)&&(f9&&(Gw=document.createElement("div"),Ti.addClass(Gw,"dg"),Ti.addClass(Gw,i.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(Gw),f9=!1),Gw.appendChild(this.domElement),Ti.addClass(this.domElement,i.CLASS_AUTO_PLACE)),this.parent||sF(t,n.width)),this.__resizeHandler=function(){t.onResizeDebounced()},Ti.bind(window,"resize",this.__resizeHandler),Ti.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),Ti.bind(this.__ul,"transitionend",this.__resizeHandler),Ti.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&function Noe(i){var e=void 0;function t(s){return s.preventDefault(),i.width+=e-s.clientX,i.onResize(),e=s.clientX,!1}function n(){Ti.removeClass(i.__closeButton,ac.CLASS_DRAG),Ti.unbind(window,"mousemove",t),Ti.unbind(window,"mouseup",n)}function r(s){return s.preventDefault(),e=s.clientX,Ti.addClass(i.__closeButton,ac.CLASS_DRAG),Ti.bind(window,"mousemove",t),Ti.bind(window,"mouseup",n),!1}i.__resize_handle=document.createElement("div"),yr.extend(i.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),Ti.bind(i.__resize_handle,"mousedown",r),Ti.bind(i.__closeButton,"mousedown",r),i.domElement.insertBefore(i.__resize_handle,i.domElement.firstElementChild)}(this),this.saveToLocalStorageIfPossible=s=function(){SC&&"true"===localStorage.getItem(qw(0,"isLocal"))&&localStorage.setItem(qw(0,"gui"),JSON.stringify(t.getSaveObject()))},n.parent||function A(){var y=t.getRoot();y.width+=1,yr.defer(function(){y.width-=1})}()};function nF(i,e,t){var n=document.createElement("li");return e&&n.appendChild(e),t?i.__ul.insertBefore(n,t):i.__ul.appendChild(n),i.onResize(),n}function A9(i){Ti.unbind(window,"resize",i.__resizeHandler),i.saveToLocalStorageIfPossible&&Ti.unbind(window,"unload",i.saveToLocalStorageIfPossible)}function iF(i,e){var t=i.__preset_select[i.__preset_select.selectedIndex];t.innerHTML=e?t.value+"*":t.value}function m9(i,e){var t=i.getRoot(),n=t.__rememberedObjects.indexOf(e.object);if(-1!==n){var r=t.__rememberedObjectIndecesToControllers[n];if(void 0===r&&(t.__rememberedObjectIndecesToControllers[n]=r={}),r[e.property]=e,t.load&&t.load.remembered){var s=t.load.remembered,a=void 0;if(s[i.preset])a=s[i.preset];else{if(!s[CC])return;a=s[CC]}if(a[n]&&void 0!==a[n][e.property]){var l=a[n][e.property];e.initialValue=l,e.setValue(l)}}}}function EC(i,e,t,n){if(void 0===e[t])throw new Error('Object "'+e+'" has no property "'+t+'"');var r=void 0;if(n.color)r=new $3(e,t);else{var s=[e,t].concat(n.factoryArgs);r=Ioe.apply(i,s)}n.before instanceof xy&&(n.before=n.before.__li),m9(i,r),Ti.addClass(r.domElement,"c");var a=document.createElement("span");Ti.addClass(a,"property-name"),a.innerHTML=r.property;var l=document.createElement("div");l.appendChild(a),l.appendChild(r.domElement);var u=nF(i,l,n.before);return Ti.addClass(u,ac.CLASS_CONTROLLER_ROW),Ti.addClass(u,r instanceof $3?"color":woe(r.getValue())),function Ooe(i,e,t){if(t.__li=e,t.__gui=i,yr.extend(t,{options:function(a){if(arguments.length>1){var l=t.__li.nextElementSibling;return t.remove(),EC(i,t.object,t.property,{before:l,factoryArgs:[yr.toArray(arguments)]})}if(yr.isArray(a)||yr.isObject(a)){var u=t.__li.nextElementSibling;return t.remove(),EC(i,t.object,t.property,{before:u,factoryArgs:[a]})}},name:function(a){return t.__li.firstElementChild.firstElementChild.innerHTML=a,t},listen:function(){return t.__gui.listen(t),t},remove:function(){return t.__gui.remove(t),t}}),t instanceof j3){var n=new MC(t.object,t.property,{min:t.__min,max:t.__max,step:t.__step});yr.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(s){var a=t[s],l=n[s];t[s]=n[s]=function(){var u=Array.prototype.slice.call(arguments);return l.apply(n,u),a.apply(t,u)}}),Ti.addClass(e,"has-slider"),t.domElement.insertBefore(n.domElement,t.domElement.firstElementChild)}else if(t instanceof MC){var r=function(a){if(yr.isNumber(t.__min)&&yr.isNumber(t.__max)){var l=t.__li.firstElementChild.firstElementChild.innerHTML,u=t.__gui.__listening.indexOf(t)>-1;t.remove();var d=EC(i,t.object,t.property,{before:t.__li.nextElementSibling,factoryArgs:[t.__min,t.__max,t.__step]});return d.name(l),u&&d.listen(),d}return a};t.min=yr.compose(r,t.min),t.max=yr.compose(r,t.max)}else t instanceof ZP?(Ti.bind(e,"click",function(){Ti.fakeEvent(t.__checkbox,"click")}),Ti.bind(t.__checkbox,"click",function(s){s.stopPropagation()})):t instanceof eF?(Ti.bind(e,"click",function(){Ti.fakeEvent(t.__button,"click")}),Ti.bind(e,"mouseover",function(){Ti.addClass(t.__button,"hover")}),Ti.bind(e,"mouseout",function(){Ti.removeClass(t.__button,"hover")})):t instanceof $3&&(Ti.addClass(e,"color"),t.updateDisplay=yr.compose(function(s){return e.style.borderLeftColor=t.__color.toString(),s},t.updateDisplay),t.updateDisplay());t.setValue=yr.compose(function(s){return i.getRoot().__preset_select&&t.isModified()&&iF(i.getRoot(),!0),s},t.setValue)}(i,u,r),i.__controllers.push(r),r}function qw(i,e){return document.location.href+"."+e}function rF(i,e,t){var n=document.createElement("option");n.innerHTML=e,n.value=e,i.__preset_select.appendChild(n),t&&(i.__preset_select.selectedIndex=i.__preset_select.length-1)}function g9(i,e){e.style.display=i.useLocalStorage?"block":"none"}function sF(i,e){i.domElement.style.width=e+"px",i.__save_row&&i.autoPlace&&(i.__save_row.style.width=e+"px"),i.__closeButton&&(i.__closeButton.style.width=e+"px")}function X3(i,e){var t={};return yr.each(i.__rememberedObjects,function(n,r){var s={};yr.each(i.__rememberedObjectIndecesToControllers[r],function(l,u){s[u]=e?l.initialValue:l.getValue()}),t[r]=s}),t}function _9(i){0!==i.length&&Foe.call(window,function(){_9(i)}),yr.each(i,function(e){e.updateDisplay()})}ac.toggleHide=function(){tF=!tF,yr.each(p9,function(i){i.domElement.style.display=tF?"none":""})},ac.CLASS_AUTO_PLACE="a",ac.CLASS_AUTO_PLACE_CONTAINER="ac",ac.CLASS_MAIN="main",ac.CLASS_CONTROLLER_ROW="cr",ac.CLASS_TOO_TALL="taller-than-window",ac.CLASS_CLOSED="closed",ac.CLASS_CLOSE_BUTTON="close-button",ac.CLASS_CLOSE_TOP="close-top",ac.CLASS_CLOSE_BOTTOM="close-bottom",ac.CLASS_DRAG="drag",ac.DEFAULT_WIDTH=245,ac.TEXT_CLOSED="Close Controls",ac.TEXT_OPEN="Open Controls",ac._keydownHandler=function(i){"text"!==document.activeElement.type&&(72===i.which||72===i.keyCode)&&ac.toggleHide()},Ti.bind(window,"keydown",ac._keydownHandler,!1),yr.extend(ac.prototype,{add:function(e,t){return EC(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return EC(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;yr.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&Gw.removeChild(this.domElement);var e=this;yr.each(this.__folders,function(t){e.removeFolder(t)}),Ti.unbind(window,"keydown",ac._keydownHandler,!1),A9(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new ac(t);this.__folders[e]=n;var r=nF(this,n.domElement);return Ti.addClass(r,"folder"),n},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],A9(e);var t=this;yr.each(e.__folders,function(n){e.removeFolder(n)}),yr.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=Ti.getOffset(e.__ul).top,n=0;yr.each(e.__ul.childNodes,function(r){e.autoPlace&&r===e.__save_row||(n+=Ti.getHeight(r))}),window.innerHeight-t-20<n?(Ti.addClass(e.domElement,ac.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(Ti.removeClass(e.domElement,ac.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&yr.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:yr.debounce(function(){this.onResize()},50),remember:function(){if(yr.isUndefined(TC)&&((TC=new Roe).domElement.innerHTML=Boe),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;yr.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&function Loe(i){var e=i.__save_row=document.createElement("li");Ti.addClass(i.domElement,"has-save"),i.__ul.insertBefore(e,i.__ul.firstChild),Ti.addClass(e,"save-row");var t=document.createElement("span");t.innerHTML="&nbsp;",Ti.addClass(t,"button gears");var n=document.createElement("span");n.innerHTML="Save",Ti.addClass(n,"button"),Ti.addClass(n,"save");var r=document.createElement("span");r.innerHTML="New",Ti.addClass(r,"button"),Ti.addClass(r,"save-as");var s=document.createElement("span");s.innerHTML="Revert",Ti.addClass(s,"button"),Ti.addClass(s,"revert");var a=i.__preset_select=document.createElement("select");if(i.load&&i.load.remembered?yr.each(i.load.remembered,function(y,C){rF(i,C,C===i.preset)}):rF(i,CC,!1),Ti.bind(a,"change",function(){for(var y=0;y<i.__preset_select.length;y++)i.__preset_select[y].innerHTML=i.__preset_select[y].value;i.preset=this.value}),e.appendChild(a),e.appendChild(t),e.appendChild(n),e.appendChild(r),e.appendChild(s),SC){var l=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage");document.getElementById("dg-save-locally").style.display="block","true"===localStorage.getItem(qw(0,"isLocal"))&&u.setAttribute("checked","checked"),g9(i,l),Ti.bind(u,"change",function(){i.useLocalStorage=!i.useLocalStorage,g9(i,l)})}var A=document.getElementById("dg-new-constructor");Ti.bind(A,"keydown",function(y){y.metaKey&&(67===y.which||67===y.keyCode)&&TC.hide()}),Ti.bind(t,"click",function(){A.innerHTML=JSON.stringify(i.getSaveObject(),void 0,2),TC.show(),A.focus(),A.select()}),Ti.bind(n,"click",function(){i.save()}),Ti.bind(r,"click",function(){var y=prompt("Enter a new preset name.");y&&i.saveAs(y)}),Ti.bind(s,"click",function(){i.revert()})}(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&sF(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=X3(this)),e.folders={},yr.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=X3(this),iF(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[CC]=X3(this,!0)),this.load.remembered[e]=X3(this),this.preset=e,rF(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){yr.each(this.__controllers,function(t){this.getRoot().load.remembered?m9(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),yr.each(this.__folders,function(t){t.revert(t)}),e||iF(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&_9(this.__listening)},updateDisplay:function(){yr.each(this.__controllers,function(e){e.updateDisplay()}),yr.each(this.__folders,function(e){e.updateDisplay()})}});var y9=ac;class v9{constructor(e="eventDisplay",t){var n;this.three=t,this.guiParameters={rotate:void 0,axis:void 0,lowRes:void 0,eventData:void 0,geometries:void 0,labels:void 0},this.maxPositionX=4e3,this.maxPositionY=4e3,this.maxPositionZ=4e3,this.gui=new y9,this.gui.domElement.id="gui",this.gui.domElement.style.cssText="position: absolute; right: 0; top: 2rem; z-index: 11;",(null!==(n=document.getElementById(e))&&void 0!==n?n:document.body).appendChild(this.gui.domElement),this.geomFolder=null,this.eventFolder=null,this.labelsFolder=null,this.sceneManager=t.getSceneManager()}clear(){document.getElementById("gui")?.remove(),this.geomFolder=null}addGeometryFolder(){null===this.geomFolder&&(this.geomFolder=this.gui.addFolder(Ya.GEOMETRIES_ID)),this.guiParameters.geometries={show:!0,wireframe:!1},this.geomFolder.add(this.guiParameters.geometries,"show").name("Show").listen().onChange(n=>{this.sceneManager.objectVisibility(this.sceneManager.getObjectByName(Ya.GEOMETRIES_ID),n)}),this.geomFolder.add(this.guiParameters.geometries,"wireframe").name("Wireframe").listen().onChange(n=>{this.sceneManager.wireframeGeometries(n)})}addGeometry(e,t){const{name:n,material:r,visible:s}=e,a=r?.color;this.guiParameters[n]={show:s,color:a??"#000000",x:0,y:0,z:0,detectorOpacity:1,remove:this.removeOBJ(e),scale:1};const l=this.geomFolder.addFolder(n);l.addColor(this.guiParameters[n],"color").name("Color").onChange(C=>this.sceneManager.changeObjectColor(e,C)),l.add(this.guiParameters[n],"detectorOpacity",0,1).name("Opacity").onFinishChange(C=>this.sceneManager.setGeometryOpacity(e,C)),l.add(this.guiParameters[n],"show").name("Show").listen().onChange(C=>this.sceneManager.objectVisibility(e,C)),l.add(this.guiParameters[n],"scale",0,1e3).name("Scale").onChange(C=>{this.sceneManager.scaleObject(e,C)}),l.add(this.guiParameters[n],"x",-this.maxPositionX,this.maxPositionX).name("X").onChange(C=>this.sceneManager.getObjectPosition(n).setX(C)),l.add(this.guiParameters[n],"y",-this.maxPositionY,this.maxPositionY).name("Y").onChange(C=>this.sceneManager.getObjectPosition(n).setY(C)),l.add(this.guiParameters[n],"z",-this.maxPositionZ,this.maxPositionZ).name("Z").onChange(C=>this.sceneManager.getObjectPosition(n).setZ(C)),l.add(this.guiParameters[n],"remove").name("Remove")}removeOBJ(e){return()=>{const t=this.geomFolder.__folders[e.name];t&&this.geomFolder.removeFolder(t),this.sceneManager.removeGeometry(e)}}addEventDataFolder(){null!==this.eventFolder&&this.gui.removeFolder(this.eventFolder),this.eventFolder=this.gui.addFolder("Event Data"),this.guiParameters.eventData={show:!0,depthTest:!0},this.eventFolder.add(this.guiParameters.eventData,"show").name("Show").listen().onChange(n=>this.sceneManager.groupVisibility(Ya.EVENT_DATA_ID,n)),this.eventFolder.add(this.guiParameters.eventData,"depthTest").name("Depth Test").listen().onChange(n=>this.three.eventDataDepthTest(n))}addEventDataTypeFolder(e){const t=this.eventFolder.addFolder(e);this.guiParameters.eventData[e]=!0,t.add(this.guiParameters.eventData,e).name("Show").listen().onChange(r=>this.sceneManager.objectVisibility(this.sceneManager.getObjectByName(Ya.EVENT_DATA_ID).getObjectByName(e),r))}addCollection(e,t,n,r){const s=this.eventFolder.__folders[e];if(!s)return;this.guiParameters[t]={show:!0,color:0,randomColor:()=>this.three.getColorManager().collectionColorRandom(t),resetCut:()=>this.sceneManager.groupVisibility(t,!0,Ya.EVENT_DATA_ID)};const a=s.addFolder(t);a.add(this.guiParameters[t],"show").name("Show").listen().onChange(d=>{const A=this.sceneManager.getObjectByName(Ya.EVENT_DATA_ID).getObjectByName(t);this.sceneManager.objectVisibility(A,d)});const u=a.addColor(this.guiParameters[t],"color").name("Color");if(u.onChange(d=>this.three.getColorManager().collectionColor(t,d)),u.setValue(r?.getHex()),a.add(this.guiParameters[t],"randomColor").name("Random Color"),n){const d=a.addFolder("Cuts");d.add(this.guiParameters[t],"resetCut").name("Reset cuts");for(const A of n)d.add({minValue:A.minValue},"minValue",A.minValue,A.maxValue).name("min "+A.field).onChange(k=>{A.minValue=k,this.sceneManager.collectionFilter(t,n)}),d.add({maxValue:A.maxValue},"maxValue",A.minValue,A.maxValue).name("max "+A.field).onChange(k=>{A.maxValue=k,this.sceneManager.collectionFilter(t,n)})}}addLabelsFolder(e){if(null!==this.labelsFolder)return;const{onToggle:t,onSizeChange:n,onColorChange:r,onSaveLabels:s,onLoadLabels:a}=e;this.labelsFolder=this.gui.addFolder(Ya.LABELS_ID),this.guiParameters.labels={show:!0,size:1,color:"#a8a8a8",saveLabels:s,loadLabels:a},this.labelsFolder.add(this.guiParameters.labels,"show").name("Show").listen().onChange(t),this.labelsFolder.add(this.guiParameters.labels,"size",0,10).name("Size").onFinishChange(n),this.labelsFolder.addColor(this.guiParameters.labels,"color").name("Color").onChange(r),this.labelsFolder.add(this.guiParameters.labels,"saveLabels").name("Save Labels"),this.labelsFolder.add(this.guiParameters.labels,"loadLabels").name("Load Labels")}addLabel(e,t){this.guiParameters[e]={show:!0,color:11513775};const n=this.labelsFolder.addFolder(e);n.add(this.guiParameters[e],"show").name("Show").listen().onChange(a=>{const l=this.sceneManager.getObjectByName(Ya.LABELS_ID).getObjectByName(e);this.sceneManager.objectVisibility(l,a)}),n.addColor(this.guiParameters[e],"color").name("\xc7olor").onChange(a=>this.sceneManager.changeObjectColor(this.sceneManager.getObjectByName(e),a)),this.guiParameters[e].removeLabel=()=>{t?.(),this.removeLabel(e,n)},n.add(this.guiParameters[e],"removeLabel").name("Remove")}removeLabel(e,t){t||(t=this.labelsFolder.__folders[e]),t&&this.labelsFolder.removeFolder(t)}getEventDataTypeFolder(e){return this.eventFolder.__folders[e]}}var If=(()=>(function(i){i.CHARGE="charge",i.MOM="mom",i.VERTEX="vertex"}(If||(If={})),If))();class qoe{constructor(e,t,n,r){this.colorManager=e,this.allColorByOptions=[{key:If.CHARGE,name:"Charge "+my.getPrettySymbol("charge"),initialize:this.initChargeColorOptions.bind(this),apply:this.applyChargeColorOptions.bind(this)},{key:If.MOM,name:"Momentum "+my.getPrettySymbol("mom"),initialize:this.initMomColorOptions.bind(this),apply:this.applyMomColorOptions.bind(this)},{key:If.VERTEX,name:"Vertex",apply:this.applyVertexColorOptions.bind(this)}],this.chargeColors={"-1":"#ff0000",0:"#ff0000",1:"#ff0000"},this.momColors={min:{value:0,color:"#ff0000"},max:{value:5e4,color:"#ff0000"}},this.collectionName=t.name,this.colorOptionsFolder=t.addChild("Color Options"),this.colorOptionsFolder.addConfig("color",{label:"Color",color:n?`#${n?.getHexString()}`:void 0,onChange:s=>this.colorManager.collectionColor(this.collectionName,s)}),this.colorOptionsFolder.addConfig("button",{label:"Random",onClick:()=>this.colorManager.collectionColorRandom(this.collectionName)}),r?.length>0&&(this.colorByOptions=this.allColorByOptions.filter(s=>r.includes(s.key)),this.initColorByOptions(),this.colorByOptions.forEach(s=>{var a;return null===(a=s.initialize)||void 0===a?void 0:a.call(s)}),this.onlySelectedColorByOption())}initColorByOptions(){this.selectedColorByOption=this.colorByOptions[0].key,this.colorOptionsFolder.addConfig("select",{label:"Color by",options:this.colorByOptions.map(e=>e.name),onChange:e=>{var t;const n=this.colorByOptions.find(r=>r.name===e);this.selectedColorByOption=n?.key,null===(t=n?.apply)||void 0===t||t.call(n),this.onlySelectedColorByOption()}})}initChargeColorOptions(){[-1,0,1].forEach(e=>{this.colorOptionsFolder.addConfig("color",{label:`${my.getPrettySymbol("charge")}=${e}`,group:If.CHARGE,color:this.chargeColors[e],onChange:t=>{this.chargeColors[e]=t,this.selectedColorByOption===If.CHARGE&&this.colorManager.colorObjectsByProperty(t,this.collectionName,n=>this.shouldColorByCharge(n,e))}})})}applyChargeColorOptions(){[-1,0,1].forEach(e=>{this.colorManager.colorObjectsByProperty(this.chargeColors[e],this.collectionName,t=>this.shouldColorByCharge(t,e))})}shouldColorByCharge(e,t){var n;return Math.sign(1/parseInt(null===(n=e?.dparams)||void 0===n?void 0:n[4]))===t||e?.charge===t||void 0}initMomColorOptions(){Object.entries(this.momColors).forEach(([e,t])=>{this.colorOptionsFolder.addConfig("slider",{label:my.getPrettySymbol("mom")+" "+e,group:If.MOM,min:this.momColors.min.value,max:this.momColors.max.value,value:this.momColors[e].value,step:10,allowCustomValue:!0,onChange:n=>{this.momColors[e].value=n,this.selectedColorByOption===If.MOM&&(this.colorByMomentum("min"),this.colorByMomentum("max"))}}),this.colorOptionsFolder.addConfig("color",{label:my.getPrettySymbol("mom")+" "+e+" color",group:If.MOM,color:t.color,onChange:n=>{this.momColors[e].color=n,this.selectedColorByOption===If.MOM&&this.colorByMomentum(e)}})})}applyMomColorOptions(){this.colorByMomentum("min"),this.colorByMomentum("max")}colorByMomentum(e){this.colorManager.colorObjectsByProperty(this.momColors[e].color,this.collectionName,t=>{const n=this.getMomentum(t),r=(this.momColors.min.value+this.momColors.max.value)/2;return"max"===e&&n>r&&n<this.momColors.max.value||"min"===e&&n<r&&n>this.momColors.min.value||void 0})}getMomentum(e){var t,n;return null!==(t=e?.dparams)&&void 0!==t&&t[4]?Math.abs(1/parseFloat(null===(n=e?.dparams)||void 0===n?void 0:n[4])):e?.mom}applyVertexColorOptions(){this.colorManager.colorTracksByVertex(this.collectionName)}onlySelectedColorByOption(){this.colorOptionsFolder.configs.forEach(e=>{e.hidden=void 0!==e.group&&e.group!==this.selectedColorByOption})}}class oF{constructor(e,t){this.phoenixMenuRoot=e,this.three=t,this.geomFolder=null,this.eventFolder=null,this.labelsFolder=null,this.sceneManager=t.getSceneManager()}clear(){this.phoenixMenuRoot&&(this.phoenixMenuRoot.truncate(),this.phoenixMenuRoot=void 0),this.geomFolder=null,this.eventFolder=null,this.labelsFolder=null}addGeometryFolder(){null===this.geomFolder&&(this.geomFolder=this.phoenixMenuRoot.addChild("Detector",e=>{this.sceneManager.groupVisibility(Ya.GEOMETRIES_ID,e)},"perspective")),this.geomFolder.addConfig("checkbox",{label:"Wireframe",isChecked:!1,onChange:e=>{this.sceneManager.wireframeGeometries(e)}}).addConfig("slider",{label:"Opacity",min:0,max:1,step:.01,allowCustomValue:!0,onChange:e=>{this.sceneManager.setGeometryOpacity(this.sceneManager.getObjectByName(Ya.GEOMETRIES_ID),e)}}).addConfig("slider",{label:"Scale",min:0,max:20,step:.01,allowCustomValue:!0,onChange:e=>{this.sceneManager.scaleObject(this.sceneManager.getObjectByName(Ya.GEOMETRIES_ID),e)}})}addGeometry(e,t){const{name:n,material:r,visible:s}=e,a=r?.color;let l=this.geomFolder;t&&(l=this.geomFolder.findInTreeOrCreate(t));let u=n.lastIndexOf(" > ");u<0?u=0:u+=3;const d=l.addChild(n.substring(u),A=>{this.sceneManager.objectVisibility(e,A)});d.toggleState=s,d.addConfig("color",{label:"Color",color:a?`#${new Ir(a).getHexString()}`:void 0,onChange:A=>{this.sceneManager.changeObjectColor(e,A)}}).addConfig("slider",{label:"Opacity",min:0,max:1,step:.05,allowCustomValue:!0,onChange:A=>{this.sceneManager.setGeometryOpacity(e,A)}}).addConfig("button",{label:"Remove",onClick:()=>{d.remove(),this.sceneManager.removeGeometry(e)}})}addEventDataFolder(){null!==this.eventFolder&&(this.eventFolderState=this.eventFolder.getNodeState(),this.eventFolder.remove()),this.eventFolder=this.phoenixMenuRoot.addChild("Event Data",e=>{this.sceneManager.groupVisibility(Ya.EVENT_DATA_ID,e)},"event-folder"),this.eventFolder.addConfig("checkbox",{label:"Depth Test",isChecked:!0,onChange:e=>{this.three.eventDataDepthTest(e)}})}addEventDataTypeFolder(e){this.eventFolder.addChild(e,t=>{this.sceneManager.objectVisibility(this.sceneManager.getObjectByName(Ya.EVENT_DATA_ID).getObjectByName(e),t)})}addCollection(e,t,n,r){const s=this.eventFolder.children.find(u=>u.name===e);if(!s)return;const a=s.addChild(t,u=>{const d=this.sceneManager.getObjectByName(Ya.EVENT_DATA_ID).getObjectByName(t);this.sceneManager.objectVisibility(d,u)});this.addDrawOptions(a,t),n&&n.length>0&&this.addCutOptions(a,t,n);const l=[];"Tracks"===s.name&&l.push(If.CHARGE,If.MOM,If.VERTEX),new qoe(this.three.getColorManager(),a,r,l)}addCutOptions(e,t,n){const r=e.addChild("Cut Options");r.addConfig("label",{label:"Cuts"}).addConfig("button",{label:"Reset cuts",onClick:()=>{this.sceneManager.groupVisibility(t,!0,Ya.EVENT_DATA_ID);for(const s of n)s.reset()}});for(const s of n)r.addConfig("rangeSlider",{label:my.getPrettySymbol(s.field),min:s.minValue,max:s.maxValue,step:s.step,value:s.minValue,highValue:s.maxValue,enableMin:s.minCutActive,enableMax:s.maxCutActive,onChange:({value:a,highValue:l})=>{s.minValue=a,s.maxValue=l,this.sceneManager.collectionFilter(t,n)},setEnableMin:a=>{s.enableMinCut(a),this.sceneManager.collectionFilter(t,n)},setEnableMax:a=>{s.enableMaxCut(a),this.sceneManager.collectionFilter(t,n)}})}addDrawOptions(e,t){const n=e.addChild("Draw Options");n.addConfig("slider",{label:"Opacity",min:.1,step:.1,max:1,onChange:r=>{this.sceneManager.setGeometryOpacity(this.sceneManager.getObjectByName(Ya.EVENT_DATA_ID).getObjectByName(t),r)}}),n.addConfig("checkbox",{label:"Wireframe",onChange:r=>this.sceneManager.wireframeObjects(this.sceneManager.getObjectByName(Ya.EVENT_DATA_ID).getObjectByName(t),r)})}addLabelsFolder(e){if(null!==this.labelsFolder)return;const{onToggle:t,onSizeChange:n,onColorChange:r,onSaveLabels:s,onLoadLabels:a}=e;this.labelsFolder=this.phoenixMenuRoot.addChild(Ya.LABELS_ID,t,"info"),this.labelsFolder.addConfig("slider",{label:"Size",min:0,max:10,step:.01,allowCustomValue:!0,onChange:n}),this.labelsFolder.addConfig("color",{label:"Color",color:"#a8a8a8",onChange:r}),this.labelsFolder.addConfig("button",{label:"Save Labels",onClick:s}),this.labelsFolder.addConfig("button",{label:"Load Labels",onClick:a})}addLabel(e,t){let n=this.labelsFolder.children.find(r=>r.name===e);n||(n=this.labelsFolder.addChild(e,r=>{const s=this.sceneManager.getObjectByName(Ya.LABELS_ID).getObjectByName(e);this.sceneManager.objectVisibility(s,r)}),n.addConfig("color",{label:"Color",color:"#a8a8a8",onChange:r=>{this.sceneManager.changeObjectColor(this.sceneManager.getObjectByName(e),r)}}),n.addConfig("button",{label:"Remove",onClick:()=>{t?.(),this.removeLabel(e,n)}}))}removeLabel(e,t){var n;t||(t=null===(n=this.labelsFolder)||void 0===n?void 0:n.children.find(r=>r.name===e)),t?.remove()}getEventDataTypeFolder(e){return this.eventFolder.children.find(t=>t.name===e)}loadEventFolderState(){this.eventFolderState&&this.eventFolder.loadStateFromJSON(this.eventFolderState)}}const b9=i=>{try{return localStorage.getItem(i)}catch(e){console.warn("Exception in localStorage",e)}},Woe=[{name:"Cavern to ID",positions:[{position:[66388.95051168812,5264.228603228927,-46910.7848593543],duration:1e3},{position:[12834.18729094943,677.7571205763458,135.68755273443463],duration:2e3},{position:[312.02688693297375,25.884223757326,270.10019006776236],duration:3500},{position:[263.3640855132258,19.874838262525053,-318.16541790248885],duration:3e3},{position:[5534.140362338047,234.03507981484574,-2933.619479808285],duration:2e3},{position:[2681.277288705242,646.5795158318147,5628.5248735111745],duration:1e3},{position:[-6062.586283740076,790.5876682946184,1381.1675900848818],duration:1e3},{position:[-1766.7693725879053,1007.1048030984678,-5928.901341784575],duration:1e3},{position:[12814.982506255355,2516.987185037266,-22891.902734328327],duration:1e3}],animateEventAfterInterval:5e3,collisionDuration:6e3}];class joe{constructor(e){this.three=e,this.uiMenus=[],this.geomFolderAdded=!1,this.labelsFolderAdded=!1}init(e){this.clearUI(),this.configuration=e,this.showStats(e.elementId),this.uiMenus=[],e.enableDatGUIMenu&&this.uiMenus.push(new v9(e.elementId,this.three)),e.phoenixMenuRoot&&this.uiMenus.push(new oF(e.phoenixMenuRoot,this.three)),e.forceColourTheme?this.setDarkTheme("dark"==e.forceColourTheme.toLocaleLowerCase()):this.detectColorScheme(),this.stateManager=new zm,this.stateManager.setPhoenixMenuRoot(e.phoenixMenuRoot)}showStats(e="eventDisplay"){this.stats=voe(),this.stats.showPanel(0),this.stats.dom.className="ui-element",this.stats.dom.id="statsElement",this.stats.domElement.style.cssText="position: absolute; left: 0px; cursor: pointer; opacity: 0.9; z-index: 10; bottom: 0px;";let t=document.getElementById(e);null==t&&(t=document.body),t.appendChild(this.stats.dom)}updateUI(){this.stats.update()}clearUI(){this.uiMenus.forEach(e=>e.clear()),this.geomFolderAdded=!1,this.labelsFolderAdded=!1}addGeomFolder(){this.geomFolderAdded=!0,this.uiMenus.forEach(e=>e.addGeometryFolder())}addGeometry(e,t){this.geomFolderAdded||this.addGeomFolder(),this.uiMenus.forEach(n=>n.addGeometry(e,t))}addEventDataFolder(){this.uiMenus.forEach(e=>e.addEventDataFolder())}addEventDataTypeFolder(e){this.uiMenus.forEach(t=>t.addEventDataTypeFolder(e))}addCollection(e,t,n,r){this.uiMenus.forEach(s=>s.addCollection(e,t,n,r))}addLabelsFolder(){const e=this.three.getSceneManager();this.labelsFolderAdded=!0;const t=l=>{e.objectVisibility(e.getObjectByName(Ya.LABELS_ID),l)},n=l=>{const u=e.getObjectByName(Ya.LABELS_ID);e.scaleObject(u,l)},r=l=>{const u=e.getObjectByName(Ya.LABELS_ID);e.changeObjectColor(u,l)},s=()=>{var l,u;const d=null===(u=null===(l=this.configuration)||void 0===l?void 0:l.eventDataLoader)||void 0===u?void 0:u.getLabelsObject();d&&V3(JSON.stringify(d),"phoenix-labels.json")},a=()=>{this.loadLabelsFile()};this.uiMenus.forEach(l=>l.addLabelsFolder({onToggle:t,onSizeChange:n,onColorChange:r,onSaveLabels:s,onLoadLabels:a}))}addLabel(e){this.labelsFolderAdded||this.addLabelsFolder(),this.uiMenus.forEach(t=>t?.addLabel(e,()=>this.removeLabel(e)))}removeLabel(e,t){var n,r,s;this.three.getSceneManager().removeLabel(e);const a=e.split(" > ");null===(s=null===(r=(null===(n=this.configuration.eventDataLoader)||void 0===n?void 0:n.getLabelsObject())?.[a[0]])||void 0===r?void 0:r[a[1]])||void 0===s||delete s[a[2]],t&&this.uiMenus.forEach(u=>u.removeLabel(e))}geometryVisibility(e,t){const n=this.three.getSceneManager();n.objectVisibility(n.getObjectByName(e),t)}rotateStartAngleClipping(e){const t=this.stateManager.getOpeningClippingAngle();this.three.setClippingAngle(e,t),this.stateManager.setStartClippingAngle(e)}rotateOpeningAngleClipping(e){const t=this.stateManager.getStartClippingAngle();this.three.setClippingAngle(t,e),this.stateManager.setOpeningClippingAngle(e)}setClipping(e){this.three.setClipping(e),this.stateManager.setClippingEnabled(e)}detectColorScheme(){let e=!1;b9("theme")?"dark"===b9("theme")&&(e=!0):window.matchMedia&&matchMedia("(prefers-color-scheme: dark)").matches&&(e=!0),this.darkTheme=e,this.setDarkTheme(e)}setDarkTheme(e){const t=e?"dark":"light";((i,e)=>{try{localStorage.setItem("theme",e)}catch(t){console.warn("Exception in localStorage",t)}})(0,t),document.documentElement.setAttribute("data-theme",t)}getDarkTheme(){return this.darkTheme}setAutoRotate(e){this.three.autoRotate(e)}setShowAxis(e){this.three.getSceneManager().setAxis(e)}setShowGrid(e){this.three.getSceneManager().setEtaPhiGrid(e)}getPresetViews(){var e;return null===(e=this.configuration)||void 0===e?void 0:e.presetViews}getPresetAnimations(){var e,t;return null!==(e=this.configuration)&&void 0!==e&&e.presetAnimations?null===(t=this.configuration)||void 0===t?void 0:t.presetAnimations:Woe}displayView(e){this.three.animateCameraTransform(e.cameraPos,e.cameraTarget,1e3),e.clipping!=_y.NotForced&&(this.rotateStartAngleClipping(e.clippingStartAngle),this.rotateOpeningAngleClipping(e.clippingOpeningAngle),this.setClipping(e.clipping==_y.On))}toggleOrthographicView(e){this.three.swapCameras(e)}setOverlayRenderer(e){this.three.setOverlayRenderer(e)}enableKeyboardControls(){document.addEventListener("keydown",e=>{var t,n,r;if(!["input","textarea"].includes(null===(t=e.target)||void 0===t?void 0:t.tagName.toLowerCase())&&e.shiftKey&&("KeyT"===e.code&&this.setDarkTheme(!this.getDarkTheme()),null!==(n=this.configuration)&&void 0!==n&&n.presetViews&&e.code.startsWith("Digit"))){const a=parseInt(e.code.slice(-1))-1;null!==(r=this.configuration.presetViews)&&void 0!==r&&r[a]&&this.displayView(this.configuration.presetViews[a])}})}loadLabelsFile(){var e;const t=null===(e=this.configuration)||void 0===e?void 0:e.eventDataLoader,n=t?.getLabelsObject();t&&n&&FU(r=>{const s=JSON.parse(r);for(const a of Object.keys(s))for(const l of Object.keys(s[a])){const u=t.getCollection(l);for(const d of Object.keys(s[a][l])){const A=s[a][l][d],y=u[d].uuid,C=t.addLabelToEventObject(A,l,Number(d));this.addLabel(C),this.three.addLabelToObject(A,y,C)}}})}loadEventFolderPhoenixMenuState(){this.uiMenus.find(t=>t instanceof oF)?.loadEventFolderState()}getUIMenus(){return this.uiMenus}}class $oe{constructor(){this.infoLoggerList=[],this.maxEntries=10}add(e,t){this.infoLoggerList.length>this.maxEntries&&this.infoLoggerList.pop(),this.infoLoggerList.unshift(t?t+": "+e:e)}getInfoLoggerList(){return this.infoLoggerList}}class Dl{constructor(e,t,n,r=1,s=!0,a=!0){this.field=e,this.minValue=t,this.maxValue=n,this.step=r,this.minCutActive=s,this.maxCutActive=a,this.defaultMinValue=t,this.defaultMaxValue=n,this.defaultApplyMinValue=s,this.defaultApplyMaxValue=a}enableMaxCut(e){this.maxCutActive=e}enableMinCut(e){this.minCutActive=e}cutPassed(e){return(!this.maxCutActive||e<=this.maxValue)&&(!this.minCutActive||e>this.minValue)}reset(){this.minValue=this.defaultMinValue,this.maxValue=this.defaultMaxValue,this.minCutActive=this.defaultApplyMinValue,this.maxCutActive=this.defaultApplyMaxValue}}const Koe=new kt,x9=new class Ire{constructor(e=new kt,t=new kt){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){mU.subVectors(e,this.start),O3.subVectors(this.end,this.start);const n=O3.dot(O3);let s=O3.dot(mU)/n;return t&&(s=au(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},aF=new Nm,w9=new kt,Y3=new up;class Yoe{constructor(){this.tolerance=-1,this.faces=[],this.newFaces=[],this.assigned=new M9,this.unassigned=new M9,this.vertices=[]}setFromPoints(e){if(e.length>=4){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.vertices.push(new Zoe(e[t]));this.compute()}return this}setFromObject(e){const t=[];return e.updateMatrixWorld(!0),e.traverse(function(n){const r=n.geometry;if(void 0!==r){const s=r.attributes.position;if(void 0!==s)for(let a=0,l=s.count;a<l;a++){const u=new kt;u.fromBufferAttribute(s,a).applyMatrix4(n.matrixWorld),t.push(u)}}}),this.setFromPoints(t)}containsPoint(e){const t=this.faces;for(let n=0,r=t.length;n<r;n++)if(t[n].distanceToPoint(e)>this.tolerance)return!1;return!0}intersectRay(e,t){const n=this.faces;let r=-1/0,s=1/0;for(let a=0,l=n.length;a<l;a++){const u=n[a],d=u.distanceToPoint(e.origin),A=u.normal.dot(e.direction);if(d>0&&A>=0)return null;const y=0!==A?-d/A:0;if(!(y<=0)&&(A>0?s=Math.min(y,s):r=Math.max(y,r),r>s))return null}return e.at(r!==-1/0?r:s,t),t}intersectsRay(e){return null!==this.intersectRay(e,Koe)}makeEmpty(){return this.faces=[],this.vertices=[],this}addVertexToFace(e,t){return e.face=t,null===t.outside?this.assigned.append(e):this.assigned.insertBefore(t.outside,e),t.outside=e,this}removeVertexFromFace(e,t){return e===t.outside&&(t.outside=null!==e.next&&e.next.face===t?e.next:null),this.assigned.remove(e),this}removeAllVerticesFromFace(e){if(null!==e.outside){const t=e.outside;let n=e.outside;for(;null!==n.next&&n.next.face===e;)n=n.next;return this.assigned.removeSubList(t,n),t.prev=n.next=null,e.outside=null,t}}deleteFaceVertices(e,t){const n=this.removeAllVerticesFromFace(e);if(void 0!==n)if(void 0===t)this.unassigned.appendChain(n);else{let r=n;do{const s=r.next;t.distanceToPoint(r.point)>this.tolerance?this.addVertexToFace(r,t):this.unassigned.append(r),r=s}while(null!==r)}return this}resolveUnassignedPoints(e){if(!1===this.unassigned.isEmpty()){let t=this.unassigned.first();do{const n=t.next;let r=this.tolerance,s=null;for(let a=0;a<e.length;a++){const l=e[a];if(0===l.mark){const u=l.distanceToPoint(t.point);if(u>r&&(r=u,s=l),r>1e3*this.tolerance)break}}null!==s&&this.addVertexToFace(t,s),t=n}while(null!==t)}return this}computeExtremes(){const e=new kt,t=new kt,n=[],r=[];for(let s=0;s<3;s++)n[s]=r[s]=this.vertices[0];e.copy(this.vertices[0].point),t.copy(this.vertices[0].point);for(let s=0,a=this.vertices.length;s<a;s++){const l=this.vertices[s],u=l.point;for(let d=0;d<3;d++)u.getComponent(d)<e.getComponent(d)&&(e.setComponent(d,u.getComponent(d)),n[d]=l);for(let d=0;d<3;d++)u.getComponent(d)>t.getComponent(d)&&(t.setComponent(d,u.getComponent(d)),r[d]=l)}return this.tolerance=3*Number.EPSILON*(Math.max(Math.abs(e.x),Math.abs(t.x))+Math.max(Math.abs(e.y),Math.abs(t.y))+Math.max(Math.abs(e.z),Math.abs(t.z))),{min:n,max:r}}computeInitialHull(){const e=this.vertices,t=this.computeExtremes(),n=t.min,r=t.max;let s=0,a=0;for(let C=0;C<3;C++){const k=r[C].point.getComponent(C)-n[C].point.getComponent(C);k>s&&(s=k,a=C)}const l=n[a],u=r[a];let d,A;s=0,x9.set(l.point,u.point);for(let C=0,k=this.vertices.length;C<k;C++){const Q=e[C];if(Q!==l&&Q!==u){x9.closestPointToPoint(Q.point,!0,w9);const se=w9.distanceToSquared(Q.point);se>s&&(s=se,d=Q)}}s=-1,aF.setFromCoplanarPoints(l.point,u.point,d.point);for(let C=0,k=this.vertices.length;C<k;C++){const Q=e[C];if(Q!==l&&Q!==u&&Q!==d){const se=Math.abs(aF.distanceToPoint(Q.point));se>s&&(s=se,A=Q)}}const y=[];if(aF.distanceToPoint(A.point)<0){y.push(Gm.create(l,u,d),Gm.create(A,u,l),Gm.create(A,d,u),Gm.create(A,l,d));for(let C=0;C<3;C++){const k=(C+1)%3;y[C+1].getEdge(2).setTwin(y[0].getEdge(k)),y[C+1].getEdge(1).setTwin(y[k+1].getEdge(0))}}else{y.push(Gm.create(l,d,u),Gm.create(A,l,u),Gm.create(A,u,d),Gm.create(A,d,l));for(let C=0;C<3;C++){const k=(C+1)%3;y[C+1].getEdge(2).setTwin(y[0].getEdge((3-C)%3)),y[C+1].getEdge(0).setTwin(y[k+1].getEdge(1))}}for(let C=0;C<4;C++)this.faces.push(y[C]);for(let C=0,k=e.length;C<k;C++){const Q=e[C];if(Q!==l&&Q!==u&&Q!==d&&Q!==A){s=this.tolerance;let se=null;for(let he=0;he<4;he++){const re=this.faces[he].distanceToPoint(Q.point);re>s&&(s=re,se=this.faces[he])}null!==se&&this.addVertexToFace(Q,se)}}return this}reindexFaces(){const e=[];for(let t=0;t<this.faces.length;t++){const n=this.faces[t];0===n.mark&&e.push(n)}return this.faces=e,this}nextVertexToAdd(){if(!1===this.assigned.isEmpty()){let e,t=0;const n=this.assigned.first().face;let r=n.outside;do{const s=n.distanceToPoint(r.point);s>t&&(t=s,e=r),r=r.next}while(null!==r&&r.face===n);return e}}computeHorizon(e,t,n,r){let s;this.deleteFaceVertices(n),n.mark=1,s=null===t?t=n.getEdge(0):t.next;do{const a=s.twin,l=a.face;0===l.mark&&(l.distanceToPoint(e)>this.tolerance?this.computeHorizon(e,a,l,r):r.push(s)),s=s.next}while(s!==t);return this}addAdjoiningFace(e,t){const n=Gm.create(e,t.tail(),t.head());return this.faces.push(n),n.getEdge(-1).setTwin(t.twin),n.getEdge(0)}addNewFaces(e,t){this.newFaces=[];let n=null,r=null;for(let s=0;s<t.length;s++){const l=this.addAdjoiningFace(e,t[s]);null===n?n=l:l.next.setTwin(r),this.newFaces.push(l.face),r=l}return n.next.setTwin(r),this}addVertexToHull(e){const t=[];return this.unassigned.clear(),this.removeVertexFromFace(e,e.face),this.computeHorizon(e.point,null,e.face,t),this.addNewFaces(e,t),this.resolveUnassignedPoints(this.newFaces),this}cleanup(){return this.assigned.clear(),this.unassigned.clear(),this.newFaces=[],this}compute(){let e;for(this.computeInitialHull();void 0!==(e=this.nextVertexToAdd());)this.addVertexToHull(e);return this.reindexFaces(),this.cleanup(),this}}class Gm{constructor(){this.normal=new kt,this.midpoint=new kt,this.area=0,this.constant=0,this.outside=null,this.mark=0,this.edge=null}static create(e,t,n){const r=new Gm,s=new lF(e,r),a=new lF(t,r),l=new lF(n,r);return s.next=l.prev=a,a.next=s.prev=l,l.next=a.prev=s,r.edge=s,r.compute()}getEdge(e){let t=this.edge;for(;e>0;)t=t.next,e--;for(;e<0;)t=t.prev,e++;return t}compute(){const e=this.edge.tail(),t=this.edge.head(),n=this.edge.next.head();return Y3.set(e.point,t.point,n.point),Y3.getNormal(this.normal),Y3.getMidpoint(this.midpoint),this.area=Y3.getArea(),this.constant=this.normal.dot(this.midpoint),this}distanceToPoint(e){return this.normal.dot(e)-this.constant}}class lF{constructor(e,t){this.vertex=e,this.prev=null,this.next=null,this.twin=null,this.face=t}head(){return this.vertex}tail(){return this.prev?this.prev.vertex:null}length(){const e=this.head(),t=this.tail();return null!==t?t.point.distanceTo(e.point):-1}lengthSquared(){const e=this.head(),t=this.tail();return null!==t?t.point.distanceToSquared(e.point):-1}setTwin(e){return this.twin=e,e.twin=this,this}}class Zoe{constructor(e){this.point=e,this.prev=null,this.next=null,this.face=null}}class M9{constructor(){this.head=null,this.tail=null}first(){return this.head}last(){return this.tail}clear(){return this.head=this.tail=null,this}insertBefore(e,t){return t.prev=e.prev,t.next=e,null===t.prev?this.head=t:t.prev.next=t,e.prev=t,this}insertAfter(e,t){return t.prev=e,t.next=e.next,null===t.next?this.tail=t:t.next.prev=t,e.next=t,this}append(e){return null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail,e.next=null,this.tail=e,this}appendChain(e){for(null===this.head?this.head=e:this.tail.next=e,e.prev=this.tail;null!==e.next;)e=e.next;return this.tail=e,this}remove(e){return null===e.prev?this.head=e.next:e.prev.next=e.next,null===e.next?this.tail=e.prev:e.next.prev=e.prev,this}removeSubList(e,t){return null===e.prev?this.head=t.next:e.prev.next=t.next,null===t.next?this.tail=e.prev:t.next.prev=e.prev,this}isEmpty(){return null===this.head}}class Joe extends bo{constructor(e=[]){super();const t=[],n=[],s=(new Yoe).setFromPoints(e).faces;for(let a=0;a<s.length;a++){const l=s[a];let u=l.edge;do{const d=u.head().point;t.push(d.x,d.y,d.z),n.push(l.normal.x,l.normal.y,l.normal.z),u=u.next}while(u!==l.edge)}this.setAttribute("position",new Fs(t,3)),this.setAttribute("normal",new Fs(n,3))}}const Xp={Hits:new Ir(16711680),Tracks:new Ir(16711680),Jets:new Ir(2200782),CaloClusters:new Ir(16765286),MuonChambers:new Ir(16711680),Vertices:new Ir(16765286),MissingEnergy:new Ir(16777215),PlanarCaloCells:new Ir(16774810)};class cF{static step(e){const t=e.q/(e.unitC*e.p);let n,r,s,a,l,u,d;const A=uF.get(e.pos),y=e.dir.clone().cross(A).multiplyScalar(t),C=he=>{n=he*he,r=he/2;const re=e.pos.clone().add(e.dir.clone().multiplyScalar(r)).add(y.clone().multiplyScalar(n/8));s=uF.get(re),l=e.dir.clone().add(y.clone().multiplyScalar(r)).cross(s).multiplyScalar(t),u=e.dir.clone().add(l.clone().multiplyScalar(r)).cross(s).multiplyScalar(t);const Le=e.pos.clone().add(e.dir.clone().multiplyScalar(he)).add(u.clone().multiplyScalar(n/2));a=uF.get(Le),d=e.dir.clone().add(u.clone().multiplyScalar(he)).cross(a).multiplyScalar(t);const be=y.clone().sub(l).sub(u).add(d);return he*(Math.abs(be.x)+Math.abs(be.y)+Math.abs(be.z))};let k=C(e.stepSize);for(;k>2e-4;)e.stepSize*=.5,k=C(e.stepSize);const Q=e.stepSize,se=Math.pow(Q,2);return e.pos.add(e.dir.clone().multiplyScalar(Q)).add(y.clone().add(l).add(u).multiplyScalar(se/6)),e.dir.add(y.clone().add(l.clone().multiplyScalar(2)).add(u.clone().multiplyScalar(2)).add(d).multiplyScalar(Q/6)),e.dir.normalize(),e.stepSize}static propagate(e,t,n,r,s=-1,a=1e3,l=(()=>!0)){const u=new eae;u.pos=e,u.dir=t,u.p=n,u.q=r,u.maxStepSize=s;const d=[];for(;u.pathLength<a;){u.pathLength+=cF.step(u);const A=JSON.parse(JSON.stringify(u));if(d.push({pos:A.pos,dir:A.dir}),!l(A.pos))break}return d}}class eae{constructor(){this.pos=new kt(0,0,0),this.dir=new kt(0,0,0),this.p=0,this.q=1,this.unitC=3.3333,this.stepSize=1e3,this.maxStepSize=10,this.pathLength=0}}class uF{static get(e){return new kt(0,0,2)}}class DC{static extrapolationLimit(e){return!(e.z>3e3||Math.sqrt(e.x*e.x+e.y*e.y)>1100)}static getTracksWithRungeKutta(e){const t=Object.assign({},e);for(const r of Object.keys(t))for(const s of t[r])s.pos=DC.extrapolateTrackPositions(s);return{}}static extrapolateTrackPositions(e,t=DC.extrapolationLimit){const n=e.dparams,r=n[0],a=n[2];let l=n[3];const u=n[4];let d;l<0&&(l+=Math.PI),d=0!==u?Math.abs(1/u):Number.MAX_VALUE;const A=Math.round(d*u),y=Df.sphericalToCartesian(d,l,a),C=Df.sphericalToCartesian(r,l,a),k=[];k.push([C.x,C.y,C.z]);const Q=y.clone();Q.normalize();const he=cF.propagate(C,Q,d,A,5,1500,t).map(re=>[re.pos.x,re.pos.y,re.pos.z]);return k.concat(he)}}class Tu{static getTracks(e){var t;const n=new $U,r=new Kse({lineWidth:2});for(const a of e){if((null===(t=a.pos)||void 0===t?void 0:t.length)>2||(a.dparams&&(a.pos=DC.extrapolateTrackPositions(a)),a.extended=!0),a.pos.length<2){console.log("Track too short, and extrapolation failed.");continue}a?.dparams&&(a?.phi||(a.phi=a.dparams[2]),a?.eta||(a.eta=Df.thetaToEta(a.dparams[3])),a?.d0||(a.d0=a.dparams[0]),a?.z0||(a.z0=a.dparams[1]));const l=a.pos.map(y=>new kt(y[0],y[1],y[2])),d=new tP(l).getPoints(50),A=a.color?parseInt(a.color,16):Xp.Tracks.getHex();a.tid=n.addTrack(d,A),a.material=r}n.process();const s=new Ua(n,r);s.name="Track";for(const a of e)a.uuid=s.uuid;return s}static getTrack(e){var t;(null===(t=e.pos)||void 0===t?void 0:t.length)>2||(e.dparams&&(e.pos=DC.extrapolateTrackPositions(e)),e.extended=!0);const n=e.pos;if(n.length<2)return void console.log("Track too short, and extrapolation failed.");e?.dparams&&(e?.phi||(e.phi=e.dparams[2]),e?.eta||(e.eta=Df.thetaToEta(e.dparams[3])),e?.d0||(e.d0=e.dparams[0]),e?.z0||(e.z0=e.dparams[1]));const r=e.color?parseInt(e.color,16):Xp.Tracks.getHex(),s=[];for(let se=0;se<n.length;se++){s.push(new kt(n[se][0],n[se][1],n[se][2]));const he=Math.sqrt(n[se][0]*n[se][0]+n[se][1]*n[se][1]+n[se][2]*n[se][2]);Math.acos(n[se][2]/he)}const a=new tP(s),l=new sb(a,void 0,2),u=new j7({color:r}),d=new Ua(l,u),A=a.getPoints(50),y=(new bo).setFromPoints(A),C=new eu({color:r,linewidth:2}),k=new r0(y,C);k.name="Track";const Q=new Wu;Q.add(d),Q.add(k);for(const se of[d,Q,k])se.userData=Object.assign({},e),se.name="Track";return e.uuid=Q.uuid,Q}static getJet(e){var t;const r=e.phi,s=e.theta?e.theta:Df.etaToTheta(e.eta),a=.2*(e.energy?e.energy:e.et),l=Math.sin(r),u=Math.cos(r),d=Math.sin(s),A=Math.cos(s),y=new kt(.5*a*u*d,.5*a*l*d,.5*a*A),C=e.coneR?a*Math.sin(e.coneR):.1*a,k=u*d,Q=l*d,se=A,he=new kt(0,1,0),re=new kt(k,Q,se),Le=new Uc;Le.setFromUnitVectors(he,re);const be=new Fw(C,10,a,50,50,!1),Ye=new Ah({color:null!==(t=e.color)&&void 0!==t?t:Xp.Jets,opacity:.3,transparent:!0});Ye.opacity=.5;const dt=new Ua(be,Ye);return dt.position.copy(y),dt.quaternion.copy(Le),dt.userData=Object.assign({},e),dt.name="Jet",e.uuid=dt.uuid,dt}static getHits(e){let t,r="Point",s=3,a=!1;if(!(e.length>0))return console.log("No hits! Aborting from getHits."),new Tc;{const A=e[0];Array.isArray(A)?(a=!0,t={pos:e}):(t=e,"type"in A&&(r=A.type))}("Line"===r||"Box"===r)&&(s=6);const l=e.length*s;a&&(length=l);const u=new Float32Array(l);let d=0;for(const A of e)for(let y=0;y<s;++y,++d)u[d]=a?A[y]:A.pos[y];switch(r){case"Point":return Tu.hitsToPoints(u,e,t);case"CircularPoint":return Tu.hitsToCircularPoints(u,e,t);case"Line":return Tu.hitsToLines(u,e,t);case"Box":return Tu.hitsToBoxes(u,e,t);default:return void console.log("ERROR: Unknown hit type!")}}static hitsToPoints(e,t,n){var r;const s=new bo;s.setAttribute("position",new va(e,3)),s.computeBoundingSphere();const a=new U_({size:10,color:null!==(r=t[0].color)&&void 0!==r?r:Xp.Hits}),l=new nb(s,a);return l.userData={},l.name="Hit",t.uuid=l.uuid,l}static hitsToCircularPoints(e,t,n){var r,s;const a=new bo;a.setAttribute("position",new va(e,3)),a.computeBoundingSphere();const l=document.createElement("canvas");l.width=128,l.height=128;const u=l.getContext("2d");u.clearRect(0,0,128,128),u.fillStyle="white",u.beginPath(),u.arc(64,64,64,0,2*Math.PI),u.fill();const d=new cie(l),A=new U_({size:null!==(r=t[0].size)&&void 0!==r?r:10,color:null!==(s=t[0].color)&&void 0!==s?s:Xp.Hits,map:d,alphaMap:d,alphaTest:.5}),y=new nb(a,A);return y.userData={},y.name="CircularHit",t.uuid=y.uuid,y}static hitsToLines(e,t,n){var r;const s=new bo;s.setAttribute("position",new va(e,3)),s.computeBoundingSphere();const a=new eu({linewidth:2,color:null!==(r=t.color)&&void 0!==r?r:Xp.Hits}),l=new NA(s,a);return l.userData={},l.name="LineHit",t.uuid=l.uuid,l}static hitsToBoxes(e,t,n){var r;const s=[];for(let d=0;d<e.length;d+=6){const A=new Lm(e[d+3],e[d+4],e[d+5]);A.translate(e[d],e[d+1],e[d+2]),s.push(A)}const a=NP(s);a.computeBoundingSphere();const l=new Um({color:null!==(r=t.color)&&void 0!==r?r:Xp.Hits}),u=new Ua(a,l);return u.userData={},u.name="BoxHit",t.uuid=u.uuid,u}static getCluster(e,t=1800,n=3600,r=.03){var s;const l=null!==(s=e.side)&&void 0!==s?s:40,u=Tu.getCaloCube(e,l,e.energy*r),d=Tu.getCaloPosition(e,t,n);return u.position.copy(d),u.lookAt(new kt(0,0,0)),u.userData=Object.assign({},e),u.name="Cluster",e.uuid=u.uuid,u}static getCaloPosition(e,t=1800,n=3600,r=!0){var s,a,l;const u=null!==(s=e.theta)&&void 0!==s?s:Df.etaToTheta(e.eta),d=r?null!==(a=e.radius)&&void 0!==a?a:t+n:null!==(l=e.radius)&&void 0!==l?l:t,A=Df.sphericalToCartesian(d,u,e.phi);if(e.z&&A.setLength(A.length()*e.z/Math.abs(A.z)),!e.radius&&!e.z){Math.abs(A.z)>n&&A.setLength(A.length()*n/Math.abs(A.z));const y=A.x*A.x+A.y*A.y,C=t*t;y>C&&A.setLength(A.length()*Math.sqrt(C)/Math.sqrt(y))}return A}static getCaloCube(e,t=30,n=30){var r,s,a;const l=null!==(r=e.side)&&void 0!==r?r:t;let u=null!==(s=e.length)&&void 0!==s?s:n;u<l&&(u=l);const d=new Lm(l,l,u),A=new Um({color:null!==(a=e.color)&&void 0!==a?a:Xp.CaloClusters});return new Ua(d,A)}static getCaloCell(e){const a=Tu.getCaloCube(e,30,30),l=Tu.getCaloPosition(e,1700,2e3);return a.position.copy(l),e.radius||e.z?e.z&&!e.radius&&a.lookAt(new kt(l.x,l.y,0)):a.lookAt(new kt(0,0,0)),e.radius&&a.lookAt(new kt(0,0,l.z)),a.userData=Object.assign({},e),a.name="Cluster",e.uuid=a.uuid,a}static getPlanarCaloCells(e){var t;const n=[];for(const a of e){const l=a.pos;if(!l)continue;const u=.22*a.energy,d=a.cellSize,A=a.plane,y=new Lm(d,d,u);y.translate(l[0],l[1],A[3]+u/2);const C=new Uc;C.setFromUnitVectors(new kt(0,0,1),new kt(...A.slice(0,3))),y.applyQuaternion(C),n.push(y)}const r=new Um({color:null!==(t=e[0].color)&&void 0!==t?t:Xp.PlanarCaloCells}),s=new Ua(NP(n),r);s.userData=Object.assign({},e[0]),s.name="PlanarCaloCell";for(const a of e)a.uuid=s.uuid;return s}static getPlanarCaloCell(e){var t;const n=e.pos;if(!n)return;const r=.22*e.energy,s=e.cellSize,a=e.plane,l=new Lm(s,s,r),u=new Tc,d=new Um({color:null!==(t=e.color)&&void 0!==t?t:Xp.PlanarCaloCells}),A=new Ua(l,d);u.add(A);const y=new kt(...n.slice(0,2),a[3]+r/2);A.position.copy(y);const C=new Uc;return C.setFromUnitVectors(new kt(0,0,1),new kt(...a.slice(0,3))),u.quaternion.copy(C),u.userData=Object.assign({},e),u.name="PlanarCaloCell",e.uuid=u.uuid,u}static getVertex(e){var t,n;const r=new hy(null!==(t=e.size)&&void 0!==t?t:3);console.log(r);const s=new Um({color:null!==(n=e.color)&&void 0!==n?n:Xp.Vertices}),a=new Ua(r,s);return"pos"in e?(a.position.x=e.pos[0],a.position.y=e.pos[1],a.position.z=e.pos[2]):(a.position.x=e.x,a.position.y=e.y,a.position.z=e.z),a.userData=Object.assign({},e),a.name="Vertex",e.uuid=a.uuid,a}static getMissingEnergy(e){var t;const n=[];n.push(new kt(0,0,0)),n.push(new kt(e.etx,e.ety,0));const r=(new bo).setFromPoints(n),s=new P3({linewidth:2,dashSize:2,color:null!==(t=e.color)&&void 0!==t?t:Xp.MissingEnergy}),a=new r0(r,s);return a.computeLineDistances(),a.userData=Object.assign({},e),a.name="Missing Energy",e.uuid=a.uuid,a}static getIrregularCaloCell(e){const t=[];for(let l=0;l<24;l+=3)t.push(new kt(e.vtx[l],e.vtx[l+1],e.vtx[l+2]));const n=new Joe(t),r=new Ir("rgb("+e.color[0].toString()+","+e.color[1].toString()+","+e.color[2].toString()+")"),s=new Um({color:r,transparent:!0,opacity:e.opacity}),a=new Ua(n,s);return a.userData=Object.assign({},e),a.name="IrregularCaloCell",e.uuid=a.uuid,a}}const C9=(i,e,t)=>`${i} > ${e} > ${t}`;class wy{constructor(){this.labelsObject={},this.loadingManager=new pb,this.stateManager=new zm}buildEventData(e,t,n,r){this.graphicsLibrary=t,this.ui=n,this.eventData=e,this.loadObjectTypes(e);const s=e["event number"]?e["event number"]:e.eventNumber,a=e["run number"]?e["run number"]:e.runNumber;r.add("Event#"+s+" from run#"+a,"Loaded"),this.stateManager.eventMetadata={runNumber:a,eventNumber:s}}getEventsList(e){const t=[];for(const n in e)null!==e[n]&&t.push(n);return t}getCollections(){if(!this.eventData)return null;const e=[];for(const t in this.eventData)if(this.eventData[t]&&"object"==typeof this.eventData[t])for(const n in this.eventData[t])e.push(n);return e}getCollection(e){if(!this.eventData)return null;for(const t in this.eventData)if(this.eventData[t])for(const n in this.eventData[t])if(n===e)return this.eventData[t][n]}loadObjectTypes(e){const t=parseFloat(Math.PI.toFixed(2));if(e.Tracks){const n=[new Dl("phi",-t,t,.01),new Dl("eta",-4,4,.1),new Dl("chi2",0,100),new Dl("dof",0,100),new Dl("pT",0,5e4,.1),new Dl("z0",-30,30,.1),new Dl("d0",-30,30,.1)];this.addObjectType(e.Tracks,Tu.getTrack,"Tracks",!1,n)}if(e.Jets){const n=[new Dl("phi",-t,t,.01),new Dl("eta",-5,5,.1),new Dl("energy",0,6e5,100)],s=this.addScaleOptions("jetsScale","Jets Scale",a=>{this.graphicsLibrary.getSceneManager().scaleJets(a)});this.addObjectType(e.Jets,Tu.getJet,"Jets",!1,n,s)}if(e.Hits&&this.addObjectType(e.Hits,Tu.getHits,"Hits",!0),e.CaloClusters){const n=[new Dl("phi",-t,t,.01),new Dl("eta",-5,5,.1),new Dl("energy",0,1e4)],s=this.addScaleOptions("caloClustersScale","CaloClusters Scale",a=>{this.graphicsLibrary.getSceneManager().scaleChildObjects("CaloClusters",a,"z")});this.addObjectType(e.CaloClusters,Tu.getCluster,"CaloClusters",!1,n,s)}if(e.CaloCells){const n=[new Dl("phi",-t,t,.01),new Dl("eta",-5,5,.1),new Dl("energy",0,1e4)],s=this.addScaleOptions("caloCellsScale","CaloCells Scale",a=>{this.graphicsLibrary.getSceneManager().scaleChildObjects("CaloCells",a,"z")});this.addObjectType(e.CaloCells,Tu.getCaloCell,"CaloCells",!1,n,s)}if(e.PlanarCaloCells){const n=[new Dl("energy",0,1e4)],s=this.addScaleOptions("planarCaloCellsScale","PlanarCaloCells Scale",l=>{this.graphicsLibrary.getSceneManager().scaleChildObjects("PlanarCaloCells",l,"z")}),a={};for(const l in e.PlanarCaloCells){const u=e.PlanarCaloCells[l],d=u.plane,A=new kt(...d.slice(0,3)).normalize();u.cells.forEach(y=>y.plane=[...A.toArray(),d[3]]),a[l]=u.cells}this.addObjectType(a,Tu.getPlanarCaloCell,"PlanarCaloCells",!1,n,s)}if(e.IrregularCaloCells){const n=[new Dl("layer",0,10),new Dl("energy",0,1e4)],s=this.addScaleOptions("IrregularCaloCellsScale","IrregularCaloCells Scale",a=>{this.graphicsLibrary.getSceneManager().scaleChildObjects("IrregularCaloCells",a,"z")});this.addObjectType(e.IrregularCaloCells,Tu.getIrregularCaloCell,"IrregularCaloCells",!1,n,s)}if(e.Muons){const n=[new Dl("phi",-t,t,.01),new Dl("eta",-4,4,.1),new Dl("energy",0,1e4),new Dl("pT",0,5e4)];this.addObjectType(e.Muons,this.getCompound,"Muons",!1,n)}if(e.Photons){const n=[new Dl("phi",-t,t,.01),new Dl("eta",-4,4,.1),new Dl("energy",0,1e4),new Dl("pT",0,5e4)];this.addObjectType(e.Photons,this.getCompound,"Photons",!1,n)}if(e.Electrons){const n=[new Dl("phi",-t,t,.01),new Dl("eta",-4,4,.1),new Dl("energy",0,1e4),new Dl("pT",0,5e4)];this.addObjectType(e.Electrons,this.getCompound,"Electrons",!1,n)}if(e.Vertices){const n=[new Dl("vertexType",0,5)],s=this.addScaleOptions("verticesScale","Vertices Scale",a=>{this.graphicsLibrary.getSceneManager().scaleChildObjects("Vertices",a)});this.addObjectType(e.Vertices,Tu.getVertex,"Vertices",!1,n,s)}e.MissingEnergy&&this.addObjectType(e.MissingEnergy,Tu.getMissingEnergy,"MissingEnergy",!1,[],(r,s)=>{const a=l=>{this.graphicsLibrary.getSceneManager().scaleChildObjects("MissingEnergy",l)};r&&r.add({jetsScale:100},"jetsScale",1,200).name("Size (%)").onChange(a),s&&s.addConfig("slider",{label:"Size (%)",value:100,min:1,max:200,allowCustomValue:!0,onChange:a})})}addObjectType(e,t,n,r=!1,s,a){var l,u;const d=this.graphicsLibrary.addEventDataTypeGroup(n),A=this.getObjectTypeCollections(e);this.ui.addEventDataTypeFolder(n);for(const k of A){const Q=e[k];console.log(`${n} collection ${k} has ${Q.length} constituents.`),0!=Q.length?(this.addCollection(Q,k,t,d,r),s=s?.filter(se=>se.field in Q[0]),this.ui.addCollection(n,k,s)):console.log("Skipping")}a?.(null===(l=this.ui.getUIMenus().find(k=>k instanceof v9))||void 0===l?void 0:l.getEventDataTypeFolder(n),null===(u=this.ui.getUIMenus().find(k=>k instanceof oF))||void 0===u?void 0:u.getEventDataTypeFolder(n))}addCollection(e,t,n,r,s){const a=new Wu;if(a.name=t,s){const l=n.bind(this)(e);l&&a.add(l)}else for(const l of e){const u=n.bind(this)(l);u&&a.add(u)}r.add(a)}getObjectTypeCollections(e){const t=[];for(const n in e)null!==e[n]&&t.push(n);return t}getCompound(e){const t=new Wu;if("LinkedClusters"in e)for(const r of e.LinkedClusters){const s=r.split(":")[0],a=r.split(":")[1];if(s&&a&&this.eventData.CaloClusters&&this.eventData.CaloClusters[s]){const l=this.eventData.CaloClusters[s][a];if(l){const u=Tu.getCluster(l);t.add(u)}}}let n=!1;if("LinkedTracks"in e)for(const r of e.LinkedTracks){const s=r.split(":")[0],a=r.split(":")[1];if(s&&a&&this.eventData.Tracks&&this.eventData.Tracks[s]){const l=this.eventData.Tracks[s][a];if(l){const u=Tu.getTrack(l);u?(t.add(u),n=!0):console.log("WARNING: failed to get a track back.")}}}if(!n){new kt(0,0,0);const s=Df.etaToTheta(e.eta),a=e.pt/Math.cos(Math.PI/2-s);let l=0;"pdgId"in e&&(l=e.pdgId>0?1:-1);const d=Tu.getTrack({dparams:[0,0,e.phi,s,l/a]});d?t.add(d):console.log("WARNING: failed to get a track back.")}return e.uuid=t.uuid,t.name="CompoundObj",t}getEventMetadata(){const e=[],t=[[{keys:["runNumber","run number"],label:"Run"},{keys:["eventNumber","event number"],label:"Event"},{keys:["ls"],label:"LS"},{keys:["lumiBlock"],label:"LumiBlock"}],[{keys:["time"],label:"Data recorded"}]],n=Object.keys(this.eventData);for(const r of t){const s={};for(const a of r)for(const l of a.keys)if(n.includes(l)&&l in this.eventData){s[a.label]=this.eventData[l];break}Object.keys(s).length>0&&e.push({label:Object.keys(s).join(" / "),value:Object.values(s).join(" / ")})}return e}addLabelToEventObject(e,t,n){var r,s;for(const a in this.eventData)if(null!==(s=null===(r=this.eventData)||void 0===r?void 0:r[a])&&void 0!==s&&s[t])return this.labelsObject[a]=this.labelsObject[a]||{},this.labelsObject[a][t]=this.labelsObject[a][t]||{},this.labelsObject[a][t][n]=e,C9(a,t,n)}getLabelsObject(){return this.labelsObject}addScaleOptions(e,t,n){return(r,s)=>{r&&r.add({[e]:1},e,.001,100).name(t).onChange(n),s&&s.addConfig("slider",{label:t,value:1,min:.001,step:.01,max:100,allowCustomValue:!0,onChange:n})}}}class BC extends wy{constructor(){super(),this.data={}}process(e){console.log("Processing JiveXML event data"),this.data=e}getEventData(){const n=(new DOMParser).parseFromString(this.data,"text/xml").getElementsByTagName("Event")[0],r={eventNumber:n.getAttribute("eventNumber"),runNumber:n.getAttribute("runNumber"),lumiBlock:n.getAttribute("lumiBlock"),time:n.getAttribute("dateTime"),Hits:void 0,Tracks:{},Jets:{},CaloClusters:{},CaloCells:{},PlanarCaloCells:{},Vertices:{},Electrons:{},Muons:{},Photons:{},MissingEnergy:{}};return this.getPixelClusters(n,r),this.getSCTClusters(n,r),this.getTRT_DriftCircles(n,r),this.getMuonPRD(n,"MDT",r),this.getRPC(n,r),this.getMuonPRD(n,"TGC",r),this.getMuonPRD(n,"CSCD",r),this.getMuonPRD(n,"MM",r),this.getMuonPRD(n,"STGC",r),this.getTracks(n,r),this.getJets(n,r),this.getCaloClusters(n,r),this.getCaloCells(n,"LAr",r),this.getCaloCells(n,"HEC",r),this.getCaloCells(n,"Tile",r),this.getVertices(n,r),this.getMissingEnergy(n,r),this.getElectrons(n,r),this.getMuons(n,r),this.getPhotons(n,r),r}getNumberArrayFromHTML(e,t){let n=[];const r=e.getElementsByTagName(t);return r.length&&(n=r[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(Number)),n}getStringArrayFromHTML(e,t){return e.getElementsByTagName(t)[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(String)}getPositionOfHit(e,t){for(const n in t.Hits)for(const r of t.Hits[n])if(null==r)console.log("Empty hit");else if("id"in r&&r.id==e)return[!0,r.pos[0],r.pos[1],r.pos[2]];return[!1,0,0,0]}getTracks(e,t){const n=e.getElementsByTagName("Track"),r=Array.from(n),s={};for(const a of r){let l=a.getAttribute("storeGateKey");"Tracks"===l&&(l="Tracks_");const u=Number(a.getAttribute("count")),d=[];let y,C,k,Q;if(0===a.getElementsByTagName("numPolyline").length)console.log("WARNING the track collection "+l+" has no line information. Will rely on Phoenix to extrapolate.");else{Q=this.getNumberArrayFromHTML(a,"numPolyline");const Nn=a.getElementsByTagName("polylineX");Nn.length>0?(y=Nn[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(Number),C=this.getNumberArrayFromHTML(a,"polylineY"),k=this.getNumberArrayFromHTML(a,"polylineZ")):(Q=null,y=null,C=null,k=null)}const se=this.getNumberArrayFromHTML(a,"chi2"),he=this.getNumberArrayFromHTML(a,"numDoF"),re=this.getNumberArrayFromHTML(a,"pt"),Le=this.getNumberArrayFromHTML(a,"d0"),be=this.getNumberArrayFromHTML(a,"z0"),Ye=this.getNumberArrayFromHTML(a,"phi0"),dt=this.getNumberArrayFromHTML(a,"cotTheta");let nn;this.getNumberArrayFromHTML(a,"hits"),this.getNumberArrayFromHTML(a,"numHits"),(u!=re.length||u!=Le.length||u!=be.length||u!=dt.length)&&console.log("ERROR: Wrong number of some track variables. Corrupted JiveXML?"),a.getElementsByTagName("trackAuthor").length&&(nn=this.getNumberArrayFromHTML(a,"trackAuthor"));let gt=0;Q&&Q.length!=u&&console.log("numPolyline ",Q.length,"numOfTracks",u);for(let Nn=0;Nn<u;Nn++){let yi=!0;const Rn=!1,kn={chi2:0,dof:0,pT:0,phi:0,eta:0,pos:[],dparams:[],hits:{},author:{},badtrack:[]};se.length>=Nn&&(kn.chi2=se[Nn]),he.length>=Nn&&(kn.dof=he[Nn]),nn?.length>=Nn&&(kn.author=nn[Nn]);let li=Math.atan(1/dt[Nn]);kn.pT=1e3*Math.abs(re[Nn]);const Wn=kn.pT/Math.sin(li);kn.dparams=[Le[Nn],be[Nn],Ye[Nn],li,1/Wn],kn.phi=Ye[Nn],li<0&&(li+=Math.PI),kn.phi>Math.PI?kn.phi-=2*Math.PI:kn.phi<-Math.PI&&(kn.phi+=2*Math.PI),Df.anglesAreSane(li,kn.phi)||(s["Improper angles"]++,kn.badtrack.push("Improper angles"),yi=!1),kn.eta=Df.thetaToEta(li),Number.isNaN(kn.eta)&&(kn.badtrack.push("Invalid eta"),yi=!1);const ni=[];let Ei=0,Ki=0,Zr=0,Hr=0,Ci=0;if(Q){(gt+Q[Nn]>y.length||gt+Q[Nn]>C.length||gt+Q[Nn]>k.length)&&console.log("ERROR: not enough points left for this track. Corrupted JiveXML?");for(let Ii=0;Ii<Q[Nn];Ii++)Zr=10*y[gt+Ii],Hr=10*C[gt+Ii],Ci=10*k[gt+Ii],ni.push([Zr,Hr,Ci]),Ki=Math.sqrt(Zr*Zr+Hr*Hr+Ci*Ci),Ki<Ei&&(console.log("WARNING: track positions do not seem to be sorted radially"),s["Hits not sorted"]++,kn.badtrack.push("Hits not sorted")),Rn&&(console.log("pos: ",Ii,"/",Q[Nn],":",ni),console.log("theta:",li,"theta from hit",Math.acos(Ci/Ki))),Ei=Ki;gt+=Q[Nn],kn.pos=ni}yi&&d.push(kn)}Q&&(gt!=y.length||gt!=C.length||gt!=k.length)&&console.log("ERROR: something has gone wrong with assigning the positions to the tracks!"),t.Tracks[l]=d}for(const a in s)s[a]>0&&console.log(s[a]+' tracks had "'+a+'" and were marked as bad.')}getPixelClusters(e,t){if(t.Hits={},0===e.getElementsByTagName("PixCluster").length)return;const n=e.getElementsByTagName("PixCluster")[0],r=Number(n.getAttribute("count")),s=this.getNumberArrayFromHTML(n,"id"),a=this.getNumberArrayFromHTML(n,"x0"),l=this.getNumberArrayFromHTML(n,"y0"),u=this.getNumberArrayFromHTML(n,"z0"),d=this.getNumberArrayFromHTML(n,"eloss");t.Hits.Pixel=[];for(let A=0;A<r;A++){const y={pos:[],id:0,energyLoss:0};y.pos=[10*a[A],10*l[A],10*u[A]],y.id=s[A],y.energyLoss=d[A],t.Hits.Pixel.push(y)}}getSCTClusters(e,t){if(0===e.getElementsByTagName("STC").length)return;const n=e.getElementsByTagName("STC")[0],r=Number(n.getAttribute("count")),s=this.getNumberArrayFromHTML(n,"id"),a=this.getNumberArrayFromHTML(n,"phiModule"),l=this.getNumberArrayFromHTML(n,"side"),u=this.getNumberArrayFromHTML(n,"x0"),d=this.getNumberArrayFromHTML(n,"y0"),A=this.getNumberArrayFromHTML(n,"z0");t.Hits.SCT=[];for(let y=0;y<r;y++){const C={pos:[],id:0,phiModule:0,side:0};C.pos=[10*u[y],10*d[y],10*A[y]],C.id=s[y],C.phiModule=a[y],C.side=l[y],t.Hits.SCT.push(C)}}getTRT_DriftCircles(e,t){if(0===e.getElementsByTagName("TRT").length)return;const n=e.getElementsByTagName("TRT")[0],r=Number(n.getAttribute("count")),s=this.getNumberArrayFromHTML(n,"driftR"),a=this.getNumberArrayFromHTML(n,"id"),l=this.getNumberArrayFromHTML(n,"noise"),u=this.getNumberArrayFromHTML(n,"phi"),d=this.getNumberArrayFromHTML(n,"rhoz"),A=this.getNumberArrayFromHTML(n,"sub"),y=this.getNumberArrayFromHTML(n,"threshold"),C=this.getNumberArrayFromHTML(n,"timeOverThreshold");t.Hits.TRT=[];for(let k=0;k<r;k++){const Q={pos:[],id:0,type:"Line",driftR:0,threshold:0,timeOverThreshold:0,noise:!1};if(1==A[k]||2==A[k]){const se=1==A[k]?-3.5:3.5,he=1==A[k]?-742:742;Q.pos=[Math.cos(u[k])*d[k]*10,Math.sin(u[k])*d[k]*10,se,Math.cos(u[k])*d[k]*10,Math.sin(u[k])*d[k]*10,he]}else{const se=Math.abs(d[k])>280?480:640,he=1030;Q.pos=[Math.cos(u[k])*se,Math.sin(u[k])*se,10*d[k],Math.cos(u[k])*he,Math.sin(u[k])*he,10*d[k]]}Q.id=a[k],Q.driftR=s[k],Q.noise=l[k],Q.threshold=y[k],Q.timeOverThreshold=C[k],t.Hits.TRT.push(Q)}}getMuonPRD(e,t,n){if(0===e.getElementsByTagName(t).length)return;const r=e.getElementsByTagName(t)[0];"CSCD"==t&&(t="CSC");const s=Number(r.getAttribute("count")),a=this.getNumberArrayFromHTML(r,"x"),l=this.getNumberArrayFromHTML(r,"y"),u=this.getNumberArrayFromHTML(r,"z"),d=this.getNumberArrayFromHTML(r,"length"),A=this.getNumberArrayFromHTML(r,"id"),y=this.getStringArrayFromHTML(r,"identifier");n.Hits[t]=[];for(let C=0;C<s;C++){const k={pos:[],id:A[C],type:"Line",identifier:y[C]};k.pos=this.getMuonLinePositions(C,a,l,u,d),n.Hits[t].push(k)}}getRPC(e,t){const n="RPC";if(0===e.getElementsByTagName(n).length)return;const r=e.getElementsByTagName(n)[0],s=Number(r.getAttribute("count")),a=this.getNumberArrayFromHTML(r,"x"),l=this.getNumberArrayFromHTML(r,"y"),u=this.getNumberArrayFromHTML(r,"z"),d=this.getNumberArrayFromHTML(r,"length"),A=this.getNumberArrayFromHTML(r,"width"),y=this.getNumberArrayFromHTML(r,"id"),C=this.getStringArrayFromHTML(r,"identifier");t.Hits[n]=[];for(let k=0;k<s;k++){const Q={pos:[],id:y[k],type:"Line",identifier:C[k],width:A[k]};Q.pos=this.getMuonLinePositions(k,a,l,u,d),t.Hits[n].push(Q)}}getMuonLinePositions(e,t,n,r,s){const a=Math.sqrt(t[e]*t[e]+n[e]*n[e]),l=s[e]/a;return[10*t[e]-n[e]*l*5,10*n[e]+t[e]*l*5,10*r[e],10*t[e]+n[e]*l*5,10*n[e]-t[e]*l*5,10*r[e]]}getJets(e,t){var n;const r=e.getElementsByTagName("Jet"),s=Array.from(r);for(const a of s){const l=Number(a.getAttribute("count")),u=this.getNumberArrayFromHTML(a,"phi"),d=this.getNumberArrayFromHTML(a,"eta"),A=this.getNumberArrayFromHTML(a,"energy"),y=this.getNumberArrayFromHTML(a,"coneR"),C=[];for(let k=0;k<l;k++)C.push({coneR:null!==(n=y[k])&&void 0!==n?n:.4,phi:u[k],eta:d[k],energy:1e3*A[k]});t.Jets[a.getAttribute("storeGateKey")]=C}}getCaloClusters(e,t){const n=e.getElementsByTagName("Cluster"),r=Array.from(n);for(const s of r){const a=Number(s.getAttribute("count")),l=this.getNumberArrayFromHTML(s,"phi"),u=this.getNumberArrayFromHTML(s,"eta"),d=this.getNumberArrayFromHTML(s,"et"),A=[];for(let y=0;y<a;y++)A.push({phi:l[y],eta:u[y],energy:1e3*d[y]});t.CaloClusters[s.getAttribute("storeGateKey")]=A}}getFCALCaloCells(e,t,n){if(0===e.getElementsByTagName(t).length)return;const r=e.getElementsByTagName(t)[0],s=Number(r.getAttribute("count")),a=this.getNumberArrayFromHTML(r,"x"),l=this.getNumberArrayFromHTML(r,"y"),u=this.getNumberArrayFromHTML(r,"z"),d=this.getNumberArrayFromHTML(r,"dx"),y=(this.getNumberArrayFromHTML(r,"dy"),this.getNumberArrayFromHTML(r,"dz")),C=this.getNumberArrayFromHTML(r,"channel"),Q=(this.getNumberArrayFromHTML(r,"energy"),this.getNumberArrayFromHTML(r,"id")),se=this.getStringArrayFromHTML(r,"slot");n.PlanarCaloCells[t]={cells:[]};let he=0;for(let re=0;re<s;re++){const Le=u.length?10*u[re]:10;n.PlanarCaloCells[t].cells.push({pos:[10*a[re],10*l[re],Le],length:y.length?10*y[re]:d[re],cellSize:10*d[re],id:Q[re],slot:se[re],channel:C[re]}),he&&he!=Le&&console.log("WARNING - we're assuming that all cells have the same z. This is apparently not correct!"),he=Le}n.PlanarCaloCells[t].plane=[10,10,he]}getCaloCells(e,t="FCAL",n){if(0===e.getElementsByTagName(t).length)return;const r=e.getElementsByTagName(t)[0],s=Number(r.getAttribute("count")),a=this.getNumberArrayFromHTML(r,"eta"),l=this.getNumberArrayFromHTML(r,"phi"),u=this.getNumberArrayFromHTML(r,"channel"),d=this.getNumberArrayFromHTML(r,"energy"),A=this.getNumberArrayFromHTML(r,"id");this.getStringArrayFromHTML(r,"slot"),n.CaloCells[t]=[];for(let C=0;C<s;C++)n.CaloCells[t].push({eta:a[C],phi:l[C],id:A[C],energy:d[C],channel:u[C]})}getVertices(e,t){const n=e.getElementsByTagName("RVx"),r=Array.from(n);for(const s of r){const a=Number(s.getAttribute("count")),l=s.getElementsByTagName("x")[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(Number),u=s.getElementsByTagName("y")[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(Number),d=s.getElementsByTagName("z")[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(Number),A=s.getElementsByTagName("chi2")[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(Number),y=s.getElementsByTagName("primVxCand")[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(Number),C=s.getElementsByTagName("vertexType")[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(Number),k=s.getElementsByTagName("numTracks")[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(Number),Q=s.getElementsByTagName("sgkey")[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(String),se=s.getElementsByTagName("tracks")[0].innerHTML.replace(/\r\n|\n|\r/gm," ").trim().split(" ").map(Number),he=[];let re=0;for(let Le=0;Le<a;Le++){const be=re+k[Le],Ye=[];for(;re<be;re++)re>se.length&&console.log("Error! TrackIndex exceeds maximum number of track indices."),Ye.push(se[re]);he.push({x:l[Le],y:u[Le],z:d[Le],chi2:A[Le],primVxCand:y[Le],vertexType:C[Le],linkedTracks:Ye,linkedTrackCollection:Q[Le]})}t.Vertices[s.getAttribute("storeGateKey")]=he}}getMuons(e,t){const n=e.getElementsByTagName("Muon"),r=Array.from(n);for(const s of r){const a=Number(s.getAttribute("count")),l=[];for(let u=0;u<a;u++){const d=this.getNumberArrayFromHTML(s,"chi2"),A=this.getNumberArrayFromHTML(s,"energy"),y=this.getNumberArrayFromHTML(s,"eta"),C=this.getNumberArrayFromHTML(s,"phi"),k=this.getNumberArrayFromHTML(s,"pt"),Q=this.getNumberArrayFromHTML(s,"pdgId");l.push({chi2:d[u],energy:A[u],eta:y[u],phi:C[u],pt:1e3*k[u],pdgId:Q[u]})}t.Muons[s.getAttribute("storeGateKey")]=l}}getElectrons(e,t){const n=e.getElementsByTagName("Electron"),r=Array.from(n);for(const s of r){const a=Number(s.getAttribute("count")),l=[];for(let u=0;u<a;u++){const d=this.getStringArrayFromHTML(s,"author"),A=this.getNumberArrayFromHTML(s,"energy"),y=this.getNumberArrayFromHTML(s,"eta"),C=this.getNumberArrayFromHTML(s,"phi"),k=this.getNumberArrayFromHTML(s,"pt"),Q=this.getNumberArrayFromHTML(s,"pdgId");l.push({author:d[u],energy:A[u],eta:y[u],phi:C[u],pt:1e3*k[u],pdgId:Q[u]})}t.Electrons[s.getAttribute("storeGateKey")]=l}}getPhotons(e,t){const n=e.getElementsByTagName("Photon"),r=Array.from(n);for(const s of r){const a=Number(s.getAttribute("count")),l=[];for(let u=0;u<a;u++){const d=this.getStringArrayFromHTML(s,"author"),A=this.getNumberArrayFromHTML(s,"energy"),y=this.getNumberArrayFromHTML(s,"eta"),C=this.getNumberArrayFromHTML(s,"phi"),k=this.getNumberArrayFromHTML(s,"pt");l.push({author:d[u],energy:A[u],eta:y[u],phi:C[u],pt:1e3*k[u]})}t.Photons[s.getAttribute("storeGateKey")]=l}}getMissingEnergy(e,t){const n=e.getElementsByTagName("ETMis"),r=Array.from(n);for(const s of r){const a=Number(s.getAttribute("count")),l=[];for(let u=0;u<a;u++){const d=this.getStringArrayFromHTML(s,"et"),A=this.getNumberArrayFromHTML(s,"etx"),y=this.getNumberArrayFromHTML(s,"ety");l.push({et:d[u],etx:A[u],ety:y[u]})}t.MissingEnergy[s.getAttribute("storeGateKey")]=l}}}var tae=Ce(9238),hF=Ce.n(tae);const S9=i=>function(i,e,t,n){return new(t||(t=Promise))(function(s,a){function l(A){try{d(n.next(A))}catch(y){a(y)}}function u(A){try{d(n.throw(A))}catch(y){a(y)}}function d(A){A.done?s(A.value):function r(s){return s instanceof t?s:new t(function(a){a(s)})}(A.value).then(l,u)}d((n=n.apply(i,e||[])).next())})}(void 0,void 0,void 0,function*(){const e=new(hF()),t={};yield e.loadAsync(i);for(const n in e.files){const r=yield e.file(n).async("string");t[n]=r}return t});var dF=function(i,e,t,n){return new(t||(t=Promise))(function(s,a){function l(A){try{d(n.next(A))}catch(y){a(y)}}function u(A){try{d(n.throw(A))}catch(y){a(y)}}function d(A){A.done?s(A.value):function r(s){return s instanceof t?s:new t(function(a){a(s)})}(A.value).then(l,u)}d((n=n.apply(i,e||[])).next())})};const iae={file:"",type:"",config:"",hideWidgets:!1,embed:!1};class rae{constructor(e,t){this.eventDisplay=e,this.configuration=t,this.urlOptions=new URLSearchParams(window.location.href.substr(window.location.href.lastIndexOf("?")))}applyOptions(){var e,t;this.applyEventOptions(null===(e=this.configuration.defaultEventFile)||void 0===e?void 0:e.eventFile,null===(t=this.configuration.defaultEventFile)||void 0===t?void 0:t.eventType),this.applyHideWidgetsOptions(),this.applyEmbedOption()}applyEventOptions(e,t){if(!("fetch"in window))return;let n,r;(!this.urlOptions.get("file")&&this.urlOptions.get("type")||this.urlOptions.get("file")&&!this.urlOptions.get("type"))&&(console.log("WARNING - if you set one of type or file, then you need to set both!"),console.log("WARNING - reverting to defaults!")),this.urlOptions.get("file")&&this.urlOptions.get("type")?(console.log("Setting and config from urlOptions"),n=this.urlOptions.get("file"),r=this.urlOptions.get("type").toLowerCase()):(console.log("Setting and config from defaults"),n=e,r=t),console.log("Loading ",n,"of type",r);const s=()=>{this.urlOptions.get("config")&&(this.eventDisplay.getLoadingManager().addLoadableItem("url_config"),fetch(this.urlOptions.get("config")).then(l=>l.json()).then(l=>{(new zm).loadStateFromJSON(l)}).finally(()=>{this.eventDisplay.getLoadingManager().itemLoaded("url_config")}))};n&&r?(this.eventDisplay.getLoadingManager().addLoadableItem("url_event"),(l=>"jivexml"===r?(console.log("Opening JiveXML"),this.handleJiveXMLEvent(l)):"zip"===r?(console.log("Opening zip file"),this.handleZipFileEvents(l)):this.handleJSONEvent(l))(n).catch(l=>{this.eventDisplay.getInfoLogger().add("Could not find the file specified in URL.","Error"),console.error("Could not find the file specified in URL.",l)}).finally(()=>{s(),this.eventDisplay.getLoadingManager().itemLoaded("url_event")})):s()}handleJiveXMLEvent(e){return dF(this,void 0,void 0,function*(){const t=yield(yield fetch(e)).text(),n=new BC;this.configuration.eventDataLoader=n,n.process(t);const r=n.getEventData();this.eventDisplay.buildEventDataFromJSON(r)})}handleJSONEvent(e){return dF(this,void 0,void 0,function*(){const t=yield(yield fetch(e)).json();this.configuration.eventDataLoader=new wy,this.eventDisplay.parsePhoenixEvents(t)})}handleZipFileEvents(e){return dF(this,void 0,void 0,function*(){const t=yield(yield fetch(e)).arrayBuffer(),n={};let r;try{r=yield S9(t)}catch(a){return console.error("Error while reading zip",a),void this.eventDisplay.getInfoLogger().add("Could not read zip file","Error")}Object.keys(r).filter(a=>a.endsWith(".json")).forEach(a=>{Object.assign(n,JSON.parse(r[a]))});const s=new BC;Object.keys(r).filter(a=>a.endsWith(".xml")||a.startsWith("JiveXML")).forEach(a=>{s.process(r[a]);const l=s.getEventData();Object.assign(n,{[a]:l})}),this.eventDisplay.parsePhoenixEvents(n)})}applyHideWidgetsOptions(){this.hideIdsWithURLOption({hideWidgets:["mainLogo","uiMenu","experimentInfo","phoenixMenu","statsElement","gui"]})}applyEmbedOption(){var e;"true"===this.urlOptions.get("embed")&&(this.hideIdsWithURLOption({embed:["mainLogo","uiMenu","experimentInfo","phoenixMenu","statsElement","gui"]}),null===(e=document.getElementById("embedMenu"))||void 0===e||e.style.setProperty("display","block"))}hideIdsWithURLOption(e){Object.entries(e).forEach(([t,n])=>{"true"===this.urlOptions.get(t)&&n.forEach(r=>{var s;null===(s=document.getElementById(r))||void 0===s||s.style.setProperty("display","none")})})}getURLOptions(){return this.urlOptions}}var Ab=function(i,e,t,n){return new(t||(t=Promise))(function(s,a){function l(A){try{d(n.next(A))}catch(y){a(y)}}function u(A){try{d(n.throw(A))}catch(y){a(y)}}function d(A){A.done?s(A.value):function r(s){return s instanceof t?s:new t(function(a){a(s)})}(A.value).then(l,u)}d((n=n.apply(i,e||[])).next())})};class sae{constructor(e){this.onEventsChange=[],this.onDisplayedEventChange=[],this.loadingManager=new pb,this.infoLogger=new $oe,this.graphicsLibrary=new yoe(this.infoLogger),this.ui=new joe(this.graphicsLibrary),e&&this.init(e)}init(e){this.configuration=e,this.graphicsLibrary.init(e),this.ui.init(e),this.getStateManager().setEventDisplay(this),this.graphicsLibrary.setAnimationLoop(()=>{this.ui.updateUI()}),this.urlOptionsManager=new rae(this,e),!1!==e.allowUrlOptions&&this.urlOptionsManager.applyOptions(),this.enableEventDisplayConsole(),this.enableKeyboardControls()}makeScreenShot(e,t,n="Stretch"){this.graphicsLibrary.makeScreenShot(e,t,n)}initXR(e,t){this.graphicsLibrary.initXRSession(e,t)}endXR(e){this.graphicsLibrary.endXRSession(e)}parsePhoenixEvents(e){this.eventsData=e,typeof this.configuration.eventDataLoader>"u"&&(this.configuration.eventDataLoader=new wy);const t=this.configuration.eventDataLoader.getEventsList(e);return this.loadEvent(t[0]),this.onEventsChange.forEach(n=>n(t)),t}buildEventDataFromJSON(e){this.resetLabels(),this.ui.addEventDataFolder(),this.ui.addLabelsFolder(),this.graphicsLibrary.clearEventData(),this.configuration.eventDataLoader.buildEventData(e,this.graphicsLibrary,this.ui,this.infoLogger),this.onDisplayedEventChange.forEach(t=>t(e)),this.ui.loadEventFolderPhoenixMenuState()}loadEvent(e){const t=this.eventsData[e];t&&this.buildEventDataFromJSON(t)}getThreeManager(){return this.graphicsLibrary}getUIManager(){return this.ui}getInfoLogger(){return this.infoLogger}getLoadingManager(){return this.loadingManager}getStateManager(){return this.stateManager||(this.stateManager=new zm),this.stateManager}getURLOptionsManager(){return this.urlOptionsManager}loadOBJGeometry(e,t,n,r,s,a=!0,l=!0){return Ab(this,void 0,void 0,function*(){this.loadingManager.addLoadableItem(`obj_geom_${t}`);const{object:u}=yield this.graphicsLibrary.loadOBJGeometry(e,t,n,s,a,l);this.ui.addGeometry(u,r),this.loadingManager.itemLoaded(`obj_geom_${t}`),this.infoLogger.add(t,"Loaded OBJ geometry")})}parseOBJGeometry(e,t,n,r=!0){this.loadingManager.addLoadableItem(`parse_obj_${t}`);const{object:s}=this.graphicsLibrary.parseOBJGeometry(e,t,r);this.ui.addGeometry(s,n),this.loadingManager.itemLoaded(`parse_obj_${t}`)}exportToOBJ(){this.graphicsLibrary.exportSceneToOBJ(),this.infoLogger.add("Exported scene to OBJ")}parsePhoenixDisplay(e){return Ab(this,void 0,void 0,function*(){const t=JSON.parse(e);t.sceneConfiguration&&t.scene&&(this.ui.addEventDataFolder(),this.ui.addLabelsFolder(),this.graphicsLibrary.clearEventData(),this.loadSceneConfiguration(t.sceneConfiguration),this.loadingManager.addLoadableItem(`parse_phnx_${name}`),yield this.graphicsLibrary.parsePhnxScene(t.scene),this.loadingManager.itemLoaded(`parse_phnx_${name}`))})}exportPhoenixDisplay(){this.graphicsLibrary.exportPhoenixScene()}parseGLTFGeometry(e,t){return Ab(this,void 0,void 0,function*(){this.loadingManager.addLoadableItem(`parse_gltf_${t}`);const n=yield this.graphicsLibrary.parseGLTFGeometry(e,t);for(const{object:r}of n)this.ui.addGeometry(r);this.loadingManager.itemLoaded(`parse_gltf_${t}`)})}loadGLTFGeometry(e,t,n,r,s=!0){return Ab(this,void 0,void 0,function*(){this.loadingManager.addLoadableItem(`gltf_geom_${t}`);const a=yield this.graphicsLibrary.loadGLTFGeometry(e,t,n,r,s);for(const{object:l,menuNodeName:u}of a)this.ui.addGeometry(l,u);this.loadingManager.itemLoaded(`gltf_geom_${t}`)})}loadJSONGeometry(e,t,n,r,s,a=!0){return Ab(this,void 0,void 0,function*(){this.loadingManager.addLoadableItem(`json_geom_${t}`);const{object:l}=yield this.graphicsLibrary.loadJSONGeometry(e,t,r,s,a);this.ui.addGeometry(l,n),this.loadingManager.itemLoaded(`json_geom_${t}`),this.infoLogger.add(t,"Loaded JSON geometry")})}loadRootJSONGeometry(e,t,n,r,s,a=!0){return Ab(this,void 0,void 0,function*(){this.loadingManager.addLoadableItem("root_json_geom");const l=yield(0,w6.httpRequest)(e,"object");yield this.loadJSONGeometry((0,M6.build)(l,{dflt_colors:!0}).toJSON(),t,n,r,s,a),this.loadingManager.itemLoaded("root_json_geom")})}loadRootGeometry(e,t,n,r,s,a,l=!0){return Ab(this,void 0,void 0,function*(){this.loadingManager.addLoadableItem("root_geom"),w6.settings.UseStamp=!1;const d=yield(yield(0,vY.ZB)(e)).readObject(t);yield this.loadJSONGeometry((0,M6.build)(d,{dflt_colors:!0}).toJSON(),n,r,s,a,l),this.loadingManager.itemLoaded("root_geom")})}buildGeometryFromParameters(e){this.graphicsLibrary.addGeometryFromParameters(e)}zoomTo(e,t){this.graphicsLibrary.zoomTo(e,t)}loadSceneConfiguration(e){for(const t of Object.keys(e.eventData)){this.ui.addEventDataTypeFolder(t);const n=e.eventData[t];for(const r of n)this.ui.addCollection(t,r)}for(const t of e.geometries)this.ui.addGeometry(t,"#ffffff")}getCollection(e){return this.configuration.eventDataLoader.getCollection(e)}getCollections(){return this.configuration.eventDataLoader.getCollections()}listenToDisplayedEventChange(e){this.onDisplayedEventChange.push(e)}listenToLoadedEventsChange(e){this.onEventsChange.push(e)}getEventMetadata(){return this.configuration.eventDataLoader.getEventMetadata()}enableEventDisplayConsole(){window.EventDisplay={loadGLTFGeometry:(e,t)=>{this.loadGLTFGeometry(e,t)},loadOBJGeometry:(e,t,n,r,s)=>{this.loadOBJGeometry(e,t,n,r,s)},loadJSONGeometry:(e,t,n,r,s,a=!0)=>{this.loadJSONGeometry(e,t,n,r,s,a)},buildGeometryFromParameters:e=>this.buildGeometryFromParameters(e),scene:this.getThreeManager().getSceneManager().getScene()}}setOverlayRenderer(e){this.graphicsLibrary.setOverlayRenderer(e)}allowSelection(e){this.graphicsLibrary.setSelectedObjectDisplay(e)}enableSelecting(e){this.graphicsLibrary.enableSelecting(e)}fixOverlayView(e){this.graphicsLibrary.fixOverlayView(e)}getActiveObjectId(){return this.graphicsLibrary.getActiveObjectId()}lookAtObject(e){this.graphicsLibrary.lookAtObject(e),this.graphicsLibrary.highlightObject(e)}highlightObject(e){this.graphicsLibrary.highlightObject(e)}enableKeyboardControls(){this.ui.enableKeyboardControls(),this.graphicsLibrary.enableKeyboardControls()}animateThroughEvent(e,t,n){this.graphicsLibrary.animateThroughEvent(e,t,n)}animatePreset(e,t){this.graphicsLibrary.animatePreset(e,t)}animateEventWithCollision(e,t){this.graphicsLibrary.animateEventWithCollision(e,t)}animateClippingWithCollision(e,t){this.graphicsLibrary.animateClippingWithCollision(e,t)}addLabelToObject(e,t,n,r){const s=this.configuration.eventDataLoader.addLabelToEventObject(e,t,n);e?(this.ui.addLabel(s),this.graphicsLibrary.addLabelToObject(e,r,s)):this.ui.removeLabel(s,!0)}resetLabels(){const e=this.configuration.eventDataLoader.getLabelsObject();for(const t in e)for(const n in e[t])for(const r in e[t][n]){const s=C9(t,n,r);this.ui.removeLabel(s,!0),delete e[t][n][r]}}}class Qw{constructor(e,t,n,r,s,a){this.toggleState=!0,this.children=[],this.configs=[],this.nodeLevel=0,this.childrenToggleState={},this.childrenActive=!1,this.configActive=!1,this.name=e,this.icon=t,this.onToggle=n,r&&(this.children=r),s&&(this.configs=s),a&&(this.parent=a)}addChild(e,t,n){const r=new Qw(e,n,t);return r.parent=this,r.nodeLevel=this.nodeLevel+1,this.children.push(r),r}removeChild(e){const t=this.children.indexOf(e);return this.children.splice(t,1),this}remove(){this.parent?this.parent.removeChild(this):console.error("Cannot delete root node of phoenix menu. Set it to undefined/null instead.")}truncate(){this.children=[]}addConfig(e,t){const n=this.configs.push(Object.assign({type:e},t));return this.applyConfigState(this.configs[n-1]),this}toggleSelfAndDescendants(e){var t;null===(t=this.onToggle)||void 0===t||t.call(this,e),this.toggleState=e;for(const n of this.children)e?(n.toggleState=this.childrenToggleState[n.name],n.toggleSelfAndDescendants(n.toggleState)):(this.childrenToggleState[n.name]=n.toggleState,n.toggleSelfAndDescendants(e))}applyConfigState(e){var t,n,r,s,a,l;"checkbox"===e.type&&e?.isChecked?null===(t=e.onChange)||void 0===t||t.call(e,e?.isChecked):"color"===e.type&&e?.color&&!e.group?null===(n=e.onChange)||void 0===n||n.call(e,e?.color):"slider"===e.type&&e?.value?null===(r=e.onChange)||void 0===r||r.call(e,e?.value):"rangeSlider"===e.type&&void 0!==e?.value&&(null===(s=e.onChange)||void 0===s||s.call(e,{value:e?.value,highValue:e?.highValue}),null===(a=e.setEnableMin)||void 0===a||a.call(e,e?.enableMin),null===(l=e.setEnableMax)||void 0===l||l.call(e,e?.enableMax))}getNodeState(){const e={};e.name=this.name,e.nodeLevel=this.nodeLevel,e.toggleState=this.toggleState,e.childrenActive=this.childrenActive,e.configs=this.configs,e.children=[];for(const t of this.children)e.children.push(t.getNodeState());return e}loadStateFromJSON(e){var t;let n;n="string"==typeof e?JSON.parse(e):e,this.childrenActive=n.childrenActive,this.toggleState=n.toggleState,void 0!==this.toggleState&&(null===(t=this.onToggle)||void 0===t||t.call(this,this.toggleState));for(const r of n.configs){const s=this.configs.find(a=>a.type===r.type&&a.label===r.label);if(s){for(const a in r)s[a]=r[a];this.applyConfigState(s)}}for(const r of n.children){const s=this.children.filter(a=>a.name===r.name&&a.nodeLevel===r.nodeLevel)[0];s&&s.loadStateFromJSON(r)}}findInTree(e){if(this.name===e)return this;for(const t of this.children){const n=t.findInTree(e);if(n)return n}}findInTreeOrCreate(e){let t=this;return e.split(">").forEach(n=>{n=n.trim();const r=t.findInTree(n);t=r||t.addChild(n,()=>{})}),t}}class oae{static getMuonChamber(e){var t;let n=[];const r=(...A)=>{n=n.concat(...A.map(y=>e[y]))};r("front_1","front_2","front_3"),r("front_3","front_4","front_1"),r("back_1","back_2","back_3"),r("back_3","back_4","back_1"),r("back_1","back_2","front_2"),r("front_2","front_1","back_1"),r("back_4","back_3","front_3"),r("front_3","front_4","back_4"),r("front_1","front_4","back_4"),r("back_4","back_1","front_1"),r("front_2","back_2","back_3"),r("back_3","front_3","front_2");const s=new bo;s.attributes.position=new va(new Float32Array(n),3),s.computeVertexNormals();const a=new Ua(s,new Ah({color:null!==(t=e.color)&&void 0!==t?t:Xp.MuonChambers,transparent:!0,opacity:.1,side:zd}));a.userData=Object.assign({},e),a.name="MuonChamber";const l=new N7(s),u=new NA(l,new eu({color:16777215,transparent:!0,opacity:.7})),d=new Wu;return d.add(a),d.add(u),e.uuid=a.uuid,d}}class T9 extends wy{constructor(){super(),this.geometryScale=1e3,this.data={}}loadObjectTypes(e){super.loadObjectTypes(e),e.MuonChambers&&this.addObjectType(e.MuonChambers,oae.getMuonChamber,"MuonChambers")}readIgArchive(e,t,n){this.loadingManager.addLoadableItem("ig_archive");const r=new(hF()),s=[],a=l=>{r.loadAsync(l).then(()=>{let u=Object.keys(r.files);n&&(u=u.filter(A=>A.includes(n)));let d=1;for(const A of u)A.toLowerCase().startsWith("events")?r.file(A).async("string").then(y=>{y=y.replace(/'/g,'"').replace(/\(/g,"[").replace(/\)/g,"]").replace(/nan/g,"0");const C=JSON.parse(y);C.eventPath=A,s.push(C),d===u.length&&(t(s),this.loadingManager.itemLoaded("ig_archive")),d++}):(d===u.length&&(t(s),this.loadingManager.itemLoaded("ig_archive")),d++)})};e instanceof File?a(e):fetch(e).then(l=>l.arrayBuffer()).then(l=>{a(l)})}loadEventDataFromIg(e,t,n){this.readIgArchive(e,r=>{n(r[0])},t)}getEventData(){var e,t,n;const r=null===(n=null===(t=null===(e=this.data)||void 0===e?void 0:e.Collections)||void 0===t?void 0:t.Event_V2)||void 0===n?void 0:n[0],s={runNumber:r?.[0],eventNumber:r?.[1],ls:r?.[2],time:r?.[5],Hits:{},Tracks:{},Jets:{},CaloClusters:{},MuonChambers:{}};s.Hits=this.getTrackingClusters(s.Hits),s.Tracks=this.getTracks(),s.Jets=this.getJets(),s.CaloClusters=this.getCaloClusters(),s.MuonChambers=this.getMuonChambers();for(const a of["Hits","Tracks","Jets","CaloClusters","MuonChambers"])0===Object.keys(s[a]).length&&(s[a]=void 0);return s}getAllEventsData(e){const t={};for(const n of e)this.data=n,t[n.eventPath]=this.getEventData();return t}getTrackingClusters(e){const n=this.getObjectCollections(["TrackingRecHits_V1","SiStripClusters_V1","SiPixelClusters_V1","CSCLCTDigis_V1"],r=>{r.pos&&(r.pos=r.pos.map(s=>s*this.geometryScale))});return Object.assign(e,n),e}getCaloClusters(){return this.getObjectCollections(["SuperClusters_V1"],n=>{n.energy&&(n.energy*=this.geometryScale)})}getJets(){let e={};const t=Object.keys(this.data.Collections).filter(r=>r.toLowerCase().includes("jets"));return e=this.getObjectCollections(t,r=>{for(const s of["et","energy"])if(r[s]){r[s]*=this.geometryScale;break}},[{attribute:"et",min:10},{attribute:"energy",min:10}]),e}getMuonChambers(){return this.getObjectCollections(["MatchingCSCs_V1","MuonChambers_V1"],n=>{for(const r of Object.keys(n))(r.startsWith("front")||r.startsWith("back"))&&(n[r]=n[r].map(s=>s*this.geometryScale))})}getObjectCollections(e,t,n){const r={};e=e.filter(s=>this.data.Collections[s]);for(const s of e){r[s]=[];const a=this.data.Types[s];for(const l of this.data.Collections[s]){const u={};if(a.forEach((d,A)=>{u[d[0]]=l[A]}),n){let d=!0,A=!0;for(const y of n)if(u[y.attribute]){if(y.max&&u[y.attribute]>y.max){d=!1;break}if(y.min&&u[y.attribute]<y.min){A=!1;break}}d&&A&&(t?.(u),r[s].push(u))}else t?.(u),r[s].push(u)}0===r[s].length&&delete r[s]}return r}getTracks(){const e={};let t=[{collection:"Tracks_V1",extras:"Extras_V1",assocs:"TrackExtras_V1",color:"0xff0000",min_pt:1},{collection:"Tracks_V2",extras:"Extras_V1",assocs:"TrackExtras_V1",color:"0xff0000",min_pt:1},{collection:"Tracks_V3",extras:"Extras_V1",assocs:"TrackExtras_V1",color:"0xff0000",min_pt:1},{collection:"StandaloneMuons_V2",extras:"Extras_V1",assocs:"MuonTrackExtras_V1",color:"0xf57842",min_pt:1},{collection:"PATStandaloneMuons_V1",extras:"Extras_V1",assocs:"PATMuonTrackExtras_V1",color:"0xf5aa42",min_pt:1},{collection:"TrackerMuons_V2",extras:"Extras_V1",assocs:"MuonTrackerExtras_V1",color:"0xe8d546",min_pt:2},{collection:"GsfElectrons_V1",extras:"Extras_V1",assocs:"GsfElectronExtras_V1",color:"0x1CFF1A",min_pt:10},{collection:"GsfElectrons_V2",extras:"Extras_V1",assocs:"GsfElectronExtras_V1",color:"0x1bcf9f",min_pt:10},{collection:"GsfElectrons_V3",extras:"Extras_V1",assocs:"GsfElectronExtras_V1",color:"0x1ad9ff",min_pt:10},{collection:"PATElectrons_V1",extras:"Extras_V1",assocs:"PATElectronExtras_V1",color:"0x1a40ff",min_pt:1}];t=t.filter(n=>this.data.Collections[n.collection]);for(const n of t){e[n.collection]=[];const r=this.data.Collections[n.collection],s=this.data.Collections[n.extras],a=this.data.Associations[n.assocs],l=this.data.Types[n.collection];let u,d,A,y,C,k,Q,se,he,re,Le,be;for(let Ye=0;Ye<a.length;Ye++){if(be={},l.forEach((xt,$t)=>{be[xt[0]]=r[Ye][$t]}),be.pt<n.min_pt)continue;be.color=n.color,u=a[Ye][0][1],d=a[Ye][1][1],A=new kt(s[d][0][0],s[d][0][1],s[d][0][2]),y=new kt(s[d][1][0],s[d][1][1],s[d][1][2]),y.normalize(),C=new kt(s[d][2][0],s[d][2][1],s[d][2][2]),k=new kt(s[d][3][0],s[d][3][1],s[d][3][2]),k.normalize(),Q=A.distanceTo(C),se=.25*Q,he=new kt(A.x+se*y.x,A.y+se*y.y,A.z+se*y.z),re=new kt(C.x+se*k.x,C.y+se*k.y,C.z+se*k.z),Le=new iP(A,he,C);const dt=[];for(const xt of Le.getPoints(24))xt.multiplyScalar(this.geometryScale),dt.push([xt.x,xt.y,xt.z]);be.pos=dt,e[n.collection].push(be)}0===e[n.collection].length&&delete e[n.collection]}return e}getEventMetadata(){var e,t,n;const r=super.getEventMetadata(),s=null===(n=null===(t=null===(e=this.data)||void 0===e?void 0:e.Collections)||void 0===t?void 0:t.Event_V2)||void 0===n?void 0:n[0];return s?.[3]&&r.push({label:"Orbit",value:s[3]}),r}}class aae extends wy{constructor(){super(),this.eventData={}}setRawEventData(e){this.rawEventData=e}processEventData(){return Object.entries(this.rawEventData).forEach(([e,t])=>{const n={Vertices:{},Tracks:{},Hits:{},CaloCells:{},CaloClusters:{},Jets:{},MissingEnergy:{},"event number":this.getEventNumber(t),"run number":this.getRunNumber(t)};this.colorTracks(t),n.Vertices=this.getVertices(t),n.Tracks=this.getTracks(t),n.Hits=this.getHits(t),n.CaloCells=this.getCells(t),n.CaloClusters=this.getCaloClusters(t),n.Jets=this.getJets(t),n.MissingEnergy=this.getMissingEnergy(t),this.eventData[e]=n}),!0}getEventData(){return this.eventData}getNumEvents(){return Object.keys(this.rawEventData).length}getRunNumber(e){if(!("EventHeader"in e))return 0;const t=e.EventHeader.collection;return"runNumber"in t?0:t[0].runNumber}getEventNumber(e){if(!("EventHeader"in e))return 0;const t=e.EventHeader.collection;return"eventNumber"in t?0:t[0].eventNumber}colorTracks(e){let t,n,r,s;"ReconstructedParticles"in e&&(t=e.ReconstructedParticles.collection,"Particle"in e&&(n=e.Particle.collection,"MCRecoAssociations"in e&&(r=e.MCRecoAssociations.collection,"EFlowTrack"in e&&(s=e.EFlowTrack.collection,r.forEach(a=>{const d=n[a.sim.index].PDG;t[a.rec.index].tracks.forEach(y=>{const C=s[y.index];11===Math.abs(d)?(C.color="00ff00",C.pid="electron"):22===Math.abs(d)?(C.color="ff0000",C.pid="photon"):211===Math.abs(d)||111===Math.abs(d)?(C.color="a52a2a",C.pid="pion"):2212===Math.abs(d)?(C.color="778899",C.pid="proton"):321===Math.abs(d)?(C.color="5f9ea0",C.pid="kaon"):(C.color="0000cd",C.pid="other"),C.pdgid=d})})))))}getVertices(e){const t=[];for(const n in e){if(e[n].constructor!=Object)continue;const r=e[n];if(!("collType"in r)||!("collection"in r)||"edm4hep::VertexCollection"!==r.collType)continue;const s=[],a=r.collection,l=this.randomColor();a.forEach(u=>{const d=[];"position"in u&&(d.push(.1*u.position.x),d.push(.1*u.position.y),d.push(.1*u.position.z)),s.push({pos:d,size:.2,color:"#"+l})}),t[n]=s}return t}getTracks(e){const t=[];for(const n in e){if(e[n].constructor!=Object)continue;const r=e[n];if(!("collType"in r)||"edm4hep::TrackCollection"!==r.collType||!("collection"in r))continue;const a=[],l=[],u=[],d=[],A=[],y=[];r.collection.forEach(C=>{const k=[];"trackerHits"in C&&C.trackerHits.forEach(re=>{const be=this.getCollByID(e,re.collectionID)[re.index];k.push([.1*be.position.x,.1*be.position.y,.1*be.position.z])}),"trackStates"in C&&0===k.length&&C.trackStates.forEach(re=>{"referencePoint"in re&&k.push([.1*re.referencePoint.x,.1*re.referencePoint.y,.1*re.referencePoint.z])});let Q="0000cd";"color"in C&&(Q=C.color);const se={pos:k,color:Q};"pid"in C?"electron"==C.pid?a.push(se):"photon"==C.pid?l.push(se):"pion"==C.pid?u.push(se):"proton"==C.pid?d.push(se):"kaon"==C.pid?A.push(se):y.push(se):y.push(se)}),t[n+" | Electrons"]=a,t[n+" | Photons"]=l,t[n+" | Pions"]=u,t[n+" | Protons"]=d,t[n+" | Kaons"]=A,t[n+" | Other"]=y}return t}getHits(e){const t=[];for(const n in e){if(e[n].constructor!=Object)continue;const r=e[n];if(!("collType"in r&&r.collType.includes("edm4hep::")&&r.collType.includes("TrackerHitCollection")&&"collection"in r))continue;const s=r.collection,a=[],l=this.randomColor();s.forEach(u=>{const d=[];"position"in u&&(d.push(.1*u.position.x),d.push(.1*u.position.y),d.push(.1*u.position.z)),a.push({type:"CircularPoint",pos:d,color:"#"+l,size:2})}),t[n]=a}return t}getCells(e){const t=[];for(const n in e){if(e[n].constructor!=Object)continue;const r=e[n];if(!("collType"in r&&r.collType.includes("edm4hep::")&&r.collType.includes("CalorimeterHitCollection")&&"collection"in r))continue;const s=r.collection,a=[];let l=1e9;for(let A=0;A<1e4;++A){const y=Math.floor(Math.random()*s.length),C=Math.floor(Math.random()*s.length);if(y===C)continue;const k=Math.pow(s[y].position.x-s[C].position.x,2),Q=Math.pow(s[y].position.y-s[C].position.y,2),se=Math.pow(s[y].position.z-s[C].position.z,2),he=Math.sqrt(k+Q+se);he<l&&(l=he)}const u=.1*Math.floor(l)>1?.1*Math.floor(l):1,d=Math.floor(358*Math.random());s.forEach(A=>{const y=.1*A.position.x,C=.1*A.position.y,k=.1*A.position.z,Q=Math.sqrt(Math.pow(y,2)+Math.pow(C,2)+Math.pow(k,2)),se=Math.sqrt(Math.pow(y,2)+Math.pow(C,2)),he=Math.asinh(k/se),re=Math.acos(y/se)*Math.sign(C),Le=this.valToLightness(A.energy,.001,1),be={eta:he,phi:re,energy:A.energy,radius:Q,side:u,length:u,color:"#"+this.convHSLtoHEX(d,90,Le)};a.push(be)}),t[n]=a}return t}getCaloClusters(e){const t=[];for(const n in e){if(e[n].constructor!=Object)continue;const r=e[n];if(!("collType"in r)||"edm4hep::ClusterCollection"!==r.collType||!("collection"in r))continue;const a=[];r.collection.forEach(l=>{const u=.1*l.position.x,d=.1*l.position.y,A=.1*l.position.z,y=Math.sqrt(Math.pow(u,2)+Math.pow(d,2)+Math.pow(A,2)),C=Math.sqrt(Math.pow(u,2)+Math.pow(d,2)),k=Math.asinh(A/C),Q=Math.acos(u/C)*Math.sign(d);a.push({eta:k,phi:Q,energy:100*l.energy,radius:y,side:4})}),t[n]=a}return t}getJets(e){const t=[];for(const n in e){if(e[n].constructor!=Object)continue;const r=e[n];if(!("collType"in r)||"edm4hep::ReconstructedParticleCollection"!==r.collType||!n.includes("Jet")&&!n.includes("jet")||!("collection"in r))continue;const s=[];r.collection.forEach(l=>{if(!("momentum"in l)||!("energy"in l))return;const u=l.momentum.x,d=l.momentum.y,A=l.momentum.z,y=Math.sqrt(Math.pow(u,2)+Math.pow(d,2)),C=Math.asinh(A/y),k=Math.acos(u/y)*Math.sign(d);s.push({eta:C,phi:k,energy:1e3*l.energy})}),t[n]=s}return t}getMissingEnergy(e){const t=[];for(const n in e){if(e[n].constructor!=Object)continue;const r=e[n];if(!("collType"in r)||"edm4hep::ReconstructedParticleCollection"!==r.collType||!n.includes("Missing")&&!n.includes("missing")||!("collection"in r))continue;const s=[];r.collection.forEach(u=>{if(!("momentum"in u)||!("energy"in u))return;const d=u.momentum.x,A=u.momentum.y,y=u.momentum.z,C=Math.sqrt(Math.pow(d,2)+Math.pow(A,2)+Math.pow(y,2));s.push({etx:u.energy*d/C*10,ety:u.energy*A/C*10,color:"#ff69b4"})}),t[n]=s}return t}randomColor(){return Math.floor(16777215*Math.random()).toString(16).padStart(6,"0").toUpperCase()}convHSLtoHEX(e,t,n){n/=100;const r=t*Math.min(n,1-n)/100,s=a=>{const l=(a+e/30)%12,u=n-r*Math.max(Math.min(l-3,9-l,1),-1);return Math.round(255*u).toString(16).padStart(2,"0")};return`${s(0)}${s(8)}${s(4)}`}valToLightness(e,t,n){let r=80-65*(e-t)/(n-t);return r<20&&(r=20),r>85&&(r=85),r}getCollByID(e,t){for(const n in e){if(e[n].constructor!=Object)continue;const r=e[n];if("collID"in r&&r.collID===t)return r.collection}}}class lae extends wy{constructor(){super(),this.hitData=[],this.particleData=[],this.truthData={}}processHits(e){const t=e.split("\n");let n;console.log("Event has this many hits:",t.length);for(let r=1;r<t.length;r++)n=t[r].split(","),this.hitData[n[0]]=[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])]}processParticles(e){const t=e.split("\n");let n;console.log("Event has this many particles:",t.length);for(let r=1;r<t.length;r++)n=t[r].split(","),this.particleData.push({particle_id:parseInt(n[0]),vertex_pos:[parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3])],mom:[parseFloat(n[4]),parseFloat(n[5]),parseFloat(n[6])]})}processTruth(e){const t=e.split("\n");let n;console.log("Event has this many truth: ",t.length);for(let r=1;r<t.length;r++)n=t[r].split(","),this.truthData[n[0]]=[n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]]}getEventData(e){const t={eventNumber:e,runNumber:0,Hits:void 0,Tracks:void 0};if(this.hitData){t.Hits={},t.Hits.Reconstructed=[];let s=Math.round(this.hitData.length/5e3);s<1&&(s=1);let a=0;for(let l=1;l<this.hitData.length;l++)l%s||(t.Hits.Reconstructed[a++]=[[this.hitData[l][0],this.hitData[l][1],this.hitData[l][2]]])}if(console.log("Will show this many hits",t.Hits.Reconstructed.length),this.truthData){if(t.Tracks={Particles:[]},this.particleData)for(let u=0;u<this.particleData.length;u++)t.Tracks.Particles[u]={particle_id:this.particleData[u].particle_id,pos:[this.particleData[u].vertex_pos],mom:this.particleData[u].mom};let s,a;const l=parseInt(String(this.truthData.length/10));for(let u=1;u<this.truthData.length;u++){s=u,a=parseInt(this.truthData[u][0]);for(let d=0;d<t.Tracks.Particles.length;d++)t.Tracks.Particles[d].particle_id===a&&t.Tracks.Particles[d].pos.push([parseFloat(this.truthData[u][1]),parseFloat(this.truthData[u][2]),parseFloat(this.truthData[u][3])]);u%l==0&&(document.getElementById("info").innerHTML="Processed "+100*u/this.truthData.length+"% of event data.")}}for(let s=0;s<t.Tracks.Particles.length;s++);return t}}let Bl=(()=>{class i extends sae{constructor(){super()}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})(),E9=(()=>{class i{eventDisplay;year;constructor(t){this.eventDisplay=t,this.year=(new Date).getFullYear(),this.eventDisplay.getThreeManager().stopAnimationLoop()}ngAfterViewInit(){this.eventDisplay.getUIManager().detectColorScheme()}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-home"]],decls:71,vars:1,consts:[[1,"container"],[1,"pricing-header","p-3","pt-md-5","pb-md-4","text-center"],["src","assets/images/logo-text.svg","alt","",1,"logo","mb-4"],[1,"lead"],[1,"row","centered"],[1,"card"],["src","assets/images/playground.svg","alt","Card image cap",1,"card-img-top"],[1,"card-body","d-flex","flex-column"],[1,"card-title"],[1,"card-text"],["routerLink","/playground",1,"btn","btn-primary"],["src","assets/images/geometry.svg","alt","Card image cap",1,"card-img-top"],["routerLink","/geometry",1,"btn","btn-primary"],["src","assets/images/atlas.svg","alt","Card image cap",1,"card-img-top"],["routerLink","/atlas",1,"btn","btn-primary"],["src","assets/images/lhcb.svg","alt","Card image cap",1,"card-img-top"],["routerLink","/lhcb",1,"btn","btn-primary"],["src","assets/images/cms.svg","alt","Card image cap",1,"card-img-top"],["routerLink","/cms",1,"btn","btn-primary"],["src","assets/images/trackml2.png","alt","Card image cap",1,"card-img-top"],["routerLink","/trackml",1,"btn","btn-primary"],["href","https://github.com/HSF/phoenix"],["href","https://github.com/HSF/phoenix/blob/master/README.md"]],template:function(n,r){1&n&&(tn(0,"div",0)(1,"div",1),kr(2,"img",2),tn(3,"p",3),dr(4,"Application for visualizing High Energy Physics data."),on()(),tn(5,"div",4)(6,"div",5),kr(7,"img",6),tn(8,"div",7)(9,"h5",8),dr(10,"Playground"),on(),tn(11,"p",9),dr(12," Get started with the different Phoenix features. "),on(),tn(13,"a",10),dr(14,"Show"),on()()(),tn(15,"div",5),kr(16,"img",11),tn(17,"div",7)(18,"h5",8),dr(19,"Geometry display"),on(),tn(20,"p",9),dr(21,"This test should show some simple geometry."),on(),tn(22,"a",12),dr(23,"Show"),on()()(),tn(24,"div",5),kr(25,"img",13),tn(26,"div",7)(27,"h5",8),dr(28,"ATLAS"),on(),tn(29,"p",9),dr(30,"Show the ATLAS detector. One simple event."),on(),tn(31,"a",14),dr(32,"Show"),on()()(),tn(33,"div",5),kr(34,"img",15),tn(35,"div",7)(36,"h5",8),dr(37,"LHCb"),on(),tn(38,"p",9),dr(39,"Show the LHCb detector. One simple event."),on(),tn(40,"a",16),dr(41,"Show"),on()()(),tn(42,"div",5),kr(43,"img",17),tn(44,"div",7)(45,"h5",8),dr(46,"CMS"),on(),tn(47,"p",9),dr(48,"Show the CMS detector. One simple event."),on(),tn(49,"a",18),dr(50,"Show"),on()()(),tn(51,"div",5),kr(52,"img",19),tn(53,"div",7)(54,"h5",8),dr(55,"TrackML"),on(),tn(56,"p",9),dr(57," Visualisation for TrackML. Shows how to write a custom event loader. "),on(),tn(58,"a",20),dr(59,"Show"),on()()()()(),tn(60,"footer")(61,"p")(62,"em"),dr(63),on(),dr(64," Phoenix Project "),on(),tn(65,"p")(66,"a",21),dr(67," Github "),on(),dr(68," - "),tn(69,"a",22),dr(70," Documentation "),on()()()),2&n&&(Qn(63),bf(r.year))},dependencies:[NM],styles:["h1[_ngcontent-%COMP%]{font-family:Circular}.logo[_ngcontent-%COMP%]{margin-top:2em;max-width:24em}.row[_ngcontent-%COMP%]{justify-content:center}.card[_ngcontent-%COMP%]{margin:1.2em;border:1px solid rgba(88,88,88,.08);box-shadow:var(--phoenix-box-shadow);padding:1em;width:20em;background-color:var(--phoenix-background-color-secondary);border-radius:10px}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--phoenix-text-color-secondary)}.card[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{font-family:Circular;color:var(--phoenix-text-color)}.card[_ngcontent-%COMP%]   .card-img-top[_ngcontent-%COMP%]{width:100%;height:10em;object-fit:contain;border-radius:10px}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{justify-content:space-between}.card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border-radius:10px}.lead[_ngcontent-%COMP%]{color:var(--phoenix-text-color-secondary)}footer[_ngcontent-%COMP%]{background-color:var(--phoenix-background-color);margin:5rem 1rem 3rem;color:var(--phoenix-text-color-secondary)}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--phoenix-text-color-secondary)}footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:var(--phoenix-text-color-secondary)}"]})}return i})(),mb=(()=>{class i{constructor(){}ngOnInit(){}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Kr({type:i,selectors:[["app-nav"]],decls:2,vars:0,consts:[["id","mainLogo","routerLink","/",1,"main-logo","fixed-top","p-2","mx-auto","mt-2"],["src","assets/images/logo-text.svg"]],template:function(n,r){1&n&&(tn(0,"a",0),kr(1,"img",1),on())},dependencies:[NM],styles:[".main-logo[_ngcontent-%COMP%]{width:140px;z-index:9999}.main-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transition:all .5s}.main-logo[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{filter:drop-shadow(0px 0px 10px var(--phoenix-text-color));transition:all .5s}"]})}return i})(),fF=(()=>{class i{error=new Hw;subscribeToError(t){this.error.onUpdate(t)}setError(t){this.error.update(t)}static \u0275fac=function(n){return new(n||i)};static \u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();const cae=function(i){return{width:i}};function uae(i,e){if(1&i&&(tn(0,"div",7),kr(1,"span"),on()),2&i){const t=Or(2);Qn(1),function hd(i){fd(vT,g_,i,!1)}(wf(2,cae,t.progress+"%"))}}function hae(i,e){if(1&i&&(Lp(0),kr(1,"img",3),tn(2,"p",4),dr(3," Loading..."),kr(4,"br"),tn(5,"small",5),dr(6,"(This may take a while)"),on()(),ns(7,uae,2,4,"div",6),Np()),2&i){const t=Or();Qn(7),Un("ngIf",void 0!==t.progress)}}function dae(i,e){1&i&&(tn(0,"p"),dr(1," An error occurred while loading the application. Please try refreshing the page. "),on())}const fae=function(i){return{"load-complete":i}};let gb=(()=>{class i{errorMessageService;loaded=!1;progress;error;constructor(t){this.errorMessageService=t,this.errorMessageService.subscribeToError(n=>{this.loaded||(this.error=n)})}static \u0275fac=function(n){return new(n||i)(Et(fF))};static \u0275cmp=Kr({type:i,selectors:[["app-loader"]],inputs:{loaded:"loaded",progress:"progress"},decls:4,vars:5,consts:[[1,"loader-wrapper","d-flex","position-absolute","flex-column","justify-content-center","align-items-center","w-100","h-100","p-5","text-center",3,"ngClass"],[4,"ngIf","ngIfElse"],["errorContainer",""],["src","assets/images/logo-small.svg","alt","Loader"],[1,"mt-5"],[1,"text-muted"],["class","loading-bar",4,"ngIf"],[1,"loading-bar"]],template:function(n,r){if(1&n&&(tn(0,"div",0),ns(1,hae,8,1,"ng-container",1),ns(2,dae,2,0,"ng-template",null,2,PT),on()),2&n){const s=Fl(3);Un("ngClass",wf(3,fae,r.loaded)),Qn(1),Un("ngIf",void 0===r.error)("ngIfElse",s)}},dependencies:[Dm,ph],styles:[".loader-wrapper[_ngcontent-%COMP%]{background:var(--phoenix-background-color);z-index:9998}.loader-wrapper.load-complete[_ngcontent-%COMP%]{display:none!important}.loader-wrapper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:5rem;height:5rem;animation:loader 2s infinite}.loader-wrapper[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--phoenix-text-color)}.loader-wrapper[_ngcontent-%COMP%]   .loading-bar[_ngcontent-%COMP%]{width:15rem;max-width:90%;height:.5rem;background:var(--phoenix-background-color-tertiary);border-radius:2.5rem;overflow:hidden}.loader-wrapper[_ngcontent-%COMP%]   .loading-bar[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;height:100%;border-radius:2.5rem;background:linear-gradient(to right,var(--phoenix-primary),var(--phoenix-secondary));transition:all .5s}@keyframes _ngcontent-%COMP%_app-loader_loader{0%,to{transform:scale(.1) rotate(0)}95%{transform:scale(1) rotate(15deg)}}"]})}return i})(),pae=(()=>{class i{eventDisplay;loaded=!1;loadingProgress=0;constructor(t){this.eventDisplay=t}ngOnInit(){this.eventDisplay.init({}),this.eventDisplay.buildGeometryFromParameters({ModuleName:"Module 2",Xdim:10,Ydim:1,Zdim:45,NumPhiEl:64,NumZEl:10,Radius:75,MinZ:-250,MaxZ:250,TiltAngle:.3,PhiOffset:0,Colour:65280,EdgeColour:4494424}),this.eventDisplay.getLoadingManager().addProgressListener(n=>this.loadingProgress=n),this.eventDisplay.getLoadingManager().addLoadListenerWithCheck(()=>this.loaded=!0)}copyCode(){const t=document.getElementById("geometryCode").textContent.trim(),n=document.createElement("input");document.body.appendChild(n),n.value=t,n.select(),document.execCommand("copy"),document.body.removeChild(n)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-geometry"]],decls:14,vars:3,consts:[[3,"loaded","progress"],[1,"demo-info"],["id","geometryCode"],[1,"copy-code",3,"click"],["id","eventDisplay"]],template:function(n,r){1&n&&(kr(0,"app-loader",0)(1,"app-nav"),tn(2,"div",1)(3,"p")(4,"b"),dr(5,"Geometry Demo"),on()(),tn(6,"p"),dr(7,"Try opening the console and typing:"),on(),tn(8,"code",2),dr(9),on(),tn(10,"p",3),ki("click",function(){return r.copyCode()}),tn(11,"b"),dr(12,"Copy"),on()()(),kr(13,"div",4)),2&n&&(Un("loaded",r.loaded)("progress",r.loadingProgress),Qn(9),wl(" ",'var parameters = { ModuleName: "Module 3", Xdim: 10., Ydim: 1., Zdim: 45, NumPhiEl: 64, NumZEl: 10, Radius: 105, MinZ: -250, MaxZ: 250, TiltAngle: 0.3, PhiOffset: 0.0, Colour: 0xffff00, EdgeColour: 0x449458 }; window.EventDisplay.buildGeometryFromParameters(parameters);'," "))},dependencies:[mb,gb],styles:[".demo-info[_ngcontent-%COMP%]{position:absolute;top:5rem;left:1rem;font-size:.8rem;color:var(--phoenix-text-color-secondary);width:20rem;max-width:40%}.demo-info[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{color:var(--phoenix-text-color-secondary);cursor:text}.demo-info[_ngcontent-%COMP%]   .copy-code[_ngcontent-%COMP%]{cursor:pointer}"]})}return i})();var Uh=(()=>(function(i){i.JSON="JSON",i.EDM4HEPJSON="EDM4HEPJSON",i.JIVEXML="JIVEXML",i.IG="IG",i.ZIP="ZIP"}(Uh||(Uh={})),Uh))();class _b{format;fileType;handler;accept;constructor(e,t,n,r){this.format=e,this.fileType=t,this.handler=n,this.accept=r}}JSON.parse('{"eventFile":"assets/files/JiveXML/JiveXML_336567_2327102923.xml","eventType":"jivexml"}');const mae=JSON.parse('{"phoenixMenu":{"name":"Phoenix Menu","nodeLevel":0,"toggleState":true,"childrenActive":false,"configs":[{"type":"button","label":"Save state"},{"type":"button","label":"Load state"}],"children":[{"name":"Detector","nodeLevel":1,"toggleState":true,"childrenActive":false,"configs":[{"type":"checkbox","label":"Wireframe","isChecked":false},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.01,"allowCustomValue":true},{"type":"slider","label":"Scale","min":0,"max":20,"step":0.01,"allowCustomValue":true}],"children":[{"name":"Magnets","nodeLevel":2,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Barrel Toroid","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Endcap","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Feet","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Warm structure","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]}]},{"name":"Calorimeters","nodeLevel":2,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"LAr Barrel","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"LAr EC1","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"LAr FCAL","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"LAr HEC","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Tile Cal","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Tile Cal EC","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]}]},{"name":"Inner Detector","nodeLevel":2,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Beam","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Pixel","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"SCT","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"SCT Endcaps","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"TRT","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"TRT Endcaps","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]}]},{"name":"Muon Spectrometer","nodeLevel":2,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Endcaps","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Extra wheel","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Big wheel","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Outer Wheel","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Big Wheel MDT ","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Small Wheel","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Small Wheel Hub","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Small Wheel Feet","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"TGC2","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"TGC3","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]}]},{"name":"Barrel","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Muon Barrel Inner","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Muon Barrel Middle","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]},{"name":"Muon Barrel Outer","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"slider","label":"Opacity","min":0,"max":1,"step":0.05,"allowCustomValue":true},{"type":"button","label":"Remove"}],"children":[]}]}]}]},{"name":"Event Data","nodeLevel":1,"toggleState":true,"childrenActive":false,"configs":[{"type":"checkbox","label":"Depth Test","isChecked":true}],"children":[{"name":"Tracks","nodeLevel":2,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Tracks_","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"\u{1d6d8}2","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"DOF","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"pT","min":0,"max":50000,"step":0.1,"value":0,"highValue":50000},{"type":"rangeSlider","label":"z0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30},{"type":"rangeSlider","label":"d0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color","hidden":false},{"type":"button","label":"Random","hidden":false},{"type":"select","label":"Color by","options":["Charge q","Momentum |p|","Vertex"],"hidden":false},{"type":"color","label":"q=-1","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=0","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=1","group":"charge","color":"#ff0000","hidden":false},{"type":"slider","label":"|p| min","group":"mom","min":0,"max":50000,"value":0,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| min color","group":"mom","color":"#ff0000","hidden":true},{"type":"slider","label":"|p| max","group":"mom","min":0,"max":50000,"value":50000,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| max color","group":"mom","color":"#ff0000","hidden":true}],"children":[]}]},{"name":"CombinedMuonTracks","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"\u{1d6d8}2","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"DOF","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"pT","min":0,"max":50000,"step":0.1,"value":0,"highValue":50000},{"type":"rangeSlider","label":"z0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30},{"type":"rangeSlider","label":"d0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30}],"children":[]},{"name":"Color Options","nodeLevel":4,"childrenActive":false,"configs":[{"type":"color","label":"Color","color":"#0adb2d","hidden":false},{"type":"button","label":"Random","hidden":false},{"type":"select","label":"Color by","options":["Charge q","Momentum |p|","Vertex"],"hidden":false},{"type":"color","label":"q=-1","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=0","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=1","group":"charge","color":"#ff0000","hidden":false},{"type":"slider","label":"|p| min","group":"mom","min":0,"max":50000,"value":0,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| min color","group":"mom","color":"#ff0000","hidden":true},{"type":"slider","label":"|p| max","group":"mom","min":0,"max":50000,"value":50000,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| max color","group":"mom","color":"#ff0000","hidden":true}],"children":[]}]},{"name":"MuonSpectrometerTracks","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"\u{1d6d8}2","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"DOF","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"pT","min":0,"max":50000,"step":0.1,"value":0,"highValue":50000},{"type":"rangeSlider","label":"z0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30},{"type":"rangeSlider","label":"d0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color","hidden":false},{"type":"button","label":"Random","hidden":false},{"type":"select","label":"Color by","options":["Charge q","Momentum |p|","Vertex"],"hidden":false},{"type":"color","label":"q=-1","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=0","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=1","group":"charge","color":"#ff0000","hidden":false},{"type":"slider","label":"|p| min","group":"mom","min":0,"max":50000,"value":0,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| min color","group":"mom","color":"#ff0000","hidden":true},{"type":"slider","label":"|p| max","group":"mom","min":0,"max":50000,"value":50000,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| max color","group":"mom","color":"#ff0000","hidden":true}],"children":[]}]},{"name":"CombinedInDetTracks","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"\u{1d6d8}2","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"DOF","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"pT","min":0,"max":50000,"step":0.1,"value":0,"highValue":50000},{"type":"rangeSlider","label":"z0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30},{"type":"rangeSlider","label":"d0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color","hidden":false},{"type":"button","label":"Random","hidden":false},{"type":"select","label":"Color by","options":["Charge q","Momentum |p|","Vertex"],"hidden":false},{"type":"color","label":"q=-1","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=0","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=1","group":"charge","color":"#ff0000","hidden":false},{"type":"slider","label":"|p| min","group":"mom","min":0,"max":50000,"value":0,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| min color","group":"mom","color":"#ff0000","hidden":true},{"type":"slider","label":"|p| max","group":"mom","min":0,"max":50000,"value":50000,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| max color","group":"mom","color":"#ff0000","hidden":true}],"children":[]}]},{"name":"GSFTracks","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"\u{1d6d8}2","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"DOF","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"pT","min":0,"max":50000,"step":0.1,"value":0,"highValue":50000},{"type":"rangeSlider","label":"z0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30},{"type":"rangeSlider","label":"d0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color","hidden":false},{"type":"button","label":"Random","hidden":false},{"type":"select","label":"Color by","options":["Charge q","Momentum |p|","Vertex"],"hidden":false},{"type":"color","label":"q=-1","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=0","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=1","group":"charge","color":"#ff0000","hidden":false},{"type":"slider","label":"|p| min","group":"mom","min":0,"max":50000,"value":0,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| min color","group":"mom","color":"#ff0000","hidden":true},{"type":"slider","label":"|p| max","group":"mom","min":0,"max":50000,"value":50000,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| max color","group":"mom","color":"#ff0000","hidden":true}],"children":[]}]},{"name":"InDetTrackParticles_xAOD","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"\u{1d6d8}2","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"DOF","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"pT","min":0,"max":50000,"step":0.1,"value":0,"highValue":50000},{"type":"rangeSlider","label":"z0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30},{"type":"rangeSlider","label":"d0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color","hidden":false},{"type":"button","label":"Random","hidden":false},{"type":"select","label":"Color by","options":["Charge q","Momentum |p|","Vertex"],"hidden":false},{"type":"color","label":"q=-1","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=0","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=1","group":"charge","color":"#ff0000","hidden":false},{"type":"slider","label":"|p| min","group":"mom","min":0,"max":50000,"value":0,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| min color","group":"mom","color":"#ff0000","hidden":true},{"type":"slider","label":"|p| max","group":"mom","min":0,"max":50000,"value":50000,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| max color","group":"mom","color":"#ff0000","hidden":true}],"children":[]}]},{"name":"CombinedMuonTrackParticles_xAOD","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"\u{1d6d8}2","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"DOF","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"pT","min":0,"max":50000,"step":0.1,"value":0,"highValue":50000},{"type":"rangeSlider","label":"z0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30},{"type":"rangeSlider","label":"d0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color","hidden":false},{"type":"button","label":"Random","hidden":false},{"type":"select","label":"Color by","options":["Charge q","Momentum |p|","Vertex"],"hidden":false},{"type":"color","label":"q=-1","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=0","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=1","group":"charge","color":"#ff0000","hidden":false},{"type":"slider","label":"|p| min","group":"mom","min":0,"max":50000,"value":0,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| min color","group":"mom","color":"#ff0000","hidden":true},{"type":"slider","label":"|p| max","group":"mom","min":0,"max":50000,"value":50000,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| max color","group":"mom","color":"#ff0000","hidden":true}],"children":[]}]},{"name":"GSFTrackParticles_xAOD","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"\u{1d6d8}2","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"DOF","min":0,"max":100,"step":1,"value":0,"highValue":100},{"type":"rangeSlider","label":"pT","min":0,"max":50000,"step":0.1,"value":0,"highValue":50000},{"type":"rangeSlider","label":"z0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30},{"type":"rangeSlider","label":"d0","min":-30,"max":30,"step":0.1,"value":-30,"highValue":30}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color","hidden":false},{"type":"button","label":"Random","hidden":false},{"type":"select","label":"Color by","options":["Charge q","Momentum |p|","Vertex"],"hidden":false},{"type":"color","label":"q=-1","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=0","group":"charge","color":"#ff0000","hidden":false},{"type":"color","label":"q=1","group":"charge","color":"#ff0000","hidden":false},{"type":"slider","label":"|p| min","group":"mom","min":0,"max":50000,"value":0,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| min color","group":"mom","color":"#ff0000","hidden":true},{"type":"slider","label":"|p| max","group":"mom","min":0,"max":50000,"value":50000,"step":10,"allowCustomValue":true,"hidden":true},{"type":"color","label":"|p| max color","group":"mom","color":"#ff0000","hidden":true}],"children":[]}]}]},{"name":"Jets","nodeLevel":2,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Jets Scale","value":1,"min":0.001,"step":0.01,"max":100,"allowCustomValue":true}],"children":[{"name":"AntiKt4EMTopoJets_xAOD","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-5,"max":5,"step":0.1,"value":-5,"highValue":5},{"type":"rangeSlider","label":"Energy","min":0,"max":100000,"step":100,"value":0,"highValue":100000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"AntiKt4LCTopoJets_xAOD","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-5,"max":5,"step":0.1,"value":-5,"highValue":5},{"type":"rangeSlider","label":"Energy","min":0,"max":100000,"step":100,"value":0,"highValue":100000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"AntiKt10LCTopoJets_xAOD","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-5,"max":5,"step":0.1,"value":-5,"highValue":5},{"type":"rangeSlider","label":"Energy","min":0,"max":100000,"step":100,"value":0,"highValue":100000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]}]},{"name":"Hits","nodeLevel":2,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Pixel","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"SCT","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"TRT","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"MDT","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"RPC","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"TGC","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"CSC","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]}]},{"name":"CaloClusters","nodeLevel":2,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"CaloClusters Scale","value":1,"min":0.001,"step":0.01,"max":100,"allowCustomValue":true}],"children":[{"name":"egammaClusters_xAOD","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-5,"max":5,"step":0.1,"value":-5,"highValue":5},{"type":"rangeSlider","label":"Energy","min":0,"max":10000,"step":1,"value":0,"highValue":10000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"CaloCalTopoClusters","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-5,"max":5,"step":0.1,"value":-5,"highValue":5},{"type":"rangeSlider","label":"Energy","min":0,"max":10000,"step":1,"value":0,"highValue":10000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]}]},{"name":"CaloCells","nodeLevel":2,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"LAr","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-5,"max":5,"step":0.1,"value":-5,"highValue":5},{"type":"rangeSlider","label":"Energy","min":0,"max":10000,"step":1,"value":0,"highValue":10000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"HEC","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-5,"max":5,"step":0.1,"value":-5,"highValue":5},{"type":"rangeSlider","label":"Energy","min":0,"max":10000,"step":1,"value":0,"highValue":10000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":false,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]}]},{"name":"PlanarCaloCells","nodeLevel":2,"toggleState":false,"childrenActive":false,"configs":[{"type":"slider","label":"PlanarCaloCells Scale","value":1,"min":0.001,"step":0.01,"max":100,"allowCustomValue":true}],"children":[]},{"name":"Muons","nodeLevel":2,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Muons_xAOD","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"Energy","min":0,"max":10000,"step":1,"value":0,"highValue":10000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"Muons","nodeLevel":3,"toggleState":false,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"Energy","min":0,"max":10000,"step":1,"value":0,"highValue":10000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]}]},{"name":"Photons","nodeLevel":2,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Photons_xAOD","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"Energy","min":0,"max":10000,"step":1,"value":0,"highValue":10000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]}]},{"name":"Electrons","nodeLevel":2,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Electrons_xAOD","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"Energy","min":0,"max":10000,"step":1,"value":0,"highValue":10000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"ForwardElectrons_xAOD","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"Energy","min":0,"max":10000,"step":1,"value":0,"highValue":10000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"HLT_xAOD__ElectronContainer_egamma_Electrons_xAOD","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"\u03d5","min":-3.14,"max":3.14,"step":0.01,"value":-3.14,"highValue":3.14},{"type":"rangeSlider","label":"\u03b7","min":-4,"max":4,"step":0.1,"value":-4,"highValue":4},{"type":"rangeSlider","label":"Energy","min":0,"max":10000,"step":1,"value":0,"highValue":10000}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]}]},{"name":"Vertices","nodeLevel":2,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Vertices Scale","value":1,"min":0.001,"step":0.01,"max":100,"allowCustomValue":true}],"children":[{"name":"Vertices_xAOD","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Cut Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"label","label":"Cuts"},{"type":"button","label":"Reset cuts"},{"type":"rangeSlider","label":"vertexType","min":0,"max":5,"step":1,"value":0,"highValue":5}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]}]},{"name":"MissingEnergy","nodeLevel":2,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Size (%)","value":100,"min":1,"max":200,"allowCustomValue":true}],"children":[{"name":"MET_Reference_AntiKt4EMTopo_xAOD","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"MET_Calo_xAOD","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"MET_LocHadTopo_xAOD","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]},{"name":"MET_Core_AntiKt4LCTopo_xAOD","nodeLevel":3,"toggleState":true,"childrenActive":false,"configs":[],"children":[{"name":"Draw Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Opacity","min":0.1,"step":0.1,"max":1},{"type":"checkbox","label":"Wireframe"}],"children":[]},{"name":"Color Options","nodeLevel":4,"toggleState":true,"childrenActive":false,"configs":[{"type":"color","label":"Color"},{"type":"button","label":"Random"}],"children":[]}]}]}]},{"name":"Labels","nodeLevel":1,"toggleState":true,"childrenActive":false,"configs":[{"type":"slider","label":"Size","min":0,"max":10,"step":0.01,"allowCustomValue":true},{"type":"color","label":"Color","color":"#a8a8a8"},{"type":"button","label":"Save Labels"},{"type":"button","label":"Load Labels"}],"children":[]}]},"eventDisplay":{"cameraPosition":[3096.1557286722164,2821.4315307500133,4232.068942374551],"startClippingAngle":0,"openingClippingAngle":90}}');let pF;try{pF=typeof Intl<"u"&&Intl.v8BreakIterator}catch{pF=!1}let IC,J3,yb,AF,ju=(()=>{class i{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function dj(i){return i===wL}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!pF)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return i.\u0275fac=function(t){return new(t||i)(oi(LT))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function c0(i){return function gae(){if(null==IC&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>IC=!0}))}finally{IC=IC||!1}return IC}()?i:!!i.capture}function B9(){if(null==yb){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return yb=!1,yb;if("scrollBehavior"in document.documentElement.style)yb=!0;else{const i=Element.prototype.scrollTo;yb=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return yb}function PC(){if("object"!=typeof document||!document)return 0;if(null==J3){const i=document.createElement("div"),e=i.style;i.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const t=document.createElement("div"),n=t.style;n.width="2px",n.height="1px",i.appendChild(t),document.body.appendChild(i),J3=0,0===i.scrollLeft&&(i.scrollLeft=1,J3=0===i.scrollLeft?1:2),i.remove()}return J3}function mF(i){if(function _ae(){if(null==AF){const i=typeof document<"u"?document.head:null;AF=!(!i||!i.createShadowRoot&&!i.attachShadow)}return AF}()){const e=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function gF(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const e=i.shadowRoot.activeElement;if(e===i)break;i=e}return i}function VA(i){return i.composedPath?i.composedPath()[0]:i.target}function _F(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function jw(i,...e){return e.length?e.some(t=>i[t]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}class Fae extends Be{constructor(e,t){super()}schedule(e,t=0){return this}}const t4={setInterval(i,e,...t){const{delegate:n}=t4;return n?.setInterval?n.setInterval(i,e,...t):setInterval(i,e,...t)},clearInterval(i){const{delegate:e}=t4;return(e?.clearInterval||clearInterval)(i)},delegate:void 0};class bF extends Fae{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var n;if(this.closed)return this;this.state=e;const r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,n=0){return t4.setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&t4.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,n=!1;try{this.work(e)}catch(s){n=!0,r=s||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ye(n,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const k9={now:()=>(k9.delegate||Date).now(),delegate:void 0};class FC{constructor(e,t=FC.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,n){return new this.schedulerActionCtor(this,e).schedule(n,t)}}FC.now=k9.now;class xF extends FC{constructor(e,t=FC.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}const RC=new xF(bF),Rae=RC;function wF(i,e=RC){return Ee((t,n)=>{let r=null,s=null,a=null;const l=()=>{if(r){r.unsubscribe(),r=null;const d=s;s=null,n.next(d)}};function u(){const d=a+i,A=e.now();if(A<d)return r=this.schedule(void 0,d-A),void n.add(r);l()}t.subscribe(Ve(n,d=>{s=d,a=e.now(),r||(r=e.schedule(u,i),n.add(r))},()=>{l(),n.complete()},void 0,()=>{s=r=null}))})}function MF(i){return Yc((e,t)=>i<=t)}function kae(i,e){return i===e}function jl(i){return Ee((e,t)=>{Yo(i).subscribe(Ve(t,()=>t.complete(),Y)),!t.closed&&e.subscribe(t)})}function ma(i){return null!=i&&"false"!=`${i}`}function gc(i,e=0){return function Oae(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):e}function kC(i){return Array.isArray(i)?i:[i]}function $u(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Xu(i){return i instanceof Bs?i.nativeElement:i}let L9=(()=>{class i{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),N9=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({providers:[L9]}),i})();const U9=new Set;let $w,Uae=(()=>{class i{constructor(t){this._platform=t,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Hae}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function zae(i){if(!U9.has(i))try{$w||($w=document.createElement("style"),$w.setAttribute("type","text/css"),document.head.appendChild($w)),$w.sheet&&($w.sheet.insertRule(`@media ${i} {body{ }}`,0),U9.add(i))}catch(e){console.error(e)}}(t),this._matchMedia(t)}}return i.\u0275fac=function(t){return new(t||i)(oi(ju))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Hae(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let Vae=(()=>{class i{constructor(t,n){this._mediaMatcher=t,this._zone=n,this._queries=new Map,this._destroySubject=new D}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return z9(kC(t)).some(r=>this._registerQuery(r).mql.matches)}observe(t){let s=gI(z9(kC(t)).map(a=>this._registerQuery(a).observable));return s=wM(s.pipe(Nc(1)),s.pipe(MF(1),wF(0))),s.pipe(et(a=>{const l={matches:!1,breakpoints:{}};return a.forEach(({matches:u,query:d})=>{l.matches=l.matches||u,l.breakpoints[d]=u}),l}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const n=this._mediaMatcher.matchMedia(t),s={observable:new fe(a=>{const l=u=>this._zone.run(()=>a.next(u));return n.addListener(l),()=>{n.removeListener(l)}}).pipe(lp(n),et(({matches:a})=>({query:t,matches:a})),jl(this._destroySubject)),mql:n};return this._queries.set(t,s),s}}return i.\u0275fac=function(t){return new(t||i)(oi(Uae),oi(po))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function z9(i){return i.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function n4(i,e){return(i.getAttribute(e)||"").match(/\S+/g)||[]}const V9="cdk-describedby-message",r4="cdk-describedby-host";let CF=0,Qae=(()=>{class i{constructor(t,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=""+CF++,this._document=t,this._id=Do(Ix)+"-"+CF++}describe(t,n,r){if(!this._canBeDescribed(t,n))return;const s=SF(n,r);"string"!=typeof n?(G9(n,this._id),this._messageRegistry.set(s,{messageElement:n,referenceCount:0})):this._messageRegistry.has(s)||this._createMessageElement(n,r),this._isElementDescribedByMessage(t,s)||this._addMessageReference(t,s)}removeDescription(t,n,r){if(!n||!this._isElementNode(t))return;const s=SF(n,r);if(this._isElementDescribedByMessage(t,s)&&this._removeMessageReference(t,s),"string"==typeof n){const a=this._messageRegistry.get(s);a&&0===a.referenceCount&&this._deleteMessageElement(s)}0===this._messagesContainer?.childNodes.length&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){const t=this._document.querySelectorAll(`[${r4}="${this._id}"]`);for(let n=0;n<t.length;n++)this._removeCdkDescribedByReferenceIds(t[n]),t[n].removeAttribute(r4);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(t,n){const r=this._document.createElement("div");G9(r,this._id),r.textContent=t,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(SF(t,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(t){this._messageRegistry.get(t)?.messageElement?.remove(),this._messageRegistry.delete(t)}_createMessagesContainer(){if(this._messagesContainer)return;const t="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${t}[platform="server"]`);for(let s=0;s<n.length;s++)n[s].remove();const r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(t),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(t){const n=n4(t,"aria-describedby").filter(r=>0!=r.indexOf(V9));t.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(t,n){const r=this._messageRegistry.get(n);(function Gae(i,e,t){const n=n4(i,e);n.some(r=>r.trim()==t.trim())||(n.push(t.trim()),i.setAttribute(e,n.join(" ")))})(t,"aria-describedby",r.messageElement.id),t.setAttribute(r4,this._id),r.referenceCount++}_removeMessageReference(t,n){const r=this._messageRegistry.get(n);r.referenceCount--,function qae(i,e,t){const r=n4(i,e).filter(s=>s!=t.trim());r.length?i.setAttribute(e,r.join(" ")):i.removeAttribute(e)}(t,"aria-describedby",r.messageElement.id),t.removeAttribute(r4)}_isElementDescribedByMessage(t,n){const r=n4(t,"aria-describedby"),s=this._messageRegistry.get(n),a=s&&s.messageElement.id;return!!a&&-1!=r.indexOf(a)}_canBeDescribed(t,n){if(!this._isElementNode(t))return!1;if(n&&"object"==typeof n)return!0;const r=null==n?"":`${n}`.trim(),s=t.getAttribute("aria-label");return!(!r||s&&s.trim()===r)}_isElementNode(t){return t.nodeType===this._document.ELEMENT_NODE}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo),oi(ju))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function SF(i,e){return"string"==typeof i?`${e||""}/${i}`:i}function G9(i,e){i.id||(i.id=`${V9}-${e}-${CF++}`)}class Wae{constructor(e){this._items=e,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new D,this._typeaheadSubscription=Be.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new D,this.change=new D,e instanceof Bv&&(this._itemChangesSubscription=e.changes.subscribe(t=>{if(this._activeItem){const r=t.toArray().indexOf(this._activeItem);r>-1&&r!==this._activeItemIndex&&(this._activeItemIndex=r)}}))}skipPredicate(e){return this._skipPredicateFn=e,this}withWrap(e=!0){return this._wrap=e,this}withVerticalOrientation(e=!0){return this._vertical=e,this}withHorizontalOrientation(e){return this._horizontal=e,this}withAllowedModifierKeys(e){return this._allowedModifierKeys=e,this}withTypeAhead(e=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Cu(t=>this._pressedLetters.push(t)),wF(e),Yc(()=>this._pressedLetters.length>0),et(()=>this._pressedLetters.join(""))).subscribe(t=>{const n=this._getItemsArray();for(let r=1;r<n.length+1;r++){const s=(this._activeItemIndex+r)%n.length,a=n[s];if(!this._skipPredicateFn(a)&&0===a.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(e=!0){return this._homeAndEnd=e,this}withPageUpDown(e=!0,t=10){return this._pageUpAndDown={enabled:e,delta:t},this}setActiveItem(e){const t=this._activeItem;this.updateActiveItem(e),this._activeItem!==t&&this.change.next(this._activeItemIndex)}onKeydown(e){const t=e.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!e[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(t){case 9:return void this.tabOut.next();case 40:if(this._vertical&&r){this.setNextItemActive();break}return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&r){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&r){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}return;case 33:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}return;case 34:if(this._pageUpAndDown.enabled&&r){const s=this._activeItemIndex+this._pageUpAndDown.delta,a=this._getItemsArray().length;this._setActiveItemByIndex(s<a?s:a-1,-1);break}return;default:return void((r||jw(e,"shiftKey"))&&(e.key&&1===e.key.length?this._letterKeyStream.next(e.key.toLocaleUpperCase()):(t>=65&&t<=90||t>=48&&t<=57)&&this._letterKeyStream.next(String.fromCharCode(t))))}this._pressedLetters=[],e.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(e){const t=this._getItemsArray(),n="number"==typeof e?e:t.indexOf(e);this._activeItem=t[n]??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(e){this._wrap?this._setActiveInWrapMode(e):this._setActiveInDefaultMode(e)}_setActiveInWrapMode(e){const t=this._getItemsArray();for(let n=1;n<=t.length;n++){const r=(this._activeItemIndex+e*n+t.length)%t.length;if(!this._skipPredicateFn(t[r]))return void this.setActiveItem(r)}}_setActiveInDefaultMode(e){this._setActiveItemByIndex(this._activeItemIndex+e,e)}_setActiveItemByIndex(e,t){const n=this._getItemsArray();if(n[e]){for(;this._skipPredicateFn(n[e]);)if(!n[e+=t])return;this.setActiveItem(e)}}_getItemsArray(){return this._items instanceof Bv?this._items.toArray():this._items}}class q9 extends Wae{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(e){return this._origin=e,this}setActiveItem(e){super.setActiveItem(e),this.activeItem&&this.activeItem.focus(this._origin)}}let s4=(()=>{class i{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function $ae(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const n=function jae(i){try{return i.frameElement}catch{return null}}(function nle(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(t));if(n&&(-1===W9(n)||!this.isVisible(n)))return!1;let r=t.nodeName.toLowerCase(),s=W9(t);return t.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function ele(i){let e=i.nodeName.toLowerCase(),t="input"===e&&i.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===r?!!t.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,n){return function tle(i){return!function Kae(i){return function Zae(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function Xae(i){let e=i.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(i)||function Yae(i){return function Jae(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||Q9(i))}(t)&&!this.isDisabled(t)&&(n?.ignoreVisibility||this.isVisible(t))}}return i.\u0275fac=function(t){return new(t||i)(oi(ju))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Q9(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let e=i.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function W9(i){if(!Q9(i))return null;const e=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class ile{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,t,n,r,s=!1){this._element=e,this._checker=t,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const n=this._getFirstTabbableElement(t);return n?.focus(e),!!n}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=0;n<t.length;n++){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[n]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let n=t.length-1;n>=0;n--){const r=t[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[n]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Nc(1)).subscribe(e)}}let TF=(()=>{class i{constructor(t,n,r){this._checker=t,this._ngZone=n,this._document=r}create(t,n=!1){return new ile(t,this._checker,this._ngZone,this._document,n)}}return i.\u0275fac=function(t){return new(t||i)(oi(s4),oi(po),oi(Zo))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function o4(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function a4(i){const e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const rle=new sr("cdk-input-modality-detector-options"),sle={ignoreKeys:[18,17,224,91,16]},Xw=c0({passive:!0,capture:!0});let ole=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(t,n,r,s){this._platform=t,this._mostRecentTarget=null,this._modality=new op(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(l=>l===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=VA(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(o4(a)?"keyboard":"mouse"),this._mostRecentTarget=VA(a))},this._onTouchstart=a=>{a4(a)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=VA(a))},this._options={...sle,...s},this.modalityDetected=this._modality.pipe(MF(1)),this.modalityChanged=this.modalityDetected.pipe(function O9(i,e=ie){return i=i??kae,Ee((t,n)=>{let r,s=!0;t.subscribe(Ve(n,a=>{const l=e(a);(s||!i(r,l))&&(s=!1,r=l,n.next(a))}))})}()),t.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Xw),r.addEventListener("mousedown",this._onMousedown,Xw),r.addEventListener("touchstart",this._onTouchstart,Xw)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Xw),document.removeEventListener("mousedown",this._onMousedown,Xw),document.removeEventListener("touchstart",this._onTouchstart,Xw))}}return i.\u0275fac=function(t){return new(t||i)(oi(ju),oi(po),oi(Zo),oi(rle,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const lle=new sr("cdk-focus-monitor-default-options"),l4=c0({passive:!0,capture:!0});let u0=(()=>{class i{constructor(t,n,r,s,a){this._ngZone=t,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new D,this._rootNodeFocusAndBlurListener=l=>{for(let d=VA(l);d;d=d.parentElement)"focus"===l.type?this._onFocus(l,d):this._onBlur(l,d)},this._document=s,this._detectionMode=a?.detectionMode||0}monitor(t,n=!1){const r=Xu(t);if(!this._platform.isBrowser||1!==r.nodeType)return Zs(null);const s=mF(r)||this._getDocument(),a=this._elementInfo.get(r);if(a)return n&&(a.checkChildren=!0),a.subject;const l={checkChildren:n,subject:new D,rootNode:s};return this._elementInfo.set(r,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(t){const n=Xu(t),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(t,n,r){const s=Xu(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([l,u])=>this._originChanged(l,n,u)):(this._setOrigin(n),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((t,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,n){t.classList.toggle("cdk-focused",!!n),t.classList.toggle("cdk-touch-focused","touch"===n),t.classList.toggle("cdk-keyboard-focused","keyboard"===n),t.classList.toggle("cdk-mouse-focused","mouse"===n),t.classList.toggle("cdk-program-focused","program"===n)}_setOrigin(t,n=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&n,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,n){const r=this._elementInfo.get(n),s=VA(t);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(t,n){const r=this._elementInfo.get(n);!r||r.checkChildren&&t.relatedTarget instanceof Node&&n.contains(t.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(t,n){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(n))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const n=t.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,l4),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,l4)}),this._rootNodeFocusListenerCount.set(n,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(jl(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const n=t.rootNode;if(this._rootNodeFocusListenerCount.has(n)){const r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,l4),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,l4),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,n,r){this._setClasses(t,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(t){const n=[];return this._elementInfo.forEach((r,s)=>{(s===t||r.checkChildren&&s.contains(t))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if("mouse"!==r||!n||n===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let a=0;a<s.length;a++)if(s[a].contains(n))return!0;return!1}}return i.\u0275fac=function(t){return new(t||i)(oi(po),oi(ju),oi(ole),oi(Zo,8),oi(lle,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const $9="cdk-high-contrast-black-on-white",X9="cdk-high-contrast-white-on-black",EF="cdk-high-contrast-active";let BF,K9=(()=>{class i{constructor(t,n){this._platform=t,this._document=n,this._breakpointSubscription=Do(Vae).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(EF,$9,X9),this._hasCheckedHighContrastMode=!0;const n=this.getHighContrastMode();1===n?t.add(EF,$9):2===n&&t.add(EF,X9)}}}return i.\u0275fac=function(t){return new(t||i)(oi(ju),oi(Zo))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),DF=(()=>{class i{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return i.\u0275fac=function(t){return new(t||i)(oi(K9))},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[N9]}),i})(),ule=1;const c4={};function Y9(i){return i in c4&&(delete c4[i],!0)}const hle={setImmediate(i){const e=ule++;return c4[e]=!0,BF||(BF=Promise.resolve()),BF.then(()=>Y9(e)&&i()),e},clearImmediate(i){Y9(i)}},{setImmediate:dle,clearImmediate:fle}=hle,u4={setImmediate(...i){const{delegate:e}=u4;return(e?.setImmediate||dle)(...i)},clearImmediate(i){const{delegate:e}=u4;return(e?.clearImmediate||fle)(i)},delegate:void 0},IF=new class Ale extends xF{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class ple extends bF{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=u4.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,t,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(u4.clearImmediate(t),e._scheduled===t&&(e._scheduled=void 0))}});function Z9(i,e){return e?t=>wM(e.pipe(Nc(1),function mle(){return Ee((i,e)=>{i.subscribe(Ve(e,Y))})}()),t.pipe(Z9(i))):ga((t,n)=>Yo(i(t,n)).pipe(Nc(1),g8(t)))}function h4(i=0,e,t=Rae){let n=-1;return null!=e&&(Ae(e)?t=e:n=e),new fe(r=>{let s=function gle(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;s<0&&(s=0);let a=0;return t.schedule(function(){r.closed||(r.next(a++),0<=n?this.schedule(void 0,n):r.complete())},s)})}function J9(i,e=RC){const t=h4(i,e);return Z9(()=>t)}const _le=new sr("cdk-dir-doc",{providedIn:"root",factory:function yle(){return Do(Zo)}}),vle=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let vd=(()=>{class i{constructor(t){this.value="ltr",this.change=new ao,t&&(this.value=function ble(i){const e=i?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?vle.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return i.\u0275fac=function(t){return new(t||i)(oi(_le,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),OC=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({}),i})();const wle=new sr("mat-sanity-checks",{providedIn:"root",factory:function xle(){return!0}});let Eu=(()=>{class i{constructor(t,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!_F()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return i.\u0275fac=function(t){return new(t||i)(oi(K9),oi(wle,8),oi(Zo))},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[OC,OC]}),i})();function vb(i){return class extends i{get disabled(){return this._disabled}set disabled(e){this._disabled=ma(e)}constructor(...e){super(...e),this._disabled=!1}}}function Kw(i,e){return class extends i{get color(){return this._color}set color(t){const n=t||this.defaultColor;n!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),n&&this._elementRef.nativeElement.classList.add(`mat-${n}`),this._color=n)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function bb(i){return class extends i{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=ma(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function d4(i,e=0){return class extends i{get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?gc(t):this.defaultTabIndex}constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}}}class Cle{constructor(e,t,n,r=!1){this._renderer=e,this.element=t,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const nz=c0({passive:!0,capture:!0});class Sle{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=VA(e);t&&this._events.get(e.type)?.forEach((n,r)=>{(r===t||r.contains(t))&&n.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,n,r){const s=this._events.get(t);if(s){const a=s.get(n);a?a.add(r):s.set(n,new Set([r]))}else this._events.set(t,new Map([[n,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,nz)})}removeHandler(e,t,n){const r=this._events.get(e);if(!r)return;const s=r.get(t);s&&(s.delete(n),0===s.size&&r.delete(t),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,nz)))}}const iz={enterDuration:225,exitDuration:150},rz=c0({passive:!0,capture:!0}),sz=["mousedown","touchstart"],oz=["mouseup","mouseleave","touchend","touchcancel"];class NC{constructor(e,t,n,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Xu(n))}fadeInRipple(e,t,n={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...iz,...n.animation};n.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);const a=n.radius||function Ele(i,e,t){const n=Math.max(Math.abs(i-t.left),Math.abs(i-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(n*n+r*r)}(e,t,r),l=e-r.left,u=t-r.top,d=s.enterDuration,A=document.createElement("div");A.classList.add("mat-ripple-element"),A.style.left=l-a+"px",A.style.top=u-a+"px",A.style.height=2*a+"px",A.style.width=2*a+"px",null!=n.color&&(A.style.backgroundColor=n.color),A.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(A);const y=window.getComputedStyle(A),k=y.transitionDuration,Q="none"===y.transitionProperty||"0s"===k||"0s, 0s"===k||0===r.width&&0===r.height,se=new Cle(this,A,n,Q);A.style.transform="scale3d(1, 1, 1)",se.state=0,n.persistent||(this._mostRecentTransientRipple=se);let he=null;return!Q&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const re=()=>this._finishRippleTransition(se),Le=()=>this._destroyRipple(se);A.addEventListener("transitionend",re),A.addEventListener("transitioncancel",Le),he={onTransitionEnd:re,onTransitionCancel:Le}}),this._activeRipples.set(se,he),(Q||!d)&&this._finishRippleTransition(se),se}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,n={...iz,...e.config.animation};t.style.transitionDuration=`${n.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Xu(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,sz.forEach(n=>{NC._eventManager.addHandler(this._ngZone,n,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{oz.forEach(t=>{this._triggerElement.addEventListener(t,this,rz)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:n}=e.config;e.state=1,!n&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=o4(e),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!n&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!a4(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;for(let n=0;n<t.length;n++)this.fadeInRipple(t[n].clientX,t[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(sz.forEach(t=>NC._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&oz.forEach(t=>e.removeEventListener(t,this,rz)))}}NC._eventManager=new Sle;const az=new sr("mat-ripple-global-options");let GA=(()=>{class i{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,n,r,s,a){this._elementRef=t,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new NC(this,n,t,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,n=0,r){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,n,{...this.rippleConfig,...r}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(po),Et(ju),Et(az,8),Et(dh,8))},i.\u0275dir=gr({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,n){2&t&&Ia("mat-ripple-unbounded",n.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),i})(),xb=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[Eu,Eu]}),i})();class PF{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class My extends PF{constructor(e,t,n,r,s){super(),this.component=e,this.viewContainerRef=t,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}}class UC extends PF{constructor(e,t,n,r){super(),this.templateRef=e,this.viewContainerRef=t,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,t=this.context){return this.context=t,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Dle extends PF{constructor(e){super(),this.element=e instanceof Bs?e.nativeElement:e}}class FF{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof My?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof UC?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Dle?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Ble extends FF{constructor(e,t,n,r,s){super(),this.outletElement=e,this._componentFactoryResolver=t,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=a=>{const l=a.element,u=this._document.createComment("dom-portal");l.parentNode.insertBefore(u,l),this.outletElement.appendChild(l),this._attachedPortal=a,super.setDisposeFn(()=>{u.parentNode&&u.parentNode.replaceChild(l,u)})},this._document=s}attachComponentPortal(e){const n=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(n,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(e.injector||this._defaultInjector||$c.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let t=e.viewContainerRef,n=t.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=t.indexOf(n);-1!==r&&t.remove(r)}),this._attachedPortal=e,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let Yw=(()=>{class i extends FF{constructor(t,n,r){super(),this._componentFactoryResolver=t,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new ao,this.attachDomPortal=s=>{const a=s.element,l=this._document.createComment("dom-portal");s.setAttachedHost(this),a.parentNode.insertBefore(l,a),this._getRootNode().appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=r}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const n=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,s=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),a=n.createComponent(s,n.length,t.injector||n.injector,t.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=t,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(t){t.setAttachedHost(this);const n=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return i.\u0275fac=function(t){return new(t||i)(Et(Od),Et(bu),Et(Zo))},i.\u0275dir=gr({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[bs]}),i})(),zC=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({}),i})();class lz{}class Ple{}const V_="*";function HC(i,e){return{type:7,name:i,definitions:e,options:{}}}function h0(i,e=null){return{type:4,styles:e,timings:i}}function uz(i,e=null){return{type:2,steps:i,options:e}}function zh(i){return{type:6,styles:i,offset:null}}function G_(i,e,t){return{type:0,name:i,styles:e,options:t}}function d0(i,e,t=null){return{type:1,expr:i,animation:e,options:t}}function fz(i){Promise.resolve().then(i)}class VC{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){fz(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class pz{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,r=0;const s=this.players.length;0==s?fz(()=>this._onFinish()):this.players.forEach(a=>{a.onDone(()=>{++t==s&&this._onFinish()}),a.onDestroy(()=>{++n==s&&this._onDestroy()}),a.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((a,l)=>Math.max(a,l.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(n=>{const r=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(r)})}getPosition(){const e=this.players.reduce((t,n)=>null===t||n.totalTime>t.totalTime?n:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}const RF="!",Fle=["addListener","removeListener"],Rle=["addEventListener","removeEventListener"],kle=["on","off"];function wb(i,e,t,n){if(ze(t)&&(n=t,t=void 0),n)return wb(i,e,t).pipe(mI(n));const[r,s]=function Nle(i){return ze(i.addEventListener)&&ze(i.removeEventListener)}(i)?Rle.map(a=>l=>i[a](e,l,t)):function Ole(i){return ze(i.addListener)&&ze(i.removeListener)}(i)?Fle.map(Az(i,e)):function Lle(i){return ze(i.on)&&ze(i.off)}(i)?kle.map(Az(i,e)):[];if(!r&&br(i))return ga(a=>wb(a,e,t))(Yo(i));if(!r)throw new TypeError("Invalid event target");return new fe(a=>{const l=(...u)=>a.next(1<u.length?u:u[0]);return r(l),()=>s(l)})}function Az(i,e){return t=>n=>i[t](e,n)}const GC={schedule(i){let e=requestAnimationFrame,t=cancelAnimationFrame;const{delegate:n}=GC;n&&(e=n.requestAnimationFrame,t=n.cancelAnimationFrame);const r=e(s=>{t=void 0,i(s)});return new Be(()=>t?.(r))},requestAnimationFrame(...i){const{delegate:e}=GC;return(e?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:e}=GC;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0},mz=new class zle extends xF{flush(e){this._active=!0;const t=this._scheduled;this._scheduled=void 0;const{actions:n}=this;let r;e=e||n.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,r){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw r}}}(class Ule extends bF{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e._scheduled||(e._scheduled=GC.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,t,n=0){var r;if(null!=n?n>0:this.delay>0)return super.recycleAsyncId(e,t,n);const{actions:s}=e;null!=t&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==t&&(GC.cancelAnimationFrame(t),e._scheduled=void 0)}});function kF(i,e=RC){return function Hle(i){return Ee((e,t)=>{let n=!1,r=null,s=null,a=!1;const l=()=>{if(s?.unsubscribe(),s=null,n){n=!1;const d=r;r=null,t.next(d)}a&&t.complete()},u=()=>{s=null,a&&t.complete()};e.subscribe(Ve(t,d=>{n=!0,r=d,s||Yo(i(d)).subscribe(s=Ve(t,l,u))},()=>{a=!0,(!n||!s||s.closed)&&t.complete()}))})}(()=>h4(i,e))}const Vle=["contentWrapper"],Gle=["*"],qle=new sr("VIRTUAL_SCROLL_STRATEGY");let Zw=(()=>{class i{constructor(t,n,r){this._ngZone=t,this._platform=n,this._scrolled=new D,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const n=this.scrollContainers.get(t);n&&(n.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new fe(n=>{this._globalSubscription||this._addGlobalListener();const r=t>0?this._scrolled.pipe(kF(t)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Zs()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(t,n){const r=this.getAncestorScrollContainers(t);return this.scrolled(n).pipe(Yc(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(t){const n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,t)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,n){let r=Xu(n),s=t.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>wb(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return i.\u0275fac=function(t){return new(t||i)(oi(po),oi(ju),oi(Zo,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),gz=(()=>{class i{constructor(t,n,r,s){this.elementRef=t,this.scrollDispatcher=n,this.ngZone=r,this.dir=s,this._destroyed=new D,this._elementScrolled=new fe(a=>this.ngZone.runOutsideAngular(()=>wb(this.elementRef.nativeElement,"scroll").pipe(jl(this._destroyed)).subscribe(a)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const n=this.elementRef.nativeElement,r=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=r?t.end:t.start),null==t.right&&(t.right=r?t.start:t.end),null!=t.bottom&&(t.top=n.scrollHeight-n.clientHeight-t.bottom),r&&0!=PC()?(null!=t.left&&(t.right=n.scrollWidth-n.clientWidth-t.left),2==PC()?t.left=t.right:1==PC()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=n.scrollWidth-n.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const n=this.elementRef.nativeElement;B9()?n.scrollTo(t):(null!=t.top&&(n.scrollTop=t.top),null!=t.left&&(n.scrollLeft=t.left))}measureScrollOffset(t){const n="left",r="right",s=this.elementRef.nativeElement;if("top"==t)return s.scrollTop;if("bottom"==t)return s.scrollHeight-s.clientHeight-s.scrollTop;const a=this.dir&&"rtl"==this.dir.value;return"start"==t?t=a?r:n:"end"==t&&(t=a?n:r),a&&2==PC()?t==n?s.scrollWidth-s.clientWidth-s.scrollLeft:s.scrollLeft:a&&1==PC()?t==n?s.scrollLeft+s.scrollWidth-s.clientWidth:-s.scrollLeft:t==n?s.scrollLeft:s.scrollWidth-s.clientWidth-s.scrollLeft}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(Zw),Et(po),Et(vd,8))},i.\u0275dir=gr({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0}),i})(),Mb=(()=>{class i{constructor(t,n,r){this._platform=t,this._change=new D,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(t.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+r,right:t.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,n=this._getWindow(),r=t.documentElement,s=r.getBoundingClientRect();return{top:-s.top||t.body.scrollTop||n.scrollY||r.scrollTop||0,left:-s.left||t.body.scrollLeft||n.scrollX||r.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(kF(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return i.\u0275fac=function(t){return new(t||i)(oi(ju),oi(po),oi(Zo,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const _z=new sr("VIRTUAL_SCROLLABLE");let jle=(()=>{class i extends gz{constructor(t,n,r,s){super(t,n,r,s)}measureViewportSize(t){const n=this.elementRef.nativeElement;return"horizontal"===t?n.clientWidth:n.clientHeight}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(Zw),Et(po),Et(vd,8))},i.\u0275dir=gr({type:i,features:[bs]}),i})();const Xle=typeof requestAnimationFrame<"u"?mz:IF;let Kle=(()=>{class i extends jle{get orientation(){return this._orientation}set orientation(t){this._orientation!==t&&(this._orientation=t,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(t){this._appendOnly=ma(t)}constructor(t,n,r,s,a,l,u,d){super(t,l,r,a),this.elementRef=t,this._changeDetectorRef=n,this._scrollStrategy=s,this.scrollable=d,this._platform=Do(ju),this._detachedSubject=new D,this._renderedRangeSubject=new D,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new fe(A=>this._scrollStrategy.scrolledIndexChange.subscribe(y=>Promise.resolve().then(()=>this.ngZone.run(()=>A.next(y))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=Be.EMPTY,this._viewportChanges=u.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}ngOnInit(){this._platform.isBrowser&&(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe(lp(null),kF(0,Xle)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(t){this.ngZone.runOutsideAngular(()=>{this._forOf=t,this._forOf.dataStream.pipe(jl(this._detachedSubject)).subscribe(n=>{const r=n.length;r!==this._dataLength&&(this._dataLength=r,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(t){return this.getElementRef().nativeElement.getBoundingClientRect()[t]}setTotalContentSize(t){this._totalContentSize!==t&&(this._totalContentSize=t,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(t){(function $le(i,e){return i.start==e.start&&i.end==e.end})(this._renderedRange,t)||(this.appendOnly&&(t={start:0,end:Math.max(this._renderedRange.end,t.end)}),this._renderedRangeSubject.next(this._renderedRange=t),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(t,n="to-start"){t=this.appendOnly&&"to-start"===n?0:t;const s="horizontal"==this.orientation,a=s?"X":"Y";let u=`translate${a}(${Number((s&&this.dir&&"rtl"==this.dir.value?-1:1)*t)}px)`;this._renderedContentOffset=t,"to-end"===n&&(u+=` translate${a}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=u&&(this._renderedContentTransform=u,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(t,n="auto"){const r={behavior:n};"horizontal"===this.orientation?r.start=t:r.top=t,this.scrollable.scrollTo(r)}scrollToIndex(t,n="auto"){this._scrollStrategy.scrollToIndex(t,n)}measureScrollOffset(t){let n;return n=this.scrollable==this?r=>super.measureScrollOffset(r):r=>this.scrollable.measureScrollOffset(r),Math.max(0,n(t??("horizontal"===this.orientation?"start":"top"))-this.measureViewportOffset())}measureViewportOffset(t){let n;const r="left",s="right",a="rtl"==this.dir?.value;n="start"==t?a?s:r:"end"==t?a?r:s:t||("horizontal"===this.orientation?"left":"top");const l=this.scrollable.measureBoundingClientRectWithScrollOffset(n);return this.elementRef.nativeElement.getBoundingClientRect()[n]-l}measureRenderedContentSize(){const t=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?t.offsetWidth:t.offsetHeight}measureRangeSize(t){return this._forOf?this._forOf.measureRangeSize(t,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(t){t&&this._runAfterChangeDetection.push(t),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const t=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const n of t)n()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(zl),Et(po),Et(qle,8),Et(vd,8),Et(Zw),Et(Mb),Et(_z,8))},i.\u0275cmp=Kr({type:i,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:function(t,n){if(1&t&&Ml(Vle,7),2&t){let r;jo(r=$o())&&(n._contentWrapper=r.first)}},hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:function(t,n){2&t&&Ia("cdk-virtual-scroll-orientation-horizontal","horizontal"===n.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==n.orientation)},inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},standalone:!0,features:[ko([{provide:gz,useFactory:(e,t)=>e||t,deps:[[new Bd,new N0(_z)],i]}]),bs,dB],ngContentSelectors:Gle,decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:function(t,n){1&t&&(ch(),tn(0,"div",0,1),ru(2),on(),kr(3,"div",2)),2&t&&(Qn(3),Ud("width",n._totalContentWidth)("height",n._totalContentHeight))},styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),i})(),qC=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({}),i})(),yz=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[OC,qC,Kle,OC,qC]}),i})();const vz=B9();class Yle{constructor(e,t){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=t}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=$u(-this._previousScrollPosition.left),e.style.top=$u(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,n=e.style,r=this._document.body.style,s=n.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),vz&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),vz&&(n.scrollBehavior=s,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,n=this._viewportRuler.getViewportSize();return t.scrollHeight>n.height||t.scrollWidth>n.width}}class Zle{constructor(e,t,n,r){this._scrollDispatcher=e,this._ngZone=t,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Yc(t=>!t||!this._overlayRef.overlayElement.contains(t.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class bz{enable(){}disable(){}attach(){}}function OF(i,e){return e.some(t=>i.bottom<t.top||i.top>t.bottom||i.right<t.left||i.left>t.right)}function xz(i,e){return e.some(t=>i.top<t.top||i.bottom>t.bottom||i.left<t.left||i.right>t.right)}class Jle{constructor(e,t,n,r){this._scrollDispatcher=e,this._viewportRuler=t,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();OF(t,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let ece=(()=>{class i{constructor(t,n,r,s){this._scrollDispatcher=t,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new bz,this.close=a=>new Zle(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new Yle(this._viewportRuler,this._document),this.reposition=a=>new Jle(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=s}}return i.\u0275fac=function(t){return new(t||i)(oi(Zw),oi(Mb),oi(po),oi(Zo))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class LF{constructor(e){if(this.scrollStrategy=new bz,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const t=Object.keys(e);for(const n of t)void 0!==e[n]&&(this[n]=e[n])}}}class tce{constructor(e,t){this.connectionPair=e,this.scrollableViewProperties=t}}let wz=(()=>{class i{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const n=this._attachedOverlays.indexOf(t);n>-1&&this._attachedOverlays.splice(n,1),0===this._attachedOverlays.length&&this.detach()}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),nce=(()=>{class i extends wz{constructor(t,n){super(t),this._ngZone=n,this._keydownListener=r=>{const s=this._attachedOverlays;for(let a=s.length-1;a>-1;a--)if(s[a]._keydownEvents.observers.length>0){const l=s[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(r)):l.next(r);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo),oi(po,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),ice=(()=>{class i extends wz{constructor(t,n,r){super(t),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=VA(s)},this._clickListener=s=>{const a=VA(s),l="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const u=this._attachedOverlays.slice();for(let d=u.length-1;d>-1;d--){const A=u[d];if(A._outsidePointerEvents.observers.length<1||!A.hasAttached())continue;if(A.overlayElement.contains(a)||A.overlayElement.contains(l))break;const y=A._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>y.next(s)):y.next(s)}}}add(t){if(super.add(t),!this._isAttached){const n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo),oi(ju),oi(po,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),f4=(()=>{class i{constructor(t,n){this._platform=n,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||_F()){const r=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const n=this._document.createElement("div");n.classList.add(t),_F()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo),oi(ju))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();class QC{constructor(e,t,n,r,s,a,l,u,d,A=!1){this._portalOutlet=e,this._host=t,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=a,this._document=l,this._location=u,this._outsideClickDispatcher=d,this._animationsDisabled=A,this._backdropElement=null,this._backdropClick=new D,this._attachments=new D,this._detachments=new D,this._locationChanges=Be.EMPTY,this._backdropClickHandler=y=>this._backdropClick.next(y),this._backdropTransitionendHandler=y=>{this._disposeBackdrop(y.target)},this._keydownEvents=new D,this._outsidePointerEvents=new D,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const t=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Nc(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof t?.onDestroy&&t.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),t}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=$u(this._config.width),e.height=$u(this._config.height),e.minWidth=$u(this._config.minWidth),e.minHeight=$u(this._config.minHeight),e.maxWidth=$u(this._config.maxWidth),e.maxHeight=$u(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,t,n){const r=kC(t||[]).filter(s=>!!s);r.length&&(n?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(jl(It(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const Mz="cdk-overlay-connected-position-bounding-box",rce=/([A-Za-z%]+)$/;class sce{get positions(){return this._preferredPositions}constructor(e,t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new D,this._resizeSubscription=Be.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(Mz),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,t=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[];let a;for(let l of this._preferredPositions){let u=this._getOriginPoint(e,r,l),d=this._getOverlayPoint(u,t,l),A=this._getOverlayFit(d,t,n,l);if(A.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(l,u);this._canFitWithFlexibleDimensions(A,d,n)?s.push({position:l,origin:u,overlayRect:t,boundingBoxRect:this._calculateBoundingBoxRect(u,l)}):(!a||a.overlayFit.visibleArea<A.visibleArea)&&(a={overlayFit:A,overlayPoint:d,originPoint:u,position:l,overlayRect:t})}if(s.length){let l=null,u=-1;for(const d of s){const A=d.boundingBoxRect.width*d.boundingBoxRect.height*(d.position.weight||1);A>u&&(u=A,l=d)}return this._isPushed=!1,void this._applyPosition(l.position,l.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Cb(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Mz),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,t)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,t,n){let r,s;if("center"==n.originX)r=e.left+e.width/2;else{const a=this._isRtl()?e.right:e.left,l=this._isRtl()?e.left:e.right;r="start"==n.originX?a:l}return t.left<0&&(r-=t.left),s="center"==n.originY?e.top+e.height/2:"top"==n.originY?e.top:e.bottom,t.top<0&&(s-=t.top),{x:r,y:s}}_getOverlayPoint(e,t,n){let r,s;return r="center"==n.overlayX?-t.width/2:"start"===n.overlayX?this._isRtl()?-t.width:0:this._isRtl()?0:-t.width,s="center"==n.overlayY?-t.height/2:"top"==n.overlayY?0:-t.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,t,n,r){const s=Sz(t);let{x:a,y:l}=e,u=this._getOffset(r,"x"),d=this._getOffset(r,"y");u&&(a+=u),d&&(l+=d);let C=0-l,k=l+s.height-n.height,Q=this._subtractOverflows(s.width,0-a,a+s.width-n.width),se=this._subtractOverflows(s.height,C,k),he=Q*se;return{visibleArea:he,isCompletelyWithinViewport:s.width*s.height===he,fitsInViewportVertically:se===s.height,fitsInViewportHorizontally:Q==s.width}}_canFitWithFlexibleDimensions(e,t,n){if(this._hasFlexibleDimensions){const r=n.bottom-t.y,s=n.right-t.x,a=Cz(this._overlayRef.getConfig().minHeight),l=Cz(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=a&&a<=r)&&(e.fitsInViewportHorizontally||null!=l&&l<=s)}return!1}_pushOverlayOnScreen(e,t,n){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=Sz(t),s=this._viewportRect,a=Math.max(e.x+r.width-s.width,0),l=Math.max(e.y+r.height-s.height,0),u=Math.max(s.top-n.top-e.y,0),d=Math.max(s.left-n.left-e.x,0);let A=0,y=0;return A=r.width<=s.width?d||-a:e.x<this._viewportMargin?s.left-n.left-e.x:0,y=r.height<=s.height?u||-l:e.y<this._viewportMargin?s.top-n.top-e.y:0,this._previousPushAmount={x:A,y},{x:e.x+A,y:e.y+y}}_applyPosition(e,t){if(this._setTransformOrigin(e),this._setOverlayElementStyles(t,e),this._setBoundingBoxStyles(t,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const n=this._getScrollVisibility(),r=new tce(e,n);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const t=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,r=e.overlayY;n="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<t.length;s++)t[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(e,t){const n=this._viewportRect,r=this._isRtl();let s,a,l,A,y,C;if("top"===t.overlayY)a=e.y,s=n.height-a+this._viewportMargin;else if("bottom"===t.overlayY)l=n.height-e.y+2*this._viewportMargin,s=n.height-l+this._viewportMargin;else{const k=Math.min(n.bottom-e.y+n.top,e.y),Q=this._lastBoundingBoxSize.height;s=2*k,a=e.y-k,s>Q&&!this._isInitialRender&&!this._growAfterOpen&&(a=e.y-Q/2)}if("end"===t.overlayX&&!r||"start"===t.overlayX&&r)C=n.width-e.x+this._viewportMargin,A=e.x-this._viewportMargin;else if("start"===t.overlayX&&!r||"end"===t.overlayX&&r)y=e.x,A=n.right-e.x;else{const k=Math.min(n.right-e.x+n.left,e.x),Q=this._lastBoundingBoxSize.width;A=2*k,y=e.x-k,A>Q&&!this._isInitialRender&&!this._growAfterOpen&&(y=e.x-Q/2)}return{top:a,left:y,bottom:l,right:C,width:A,height:s}}_setBoundingBoxStyles(e,t){const n=this._calculateBoundingBoxRect(e,t);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=$u(n.height),r.top=$u(n.top),r.bottom=$u(n.bottom),r.width=$u(n.width),r.left=$u(n.left),r.right=$u(n.right),r.alignItems="center"===t.overlayX?"center":"end"===t.overlayX?"flex-end":"flex-start",r.justifyContent="center"===t.overlayY?"center":"bottom"===t.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=$u(s)),a&&(r.maxWidth=$u(a))}this._lastBoundingBoxSize=n,Cb(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Cb(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Cb(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,t){const n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){const A=this._viewportRuler.getViewportScrollPosition();Cb(n,this._getExactOverlayY(t,e,A)),Cb(n,this._getExactOverlayX(t,e,A))}else n.position="static";let l="",u=this._getOffset(t,"x"),d=this._getOffset(t,"y");u&&(l+=`translateX(${u}px) `),d&&(l+=`translateY(${d}px)`),n.transform=l.trim(),a.maxHeight&&(r?n.maxHeight=$u(a.maxHeight):s&&(n.maxHeight="")),a.maxWidth&&(r?n.maxWidth=$u(a.maxWidth):s&&(n.maxWidth="")),Cb(this._pane.style,n)}_getExactOverlayY(e,t,n){let r={top:"",bottom:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=$u(s.y),r}_getExactOverlayX(e,t,n){let a,r={left:"",right:""},s=this._getOverlayPoint(t,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),a=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===a?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=$u(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),t=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:xz(e,n),isOriginOutsideView:OF(e,n),isOverlayClipped:xz(t,n),isOverlayOutsideView:OF(t,n)}}_subtractOverflows(e,...t){return t.reduce((n,r)=>n-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,t=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+e-this._viewportMargin,bottom:n.top+t-this._viewportMargin,width:e-2*this._viewportMargin,height:t-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,t){return"x"===t?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&kC(e).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof Bs)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const t=e.width||0,n=e.height||0;return{top:e.y,bottom:e.y+n,left:e.x,right:e.x+t,height:n,width:t}}}function Cb(i,e){for(let t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function Cz(i){if("number"!=typeof i&&null!=i){const[e,t]=i.split(rce);return t&&"px"!==t?null:parseFloat(e)}return i||null}function Sz(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const Tz="cdk-global-overlay-wrapper";class oce{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const t=e.getConfig();this._overlayRef=e,this._width&&!t.width&&e.updateSize({width:this._width}),this._height&&!t.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(Tz),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:a,maxHeight:l}=n,u=!("100%"!==r&&"100vw"!==r||a&&"100%"!==a&&"100vw"!==a),d=!("100%"!==s&&"100vh"!==s||l&&"100%"!==l&&"100vh"!==l),A=this._xPosition,y=this._xOffset,C="rtl"===this._overlayRef.getConfig().direction;let k="",Q="",se="";u?se="flex-start":"center"===A?(se="center",C?Q=y:k=y):C?"left"===A||"end"===A?(se="flex-end",k=y):("right"===A||"start"===A)&&(se="flex-start",Q=y):"left"===A||"start"===A?(se="flex-start",k=y):("right"===A||"end"===A)&&(se="flex-end",Q=y),e.position=this._cssPosition,e.marginLeft=u?"0":k,e.marginTop=d?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=u?"0":Q,t.justifyContent=se,t.alignItems=d?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,t=this._overlayRef.hostElement,n=t.style;t.classList.remove(Tz),n.justifyContent=n.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let ace=(()=>{class i{constructor(t,n,r,s){this._viewportRuler=t,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new oce}flexibleConnectedTo(t){return new sce(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return i.\u0275fac=function(t){return new(t||i)(oi(Mb),oi(Zo),oi(ju),oi(f4))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),lce=0,dp=(()=>{class i{constructor(t,n,r,s,a,l,u,d,A,y,C,k){this.scrollStrategies=t,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=a,this._injector=l,this._ngZone=u,this._document=d,this._directionality=A,this._location=y,this._outsideClickDispatcher=C,this._animationsModuleType=k}create(t){const n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),a=new LF(t);return a.direction=a.direction||this._directionality.value,new QC(s,n,r,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const n=this._document.createElement("div");return n.id="cdk-overlay-"+lce++,n.classList.add("cdk-overlay-pane"),t.appendChild(n),n}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(Px)),new Ble(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return i.\u0275fac=function(t){return new(t||i)(oi(ece),oi(f4),oi(Od),oi(ace),oi(nce),oi($c),oi(po),oi(Zo),oi(vd),oi(pM),oi(ice),oi(dh,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const hce={provide:new sr("cdk-connected-overlay-scroll-strategy"),deps:[dp],useFactory:function uce(i){return()=>i.scrollStrategies.reposition()}};let WC=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({providers:[dp,hce],imports:[OC,zC,yz,yz]}),i})();const dce=["mat-menu-item",""];function fce(i,e){1&i&&(xl(),tn(0,"svg",3),kr(1,"polygon",4),on())}const pce=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],Ace=["mat-icon, [matMenuItemIcon]","*"];function mce(i,e){if(1&i){const t=Ba();tn(0,"div",0),ki("keydown",function(r){return ks(t),Ts(Or()._handleKeydown(r))})("click",function(){return ks(t),Ts(Or().closed.emit("click"))})("@transformMenu.start",function(r){return ks(t),Ts(Or()._onAnimationStart(r))})("@transformMenu.done",function(r){return ks(t),Ts(Or()._onAnimationDone(r))}),tn(1,"div",1),ru(2),on()()}if(2&i){const t=Or();Un("id",t.panelId)("ngClass",t._classList)("@transformMenu",t._panelAnimationState),ja("aria-label",t.ariaLabel||null)("aria-labelledby",t.ariaLabelledby||null)("aria-describedby",t.ariaDescribedby||null)}}const gce=["*"],NF=new sr("MAT_MENU_PANEL"),_ce=bb(vb(class{}));let Cy=(()=>{class i extends _ce{constructor(t,n,r,s,a){super(),this._elementRef=t,this._document=n,this._focusMonitor=r,this._parentMenu=s,this._changeDetectorRef=a,this.role="menuitem",this._hovered=new D,this._focused=new D,this._highlighted=!1,this._triggersSubmenu=!1,s?.addItem?.(this)}focus(t,n){this._focusMonitor&&t?this._focusMonitor.focusVia(this._getHostElement(),t,n):this._getHostElement().focus(n),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(t){this.disabled&&(t.preventDefault(),t.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){const t=this._elementRef.nativeElement.cloneNode(!0),n=t.querySelectorAll("mat-icon, .material-icons");for(let r=0;r<n.length;r++)n[r].remove();return t.textContent?.trim()||""}_setHighlighted(t){this._highlighted=t,this._changeDetectorRef?.markForCheck()}_setTriggersSubmenu(t){this._triggersSubmenu=t,this._changeDetectorRef?.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(Zo),Et(u0),Et(NF,8),Et(zl))},i.\u0275cmp=Kr({type:i,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-mdc-focus-indicator","mdc-list-item"],hostVars:8,hostBindings:function(t,n){1&t&&ki("click",function(s){return n._checkDisabled(s)})("mouseenter",function(){return n._handleMouseEnter()}),2&t&&(ja("role",n.role)("tabindex",n._getTabIndex())("aria-disabled",n.disabled)("disabled",n.disabled||null),Ia("mat-mdc-menu-item-highlighted",n._highlighted)("mat-mdc-menu-item-submenu-trigger",n._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[bs],attrs:dce,ngContentSelectors:Ace,decls:5,vars:3,consts:[[1,"mdc-list-item__primary-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-mdc-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,n){1&t&&(ch(pce),ru(0),tn(1,"span",0),ru(2,1),on(),kr(3,"div",1),ns(4,fce,2,0,"svg",2)),2&t&&(Qn(3),Un("matRippleDisabled",n.disableRipple||n.disabled)("matRippleTrigger",n._getHostElement()),Qn(1),Un("ngIf",n._triggersSubmenu))},dependencies:[ph,GA],encapsulation:2,changeDetection:0}),i})();const yce=new sr("MatMenuContent"),p4={transformMenu:HC("transformMenu",[G_("void",zh({opacity:0,transform:"scale(0.8)"})),d0("void => enter",h0("120ms cubic-bezier(0, 0, 0.2, 1)",zh({opacity:1,transform:"scale(1)"}))),d0("* => void",h0("100ms 25ms linear",zh({opacity:0})))]),fadeInItems:HC("fadeInItems",[G_("showing",zh({opacity:1})),d0("void => *",[zh({opacity:0}),h0("400ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let vce=0;const Ez=new sr("mat-menu-default-options",{providedIn:"root",factory:function bce(){return{overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"}}});let jC=(()=>{class i{get xPosition(){return this._xPosition}set xPosition(t){this._xPosition=t,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(t){this._yPosition=t,this.setPositionClasses()}get overlapTrigger(){return this._overlapTrigger}set overlapTrigger(t){this._overlapTrigger=ma(t)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=ma(t)}set panelClass(t){const n=this._previousPanelClass;n&&n.length&&n.split(" ").forEach(r=>{this._classList[r]=!1}),this._previousPanelClass=t,t&&t.length&&(t.split(" ").forEach(r=>{this._classList[r]=!0}),this._elementRef.nativeElement.className="")}get classList(){return this.panelClass}set classList(t){this.panelClass=t}constructor(t,n,r,s){this._elementRef=t,this._ngZone=n,this._defaultOptions=r,this._changeDetectorRef=s,this._xPosition=this._defaultOptions.xPosition,this._yPosition=this._defaultOptions.yPosition,this._directDescendantItems=new Bv,this._classList={},this._panelAnimationState="void",this._animationDone=new D,this.overlayPanelClass=this._defaultOptions.overlayPanelClass||"",this.backdropClass=this._defaultOptions.backdropClass,this._overlapTrigger=this._defaultOptions.overlapTrigger,this._hasBackdrop=this._defaultOptions.hasBackdrop,this.closed=new ao,this.close=this.closed,this.panelId="mat-menu-panel-"+vce++}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new q9(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(lp(this._directDescendantItems),ap(t=>It(...t.map(n=>n._focused)))).subscribe(t=>this._keyManager.updateActiveItem(t)),this._directDescendantItems.changes.subscribe(t=>{const n=this._keyManager;if("enter"===this._panelAnimationState&&n.activeItem?._hasFocus()){const r=t.toArray(),s=Math.max(0,Math.min(r.length-1,n.activeItemIndex||0));r[s]&&!r[s].disabled?n.setActiveItem(s):n.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusSubscription?.unsubscribe()}_hovered(){return this._directDescendantItems.changes.pipe(lp(this._directDescendantItems),ap(n=>It(...n.map(r=>r._hovered))))}addItem(t){}removeItem(t){}_handleKeydown(t){const n=t.keyCode,r=this._keyManager;switch(n){case 27:jw(t)||(t.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&"ltr"===this.direction&&this.closed.emit("keydown");break;case 39:this.parentMenu&&"rtl"===this.direction&&this.closed.emit("keydown");break;default:return(38===n||40===n)&&r.setFocusOrigin("keyboard"),void r.onKeydown(t)}t.stopPropagation()}focusFirstItem(t="program"){this._firstItemFocusSubscription?.unsubscribe(),this._firstItemFocusSubscription=this._ngZone.onStable.pipe(Nc(1)).subscribe(()=>{let n=null;if(this._directDescendantItems.length&&(n=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),!n||!n.contains(document.activeElement)){const r=this._keyManager;r.setFocusOrigin(t).setFirstItemActive(),!r.activeItem&&n&&n.focus()}})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(t){const n=Math.min(this._baseElevation+t,24),r=`${this._elevationPrefix}${n}`,s=Object.keys(this._classList).find(a=>a.startsWith(this._elevationPrefix));(!s||s===this._previousElevation)&&(this._previousElevation&&(this._classList[this._previousElevation]=!1),this._classList[r]=!0,this._previousElevation=r)}setPositionClasses(t=this.xPosition,n=this.yPosition){const r=this._classList;r["mat-menu-before"]="before"===t,r["mat-menu-after"]="after"===t,r["mat-menu-above"]="above"===n,r["mat-menu-below"]="below"===n,this._changeDetectorRef?.markForCheck()}_startAnimation(){this._panelAnimationState="enter"}_resetAnimation(){this._panelAnimationState="void"}_onAnimationDone(t){this._animationDone.next(t),this._isAnimating=!1}_onAnimationStart(t){this._isAnimating=!0,"enter"===t.toState&&0===this._keyManager.activeItemIndex&&(t.element.scrollTop=0)}_updateDirectDescendants(){this._allItems.changes.pipe(lp(this._allItems)).subscribe(t=>{this._directDescendantItems.reset(t.filter(n=>n._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(po),Et(Ez),Et(zl))},i.\u0275dir=gr({type:i,contentQueries:function(t,n,r){if(1&t&&(md(r,yce,5),md(r,Cy,5),md(r,Cy,4)),2&t){let s;jo(s=$o())&&(n.lazyContent=s.first),jo(s=$o())&&(n._allItems=s),jo(s=$o())&&(n.items=s)}},viewQuery:function(t,n){if(1&t&&Ml(hh,5),2&t){let r;jo(r=$o())&&(n.templateRef=r.first)}},inputs:{backdropClass:"backdropClass",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:"overlapTrigger",hasBackdrop:"hasBackdrop",panelClass:["class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"}}),i})(),$C=(()=>{class i extends jC{constructor(t,n,r,s){super(t,n,r,s),this._elevationPrefix="mat-elevation-z",this._baseElevation=8}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(po),Et(Ez),Et(zl))},i.\u0275cmp=Kr({type:i,selectors:[["mat-menu"]],hostVars:3,hostBindings:function(t,n){2&t&&ja("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},exportAs:["matMenu"],features:[ko([{provide:NF,useExisting:i}]),bs],ngContentSelectors:gce,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel","mdc-menu-surface","mdc-menu-surface--open","mat-mdc-elevation-specific",3,"id","ngClass","keydown","click"],[1,"mat-mdc-menu-content","mdc-list"]],template:function(t,n){1&t&&(ch(),ns(0,mce,3,6,"ng-template"))},dependencies:[Dm],styles:['.mdc-menu-surface{display:none;position:absolute;box-sizing:border-box;max-width:var(--mdc-menu-max-width, calc(100vw - 32px));max-height:var(--mdc-menu-max-height, calc(100vh - 32px));margin:0;padding:0;transform:scale(1);transform-origin:top left;opacity:0;overflow:auto;will-change:transform,opacity;z-index:8;border-radius:var(--mdc-shape-medium, 4px);transform-origin-left:top left;transform-origin-right:top right}.mdc-menu-surface:focus{outline:none}.mdc-menu-surface--animating-open{display:inline-block;transform:scale(0.8);opacity:0}.mdc-menu-surface--open{display:inline-block;transform:scale(1);opacity:1}.mdc-menu-surface--animating-closed{display:inline-block;opacity:0}[dir=rtl] .mdc-menu-surface,.mdc-menu-surface[dir=rtl]{transform-origin-left:top right;transform-origin-right:top left}.mdc-menu-surface--anchor{position:relative;overflow:visible}.mdc-menu-surface--fixed{position:fixed}.mdc-menu-surface--fullwidth{width:100%}mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;list-style-type:none}.mat-mdc-menu-content:focus{outline:none}.mat-mdc-menu-panel.ng-animating{pointer-events:none}.cdk-high-contrast-active .mat-mdc-menu-panel{outline:solid 1px}.mat-mdc-menu-panel.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;position:relative}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px}.mat-mdc-menu-item:focus{outline:none}[dir=rtl] .mat-mdc-menu-item,.mat-mdc-menu-item[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-menu-item::-moz-focus-inner{border:0}.mat-mdc-menu-item.mdc-list-item{align-items:center}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item .mat-icon{margin-right:16px}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:16px}.mat-mdc-menu-item .mdc-list-item__primary-text{white-space:normal}.mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:32px}[dir=rtl] .mat-mdc-menu-item.mat-mdc-menu-item-submenu-trigger{padding-right:16px;padding-left:32px}.cdk-high-contrast-active .mat-mdc-menu-item{margin-top:1px}.mat-mdc-menu-submenu-icon{position:absolute;top:50%;right:16px;transform:translateY(-50%);width:5px;height:10px;fill:currentColor}[dir=rtl] .mat-mdc-menu-submenu-icon{right:auto;left:16px;transform:translateY(-50%) scaleX(-1)}.cdk-high-contrast-active .mat-mdc-menu-submenu-icon{fill:CanvasText}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}'],encapsulation:2,data:{animation:[p4.transformMenu,p4.fadeInItems]},changeDetection:0}),i})();const Dz=new sr("mat-menu-scroll-strategy"),wce={provide:Dz,deps:[dp],useFactory:function xce(i){return()=>i.scrollStrategies.reposition()}},Bz=c0({passive:!0});let Mce=(()=>{class i{get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(t){this.menu=t}get menu(){return this._menu}set menu(t){t!==this._menu&&(this._menu=t,this._menuCloseSubscription.unsubscribe(),t&&(this._menuCloseSubscription=t.close.subscribe(n=>{this._destroyMenu(n),("click"===n||"tab"===n)&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(n)})),this._menuItemInstance?._setTriggersSubmenu(this.triggersSubmenu()))}constructor(t,n,r,s,a,l,u,d,A){this._overlay=t,this._element=n,this._viewContainerRef=r,this._menuItemInstance=l,this._dir=u,this._focusMonitor=d,this._ngZone=A,this._overlayRef=null,this._menuOpen=!1,this._closingActionsSubscription=Be.EMPTY,this._hoverSubscription=Be.EMPTY,this._menuCloseSubscription=Be.EMPTY,this._changeDetectorRef=Do(zl),this._handleTouchStart=y=>{a4(y)||(this._openedBy="touch")},this._openedBy=void 0,this.restoreFocus=!0,this.menuOpened=new ao,this.onMenuOpen=this.menuOpened,this.menuClosed=new ao,this.onMenuClose=this.menuClosed,this._scrollStrategy=s,this._parentMaterialMenu=a instanceof jC?a:void 0,n.nativeElement.addEventListener("touchstart",this._handleTouchStart,Bz)}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null),this._element.nativeElement.removeEventListener("touchstart",this._handleTouchStart,Bz),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._hoverSubscription.unsubscribe()}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&"rtl"===this._dir.value?"rtl":"ltr"}triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this.menu)}toggleMenu(){return this._menuOpen?this.closeMenu():this.openMenu()}openMenu(){const t=this.menu;if(this._menuOpen||!t)return;const n=this._createOverlay(t),r=n.getConfig(),s=r.positionStrategy;this._setPosition(t,s),r.hasBackdrop=null==t.hasBackdrop?!this.triggersSubmenu():t.hasBackdrop,n.attach(this._getPortal(t)),t.lazyContent&&t.lazyContent.attach(this.menuData),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this.closeMenu()),this._initMenu(t),t instanceof jC&&(t._startAnimation(),t._directDescendantItems.changes.pipe(jl(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}closeMenu(){this.menu?.close.emit()}focus(t,n){this._focusMonitor&&t?this._focusMonitor.focusVia(this._element,t,n):this._element.nativeElement.focus(n)}updatePosition(){this._overlayRef?.updatePosition()}_destroyMenu(t){if(!this._overlayRef||!this.menuOpen)return;const n=this.menu;this._closingActionsSubscription.unsubscribe(),this._overlayRef.detach(),this.restoreFocus&&("keydown"===t||!this._openedBy||!this.triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,n instanceof jC?(n._resetAnimation(),n.lazyContent?n._animationDone.pipe(Yc(r=>"void"===r.toState),Nc(1),jl(n.lazyContent._attached)).subscribe({next:()=>n.lazyContent.detach(),complete:()=>this._setIsMenuOpen(!1)}):this._setIsMenuOpen(!1)):(this._setIsMenuOpen(!1),n?.lazyContent?.detach())}_initMenu(t){t.parentMenu=this.triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,this._setMenuElevation(t),t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0)}_setMenuElevation(t){if(t.setElevation){let n=0,r=t.parentMenu;for(;r;)n++,r=r.parentMenu;t.setElevation(n)}}_setIsMenuOpen(t){t!==this._menuOpen&&(this._menuOpen=t,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this.triggersSubmenu()&&this._menuItemInstance._setHighlighted(t),this._changeDetectorRef.markForCheck())}_createOverlay(t){if(!this._overlayRef){const n=this._getOverlayConfig(t);this._subscribeToPositions(t,n.positionStrategy),this._overlayRef=this._overlay.create(n),this._overlayRef.keydownEvents().subscribe()}return this._overlayRef}_getOverlayConfig(t){return new LF({positionStrategy:this._overlay.position().flexibleConnectedTo(this._element).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:t.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:t.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir})}_subscribeToPositions(t,n){t.setPositionClasses&&n.positionChanges.subscribe(r=>{const s="start"===r.connectionPair.overlayX?"after":"before",a="top"===r.connectionPair.overlayY?"below":"above";this._ngZone?this._ngZone.run(()=>t.setPositionClasses(s,a)):t.setPositionClasses(s,a)})}_setPosition(t,n){let[r,s]="before"===t.xPosition?["end","start"]:["start","end"],[a,l]="above"===t.yPosition?["bottom","top"]:["top","bottom"],[u,d]=[a,l],[A,y]=[r,s],C=0;if(this.triggersSubmenu()){if(y=r="before"===t.xPosition?"start":"end",s=A="end"===r?"start":"end",this._parentMaterialMenu){if(null==this._parentInnerPadding){const k=this._parentMaterialMenu.items.first;this._parentInnerPadding=k?k._getHostElement().offsetTop:0}C="bottom"===a?this._parentInnerPadding:-this._parentInnerPadding}}else t.overlapTrigger||(u="top"===a?"bottom":"top",d="top"===l?"bottom":"top");n.withPositions([{originX:r,originY:u,overlayX:A,overlayY:a,offsetY:C},{originX:s,originY:u,overlayX:y,overlayY:a,offsetY:C},{originX:r,originY:d,overlayX:A,overlayY:l,offsetY:-C},{originX:s,originY:d,overlayX:y,overlayY:l,offsetY:-C}])}_menuClosingActions(){const t=this._overlayRef.backdropClick(),n=this._overlayRef.detachments();return It(t,this._parentMaterialMenu?this._parentMaterialMenu.closed:Zs(),this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(Yc(a=>a!==this._menuItemInstance),Yc(()=>this._menuOpen)):Zs(),n)}_handleMousedown(t){o4(t)||(this._openedBy=0===t.button?"mouse":void 0,this.triggersSubmenu()&&t.preventDefault())}_handleKeydown(t){const n=t.keyCode;(13===n||32===n)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(39===n&&"ltr"===this.dir||37===n&&"rtl"===this.dir)&&(this._openedBy="keyboard",this.openMenu())}_handleClick(t){this.triggersSubmenu()?(t.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){!this.triggersSubmenu()||!this._parentMaterialMenu||(this._hoverSubscription=this._parentMaterialMenu._hovered().pipe(Yc(t=>t===this._menuItemInstance&&!t.disabled),J9(0,IF)).subscribe(()=>{this._openedBy="mouse",this.menu instanceof jC&&this.menu._isAnimating?this.menu._animationDone.pipe(Nc(1),J9(0,IF),jl(this._parentMaterialMenu._hovered())).subscribe(()=>this.openMenu()):this.openMenu()}))}_getPortal(t){return(!this._portal||this._portal.templateRef!==t.templateRef)&&(this._portal=new UC(t.templateRef,this._viewContainerRef)),this._portal}}return i.\u0275fac=function(t){return new(t||i)(Et(dp),Et(Bs),Et(bu),Et(Dz),Et(NF,8),Et(Cy,10),Et(vd,8),Et(u0),Et(po))},i.\u0275dir=gr({type:i,hostVars:3,hostBindings:function(t,n){1&t&&ki("click",function(s){return n._handleClick(s)})("mousedown",function(s){return n._handleMousedown(s)})("keydown",function(s){return n._handleKeydown(s)}),2&t&&ja("aria-haspopup",n.menu?"menu":null)("aria-expanded",n.menuOpen)("aria-controls",n.menuOpen?n.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:["mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:["matMenuTriggerFor","menu"],menuData:["matMenuTriggerData","menuData"],restoreFocus:["matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"}}),i})(),XC=(()=>{class i extends Mce{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=il(i)))(n||i)}}(),i.\u0275dir=gr({type:i,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],exportAs:["matMenuTrigger"],features:[bs]}),i})(),Cce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({providers:[wce],imports:[K1,xb,Eu,WC,qC,Eu]}),i})();const Sce=["tooltip"],Iz=new sr("mat-tooltip-scroll-strategy"),Dce={provide:Iz,deps:[dp],useFactory:function Ece(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}},Ice=new sr("mat-tooltip-default-options",{providedIn:"root",factory:function Bce(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}}),Pz="tooltip-panel",Fz=c0({passive:!0});let Lce=(()=>{class i{get position(){return this._position}set position(t){t!==this._position&&(this._position=t,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(t){this._positionAtOrigin=ma(t),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(t){this._disabled=ma(t),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(t){this._showDelay=gc(t)}get hideDelay(){return this._hideDelay}set hideDelay(t){this._hideDelay=gc(t),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=null!=t?String(t).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(t){this._tooltipClass=t,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(t,n,r,s,a,l,u,d,A,y,C,k){this._overlay=t,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=s,this._ngZone=a,this._platform=l,this._ariaDescriber=u,this._focusMonitor=d,this._dir=y,this._defaultOptions=C,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._viewportMargin=8,this._cssClassPrefix="mat",this._showDelay=this._defaultOptions.showDelay,this._hideDelay=this._defaultOptions.hideDelay,this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new D,this._scrollStrategy=A,this._document=k,C&&(C.position&&(this.position=C.position),C.positionAtOrigin&&(this.positionAtOrigin=C.positionAtOrigin),C.touchGestures&&(this.touchGestures=C.touchGestures)),y.change.pipe(jl(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)})}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(jl(this._destroyed)).subscribe(t=>{t?"keyboard"===t&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){const t=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{t.removeEventListener(n,r,Fz)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(t,this.message,"tooltip"),this._focusMonitor.stopMonitoring(t)}show(t=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible())return void this._tooltipInstance?._cancelPendingAnimations();const r=this._createOverlay(n);this._detach(),this._portal=this._portal||new My(this._tooltipComponent,this._viewContainerRef);const s=this._tooltipInstance=r.attach(this._portal).instance;s._triggerElement=this._elementRef.nativeElement,s._mouseLeaveHideDelay=this._hideDelay,s.afterHidden().pipe(jl(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),s.show(t)}hide(t=this.hideDelay){const n=this._tooltipInstance;n&&(n.isVisible()?n.hide(t):(n._cancelPendingAnimations(),this._detach()))}toggle(t){this._isTooltipVisible()?this.hide():this.show(void 0,t)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(t){if(this._overlayRef){const s=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!t)&&s._origin instanceof Bs)return this._overlayRef;this._detach()}const n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin&&t||this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return r.positionChanges.pipe(jl(this._destroyed)).subscribe(s=>{this._updateCurrentPositionClass(s.connectionPair),this._tooltipInstance&&s.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${Pz}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(jl(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(jl(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(jl(this._destroyed)).subscribe(s=>{this._isTooltipVisible()&&27===s.keyCode&&!jw(s)&&(s.preventDefault(),s.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(t){const n=t.getConfig().positionStrategy,r=this._getOrigin(),s=this._getOverlayPosition();n.withPositions([this._addOffset({...r.main,...s.main}),this._addOffset({...r.fallback,...s.fallback})])}_addOffset(t){return t}_getOrigin(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n||"below"==n?r={originX:"center",originY:"above"==n?"top":"bottom"}:"before"==n||"left"==n&&t||"right"==n&&!t?r={originX:"start",originY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(r={originX:"end",originY:"center"});const{x:s,y:a}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:s,originY:a}}}_getOverlayPosition(){const t=!this._dir||"ltr"==this._dir.value,n=this.position;let r;"above"==n?r={overlayX:"center",overlayY:"bottom"}:"below"==n?r={overlayX:"center",overlayY:"top"}:"before"==n||"left"==n&&t||"right"==n&&!t?r={overlayX:"end",overlayY:"center"}:("after"==n||"right"==n&&t||"left"==n&&!t)&&(r={overlayX:"start",overlayY:"center"});const{x:s,y:a}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:s,overlayY:a}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(Nc(1),jl(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(t){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=t,this._tooltipInstance._markForCheck())}_invertPosition(t,n){return"above"===this.position||"below"===this.position?"top"===n?n="bottom":"bottom"===n&&(n="top"):"end"===t?t="start":"start"===t&&(t="end"),{x:t,y:n}}_updateCurrentPositionClass(t){const{overlayY:n,originX:r,originY:s}=t;let a;if(a="center"===n?this._dir&&"rtl"===this._dir.value?"end"===r?"left":"right":"start"===r?"left":"right":"bottom"===n&&"top"===s?"above":"below",a!==this._currentPosition){const l=this._overlayRef;if(l){const u=`${this._cssClassPrefix}-${Pz}-`;l.removePanelClass(u+this._currentPosition),l.addPanelClass(u+a)}this._currentPosition=a}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",t=>{let n;this._setupPointerExitEventsIfNeeded(),void 0!==t.x&&void 0!==t.y&&(n=t),this.show(void 0,n)}]):"off"!==this.touchGestures&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",t=>{const n=t.targetTouches?.[0],r=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout),this._touchstartTimeout=setTimeout(()=>this.show(void 0,r),500)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;const t=[];if(this._platformSupportsMouseEvents())t.push(["mouseleave",n=>{const r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if("off"!==this.touchGestures){this._disableNativeGesturesIfNecessary();const n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};t.push(["touchend",n],["touchcancel",n])}this._addListeners(t),this._passiveListeners.push(...t)}_addListeners(t){t.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,Fz)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(t){if(this._isTooltipVisible()){const n=this._document.elementFromPoint(t.clientX,t.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){const t=this.touchGestures;if("off"!==t){const n=this._elementRef.nativeElement,r=n.style;("on"===t||"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName)&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),("on"===t||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}}return i.\u0275fac=function(t){Nd()},i.\u0275dir=gr({type:i,inputs:{position:["matTooltipPosition","position"],positionAtOrigin:["matTooltipPositionAtOrigin","positionAtOrigin"],disabled:["matTooltipDisabled","disabled"],showDelay:["matTooltipShowDelay","showDelay"],hideDelay:["matTooltipHideDelay","hideDelay"],touchGestures:["matTooltipTouchGestures","touchGestures"],message:["matTooltip","message"],tooltipClass:["matTooltipClass","tooltipClass"]}}),i})(),Sb=(()=>{class i extends Lce{constructor(t,n,r,s,a,l,u,d,A,y,C,k){super(t,n,r,s,a,l,u,d,A,y,C,k),this._tooltipComponent=Uce,this._cssClassPrefix="mat-mdc",this._viewportMargin=8}_addOffset(t){const r=!this._dir||"ltr"==this._dir.value;return"top"===t.originY?t.offsetY=-8:"bottom"===t.originY?t.offsetY=8:"start"===t.originX?t.offsetX=r?-8:8:"end"===t.originX&&(t.offsetX=r?8:-8),t}}return i.\u0275fac=function(t){return new(t||i)(Et(dp),Et(Bs),Et(Zw),Et(bu),Et(po),Et(ju),Et(Qae),Et(u0),Et(Iz),Et(vd,8),Et(Ice,8),Et(Zo))},i.\u0275dir=gr({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],exportAs:["matTooltip"],features:[bs]}),i})(),Nce=(()=>{class i{constructor(t,n){this._changeDetectorRef=t,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new D,this._animationsDisabled="NoopAnimations"===n}show(t){clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},t)}hide(t){clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},t)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:t}){(!t||!this._triggerElement.contains(t))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){}_handleAnimationEnd({animationName:t}){(t===this._showAnimation||t===this._hideAnimation)&&this._finalizeAnimation(t===this._showAnimation)}_cancelPendingAnimations(){clearTimeout(this._showTimeoutId),clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(t){t?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(t){const n=this._tooltip.nativeElement,r=this._showAnimation,s=this._hideAnimation;if(n.classList.remove(t?s:r),n.classList.add(t?r:s),this._isVisible=t,t&&!this._animationsDisabled&&"function"==typeof getComputedStyle){const a=getComputedStyle(n);("0s"===a.getPropertyValue("animation-duration")||"none"===a.getPropertyValue("animation-name"))&&(this._animationsDisabled=!0)}t&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(t))}}return i.\u0275fac=function(t){return new(t||i)(Et(zl),Et(dh,8))},i.\u0275dir=gr({type:i}),i})(),Uce=(()=>{class i extends Nce{constructor(t,n,r){super(t,r),this._elementRef=n,this._isMultiline=!1,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide"}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){const t=this._elementRef.nativeElement.getBoundingClientRect();return t.height>24&&t.width>=200}}return i.\u0275fac=function(t){return new(t||i)(Et(zl),Et(Bs),Et(dh,8))},i.\u0275cmp=Kr({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(t,n){if(1&t&&Ml(Sce,7),2&t){let r;jo(r=$o())&&(n._tooltip=r.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(t,n){1&t&&ki("mouseleave",function(s){return n._handleMouseLeave(s)}),2&t&&Ud("zoom",n.isVisible()?1:null)},features:[bs],decls:4,vars:4,consts:[[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"ngClass","animationend"],["tooltip",""],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(t,n){1&t&&(tn(0,"div",0,1),ki("animationend",function(s){return n._handleAnimationEnd(s)}),tn(2,"div",2),dr(3),on()()),2&t&&(Ia("mdc-tooltip--multiline",n._isMultiline),Un("ngClass",n.tooltipClass),Qn(3),bf(n.message))},dependencies:[Dm],styles:['.mdc-tooltip__surface{word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - (2 * 8px));margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - (2 * 8px));align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color, #fff)}.mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape, var(--mdc-shape-small, 4px))}.mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color, #000)}.mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font, inherit);font-size:var(--mdc-plain-tooltip-supporting-text-size, inherit);font-weight:var(--mdc-plain-tooltip-supporting-text-weight, inherit);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking, inherit)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0}),i})(),zce=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({providers:[Dce],imports:[DF,K1,WC,Eu,Eu,qC]}),i})();const Hce=function(i){return{disabled:i}},Vce=function(i){return{"active-icon":i}};let Ec=(()=>{class i{icon;active;tooltip;disabled=!1;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Kr({type:i,selectors:[["app-menu-toggle"]],inputs:{icon:"icon",active:"active",tooltip:"tooltip",disabled:"disabled"},decls:3,vars:9,consts:[["matTooltipPosition","above","matTooltipTouchGestures","off",1,"menu-toggle",3,"ngClass","matTooltip"],[1,"menu-toggle-icon",3,"ngClass"]],template:function(n,r){1&n&&(tn(0,"button",0),xl(),tn(1,"svg",1),kr(2,"use"),on()()),2&n&&(Un("ngClass",wf(5,Hce,r.disabled))("matTooltip",r.tooltip),Qn(1),Un("ngClass",wf(7,Vce,r.active)),Qn(1),Hg("href","assets/icons/",r.icon,".svg#",r.icon,""))},dependencies:[Dm,Sb],styles:["[_nghost-%COMP%]{display:flex;margin:0 .6rem}[_nghost-%COMP%]   .menu-toggle[_ngcontent-%COMP%]{display:flex;background:unset;border:none;height:2.5rem;width:2.5rem;min-height:2.5rem;min-width:2.5rem;padding:.65rem;cursor:pointer;align-self:center;transition:all .4s}[_nghost-%COMP%]   .menu-toggle-icon[_ngcontent-%COMP%]{width:100%;height:100%}[_nghost-%COMP%]   .menu-toggle-icon.active-icon[_ngcontent-%COMP%]{--phoenix-options-icon-path: #00bcd4}[_nghost-%COMP%]   .menu-toggle[_ngcontent-%COMP%]:hover{background-color:var(--phoenix-options-icon-bg);border-radius:40%;transition:all .4s}[_nghost-%COMP%]   .menu-toggle.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.4}"]})}return i})();function Gce(i,e){if(1&i){const t=Ba();tn(0,"button",2),ki("click",function(){const s=ks(t).$implicit;return Ts(Or().animatePreset(s))}),dr(1),on()}if(2&i){const t=e.$implicit;Qn(1),wl(" ",t," ")}}const Rz={"Cavern to ID":{name:"Cavern to ID",positions:[{position:[66388.95051168812,5264.228603228927,-46910.7848593543],duration:1e3},{position:[12834.18729094943,677.7571205763458,135.68755273443463],duration:2e3},{position:[312.02688693297375,25.884223757326,270.10019006776236],duration:3500},{position:[263.3640855132258,19.874838262525053,-318.16541790248885],duration:3e3},{position:[5534.140362338047,234.03507981484574,-2933.619479808285],duration:2e3},{position:[2681.277288705242,646.5795158318147,5628.5248735111745],duration:1e3},{position:[-6062.586283740076,790.5876682946184,1381.1675900848818],duration:1e3},{position:[-1766.7693725879053,1007.1048030984678,-5928.901341784575],duration:1e3},{position:[12814.982506255355,2516.987185037266,-22891.902734328327],duration:1e3}],animateEventAfterInterval:5e3,collisionDuration:6e3}};let UF=(()=>{class i{eventDisplay;animationPresets=Rz;animationPresetsKeys=Object.keys(this.animationPresets);isAnimating=!1;constructor(t){this.eventDisplay=t}animatePreset(t){this.setDetectorOpacity(.2),this.eventDisplay.animatePreset(this.animationPresets[t],()=>{this.setDetectorOpacity(1)})}animateCamera(){this.isAnimating||(this.isAnimating=!0,this.eventDisplay.animateThroughEvent([11976,7262,11927],3e3,()=>{this.isAnimating=!1}))}setDetectorOpacity(t){const n=this.eventDisplay.getThreeManager().getSceneManager(),r=n.getObjectByName(Ya.GEOMETRIES_ID);n.setGeometryOpacity(r,t)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-animate-camera"]],inputs:{animationPresets:"animationPresets"},decls:6,vars:2,consts:[["animationPresets",""],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],["tooltip","Preset animations","icon","animate-camera",3,"matMenuTriggerFor"]],template:function(n,r){if(1&n&&(tn(0,"mat-menu",null,0),ns(2,Gce,2,1,"button",1),tn(3,"button",2),ki("click",function(){return r.animateCamera()}),dr(4,"Animate camera"),on()(),kr(5,"app-menu-toggle",3)),2&n){const s=Fl(1);Qn(2),Un("ngForOf",r.animationPresetsKeys),Qn(3),Un("matMenuTriggerFor",s)}},dependencies:[sp,$C,Cy,XC,Ec]})}return i})();const qce=function(i){return{"ui-menu-hidden":i}},Qce=["*"];let zF=(()=>{class i{hideUIMenu=!1;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Kr({type:i,selectors:[["app-ui-menu-wrapper"]],ngContentSelectors:Qce,decls:6,vars:5,consts:[["id","uiMenu"],["id","hideUIMenu","matTooltipPosition","above",3,"matTooltip","ngClass","click"],["href","assets/icons/expand.svg#expand"],["id","optionsPanel",3,"hidden"]],template:function(n,r){1&n&&(ch(),tn(0,"div",0)(1,"button",1),ki("click",function(){return r.hideUIMenu=!r.hideUIMenu}),xl(),tn(2,"svg"),kr(3,"use",2),on()(),Jh(),tn(4,"div",3),ru(5),on()()),2&n&&(Qn(1),Un("matTooltip",r.hideUIMenu?"Show toolbar":"Hide toolbar")("ngClass",wf(3,qce,r.hideUIMenu)),Qn(3),Un("hidden",r.hideUIMenu))},dependencies:[Dm,Sb],styles:["#uiMenu[_ngcontent-%COMP%]{position:absolute;bottom:1rem;width:100%;box-sizing:border-box;display:flex;flex-direction:column;align-items:center}#optionsPanel[_ngcontent-%COMP%]{display:flex;align-items:center;background:var(--phoenix-background-color-secondary);border:1px solid var(--phoenix-background-color-tertiary);box-shadow:var(--phoenix-box-shadow);border-radius:30px;max-width:95%;padding:.3rem 1rem;overflow-x:scroll;z-index:90}#hideUIMenu[_ngcontent-%COMP%]{background:var(--phoenix-background-color-secondary);height:1.2rem;width:3rem;border:1px solid var(--phoenix-border);border-bottom:none;box-shadow:var(--phoenix-box-shadow);border-top-left-radius:15px;border-top-right-radius:15px;padding:3px}#hideUIMenu[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:100%;width:100%;vertical-align:top;transition:all .3s}#hideUIMenu.ui-menu-hidden[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{transform:scaleY(-1);transition:all .3s}"]})}return i})();let Oz=(()=>{class i{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return i.\u0275fac=function(t){return new(t||i)(Et(ds),Et(Bs))},i.\u0275dir=gr({type:i}),i})(),Tb=(()=>{class i extends Oz{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=il(i)))(n||i)}}(),i.\u0275dir=gr({type:i,features:[bs]}),i})();const Pf=new sr("NgValueAccessor"),jce={provide:Pf,useExisting:cr(()=>HF),multi:!0},Xce=new sr("CompositionEventMode");let HF=(()=>{class i extends Oz{constructor(t,n,r){super(t,n),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function $ce(){const i=C_()?C_().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return i.\u0275fac=function(t){return new(t||i)(Et(ds),Et(Bs),Et(Xce,8))},i.\u0275dir=gr({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,n){1&t&&ki("input",function(s){return n._handleInput(s.target.value)})("blur",function(){return n.onTouched()})("compositionstart",function(){return n._compositionStart()})("compositionend",function(s){return n._compositionEnd(s.target.value)})},features:[ko([jce]),bs]}),i})();const Kce=!1,Hh=new sr("NgValidators"),Ty=new sr("NgAsyncValidators");function jz(i){return null!=i}function $z(i){const e=A_(i)?un(i):i;if(Kce&&!Q2(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof i&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new pi(-1101,t)}return e}function Xz(i){let e={};return i.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Kz(i,e){return e.map(t=>t(i))}function Yz(i){return i.map(e=>function Zce(i){return!i.validate}(e)?e:t=>e.validate(t))}function VF(i){return null!=i?function Zz(i){if(!i)return null;const e=i.filter(jz);return 0==e.length?null:function(t){return Xz(Kz(t,e))}}(Yz(i)):null}function Jz(i){if(!i)return null;const e=i.filter(jz);return 0==e.length?null:function(t){return function kz(...i){const e=ot(i),{args:t,keys:n}=h8(i),r=new fe(s=>{const{length:a}=t;if(!a)return void s.complete();const l=new Array(a);let u=a,d=a;for(let A=0;A<a;A++){let y=!1;Yo(t[A]).subscribe(Ve(s,C=>{y||(y=!0,d--),l[A]=C},()=>u--,void 0,()=>{(!u||!y)&&(d||s.next(n?d8(n,l):l),s.complete())}))}});return e?r.pipe(mI(e)):r}(Kz(t,e).map($z)).pipe(et(Xz))}}function GF(i){return null!=i?Jz(Yz(i)):null}function eH(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function qF(i){return i?Array.isArray(i)?i:[i]:[]}function m4(i,e){return Array.isArray(i)?i.includes(e):i===e}function iH(i,e){const t=qF(e);return qF(i).forEach(r=>{m4(t,r)||t.push(r)}),t}function rH(i,e){return qF(e).filter(t=>!m4(i,t))}class sH{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=VF(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=GF(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ff extends sH{get formDirective(){return null}get path(){return null}}class Ey extends sH{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class oH{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let aH=(()=>{class i extends oH{constructor(t){super(t)}}return i.\u0275fac=function(t){return new(t||i)(Et(Ey,2))},i.\u0275dir=gr({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,n){2&t&&Ia("ng-untouched",n.isUntouched)("ng-touched",n.isTouched)("ng-pristine",n.isPristine)("ng-dirty",n.isDirty)("ng-valid",n.isValid)("ng-invalid",n.isInvalid)("ng-pending",n.isPending)},features:[bs]}),i})();const KC="VALID",_4="INVALID",Jw="PENDING",YC="DISABLED";function y4(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}class hH{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===KC}get invalid(){return this.status===_4}get pending(){return this.status==Jw}get disabled(){return this.status===YC}get enabled(){return this.status!==YC}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(iH(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(iH(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(rH(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(rH(e,this._rawAsyncValidators))}hasValidator(e){return m4(this._rawValidators,e)}hasAsyncValidator(e){return m4(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Jw,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=YC,this.errors=null,this._forEachChild(n=>{n.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=KC,this._forEachChild(n=>{n.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===KC||this.status===Jw)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?YC:KC}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Jw,this._hasOwnPendingAsyncValidator=!0;const t=$z(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ao,this.statusChanges=new ao}_calculateStatus(){return this._allControlsDisabled()?YC:this.errors?_4:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Jw)?Jw:this._anyControlsHaveStatus(_4)?_4:KC}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){y4(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function oue(i){return Array.isArray(i)?VF(i):i||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function aue(i){return Array.isArray(i)?GF(i):i||null}(this._rawAsyncValidators)}}const e2=new sr("CallSetDisabledState",{providedIn:"root",factory:()=>v4}),v4="always";function ZC(i,e,t=v4){(function YF(i,e){const t=function tH(i){return i._rawValidators}(i);null!==e.validator?i.setValidators(eH(t,e.validator)):"function"==typeof t&&i.setValidators([t]);const n=function nH(i){return i._rawAsyncValidators}(i);null!==e.asyncValidator?i.setAsyncValidators(eH(n,e.asyncValidator)):"function"==typeof n&&i.setAsyncValidators([n]);const r=()=>i.updateValueAndValidity();w4(e._rawValidators,r),w4(e._rawAsyncValidators,r)})(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(i.disabled),function uue(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&dH(i,e)})}(i,e),function due(i,e){const t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}(i,e),function hue(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&dH(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function cue(i,e){if(e.valueAccessor.setDisabledState){const t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}(i,e)}function w4(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dH(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function AH(i,e){const t=i.indexOf(e);t>-1&&i.splice(t,1)}function mH(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const gH=class extends hH{constructor(e=null,t,n){super(function $F(i){return(y4(i)?i.validators:i)||null}(t),function XF(i,e){return(y4(e)?e.asyncValidators:i)||null}(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),y4(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=mH(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(n=>n(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){AH(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){AH(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){mH(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},vue={provide:Ey,useExisting:cr(()=>nR)},vH=(()=>Promise.resolve())();let nR=(()=>{class i extends Ey{constructor(t,n,r,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new gH,this._registered=!1,this.update=new ao,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=function eR(i,e){if(!e)return null;let t,n,r;return Array.isArray(e),e.forEach(s=>{s.constructor===HF?t=s:function Aue(i){return Object.getPrototypeOf(i.constructor)===Tb}(s)?n=s:r=s}),r||n||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function JF(i,e){if(!i.hasOwnProperty("model"))return!1;const t=i.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){ZC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){vH.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const n=t.isDisabled.currentValue,r=0!==n&&Fx(n);vH.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function b4(i,e){return[...e.path,i]}(t,this._parent):[t]}}return i.\u0275fac=function(t){return new(t||i)(Et(Ff,9),Et(Hh,10),Et(Ty,10),Et(Pf,10),Et(zl,8),Et(e2,8))},i.\u0275dir=gr({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ko([vue]),bs,Ic]}),i})(),xH=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({}),i})();const Iue={provide:Pf,useExisting:cr(()=>oR),multi:!0};function DH(i,e){return null==i?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${i}: ${e}`.slice(0,50))}let oR=(()=>{class i extends Tb{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=DH(this._getOptionId(t),t);this.setProperty("value",r)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){const n=function Pue(i){return i.split(":")[0]}(t);return this._optionMap.has(n)?this._optionMap.get(n):t}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=il(i)))(n||i)}}(),i.\u0275dir=gr({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,n){1&t&&ki("change",function(s){return n.onChange(s.target.value)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[ko([Iue]),bs]}),i})(),eS=(()=>{class i{constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(DH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(ds),Et(oR,9))},i.\u0275dir=gr({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})();const Fue={provide:Pf,useExisting:cr(()=>aR),multi:!0};function BH(i,e){return null==i?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${i}: ${e}`.slice(0,50))}let aR=(()=>{class i extends Tb{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let n;if(this.value=t,Array.isArray(t)){const r=t.map(s=>this._getOptionId(s));n=(s,a)=>{s._setSelected(r.indexOf(a.toString())>-1)}}else n=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{const r=[],s=n.selectedOptions;if(void 0!==s){const a=s;for(let l=0;l<a.length;l++){const d=this._getOptionValue(a[l].value);r.push(d)}}else{const a=n.options;for(let l=0;l<a.length;l++){const u=a[l];if(u.selected){const d=this._getOptionValue(u.value);r.push(d)}}}this.value=r,t(r)}}_registerOption(t){const n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(const n of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){const n=function Rue(i){return i.split(":")[0]}(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}}return i.\u0275fac=function(){let e;return function(n){return(e||(e=il(i)))(n||i)}}(),i.\u0275dir=gr({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,n){1&t&&ki("change",function(s){return n.onChange(s.target)})("blur",function(){return n.onTouched()})},inputs:{compareWith:"compareWith"},features:[ko([Fue]),bs]}),i})(),tS=(()=>{class i{constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(BH(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(BH(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(ds),Et(aR,9))},i.\u0275dir=gr({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),i})(),Gue=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[xH]}),i})(),Que=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:e2,useValue:t.callSetDisabledState??v4}]}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[Gue]}),i})();const Wue=["input"],jue=["label"],$ue=["*"],Xue=new sr("mat-checkbox-default-options",{providedIn:"root",factory:UH});function UH(){return{color:"accent",clickAction:"check-indeterminate"}}const Kue={provide:Pf,useExisting:cr(()=>t2),multi:!0};class Yue{}let Zue=0;const zH=UH(),Jue=d4(Kw(bb(vb(class{constructor(i){this._elementRef=i}}))));let ehe=(()=>{class i extends Jue{get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=ma(t)}constructor(t,n,r,s,a,l,u){super(n),this._changeDetectorRef=r,this._ngZone=s,this._animationMode=l,this._options=u,this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new ao,this.indeterminateChange=new ao,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||zH,this.color=this.defaultColor=this._options.color||zH.color,this.tabIndex=parseInt(a)||0,this.id=this._uniqueId=`${t}${++Zue}`}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(t){const n=ma(t);n!=this.checked&&(this._checked=n,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const n=ma(t);n!==this.disabled&&(this._disabled=n,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const n=t!=this._indeterminate;this._indeterminate=ma(t),n&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_transitionCheckState(t){let n=this._currentCheckState,r=this._getAnimationTargetElement();if(n!==t&&r&&(this._currentAnimationClass&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(n,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);const s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(s)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){const t=this._options?.clickAction;this.disabled||"noop"===t?!this.disabled&&"noop"===t&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==t&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}_onInteractionEvent(t){t.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(t,n){if("NoopAnimations"===this._animationMode)return"";switch(t){case 0:if(1===n)return this._animationClasses.uncheckedToChecked;if(3==n)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case 2:return 1===n?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case 1:return 2===n?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case 3:return 1===n?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(t){const n=this._inputElement;n&&(n.nativeElement.indeterminate=t)}}return i.\u0275fac=function(t){Nd()},i.\u0275dir=gr({type:i,viewQuery:function(t,n){if(1&t&&(Ml(Wue,5),Ml(jue,5),Ml(GA,5)),2&t){let r;jo(r=$o())&&(n._inputElement=r.first),jo(r=$o())&&(n._labelElement=r.first),jo(r=$o())&&(n.ripple=r.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],id:"id",required:"required",labelPosition:"labelPosition",name:"name",value:"value",checked:"checked",disabled:"disabled",indeterminate:"indeterminate"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},features:[bs]}),i})(),t2=(()=>{class i extends ehe{constructor(t,n,r,s,a,l){super("mat-mdc-checkbox-",t,n,r,s,a,l),this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"}}focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(t){const n=new Yue;return n.source=this,n.checked=t,n}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_onInputClick(){super._handleInputClick()}_onTouchTargetClick(){super._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(t){t.target&&this._labelElement.nativeElement.contains(t.target)&&t.stopPropagation()}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(zl),Et(po),Th("tabindex"),Et(dh,8),Et(Xue,8))},i.\u0275cmp=Kr({type:i,selectors:[["mat-checkbox"]],hostAttrs:[1,"mat-mdc-checkbox"],hostVars:12,hostBindings:function(t,n){2&t&&(ui("id",n.id),ja("tabindex",null)("aria-label",null)("aria-labelledby",null),Ia("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mdc-checkbox--disabled",n.disabled)("mat-mdc-checkbox-disabled",n.disabled)("mat-mdc-checkbox-checked",n.checked))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matCheckbox"],features:[ko([Kue]),bs],ngContentSelectors:$ue,decls:15,vars:19,consts:[[1,"mdc-form-field",3,"click"],[1,"mdc-checkbox"],["checkbox",""],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"checked","indeterminate","disabled","id","required","tabIndex","blur","click","change"],["input",""],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[3,"for"],["label",""]],template:function(t,n){if(1&t&&(ch(),tn(0,"div",0),ki("click",function(s){return n._preventBubblingFromLabel(s)}),tn(1,"div",1,2)(3,"div",3),ki("click",function(){return n._onTouchTargetClick()}),on(),tn(4,"input",4,5),ki("blur",function(){return n._onBlur()})("click",function(){return n._onInputClick()})("change",function(s){return n._onInteractionEvent(s)}),on(),kr(6,"div",6),tn(7,"div",7),xl(),tn(8,"svg",8),kr(9,"path",9),on(),Jh(),kr(10,"div",10),on(),kr(11,"div",11),on(),tn(12,"label",12,13),ru(14),on()()),2&t){const r=Fl(2);Ia("mdc-form-field--align-end","before"==n.labelPosition),Qn(4),Ia("mdc-checkbox--selected",n.checked),Un("checked",n.checked)("indeterminate",n.indeterminate)("disabled",n.disabled)("id",n.inputId)("required",n.required)("tabIndex",n.tabIndex),ja("aria-label",n.ariaLabel||null)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby)("name",n.name)("value",n.value),Qn(7),Un("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0),Qn(1),Un("for",n.inputId)}},dependencies:[GA],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size, 48px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 48px)) / 2);width:var(--mdc-checkbox-state-layer-size, 48px);height:var(--mdc-checkbox-state-layer-size, 48px)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color, rgba(0, 0, 0, 0.38));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color, rgba(0, 0, 0, 0.38))}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color, #fff)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-hover-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-focus-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-focus-icon-color, var(--mdc-theme-secondary, #018786));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox.mdc-ripple-upgraded--background-focused.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(.mdc-ripple-upgraded):focus.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF018786FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}@keyframes mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}}@keyframes mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786));background-color:var(--mdc-checkbox-selected-pressed-icon-color, var(--mdc-theme-secondary, #018786))}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color, rgba(0, 0, 0, 0.54));background-color:transparent}}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mat-mdc-checkbox .mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FF01878600000000FF018786}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - 18px) / 2)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);right:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);left:calc((var(--mdc-checkbox-state-layer-size, 40px) - var(--mdc-checkbox-state-layer-size, 40px)) / 2);width:var(--mdc-checkbox-state-layer-size, 40px);height:var(--mdc-checkbox-state-layer-size, 40px)}.mat-mdc-checkbox .mdc-checkbox:hover .mdc-checkbox__native-control:not([disabled])~.mdc-checkbox__ripple{opacity:.04;transform:scale(1);transition:opacity 80ms 0 cubic-bezier(0, 0, 0.2, 1),transform 80ms 0 cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-checkbox .mdc-checkbox .mdc-checkbox__native-control:not([disabled]):focus~.mdc-checkbox__ripple{opacity:.16}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__native-control:focus:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color, black)}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),i})(),HH=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({}),i})(),ihe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[Eu,xb,HH,Eu,HH]}),i})();var rhe=Ce(3144);function cR(i,e,t){for(let n in e)if(e.hasOwnProperty(n)){const r=e[n];r?i.setProperty(n,r,t?.has(n)?"important":""):i.removeProperty(n)}return i}function n2(i,e){const t=e?"":"none";cR(i.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":t,"-ms-user-select":t,"-webkit-user-select":t,"-moz-user-select":t})}function VH(i,e,t){cR(i.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},t)}function S4(i,e){return e&&"none"!=e?i+" "+e:i}function GH(i){const e=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*e}function uR(i,e){return i.getPropertyValue(e).split(",").map(n=>n.trim())}function hR(i){const e=i.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function dR(i,e,t){const{top:n,bottom:r,left:s,right:a}=i;return t>=n&&t<=r&&e>=s&&e<=a}function nS(i,e,t){i.top+=e,i.bottom=i.top+i.height,i.left+=t,i.right=i.left+i.width}function qH(i,e,t,n){const{top:r,right:s,bottom:a,left:l,width:u,height:d}=i,A=u*e,y=d*e;return n>r-y&&n<a+y&&t>l-A&&t<s+A}class QH{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:hR(t)})})}handleScroll(e){const t=VA(e),n=this.positions.get(t);if(!n)return null;const r=n.scrollPosition;let s,a;if(t===this._document){const d=this.getViewportScrollPosition();s=d.top,a=d.left}else s=t.scrollTop,a=t.scrollLeft;const l=r.top-s,u=r.left-a;return this.positions.forEach((d,A)=>{d.clientRect&&t!==A&&t.contains(A)&&nS(d.clientRect,l,u)}),r.top=s,r.left=a,{top:l,left:u}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function WH(i){const e=i.cloneNode(!0),t=e.querySelectorAll("[id]"),n=i.nodeName.toLowerCase();e.removeAttribute("id");for(let r=0;r<t.length;r++)t[r].removeAttribute("id");return"canvas"===n?XH(i,e):("input"===n||"select"===n||"textarea"===n)&&$H(i,e),jH("canvas",i,e,XH),jH("input, textarea, select",i,e,$H),e}function jH(i,e,t,n){const r=e.querySelectorAll(i);if(r.length){const s=t.querySelectorAll(i);for(let a=0;a<r.length;a++)n(r[a],s[a])}}let ahe=0;function $H(i,e){"file"!==e.type&&(e.value=i.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${ahe++}`)}function XH(i,e){const t=e.getContext("2d");if(t)try{t.drawImage(i,0,0)}catch{}}const KH=c0({passive:!0}),T4=c0({passive:!1}),fR=new Set(["position"]);class che{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const t=ma(e);t!==this._disabled&&(this._disabled=t,this._toggleNativeDragInteractions(),this._handles.forEach(n=>n2(n,t)))}constructor(e,t,n,r,s,a){this._config=t,this._document=n,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=a,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new D,this._pointerMoveSubscription=Be.EMPTY,this._pointerUpSubscription=Be.EMPTY,this._scrollSubscription=Be.EMPTY,this._resizeSubscription=Be.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new D,this.started=new D,this.released=new D,this.ended=new D,this.entered=new D,this.exited=new D,this.dropped=new D,this.moved=this._moveEvents,this._pointerDown=l=>{if(this.beforeStarted.next(),this._handles.length){const u=this._getTargetHandle(l);u&&!this._disabledHandles.has(u)&&!this.disabled&&this._initializeDragSequence(u,l)}else this.disabled||this._initializeDragSequence(this._rootElement,l)},this._pointerMove=l=>{const u=this._getPointerPositionOnPage(l);if(!this._hasStartedDragging){if(Math.abs(u.x-this._pickupPositionOnPage.x)+Math.abs(u.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const k=Date.now()>=this._dragStartTime+this._getDragStartDelay(l),Q=this._dropContainer;if(!k)return void this._endDragSequence(l);(!Q||!Q.isDragging()&&!Q.isReceiving())&&(l.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(l)))}return}l.preventDefault();const d=this._getConstrainedPointerPosition(u);if(this._hasMoved=!0,this._lastKnownPointerPosition=u,this._updatePointerDirectionDelta(d),this._dropContainer)this._updateActiveDropContainer(d,u);else{const A=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,y=this._activeTransform;y.x=d.x-A.x+this._passiveTransform.x,y.y=d.y-A.y+this._passiveTransform.y,this._applyRootElementTransform(y.x,y.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:d,event:l,distance:this._getDragDistance(d),delta:this._pointerDirectionDelta})})},this._pointerUp=l=>{this._endDragSequence(l)},this._nativeDragStart=l=>{if(this._handles.length){const u=this._getTargetHandle(l);u&&!this._disabledHandles.has(u)&&!this.disabled&&l.preventDefault()}else this.disabled||l.preventDefault()},this.withRootElement(e).withParent(t.parentDragRef||null),this._parentPositions=new QH(n),a.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(n=>Xu(n)),this._handles.forEach(n=>n2(n,this.disabled)),this._toggleNativeDragInteractions();const t=new Set;return this._disabledHandles.forEach(n=>{this._handles.indexOf(n)>-1&&t.add(n)}),this._disabledHandles=t,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const t=Xu(e);return t!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{t.addEventListener("mousedown",this._pointerDown,T4),t.addEventListener("touchstart",this._pointerDown,KH),t.addEventListener("dragstart",this._nativeDragStart,T4)}),this._initialTransform=void 0,this._rootElement=t),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Xu(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),n2(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),n2(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const t=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(t),dropPoint:t,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){iS(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const t=this._dropContainer;if(t){const n=this._rootElement,r=n.parentNode,s=this._placeholder=this._createPlaceholderElement(),a=this._anchor=this._anchor||this._document.createComment(""),l=this._getShadowRoot();r.insertBefore(a,n),this._initialTransform=n.style.transform||"",this._preview=this._createPreviewElement(),VH(n,!1,fR),this._document.body.appendChild(r.replaceChild(s,n)),this._getPreviewInsertionPoint(r,l).appendChild(this._preview),this.started.next({source:this,event:e}),t.start(),this._initialContainer=t,this._initialIndex=t.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(t?t.getScrollableParents():[])}_initializeDragSequence(e,t){this._parentDragRef&&t.stopPropagation();const n=this.isDragging(),r=iS(t),s=!r&&0!==t.button,a=this._rootElement,l=VA(t),u=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),d=r?a4(t):o4(t);if(l&&l.draggable&&"mousedown"===t.type&&t.preventDefault(),n||s||u||d)return;if(this._handles.length){const C=a.style;this._rootElementTapHighlight=C.webkitTapHighlightColor||"",C.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(C=>this._updateOnScroll(C)),this._boundaryElement&&(this._boundaryRect=hR(this._boundaryElement));const A=this._previewTemplate;this._pickupPositionInElement=A&&A.template&&!A.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,t);const y=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:y.x,y:y.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,t)}_cleanupDragArtifacts(e){VH(this._rootElement,!0,fR),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const t=this._dropContainer,n=t.getItemIndex(this),r=this._getPointerPositionOnPage(e),s=this._getDragDistance(r),a=t._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:e}),this.dropped.next({item:this,currentIndex:n,previousIndex:this._initialIndex,container:t,previousContainer:this._initialContainer,isPointerOverContainer:a,distance:s,dropPoint:r,event:e}),t.drop(this,n,this._initialIndex,this._initialContainer,a,s,r,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t},{x:n,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,t);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,t)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,t,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(n,r),this._dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,t):this._applyPreviewTransform(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,t=this.previewClass,n=e?e.template:null;let r;if(n&&e){const s=e.matchSize?this._initialClientRect:null,a=e.viewContainer.createEmbeddedView(n,e.context);a.detectChanges(),r=ZH(a,this._document),this._previewRef=a,e.matchSize?JH(r,s):r.style.transform=E4(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=WH(this._rootElement),JH(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return cR(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},fR),n2(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),t&&(Array.isArray(t)?t.forEach(s=>r.classList.add(s)):r.classList.add(t)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const t=function ohe(i){const e=getComputedStyle(i),t=uR(e,"transition-property"),n=t.find(l=>"transform"===l||"all"===l);if(!n)return 0;const r=t.indexOf(n),s=uR(e,"transition-duration"),a=uR(e,"transition-delay");return GH(s[r])+GH(a[r])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(n=>{const r=a=>{(!a||VA(a)===this._preview&&"transform"===a.propertyName)&&(this._preview?.removeEventListener("transitionend",r),n(),clearTimeout(s))},s=setTimeout(r,1.5*t);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,t=e?e.template:null;let n;return t?(this._placeholderRef=e.viewContainer.createEmbeddedView(t,e.context),this._placeholderRef.detectChanges(),n=ZH(this._placeholderRef,this._document)):n=WH(this._rootElement),n.style.pointerEvents="none",n.classList.add("cdk-drag-placeholder"),n}_getPointerPositionInElement(e,t,n){const r=t===this._rootElement?null:t,s=r?r.getBoundingClientRect():e,a=iS(n)?n.targetTouches[0]:n,l=this._getViewportScrollPosition();return{x:s.left-e.left+(a.pageX-s.left-l.left),y:s.top-e.top+(a.pageY-s.top-l.top)}}_getPointerPositionOnPage(e){const t=this._getViewportScrollPosition(),n=iS(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=n.pageX-t.left,s=n.pageY-t.top;if(this._ownerSVGElement){const a=this._ownerSVGElement.getScreenCTM();if(a){const l=this._ownerSVGElement.createSVGPoint();return l.x=r,l.y=s,l.matrixTransform(a.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(e){const t=this._dropContainer?this._dropContainer.lockAxis:null;let{x:n,y:r}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===t?r=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===t)&&(n=this._pickupPositionOnPage.x),this._boundaryRect){const{x:s,y:a}=this._pickupPositionInElement,l=this._boundaryRect,{width:u,height:d}=this._getPreviewRect(),A=l.top+a,y=l.bottom-(d-a);n=YH(n,l.left+s,l.right-(u-s)),r=YH(r,A,y)}return{x:n,y:r}}_updatePointerDirectionDelta(e){const{x:t,y:n}=e,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,a=Math.abs(t-s.x),l=Math.abs(n-s.y);return a>this._config.pointerDirectionChangeThreshold&&(r.x=t>s.x?1:-1,s.x=t),l>this._config.pointerDirectionChangeThreshold&&(r.y=n>s.y?1:-1,s.y=n),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,n2(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,T4),e.removeEventListener("touchstart",this._pointerDown,KH),e.removeEventListener("dragstart",this._nativeDragStart,T4)}_applyRootElementTransform(e,t){const n=E4(e,t),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=S4(n,this._initialTransform)}_applyPreviewTransform(e,t){const n=this._previewTemplate?.template?void 0:this._initialTransform,r=E4(e,t);this._preview.style.transform=S4(r,n)}_getDragDistance(e){const t=this._pickupPositionOnPage;return t?{x:e.x-t.x,y:e.y-t.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:t}=this._passiveTransform;if(0===e&&0===t||this.isDragging()||!this._boundaryElement)return;const n=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===n.width&&0===n.height)return;const s=r.left-n.left,a=n.right-r.right,l=r.top-n.top,u=n.bottom-r.bottom;r.width>n.width?(s>0&&(e+=s),a>0&&(e-=a)):e=0,r.height>n.height?(l>0&&(t+=l),u>0&&(t-=u)):t=0,(e!==this._passiveTransform.x||t!==this._passiveTransform.y)&&this.setFreeDragPosition({y:t,x:e})}_getDragStartDelay(e){const t=this.dragStartDelay;return"number"==typeof t?t:iS(e)?t.touch:t?t.mouse:0}_updateOnScroll(e){const t=this._parentPositions.handleScroll(e);if(t){const n=VA(e);this._boundaryRect&&n!==this._boundaryElement&&n.contains(this._boundaryElement)&&nS(this._boundaryRect,t.top,t.left),this._pickupPositionOnPage.x+=t.left,this._pickupPositionOnPage.y+=t.top,this._dropContainer||(this._activeTransform.x-=t.left,this._activeTransform.y-=t.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=mF(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,t){const n=this._previewContainer||"global";if("parent"===n)return e;if("global"===n){const r=this._document;return t||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return Xu(n)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(t=>e.target&&(e.target===t||t.contains(e.target)))}}function E4(i,e){return`translate3d(${Math.round(i)}px, ${Math.round(e)}px, 0)`}function YH(i,e,t){return Math.max(e,Math.min(t,i))}function iS(i){return"t"===i.type[0]}function ZH(i,e){const t=i.rootNodes;if(1===t.length&&t[0].nodeType===e.ELEMENT_NODE)return t[0];const n=e.createElement("div");return t.forEach(r=>n.appendChild(r)),n}function JH(i,e){i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,i.style.transform=E4(e.left,e.top)}function rS(i,e){return Math.max(0,Math.min(e,i))}class hhe{constructor(e,t){this._element=e,this._dragDropRegistry=t,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,t,n,r){const s=this._itemPositions,a=this._getItemIndexFromPointerPosition(e,t,n,r);if(-1===a&&s.length>0)return null;const l="horizontal"===this.orientation,u=s.findIndex(he=>he.drag===e),d=s[a],y=d.clientRect,C=u>a?1:-1,k=this._getItemOffsetPx(s[u].clientRect,y,C),Q=this._getSiblingOffsetPx(u,s,C),se=s.slice();return function uhe(i,e,t){const n=rS(e,i.length-1),r=rS(t,i.length-1);if(n===r)return;const s=i[n],a=r<n?-1:1;for(let l=n;l!==r;l+=a)i[l]=i[l+a];i[r]=s}(s,u,a),s.forEach((he,re)=>{if(se[re]===he)return;const Le=he.drag===e,be=Le?k:Q,Ye=Le?e.getPlaceholderElement():he.drag.getRootElement();he.offset+=be,l?(Ye.style.transform=S4(`translate3d(${Math.round(he.offset)}px, 0, 0)`,he.initialTransform),nS(he.clientRect,0,be)):(Ye.style.transform=S4(`translate3d(0, ${Math.round(he.offset)}px, 0)`,he.initialTransform),nS(he.clientRect,be,0))}),this._previousSwap.overlaps=dR(y,t,n),this._previousSwap.drag=d.drag,this._previousSwap.delta=l?r.x:r.y,{previousIndex:u,currentIndex:a}}enter(e,t,n,r){const s=null==r||r<0?this._getItemIndexFromPointerPosition(e,t,n):r,a=this._activeDraggables,l=a.indexOf(e),u=e.getPlaceholderElement();let d=a[s];if(d===e&&(d=a[s+1]),!d&&(null==s||-1===s||s<a.length-1)&&this._shouldEnterAsFirstChild(t,n)&&(d=a[0]),l>-1&&a.splice(l,1),d&&!this._dragDropRegistry.isDragging(d)){const A=d.getRootElement();A.parentElement.insertBefore(u,A),a.splice(s,0,e)}else Xu(this._element).appendChild(u),a.push(e);u.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const t=e.getRootElement();if(t){const n=this._itemPositions.find(r=>r.drag===e)?.initialTransform;t.style.transform=n||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(n=>n.drag===e)}updateOnScroll(e,t){this._itemPositions.forEach(({clientRect:n})=>{nS(n,e,t)}),this._itemPositions.forEach(({drag:n})=>{this._dragDropRegistry.isDragging(n)&&n._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(t=>{const n=t.getVisibleElement();return{drag:t,offset:0,initialTransform:n.style.transform||"",clientRect:hR(n)}}).sort((t,n)=>e?t.clientRect.left-n.clientRect.left:t.clientRect.top-n.clientRect.top)}_getItemOffsetPx(e,t,n){const r="horizontal"===this.orientation;let s=r?t.left-e.left:t.top-e.top;return-1===n&&(s+=r?t.width-e.width:t.height-e.height),s}_getSiblingOffsetPx(e,t,n){const r="horizontal"===this.orientation,s=t[e].clientRect,a=t[e+-1*n];let l=s[r?"width":"height"]*n;if(a){const u=r?"left":"top",d=r?"right":"bottom";-1===n?l-=a.clientRect[u]-s[d]:l+=s[u]-a.clientRect[d]}return l}_shouldEnterAsFirstChild(e,t){if(!this._activeDraggables.length)return!1;const n=this._itemPositions,r="horizontal"===this.orientation;if(n[0].drag!==this._activeDraggables[0]){const a=n[n.length-1].clientRect;return r?e>=a.right:t>=a.bottom}{const a=n[0].clientRect;return r?e<=a.left:t<=a.top}}_getItemIndexFromPointerPosition(e,t,n,r){const s="horizontal"===this.orientation,a=this._itemPositions.findIndex(({drag:l,clientRect:u})=>l!==e&&((!r||l!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?r.x:r.y)!==this._previousSwap.delta)&&(s?t>=Math.floor(u.left)&&t<Math.floor(u.right):n>=Math.floor(u.top)&&n<Math.floor(u.bottom))));return-1!==a&&this._sortPredicate(a,e)?a:-1}}const tV=.05;class dhe{constructor(e,t,n,r,s){this._dragDropRegistry=t,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new D,this.entered=new D,this.exited=new D,this.dropped=new D,this.sorted=new D,this.receivingStarted=new D,this.receivingStopped=new D,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=Be.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new D,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function she(i=0,e=RC){return i<0&&(i=0),h4(i,i,e)}(0,mz).pipe(jl(this._stopScrollTimers)).subscribe(()=>{const a=this._scrollNode,l=this.autoScrollStep;1===this._verticalScrollDirection?a.scrollBy(0,-l):2===this._verticalScrollDirection&&a.scrollBy(0,l),1===this._horizontalScrollDirection?a.scrollBy(-l,0):2===this._horizontalScrollDirection&&a.scrollBy(l,0)})},this.element=Xu(e),this._document=n,this.withScrollableParents([this.element]),t.registerDropContainer(this),this._parentPositions=new QH(n),this._sortStrategy=new hhe(this.element,t),this._sortStrategy.withSortPredicate((a,l)=>this.sortPredicate(a,l,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,t,n,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(e)),this._sortStrategy.enter(e,t,n,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,t,n,r,s,a,l,u={}){this._reset(),this.dropped.next({item:e,currentIndex:t,previousIndex:n,container:this,previousContainer:r,isPointerOverContainer:s,distance:a,dropPoint:l,event:u})}withItems(e){const t=this._draggables;return this._draggables=e,e.forEach(n=>n._withDropContainer(this)),this.isDragging()&&(t.filter(r=>r.isDragging()).every(r=>-1===e.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const t=Xu(this.element);return this._scrollableElements=-1===e.indexOf(t)?[t,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,t,n,r){if(this.sortingDisabled||!this._clientRect||!qH(this._clientRect,.05,t,n))return;const s=this._sortStrategy.sort(e,t,n,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,t){if(this.autoScrollDisabled)return;let n,r=0,s=0;if(this._parentPositions.positions.forEach((a,l)=>{l===this._document||!a.clientRect||n||qH(a.clientRect,.05,e,t)&&([r,s]=function fhe(i,e,t,n){const r=nV(e,n),s=iV(e,t);let a=0,l=0;if(r){const u=i.scrollTop;1===r?u>0&&(a=1):i.scrollHeight-u>i.clientHeight&&(a=2)}if(s){const u=i.scrollLeft;1===s?u>0&&(l=1):i.scrollWidth-u>i.clientWidth&&(l=2)}return[a,l]}(l,a.clientRect,e,t),(r||s)&&(n=l))}),!r&&!s){const{width:a,height:l}=this._viewportRuler.getViewportSize(),u={width:a,height:l,top:0,right:a,bottom:l,left:0};r=nV(u,t),s=iV(u,e),n=window}n&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||n!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=n,(r||s)&&n?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Xu(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Xu(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=Xu(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(t=>t._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,t){return null!=this._clientRect&&dR(this._clientRect,e,t)}_getSiblingContainerFromPosition(e,t,n){return this._siblings.find(r=>r._canReceive(e,t,n))}_canReceive(e,t,n){if(!this._clientRect||!dR(this._clientRect,t,n)||!this.enterPredicate(e,this))return!1;const r=this._getShadowRoot().elementFromPoint(t,n);if(!r)return!1;const s=Xu(this.element);return r===s||s.contains(r)}_startReceiving(e,t){const n=this._activeSiblings;!n.has(e)&&t.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(n.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:t}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const t=this._parentPositions.handleScroll(e);t&&this._sortStrategy.updateOnScroll(t.top,t.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=mF(Xu(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(t=>t.isDragging());this._siblings.forEach(t=>t._startReceiving(this,e))}}function nV(i,e){const{top:t,bottom:n,height:r}=i,s=r*tV;return e>=t-s&&e<=t+s?1:e>=n-s&&e<=n+s?2:0}function iV(i,e){const{left:t,right:n,width:r}=i,s=r*tV;return e>=t-s&&e<=t+s?1:e>=n-s&&e<=n+s?2:0}const D4=c0({passive:!1,capture:!0});let phe=(()=>{class i{constructor(t,n){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=r=>r.isDragging(),this.pointerMove=new D,this.pointerUp=new D,this.scroll=new D,this._preventDefaultWhileDragging=r=>{this._activeDragInstances.length>0&&r.preventDefault()},this._persistentTouchmoveListener=r=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&r.preventDefault(),this.pointerMove.next(r))},this._document=n}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,D4)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,D4)}startDragging(t,n){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const r=n.type.startsWith("touch");this._globalListeners.set(r?"touchend":"mouseup",{handler:s=>this.pointerUp.next(s),options:!0}).set("scroll",{handler:s=>this.scroll.next(s),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:D4}),r||this._globalListeners.set("mousemove",{handler:s=>this.pointerMove.next(s),options:D4}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((s,a)=>{this._document.addEventListener(a,s.handler,s.options)})})}}stopDragging(t){const n=this._activeDragInstances.indexOf(t);n>-1&&(this._activeDragInstances.splice(n,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const n=[this.scroll];return t&&t!==this._document&&n.push(new fe(r=>this._ngZone.runOutsideAngular(()=>{const a=l=>{this._activeDragInstances.length&&r.next(l)};return t.addEventListener("scroll",a,!0),()=>{t.removeEventListener("scroll",a,!0)}}))),It(...n)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,n)=>{this._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}return i.\u0275fac=function(t){return new(t||i)(oi(po),oi(Zo))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ahe={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let pR=(()=>{class i{constructor(t,n,r,s){this._document=t,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=s}createDrag(t,n=Ahe){return new che(t,n,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new dhe(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo),oi(po),oi(Mb),oi(phe))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const AR=new sr("CDK_DRAG_PARENT"),rV=new sr("CDK_DRAG_CONFIG"),sV=new sr("CdkDropList"),gR=new sr("CdkDragHandle");let oV=(()=>{class i{get disabled(){return this._disabled}set disabled(t){this._disabled=ma(t),this._stateChanges.next(this)}constructor(t,n){this.element=t,this._stateChanges=new D,this._disabled=!1,this._parentDrag=n}ngOnDestroy(){this._stateChanges.complete()}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(AR,12))},i.\u0275dir=gr({type:i,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},standalone:!0,features:[ko([{provide:gR,useExisting:i}])]}),i})();const aV=new sr("CdkDragPlaceholder"),lV=new sr("CdkDragPreview");let _R=(()=>{class i{get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(t){this._disabled=ma(t),this._dragRef.disabled=this._disabled}constructor(t,n,r,s,a,l,u,d,A,y,C){this.element=t,this.dropContainer=n,this._ngZone=s,this._viewContainerRef=a,this._dir=u,this._changeDetectorRef=A,this._selfHandle=y,this._parentDrag=C,this._destroyed=new D,this.started=new ao,this.released=new ao,this.ended=new ao,this.entered=new ao,this.exited=new ao,this.dropped=new ao,this.moved=new fe(k=>{const Q=this._dragRef.moved.pipe(et(se=>({source:this,pointerPosition:se.pointerPosition,event:se.event,delta:se.delta,distance:se.distance}))).subscribe(k);return()=>{Q.unsubscribe()}}),this._dragRef=d.createDrag(t,{dragStartThreshold:l&&null!=l.dragStartThreshold?l.dragStartThreshold:5,pointerDirectionChangeThreshold:l&&null!=l.pointerDirectionChangeThreshold?l.pointerDirectionChangeThreshold:5,zIndex:l?.zIndex}),this._dragRef.data=this,i._dragInstances.push(this),l&&this._assignDefaults(l),n&&(this._dragRef._withDropContainer(n._dropListRef),n.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}setFreeDragPosition(t){this._dragRef.setFreeDragPosition(t)}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Nc(1),jl(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(t){const n=t.rootElementSelector,r=t.freeDragPosition;n&&!n.firstChange&&this._updateRootElement(),r&&!r.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const t=i._dragInstances.indexOf(this);t>-1&&i._dragInstances.splice(t,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){const t=this.element.nativeElement;let n=t;this.rootElementSelector&&(n=void 0!==t.closest?t.closest(this.rootElementSelector):t.parentElement?.closest(this.rootElementSelector)),this._dragRef.withRootElement(n||t)}_getBoundaryElement(){const t=this.boundaryElement;return t?"string"==typeof t?this.element.nativeElement.closest(t):Xu(t):null}_syncInputs(t){t.beforeStarted.subscribe(()=>{if(!t.isDragging()){const n=this._dir,r=this.dragStartDelay,s=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,a=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;t.disabled=this.disabled,t.lockAxis=this.lockAxis,t.dragStartDelay="object"==typeof r&&r?r:gc(r),t.constrainPosition=this.constrainPosition,t.previewClass=this.previewClass,t.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(s).withPreviewTemplate(a).withPreviewContainer(this.previewContainer||"global"),n&&t.withDirection(n.value)}}),t.beforeStarted.pipe(Nc(1)).subscribe(()=>{if(this._parentDrag)return void t.withParent(this._parentDrag._dragRef);let n=this.element.nativeElement.parentElement;for(;n;){if(n.classList.contains("cdk-drag")){t.withParent(i._dragInstances.find(r=>r.element.nativeElement===n)?._dragRef||null);break}n=n.parentElement}})}_handleEvents(t){t.started.subscribe(n=>{this.started.emit({source:this,event:n.event}),this._changeDetectorRef.markForCheck()}),t.released.subscribe(n=>{this.released.emit({source:this,event:n.event})}),t.ended.subscribe(n=>{this.ended.emit({source:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event}),this._changeDetectorRef.markForCheck()}),t.entered.subscribe(n=>{this.entered.emit({container:n.container.data,item:this,currentIndex:n.currentIndex})}),t.exited.subscribe(n=>{this.exited.emit({container:n.container.data,item:this})}),t.dropped.subscribe(n=>{this.dropped.emit({previousIndex:n.previousIndex,currentIndex:n.currentIndex,previousContainer:n.previousContainer.data,container:n.container.data,isPointerOverContainer:n.isPointerOverContainer,item:this,distance:n.distance,dropPoint:n.dropPoint,event:n.event})})}_assignDefaults(t){const{lockAxis:n,dragStartDelay:r,constrainPosition:s,previewClass:a,boundaryElement:l,draggingDisabled:u,rootElementSelector:d,previewContainer:A}=t;this.disabled=u??!1,this.dragStartDelay=r||0,n&&(this.lockAxis=n),s&&(this.constrainPosition=s),a&&(this.previewClass=a),l&&(this.boundaryElement=l),d&&(this.rootElementSelector=d),A&&(this.previewContainer=A)}_setupHandlesListener(){this._handles.changes.pipe(lp(this._handles),Cu(t=>{const n=t.filter(r=>r._parentDrag===this).map(r=>r.element);this._selfHandle&&this.rootElementSelector&&n.push(this.element),this._dragRef.withHandles(n)}),ap(t=>It(...t.map(n=>n._stateChanges.pipe(lp(n))))),jl(this._destroyed)).subscribe(t=>{const n=this._dragRef,r=t.element.nativeElement;t.disabled?n.disableHandle(r):n.enableHandle(r)})}}return i._dragInstances=[],i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(sV,12),Et(Zo),Et(po),Et(bu),Et(rV,8),Et(vd,8),Et(pR),Et(zl),Et(gR,10),Et(AR,12))},i.\u0275dir=gr({type:i,selectors:[["","cdkDrag",""]],contentQueries:function(t,n,r){if(1&t&&(md(r,lV,5),md(r,aV,5),md(r,gR,5)),2&t){let s;jo(s=$o())&&(n._previewTemplate=s.first),jo(s=$o())&&(n._placeholderTemplate=s.first),jo(s=$o())&&(n._handles=s)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(t,n){2&t&&Ia("cdk-drag-disabled",n.disabled)("cdk-drag-dragging",n._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],standalone:!0,features:[ko([{provide:AR,useExisting:i}]),Ic]}),i})(),xhe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({providers:[pR],imports:[qC]}),i})();const whe=["overlayCard"],Mhe=["resizeHandleCorner"];function Che(i,e){if(1&i&&(tn(0,"div",10),xl(),tn(1,"svg"),kr(2,"use"),on()()),2&i){const t=Or(2);Qn(2),Hg("href","assets/icons/",t.icon,".svg#",t.icon,"")}}const She=function(i){return{"with-body":i}},The=function(i){return{expand:i}};function Ehe(i,e){if(1&i){const t=Ba();tn(0,"div",5),ns(1,Che,3,2,"div",6),tn(2,"h5",7),dr(3),on(),tn(4,"button",8),ki("click",function(){ks(t);const r=Or();return Ts(r.showBody=!r.showBody)}),xl(),tn(5,"svg"),kr(6,"use",9),on()()()}if(2&i){const t=Or();Un("ngClass",wf(4,She,t.showBody)),Qn(1),Un("ngIf",t.icon),Qn(2),bf(t.overlayTitle),Qn(1),Un("ngClass",wf(6,The,t.showBody))}}const Dhe=function(i){return{"transparent-bg":i}};function Bhe(i,e){if(1&i&&(tn(0,"div",11),ru(1),on()),2&i){const t=Or();Un("ngClass",wf(1,Dhe,t.transparentBody))}}function Ihe(i,e){if(1&i){const t=Ba();tn(0,"span",12,13),ki("cdkDragMoved",function(){return ks(t),Ts(Or().onResize())}),on()}2&i&&Un("hidden",!Or().showBody)}const Phe=["*"];let sS=(()=>{class i{overlayTitle;active=!1;icon;resizable=!1;transparentBody=!1;keepAspectRatioFixed=!1;showBody=!0;aspectRatio=window.innerWidth/window.innerHeight;overlayCard;resizeHandleCorner;MIN_RES_WIDTH=300;MIN_RES_HEIGHT=100;ngAfterViewInit(){if(this.resizable){const t=this.resizeHandleCorner.nativeElement;t.style.bottom="0",t.style.right="0",new rhe.ResizeSensor(this.overlayCard.nativeElement,()=>{this.resetHandlePosition()}),window.addEventListener("resize",()=>{this.resetHandlePosition()})}}onResize(){const n=this.overlayCard.nativeElement,r=this.resizeHandleCorner.nativeElement.getBoundingClientRect(),s=n.getBoundingClientRect(),a=r.left-s.left+r.width,l=r.top-s.top+r.height;this.setHandleTransform(s,r),a>this.MIN_RES_WIDTH&&l>this.MIN_RES_HEIGHT&&(n.style.width=a+"px",n.style.height=this.keepAspectRatioFixed?a/this.aspectRatio+30+"px":l+"px")}resetHandlePosition(){const t=this.resizeHandleCorner.nativeElement;this.setHandleTransform(this.overlayCard.nativeElement.getBoundingClientRect(),t.getBoundingClientRect()),t.style.bottom=null,t.style.right=null}setHandleTransform(t,n){this.resizeHandleCorner.nativeElement.style.transform=`translate3d(${t.width-n.width}px, ${t.height-n.height}px, 0)`}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Kr({type:i,selectors:[["app-overlay"]],viewQuery:function(n,r){if(1&n&&(Ml(whe,5),Ml(Mhe,5)),2&n){let s;jo(s=$o())&&(r.overlayCard=s.first),jo(s=$o())&&(r.resizeHandleCorner=s.first)}},inputs:{overlayTitle:"overlayTitle",active:"active",icon:"icon",resizable:"resizable",transparentBody:"transparentBody",keepAspectRatioFixed:"keepAspectRatioFixed"},ngContentSelectors:Phe,decls:5,vars:4,consts:[["cdkDrag","","cdkDragBoundary","body",1,"overlay-card","card",3,"hidden"],["overlayCard",""],["class","card-header d-flex justify-content-between","cdkDragHandle","",3,"ngClass",4,"ngIf"],["class","overlay-card-content",3,"ngClass",4,"ngIf"],["class","resize-handle corner","cdkDrag","",3,"hidden","cdkDragMoved",4,"ngIf"],["cdkDragHandle","",1,"card-header","d-flex","justify-content-between",3,"ngClass"],["class","align-self-center card-icon",4,"ngIf"],[1,"align-self-center","m-0","px-2"],["matTooltip","Expand / Collapse","matTooltipPosition","right",1,"align-self-center","card-icon","btn-blank","expandCollapse",3,"ngClass","click"],["href","assets/icons/expand.svg#expand"],[1,"align-self-center","card-icon"],[1,"overlay-card-content",3,"ngClass"],["cdkDrag","",1,"resize-handle","corner",3,"hidden","cdkDragMoved"],["resizeHandleCorner",""]],template:function(n,r){1&n&&(ch(),tn(0,"div",0,1),ns(2,Ehe,7,8,"div",2),ns(3,Bhe,2,3,"div",3),ns(4,Ihe,2,1,"span",4),on()),2&n&&(Un("hidden",!r.active),Qn(2),Un("ngIf",r.overlayTitle),Qn(1),Un("ngIf",r.showBody),Qn(1),Un("ngIf",r.resizable))},dependencies:[Dm,ph,_R,oV,Sb],styles:[".overlay-card.card{color:var(--phoenix-text-color);background:none;max-width:100vw;font-size:12px;min-width:300px;height:100%;max-height:70vh;box-shadow:none;border:none;position:relative;z-index:200}.overlay-card.card .card-header{width:12rem;background:var(--phoenix-background-color-secondary);box-shadow:var(--phoenix-box-shadow);padding:.4rem .8rem;border-radius:10px;border:none;cursor:move;text-align:center;transition:all .2s}.overlay-card.card .card-header.with-body{border-bottom-left-radius:0;border-bottom-right-radius:0}.overlay-card.card .card-header .card-icon{display:flex;height:.7rem;width:.7rem}.overlay-card.card .card-header h5{font-size:.9rem}.overlay-card.card .card-header .expandCollapse{cursor:pointer;transition:all .2s}.overlay-card.card .card-header .expandCollapse.expand{transform:scaleY(-1)}.overlay-card.card .card-header .expandCollapse svg{width:100%;height:100%}.overlay-card.card .overlay-card-content{background:var(--phoenix-background-color-secondary);box-shadow:var(--phoenix-box-shadow);border-radius:0 10px 10px;overflow:auto;height:100%}.overlay-card.card .overlay-card-content.transparent-bg{background:none}.overlay-card.card .list-group{color:var(--phoenix-text-color-secondary);background:var(--phoenix-background-color-secondary);max-height:40vh;overflow:auto}.overlay-card.card .list-group .list-group-item{background-color:var(--phoenix-background-color-secondary);border-color:var(--phoenix-border)}.overlay-card.card .resize-handle{width:1rem;height:1rem;cursor:nwse-resize;position:absolute}.overlay-card.card .resize-handle.corner{border-right:.2rem solid var(--phoenix-text-color);border-bottom:.2rem solid var(--phoenix-text-color)}\n"],encapsulation:2})}return i})();function Fhe(i,e){if(1&i&&(tn(0,"option",15),dr(1),on()),2&i){const t=e.$implicit;Un("value",t),Qn(1),wl(" ",t," ")}}function Rhe(i,e){if(1&i){const t=Ba();tn(0,"mat-checkbox",16),ki("change",function(r){return ks(t),Ts(Or(3).toggleInvisible(r.checked))}),dr(1," Hide Invisible Objects "),on()}}function khe(i,e){if(1&i){const t=Ba();tn(0,"div",7)(1,"div",8)(2,"span"),dr(3,"Choose a collection: "),on(),tn(4,"div",9)(5,"label",10),dr(6,"Event"),on(),tn(7,"select",11),ki("change",function(r){return ks(t),Ts(Or(2).changeCollection(r.target.value))}),tn(8,"option",12),dr(9,"Choose Collection"),on(),ns(10,Fhe,2,2,"option",13),on()(),ns(11,Rhe,2,0,"mat-checkbox",14),on()()}if(2&i){const t=Or(2);Qn(10),Un("ngForOf",t.collections),Qn(1),Un("ngIf",t.showingCollection)}}function Ohe(i,e){if(1&i){const t=Ba();tn(0,"th")(1,"div",20)(2,"div"),dr(3),on(),tn(4,"div",21)(5,"button",22),ki("click",function(){const s=ks(t).$implicit;return Ts(Or(3).sort(s,"dec"))}),xl(),tn(6,"svg"),kr(7,"use",23),on()(),Jh(),tn(8,"button",24),ki("click",function(){const s=ks(t).$implicit;return Ts(Or(3).sort(s,"asc"))}),xl(),tn(9,"svg"),kr(10,"use",23),on()()()()()}if(2&i){const t=e.$implicit,n=Or(3);Qn(3),wl(" ",n.getPrettySymbol(t)," ")}}function Lhe(i,e){if(1&i){const t=Ba();tn(0,"div",33)(1,"button",34),ki("click",function(){ks(t);const r=Or().$implicit;return Ts(Or(3).lookAtObject(r.uuid))}),xl(),tn(2,"svg"),kr(3,"use",35),on()(),Jh(),tn(4,"button",36),ki("click",function(){ks(t);const r=Or().$implicit;return Ts(Or(3).highlightObject(r.uuid))}),xl(),tn(5,"svg"),kr(6,"use",37),on()()()}}function Nhe(i,e){if(1&i&&(xl(),Jh(),tn(0,"td"),dr(1),on()),2&i){const t=e.$implicit,n=Or().$implicit;Qn(1),wl(" ",n[t]," ")}}const Uhe=function(i,e,t){return{"active-object":i,"is-cut":e,"d-none":t}};function zhe(i,e){if(1&i){const t=Ba();tn(0,"tr",25)(1,"td"),dr(2),on(),tn(3,"td"),ns(4,Lhe,7,0,"div",26),on(),tn(5,"td")(6,"div",27)(7,"div",28),kr(8,"input",29),on(),tn(9,"div",30)(10,"button",31),ki("click",function(){const r=ks(t),s=r.index,a=r.$implicit;return Ts(Or(3).addLabel(s,a.uuid))}),xl(),tn(11,"svg"),kr(12,"use",32),on()()()()(),ns(13,Nhe,2,1,"td",18),on()}if(2&i){const t=e.$implicit,n=e.index,r=Or(3);Un("ngClass",qk(6,Uhe,r.activeObject&&r.activeObject.value===t.uuid,t.isCut,t.isCut&&r.hideInvisible)),ja("id",t.uuid),Qn(2),wl("#",n,""),Qn(2),Un("ngIf",t.uuid),Qn(4),Un("id","label"+n),Qn(5),Un("ngForOf",r.collectionColumns)}}function Hhe(i,e){if(1&i&&(tn(0,"table",17)(1,"thead")(2,"tr")(3,"th"),dr(4,"No."),on(),tn(5,"th"),dr(6,"Selection"),on(),tn(7,"th"),dr(8,"Label"),on(),ns(9,Ohe,11,1,"th",18),on()(),tn(10,"tbody"),ns(11,zhe,14,10,"tr",19),on()()),2&i){const t=Or(2);Qn(9),Un("ngForOf",t.collectionColumns),Qn(2),Un("ngForOf",t.showingCollection)}}function Vhe(i,e){1&i&&(tn(0,"p",38),dr(1," Load event data to be able to display information about the collections here. "),on())}function Ghe(i,e){if(1&i&&(tn(0,"div",2),ns(1,khe,12,2,"div",3),tn(2,"div",4),ns(3,Hhe,12,2,"table",5),ns(4,Vhe,2,0,"p",6),on()()),2&i){const t=Or();Qn(1),Un("ngIf",null!=t.collections),Qn(2),Un("ngIf",t.showingCollection),Qn(1),Un("ngIf",!t.collections)}}let cV=(()=>{class i{elementRef;eventDisplay;showObjectsInfo;hideInvisible;collections;selectedCollection;showingCollection;collectionColumns;getPrettySymbol=my.getPrettySymbol;activeObject;constructor(t,n){this.elementRef=t,this.eventDisplay=n}ngOnInit(){this.eventDisplay.listenToDisplayedEventChange(t=>this.collections=this.eventDisplay.getCollections()),this.activeObject=this.eventDisplay.getActiveObjectId(),this.activeObject.onUpdate(t=>{document.getElementById(t)&&document.getElementById(t).scrollIntoView(!1)})}changeCollection(t){const n=this.getEventDataGroup();this.selectedCollection=t,this.showingCollection=this.eventDisplay.getCollection(t).map(r=>({...r,isCut:!n.getObjectByProperty("uuid",r.uuid)?.visible})),this.collectionColumns=Object.keys(this.showingCollection[0]).filter(r=>!["uuid","hits","isCut"].includes(r))}sort(t,n){this.showingCollection.sort("asc"===n?(r,s)=>r[t]<s[t]?-1:1:(r,s)=>r[t]>s[t]?-1:1)}lookAtObject(t){t&&(this.activeObject.update(t),this.eventDisplay.lookAtObject(t))}highlightObject(t){t&&(this.activeObject.update(t),this.eventDisplay.highlightObject(t))}toggleInvisible(t){this.hideInvisible=t}addLabel(t,n){const r=this.elementRef.nativeElement.querySelector(`#label${t}`).value;this.selectedCollection&&this.eventDisplay.addLabelToObject(r,this.selectedCollection,t,n)}getEventDataGroup(){return this.eventDisplay.getThreeManager().getSceneManager().getScene().getObjectByName(Ya.EVENT_DATA_ID)}static \u0275fac=function(n){return new(n||i)(Et(Bs),Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-collections-info-overlay"]],inputs:{showObjectsInfo:"showObjectsInfo"},decls:2,vars:3,consts:[["overlayTitle","Collections Info","icon","info",3,"resizable","active"],["class","collectionsInfo m-2",4,"ngIf"],[1,"collectionsInfo","m-2"],["class","collectionSelector mb-2 d-flex align-items-center",4,"ngIf"],[1,"boxBody","table-responsive"],["id","collectionTable","class","table table-borderless table-sm",4,"ngIf"],["class","emptyBox",4,"ngIf"],[1,"collectionSelector","mb-2","d-flex","align-items-center"],[1,"d-flex","align-items-center"],[1,"eventSelector"],["for","event"],["id","collection","name","collection",3,"change"],["value","","selected","","disabled","","hidden",""],[3,"value",4,"ngFor","ngForOf"],[3,"change",4,"ngIf"],[3,"value"],[3,"change"],["id","collectionTable",1,"table","table-borderless","table-sm"],[4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"head-wrapper"],[1,"sort-options"],[1,"icon-wrapper","icon-button","btn-blank","up",3,"click"],["href","assets/icons/expand.svg#expand"],[1,"icon-wrapper","icon-button","btn-blank",3,"click"],[3,"ngClass"],["class","row justify-content-center icon-wrapper",4,"ngIf"],[1,"row","m-0","add-label"],[1,"col-10","p-0"],["type","text",1,"form-control","form-control-sm",3,"id"],[1,"col-2","p-0","pl-2","text-center","icon-wrapper"],["matTooltip","Add, update or remove object label",1,"object-select","btn-blank",3,"click"],["href","assets/icons/update.svg#update"],[1,"row","justify-content-center","icon-wrapper"],["matTooltip","Move camera to object",1,"object-select","btn-blank",3,"click"],["href","assets/icons/views.svg#views"],["matTooltip","Highlight object",1,"object-select","btn-blank",3,"click"],["href","assets/icons/cursor.svg#cursor"],[1,"emptyBox"]],template:function(n,r){1&n&&(tn(0,"app-overlay",0),ns(1,Ghe,5,3,"div",1),on()),2&n&&(Un("resizable",!0)("active",r.showObjectsInfo),Qn(1),Un("ngIf",r.showObjectsInfo))},dependencies:[Dm,sp,ph,Sb,eS,tS,t2,sS],styles:[".collectionsInfo[_ngcontent-%COMP%]{height:95%}.collectionsInfo[_ngcontent-%COMP%]   .collectionSelector[_ngcontent-%COMP%]{height:15%;min-height:2rem}.collectionsInfo[_ngcontent-%COMP%]   .collectionSelector[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--phoenix-text-color-secondary);margin-right:1rem}.collectionsInfo[_ngcontent-%COMP%]   .collectionSelector[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-left:1rem}.boxBody[_ngcontent-%COMP%]{height:85%;overflow:scroll}.boxBody[_ngcontent-%COMP%]   p.emptyBox[_ngcontent-%COMP%]{max-width:21em}.boxBody[_ngcontent-%COMP%]   .add-label[_ngcontent-%COMP%]{min-width:8rem}.boxBody[_ngcontent-%COMP%]   .add-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.1rem .3rem;font-size:.75rem}#collectionTable[_ngcontent-%COMP%]{position:relative;color:var(--phoenix-text-color-secondary)}#collectionTable[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:100;background:var(--phoenix-background-color-secondary)}#collectionTable[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .head-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}#collectionTable[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .head-wrapper[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]{display:flex;flex-direction:row}#collectionTable[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .head-wrapper[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{display:flex;width:1rem;height:1rem;padding:.2rem}#collectionTable[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .head-wrapper[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]   .icon-wrapper.up[_ngcontent-%COMP%]{transform:rotate(180deg)}#collectionTable[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .head-wrapper[_ngcontent-%COMP%]   .sort-options[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:100%;height:100%}#collectionTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{padding-right:1.2rem}#collectionTable[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]:last-child{padding-right:0}#collectionTable[_ngcontent-%COMP%]   tr.is-cut[_ngcontent-%COMP%]{opacity:.5}#collectionTable[_ngcontent-%COMP%]   tr.active-object[_ngcontent-%COMP%]{color:var(--phoenix-background-color);background:var(--phoenix-text-color);box-shadow:0 0 15px var(--phoenix-text-color)}#collectionTable[_ngcontent-%COMP%]   tr.active-object[_ngcontent-%COMP%]   div.icon-wrapper[_ngcontent-%COMP%]{--phoenix-options-icon-path: var(--phoenix-background-color);--phoenix-options-icon-bg: var(--phoenix-text-color-hover)}#collectionTable[_ngcontent-%COMP%]   tr.active-object[_ngcontent-%COMP%]   .add-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{--phoenix-text-color: var(--phoenix-background-color);--phoenix-background-color-tertiary: var( --phoenix-text-color-secondary );--phoenix-border: var(--phoenix-background-color)}#collectionTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .object-select[_ngcontent-%COMP%]{position:relative;width:1.6rem;height:1.6rem;margin-right:.4em;text-align:center;background-color:var(--phoenix-options-icon-bg);border-radius:10px;cursor:pointer}#collectionTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .object-select[_ngcontent-%COMP%]:last-child{margin-right:0}#collectionTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .object-select[_ngcontent-%COMP%]:hover{border:1px solid var(--phoenix-options-icon-path)}#collectionTable[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .object-select[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:0;left:0;padding:.4rem;width:100%;height:100%;vertical-align:top}.eventSelector[_ngcontent-%COMP%]{display:flex}.eventSelector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:none;color:var(--phoenix-text-color-secondary)}.eventSelector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:9rem;padding:5px 10px;font-size:12px;border:1px solid rgba(88,88,88,.08);box-shadow:var(--phoenix-icon-shadow);background-color:var(--phoenix-background-color-tertiary);color:var(--phoenix-text-color-secondary)}"]})}return i})(),yR=(()=>{class i{overlay;showObjectsInfo=!1;overlayWindow;constructor(t){this.overlay=t}ngOnInit(){const t=this.overlay.create(),n=new My(cV);this.overlayWindow=t.attach(n),this.overlayWindow.instance.showObjectsInfo=this.showObjectsInfo}ngOnDestroy(){this.overlayWindow.destroy()}toggleOverlay(){this.showObjectsInfo=!this.showObjectsInfo,this.overlayWindow.instance.showObjectsInfo=this.showObjectsInfo}static \u0275fac=function(n){return new(n||i)(Et(dp))};static \u0275cmp=Kr({type:i,selectors:[["app-collections-info"]],decls:1,vars:1,consts:[["tooltip","Event data collections info","icon","info",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.toggleOverlay()}),on()),2&n&&Un("active",r.showObjectsInfo)},dependencies:[Ec]})}return i})();function qhe(i,e){}class B4{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let uV=(()=>{class i extends FF{constructor(t,n,r,s,a,l,u,d){super(),this._elementRef=t,this._focusTrapFactory=n,this._config=s,this._interactivityChecker=a,this._ngZone=l,this._overlayRef=u,this._focusMonitor=d,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=A=>{this._portalOutlet.hasAttached();const y=this._portalOutlet.attachDomPortal(A);return this._contentAttached(),y},this._ariaLabelledBy=this._config.ariaLabelledBy||null,this._document=r}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),n}attachTemplatePortal(t){this._portalOutlet.hasAttached();const n=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,n){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{t.removeEventListener("blur",r),t.removeEventListener("mousedown",r),t.removeAttribute("tabindex")};t.addEventListener("blur",r),t.addEventListener("mousedown",r)})),t.focus(n)}_focusByCssSelector(t,n){let r=this._elementRef.nativeElement.querySelector(t);r&&this._forceFocus(r,n)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let n=null;if("string"==typeof t?n=this._document.querySelector(t):"boolean"==typeof t?n=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(n=t),this._config.restoreFocus&&n&&"function"==typeof n.focus){const r=gF(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,n=gF();return t===n||t.contains(n)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=gF())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(TF),Et(Zo,8),Et(B4),Et(s4),Et(po),Et(QC),Et(u0))},i.\u0275cmp=Kr({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(t,n){if(1&t&&Ml(Yw,7),2&t){let r;jo(r=$o())&&(n._portalOutlet=r.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,n){2&t&&ja("id",n._config.id||null)("role",n._config.role)("aria-modal",n._config.ariaModal)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null)},features:[bs],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,n){1&t&&ns(0,qhe,0,0,"ng-template",0)},dependencies:[Yw],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),i})();class vR{constructor(e,t){this.overlayRef=e,this.config=t,this.closed=new D,this.disableClose=t.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=t.id,this.keydownEvents.subscribe(n=>{27===n.keyCode&&!this.disableClose&&!jw(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==t.closeOnOverlayDetachments&&this.close()})}close(e,t){if(this.containerInstance){const n=this.closed;this.containerInstance._closeInteractionType=t?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(e),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",t=""){return this.overlayRef.updateSize({width:e,height:t}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const hV=new sr("DialogScrollStrategy"),Qhe=new sr("DialogData"),Whe=new sr("DefaultDialogConfig"),$he={provide:hV,deps:[dp],useFactory:function jhe(i){return()=>i.scrollStrategies.block()}};let Xhe=0,dV=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,n,r,s,a,l){this._overlay=t,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new D,this._afterOpenedAtThisLevel=new D,this._ariaHiddenElements=new Map,this.afterAllClosed=lE(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(lp(void 0))),this._scrollStrategy=l}open(t,n){(n={...this._defaultOptions||new B4,...n}).id=n.id||"cdk-dialog-"+Xhe++,n.id&&this.getDialogById(n.id);const s=this._getOverlayConfig(n),a=this._overlay.create(s),l=new vR(a,n),u=this._attachContainer(a,l,n);return l.containerInstance=u,this._attachDialogContent(t,l,u,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){bR(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){bR(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),bR(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const n=new LF({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(n.backdropClass=t.backdropClass),n}_attachContainer(t,n,r){const s=r.injector||r.viewContainerRef?.injector,a=[{provide:B4,useValue:r},{provide:vR,useValue:n},{provide:QC,useValue:t}];let l;r.container?"function"==typeof r.container?l=r.container:(l=r.container.type,a.push(...r.container.providers(r))):l=uV;const u=new My(l,r.viewContainerRef,$c.create({parent:s||this._injector,providers:a}),r.componentFactoryResolver);return t.attach(u).instance}_attachDialogContent(t,n,r,s){if(t instanceof hh){const a=this._createInjector(s,n,r,void 0);let l={$implicit:s.data,dialogRef:n};s.templateContext&&(l={...l,..."function"==typeof s.templateContext?s.templateContext():s.templateContext}),r.attachTemplatePortal(new UC(t,null,l,a))}else{const a=this._createInjector(s,n,r,this._injector),l=r.attachComponentPortal(new My(t,s.viewContainerRef,a,s.componentFactoryResolver));n.componentInstance=l.instance}}_createInjector(t,n,r,s){const a=t.injector||t.viewContainerRef?.injector,l=[{provide:Qhe,useValue:t.data},{provide:vR,useValue:n}];return t.providers&&("function"==typeof t.providers?l.push(...t.providers(n,t,r)):l.push(...t.providers)),t.direction&&(!a||!a.get(vd,null,{optional:!0}))&&l.push({provide:vd,useValue:{value:t.direction,change:Zs()}}),$c.create({parent:a||s,providers:l})}_removeOpenDialog(t,n){const r=this.openDialogs.indexOf(t);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,a)=>{s?a.setAttribute("aria-hidden",s):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const n=t.parentElement.children;for(let r=n.length-1;r>-1;r--){const s=n[r];s!==t&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return i.\u0275fac=function(t){return new(t||i)(oi(dp),oi($c),oi(Whe,8),oi(i,12),oi(f4),oi(hV))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();function bR(i,e){let t=i.length;for(;t--;)e(i[t])}let Khe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({providers:[dV,$he],imports:[WC,zC,DF,zC]}),i})();function Yhe(i,e){}class I4{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const xR="mdc-dialog--open",fV="mdc-dialog--opening",pV="mdc-dialog--closing";let ede=(()=>{class i extends uV{constructor(t,n,r,s,a,l,u,d){super(t,n,r,s,a,l,u,d),this._animationStateChanged=new ao}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(TF),Et(Zo,8),Et(I4),Et(s4),Et(po),Et(QC),Et(u0))},i.\u0275cmp=Kr({type:i,selectors:[["ng-component"]],features:[bs],decls:0,vars:0,template:function(t,n){},encapsulation:2}),i})();const AV="--mat-dialog-transition-duration";function mV(i){return null==i?null:"number"==typeof i?i:i.endsWith("ms")?gc(i.substring(0,i.length-2)):i.endsWith("s")?1e3*gc(i.substring(0,i.length-1)):"0"===i?0:null}let tde=(()=>{class i extends ede{constructor(t,n,r,s,a,l,u,d,A){super(t,n,r,s,a,l,u,A),this._animationMode=d,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._openAnimationDuration=this._animationsEnabled?mV(this._config.enterAnimationDuration)??150:0,this._closeAnimationDuration=this._animationsEnabled?mV(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._openAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._closeAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._openAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(AV,`${this._openAnimationDuration}ms`),this._hostElement.classList.add(fV),this._hostElement.classList.add(xR),this._waitForAnimationToComplete(this._openAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(xR),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._closeAnimationDuration}),this._hostElement.classList.remove(xR),this._animationsEnabled?(this._hostElement.style.setProperty(AV,`${this._openAnimationDuration}ms`),this._hostElement.classList.add(pV),this._waitForAnimationToComplete(this._closeAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(fV),this._hostElement.classList.remove(pV)}_waitForAnimationToComplete(t,n){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,t)}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(TF),Et(Zo,8),Et(I4),Et(s4),Et(po),Et(QC),Et(dh,8),Et(u0))},i.\u0275cmp=Kr({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(t,n){2&t&&(ui("id",n._config.id),ja("aria-modal",n._config.ariaModal)("role",n._config.role)("aria-labelledby",n._config.ariaLabel?null:n._ariaLabelledBy)("aria-label",n._config.ariaLabel)("aria-describedby",n._config.ariaDescribedBy||null),Ia("_mat-animation-noopable",!n._animationsEnabled))},features:[bs],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,n){1&t&&(tn(0,"div",0)(1,"div",1),ns(2,Yhe,0,0,"ng-template",2),on()())},dependencies:[Yw],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, var(--mdc-shape-medium, 4px))}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title,.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__actions,.mat-mdc-dialog-container.mdc-dialog--scrollable.mdc-dialog-scroll-divider-footer .mdc-dialog__actions{border-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container.mdc-dialog--scrollable .mdc-dialog__title{border-bottom-color:var(--mdc-dialog-with-divider-divider-color, black)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, "Arial");line-height:var(--mdc-dialog-subhead-line-height, 14px);font-size:var(--mdc-dialog-subhead-size, 14px);font-weight:var(--mdc-dialog-subhead-weight, 500);letter-spacing:var(--mdc-dialog-subhead-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, black)}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, "Arial");line-height:var(--mdc-dialog-supporting-text-line-height, 14px);font-size:var(--mdc-dialog-supporting-text-size, 14px);font-weight:var(--mdc-dialog-supporting-text-weight, 500);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 1px)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, black)}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),i})();class oS{constructor(e,t,n){this._ref=e,this._containerInstance=n,this._afterOpened=new D,this._beforeClosed=new D,this._state=0,this.disableClose=t.disableClose,this.id=e.id,n._animationStateChanged.pipe(Yc(r=>"opened"===r.state),Nc(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(Yc(r=>"closed"===r.state),Nc(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),It(this.backdropClick(),this.keydownEvents().pipe(Yc(r=>27===r.keyCode&&!this.disableClose&&!jw(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function nde(i,e,t){i._closeInteractionType=e,i.close(t)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Yc(t=>"closing"===t.state),Nc(1)).subscribe(t=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),t.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let t=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?t.left(e.left):t.right(e.right):t.centerHorizontally(),e&&(e.top||e.bottom)?e.top?t.top(e.top):t.bottom(e.bottom):t.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",t=""){return this._ref.updateSize(e,t),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const gV=new sr("MatMdcDialogData"),ide=new sr("mat-mdc-dialog-default-options"),_V=new sr("mat-mdc-dialog-scroll-strategy"),sde={provide:_V,deps:[dp],useFactory:function rde(i){return()=>i.scrollStrategies.block()}};let ode=0,ade=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,n,r,s,a,l,u,d,A,y){this._overlay=t,this._defaultOptions=r,this._parentDialog=s,this._dialogRefConstructor=u,this._dialogContainerType=d,this._dialogDataToken=A,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new D,this._afterOpenedAtThisLevel=new D,this._idPrefix="mat-dialog-",this.dialogConfigClass=I4,this.afterAllClosed=lE(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(lp(void 0))),this._scrollStrategy=l,this._dialog=n.get(dV)}open(t,n){let r;(n={...this._defaultOptions||new I4,...n}).id=n.id||`${this._idPrefix}${ode++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();const s=this._dialog.open(t,{...n,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:B4,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(a,l,u)=>(r=new this._dialogRefConstructor(a,n,u),r.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:u},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:r}])});return r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{const a=this.openDialogs.indexOf(r);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(n=>n.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let n=t.length;for(;n--;)t[n].close()}}return i.\u0275fac=function(t){Nd()},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})(),aS=(()=>{class i extends ade{constructor(t,n,r,s,a,l,u,d){super(t,n,s,l,u,a,oS,tde,gV,d),this._idPrefix="mat-mdc-dialog-"}}return i.\u0275fac=function(t){return new(t||i)(oi(dp),oi($c),oi(pM,8),oi(ide,8),oi(_V),oi(i,12),oi(f4),oi(dh,8))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})(),lde=0,wR=(()=>{class i{constructor(t,n,r){this._dialogRef=t,this._elementRef=n,this._dialog=r,this.id="mat-mdc-dialog-title-"+lde++}ngOnInit(){this._dialogRef||(this._dialogRef=function cde(i,e){let t=i.nativeElement.parentElement;for(;t&&!t.classList.contains("mat-mdc-dialog-container");)t=t.parentElement;return t?e.find(n=>n.id===t.id):null}(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return i.\u0275fac=function(t){return new(t||i)(Et(oS,8),Et(Bs),Et(aS))},i.\u0275dir=gr({type:i,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-mdc-dialog-title","mdc-dialog__title"],hostVars:1,hostBindings:function(t,n){2&t&&ui("id",n.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),i})(),MR=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=gr({type:i,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-mdc-dialog-content","mdc-dialog__content"]}),i})(),CR=(()=>{class i{constructor(){this.align="start"}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=gr({type:i,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:4,hostBindings:function(t,n){2&t&&Ia("mat-mdc-dialog-actions-align-center","center"===n.align)("mat-mdc-dialog-actions-align-end","end"===n.align)},inputs:{align:"align"}}),i})(),ude=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({providers:[aS,sde],imports:[Khe,WC,zC,Eu,Eu]}),i})();const hde=["mat-button",""],dde=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],fde=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],gde=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],_de=Kw(vb(bb(class{constructor(i){this._elementRef=i}})));let vV=(()=>{class i extends _de{constructor(t,n,r,s){super(t),this._platform=n,this._ngZone=r,this._animationMode=s,this._focusMonitor=Do(u0),this._isFab=!1;const a=t.nativeElement.classList;for(const l of gde)this._hasHostAttributes(l.selector)&&l.mdcClasses.forEach(u=>{a.add(u)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",n){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,n):this._elementRef.nativeElement.focus(n)}_hasHostAttributes(...t){return t.some(n=>this._elementRef.nativeElement.hasAttribute(n))}_isRippleDisabled(){return this.disableRipple||this.disabled}}return i.\u0275fac=function(t){Nd()},i.\u0275dir=gr({type:i,viewQuery:function(t,n){if(1&t&&Ml(GA,5),2&t){let r;jo(r=$o())&&(n.ripple=r.first)}},features:[bs]}),i})(),lS=(()=>{class i extends vV{constructor(t,n,r,s){super(t,n,r,s)}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(ju),Et(po),Et(dh,8))},i.\u0275cmp=Kr({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:7,hostBindings:function(t,n){2&t&&(ja("disabled",n.disabled||null),Ia("_mat-animation-noopable","NoopAnimations"===n._animationMode)("mat-unthemed",!n.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[bs],attrs:hde,ngContentSelectors:fde,decls:8,vars:6,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],["matRipple","",1,"mat-mdc-button-ripple",3,"matRippleDisabled","matRippleTrigger"],[1,"mat-mdc-button-touch-target"]],template:function(t,n){1&t&&(ch(dde),kr(0,"span",0),ru(1),tn(2,"span",1),ru(3,1),on(),ru(4,2),kr(5,"span",2)(6,"span",3)(7,"span",4)),2&t&&(Ia("mdc-button__ripple",!n._isFab)("mdc-fab__ripple",n._isFab),Qn(6),Un("matRippleDisabled",n._isRippleDisabled())("matRippleTrigger",n._elementRef.nativeElement))},dependencies:[GA],styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),i})(),xde=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[Eu,xb,Eu]}),i})();function wde(i,e){if(1&i){const t=Ba();Lp(0),tn(1,"input",28,29),ki("change",function(r){return Ts(ks(t).$implicit.handler(r.target.files))}),on(),tn(3,"button",8),ki("click",function(){return ks(t),Ts(Fl(2).click())}),kr(4,"img",30),dr(5),on(),Np()}if(2&i){const t=e.$implicit;Qn(1),Un("accept",t.accept),Qn(4),wl(" Load ",t.fileType," ")}}function Mde(i,e){if(1&i&&(tn(0,"div")(1,"p",4)(2,"b"),dr(3,"Event data"),on()(),tn(4,"div",5),ns(5,wde,6,2,"ng-container",27),on()()),2&i){const t=Or();Qn(5),Un("ngForOf",t.eventDataOptionsWithHandler)}}let bV=(()=>{class i{eventDisplay;dialogRef;eventDataImportOptions=[Uh.JSON];eventDataOptionsWithHandler;supportedEventDataFormats=[new _b(Uh.JSON,".json",this.handleJSONEventDataInput.bind(this),"application/json"),new _b(Uh.EDM4HEPJSON,".edm4hep.json",this.handleEDM4HEPJSONEventDataInput.bind(this),"application/json"),new _b(Uh.JIVEXML,".xml",this.handleJiveXMLDataInput.bind(this),"text/xml"),new _b(Uh.ZIP,".zip",this.handleZipEventDataInput.bind(this),".zip"),new _b(Uh.IG,".ig",this.handleIgEventDataInput.bind(this),".ig")];constructor(t,n){this.eventDisplay=t,this.dialogRef=n}ngOnInit(){this.eventDataOptionsWithHandler=this.supportedEventDataFormats.filter(t=>this.eventDataImportOptions.includes(t.format)),this.eventDataImportOptions.forEach(t=>{if(t instanceof _b){const n=t.handler.bind(this);t.handler=r=>{n(r),this.onClose()},this.eventDataOptionsWithHandler.push(t)}})}getSupportedEventDataFormats(){return this.eventDataImportOptions.map(t=>t instanceof _b?t.format:t).filter(t=>"ZIP"!==t).join(", ")}onClose(){this.dialogRef.close()}handleJSONEventDataInput(t){this.handleFileInput(t[0],"json",r=>{const s="string"==typeof r?JSON.parse(r):r;this.eventDisplay.parsePhoenixEvents(s)})}handleEDM4HEPJSONEventDataInput(t){this.handleFileInput(t[0],"json",r=>{const s="string"==typeof r?JSON.parse(r):r,a=new aae;a.setRawEventData(s),a.processEventData(),this.eventDisplay.parsePhoenixEvents(a.getEventData())})}handleJiveXMLDataInput(t){this.handleFileInput(t[0],"xml",r=>{const s=new BC;s.process(r);const a=s.getEventData();this.eventDisplay.buildEventDataFromJSON(a)})}handleOBJInput(t){this.handleFileInput(t[0],"obj",(r,s)=>{this.eventDisplay.parseOBJGeometry(r,s)})}handleSceneInput(t){this.handleFileInput(t[0],"phnx",r=>{this.eventDisplay.parsePhoenixDisplay(r)})}handleGLTFInput(t){this.handleFileInput(t[0],"gltf",(r,s)=>{this.eventDisplay.parseGLTFGeometry(r,s)})}handlePhoenixInput(t){this.handleFileInput(t[0],"phnx",r=>{this.eventDisplay.parsePhoenixDisplay(r)})}handleROOTInput(t){var n=this;return(0,Hp.Z)(function*(){const r=prompt("Enter object name in ROOT file");yield n.eventDisplay.loadRootGeometry(URL.createObjectURL(t[0]),r,t[0].name.split(".")[0]),n.onClose()})()}handleRootJSONInput(t){var n=this;return(0,Hp.Z)(function*(){if(!n.isFileOfExtension(t[0],"gz"))return;const r=t[0].name.split(".")[0];yield n.eventDisplay.loadRootJSONGeometry(URL.createObjectURL(t[0]),r),n.onClose()})()}handleIgEventDataInput(t){const n=new T9;n.readIgArchive(t[0],r=>{const s=n.getAllEventsData(r);this.eventDisplay.parsePhoenixEvents(s),this.onClose()})}handleZipEventDataInput(t){var n=this;return(0,Hp.Z)(function*(){if(!n.isFileOfExtension(t[0],"zip"))return;const r={};let s;try{s=yield S9(t[0])}catch(l){return console.error("Error while reading zip",l),void n.eventDisplay.getInfoLogger().add("Could not read zip file","Error")}Object.keys(s).filter(l=>l.endsWith(".json")).forEach(l=>{Object.assign(r,JSON.parse(s[l]))});const a=new BC;Object.keys(s).filter(l=>l.endsWith(".xml")||l.startsWith("JiveXML")).forEach(l=>{a.process(s[l]);const u=a.getEventData();Object.assign(r,{[l]:u})}),n.eventDisplay.parsePhoenixEvents(r),n.onClose()})()}handleFileInput(t,n,r){const s=new FileReader;this.isFileOfExtension(t,n)&&(s.onload=()=>{r(s.result.toString(),t.name.split(".")[0])},s.readAsText(t)),this.onClose()}isFileOfExtension(t,n){return t.name.split(".").pop()===n||(console.error("Error: Invalid file format!"),this.eventDisplay.getInfoLogger().add("Invalid file format!","Error"),!1)}saveScene(){this.eventDisplay.exportPhoenixDisplay()}exportOBJ(){this.eventDisplay.exportToOBJ()}static \u0275fac=function(n){return new(n||i)(Et(Bl),Et(oS))};static \u0275cmp=Kr({type:i,selectors:[["app-io-options-dialog"]],inputs:{eventDataImportOptions:"eventDataImportOptions"},decls:47,vars:1,consts:[[1,"dialog"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-content"],[4,"ngIf"],[1,"text-center"],[1,"row","centered"],["type","file","tabindex","-1","accept",".obj","name","image",1,"file-input",3,"change"],["objFileInput",""],[1,"file-input-button",3,"click"],["src","assets/icons/obj.svg","alt",""],["type","file","tabindex","-1","accept",".gltf","name","image",1,"file-input",3,"change"],["gltfFileInput",""],["src","assets/icons/gltf.svg","alt",""],["type","file","tabindex","-1","accept",".root",1,"file-input",3,"change"],["rootFileInput",""],["src","assets/icons/file-import.svg","alt",""],["type","file","tabindex","-1","accept",".json.gz",1,"file-input",3,"change"],["rootJSONFileInput",""],["id","exportScene",1,"file-input-button","load-export",3,"click"],["src","assets/icons/save.svg","alt",""],["type","file","tabindex","-1","accept",".phnx","name","image",1,"file-input",3,"change"],["loadSceneInput",""],["id","importScene",1,"file-input-button","load-export",3,"click"],["src","assets/icons/upload.svg","alt",""],["id","exportOBJ",1,"file-input-button","export-button",3,"click"],["mat-dialog-actions","","align","end"],["mat-flat-button","","color","primary","cdkFocusInitial","",3,"click"],[4,"ngFor","ngForOf"],["type","file","tabindex","-1",1,"file-input",3,"accept","change"],["eventDataFileInput",""],["src","assets/icons/eventData.svg","alt","Event data icon"]],template:function(n,r){if(1&n){const s=Ba();tn(0,"div",0)(1,"h1",1),dr(2,"Import and export"),on(),tn(3,"div",2),ns(4,Mde,6,1,"div",3),tn(5,"p",4)(6,"b"),dr(7,"Geometries"),on()(),tn(8,"div",5)(9,"input",6,7),ki("change",function(l){return r.handleOBJInput(l.target.files)}),on(),tn(11,"button",8),ki("click",function(){return ks(s),Ts(Fl(10).click())}),kr(12,"img",9),dr(13," Load .obj "),on(),tn(14,"input",10,11),ki("change",function(l){return r.handleGLTFInput(l.target.files)}),on(),tn(16,"button",8),ki("click",function(){return ks(s),Ts(Fl(15).click())}),kr(17,"img",12),dr(18," Load .gltf "),on(),tn(19,"input",13,14),ki("change",function(l){return r.handleROOTInput(l.target.files)}),on(),tn(21,"button",8),ki("click",function(){return ks(s),Ts(Fl(20).click())}),kr(22,"img",15),dr(23," Load .root "),on(),tn(24,"input",16,17),ki("change",function(l){return r.handleRootJSONInput(l.target.files)}),on(),tn(26,"button",8),ki("click",function(){return ks(s),Ts(Fl(25).click())}),kr(27,"img",15),dr(28," Load .json.gz "),on()(),tn(29,"p",4)(30,"b"),dr(31,"Scene"),on()(),tn(32,"div",5)(33,"button",18),ki("click",function(){return r.saveScene()}),kr(34,"img",19),dr(35," Save scene "),on(),tn(36,"input",20,21),ki("change",function(l){return r.handlePhoenixInput(l.target.files)}),on(),tn(38,"button",22),ki("click",function(){return ks(s),Ts(Fl(37).click())}),kr(39,"img",23),dr(40," Load scene "),on(),tn(41,"button",24),ki("click",function(){return r.exportOBJ()}),kr(42,"img",9),dr(43," Save OBJ "),on()()(),tn(44,"div",25)(45,"button",26),ki("click",function(){return r.onClose()}),dr(46," Close "),on()()()}2&n&&(Qn(4),Un("ngIf",r.eventDataImportOptions.length>0))},dependencies:[sp,ph,wR,MR,CR,lS],styles:[".row[_ngcontent-%COMP%]{justify-content:center;margin:1rem 0}.file-input[_ngcontent-%COMP%]{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.file-input-button[_ngcontent-%COMP%]{font-size:1em;font-weight:700;color:#fff;background-color:#6eaece;padding:1em .5em;border:none;border-radius:10px;width:8rem;margin:0 .4rem}.file-input-button.load-export[_ngcontent-%COMP%]{padding:.8em .2em;width:7rem}.file-input-button.load-export[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:1.2em}.file-input-button.export-button[_ngcontent-%COMP%]{background-color:#cb7133}.file-input-button.export-button[_ngcontent-%COMP%]:hover{background-color:#ad5b2d}.file-input-button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:2em;display:block;width:100%}.file-input-button[_ngcontent-%COMP%]:hover{background-color:#118ab2}#exportScene[_ngcontent-%COMP%]{background-color:#5bd99e}#exportScene[_ngcontent-%COMP%]:hover{background-color:#05c292}#importScene[_ngcontent-%COMP%]{background-color:#ecc25e}#importScene[_ngcontent-%COMP%]:hover{background-color:#d6b44d}"]})}return i})(),SR=(()=>{class i{dialog;eventDataImportOptions=Object.values(Uh);constructor(t){this.dialog=t}openIODialog(){this.dialog.open(bV,{panelClass:"dialog"}).componentInstance.eventDataImportOptions=this.eventDataImportOptions}static \u0275fac=function(n){return new(n||i)(Et(aS))};static \u0275cmp=Kr({type:i,selectors:[["app-io-options"]],inputs:{eventDataImportOptions:"eventDataImportOptions"},decls:1,vars:1,consts:[["tooltip","Import and export options","icon","import",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.openIODialog()}),on()),2&n&&Un("active",!1)},dependencies:[Ec]})}return i})();const Cde=["overlayWindow"];let xV=(()=>{class i{eventDisplay;showOverlay=!0;transparentBody=!1;orthographicView=!1;overlayViewFixed=!1;overlayWindow;constructor(t){this.eventDisplay=t}ngAfterViewInit(){const t=this.initializeCanvas(this.overlayWindow.nativeElement);this.eventDisplay.setOverlayRenderer(t)}initializeCanvas(t){const n=window.innerWidth/2.5,r=window.innerHeight/2.5;return t.width=n,t.height=r,t.style.width=n.toString()+" px",t.style.height=r.toString()+" px",t}switchOverlayView(){this.orthographicView=!this.orthographicView,this.eventDisplay.getUIManager().toggleOrthographicView(this.orthographicView)}fixOverlayView(){this.overlayViewFixed=!this.overlayViewFixed,this.eventDisplay.fixOverlayView(this.overlayViewFixed)}toggleBgTransparency(){this.transparentBody=!this.transparentBody}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-overlay-view-window"]],viewQuery:function(n,r){if(1&n&&Ml(Cde,5),2&n){let s;jo(s=$o())&&(r.overlayWindow=s.first)}},inputs:{showOverlay:"showOverlay"},decls:8,vars:9,consts:[["overlayTitle","Overlay View","icon","overlay",3,"resizable","transparentBody","active","keepAspectRatioFixed"],[1,"overlay-view-wrapper"],["id","overlay-canvas",3,"hidden"],["overlayWindow",""],[1,"overlay-view-controls","position-absolute","d-flex","flex-row"],["icon","transparent","matTooltip","Toggle background transparency",1,"overlay-view-control",3,"click"],["icon","move-lock",1,"overlay-view-control",3,"matTooltip","active","click"],[1,"overlay-view-control",3,"icon","matTooltip","click"]],template:function(n,r){1&n&&(tn(0,"app-overlay",0)(1,"div",1),kr(2,"canvas",2,3),tn(4,"div",4)(5,"app-menu-toggle",5),ki("click",function(){return r.toggleBgTransparency()}),on(),tn(6,"app-menu-toggle",6),ki("click",function(){return r.fixOverlayView()}),on(),tn(7,"app-menu-toggle",7),ki("click",function(){return r.switchOverlayView()}),on()()()()),2&n&&(Un("resizable",!0)("transparentBody",r.transparentBody)("active",r.showOverlay)("keepAspectRatioFixed",!0),Qn(2),Un("hidden",!r.showOverlay),Qn(4),Un("matTooltip",(r.overlayViewFixed?"Restore":"Fix")+" overlay view")("active",r.overlayViewFixed),Qn(1),Un("icon",r.orthographicView?"orthographic":"perspective")("matTooltip","Switch to "+(r.orthographicView?"orthographic":"perspective")+" view"))},dependencies:[Sb,Ec,sS],styles:["#overlay-canvas[_ngcontent-%COMP%]{background-color:#0000001a;width:100%}.overlay-view-controls[_ngcontent-%COMP%]{bottom:1em;right:1em;opacity:0;transition:opacity .2s}.overlay-view-controls[_ngcontent-%COMP%]   .overlay-view-control[_ngcontent-%COMP%]{background:var(--phoenix-background-color-secondary);box-shadow:var(--phoenix-box-shadow);overflow:hidden;width:2.5rem;height:2.5rem;border-radius:50%;display:flex;justify-content:center;align-items:center}.overlay-view-wrapper[_ngcontent-%COMP%]:hover   .overlay-view-controls[_ngcontent-%COMP%]{opacity:1;transition:opacity .2s}"]})}return i})(),TR=(()=>{class i{overlay;overlayWindow;showOverlay=!1;constructor(t){this.overlay=t}ngOnInit(){const t=this.overlay.create(),n=new My(xV);this.overlayWindow=t.attach(n),this.overlayWindow.instance.showOverlay=this.showOverlay}ngOnDestroy(){this.overlayWindow.destroy()}toggleOverlay(){this.showOverlay=!this.showOverlay,this.overlayWindow.instance.showOverlay=this.showOverlay}static \u0275fac=function(n){return new(n||i)(Et(dp))};static \u0275cmp=Kr({type:i,selectors:[["app-overlay-view"]],decls:1,vars:1,consts:[["tooltip","Overlay view","icon","overlay",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.toggleOverlay()}),on()),2&n&&Un("active",r.showOverlay)},dependencies:[Ec]})}return i})(),wV=(()=>{class i{transform(t,n){let r="";return Array.isArray(t)?(r+="\n",t.forEach(s=>r+=s+"\n")):r=t.toString(),r}static \u0275fac=function(n){return new(n||i)};static \u0275pipe=ia({name:"attributePipe",type:i,pure:!0})}return i})();function Sde(i,e){if(1&i&&(tn(0,"div",4)(1,"strong"),dr(2),on(),dr(3),function Kk(i,e){const t=_a();let n;const r=i+ka;t.firstCreatePass?(n=function Cq(i,e){if(e)for(let t=e.length-1;t>=0;t--){const n=e[t];if(i===n.name)return n}}(e,t.pipeRegistry),t.data[r]=n,n.onDestroy&&(t.destroyHooks??(t.destroyHooks=[])).push(r,n.onDestroy)):n=t.data[r];const s=n.factory||(n.factory=Qh(n.type)),a=Bi(Et);try{const l=xp(!1),u=s();return xp(l),function vx(i,e,t,n){t>=i.data.length&&(i.data[t]=null,i.blueprint[t]=null),e[t]=n}(t,Zi(),r,u),u}finally{Bi(a)}}(4,"attributePipe"),on()),2&i){const t=e.$implicit;Qn(2),bf(t.attributeName),Qn(1),wl(" : ",Yk(4,2,t.attributeValue)," ")}}function Tde(i,e){if(1&i&&(tn(0,"div",2),ns(1,Sde,5,4,"div",3),on()),2&i){const t=Or();Qn(1),Un("ngForOf",t.selectedObject.attributes)}}let MV=(()=>{class i{eventDisplay;hiddenSelectedInfo;selectedObject={name:"Object",attributes:[]};constructor(t){this.eventDisplay=t}ngOnInit(){this.eventDisplay.allowSelection(this.selectedObject)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-object-selection-overlay"]],inputs:{hiddenSelectedInfo:"hiddenSelectedInfo"},decls:2,vars:3,consts:[["icon","cursor",3,"overlayTitle","active"],["id","selectedObjectPanelBody","class","m-1",4,"ngIf"],["id","selectedObjectPanelBody",1,"m-1"],["class","attributeField",4,"ngFor","ngForOf"],[1,"attributeField"]],template:function(n,r){1&n&&(tn(0,"app-overlay",0),ns(1,Tde,2,1,"div",1),on()),2&n&&(Un("overlayTitle",r.selectedObject.name)("active",!r.hiddenSelectedInfo),Qn(1),Un("ngIf",r.selectedObject.attributes.length>0))},dependencies:[sp,ph,sS,wV],styles:["#selectedObjectPanelBody[_ngcontent-%COMP%]{padding:0 .8em;overflow:auto;max-width:300px;max-height:16rem;min-width:7rem}"]})}return i})(),ER=(()=>{class i{overlay;eventDisplay;hiddenSelectedInfo=!0;overlayWindow;constructor(t,n){this.overlay=t,this.eventDisplay=n}ngOnInit(){const t=this.overlay.create(),n=new My(MV);this.overlayWindow=t.attach(n),this.overlayWindow.instance.hiddenSelectedInfo=this.hiddenSelectedInfo}ngOnDestroy(){this.overlayWindow.destroy()}toggleOverlay(){this.hiddenSelectedInfo=!this.hiddenSelectedInfo,this.overlayWindow.instance.hiddenSelectedInfo=this.hiddenSelectedInfo,this.eventDisplay.enableSelecting(!this.hiddenSelectedInfo)}static \u0275fac=function(n){return new(n||i)(Et(dp),Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-object-selection"]],decls:1,vars:1,consts:[["tooltip","Object selection","icon","cursor",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.toggleOverlay()}),on()),2&n&&Un("active",!r.hiddenSelectedInfo)},dependencies:[Ec]})}return i})();function Ede(i,e){if(1&i&&(tn(0,"option",4),dr(1),on()),2&i){const t=e.$implicit;Un("value",t),Qn(1),wl(" ",t," ")}}function Dde(i,e){if(1&i){const t=Ba();tn(0,"div",1)(1,"select",2),ki("change",function(r){return ks(t),Ts(Or().changeEvent(r))}),ns(2,Ede,2,2,"option",3),on()()}if(2&i){const t=Or();Qn(2),Un("ngForOf",t.events)}}let DR=(()=>{class i{eventDisplay;events;constructor(t){this.eventDisplay=t}ngOnInit(){this.eventDisplay.listenToLoadedEventsChange(t=>this.events=t)}changeEvent(t){this.eventDisplay.loadEvent(t.target.value)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-event-selector"]],decls:1,vars:1,consts:[["class","eventSelector mx-2","matTooltip","Event selector","matTooltipPosition","above",4,"ngIf"],["matTooltip","Event selector","matTooltipPosition","above",1,"eventSelector","mx-2"],["name","event",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(n,r){1&n&&ns(0,Dde,3,1,"div",0),2&n&&Un("ngIf",null!=r.events)},dependencies:[sp,ph,Sb,eS,tS],styles:[".eventSelector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:9rem;padding:5px 10px;font-size:12px;border:1px solid rgba(88,88,88,.08);box-shadow:var(--phoenix-icon-shadow);background-color:var(--phoenix-background-color-tertiary);color:var(--phoenix-text-color-secondary)}"]})}return i})();const Bde=["knob"],Ide=["valueIndicatorContainer"];function Pde(i,e){if(1&i&&(tn(0,"div",4,5)(2,"div",6)(3,"span",7),dr(4),on()()()),2&i){const t=Or();Qn(4),bf(t.valueIndicatorText)}}const Fde=["trackActive"];function Rde(i,e){if(1&i&&kr(0,"div"),2&i){const t=e.$implicit,n=e.index,r=Or(3);(function G1(i){fd(rB,vf,i,!0)})(0===t?"mdc-slider__tick-mark--active":"mdc-slider__tick-mark--inactive"),Ud("transform",r._calcTickMarkTransform(n))}}function kde(i,e){if(1&i&&(Lp(0),ns(1,Rde,1,4,"div",11),Np()),2&i){const t=Or(2);Qn(1),Un("ngForOf",t._tickMarks)}}function Ode(i,e){if(1&i&&(tn(0,"div",8,9),ns(2,kde,2,1,"ng-container",10),on()),2&i){const t=Or();Qn(2),Un("ngIf",t._cachedWidth)}}function Lde(i,e){if(1&i&&kr(0,"mat-slider-visual-thumb",7),2&i){const t=Or();Un("discrete",t.discrete)("thumbPosition",1)("valueIndicatorText",t.startValueIndicatorText)}}const Nde=["*"],P4=new sr("_MatSlider"),CV=new sr("_MatSliderThumb"),SV=new sr("_MatSliderRangeThumb"),TV=new sr("_MatSliderVisualThumb");let Ude=(()=>{class i{constructor(t,n,r,s){this._cdr=t,this._ngZone=n,this._slider=s,this._isHovered=!1,this._isActive=!1,this._isValueIndicatorVisible=!1,this._onPointerMove=a=>{if(this._sliderInput._isFocused)return;const l=this._hostElement.getBoundingClientRect(),u=this._isSliderThumbHovered(a,l);this._isHovered=u,u?this._showHoverRipple():this._hideRipple(this._hoverRippleRef)},this._onMouseLeave=()=>{this._isHovered=!1,this._hideRipple(this._hoverRippleRef)},this._onFocus=()=>{this._hideRipple(this._hoverRippleRef),this._showFocusRipple(),this._hostElement.classList.add("mdc-slider__thumb--focused")},this._onBlur=()=>{this._isActive||this._hideRipple(this._focusRippleRef),this._isHovered&&this._showHoverRipple(),this._hostElement.classList.remove("mdc-slider__thumb--focused")},this._onDragStart=()=>{this._isActive=!0,this._showActiveRipple()},this._onDragEnd=()=>{this._isActive=!1,this._hideRipple(this._activeRippleRef),this._sliderInput._isFocused||this._hideRipple(this._focusRippleRef)},this._hostElement=r.nativeElement}ngAfterViewInit(){this._ripple.radius=24,this._sliderInput=this._slider._getInput(this.thumbPosition),this._sliderInputEl=this._sliderInput._hostElement;const t=this._sliderInputEl;this._ngZone.runOutsideAngular(()=>{t.addEventListener("pointermove",this._onPointerMove),t.addEventListener("pointerdown",this._onDragStart),t.addEventListener("pointerup",this._onDragEnd),t.addEventListener("pointerleave",this._onMouseLeave),t.addEventListener("focus",this._onFocus),t.addEventListener("blur",this._onBlur)})}ngOnDestroy(){const t=this._sliderInputEl;t.removeEventListener("pointermove",this._onPointerMove),t.removeEventListener("pointerdown",this._onDragStart),t.removeEventListener("pointerup",this._onDragEnd),t.removeEventListener("pointerleave",this._onMouseLeave),t.removeEventListener("focus",this._onFocus),t.removeEventListener("blur",this._onBlur)}_showHoverRipple(){this._isShowingRipple(this._hoverRippleRef)||(this._hoverRippleRef=this._showRipple({enterDuration:0,exitDuration:0}),this._hoverRippleRef?.element.classList.add("mat-mdc-slider-hover-ripple"))}_showFocusRipple(){this._isShowingRipple(this._focusRippleRef)||(this._focusRippleRef=this._showRipple({enterDuration:0,exitDuration:0},!0),this._focusRippleRef?.element.classList.add("mat-mdc-slider-focus-ripple"))}_showActiveRipple(){this._isShowingRipple(this._activeRippleRef)||(this._activeRippleRef=this._showRipple({enterDuration:225,exitDuration:400}),this._activeRippleRef?.element.classList.add("mat-mdc-slider-active-ripple"))}_isShowingRipple(t){return 0===t?.state||1===t?.state}_showRipple(t,n){if(!this._slider.disabled&&(this._showValueIndicator(),this._slider._isRange&&this._slider._getThumb(1===this.thumbPosition?2:1)._showValueIndicator(),!this._slider._globalRippleOptions?.disabled||n))return this._ripple.launch({animation:this._slider._noopAnimations?{enterDuration:0,exitDuration:0}:t,centered:!0,persistent:!0})}_hideRipple(t){if(t?.fadeOut(),this._isShowingAnyRipple())return;this._slider._isRange||this._hideValueIndicator();const n=this._getSibling();n._isShowingAnyRipple()||(this._hideValueIndicator(),n._hideValueIndicator())}_showValueIndicator(){this._hostElement.classList.add("mdc-slider__thumb--with-indicator")}_hideValueIndicator(){this._hostElement.classList.remove("mdc-slider__thumb--with-indicator")}_getSibling(){return this._slider._getThumb(1===this.thumbPosition?2:1)}_getValueIndicatorContainer(){return this._valueIndicatorContainer?.nativeElement}_getKnob(){return this._knob.nativeElement}_isShowingAnyRipple(){return this._isShowingRipple(this._hoverRippleRef)||this._isShowingRipple(this._focusRippleRef)||this._isShowingRipple(this._activeRippleRef)}_isSliderThumbHovered(t,n){const r=n.width/2,u=t.clientY-(n.y+r);return Math.pow(t.clientX-(n.x+r),2)+Math.pow(u,2)<Math.pow(r,2)}}return i.\u0275fac=function(t){return new(t||i)(Et(zl),Et(po),Et(Bs),Et(P4))},i.\u0275cmp=Kr({type:i,selectors:[["mat-slider-visual-thumb"]],viewQuery:function(t,n){if(1&t&&(Ml(GA,5),Ml(Bde,5),Ml(Ide,5)),2&t){let r;jo(r=$o())&&(n._ripple=r.first),jo(r=$o())&&(n._knob=r.first),jo(r=$o())&&(n._valueIndicatorContainer=r.first)}},hostAttrs:[1,"mdc-slider__thumb","mat-mdc-slider-visual-thumb"],inputs:{discrete:"discrete",thumbPosition:"thumbPosition",valueIndicatorText:"valueIndicatorText"},features:[ko([{provide:TV,useExisting:i}])],decls:4,vars:2,consts:[["class","mdc-slider__value-indicator-container",4,"ngIf"],[1,"mdc-slider__thumb-knob"],["knob",""],["matRipple","",1,"mat-mdc-focus-indicator",3,"matRippleDisabled"],[1,"mdc-slider__value-indicator-container"],["valueIndicatorContainer",""],[1,"mdc-slider__value-indicator"],[1,"mdc-slider__value-indicator-text"]],template:function(t,n){1&t&&(ns(0,Pde,5,1,"div",0),kr(1,"div",1,2)(3,"div",3)),2&t&&(Un("ngIf",n.discrete),Qn(3),Un("matRippleDisabled",!0))},dependencies:[ph,GA],styles:[".mat-mdc-slider-visual-thumb .mat-ripple{height:100%;width:100%}.mat-mdc-slider .mdc-slider__tick-marks{justify-content:start}.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-marks .mdc-slider__tick-mark--inactive{position:absolute;left:2px}"],encapsulation:2,changeDetection:0}),i})();const zde=Kw(bb(class{constructor(i){this._elementRef=i}}),"primary");let EV=(()=>{class i extends zde{get disabled(){return this._disabled}set disabled(t){this._disabled=ma(t);const n=this._getInput(2),r=this._getInput(1);n&&(n.disabled=this._disabled),r&&(r.disabled=this._disabled)}get discrete(){return this._discrete}set discrete(t){this._discrete=ma(t),this._updateValueIndicatorUIs()}get showTickMarks(){return this._showTickMarks}set showTickMarks(t){this._showTickMarks=ma(t)}get min(){return this._min}set min(t){const n=gc(t,this._min);this._min!==n&&this._updateMin(n)}_updateMin(t){const n=this._min;this._min=t,this._isRange?this._updateMinRange({old:n,new:t}):this._updateMinNonRange(t),this._onMinMaxOrStepChange()}_updateMinRange(t){const n=this._getInput(2),r=this._getInput(1),s=n.value,a=r.value;r.min=t.new,n.min=Math.max(t.new,r.value),r.max=Math.min(n.max,n.value),r._updateWidthInactive(),n._updateWidthInactive(),t.new<t.old?this._onTranslateXChangeBySideEffect(n,r):this._onTranslateXChangeBySideEffect(r,n),s!==n.value&&this._onValueChange(n),a!==r.value&&this._onValueChange(r)}_updateMinNonRange(t){const n=this._getInput(2);if(n){const r=n.value;n.min=t,n._updateThumbUIByValue(),this._updateTrackUI(n),r!==n.value&&this._onValueChange(n)}}get max(){return this._max}set max(t){const n=gc(t,this._max);this._max!==n&&this._updateMax(n)}_updateMax(t){const n=this._max;this._max=t,this._isRange?this._updateMaxRange({old:n,new:t}):this._updateMaxNonRange(t),this._onMinMaxOrStepChange()}_updateMaxRange(t){const n=this._getInput(2),r=this._getInput(1),s=n.value,a=r.value;n.max=t.new,r.max=Math.min(t.new,n.value),n.min=r.value,n._updateWidthInactive(),r._updateWidthInactive(),t.new>t.old?this._onTranslateXChangeBySideEffect(r,n):this._onTranslateXChangeBySideEffect(n,r),s!==n.value&&this._onValueChange(n),a!==r.value&&this._onValueChange(r)}_updateMaxNonRange(t){const n=this._getInput(2);if(n){const r=n.value;n.max=t,n._updateThumbUIByValue(),this._updateTrackUI(n),r!==n.value&&this._onValueChange(n)}}get step(){return this._step}set step(t){const n=gc(t,this._step);this._step!==n&&this._updateStep(n)}_updateStep(t){this._step=t,this._isRange?this._updateStepRange():this._updateStepNonRange(),this._onMinMaxOrStepChange()}_updateStepRange(){const t=this._getInput(2),n=this._getInput(1),r=t.value,s=n.value,a=n.value;t.min=this._min,n.max=this._max,t.step=this._step,n.step=this._step,this._platform.SAFARI&&(t.value=t.value,n.value=n.value),t.min=Math.max(this._min,n.value),n.max=Math.min(this._max,t.value),n._updateWidthInactive(),t._updateWidthInactive(),t.value<a?this._onTranslateXChangeBySideEffect(n,t):this._onTranslateXChangeBySideEffect(t,n),r!==t.value&&this._onValueChange(t),s!==n.value&&this._onValueChange(n)}_updateStepNonRange(){const t=this._getInput(2);if(t){const n=t.value;t.step=this._step,this._platform.SAFARI&&(t.value=t.value),t._updateThumbUIByValue(),n!==t.value&&this._onValueChange(t)}}constructor(t,n,r,s,a,l,u){super(s),this._ngZone=t,this._cdr=n,this._platform=r,this._dir=a,this._globalRippleOptions=l,this._disabled=!1,this._discrete=!1,this._showTickMarks=!1,this._min=0,this._max=100,this._step=0,this.displayWith=d=>`${d}`,this._rippleRadius=24,this.startValueIndicatorText="",this.endValueIndicatorText="",this._isRange=!1,this._isRtl=!1,this._hasViewInitialized=!1,this._tickMarkTrackWidth=0,this._hasAnimation=!1,this._resizeTimer=null,this._knobRadius=8,this._thumbsOverlap=!1,this._noopAnimations="NoopAnimations"===u,this._dirChangeSubscription=this._dir.change.subscribe(()=>this._onDirChange()),this._isRtl="rtl"===this._dir.value}ngAfterViewInit(){this._platform.isBrowser&&this._updateDimensions();const t=this._getInput(2),n=this._getInput(1);this._isRange=!!t&&!!n,this._cdr.detectChanges();const r=this._getThumb(2);this._rippleRadius=r._ripple.radius,this._inputPadding=this._rippleRadius-this._knobRadius,this._inputOffset=this._knobRadius,this._isRange?this._initUIRange(t,n):this._initUINonRange(t),this._updateTrackUI(t),this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._observeHostResize(),this._cdr.detectChanges()}_initUINonRange(t){t.initProps(),t.initUI(),this._updateValueIndicatorUI(t),this._hasViewInitialized=!0,t._updateThumbUIByValue()}_initUIRange(t,n){t.initProps(),t.initUI(),n.initProps(),n.initUI(),t._updateMinMax(),n._updateMinMax(),t._updateStaticStyles(),n._updateStaticStyles(),this._updateValueIndicatorUIs(),this._hasViewInitialized=!0,t._updateThumbUIByValue(),n._updateThumbUIByValue()}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._resizeObserver?.disconnect(),this._resizeObserver=null}_onDirChange(){this._isRtl="rtl"===this._dir.value,this._isRange?this._onDirChangeRange():this._onDirChangeNonRange(),this._updateTickMarkUI()}_onDirChangeRange(){const t=this._getInput(2),n=this._getInput(1);t._setIsLeftThumb(),n._setIsLeftThumb(),t.translateX=t._calcTranslateXByValue(),n.translateX=n._calcTranslateXByValue(),t._updateStaticStyles(),n._updateStaticStyles(),t._updateWidthInactive(),n._updateWidthInactive(),t._updateThumbUIByValue(),n._updateThumbUIByValue()}_onDirChangeNonRange(){this._getInput(2)._updateThumbUIByValue()}_observeHostResize(){typeof ResizeObserver>"u"||!ResizeObserver||this._ngZone.runOutsideAngular(()=>{this._resizeObserver=new ResizeObserver(()=>{this._isActive()||(this._resizeTimer&&clearTimeout(this._resizeTimer),this._onResize())}),this._resizeObserver.observe(this._elementRef.nativeElement)})}_isActive(){return this._getThumb(1)._isActive||this._getThumb(2)._isActive}_getValue(t=2){const n=this._getInput(t);return n?n.value:this.min}_skipUpdate(){return!(!this._getInput(1)?._skipUIUpdate&&!this._getInput(2)?._skipUIUpdate)}_updateDimensions(){this._cachedWidth=this._elementRef.nativeElement.offsetWidth,this._cachedLeft=this._elementRef.nativeElement.getBoundingClientRect().left}_setTrackActiveStyles(t){const n=this._trackActive.nativeElement.style,r=t.left!==n.left&&t.right!==n.right;n.left=t.left,n.right=t.right,n.transformOrigin=t.transformOrigin,r?(this._elementRef.nativeElement.classList.add("mat-mdc-slider-disable-track-animation"),this._ngZone.onStable.pipe(Nc(1)).subscribe(()=>{this._elementRef.nativeElement.classList.remove("mat-mdc-slider-disable-track-animation"),n.transform=t.transform})):n.transform=t.transform}_calcTickMarkTransform(t){return`translateX(${t*(this._tickMarkTrackWidth/(this._tickMarks.length-1))}px`}_onTranslateXChange(t){this._hasViewInitialized&&(this._updateThumbUI(t),this._updateTrackUI(t),this._updateOverlappingThumbUI(t))}_onTranslateXChangeBySideEffect(t,n){this._hasViewInitialized&&(t._updateThumbUIByValue(),n._updateThumbUIByValue())}_onValueChange(t){this._hasViewInitialized&&(this._updateValueIndicatorUI(t),this._updateTickMarkUI(),this._cdr.detectChanges())}_onMinMaxOrStepChange(){this._hasViewInitialized&&(this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.markForCheck())}_onResize(){if(this._hasViewInitialized){if(this._updateDimensions(),this._isRange){const t=this._getInput(2),n=this._getInput(1);t._updateThumbUIByValue(),n._updateThumbUIByValue(),t._updateStaticStyles(),n._updateStaticStyles(),t._updateMinMax(),n._updateMinMax(),t._updateWidthInactive(),n._updateWidthInactive()}else{const t=this._getInput(2);t&&t._updateThumbUIByValue()}this._updateTickMarkUI(),this._updateTickMarkTrackUI(),this._cdr.detectChanges()}}_areThumbsOverlapping(){const t=this._getInput(1),n=this._getInput(2);return!(!t||!n)&&n.translateX-t.translateX<20}_updateOverlappingThumbClassNames(t){const n=t.getSibling(),r=this._getThumb(t.thumbPosition);this._getThumb(n.thumbPosition)._hostElement.classList.remove("mdc-slider__thumb--top"),r._hostElement.classList.toggle("mdc-slider__thumb--top",this._thumbsOverlap)}_updateOverlappingThumbUI(t){!this._isRange||this._skipUpdate()||this._thumbsOverlap!==this._areThumbsOverlapping()&&(this._thumbsOverlap=!this._thumbsOverlap,this._updateOverlappingThumbClassNames(t))}_updateThumbUI(t){this._skipUpdate()||(this._getThumb(2===t.thumbPosition?2:1)._hostElement.style.transform=`translateX(${t.translateX}px)`)}_updateValueIndicatorUI(t){if(this._skipUpdate())return;const n=this.displayWith(t.value);if(this._hasViewInitialized?t._valuetext=n:t._hostElement.setAttribute("aria-valuetext",n),this.discrete){1===t.thumbPosition?this.startValueIndicatorText=n:this.endValueIndicatorText=n;const r=this._getThumb(t.thumbPosition);n.length<3?r._hostElement.classList.add("mdc-slider__thumb--short-value"):r._hostElement.classList.remove("mdc-slider__thumb--short-value")}}_updateValueIndicatorUIs(){const t=this._getInput(2),n=this._getInput(1);t&&this._updateValueIndicatorUI(t),n&&this._updateValueIndicatorUI(n)}_updateTickMarkTrackUI(){if(!this.showTickMarks||this._skipUpdate())return;const t=this._step&&this._step>0?this._step:1,r=(Math.floor(this.max/t)*t-this.min)/(this.max-this.min);this._tickMarkTrackWidth=this._cachedWidth*r-6}_updateTrackUI(t){this._skipUpdate()||(this._isRange?this._updateTrackUIRange(t):this._updateTrackUINonRange(t))}_updateTrackUIRange(t){const n=t.getSibling();if(!n||!this._cachedWidth)return;const r=Math.abs(n.translateX-t.translateX)/this._cachedWidth;this._setTrackActiveStyles(t._isLeftThumb&&this._cachedWidth?{left:"auto",right:this._cachedWidth-n.translateX+"px",transformOrigin:"right",transform:`scaleX(${r})`}:{left:`${n.translateX}px`,right:"auto",transformOrigin:"left",transform:`scaleX(${r})`})}_updateTrackUINonRange(t){this._setTrackActiveStyles(this._isRtl?{left:"auto",right:"0px",transformOrigin:"right",transform:`scaleX(${1-t.fillPercentage})`}:{left:"0px",right:"auto",transformOrigin:"left",transform:`scaleX(${t.fillPercentage})`})}_updateTickMarkUI(){if(!this.showTickMarks||void 0===this.step||void 0===this.min||void 0===this.max)return;const t=this.step>0?this.step:1;this._isRange?this._updateTickMarkUIRange(t):this._updateTickMarkUINonRange(t),this._isRtl&&this._tickMarks.reverse()}_updateTickMarkUINonRange(t){const n=this._getValue();let r=Math.max(Math.round((n-this.min)/t),0),s=Math.max(Math.round((this.max-n)/t),0);this._isRtl?r++:s++,this._tickMarks=Array(r).fill(0).concat(Array(s).fill(1))}_updateTickMarkUIRange(t){const n=this._getValue(),r=this._getValue(1),s=Math.max(Math.floor((r-this.min)/t),0),a=Math.max(Math.floor((n-r)/t)+1,0),l=Math.max(Math.floor((this.max-n)/t),0);this._tickMarks=Array(s).fill(1).concat(Array(a).fill(0),Array(l).fill(1))}_getInput(t){return 2===t&&this._input?this._input:this._inputs?.length?1===t?this._inputs.first:this._inputs.last:void 0}_getThumb(t){return 2===t?this._thumbs?.last:this._thumbs?.first}_setTransition(t){this._hasAnimation=t&&!this._noopAnimations,this._elementRef.nativeElement.classList.toggle("mat-mdc-slider-with-animation",this._hasAnimation)}}return i.\u0275fac=function(t){return new(t||i)(Et(po),Et(zl),Et(ju),Et(Bs),Et(vd,8),Et(az,8),Et(dh,8))},i.\u0275cmp=Kr({type:i,selectors:[["mat-slider"]],contentQueries:function(t,n,r){if(1&t&&(md(r,CV,5),md(r,SV,4)),2&t){let s;jo(s=$o())&&(n._input=s.first),jo(s=$o())&&(n._inputs=s)}},viewQuery:function(t,n){if(1&t&&(Ml(Fde,5),Ml(TV,5)),2&t){let r;jo(r=$o())&&(n._trackActive=r.first),jo(r=$o())&&(n._thumbs=r)}},hostAttrs:[1,"mat-mdc-slider","mdc-slider"],hostVars:10,hostBindings:function(t,n){2&t&&Ia("mdc-slider--range",n._isRange)("mdc-slider--disabled",n.disabled)("mdc-slider--discrete",n.discrete)("mdc-slider--tick-marks",n.showTickMarks)("_mat-animation-noopable",n._noopAnimations)},inputs:{color:"color",disableRipple:"disableRipple",disabled:"disabled",discrete:"discrete",showTickMarks:"showTickMarks",min:"min",max:"max",step:"step",displayWith:"displayWith"},exportAs:["matSlider"],features:[ko([{provide:P4,useExisting:i}]),bs],ngContentSelectors:Nde,decls:9,vars:5,consts:[[1,"mdc-slider__track"],[1,"mdc-slider__track--inactive"],[1,"mdc-slider__track--active"],[1,"mdc-slider__track--active_fill"],["trackActive",""],["class","mdc-slider__tick-marks",4,"ngIf"],[3,"discrete","thumbPosition","valueIndicatorText",4,"ngIf"],[3,"discrete","thumbPosition","valueIndicatorText"],[1,"mdc-slider__tick-marks"],["tickMarkContainer",""],[4,"ngIf"],[3,"class","transform",4,"ngFor","ngForOf"]],template:function(t,n){1&t&&(ch(),ru(0),tn(1,"div",0),kr(2,"div",1),tn(3,"div",2),kr(4,"div",3,4),on(),ns(6,Ode,3,1,"div",5),on(),ns(7,Lde,1,3,"mat-slider-visual-thumb",6),kr(8,"mat-slider-visual-thumb",7)),2&t&&(Qn(6),Un("ngIf",n.showTickMarks),Qn(1),Un("ngIf",n._isRange),Qn(1),Un("discrete",n.discrete)("thumbPosition",2)("valueIndicatorText",n.endValueIndicatorText))},dependencies:[sp,ph,Ude],styles:['.mdc-slider{cursor:pointer;height:48px;margin:0 24px;position:relative;touch-action:pan-y}.mdc-slider .mdc-slider__track{position:absolute;top:50%;transform:translateY(-50%);width:100%}.mdc-slider .mdc-slider__track--active,.mdc-slider .mdc-slider__track--inactive{display:flex;height:100%;position:absolute;width:100%}.mdc-slider .mdc-slider__track--active{overflow:hidden}.mdc-slider .mdc-slider__track--active_fill{border-top-style:solid;box-sizing:border-box;height:100%;width:100%;position:relative;-webkit-transform-origin:left;transform-origin:left}[dir=rtl] .mdc-slider .mdc-slider__track--active_fill,.mdc-slider .mdc-slider__track--active_fill[dir=rtl]{-webkit-transform-origin:right;transform-origin:right}.mdc-slider .mdc-slider__track--inactive{left:0;top:0}.mdc-slider .mdc-slider__track--inactive::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__track--inactive::before{border-color:CanvasText}}.mdc-slider .mdc-slider__value-indicator-container{bottom:44px;left:var(--slider-value-indicator-container-left, 50%);pointer-events:none;position:absolute;right:var(--slider-value-indicator-container-right);transform:var(--slider-value-indicator-container-transform, translateX(-50%))}.mdc-slider .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0.4, 0, 1, 1);align-items:center;border-radius:4px;display:flex;height:32px;padding:0 12px;transform:scale(0);transform-origin:bottom}.mdc-slider .mdc-slider__value-indicator::before{border-left:6px solid rgba(0,0,0,0);border-right:6px solid rgba(0,0,0,0);border-top:6px solid;bottom:-5px;content:"";height:0;left:var(--slider-value-indicator-caret-left, 50%);position:absolute;right:var(--slider-value-indicator-caret-right);transform:var(--slider-value-indicator-caret-transform, translateX(-50%));width:0}.mdc-slider .mdc-slider__value-indicator::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-slider .mdc-slider__value-indicator::after{border-color:CanvasText}}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator-container{pointer-events:auto}.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:transform 100ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:scale(1)}@media(prefers-reduced-motion){.mdc-slider .mdc-slider__value-indicator,.mdc-slider .mdc-slider__thumb--with-indicator .mdc-slider__value-indicator{transition:none}}.mdc-slider .mdc-slider__thumb{display:flex;left:-24px;outline:none;position:absolute;user-select:none;height:48px;width:48px}.mdc-slider .mdc-slider__thumb--top{z-index:1}.mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-style:solid;border-width:1px;box-sizing:content-box}.mdc-slider .mdc-slider__thumb-knob{box-sizing:border-box;left:50%;position:absolute;top:50%;transform:translate(-50%, -50%)}.mdc-slider .mdc-slider__tick-marks{align-items:center;box-sizing:border-box;display:flex;height:100%;justify-content:space-between;padding:0 1px;position:absolute;width:100%}.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:transform 80ms ease}@media(prefers-reduced-motion){.mdc-slider--discrete .mdc-slider__thumb,.mdc-slider--discrete .mdc-slider__track--active_fill{transition:none}}.mdc-slider--disabled{cursor:auto}.mdc-slider--disabled .mdc-slider__thumb{pointer-events:none}.mdc-slider__input{cursor:pointer;left:0;margin:0;height:100%;opacity:0;pointer-events:none;position:absolute;top:0;width:100%}.mat-mdc-slider{display:inline-block;box-sizing:border-box;outline:none;vertical-align:middle;margin-left:8px;margin-right:8px;width:auto;min-width:112px;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-slider .mdc-slider__thumb-knob{background-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb-knob{background-color:var(--mdc-slider-disabled-handle-color, var(--mdc-theme-on-surface, #000));border-color:var(--mdc-slider-disabled-handle-color, var(--mdc-theme-on-surface, #000))}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider.mdc-slider--disabled .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb::before,.mat-mdc-slider .mdc-slider__thumb::after{background-color:var(--mdc-slider-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb:hover::before,.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-surface--hover::before{opacity:var(--mdc-ripple-hover-opacity, 0.04)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded--background-focused::before,.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):focus::before{transition-duration:75ms;opacity:var(--mdc-ripple-focus-opacity, 0.12)}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded)::after{transition:opacity 150ms linear}.mat-mdc-slider .mdc-slider__thumb:not(.mdc-ripple-upgraded):active::after{transition-duration:75ms;opacity:var(--mdc-ripple-press-opacity, 0.12)}.mat-mdc-slider .mdc-slider__thumb.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-ripple-press-opacity, 0.12)}.mat-mdc-slider .mdc-slider__track--active_fill{border-color:var(--mdc-slider-active-track-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--active_fill{border-color:var(--mdc-slider-disabled-active-track-color, var(--mdc-theme-on-surface, #000))}.mat-mdc-slider .mdc-slider__track--inactive{background-color:var(--mdc-slider-inactive-track-color, var(--mdc-theme-primary, #6200ee));opacity:.24}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__track--inactive{background-color:var(--mdc-slider-disabled-inactive-track-color, var(--mdc-theme-on-surface, #000));opacity:.24}.mat-mdc-slider .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mdc-theme-on-primary, #fff));opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.6)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--active{background-color:var(--mdc-slider-with-tick-marks-active-container-color, var(--mdc-theme-on-primary, #fff));opacity:var(--mdc-slider-with-tick-marks-active-container-opacity, 0.6)}.mat-mdc-slider .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-inactive-container-color, var(--mdc-theme-primary, #6200ee));opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.6)}.mat-mdc-slider.mdc-slider--disabled .mdc-slider__tick-mark--inactive{background-color:var(--mdc-slider-with-tick-marks-disabled-container-color, var(--mdc-theme-on-surface, #000));opacity:var(--mdc-slider-with-tick-marks-inactive-container-opacity, 0.6)}.mat-mdc-slider .mdc-slider__value-indicator{background-color:var(--mdc-slider-label-container-color, #666666);opacity:1}.mat-mdc-slider .mdc-slider__value-indicator::before{border-top-color:var(--mdc-slider-label-container-color, #666666)}.mat-mdc-slider .mdc-slider__value-indicator{color:var(--mdc-slider-label-label-text-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slider .mdc-slider__track{height:var(--mdc-slider-inactive-track-height, 4px)}.mat-mdc-slider .mdc-slider__track--active{height:var(--mdc-slider-active-track-height, 6px);top:calc((var(--mdc-slider-inactive-track-height, 4px) - var(--mdc-slider-active-track-height, 6px)) / 2)}.mat-mdc-slider .mdc-slider__track--active_fill{border-top-width:var(--mdc-slider-active-track-height, 6px)}.mat-mdc-slider .mdc-slider__track--inactive{height:var(--mdc-slider-inactive-track-height, 4px)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{height:var(--mdc-slider-with-tick-marks-container-size, 2px);width:var(--mdc-slider-with-tick-marks-container-size, 2px)}.mat-mdc-slider.mdc-slider--disabled{opacity:0.38}.mat-mdc-slider .mdc-slider__value-indicator-text{letter-spacing:var(--mdc-slider-label-label-text-tracking, 0.0071428571em);font-size:var(--mdc-slider-label-label-text-size, 0.875rem);font-family:var(--mdc-slider-label-label-text-font, Roboto, sans-serif);font-weight:var(--mdc-slider-label-label-text-weight, 500);line-height:var(--mdc-slider-label-label-text-line-height, 1.375rem)}.mat-mdc-slider .mdc-slider__track--active{border-radius:var(--mdc-slider-active-track-shape, 9999px)}.mat-mdc-slider .mdc-slider__track--inactive{border-radius:var(--mdc-slider-inactive-track-shape, 9999px)}.mat-mdc-slider .mdc-slider__thumb-knob{border-radius:var(--mdc-slider-handle-shape, 50%);width:var(--mdc-slider-handle-width, 20px);height:var(--mdc-slider-handle-height, 20px);border-style:solid;border-width:calc(var(--mdc-slider-handle-height, 20px) / 2) calc(var(--mdc-slider-handle-width, 20px) / 2)}.mat-mdc-slider .mdc-slider__tick-mark--active,.mat-mdc-slider .mdc-slider__tick-mark--inactive{border-radius:var(--mdc-slider-with-tick-marks-container-shape, 50%)}.mat-mdc-slider .mdc-slider__thumb-knob{box-shadow:var(--mdc-slider-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb-knob{background-color:var(--mdc-slider-hover-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-hover-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:hover .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb-knob{background-color:var(--mdc-slider-focus-handle-color, var(--mdc-theme-primary, #6200ee));border-color:var(--mdc-slider-focus-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--focused .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb:not(:disabled):active .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:#fff}.mat-mdc-slider .mdc-slider__thumb--top .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb:hover .mdc-slider__thumb-knob,.mat-mdc-slider .mdc-slider__thumb--top.mdc-slider__thumb--focused .mdc-slider__thumb-knob{border-color:var(--mdc-slider-with-overlap-handle-outline-color, #fff);border-width:var(--mdc-slider-with-overlap-handle-outline-width, 1px)}.mat-mdc-slider .mdc-slider__input{box-sizing:content-box;pointer-events:auto}.mat-mdc-slider .mdc-slider__input.mat-mdc-slider-input-no-pointer-events{pointer-events:none}.mat-mdc-slider .mdc-slider__input.mat-slider__right-input{left:auto;right:0}.mat-mdc-slider .mdc-slider__thumb,.mat-mdc-slider .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mat-mdc-slider-with-animation.mat-mdc-slider-disable-track-animation .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider.mdc-slider--discrete .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__thumb,.mat-mdc-slider.mat-mdc-slider-with-animation .mdc-slider__track--active_fill{transition-duration:80ms}.mat-mdc-slider.mat-mdc-slider-with-animation.mat-mdc-slider-disable-track-animation .mdc-slider__track--active_fill{transition-duration:0ms}.mat-mdc-slider .mdc-slider__track,.mat-mdc-slider .mdc-slider__thumb{pointer-events:none}.mat-mdc-slider .mdc-slider__value-indicator{opacity:var(--mat-mdc-slider-value-indicator-opacity, 1)}.mat-mdc-slider .mat-ripple .mat-ripple-element{background-color:var(--mat-mdc-slider-ripple-color, transparent)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-hover-ripple{background-color:var(--mat-mdc-slider-hover-ripple-color, transparent)}.mat-mdc-slider .mat-ripple .mat-mdc-slider-focus-ripple,.mat-mdc-slider .mat-ripple .mat-mdc-slider-active-ripple{background-color:var(--mat-mdc-slider-focus-ripple-color, transparent)}.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__thumb,.mat-mdc-slider._mat-animation-noopable.mdc-slider--discrete .mdc-slider__track--active_fill,.mat-mdc-slider._mat-animation-noopable .mdc-slider__value-indicator{transition:none}.mat-mdc-slider .mat-mdc-focus-indicator::before{border-radius:50%}.mdc-slider__thumb--focused .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0}),i})();const Vde={provide:Pf,useExisting:cr(()=>F4),multi:!0};let F4=(()=>{class i{get value(){return gc(this._hostElement.value)}set value(t){const n=gc(t).toString();this._hasSetInitialValue?this._isActive||(this._hostElement.value=n,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges()):this._initialValue=n}get translateX(){return this._slider.min>=this._slider.max?(this._translateX=0,this._translateX):(void 0===this._translateX&&(this._translateX=this._calcTranslateXByValue()),this._translateX)}set translateX(t){this._translateX=t}get min(){return gc(this._hostElement.min)}set min(t){this._hostElement.min=gc(t).toString(),this._cdr.detectChanges()}get max(){return gc(this._hostElement.max)}set max(t){this._hostElement.max=gc(t).toString(),this._cdr.detectChanges()}get step(){return gc(this._hostElement.step)}set step(t){this._hostElement.step=gc(t).toString(),this._cdr.detectChanges()}get disabled(){return ma(this._hostElement.disabled)}set disabled(t){this._hostElement.disabled=ma(t),this._cdr.detectChanges(),this._slider.disabled!==this.disabled&&(this._slider.disabled=this.disabled)}get percentage(){return this._slider.min>=this._slider.max?this._slider._isRtl?1:0:(this.value-this._slider.min)/(this._slider.max-this._slider.min)}get fillPercentage(){return this._slider._cachedWidth?0===this._translateX?0:this.translateX/this._slider._cachedWidth:this._slider._isRtl?1:0}_setIsFocused(t){this._isFocused=t}constructor(t,n,r,s){this._ngZone=t,this._elementRef=n,this._cdr=r,this._slider=s,this.valueChange=new ao,this.dragStart=new ao,this.dragEnd=new ao,this.thumbPosition=2,this._knobRadius=8,this._isActive=!1,this._isFocused=!1,this._hasSetInitialValue=!1,this._destroyed=new D,this._skipUIUpdate=!1,this._onChangeFn=()=>{},this._onTouchedFn=()=>{},this._hostElement=n.nativeElement,this._ngZone.runOutsideAngular(()=>{this._hostElement.addEventListener("pointerdown",this._onPointerDown.bind(this)),this._hostElement.addEventListener("pointermove",this._onPointerMove.bind(this)),this._hostElement.addEventListener("pointerup",this._onPointerUp.bind(this))})}ngOnDestroy(){this._hostElement.removeEventListener("pointerdown",this._onPointerDown),this._hostElement.removeEventListener("pointermove",this._onPointerMove),this._hostElement.removeEventListener("pointerup",this._onPointerUp),this._destroyed.next(),this._destroyed.complete(),this.dragStart.complete(),this.dragEnd.complete()}initProps(){this._updateWidthInactive(),this.disabled!==this._slider.disabled&&(this._slider.disabled=!0),this.step=this._slider.step,this.min=this._slider.min,this.max=this._slider.max,this._initValue()}initUI(){this._updateThumbUIByValue()}_initValue(){this._hasSetInitialValue=!0,void 0===this._initialValue?this.value=this._getDefaultValue():(this._hostElement.value=this._initialValue,this._updateThumbUIByValue(),this._slider._onValueChange(this),this._cdr.detectChanges())}_getDefaultValue(){return this.min}_onBlur(){this._setIsFocused(!1),this._onTouchedFn()}_onFocus(){this._setIsFocused(!0)}_onChange(){this.valueChange.emit(this.value),this._isActive&&this._updateThumbUIByValue({withAnimation:!0})}_onInput(){this._onChangeFn(this.value),(this._slider.step||!this._isActive)&&this._updateThumbUIByValue({withAnimation:!0}),this._slider._onValueChange(this)}_onNgControlValueChange(){(!this._isActive||!this._isFocused)&&(this._slider._onValueChange(this),this._updateThumbUIByValue()),this._slider.disabled=this._formControl.disabled}_onPointerDown(t){this.disabled||0!==t.button||(this._isActive=!0,this._setIsFocused(!0),this._updateWidthActive(),this._slider._updateDimensions(),this._slider.step||this._updateThumbUIByPointerEvent(t,{withAnimation:!0}),this.disabled||(this._handleValueCorrection(t),this.dragStart.emit({source:this,parent:this._slider,value:this.value})))}_handleValueCorrection(t){this._skipUIUpdate=!0,setTimeout(()=>{this._skipUIUpdate=!1,this._fixValue(t)},0)}_fixValue(t){const n=t.clientX-this._slider._cachedLeft,r=this._slider._cachedWidth,s=0===this._slider.step?1:this._slider.step,a=Math.floor((this._slider.max-this._slider.min)/s),d=Math.round((this._slider._isRtl?1-n/r:n/r)*a)/a*(this._slider.max-this._slider.min)+this._slider.min,A=Math.round(d/s)*s;if(A===this.value)return this._slider._onValueChange(this),void(this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(t,{withAnimation:this._slider._hasAnimation}));this.value=A,this.valueChange.emit(this.value),this._onChangeFn(this.value),this._slider._onValueChange(this),this._slider.step>0?this._updateThumbUIByValue():this._updateThumbUIByPointerEvent(t,{withAnimation:this._slider._hasAnimation})}_onPointerMove(t){!this._slider.step&&this._isActive&&this._updateThumbUIByPointerEvent(t)}_onPointerUp(){this._isActive&&(this._isActive=!1,this.dragEnd.emit({source:this,parent:this._slider,value:this.value}),setTimeout(()=>this._updateWidthInactive()))}_clamp(t){return Math.max(Math.min(t,this._slider._cachedWidth),0)}_calcTranslateXByValue(){return this._slider._isRtl?(1-this.percentage)*this._slider._cachedWidth:this.percentage*this._slider._cachedWidth}_calcTranslateXByPointerEvent(t){return t.clientX-this._slider._cachedLeft}_updateWidthActive(){this._hostElement.style.padding=`0 ${this._slider._inputPadding}px`,this._hostElement.style.width=`calc(100% + ${this._slider._inputPadding}px)`}_updateWidthInactive(){this._hostElement.style.padding="0px",this._hostElement.style.width="calc(100% + 48px)",this._hostElement.style.left="-24px"}_updateThumbUIByValue(t){this.translateX=this._clamp(this._calcTranslateXByValue()),this._updateThumbUI(t)}_updateThumbUIByPointerEvent(t,n){this.translateX=this._clamp(this._calcTranslateXByPointerEvent(t)),this._updateThumbUI(n)}_updateThumbUI(t){this._slider._setTransition(!!t?.withAnimation),this._slider._onTranslateXChange(this)}writeValue(t){this.value=t}registerOnChange(t){this._onChangeFn=t}registerOnTouched(t){this._onTouchedFn=t}setDisabledState(t){this.disabled=t}focus(){this._hostElement.focus()}blur(){this._hostElement.blur()}}return i.\u0275fac=function(t){return new(t||i)(Et(po),Et(Bs),Et(zl),Et(P4))},i.\u0275dir=gr({type:i,selectors:[["input","matSliderThumb",""]],hostAttrs:["type","range",1,"mdc-slider__input"],hostVars:1,hostBindings:function(t,n){1&t&&ki("change",function(){return n._onChange()})("input",function(){return n._onInput()})("blur",function(){return n._onBlur()})("focus",function(){return n._onFocus()}),2&t&&ja("aria-valuetext",n._valuetext)},inputs:{value:"value"},outputs:{valueChange:"valueChange",dragStart:"dragStart",dragEnd:"dragEnd"},exportAs:["matSliderThumb"],features:[ko([Vde,{provide:CV,useExisting:i}])]}),i})(),Qde=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[Eu,K1,xb]}),i})(),BR=(()=>{class i{eventDisplay;clippingEnabled;startClippingAngle;openingClippingAngle;constructor(t){this.eventDisplay=t;const n=this.eventDisplay.getStateManager();n.clippingEnabled.onUpdate(r=>this.clippingEnabled=r),n.startClippingAngle.onUpdate(r=>this.startClippingAngle=r),n.openingClippingAngle.onUpdate(r=>this.openingClippingAngle=r)}changeStartClippingAngle(t){this.eventDisplay.getUIManager().rotateStartAngleClipping(t)}changeOpeningClippingAngle(t){this.eventDisplay.getUIManager().rotateOpeningAngleClipping(t)}toggleClipping(t){const n=t.checked;this.eventDisplay.getUIManager().setClipping(n),this.clippingEnabled=n}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-object-clipping"]],decls:17,vars:5,consts:[[1,"mat-menu"],["menu",""],["mat-menu-item","",3,"click"],[3,"checked","click","change"],["clippingCheckbox",""],["mat-menu-item","",1,"slider-btn",3,"focus"],["min","0","max","360","step","1","thumbLabel",""],["matSliderThumb","",3,"value","valueChange"],["startingAngleSlider",""],["openingAngleSlider",""],["tooltip","Geometry clipping","icon","clipping",3,"matMenuTriggerFor","active"]],template:function(n,r){if(1&n){const s=Ba();tn(0,"mat-menu",0,1)(2,"button",2),ki("click",function(l){ks(s);const u=Fl(4);return l.stopPropagation(),Ts(u._inputElement.nativeElement.click())}),tn(3,"mat-checkbox",3,4),ki("click",function(l){return l.stopPropagation()})("change",function(l){return r.toggleClipping(l)}),dr(5," Clipping "),on()(),tn(6,"button",5),ki("focus",function(){return ks(s),Ts(Fl(9).focus())}),tn(7,"mat-slider",6)(8,"input",7,8),ki("valueChange",function(l){return r.changeStartClippingAngle(l)}),on()(),dr(10," Start Angle "),on(),tn(11,"button",5),ki("focus",function(){return ks(s),Ts(Fl(14).focus())}),tn(12,"mat-slider",6)(13,"input",7,9),ki("valueChange",function(l){return r.changeOpeningClippingAngle(l)}),on()(),dr(15," Opening Angle "),on()(),kr(16,"app-menu-toggle",10)}if(2&n){const s=Fl(1);Qn(3),Un("checked",r.clippingEnabled),Qn(5),Un("value",r.startClippingAngle),Qn(5),Un("value",r.openingClippingAngle),Qn(3),Un("matMenuTriggerFor",s)("active",r.clippingEnabled)}},dependencies:[$C,Cy,XC,EV,F4,t2,Ec],styles:[".slider-btn[_ngcontent-%COMP%]{overflow:visible}mat-slider[_ngcontent-%COMP%]{margin-left:.75rem;margin-right:.75rem}"]})}return i})(),R4=(()=>{class i{eventDisplay;darkTheme=!1;constructor(t){this.eventDisplay=t}ngOnInit(){this.darkTheme=this.eventDisplay.getUIManager().getDarkTheme()}setDarkTheme(){this.darkTheme=!this.darkTheme,this.eventDisplay.getUIManager().setDarkTheme(this.darkTheme)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-dark-theme"]],decls:1,vars:1,consts:[["tooltip","Dark theme","icon","dark",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.setDarkTheme()}),on()),2&n&&Un("active",r.darkTheme)},dependencies:[Ec]})}return i})(),k4=(()=>{class i{eventDisplay;autoRotate=!1;constructor(t){this.eventDisplay=t}toggleAutoRotate(){this.autoRotate=!this.autoRotate,this.eventDisplay.getUIManager().setAutoRotate(this.autoRotate)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-auto-rotate"]],decls:1,vars:1,consts:[["tooltip","Auto rotate","icon","rotate",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.toggleAutoRotate()}),on()),2&n&&Un("active",r.autoRotate)},dependencies:[Ec]})}return i})();function Wde(i,e){if(1&i&&(xl(),tn(0,"svg",8),kr(1,"use"),on()),2&i){const t=Or().$implicit;Qn(1),Hg("href","assets/icons/",t.icon,".svg#",t.icon,"")}}function jde(i,e){if(1&i){const t=Ba();tn(0,"button",1),ki("click",function(r){const a=ks(t).$implicit;return Ts(Or().displayView(r,a))}),ns(1,Wde,2,2,"svg",7),dr(2),on()}if(2&i){const t=e.$implicit;Qn(1),Un("ngIf",t.icon),Qn(1),wl(" ",t.name," ")}}let IR=(()=>{class i{eventDisplay;views;constructor(t){this.eventDisplay=t}ngOnInit(){this.views=this.eventDisplay.getUIManager().getPresetViews()}displayView(t,n){t.stopPropagation(),this.eventDisplay.getUIManager().displayView(n)}setAxis(t){const n=t.checked;this.eventDisplay.getUIManager().setShowAxis(n)}setGrid(t){const n=t.checked;this.eventDisplay.getUIManager().setShowGrid(n)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-view-options"]],decls:12,vars:3,consts:[["viewOptions",""],["mat-menu-item","",3,"click"],[3,"click","change"],["showGridCheckbox",""],["showAxisCheckbox",""],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["tooltip","View options","icon","views",3,"matMenuTriggerFor","active"],["class","view-icon",4,"ngIf"],[1,"view-icon"]],template:function(n,r){if(1&n){const s=Ba();tn(0,"mat-menu",null,0)(2,"button",1),ki("click",function(l){ks(s);const u=Fl(4);return l.stopPropagation(),Ts(u._inputElement.nativeElement.click())}),tn(3,"mat-checkbox",2,3),ki("click",function(l){return l.stopPropagation()})("change",function(l){return r.setGrid(l)}),dr(5,"Show Grid "),on()(),tn(6,"button",1),ki("click",function(l){ks(s);const u=Fl(8);return l.stopPropagation(),Ts(u._inputElement.nativeElement.click())}),tn(7,"mat-checkbox",2,4),ki("click",function(l){return l.stopPropagation()})("change",function(l){return r.setAxis(l)}),dr(9,"Show Axis "),on()(),ns(10,jde,3,2,"button",5),on(),kr(11,"app-menu-toggle",6)}if(2&n){const s=Fl(1);Qn(10),Un("ngForOf",r.views),Qn(1),Un("matMenuTriggerFor",s)("active",!1)}},dependencies:[sp,ph,$C,Cy,XC,t2,Ec],styles:[".view-icon[_ngcontent-%COMP%]{width:1.2rem;height:1.2rem;margin-right:.5rem}"]})}return i})();function Xde(i,e){1&i&&(tn(0,"li",2),dr(1," No actions. "),on())}function Kde(i,e){if(1&i&&(tn(0,"li",2),dr(1),on()),2&i){const t=e.$implicit;Qn(1),wl(" ",t," ")}}let DV=(()=>{class i{eventDisplay;showInfoPanel;actionsList=[];version="2.14.1";constructor(t){this.eventDisplay=t}ngOnInit(){this.actionsList=this.eventDisplay.getInfoLogger().getInfoLoggerList()}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-info-panel-overlay"]],inputs:{showInfoPanel:"showInfoPanel"},decls:6,vars:5,consts:[["overlayTitle","Info Panel","icon","info-panel",3,"resizable","active"],[1,"list-group","list-group-flush"],[1,"list-group-item"],["class","list-group-item",4,"ngIf"],["class","list-group-item",4,"ngFor","ngForOf"]],template:function(n,r){1&n&&(tn(0,"app-overlay",0)(1,"ul",1)(2,"li",2),dr(3),on(),ns(4,Xde,2,0,"li",3),ns(5,Kde,2,1,"li",4),on()()),2&n&&(Un("resizable",!0)("active",r.showInfoPanel),Qn(3),wl(" Phoenix Version: ",r.version," "),Qn(1),Un("ngIf",0===r.actionsList.length),Qn(1),Un("ngForOf",r.actionsList))},dependencies:[sp,ph,sS],styles:[".list-group-item[_ngcontent-%COMP%]{font-size:.8rem;padding:.5rem 1rem}"]})}return i})(),PR=(()=>{class i{overlay;showInfoPanel=!1;overlayWindow;constructor(t){this.overlay=t}ngOnInit(){const t=this.overlay.create(),n=new My(DV);this.overlayWindow=t.attach(n),this.overlayWindow.instance.showInfoPanel=this.showInfoPanel}ngOnDestroy(){this.overlayWindow.destroy()}toggleOverlay(){this.showInfoPanel=!this.showInfoPanel,this.overlayWindow.instance.showInfoPanel=this.showInfoPanel}static \u0275fac=function(n){return new(n||i)(Et(dp))};static \u0275cmp=Kr({type:i,selectors:[["app-info-panel"]],decls:1,vars:1,consts:[["tooltip","Info panel","icon","info-panel",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.toggleOverlay()}),on()),2&n&&Un("active",r.showInfoPanel)},dependencies:[Ec]})}return i})(),O4=(()=>{class i{eventDisplay;orthographicView=!1;constructor(t){this.eventDisplay=t}switchMainView(){this.orthographicView=!this.orthographicView,this.eventDisplay.getUIManager().toggleOrthographicView(this.orthographicView)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-main-view-toggle"]],decls:1,vars:2,consts:[[3,"icon","matTooltip","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.switchMainView()}),on()),2&n&&Un("icon",r.orthographicView?"perspective":"orthographic")("matTooltip","Switch to "+(r.orthographicView?"perspective":"orthographic")+" view")},dependencies:[Sb,Ec]})}return i})(),FR=(()=>{class i{eventDisplay;allCameras;zoomFactor=1.1;zoomTimeout;zoomTime=200;constructor(t){this.eventDisplay=t}zoomTo(t){this.zoomTime=this.zoomTime>30?Math.floor(this.zoomTime/1.1):this.zoomTime,this.eventDisplay.zoomTo(t,this.zoomTime),this.zoomTimeout=setTimeout(()=>{this.zoomTo(t)},this.zoomTime)}zoomIn(t){t&&this.zoomTo(1/this.zoomFactor)}zoomOut(t){t&&this.zoomTo(this.zoomFactor)}clearZoom(){this.zoomTime=200,clearTimeout(this.zoomTimeout)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-zoom-controls"]],decls:3,vars:2,consts:[[1,"d-flex"],["tooltip","Zoom out (hold)","icon","zoom-out",3,"active","click","touchstart","mousedown","mouseup","mouseleave","touchend","touchcancel","touchmove"],["tooltip","Zoom in (hold)","icon","zoom-in",3,"active","click","touchstart","mousedown","mouseup","mouseleave","touchend","touchcancel","touchmove"]],template:function(n,r){1&n&&(tn(0,"div",0)(1,"app-menu-toggle",1),ki("click",function(){return r.zoomOut(!0),r.clearZoom()})("touchstart",function(){return r.zoomOut(!0)})("mousedown",function(a){return r.zoomOut(0===a.button)})("mouseup",function(){return r.clearZoom()})("mouseleave",function(){return r.clearZoom()})("touchend",function(){return r.clearZoom()})("touchcancel",function(){return r.clearZoom()})("touchmove",function(){return r.clearZoom()}),on(),tn(2,"app-menu-toggle",2),ki("click",function(){return r.zoomIn(!0),r.clearZoom()})("touchstart",function(){return r.zoomIn(!0)})("mousedown",function(a){return r.zoomIn(0===a.button)})("mouseup",function(){return r.clearZoom()})("mouseleave",function(){return r.clearZoom()})("touchend",function(){return r.clearZoom()})("touchcancel",function(){return r.clearZoom()})("touchmove",function(){return r.clearZoom()}),on()()),2&n&&(Qn(1),Un("active",!1),Qn(1),Un("active",!1))},dependencies:[Ec]})}return i})(),L4=(()=>{class i{eventDisplay;isAnimating=!1;constructor(t){this.eventDisplay=t}toggleAnimateEvent(){this.isAnimating||(this.isAnimating=!0,this.eventDisplay.animateEventWithCollision(1e4,()=>{this.isAnimating=!1}))}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-animate-event"]],decls:1,vars:1,consts:[["tooltip","Animate event","icon","event-folder",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.toggleAnimateEvent()}),on()),2&n&&Un("active",r.isAnimating)},dependencies:[Ec]})}return i})(),RR=(()=>{class i{eventDisplay;vrSupported=!1;vrActive=!1;constructor(t){this.eventDisplay=t,navigator?.xr?.isSessionSupported?.(t9.SESSION_TYPE).then(n=>{n&&(this.vrSupported=!0)}).catch(n=>console.warn("Error in VR",n))}toggleVr(){this.vrActive?(this.eventDisplay.endXR(Bf.VR),this.vrActive=!1):(this.eventDisplay.initXR(Bf.VR,()=>{this.vrActive=!1,this.eventDisplay.endXR(Bf.VR)}),this.vrActive=!0)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-vr-toggle"]],decls:1,vars:3,consts:[["icon","vr",3,"disabled","active","tooltip","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.vrSupported&&r.toggleVr()}),on()),2&n&&Un("disabled",!r.vrSupported)("active",r.vrActive)("tooltip",r.vrSupported?r.vrActive?"Exit VR":"Enter VR":"VR not supported")},dependencies:[Ec]})}return i})();function Yde(i,e){if(1&i){const t=Ba();Lp(0),tn(1,"button",4),ki("click",function(){return ks(t),Ts(Or().toggleAr(!0))}),dr(2,"AR with overlays"),on(),tn(3,"button",4),ki("click",function(){return ks(t),Ts(Or().toggleAr(!1))}),dr(4,"AR without overlays"),on(),Np()}}function Zde(i,e){1&i&&(tn(0,"button",5),dr(1,"AR not supported"),on())}let kR=(()=>{class i{eventDisplay;arSupported=!1;arActive=!1;constructor(t){this.eventDisplay=t,navigator.xr?.isSessionSupported?.(XP.SESSION_TYPE).then(n=>{n&&(this.arSupported=!0)}).catch(n=>console.warn("Error in AR",n))}toggleAr(t=!0){XP.enableDomOverlay=t,this.arActive?(this.eventDisplay.endXR(Bf.AR),this.arActive=!1):(this.eventDisplay.initXR(Bf.AR,()=>{this.arActive=!1,this.eventDisplay.endXR(Bf.AR)}),this.arActive=!0)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-ar-toggle"]],decls:5,vars:6,consts:[["arToggleOptions",""],[4,"ngIf"],["mat-menu-item","","disabled","",4,"ngIf"],["icon","ar",3,"matMenuTriggerFor","disabled","active","tooltip","click"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled",""]],template:function(n,r){if(1&n&&(tn(0,"mat-menu",null,0),ns(2,Yde,5,0,"ng-container",1),ns(3,Zde,2,0,"button",2),on(),tn(4,"app-menu-toggle",3),ki("click",function(){return r.arSupported&&(r.arActive?r.toggleAr():null)}),on()),2&n){const s=Fl(1);Qn(2),Un("ngIf",r.arSupported),Qn(1),Un("ngIf",!r.arSupported),Qn(1),Un("matMenuTriggerFor",s)("disabled",!r.arSupported)("active",r.arActive)("tooltip",r.arSupported?r.arActive?"Exit AR":"Enter AR":"AR not supported")}},dependencies:[ph,$C,Cy,XC,Ec]})}return i})(),OR=(()=>{class i{ssMode=!1;ngOnInit(){document.onfullscreenchange=()=>{document.fullscreenElement||this.toggleSSMode()}}toggleSSMode(){this.ssMode=!this.ssMode,document.body.classList.toggle("ss-mode"),this.ssMode?(setTimeout(()=>{document.addEventListener("click",this.onDocumentClick),document.addEventListener("touchstart",this.onDocumentClick)},1),document.documentElement.requestFullscreen?.()):(document.removeEventListener("click",this.onDocumentClick),document.removeEventListener("touchstart",this.onDocumentClick))}onDocumentClick=()=>{document.exitFullscreen?.()};static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Kr({type:i,selectors:[["app-ss-mode"]],decls:1,vars:1,consts:[["tooltip","Screenshot mode: phoenix will become fullscreen and the menu is suppressed","icon","ss-mode",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.toggleSSMode()}),on()),2&n&&Un("active",r.ssMode)},dependencies:[Ec],styles:["#uiMenu,#phoenixMenu,#mainLogo,#statsElement{transition:opacity .4s}.ss-mode #uiMenu,.ss-mode #phoenixMenu,.ss-mode #mainLogo,.ss-mode #statsElement{visibility:hidden;opacity:0}\n"],encapsulation:2})}return i})(),nfe=(()=>{class i{constructor(){this._listeners=[]}notify(t,n){for(let r of this._listeners)r(t,n)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(n=>t!==n)}}ngOnDestroy(){this._listeners=[]}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ife=["input"],rfe=["*"];let BV=0;class IV{constructor(e,t){this.source=e,this.value=t}}const sfe={provide:Pf,useExisting:cr(()=>FV),multi:!0},PV=new sr("MatRadioGroup"),ofe=new sr("mat-radio-default-options",{providedIn:"root",factory:function afe(){return{color:"accent"}}});let lfe=(()=>{class i{get name(){return this._name}set name(t){this._name=t,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition="before"===t?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(t){this._disabled=ma(t),this._markRadiosForCheck()}get required(){return this._required}set required(t){this._required=ma(t),this._markRadiosForCheck()}constructor(t){this._changeDetector=t,this._value=null,this._name="mat-radio-group-"+BV++,this._selected=null,this._isInitialized=!1,this._labelPosition="after",this._disabled=!1,this._required=!1,this._controlValueAccessorChangeFn=()=>{},this.onTouched=()=>{},this.change=new ao}ngAfterContentInit(){this._isInitialized=!0}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(t=>{t.name=this.name,t._markForCheck()})}_updateSelectedRadioFromValue(){this._radios&&(null===this._selected||this._selected.value!==this._value)&&(this._selected=null,this._radios.forEach(n=>{n.checked=this.value===n.value,n.checked&&(this._selected=n)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new IV(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(t=>t._markForCheck())}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetector.markForCheck()}}return i.\u0275fac=function(t){return new(t||i)(Et(zl))},i.\u0275dir=gr({type:i,inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:"disabled",required:"required"},outputs:{change:"change"}}),i})();class cfe{constructor(e){this._elementRef=e}}const ufe=bb(d4(cfe));let hfe=(()=>{class i extends ufe{get checked(){return this._checked}set checked(t){const n=ma(t);this._checked!==n&&(this._checked=n,n&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!n&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),n&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,null!==this.radioGroup&&(this.checked||(this.checked=this.radioGroup.value===t),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(t){this._labelPosition=t}get disabled(){return this._disabled||null!==this.radioGroup&&this.radioGroup.disabled}set disabled(t){this._setDisabled(ma(t))}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(t){this._required=ma(t)}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._providerOverride&&this._providerOverride.color||"accent"}set color(t){this._color=t}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,n,r,s,a,l,u,d){super(n),this._changeDetector=r,this._focusMonitor=s,this._radioDispatcher=a,this._providerOverride=u,this._uniqueId="mat-radio-"+ ++BV,this.id=this._uniqueId,this.change=new ao,this._checked=!1,this._value=null,this._removeUniqueSelectionListener=()=>{},this.radioGroup=t,this._noopAnimations="NoopAnimations"===l,d&&(this.tabIndex=gc(d,0))}focus(t,n){n?this._focusMonitor.focusVia(this._inputElement,n,t):this._inputElement.nativeElement.focus(t)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((t,n)=>{t!==this.id&&n===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{!t&&this.radioGroup&&this.radioGroup._touch()})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new IV(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputClick(t){t.stopPropagation()}_onInputInteraction(t){if(t.stopPropagation(),!this.checked&&!this.disabled){const n=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),n&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(t){this._onInputInteraction(t),this.disabled||this._inputElement.nativeElement.focus()}_setDisabled(t){this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}_updateTabIndex(){const t=this.radioGroup;let n;if(n=t&&t.selected&&!this.disabled?t.selected===this?this.tabIndex:-1:this.tabIndex,n!==this._previousTabIndex){const r=this._inputElement?.nativeElement;r&&(r.setAttribute("tabindex",n+""),this._previousTabIndex=n)}}}return i.\u0275fac=function(t){Nd()},i.\u0275dir=gr({type:i,viewQuery:function(t,n){if(1&t&&Ml(ife,5),2&t){let r;jo(r=$o())&&(n._inputElement=r.first)}},inputs:{id:"id",name:"name",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],checked:"checked",value:"value",labelPosition:"labelPosition",disabled:"disabled",required:"required",color:"color"},outputs:{change:"change"},features:[bs]}),i})(),FV=(()=>{class i extends lfe{}return i.\u0275fac=function(){let e;return function(n){return(e||(e=il(i)))(n||i)}}(),i.\u0275dir=gr({type:i,selectors:[["mat-radio-group"]],contentQueries:function(t,n,r){if(1&t&&md(r,RV,5),2&t){let s;jo(s=$o())&&(n._radios=s)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],exportAs:["matRadioGroup"],features:[ko([sfe,{provide:PV,useExisting:i}]),bs]}),i})(),RV=(()=>{class i extends hfe{constructor(t,n,r,s,a,l,u,d){super(t,n,r,s,a,l,u,d)}}return i.\u0275fac=function(t){return new(t||i)(Et(PV,8),Et(Bs),Et(zl),Et(u0),Et(nfe),Et(dh,8),Et(ofe,8),Th("tabindex"))},i.\u0275cmp=Kr({type:i,selectors:[["mat-radio-button"]],hostAttrs:[1,"mat-mdc-radio-button"],hostVars:15,hostBindings:function(t,n){1&t&&ki("focus",function(){return n._inputElement.nativeElement.focus()}),2&t&&(ja("id",n.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),Ia("mat-primary","primary"===n.color)("mat-accent","accent"===n.color)("mat-warn","warn"===n.color)("mat-mdc-radio-checked",n.checked)("_mat-animation-noopable",n._noopAnimations))},inputs:{disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matRadioButton"],features:[bs],ngContentSelectors:rfe,decls:13,vars:17,consts:[[1,"mdc-form-field"],["formField",""],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio",1,"mdc-radio__native-control",3,"id","checked","disabled","required","change"],["input",""],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[3,"for"]],template:function(t,n){if(1&t&&(ch(),tn(0,"div",0,1)(2,"div",2)(3,"div",3),ki("click",function(s){return n._onTouchTargetClick(s)}),on(),tn(4,"input",4,5),ki("change",function(s){return n._onInputInteraction(s)}),on(),tn(6,"div",6),kr(7,"div",7)(8,"div",8),on(),tn(9,"div",9),kr(10,"div",10),on()(),tn(11,"label",11),ru(12),on()()),2&t){const r=Fl(1);Ia("mdc-form-field--align-end","before"==n.labelPosition),Qn(2),Ia("mdc-radio--disabled",n.disabled),Qn(2),Un("id",n.inputId)("checked",n.checked)("disabled",n.disabled)("required",n.required),ja("name",n.name)("value",n.value)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledby)("aria-describedby",n.ariaDescribedby),Qn(5),Un("matRippleTrigger",r)("matRippleDisabled",n._isRippleDisabled())("matRippleCentered",!0),Qn(2),Un("for",n.inputId)}},dependencies:[GA],styles:['.mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color}.mdc-radio[hidden]{display:none}.mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 120ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1}.mdc-radio--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-radio--touch .mdc-radio__native-control{top:calc((40px - 48px) / 2);right:calc((40px - 48px) / 2);left:calc((40px - 48px) / 2);width:48px;height:48px}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring{border-color:CanvasText}}.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__focus-ring::after,.mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__focus-ring::after{border-color:CanvasText}}.mdc-radio__native-control:checked+.mdc-radio__background,.mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__outer-circle{transition:border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle,.mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio--disabled{cursor:default;pointer-events:none}.mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__inner-circle{transform:scale(0.5);transition:transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1),border-color 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-radio__native-control:disabled+.mdc-radio__background,[aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background{cursor:default}.mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 120ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 120ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px) / 2)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:checked+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled+.mdc-radio__background .mdc-radio__inner-circle{opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio [aria-disabled=true] .mdc-radio__native-control:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio.mdc-ripple-upgraded--background-focused .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio:not(.mdc-ripple-upgraded):focus .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-focus-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-hover-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:checked+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled+.mdc-radio__background .mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, #6200ee)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, #000)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, #000)}.mat-mdc-radio-button .mdc-radio:not(:disabled):active .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, #000)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{top:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);left:calc(-1 * (var(--mdc-radio-state-layer-size, 40px) - 20px) / 2);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control{top:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);right:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);left:calc((var(--mdc-radio-state-layer-size, 40px) - var(--mdc-radio-state-layer-size, 40px)) / 2);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio .mdc-radio__background::before{background-color:var(--mat-mdc-radio-ripple-color, transparent)}.mat-mdc-radio-button .mdc-radio:hover .mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-mdc-radio-checked-ripple-color, transparent)}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element{background-color:var(--mat-mdc-radio-checked-ripple-color, transparent)}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple .mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio .mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background .mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, black)}.mat-mdc-radio-button.cdk-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-radio-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}[dir=rtl] .mat-mdc-radio-touch-target{left:0;right:50%;transform:translate(50%, -50%)}'],encapsulation:2,changeDetection:0}),i})(),dfe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[Eu,K1,xb,Eu]}),i})();function ffe(i,e){if(1&i&&(tn(0,"mat-radio-button",12),dr(1),on()),2&i){const t=e.$implicit;Un("value",t),Qn(1),wl("",t," ")}}let LR=(()=>{class i{eventDisplay;fittings=["Crop","Stretch"];fitting="Crop";width=3840;height=2160;constructor(t){this.eventDisplay=t}ngOnInit(){}setWidth(t){this.width=t}setHeight(t){this.height=t}makePicture(){this.eventDisplay.makeScreenShot(this.width,this.height,this.fitting)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-make-picture"]],decls:20,vars:5,consts:[[1,"mat-menu"],["menu",""],["mat-menu-item","",1,"size-input",3,"click"],["mapInput","","type","number",3,"value","change","click"],["width",""],["height",""],["mat-menu-item","",3,"click"],[1,"fitting-radios",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["mat-menu-item","",1,"make-picture",3,"click"],["tooltip","Creates a picture from the current view: directly saves a png of arbitrary size from the current view","icon","png",3,"matMenuTriggerFor"],["hidden","","id","screenshotCanvas"],[3,"value"]],template:function(n,r){if(1&n){const s=Ba();tn(0,"mat-menu",0,1)(2,"button",2),ki("click",function(l){return l.stopPropagation()}),tn(3,"label"),dr(4,"width"),on(),tn(5,"input",3,4),ki("change",function(){ks(s);const l=Fl(6);return Ts(r.setWidth(l.value))})("click",function(l){return l.stopPropagation()}),on()(),tn(7,"button",2),ki("click",function(l){return l.stopPropagation()}),tn(8,"label"),dr(9,"height"),on(),tn(10,"input",3,5),ki("change",function(){ks(s);const l=Fl(11);return Ts(r.setHeight(l.value))})("click",function(l){return l.stopPropagation()}),on()(),tn(12,"button",6),ki("click",function(l){return l.stopPropagation()}),tn(13,"mat-radio-group",7),ki("ngModelChange",function(l){return r.fitting=l}),ns(14,ffe,2,2,"mat-radio-button",8),on()(),tn(15,"button",9),ki("click",function(){return r.makePicture()}),dr(16," Create picture "),on()(),kr(17,"app-menu-toggle",10),tn(18,"div"),kr(19,"canvas",11),on()}if(2&n){const s=Fl(1);Qn(5),Un("value",3840),Qn(5),Un("value",2610),Qn(3),Un("ngModel",r.fitting),Qn(1),Un("ngForOf",r.fittings),Qn(3),Un("matMenuTriggerFor",s)}},dependencies:[sp,aH,nR,$C,Cy,XC,FV,RV,Ec],styles:[".size-input{background:transparent;color:var(--phoenix-text-color);text-align:center}.size-input label{width:60px}.size-input input{background:transparent;color:var(--phoenix-text-color);width:80px}.make-picture{text-align:center;display:block}.make-picture span{padding:5px 25px;border:2px solid var(--phoenix-text-color);border-radius:8px}\n"],encapsulation:2})}return i})(),NR=(()=>{class i{eventDisplay;performanceMode=!1;constructor(t){this.eventDisplay=t}togglePerformance(){this.performanceMode=!this.performanceMode,this.eventDisplay.getThreeManager().setAntialiasing(!this.performanceMode)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-performance-toggle"]],decls:1,vars:1,consts:[["tooltip","Performance mode","icon","performance",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.togglePerformance()}),on()),2&n&&Un("active",r.performanceMode)},dependencies:[Ec]})}return i})();var pfe=Ce(9393);const Afe=["qrcodeCanvas"];let kV=(()=>{class i{dialogRef;baseLink;shareLink;embedLink;urlOptions=Object.assign({},iae);qrcodeCanvas;constructor(t){this.dialogRef=t;const n=window.location.href,r=-1===n.lastIndexOf("?")?n.length:n.lastIndexOf("?");this.baseLink=n.slice(0,r),this.shareLink=new Hw(this.baseLink),this.embedLink=this.getEmbedLink()}ngAfterViewInit(){this.updateQRCode(this.shareLink.value),this.shareLink.onUpdate(this.updateQRCode.bind(this))}onClose(){this.dialogRef.close()}getEmbedLink(t=""){return`<iframe src="${this.baseLink}?embed=true${t?"&":""}${t}"></iframe>`}setOptionValue(t,n){this.urlOptions[t]=n,this.onOptionsChange()}onOptionsChange(){const t=Object.getOwnPropertyNames(this.urlOptions).reduce((n,r)=>(this.urlOptions[r]&&n.push(`${r}=${encodeURI(this.urlOptions[r])}`),n),[]).join("&");this.shareLink.update(this.baseLink+(t?"?":"")+t),this.embedLink=this.getEmbedLink(t)}copyText(t,n){const r=document.createElement("input");document.body.appendChild(r),r.value=t,r.select(),document.execCommand("copy"),document.body.removeChild(r),n.focus(),n.innerText="COPIED",setTimeout(()=>{n.innerText="COPY"},2e3)}updateQRCode(t){pfe.toCanvas(this.qrcodeCanvas.nativeElement,t)}static \u0275fac=function(n){return new(n||i)(Et(oS))};static \u0275cmp=Kr({type:i,selectors:[["app-share-link-dialog"]],viewQuery:function(n,r){if(1&n&&Ml(Afe,5),2&n){let s;jo(s=$o())&&(r.qrcodeCanvas=s.first)}},decls:49,vars:5,consts:[[1,"dialog"],["mat-dialog-title",""],["mat-dialog-content","",1,"dialog-content"],[1,"form-group","mt-2"],["for","eventDataFile"],["type","text","id","eventDataFile","placeholder","assets/files/event_data/atlaseventdump2.json",1,"form-control",3,"value","input"],[1,"form-group"],["for","eventDataType"],["id","eventDataType",1,"form-control",3,"input"],["selected","","value",""],["value","jivexml"],["value","json"],["for","configuration"],["type","text","id","configuration","placeholder","assets/files/config/phoenix-config.json",1,"form-control",3,"value","input"],[3,"checked","change"],[1,"share-box","my-2"],[1,"share-box-copy",3,"click"],[1,"qrcode","d-flex","justify-content-center"],["qrcodeCanvas",""],["mat-dialog-actions",""],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(n,r){1&n&&(tn(0,"div",0)(1,"h1",1),dr(2,"Create shareable link"),on(),tn(3,"div",2)(4,"h5"),dr(5,"URL options"),on(),tn(6,"div",3)(7,"label",4),dr(8,"Event data file (URL or path)"),on(),tn(9,"input",5),ki("input",function(a){return r.setOptionValue("file",a.target.value)}),on()(),tn(10,"div",6)(11,"label",7),dr(12,"Event data type"),on(),tn(13,"select",8),ki("input",function(a){return r.setOptionValue("type",a.target.value)}),tn(14,"option",9),dr(15,"Select"),on(),tn(16,"option",10),dr(17,"JiveXML"),on(),tn(18,"option",11),dr(19,"JSON"),on()()(),tn(20,"div",6)(21,"label",12),dr(22,"Configuration (URL or path)"),on(),tn(23,"input",13),ki("input",function(a){return r.setOptionValue("config",a.target.value)}),on()(),tn(24,"div",6)(25,"mat-checkbox",14),ki("change",function(a){return r.setOptionValue("hideWidgets",a.checked)}),dr(26," Hide all widgets "),on()(),tn(27,"h5"),dr(28,"Share"),on(),tn(29,"div",15)(30,"span"),dr(31),on(),tn(32,"button",16),ki("click",function(a){return r.copyText(r.shareLink.value,a.target)}),dr(33," COPY "),on()(),tn(34,"h5"),dr(35,"Embed"),on(),tn(36,"div",15)(37,"span"),dr(38),on(),tn(39,"button",16),ki("click",function(a){return r.copyText(r.embedLink,a.target)}),dr(40," COPY "),on()(),tn(41,"h5"),dr(42,"QR Code"),on(),tn(43,"div",17),kr(44,"canvas",null,18),on()(),tn(46,"div",19)(47,"button",20),ki("click",function(){return r.onClose()}),dr(48,"Close"),on()()()),2&n&&(Qn(9),Un("value",r.urlOptions.file),Qn(14),Un("value",r.urlOptions.config),Qn(2),Un("checked",r.urlOptions.hideWidgets),Qn(6),bf(r.shareLink.value),Qn(7),bf(r.embedLink))},dependencies:[wR,MR,CR,lS,eS,tS,t2],styles:[".share-box[_ngcontent-%COMP%]{width:30rem;max-width:100%;position:relative;background:var(--phoenix-background-color-tertiary);border:1px solid var(--phoenix-border);border-radius:.5rem;padding:1.25rem;word-wrap:break-word}.share-box[_ngcontent-%COMP%]   .share-box-copy[_ngcontent-%COMP%]{position:absolute;top:-1px;right:-1px;background:transparent;color:inherit;cursor:pointer;padding:.25rem .5rem;font-size:.75rem;border:1px solid var(--phoenix-border);border-radius:.5rem}.share-box[_ngcontent-%COMP%]   .share-box-copy[_ngcontent-%COMP%]:hover{background:var(--phoenix-border)}"]})}return i})(),UR=(()=>{class i{dialog;constructor(t){this.dialog=t}openShareLinkDialog(){this.dialog.open(kV)}static \u0275fac=function(n){return new(n||i)(Et(aS))};static \u0275cmp=Kr({type:i,selectors:[["app-share-link"]],decls:1,vars:1,consts:[["tooltip","Create shareable link","icon","share",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.openShareLinkDialog()}),on()),2&n&&Un("active",!1)},dependencies:[Ec]})}return i})();const mfe=["*"];let cS=(()=>{class i{eventDataImportOptions=Object.values(Uh);animationPresets=Rz;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Kr({type:i,selectors:[["app-ui-menu"]],inputs:{eventDataImportOptions:"eventDataImportOptions",animationPresets:"animationPresets"},ngContentSelectors:mfe,decls:22,vars:2,consts:[[3,"animationPresets"],[3,"eventDataImportOptions"]],template:function(n,r){1&n&&(ch(),tn(0,"app-ui-menu-wrapper"),kr(1,"app-event-selector")(2,"app-zoom-controls")(3,"app-view-options")(4,"app-auto-rotate")(5,"app-dark-theme")(6,"app-object-clipping")(7,"app-main-view-toggle")(8,"app-overlay-view")(9,"app-object-selection")(10,"app-info-panel")(11,"app-animate-event")(12,"app-animate-camera",0)(13,"app-collections-info")(14,"app-performance-toggle")(15,"app-vr-toggle")(16,"app-ar-toggle")(17,"app-ss-mode")(18,"app-make-picture")(19,"app-io-options",1)(20,"app-share-link"),ru(21),on()),2&n&&(Qn(12),Un("animationPresets",r.animationPresets),Qn(7),Un("eventDataImportOptions",r.eventDataImportOptions))},dependencies:[zF,yR,SR,TR,ER,DR,BR,R4,k4,IR,PR,O4,FR,UF,L4,RR,kR,OR,LR,NR,UR]})}return i})();function gfe(i,e){if(1&i&&(tn(0,"a",5),kr(1,"img",6),on()),2&i){const t=Or();Un("href",t.url,cd),Qn(1),Un("src",t.logo,cd)}}function _fe(i,e){if(1&i&&(tn(0,"p")(1,"b"),dr(2),on()()),2&i){const t=Or();Qn(2),bf(t.tagline)}}function yfe(i,e){if(1&i&&(Lp(0),tn(1,"b"),dr(2),on(),dr(3),Np()),2&i){const t=Or().$implicit;Qn(2),wl("",t.label,": "),Qn(1),wl("",t.value," ")}}function vfe(i,e){if(1&i&&(Lp(0),dr(1),Np()),2&i){const t=Or().$implicit;Qn(1),wl(" ",t," ")}}function bfe(i,e){if(1&i&&(tn(0,"p"),ns(1,yfe,4,2,"ng-container",3),ns(2,vfe,2,1,"ng-container",3),on()),2&i){const t=e.$implicit;Qn(1),Un("ngIf",t.label),Qn(1),Un("ngIf",!t.label)}}let N4=(()=>{class i{eventDisplay;experimentInfo;url;logo;tagline;constructor(t){this.eventDisplay=t}ngOnInit(){this.eventDisplay.listenToDisplayedEventChange(()=>{this.experimentInfo=this.eventDisplay.getEventMetadata()})}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-experiment-info"]],inputs:{url:"url",logo:"logo",tagline:"tagline"},decls:5,vars:3,consts:[["id","experimentInfo","cdkDrag","","cdkDragBoundary","body",1,"experimentInfo"],["class","experimentLogoWrapper","target","_blank","rel","noopener noreferrer",3,"href",4,"ngIf"],[1,"textInfo"],[4,"ngIf"],[4,"ngFor","ngForOf"],["target","_blank","rel","noopener noreferrer",1,"experimentLogoWrapper",3,"href"],["alt","",1,"experimentLogo",3,"src"]],template:function(n,r){1&n&&(tn(0,"div",0),ns(1,gfe,2,2,"a",1),tn(2,"div",2),ns(3,_fe,3,1,"p",3),ns(4,bfe,3,2,"p",4),on()()),2&n&&(Qn(1),Un("ngIf",r.url),Qn(2),Un("ngIf",r.tagline),Qn(1),Un("ngForOf",r.experimentInfo))},dependencies:[sp,ph,_R],styles:[".experimentInfo[_ngcontent-%COMP%]{position:absolute;top:5rem;left:1rem;display:flex;flex-direction:row;justify-items:flex-end;justify-content:flex-end;align-items:center;align-content:center;font-family:Courier New,Lucida Console,monospace;cursor:move}.experimentLogoWrapper[_ngcontent-%COMP%]{width:6rem}.experimentLogoWrapper[_ngcontent-%COMP%]   .experimentLogo[_ngcontent-%COMP%]{width:100%;height:100%}.textInfo[_ngcontent-%COMP%]{margin-left:1rem}.textInfo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--phoenix-text-color-secondary);font-size:.8rem;margin-bottom:.5rem;-webkit-user-select:none;user-select:none}@media screen and (max-width: 768px){.experimentInfo[_ngcontent-%COMP%]{top:4rem;max-width:40%}.experimentLogoWrapper[_ngcontent-%COMP%]{height:4rem}.textInfo[_ngcontent-%COMP%]{display:none}}"]})}return i})();const xfe=["switch"],wfe=["*"],Mfe=new sr("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})}),Cfe={provide:Pf,useExisting:cr(()=>LV),multi:!0};class OV{constructor(e,t){this.source=e,this.checked=t}}let Sfe=0;const Tfe=d4(Kw(bb(vb(class{constructor(i){this._elementRef=i}}))));let Efe=(()=>{class i extends Tfe{get required(){return this._required}set required(t){this._required=ma(t)}get checked(){return this._checked}set checked(t){this._checked=ma(t),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(t,n,r,s,a,l,u){super(t),this._focusMonitor=n,this._changeDetectorRef=r,this.defaults=a,this._onChange=d=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new ao,this.toggleChange=new ao,this.tabIndex=parseInt(s)||0,this.color=this.defaultColor=a.color||"accent",this._noopAnimations="NoopAnimations"===l,this.id=this._uniqueId=`${u}${++Sfe}`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{"keyboard"===t||"program"===t?(this._focused=!0,this._changeDetectorRef.markForCheck()):t||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(t){this.checked=!!t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}return i.\u0275fac=function(t){Nd()},i.\u0275dir=gr({type:i,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[bs]}),i})(),LV=(()=>{class i extends Efe{get buttonId(){return`${this.id||this._uniqueId}-button`}constructor(t,n,r,s,a,l){super(t,n,r,s,a,l,"mat-mdc-slide-toggle-"),this._labelId=this._uniqueId+"-label"}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new OV(this,this.checked)))}focus(){this._switchElement.nativeElement.focus()}_createChangeEvent(t){return new OV(this,t)}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}}return i.\u0275fac=function(t){return new(t||i)(Et(Bs),Et(u0),Et(zl),Th("tabindex"),Et(Mfe),Et(dh,8))},i.\u0275cmp=Kr({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(t,n){if(1&t&&Ml(xfe,5),2&t){let r;jo(r=$o())&&(n._switchElement=r.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:11,hostBindings:function(t,n){2&t&&(ui("id",n.id),ja("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Ia("mat-mdc-slide-toggle-focused",n._focused)("mat-mdc-slide-toggle-checked",n.checked)("_mat-animation-noopable",n._noopAnimations))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[ko([Cfe]),bs],ngContentSelectors:wfe,decls:17,vars:24,consts:[[1,"mdc-form-field"],["role","switch","type","button",1,"mdc-switch",3,"tabIndex","disabled","click"],["switch",""],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"],[3,"for","click"]],template:function(t,n){if(1&t&&(ch(),tn(0,"div",0)(1,"button",1,2),ki("click",function(){return n._handleClick()}),kr(3,"div",3),tn(4,"div",4)(5,"div",5)(6,"div",6),kr(7,"div",7),on(),tn(8,"div",8),kr(9,"div",9),on(),tn(10,"div",10),xl(),tn(11,"svg",11),kr(12,"path",12),on(),tn(13,"svg",13),kr(14,"path",14),on()()()()(),Jh(),tn(15,"label",15),ki("click",function(s){return s.stopPropagation()}),ru(16),on()()),2&t){const r=Fl(2);Ia("mdc-form-field--align-end","before"==n.labelPosition),Qn(1),Ia("mdc-switch--selected",n.checked)("mdc-switch--unselected",!n.checked)("mdc-switch--checked",n.checked)("mdc-switch--disabled",n.disabled),Un("tabIndex",n.tabIndex)("disabled",n.disabled),ja("id",n.buttonId)("name",n.name)("aria-label",n.ariaLabel)("aria-labelledby",n._getAriaLabelledBy())("aria-describedby",n.ariaDescribedby)("aria-required",n.required||null)("aria-checked",n.checked),Qn(8),Un("matRippleTrigger",r)("matRippleDisabled",n.disableRipple||n.disabled)("matRippleCentered",!0),Qn(6),Un("for",n.buttonId),ja("id",n._labelId)}},dependencies:[GA],styles:['.mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color, #fff)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mdc-switch{width:var(--mdc-switch-track-width, 36px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color, #310077)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color, #616161)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color, #212121)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color, var(--mdc-theme-surface, #fff))}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation, 0px 2px 1px -1px rgba(0, 0, 0, 0.2), 0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 1px 3px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__focus-ring-wrapper,.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height, 20px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__handle::after{opacity:var(--mdc-switch-disabled-handle-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape, 10px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width, 20px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width, 20px))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color, var(--mdc-theme-on-primary, #fff))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size, 18px);height:var(--mdc-switch-selected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size, 18px);height:var(--mdc-switch-unselected-icon-size, 18px)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color, var(--mdc-theme-primary, #6200ee))}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color, #424242)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity, 0.04)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity, 0.1)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size, 48px);width:var(--mdc-switch-state-layer-size, 48px)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height, 14px)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity, 0.12)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color, #d7bbff)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color, #e0e0e0)}.mat-mdc-slide-toggle .mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color, #424242)}.mat-mdc-slide-toggle .mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape, 7px)}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}'],encapsulation:2,changeDetection:0}),i})(),NV=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({}),i})(),Ife=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[NV,Eu,xb,K1,NV,Eu]}),i})();function Pfe(i,e){if(1&i){const t=Ba();tn(0,"input",4),ki("input",function(r){return ks(t),Ts(Or().onValueChange(r.target.value))}),on()}2&i&&Un("value",Or().value)}let UV=(()=>{class i{value=0;min=0;oldMin=0;max=100;oldMax=0;step=1;allowCustomValue=!1;onChange=new ao;onValueChange(t){t&&this.onChange.emit(t)}toggleMinCut(t){t.checked?this.min=this.oldMin:(this.oldMin=this.min,this.min=Number.MIN_SAFE_INTEGER)}toggleMaxCut(t){t.checked?this.max=this.oldMax:(this.oldMax=this.max,this.max=Number.MAX_SAFE_INTEGER)}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Kr({type:i,selectors:[["app-config-slider"]],inputs:{value:"value",min:"min",max:"max",step:"step",allowCustomValue:"allowCustomValue"},outputs:{onChange:"onChange"},decls:4,vars:5,consts:[[1,"d-flex","flex-row","align-items-center"],["thumbLabel","",1,"mx-2",3,"min","max","step"],["matSliderThumb","",3,"value","valueChange"],["class","config-slider-input","type","number",3,"value","input",4,"ngIf"],["type","number",1,"config-slider-input",3,"value","input"]],template:function(n,r){1&n&&(tn(0,"div",0)(1,"mat-slider",1)(2,"input",2),ki("valueChange",function(a){return r.onValueChange(a)}),on()(),ns(3,Pfe,1,1,"input",3),on()),2&n&&(Qn(1),Un("min",r.min)("max",r.max)("step",r.step),Qn(1),Un("value",r.value),Qn(1),Un("ngIf",r.allowCustomValue))},dependencies:[ph,EV,F4],styles:[".config-slider-input[_ngcontent-%COMP%]{background:transparent;color:var(--phoenix-text-color);border:none;border-bottom:1px solid var(--phoenix-text-color);width:25%;-moz-appearance:textfield}input[_ngcontent-%COMP%]::-webkit-outer-spin-button, input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none}"]})}return i})();const Ffe=["phoenixMenuItem"];function Rfe(i,e){1&i&&p_(0)}function kfe(i,e){if(1&i){const t=Ba();Lp(0),tn(1,"mat-slide-toggle",9),ki("change",function(r){return ks(t),Ts(Or().currentNode.toggleSelfAndDescendants(r.checked))}),ns(2,Rfe,1,0,"ng-container",10),on(),Np()}if(2&i){const t=Or(),n=Fl(5);Qn(1),Un("checked",t.currentNode.toggleState),Qn(1),Un("ngTemplateOutlet",n)}}function Ofe(i,e){if(1&i&&(tn(0,"span",14),xl(),tn(1,"svg"),kr(2,"use"),on()()),2&i){const t=Or(2);Qn(2),Hg("href","assets/icons/",t.currentNode.icon,".svg#",t.currentNode.icon,"")}}function Lfe(i,e){if(1&i&&(tn(0,"span",11),ns(1,Ofe,3,2,"span",12),tn(2,"span",13),dr(3),on()()),2&i){const t=Or();Qn(1),Un("ngIf",t.currentNode.icon),Qn(1),Un("title",t.currentNode.name),Qn(1),bf(t.currentNode.name)}}function Nfe(i,e){if(1&i){const t=Ba();xl(),Jh(),tn(0,"div",20),ki("click",function(){return ks(t),Ts(Or(2).currentNode.configActive=!1)}),on()}}const Ufe=function(i){return{"font-weight-bold w-100":i}};function zfe(i,e){if(1&i&&(tn(0,"label",26),dr(1),on()),2&i){const t=Or(2).$implicit;Un("ngClass",wf(2,Ufe,"label"===t.type)),Qn(1),wl(" ",t.label," ")}}function Hfe(i,e){if(1&i){const t=Ba();tn(0,"mat-checkbox",9),ki("change",function(r){ks(t);const s=Or(3).$implicit;return s.onChange(r.checked),Ts(s.isChecked=r.checked)}),on()}2&i&&Un("checked",Or(3).$implicit.isChecked)}function Vfe(i,e){if(1&i){const t=Ba();tn(0,"app-config-slider",34),ki("onChange",function(r){ks(t);const s=Or(3).$implicit;return s.onChange(r),Ts(s.value=r)}),on()}if(2&i){const t=Or(3).$implicit;Un("value",t.value)("min",t.min)("max",t.max)("step",t.step)("allowCustomValue",t.allowCustomValue)}}function Gfe(i,e){if(1&i){const t=Ba();tn(0,"button",35),ki("click",function(){return ks(t),Ts(Or(3).$implicit.onClick())}),dr(1),on()}if(2&i){const t=Or(3).$implicit;Qn(1),wl(" ",t.label," ")}}function qfe(i,e){if(1&i){const t=Ba();tn(0,"input",36),ki("input",function(r){ks(t);const s=Or(3).$implicit;return s.onChange(r.target.value),Ts(s.color=r.target.value)}),on()}2&i&&Un("value",Or(3).$implicit.color)}function Qfe(i,e){if(1&i){const t=Ba();tn(0,"div",37)(1,"div",38)(2,"mat-checkbox",9),ki("change",function(r){return ks(t),Ts(Or(3).$implicit.setEnableMin(r.checked))}),on(),tn(3,"mat-checkbox",9),ki("change",function(r){return ks(t),Ts(Or(3).$implicit.setEnableMax(r.checked))}),on()(),tn(4,"div",38)(5,"input",39),ki("input",function(r){ks(t);const s=Or(3).$implicit;return s.value=r.target.value,Ts(s.onChange(s))}),on(),tn(6,"input",40),ki("input",function(r){ks(t);const s=Or(3).$implicit;return s.highValue=r.target.value,Ts(s.onChange(s))}),on()()()}if(2&i){const t=Or(3).$implicit;Qn(2),Un("checked",t.enableMin),Qn(1),Un("checked",t.enableMax),Qn(2),Un("value",t.value),Qn(1),Un("value",t.highValue)}}function Wfe(i,e){if(1&i&&(tn(0,"option",43),dr(1),on()),2&i){const t=e.$implicit;Un("value",t),Qn(1),wl(" ",t," ")}}function jfe(i,e){if(1&i){const t=Ba();tn(0,"select",41),ki("change",function(r){return ks(t),Ts(Or(3).$implicit.onChange(r.target.value))}),ns(1,Wfe,2,2,"option",42),on()}if(2&i){const t=Or(3).$implicit;Qn(1),Un("ngForOf",t.options)}}const $fe=function(i){return{"p-0":i}};function Xfe(i,e){if(1&i&&(tn(0,"div",27),ns(1,Hfe,1,1,"mat-checkbox",28),ns(2,Vfe,1,5,"app-config-slider",29),ns(3,Gfe,2,1,"button",30),ns(4,qfe,1,1,"input",31),ns(5,Qfe,7,4,"div",32),ns(6,jfe,2,1,"select",33),on()),2&i){const t=Or(2).$implicit;Un("ngClass",wf(7,$fe,"button"===t.type)),Qn(1),Un("ngSwitchCase","checkbox"),Qn(1),Un("ngSwitchCase","slider"),Qn(1),Un("ngSwitchCase","button"),Qn(1),Un("ngSwitchCase","color"),Qn(1),Un("ngSwitchCase","rangeSlider"),Qn(1),Un("ngSwitchCase","select")}}function Kfe(i,e){if(1&i&&(tn(0,"div",23),ns(1,zfe,2,4,"label",24),ns(2,Xfe,7,9,"div",25),on()),2&i){const t=Or().$implicit;Qn(1),Un("ngIf","button"!==t.type),Qn(1),Un("ngIf","label"!==t.type)}}function Yfe(i,e){if(1&i&&(Lp(0,21),ns(1,Kfe,3,2,"div",22),Np()),2&i){const t=e.$implicit;Un("ngSwitch",t.type),Qn(1),Un("ngIf",!t.hidden)}}const Zfe=function(i){return{"top.px":i}};function Jfe(i,e){if(1&i){const t=Ba();tn(0,"div")(1,"button",15),ki("click",function(){ks(t);const r=Or();return r.calculateConfigTop(),Ts(r.currentNode.configActive=!r.currentNode.configActive)}),xl(),tn(2,"svg"),kr(3,"use",16),on()(),ns(4,Nfe,1,0,"div",17),Jh(),tn(5,"div",18),ns(6,Yfe,2,2,"ng-container",19),on()()}if(2&i){const t=Or();Qn(4),Un("ngIf",t.currentNode.configActive),Qn(1),Un("hidden",!t.currentNode.configActive)("ngStyle",wf(4,Zfe,t.configTop)),Qn(1),Un("ngForOf",t.castConfigsToAny(t.currentNode.configs))}}const epe=function(i){return{expanded:i}};function tpe(i,e){if(1&i){const t=Ba();tn(0,"button",44),ki("click",function(){ks(t);const r=Or();return Ts(r.currentNode.childrenActive=!r.currentNode.childrenActive)}),xl(),tn(1,"svg"),kr(2,"use",45),on()()}if(2&i){const t=Or();Un("ngClass",wf(1,epe,t.currentNode.childrenActive))}}function npe(i,e){1&i&&kr(0,"app-phoenix-menu-item",48),2&i&&Un("currentNode",e.$implicit)}function ipe(i,e){if(1&i&&(tn(0,"div",46),ns(1,npe,1,1,"app-phoenix-menu-item",47),on()),2&i){const t=Or();Qn(1),Un("ngForOf",t.currentNode.children)}}let zV=(()=>{class i{cdr;currentNode;phoenixMenuItem;configTop;constructor(t){this.cdr=t}calculateConfigTop(){this.phoenixMenuItem&&(this.configTop=this.phoenixMenuItem.nativeElement.getBoundingClientRect().top,this.cdr.detectChanges())}castConfigsToAny(t){return t}static \u0275fac=function(n){return new(n||i)(Et(zl))};static \u0275cmp=Kr({type:i,selectors:[["app-phoenix-menu-item"]],viewQuery:function(n,r){if(1&n&&Ml(Ffe,5),2&n){let s;jo(s=$o())&&(r.phoenixMenuItem=s.first)}},inputs:{currentNode:"currentNode"},decls:10,vars:5,consts:[[1,"phoenix-menu-item"],["phoenixMenuItem",""],[1,"phoenix-menu-item-left","align-items-center"],[4,"ngIf","ngIfElse"],["nodeName",""],[1,"phoenix-menu-item-right"],[4,"ngIf"],["class","icon-wrapper icon-button btn-blank item-expand","data-testid","dropdown",3,"ngClass","click",4,"ngIf"],["class","phoenix-menu-children",4,"ngIf"],[3,"checked","change"],[4,"ngTemplateOutlet"],[1,"d-flex","w-100","align-items-center"],["class","icon-wrapper item-icon",4,"ngIf"],[1,"item-name",3,"title"],[1,"icon-wrapper","item-icon"],[1,"icon-wrapper","icon-button","btn-blank","item-settings",3,"click"],["href","assets/icons/gear.svg#gear"],["class","item-config-backdrop",3,"click",4,"ngIf"],[1,"item-config",3,"hidden","ngStyle"],[3,"ngSwitch",4,"ngFor","ngForOf"],[1,"item-config-backdrop",3,"click"],[3,"ngSwitch"],["class","item-config-single",4,"ngIf"],[1,"item-config-single"],["class","item-config-label","for","item-config-field",3,"ngClass",4,"ngIf"],["class","item-config-data",3,"ngClass",4,"ngIf"],["for","item-config-field",1,"item-config-label",3,"ngClass"],[1,"item-config-data",3,"ngClass"],[3,"checked","change",4,"ngSwitchCase"],[3,"value","min","max","step","allowCustomValue","onChange",4,"ngSwitchCase"],["class","w-100","mat-button","","mat-stroked-button","",3,"click",4,"ngSwitchCase"],["id","item-config-field","type","color",3,"value","input",4,"ngSwitchCase"],["class","range-slider",4,"ngSwitchCase"],["id","item-config-field","class","w-100",3,"change",4,"ngSwitchCase"],[3,"value","min","max","step","allowCustomValue","onChange"],["mat-button","","mat-stroked-button","",1,"w-100",3,"click"],["id","item-config-field","type","color",3,"value","input"],[1,"range-slider"],[1,"range-slider-inputs","d-flex","justify-content-between"],["type","number","placeholder","Min","step","config.step",1,"form-control","form-control-sm",3,"value","input"],["type","number","placeholder","Max","step","config.step",1,"form-control","form-control-sm",3,"value","input"],["id","item-config-field",1,"w-100",3,"change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["data-testid","dropdown",1,"icon-wrapper","icon-button","btn-blank","item-expand",3,"ngClass","click"],["href","assets/icons/expand.svg#expand"],[1,"phoenix-menu-children"],[3,"currentNode",4,"ngFor","ngForOf"],[3,"currentNode"]],template:function(n,r){if(1&n&&(tn(0,"div",0,1)(2,"div",2),ns(3,kfe,3,2,"ng-container",3),ns(4,Lfe,4,3,"ng-template",null,4,PT),on(),tn(6,"div",5),ns(7,Jfe,7,6,"div",6),ns(8,tpe,3,3,"button",7),on()(),ns(9,ipe,2,1,"div",8)),2&n){const s=Fl(5);Qn(3),Un("ngIf",r.currentNode.onToggle)("ngIfElse",s),Qn(4),Un("ngIf",r.currentNode.configs.length>0),Qn(1),Un("ngIf",r.currentNode.children.length>0),Qn(1),Un("ngIf",r.currentNode.childrenActive)}},dependencies:[Dm,sp,ph,bL,vL,YT,_L,lS,eS,tS,LV,t2,i,UV],styles:[".phoenix-menu-item{width:100%;padding:.6rem;background:var(--phoenix-background-color-secondary);color:var(--phoenix-text-color);font-size:.8rem;transition:all .5s;display:flex;justify-content:space-between;align-items:center}.phoenix-menu-item-left{display:flex;justify-content:flex-start;min-width:0;padding-right:.5rem;overflow:hidden}.phoenix-menu-item-left .item-name{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.phoenix-menu-item-left .item-icon{margin-right:.2rem}.phoenix-menu-item-right{display:flex;justify-content:flex-end}.phoenix-menu-item-right .item-expand.expanded{transform:scaleY(-1)}.phoenix-menu-item-right .item-settings{margin-right:.2rem}.phoenix-menu-item-right .item-config-backdrop{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:110}.phoenix-menu-item-right .item-config{position:absolute;margin-top:-5rem;right:100%;width:14rem;padding:.5rem;background:var(--phoenix-background-color-secondary);color:var(--phoenix-text-color-secondary);box-shadow:var(--phoenix-box-shadow);display:flex;flex-direction:column;z-index:120}.phoenix-menu-item-right .item-config>*{margin-bottom:.4rem}.phoenix-menu-item-right .item-config>*:last-child{margin-bottom:0}.phoenix-menu-item-right .item-config .item-config-single{display:flex;flex-direction:row}.phoenix-menu-item-right .item-config .item-config-single .item-config-label{width:30%}.phoenix-menu-item-right .item-config .item-config-single .item-config-data{flex-grow:1;padding-left:.5rem}.phoenix-menu-item .icon-wrapper{display:inline-block;width:1.3rem;height:1.3rem;padding:.23rem;transition:all .4s}.phoenix-menu-item .icon-wrapper.icon-button:hover{background:var(--phoenix-options-icon-bg);border-radius:40%;cursor:pointer}.phoenix-menu-item .icon-wrapper svg{width:100%;height:100%;vertical-align:top}.phoenix-menu-item .mat-slide-toggle-bar{width:30px!important}.phoenix-menu-item .mat-slide-toggle-thumb{width:15px!important;height:15px!important;position:absolute;top:2px}.phoenix-menu-item .mat-slider-horizontal{min-width:0;width:100%;height:20px}.phoenix-menu-item .mat-slider-horizontal .mat-slider-wrapper{top:10px}.phoenix-menu-item label.mat-checkbox-layout{margin:0}@media screen and (max-width: 768px){.phoenix-menu-item{font-size:.75rem;padding:.5rem}.phoenix-menu-item .icon-wrapper{width:1rem;height:1rem;padding:.15rem}}.phoenix-menu-children{margin-left:.5rem;border-left:1px solid var(--phoenix-accent)}.range-slider .range-slider-inputs{gap:20%}\n"],encapsulation:2})}return i})(),uS=(()=>{class i{rootNode;static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Kr({type:i,selectors:[["app-phoenix-menu"]],inputs:{rootNode:"rootNode"},decls:2,vars:1,consts:[["id","phoenixMenu"],[3,"currentNode"]],template:function(n,r){1&n&&(tn(0,"div",0),kr(1,"app-phoenix-menu-item",1),on()),2&n&&(Qn(1),Un("currentNode",r.rootNode))},dependencies:[zV],styles:["[_nghost-%COMP%]{width:15rem;max-width:45%;position:absolute;top:5rem;right:1rem}#phoenixMenu[_ngcontent-%COMP%]{background:var(--phoenix-background-color-secondary);max-height:75vh;overflow-y:auto;box-shadow:var(--phoenix-box-shadow);z-index:100}@media screen and (max-width: 768px){#phoenixMenu[_ngcontent-%COMP%]{top:4rem}}"]})}return i})(),HV=(()=>{class i{experimentLink;ngOnInit(){const t=new URL(window.location.href);t.searchParams.delete("embed"),this.experimentLink=t.toString()}goToExperiment(){window.open(this.experimentLink,"_blank")}static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Kr({type:i,selectors:[["app-experiment-link"]],decls:1,vars:0,consts:[["tooltip","See full event display","icon","link",3,"click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.goToExperiment()}),on())},dependencies:[Ec]})}return i})(),r2=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275cmp=Kr({type:i,selectors:[["app-embed-menu"]],decls:8,vars:0,consts:[["id","embedMenu"],["id","embedMenuInner"]],template:function(n,r){1&n&&(tn(0,"div",0)(1,"div",1),kr(2,"app-dark-theme")(3,"app-auto-rotate")(4,"app-main-view-toggle")(5,"app-animate-event")(6,"app-animate-camera")(7,"app-experiment-link"),on()())},dependencies:[R4,k4,O4,UF,L4,HV],styles:["#embedMenu[_ngcontent-%COMP%]{display:none}#embedMenu[_ngcontent-%COMP%]   #embedMenuInner[_ngcontent-%COMP%]{display:flex;position:absolute;left:1rem;bottom:1rem;background:var(--phoenix-background-color-secondary);border:1px solid var(--phoenix-background-color-tertiary);box-shadow:var(--phoenix-box-shadow);border-radius:30px;padding:.25rem 0}"]})}return i})(),VV=(()=>{class i{eventDisplay;phoenixMenuRoot=new Qw("Phoenix Menu","phoenix-menu");eventDataImportOptions=[Uh.JSON,Uh.JIVEXML,Uh.ZIP];loaded=!1;loadingProgress=0;constructor(t){this.eventDisplay=t}ngOnInit(){let t;t={eventFile:"assets/files/JiveXML/JiveXML_336567_2327102923.xml",eventType:"jivexml"};const n={eventDataLoader:new wy,presetViews:[new Nh("Left View",[0,0,-12e3],[0,0,0],"left-cube"),new Nh("Center View",[-500,12e3,0],[0,0,0],"top-cube"),new Nh("Right View",[0,0,12e3],[0,0,0],"right-cube")],defaultView:[4e3,0,4e3,0,0,0],phoenixMenuRoot:this.phoenixMenuRoot,defaultEventFile:t};this.eventDisplay.init(n),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Barrel-Toroid.gltf","Barrel Toroid","Magnets",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/End-Cap-Toroid.gltf","Endcap","Magnets",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Feet.gltf","Feet","Magnets",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Warm-Structure.gltf","Warm structure","Magnets",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Lar-Barrel.gltf","LAr Barrel","Calorimeters",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Lar-EMEC.gltf","LAr EC1","Calorimeters",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Lar-FCAL.gltf","LAr FCAL","Calorimeters",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Lar-HEC.gltf","LAr HEC","Calorimeters",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Tile-Barrel.gltf","Tile Cal","Calorimeters",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Tile-End-Cap.gltf","Tile Cal EC","Calorimeters",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Beam.gltf","Beam","Inner Detector",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Pixel.gltf","Pixel","Inner Detector",1e3,!0),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/SCT-BAR.gltf","SCT","Inner Detector",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/SCT-EC.gltf","SCT Endcaps","Inner Detector",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/TRT-BAR.gltf","TRT","Inner Detector",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/TRT-EC.gltf","TRT Endcaps","Inner Detector",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Extra-Wheel.gltf","Extra wheel","Muon Spectrometer > Endcaps",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Big-Wheel.gltf","Big wheel","Muon Spectrometer > Endcaps",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Outer-Wheel.gltf","Outer Wheel","Muon Spectrometer > Endcaps",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Muon-Barrel-Inner.gltf","Muon Barrel Inner","Muon Spectrometer > Barrel",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Muon-Barrel-Middle.gltf","Muon Barrel Middle","Muon Spectrometer > Barrel",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Muon-Barrel-Outer.gltf","Muon Barrel Outer","Muon Spectrometer > Barrel",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Muon-Big-Wheel-MDT.gltf","Big Wheel MDT ","Muon Spectrometer > Endcaps",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Small-Wheel-Chambers.gltf","Small Wheel","Muon Spectrometer > Endcaps",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Small-Wheel-Hub.gltf","Small Wheel Hub","Muon Spectrometer > Endcaps",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/Small-Wheel-NJD.gltf","Small Wheel Feet","Muon Spectrometer > Endcaps",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/TGC2.gltf","TGC2","Muon Spectrometer > Endcaps",1e3),this.eventDisplay.loadGLTFGeometry("assets/geometry/ATLAS/TGC3.gltf","TGC3","Muon Spectrometer > Endcaps",1e3),this.eventDisplay.getLoadingManager().addProgressListener(r=>this.loadingProgress=r),this.eventDisplay.getLoadingManager().addLoadListenerWithCheck(()=>{console.log("Loading default configuration."),this.loaded=!0,this.eventDisplay.getURLOptionsManager().getURLOptions().get("config")||(new zm).loadStateFromJSON(mae)})}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-atlas"]],decls:7,vars:4,consts:[[3,"loaded","progress"],[3,"eventDataImportOptions"],["logo","assets/images/atlas.svg","url","https://home.cern/science/experiments/atlas","tagline","ATLAS Experiment at CERN"],[3,"rootNode"],["id","eventDisplay"]],template:function(n,r){1&n&&kr(0,"app-loader",0)(1,"app-nav")(2,"app-ui-menu",1)(3,"app-embed-menu")(4,"app-experiment-info",2)(5,"app-phoenix-menu",3)(6,"div",4),2&n&&(Un("loaded",r.loaded)("progress",r.loadingProgress),Qn(2),Un("eventDataImportOptions",r.eventDataImportOptions),Qn(3),Un("rootNode",r.phoenixMenuRoot))},dependencies:[mb,cS,N4,uS,gb,r2]})}return i})(),GV=(()=>{class i{eventDisplay;interval;active=!1;intervalId;events;constructor(t){this.eventDisplay=t}ngOnInit(){this.eventDisplay.listenToLoadedEventsChange(t=>this.events=t)}toggleCycle(){this.active=!this.active,clearInterval(this.intervalId),this.active&&this.startCycleInterval()}startCycleInterval(t=0){let n=t;this.intervalId=setInterval(()=>{n=n>=this.events.length?0:n+1,this.eventDisplay.loadEvent(this.events[n])},this.interval)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-cycle-events"]],inputs:{interval:"interval"},decls:1,vars:1,consts:[["tooltip","Cycle through events","icon","cycle-events",3,"active","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.toggleCycle()}),on()),2&n&&Un("active",r.active)},dependencies:[Ec],encapsulation:2})}return i})(),rpe=(()=>{class i{eventDisplay;open=!1;constructor(t){this.eventDisplay=t}moveVP(t,n){for(const r of["Modules","Support","RFFoil","DeliveryPipes"])t.getObjectByName("VP > Left > "+r).position.setComponent(0,n),t.getObjectByName("VP > Right > "+r).position.setComponent(0,-n)}toggleVP(){this.open=!this.open,this.moveVP(this.eventDisplay.getThreeManager().getSceneManager(),this.open?30:0)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-vp-toggle"]],decls:1,vars:2,consts:[[3,"tooltip","icon","click"]],template:function(n,r){1&n&&(tn(0,"app-menu-toggle",0),ki("click",function(){return r.toggleVP()}),on()),2&n&&Un("tooltip",(r.open?"Close":"Open")+"VP")("icon",r.open?"closevp":"openvp")},dependencies:[Ec]})}return i})(),spe=(()=>{class i{eventDisplay;events;phoenixMenuRoot=new Qw("Phoenix Menu","phoenix-menu");loaded=!1;loadingProgress=0;eventDataImportOptions=[Uh.JSON,Uh.ZIP];constructor(t){this.eventDisplay=t}ngOnInit(){const t={eventDataLoader:new wy,presetViews:[new Nh("Global View",[-8e3,6e3,0],[0,0,8e3],"perspective",_y.On,90,90),new Nh("Calo View",[-8e3,6e3,16e3],[0,0,12e3],"perspective",_y.On,90,90),new Nh("Side View",[-12e3,0,12e3],[0,0,12e3],"right-cube"),new Nh("Vertex Locator View",[-500,1e3,0],[0,0,0],"top-cube"),new Nh("Front View",[0,0,-6e3],[0,0,0],"left-cube"),new Nh("Top View",[0,16e3,12e3],[0,0,12e3],"top-cube")],defaultView:[-8e3,6e3,0,0,0,8e3],phoenixMenuRoot:this.phoenixMenuRoot,defaultEventFile:{eventFile:"assets/files/lhcb/LHCbEventData.json",eventType:"json"}};this.eventDisplay.init(t);try{this.eventDisplay.loadGLTFGeometry("assets/geometry/LHCb/LHCb.glb",void 0,void 0,1,!0)}catch(n){console.log("Error:",n)}this.eventDisplay.getLoadingManager().addProgressListener(n=>this.loadingProgress=n),this.eventDisplay.getLoadingManager().addLoadListenerWithCheck(()=>this.loaded=!0)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-lhcb"]],decls:28,vars:5,consts:[[3,"loaded","progress"],[3,"interval"],[3,"eventDataImportOptions"],["logo","assets/images/lhcb.svg","url","https://home.cern/science/experiments/lhcb","tagline","LHCb Experiment at CERN"],[3,"rootNode"],["id","eventDisplay"]],template:function(n,r){1&n&&(kr(0,"app-loader",0)(1,"app-nav"),tn(2,"app-ui-menu-wrapper"),kr(3,"app-event-selector")(4,"app-cycle-events",1)(5,"app-zoom-controls")(6,"app-view-options")(7,"app-auto-rotate")(8,"app-dark-theme")(9,"app-object-clipping")(10,"app-main-view-toggle")(11,"app-overlay-view")(12,"app-object-selection")(13,"app-info-panel")(14,"app-animate-event")(15,"app-collections-info")(16,"app-performance-toggle")(17,"app-vr-toggle")(18,"app-ar-toggle")(19,"app-ss-mode")(20,"app-make-picture")(21,"app-io-options",2)(22,"app-share-link")(23,"app-vp-toggle"),on(),kr(24,"app-embed-menu")(25,"app-experiment-info",3)(26,"app-phoenix-menu",4)(27,"div",5)),2&n&&(Un("loaded",r.loaded)("progress",r.loadingProgress),Qn(4),Un("interval",5e3),Qn(17),Un("eventDataImportOptions",r.eventDataImportOptions),Qn(5),Un("rootNode",r.phoenixMenuRoot))},dependencies:[mb,zF,yR,SR,TR,ER,DR,BR,R4,k4,IR,N4,PR,O4,FR,uS,L4,RR,kR,OR,LR,NR,gb,UR,r2,GV,rpe]})}return i})(),ope=(()=>{class i{eventDisplay;phoenixMenuRoot=new Qw("Phoenix Menu","phoenix-menu");loaded=!1;loadingProgress=0;eventDataImportOptions=[Uh.JSON,Uh.IG];constructor(t){this.eventDisplay=t}ngOnInit(){const t=new T9,n={eventDataLoader:t,presetViews:[new Nh("Left View",[0,0,-12e3],[0,0,0],"left-cube"),new Nh("Center View",[-500,12e3,0],[0,0,0],"top-cube"),new Nh("Right View",[0,0,12e3],[0,0,0],"right-cube")],defaultView:[4e3,0,4e3,0,0,0],phoenixMenuRoot:this.phoenixMenuRoot};this.eventDisplay.init(n),this.eventDisplay.loadRootJSONGeometry("https://root.cern/js/files/geom/cms.json.gz","CMS Detector",void 0,10,!0),t.readIgArchive("assets/files/cms/Hto4l_120-130GeV.ig",r=>{const s=t.getAllEventsData(r);this.eventDisplay.parsePhoenixEvents(s)}),this.eventDisplay.getLoadingManager().addProgressListener(r=>this.loadingProgress=r),this.eventDisplay.getLoadingManager().addLoadListenerWithCheck(()=>this.loaded=!0)}static \u0275fac=function(n){return new(n||i)(Et(Bl))};static \u0275cmp=Kr({type:i,selectors:[["app-cms"]],decls:7,vars:4,consts:[[3,"loaded","progress"],[3,"eventDataImportOptions"],["logo","assets/images/cms.svg","url","https://home.cern/science/experiments/cms","tagline","CMS Experiment at LHC, CERN"],[3,"rootNode"],["id","eventDisplay"]],template:function(n,r){1&n&&kr(0,"app-loader",0)(1,"app-nav")(2,"app-ui-menu",1)(3,"app-embed-menu")(4,"app-experiment-info",2)(5,"app-phoenix-menu",3)(6,"div",4),2&n&&(Un("loaded",r.loaded)("progress",r.loadingProgress),Qn(2),Un("eventDataImportOptions",r.eventDataImportOptions),Qn(3),Un("rootNode",r.phoenixMenuRoot))},dependencies:[mb,cS,N4,uS,gb,r2]})}return i})(),ape=(()=>{class i{eventDisplay;http;hitsFile="assets/files/TrackML/event000001000-hits.csv";particlesFile="assets/files/TrackML/event000001000-particles.csv";truthFile="assets/files/TrackML/event000001000-truth.csv";filesProcessed=0;numFiles=3;trackMLLoader;httpOptions={headers:new jg({}),responseType:"text"};phoenixMenuRoot=new Qw("Phoenix Menu","phoenix-menu");loaded=!1;loadingProgress=0;constructor(t,n){this.eventDisplay=t,this.http=n}ngOnInit(){this.trackMLLoader=new lae;const t={eventDataLoader:this.trackMLLoader,presetViews:[new Nh("Right View",[0,0,6e3],[0,0,0],"right-cube"),new Nh("Center View",[-500,1e3,0],[0,0,0],"top-cube"),new Nh("Left View",[0,0,-6e3],[0,0,0],"left-cube")],defaultView:[4e3,0,4e3,0,0,0],phoenixMenuRoot:this.phoenixMenuRoot};this.eventDisplay.init(t),this.eventDisplay.loadOBJGeometry("assets/geometry/TrackML/strip_long_simplified.obj","Long Strip",15311419,void 0,!0),this.eventDisplay.loadOBJGeometry("assets/geometry/TrackML/pixel_simplified.obj","Pixel",14854632,void 0,!0),this.eventDisplay.loadOBJGeometry("assets/geometry/TrackML/strip_short_simplified.obj","Short Strip",3579797,void 0,!0),this.eventDisplay.loadOBJGeometry("assets/geometry/TrackML/beampipe_simplified.obj","Beampipe",8355711,void 0,!0),this.eventDisplay.loadOBJGeometry("assets/geometry/TrackML/pixel_support_tube_simplified.obj","PST",8107007,void 0,!0),this.loadTrackMLData(),this.eventDisplay.getLoadingManager().addProgressListener(n=>this.loadingProgress=n),this.eventDisplay.getLoadingManager().addLoadListenerWithCheck(()=>this.loaded=!0)}loadTrackMLData(){this.http.get(this.hitsFile,this.httpOptions).subscribe(t=>{this.loadHits(t),this.http.get(this.particlesFile,this.httpOptions).subscribe(n=>{this.loadParticles(n),this.http.get(this.truthFile,this.httpOptions).subscribe(r=>this.loadTruth(r))})})}loadHits(t){console.log("loading hits"),this.trackMLLoader.processHits(t),this.filesProcessed++,this.finishConversion()}loadParticles(t){console.log("loading particles"),this.trackMLLoader.processParticles(t),this.filesProcessed++,this.finishConversion()}loadTruth(t){console.log("loading truth"),this.trackMLLoader.processTruth(t),this.filesProcessed++,this.finishConversion()}finishConversion(){if(this.filesProcessed===this.numFiles){const t=this.trackMLLoader.getEventData("TrackMLEvent");this.eventDisplay.buildEventDataFromJSON(t)}}static \u0275fac=function(n){return new(n||i)(Et(Bl),Et(bM))};static \u0275cmp=Kr({type:i,selectors:[["app-trackml"]],decls:6,vars:3,consts:[[3,"loaded","progress"],[3,"rootNode"],["id","eventDisplay"]],template:function(n,r){1&n&&kr(0,"app-loader",0)(1,"app-nav")(2,"app-ui-menu")(3,"app-embed-menu")(4,"app-phoenix-menu",1)(5,"div",2),2&n&&(Un("loaded",r.loaded)("progress",r.loadingProgress),Qn(4),Un("rootNode",r.phoenixMenuRoot))},dependencies:[mb,cS,uS,gb,r2]})}return i})(),vpe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[Eu,Eu]}),i})(),Tpe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({}),i})(),pAe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({imports:[K1,Eu,zC,xb,N9,DF,Eu]}),i})(),kAe=(()=>{class i{injector;constructor(t){this.injector=t}handleError(t){console.error("ERROR IN PHOENIX APP","\n",t),this.injector.get(fF).setError(t)}static \u0275fac=function(n){return new(n||i)(oi($c))};static \u0275prov=Ue({token:i,factory:i.\u0275fac})}return i})(),OAe=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Xs({type:i});static \u0275inj=pt({providers:[Bl,fF,{provide:ud,useClass:kAe}],imports:[K1,b6,xhe,ude,xde,zce,WC,Que,Cce,dfe,Qde,Ife,ihe,vpe,Tpe,pAe]})}return i})(),LAe=(()=>{class i{eventDisplay;http;loaded=!1;loadingProgress=0;constructor(t,n){this.eventDisplay=t,this.http=n}ngOnInit(){const t={presetViews:[new Nh("Left View",[0,0,-12e3],[0,0,0],"left-cube"),new Nh("Center View",[-500,12e3,0],[0,0,0],"top-cube"),new Nh("Right View",[0,0,12e3],[0,0,0],"right-cube")]};this.eventDisplay.init(t),this.eventDisplay.getLoadingManager().addProgressListener(n=>this.loadingProgress=n),this.eventDisplay.getLoadingManager().addLoadListenerWithCheck(()=>this.loaded=!0)}static \u0275fac=function(n){return new(n||i)(Et(Bl),Et(bM))};static \u0275cmp=Kr({type:i,selectors:[["app-playground"]],decls:5,vars:2,consts:[[3,"loaded","progress"],["id","eventDisplay"]],template:function(n,r){1&n&&kr(0,"app-loader",0)(1,"app-nav")(2,"app-ui-menu")(3,"app-embed-menu")(4,"div",1),2&n&&Un("loaded",r.loaded)("progress",r.loadingProgress)},dependencies:[mb,cS,gb,r2]})}return i})();function cG(i){return new pi(3e3,!1)}function _me(){return typeof window<"u"&&typeof window.document<"u"}function qR(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Dy(i){switch(i.length){case 0:return new VC;case 1:return i[0];default:return new pz(i)}}function uG(i,e,t,n,r=new Map,s=new Map){const a=[],l=[];let u=-1,d=null;if(n.forEach(A=>{const y=A.get("offset"),C=y==u,k=C&&d||new Map;A.forEach((Q,se)=>{let he=se,re=Q;if("offset"!==se)switch(he=e.normalizePropertyName(he,a),re){case RF:re=r.get(se);break;case V_:re=s.get(se);break;default:re=e.normalizeStyleValue(se,he,re,a)}k.set(he,re)}),C||l.push(k),d=k,u=y}),a.length)throw function ome(i){return new pi(3502,!1)}();return l}function QR(i,e,t,n){switch(e){case"start":i.onStart(()=>n(t&&WR(t,"start",i)));break;case"done":i.onDone(()=>n(t&&WR(t,"done",i)));break;case"destroy":i.onDestroy(()=>n(t&&WR(t,"destroy",i)))}}function WR(i,e,t){const s=jR(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,t.totalTime??i.totalTime,!!t.disabled),a=i._data;return null!=a&&(s._data=a),s}function jR(i,e,t,n,r="",s=0,a){return{element:i,triggerName:e,fromState:t,toState:n,phaseName:r,totalTime:s,disabled:!!a}}function Kp(i,e,t){let n=i.get(e);return n||i.set(e,n=t),n}function hG(i){const e=i.indexOf(":");return[i.substring(1,e),i.slice(e+1)]}let $R=(i,e)=>!1,dG=(i,e,t)=>[],fG=null;function XR(i){const e=i.parentNode||i.host;return e===fG?null:e}(qR()||typeof Element<"u")&&(_me()?(fG=(()=>document.documentElement)(),$R=(i,e)=>{for(;e;){if(e===i)return!0;e=XR(e)}return!1}):$R=(i,e)=>i.contains(e),dG=(i,e,t)=>{if(t)return Array.from(i.querySelectorAll(e));const n=i.querySelector(e);return n?[n]:[]});let Bb=null,pG=!1;const AG=$R,mG=dG;let gG=(()=>{class i{validateStyleProperty(t){return function vme(i){Bb||(Bb=function bme(){return typeof document<"u"?document.body:null}()||{},pG=!!Bb.style&&"WebkitAppearance"in Bb.style);let e=!0;return Bb.style&&!function yme(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in Bb.style,!e&&pG&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in Bb.style)),e}(t)}matchesElement(t,n){return!1}containsElement(t,n){return AG(t,n)}getParentElement(t){return XR(t)}query(t,n,r){return mG(t,n,r)}computeStyle(t,n,r){return r||""}animate(t,n,r,s,a,l=[],u){return new VC(r,s)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})(),KR=(()=>{class i{}return i.NOOP=new gG,i})();const xme=1e3,YR="ng-enter",Q4="ng-leave",W4="ng-trigger",j4=".ng-trigger",yG="ng-animating",ZR=".ng-animating";function q_(i){if("number"==typeof i)return i;const e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:JR(parseFloat(e[1]),e[2])}function JR(i,e){return"s"===e?i*xme:i}function $4(i,e,t){return i.hasOwnProperty("duration")?i:function Mme(i,e,t){let r,s=0,a="";if("string"==typeof i){const l=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===l)return e.push(cG()),{duration:0,delay:0,easing:""};r=JR(parseFloat(l[1]),l[2]);const u=l[3];null!=u&&(s=JR(parseFloat(u),l[4]));const d=l[5];d&&(a=d)}else r=i;if(!t){let l=!1,u=e.length;r<0&&(e.push(function NAe(){return new pi(3100,!1)}()),l=!0),s<0&&(e.push(function UAe(){return new pi(3101,!1)}()),l=!0),l&&e.splice(u,0,cG())}return{duration:r,delay:s,easing:a}}(i,e,t)}function fS(i,e={}){return Object.keys(i).forEach(t=>{e[t]=i[t]}),e}function vG(i){const e=new Map;return Object.keys(i).forEach(t=>{e.set(t,i[t])}),e}function By(i,e=new Map,t){if(t)for(let[n,r]of t)e.set(n,r);for(let[n,r]of i)e.set(n,r);return e}function xG(i,e,t){return t?e+":"+t+";":""}function wG(i){let e="";for(let t=0;t<i.style.length;t++){const n=i.style.item(t);e+=xG(0,n,i.style.getPropertyValue(n))}for(const t in i.style)i.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=xG(0,Eme(t),i.style[t]));i.setAttribute("style",e)}function p0(i,e,t){i.style&&(e.forEach((n,r)=>{const s=tk(r);t&&!t.has(r)&&t.set(r,i.style[s]),i.style[s]=n}),qR()&&wG(i))}function Ib(i,e){i.style&&(e.forEach((t,n)=>{const r=tk(n);i.style[r]=""}),qR()&&wG(i))}function pS(i){return Array.isArray(i)?1==i.length?i[0]:uz(i):i}const ek=new RegExp("{{\\s*(.+?)\\s*}}","g");function MG(i){let e=[];if("string"==typeof i){let t;for(;t=ek.exec(i);)e.push(t[1]);ek.lastIndex=0}return e}function AS(i,e,t){const n=i.toString(),r=n.replace(ek,(s,a)=>{let l=e[a];return null==l&&(t.push(function HAe(i){return new pi(3003,!1)}()),l=""),l.toString()});return r==n?i:r}function X4(i){const e=[];let t=i.next();for(;!t.done;)e.push(t.value),t=i.next();return e}const Tme=/-+([a-z0-9])/g;function tk(i){return i.replace(Tme,(...e)=>e[1].toUpperCase())}function Eme(i){return i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Yp(i,e,t){switch(e.type){case 7:return i.visitTrigger(e,t);case 0:return i.visitState(e,t);case 1:return i.visitTransition(e,t);case 2:return i.visitSequence(e,t);case 3:return i.visitGroup(e,t);case 4:return i.visitAnimate(e,t);case 5:return i.visitKeyframes(e,t);case 6:return i.visitStyle(e,t);case 8:return i.visitReference(e,t);case 9:return i.visitAnimateChild(e,t);case 10:return i.visitAnimateRef(e,t);case 11:return i.visitQuery(e,t);case 12:return i.visitStagger(e,t);default:throw function VAe(i){return new pi(3004,!1)}()}}function CG(i,e){return window.getComputedStyle(i)[e]}const Z4="*";function Rme(i,e){const t=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(n=>function kme(i,e,t){if(":"==i[0]){const u=function Ome(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(function nme(i){return new pi(3016,!1)}()),"* => *"}}(i,t);if("function"==typeof u)return void e.push(u);i=u}const n=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(function tme(i){return new pi(3015,!1)}()),e;const r=n[1],s=n[2],a=n[3];e.push(SG(r,a));"<"==s[0]&&!(r==Z4&&a==Z4)&&e.push(SG(a,r))}(n,t,e)):t.push(i),t}const J4=new Set(["true","1"]),eD=new Set(["false","0"]);function SG(i,e){const t=J4.has(i)||eD.has(i),n=J4.has(e)||eD.has(e);return(r,s)=>{let a=i==Z4||i==r,l=e==Z4||e==s;return!a&&t&&"boolean"==typeof r&&(a=r?J4.has(i):eD.has(i)),!l&&n&&"boolean"==typeof s&&(l=s?J4.has(e):eD.has(e)),a&&l}}const Lme=new RegExp("s*:selfs*,?","g");function nk(i,e,t,n){return new Nme(i).build(e,t,n)}class Nme{constructor(e){this._driver=e}build(e,t,n){const r=new Hme(t);return this._resetContextStyleTimingState(r),Yp(this,pS(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,r=t.depCount=0;const s=[],a=[];return"@"==e.name.charAt(0)&&t.errors.push(function qAe(){return new pi(3006,!1)}()),e.definitions.forEach(l=>{if(this._resetContextStyleTimingState(t),0==l.type){const u=l,d=u.name;d.toString().split(/\s*,\s*/).forEach(A=>{u.name=A,s.push(this.visitState(u,t))}),u.name=d}else if(1==l.type){const u=this.visitTransition(l,t);n+=u.queryCount,r+=u.depCount,a.push(u)}else t.errors.push(function QAe(){return new pi(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:a,queryCount:n,depCount:r,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,a=r||{};n.styles.forEach(l=>{l instanceof Map&&l.forEach(u=>{MG(u).forEach(d=>{a.hasOwnProperty(d)||s.add(d)})})}),s.size&&(X4(s.values()),t.errors.push(function WAe(i,e){return new pi(3008,!1)}()))}return{type:0,name:e.name,style:n,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=Yp(this,pS(e.animation),t);return{type:1,matchers:Rme(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:Pb(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>Yp(this,n,t)),options:Pb(e.options)}}visitGroup(e,t){const n=t.currentTime;let r=0;const s=e.steps.map(a=>{t.currentTime=n;const l=Yp(this,a,t);return r=Math.max(r,t.currentTime),l});return t.currentTime=r,{type:3,steps:s,options:Pb(e.options)}}visitAnimate(e,t){const n=function Gme(i,e){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return ik($4(i,e).duration,0,"");const t=i;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=ik(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=$4(t,e);return ik(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let r,s=e.styles?e.styles:zh({});if(5==s.type)r=this.visitKeyframes(s,t);else{let a=e.styles,l=!1;if(!a){l=!0;const d={};n.easing&&(d.easing=n.easing),a=zh(d)}t.currentTime+=n.duration+n.delay;const u=this.visitStyle(a,t);u.isEmptyStep=l,r=u}return t.currentAnimateTimings=null,{type:4,timings:n,style:r,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let l of r)"string"==typeof l?l===V_?n.push(l):t.errors.push(new pi(3002,!1)):n.push(vG(l));let s=!1,a=null;return n.forEach(l=>{if(l instanceof Map&&(l.has("easing")&&(a=l.get("easing"),l.delete("easing")),!s))for(let u of l.values())if(u.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:n,easing:a,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(a=>{"string"!=typeof a&&a.forEach((l,u)=>{const d=t.collectedStyles.get(t.currentQuerySelector),A=d.get(u);let y=!0;A&&(s!=r&&s>=A.startTime&&r<=A.endTime&&(t.errors.push(function $Ae(i,e,t,n,r){return new pi(3010,!1)}()),y=!1),s=A.startTime),y&&d.set(u,{startTime:s,endTime:r}),t.options&&function Sme(i,e,t){const n=e.params||{},r=MG(i);r.length&&r.forEach(s=>{n.hasOwnProperty(s)||t.push(function zAe(i){return new pi(3001,!1)}())})}(l,t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function XAe(){return new pi(3011,!1)}()),n;let s=0;const a=[];let l=!1,u=!1,d=0;const A=e.steps.map(re=>{const Le=this._makeStyleAst(re,t);let be=null!=Le.offset?Le.offset:function Vme(i){if("string"==typeof i)return null;let e=null;if(Array.isArray(i))i.forEach(t=>{if(t instanceof Map&&t.has("offset")){const n=t;e=parseFloat(n.get("offset")),n.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const t=i;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Le.styles),Ye=0;return null!=be&&(s++,Ye=Le.offset=be),u=u||Ye<0||Ye>1,l=l||Ye<d,d=Ye,a.push(Ye),Le});u&&t.errors.push(function KAe(){return new pi(3012,!1)}()),l&&t.errors.push(function YAe(){return new pi(3200,!1)}());const y=e.steps.length;let C=0;s>0&&s<y?t.errors.push(function ZAe(){return new pi(3202,!1)}()):0==s&&(C=1/(y-1));const k=y-1,Q=t.currentTime,se=t.currentAnimateTimings,he=se.duration;return A.forEach((re,Le)=>{const be=C>0?Le==k?1:C*Le:a[Le],Ye=be*he;t.currentTime=Q+se.delay+Ye,se.duration=Ye,this._validateStyleAst(re,t),re.offset=be,n.styles.push(re)}),n}visitReference(e,t){return{type:8,animation:Yp(this,pS(e.animation),t),options:Pb(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Pb(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Pb(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,a]=function Ume(i){const e=!!i.split(/\s*,\s*/).find(t=>":self"==t);return e&&(i=i.replace(Lme,"")),i=i.replace(/@\*/g,j4).replace(/@\w+/g,t=>j4+"-"+t.slice(1)).replace(/:animating/g,ZR),[i,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,Kp(t.collectedStyles,t.currentQuerySelector,new Map);const l=Yp(this,pS(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:a,animation:l,originalSelector:e.selector,options:Pb(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function JAe(){return new pi(3013,!1)}());const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:$4(e.timings,t.errors,!0);return{type:12,animation:Yp(this,pS(e.animation),t),timings:n,options:null}}}class Hme{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Pb(i){return i?(i=fS(i)).params&&(i.params=function zme(i){return i?fS(i):null}(i.params)):i={},i}function ik(i,e,t){return{duration:i,delay:e,easing:t}}function rk(i,e,t,n,r,s,a=null,l=!1){return{type:1,element:i,keyframes:e,preStyleProps:t,postStyleProps:n,duration:r,delay:s,totalTime:r+s,easing:a,subTimeline:l}}class tD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Wme=new RegExp(":enter","g"),$me=new RegExp(":leave","g");function sk(i,e,t,n,r,s=new Map,a=new Map,l,u,d=[]){return(new Xme).buildKeyframes(i,e,t,n,r,s,a,l,u,d)}class Xme{buildKeyframes(e,t,n,r,s,a,l,u,d,A=[]){d=d||new tD;const y=new ok(e,t,d,r,s,A,[]);y.options=u;const C=u.delay?q_(u.delay):0;y.currentTimeline.delayNextStep(C),y.currentTimeline.setStyles([a],null,y.errors,u),Yp(this,n,y);const k=y.timelines.filter(Q=>Q.containsAnimation());if(k.length&&l.size){let Q;for(let se=k.length-1;se>=0;se--){const he=k[se];if(he.element===t){Q=he;break}}Q&&!Q.allowOnlyTimelineStyles()&&Q.setStyles([l],null,y.errors,u)}return k.length?k.map(Q=>Q.buildKeyframes()):[rk(t,[],[],[],0,C,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.get(t.element);if(n){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,a=this._visitSubInstructions(n,r,r.options);s!=a&&t.transformIntoNewTimeline(a)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,n),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,n){for(const r of e){const s=r?.delay;if(s){const a="number"==typeof s?s:q_(AS(s,r?.params??{},t.errors));n.delayNextStep(a)}}}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime;const a=null!=n.duration?q_(n.duration):null,l=null!=n.delay?q_(n.delay):null;return 0!==a&&e.forEach(u=>{const d=t.appendInstructionToTimeline(u,a,l);s=Math.max(s,d.duration+d.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Yp(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=nD);const a=q_(s.delay);r.delayNextStep(a)}e.steps.length&&(e.steps.forEach(a=>Yp(this,a,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>n&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?q_(e.options.delay):0;e.steps.forEach(a=>{const l=t.createSubContext(e.options);s&&l.delayNextStep(s),Yp(this,a,l),r=Math.max(r,l.currentTimeline.currentTime),n.push(l.currentTimeline)}),n.forEach(a=>t.currentTimeline.mergeTimelineCollectedStyles(a)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return $4(t.params?AS(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,r=t.currentAnimateTimings;!r&&n.hasCurrentStyleProperties()&&n.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,r=t.currentTimeline.duration,s=n.duration,l=t.createSubContext().currentTimeline;l.easing=n.easing,e.styles.forEach(u=>{l.forwardTime((u.offset||0)*s),l.setStyles(u.styles,u.easing,t.errors,t.options),l.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(l),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?q_(r.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=nD);let a=n;const l=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=l.length;let u=null;l.forEach((d,A)=>{t.currentQueryIndex=A;const y=t.createSubContext(e.options,d);s&&y.delayNextStep(s),d===t.element&&(u=y.currentTimeline),Yp(this,e.animation,y),y.currentTimeline.applyStylesToKeyframe(),a=Math.max(a,y.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(a),u&&(t.currentTimeline.mergeTimelineCollectedStyles(u),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,r=t.currentTimeline,s=e.timings,a=Math.abs(s.duration),l=a*(t.currentQueryTotal-1);let u=a*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":u=l-u;break;case"full":u=n.currentStaggerTime}const A=t.currentTimeline;u&&A.delayNextStep(u);const y=A.currentTime;Yp(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=r.currentTime-y+(r.startTime-n.currentTimeline.startTime)}}const nD={};class ok{constructor(e,t,n,r,s,a,l,u){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=r,this._leaveClassName=s,this.errors=a,this.timelines=l,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=nD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=u||new iD(this._driver,t,0),l.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let r=this.options;null!=n.duration&&(r.duration=q_(n.duration)),null!=n.delay&&(r.delay=q_(n.delay));const s=n.params;if(s){let a=r.params;a||(a=this.options.params={}),Object.keys(s).forEach(l=>{(!t||!a.hasOwnProperty(l))&&(a[l]=AS(s[l],a,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(r=>{n[r]=t[r]})}}return e}createSubContext(e=null,t,n){const r=t||this.element,s=new ok(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=nD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(n??0)+e.delay,easing:""},s=new Kme(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,r,s,a){let l=[];if(r&&l.push(this.element),e.length>0){e=(e=e.replace(Wme,"."+this._enterClassName)).replace($me,"."+this._leaveClassName);let d=this._driver.query(this.element,e,1!=n);0!==n&&(d=n<0?d.slice(d.length+n,d.length):d.slice(0,n)),l.push(...d)}return!s&&0==l.length&&a.push(function eme(i){return new pi(3014,!1)}()),l}}class iD{constructor(e,t,n,r){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new iD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,n]of this._globalTimelineStyles)this._backFill.set(t,n||V_),this._currentKeyframe.set(t,V_);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},a=function Yme(i,e){const t=new Map;let n;return i.forEach(r=>{if("*"===r){n=n||e.keys();for(let s of n)t.set(s,V_)}else By(r,t)}),t}(e,this._globalTimelineStyles);for(let[l,u]of a){const d=AS(u,s,n);this._pendingStyles.set(l,d),this._localTimelineStyles.has(l)||this._backFill.set(l,this._globalTimelineStyles.get(l)??V_),this._updateStyle(l,d)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,n)=>{const r=this._styleSummary.get(n);(!r||t.time>r.time)&&this._updateStyle(n,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((l,u)=>{const d=By(l,new Map,this._backFill);d.forEach((A,y)=>{A===RF?e.add(y):A===V_&&t.add(y)}),n||d.set("offset",u/this.duration),r.push(d)});const s=e.size?X4(e.values()):[],a=t.size?X4(t.values()):[];if(n){const l=r[0],u=new Map(l);l.set("offset",0),u.set("offset",1),r=[l,u]}return rk(this.element,r,s,a,this.duration,this.startTime,this.easing,!1)}}class Kme extends iD{constructor(e,t,n,r,s,a,l=!1){super(e,t,a.delay),this.keyframes=n,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=l,this.timings={duration:a.duration,delay:a.delay,easing:a.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],a=n+t,l=t/a,u=By(e[0]);u.set("offset",0),s.push(u);const d=By(e[0]);d.set("offset",DG(l)),s.push(d);const A=e.length-1;for(let y=1;y<=A;y++){let C=By(e[y]);const k=C.get("offset");C.set("offset",DG((t+k*n)/a)),s.push(C)}n=a,t=0,r="",e=s}return rk(this.element,e,this.preStyleProps,this.postStyleProps,n,t,r,!0)}}function DG(i,e=3){const t=Math.pow(10,e-1);return Math.round(i*t)/t}class ak{}const Zme=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class Jme extends ak{normalizePropertyName(e,t){return tk(e)}normalizeStyleValue(e,t,n,r){let s="";const a=n.toString().trim();if(Zme.has(t)&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const l=n.match(/^[+-]?[\d\.]+([a-z]*)$/);l&&0==l[1].length&&r.push(function GAe(i,e){return new pi(3005,!1)}())}return a+s}}function BG(i,e,t,n,r,s,a,l,u,d,A,y,C){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:n,toStyles:a,timelines:l,queriedElements:u,preStyleProps:d,postStyleProps:A,totalTime:y,errors:C}}const lk={};class IG{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,r){return function ege(i,e,t,n,r){return i.some(s=>s(e,t,n,r))}(this.ast.matchers,e,t,n,r)}buildStyles(e,t,n){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,n):new Map}build(e,t,n,r,s,a,l,u,d,A){const y=[],C=this.ast.options&&this.ast.options.params||lk,Q=this.buildStyles(n,l&&l.params||lk,y),se=u&&u.params||lk,he=this.buildStyles(r,se,y),re=new Set,Le=new Map,be=new Map,Ye="void"===r,dt={params:tge(se,C),delay:this.ast.options?.delay},xt=A?[]:sk(e,t,this.ast.animation,s,a,Q,he,dt,d,y);let $t=0;if(xt.forEach(gt=>{$t=Math.max(gt.duration+gt.delay,$t)}),y.length)return BG(t,this._triggerName,n,r,Ye,Q,he,[],[],Le,be,$t,y);xt.forEach(gt=>{const Wt=gt.element,Nn=Kp(Le,Wt,new Set);gt.preStyleProps.forEach(Rn=>Nn.add(Rn));const yi=Kp(be,Wt,new Set);gt.postStyleProps.forEach(Rn=>yi.add(Rn)),Wt!==t&&re.add(Wt)});const nn=X4(re.values());return BG(t,this._triggerName,n,r,Ye,Q,he,xt,nn,Le,be,$t)}}function tge(i,e){const t=fS(e);for(const n in i)i.hasOwnProperty(n)&&null!=i[n]&&(t[n]=i[n]);return t}class nge{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n=new Map,r=fS(this.defaultParams);return Object.keys(e).forEach(s=>{const a=e[s];null!==a&&(r[s]=a)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((a,l)=>{a&&(a=AS(a,r,t));const u=this.normalizer.normalizePropertyName(l,t);a=this.normalizer.normalizeStyleValue(l,u,a,t),n.set(l,a)})}),n}}class rge{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new nge(r.style,r.options&&r.options.params||{},n))}),PG(this.states,"true","1"),PG(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new IG(e,r,this.states))}),this.fallbackTransition=function sge(i,e,t){return new IG(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(a,l)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,r){return this.transitionFactories.find(a=>a.match(e,t,n,r))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function PG(i,e,t){i.has(e)?i.has(t)||i.set(t,i.get(e)):i.has(t)&&i.set(e,i.get(t))}const oge=new tD;class age{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const n=[],r=[],s=nk(this._driver,t,n,r);if(n.length)throw function ame(i){return new pi(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,n){const r=e.element,s=uG(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const r=[],s=this._animations.get(e);let a;const l=new Map;if(s?(a=sk(this._driver,t,s,YR,Q4,new Map,new Map,n,oge,r),a.forEach(A=>{const y=Kp(l,A.element,new Map);A.postStyleProps.forEach(C=>y.set(C,null))})):(r.push(function lme(){return new pi(3300,!1)}()),a=[]),r.length)throw function cme(i){return new pi(3504,!1)}();l.forEach((A,y)=>{A.forEach((C,k)=>{A.set(k,this._driver.computeStyle(y,k,V_))})});const d=Dy(a.map(A=>{const y=l.get(A.element);return this._buildPlayer(A,new Map,y)}));return this._playersById.set(e,d),d.onDestroy(()=>this.destroy(e)),this.players.push(d),d}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function ume(i){return new pi(3301,!1)}();return t}listen(e,t,n,r){const s=jR(t,"","","");return QR(this._getPlayer(e),n,s,r),()=>{}}command(e,t,n,r){if("register"==n)return void this.register(e,r[0]);if("create"==n)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const FG="ng-animate-queued",ck="ng-animate-disabled",dge=[],RG={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},fge={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},qA="__ng_removed";class uk{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=function gge(i){return i??null}(n?e.value:e),n){const s=fS(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(r=>{null==n[r]&&(n[r]=t[r])})}}}const mS="void",hk=new uk(mS);class pge{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,QA(t,this._hostClassName)}listen(e,t,n,r){if(!this._triggers.has(t))throw function hme(i,e){return new pi(3302,!1)}();if(null==n||0==n.length)throw function dme(i){return new pi(3303,!1)}();if(!function _ge(i){return"start"==i||"done"==i}(n))throw function fme(i,e){return new pi(3400,!1)}();const s=Kp(this._elementListeners,e,[]),a={name:t,phase:n,callback:r};s.push(a);const l=Kp(this._engine.statesByElement,e,new Map);return l.has(t)||(QA(e,W4),QA(e,W4+"-"+t),l.set(t,hk)),()=>{this._engine.afterFlush(()=>{const u=s.indexOf(a);u>=0&&s.splice(u,1),this._triggers.has(t)||l.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function pme(i){return new pi(3401,!1)}();return t}trigger(e,t,n,r=!0){const s=this._getTrigger(t),a=new dk(this.id,t,e);let l=this._engine.statesByElement.get(e);l||(QA(e,W4),QA(e,W4+"-"+t),this._engine.statesByElement.set(e,l=new Map));let u=l.get(t);const d=new uk(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&u&&d.absorbOptions(u.options),l.set(t,d),u||(u=hk),d.value!==mS&&u.value===d.value){if(!function bge(i,e){const t=Object.keys(i),n=Object.keys(e);if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}(u.params,d.params)){const se=[],he=s.matchStyles(u.value,u.params,se),re=s.matchStyles(d.value,d.params,se);se.length?this._engine.reportError(se):this._engine.afterFlush(()=>{Ib(e,he),p0(e,re)})}return}const C=Kp(this._engine.playersByElement,e,[]);C.forEach(se=>{se.namespaceId==this.id&&se.triggerName==t&&se.queued&&se.destroy()});let k=s.matchTransition(u.value,d.value,e,d.params),Q=!1;if(!k){if(!r)return;k=s.fallbackTransition,Q=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:k,fromState:u,toState:d,player:a,isFallbackTransition:Q}),Q||(QA(e,FG),a.onStart(()=>{o2(e,FG)})),a.onDone(()=>{let se=this.players.indexOf(a);se>=0&&this.players.splice(se,1);const he=this._engine.playersByElement.get(e);if(he){let re=he.indexOf(a);re>=0&&he.splice(re,1)}}),this.players.push(a),C.push(a),a}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,j4,!0);n.forEach(r=>{if(r[qA])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(a=>a.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,n,r){const s=this._engine.statesByElement.get(e),a=new Map;if(s){const l=[];if(s.forEach((u,d)=>{if(a.set(d,u.value),this._triggers.has(d)){const A=this.trigger(e,d,mS,r);A&&l.push(A)}}),l.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,a),n&&Dy(l).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const r=new Set;t.forEach(s=>{const a=s.name;if(r.has(a))return;r.add(a);const u=this._triggers.get(a).fallbackTransition,d=n.get(a)||hk,A=new uk(mS),y=new dk(this.id,a,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:a,transition:u,fromState:d,toState:A,player:y,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let a=e;for(;a=a.parentNode;)if(n.statesByElement.get(a)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)n.markElementAsRemoved(this.id,e,!1,t);else{const s=e[qA];(!s||s===RG)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){QA(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const r=n.player;if(r.destroyed)return;const s=n.element,a=this._elementListeners.get(s);a&&a.forEach(l=>{if(l.name==n.triggerName){const u=jR(s,n.triggerName,n.fromState.value,n.toState.value);u._data=e,QR(n.player,l.phase,u,l.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(n)}),this._queue=[],t.sort((n,r)=>{const s=n.transition.ast.depCount,a=r.transition.ast.depCount;return 0==s||0==a?s-a:this._engine.driver.containsElement(n.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class Age{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new pge(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList,r=this.namespacesByHostElement;if(n.length-1>=0){let a=!1,l=this.driver.getParentElement(t);for(;l;){const u=r.get(l);if(u){const d=n.indexOf(u);n.splice(d+1,0,e),a=!0;break}l=this.driver.getParentElement(l)}a||n.unshift(e)}else n.push(e);return r.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let r=this._namespaceLookup[e];r&&r.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(n);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n)for(let r of n.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,n,r){if(rD(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,r),!0}return!1}insertNode(e,t,n,r){if(!rD(t))return;const s=t[qA];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const a=this.collectedLeaveElements.indexOf(t);a>=0&&this.collectedLeaveElements.splice(a,1)}if(e){const a=this._fetchNamespace(e);a&&a.insertNode(t,n)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),QA(e,ck)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),o2(e,ck))}removeNode(e,t,n,r){if(rD(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),n){const a=this.namespacesByHostElement.get(t);a&&a.id!==e&&a.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,n,r,s){this.collectedLeaveElements.push(t),t[qA]={namespaceId:e,setForRemoval:r,hasAnimation:n,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,n,r,s){return rD(t)?this._fetchNamespace(e).listen(t,n,r,s):()=>{}}_buildInstruction(e,t,n,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,j4,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,ZR,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Dy(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[qA];if(t&&t.setForRemoval){if(e[qA]=RG,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(ck)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,r)=>this._balanceNamespaceList(n,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)QA(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let r=0;r<n.length;r++)n[r]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?Dy(t).onDone(()=>{n.forEach(r=>r())}):n.forEach(r=>r())}}reportError(e){throw function Ame(i){return new pi(3402,!1)}()}_flushAnimations(e,t){const n=new tD,r=[],s=new Map,a=[],l=new Map,u=new Map,d=new Map,A=new Set;this.disabledNodes.forEach(Wn=>{A.add(Wn);const ni=this.driver.query(Wn,".ng-animate-queued",!0);for(let si=0;si<ni.length;si++)A.add(ni[si])});const y=this.bodyNode,C=Array.from(this.statesByElement.keys()),k=LG(C,this.collectedEnterElements),Q=new Map;let se=0;k.forEach((Wn,ni)=>{const si=YR+se++;Q.set(ni,si),Wn.forEach(Ei=>QA(Ei,si))});const he=[],re=new Set,Le=new Set;for(let Wn=0;Wn<this.collectedLeaveElements.length;Wn++){const ni=this.collectedLeaveElements[Wn],si=ni[qA];si&&si.setForRemoval&&(he.push(ni),re.add(ni),si.hasAnimation?this.driver.query(ni,".ng-star-inserted",!0).forEach(Ei=>re.add(Ei)):Le.add(ni))}const be=new Map,Ye=LG(C,Array.from(re));Ye.forEach((Wn,ni)=>{const si=Q4+se++;be.set(ni,si),Wn.forEach(Ei=>QA(Ei,si))}),e.push(()=>{k.forEach((Wn,ni)=>{const si=Q.get(ni);Wn.forEach(Ei=>o2(Ei,si))}),Ye.forEach((Wn,ni)=>{const si=be.get(ni);Wn.forEach(Ei=>o2(Ei,si))}),he.forEach(Wn=>{this.processLeaveNode(Wn)})});const dt=[],xt=[];for(let Wn=this._namespaceList.length-1;Wn>=0;Wn--)this._namespaceList[Wn].drainQueuedTransitions(t).forEach(si=>{const Ei=si.player,Ki=si.element;if(dt.push(Ei),this.collectedEnterElements.length){const Bn=Ki[qA];if(Bn&&Bn.setForMove){if(Bn.previousTriggersValues&&Bn.previousTriggersValues.has(si.triggerName)){const io=Bn.previousTriggersValues.get(si.triggerName),qs=this.statesByElement.get(si.element);if(qs&&qs.has(si.triggerName)){const Br=qs.get(si.triggerName);Br.value=io,qs.set(si.triggerName,Br)}}return void Ei.destroy()}}const Zr=!y||!this.driver.containsElement(y,Ki),Hr=be.get(Ki),Ci=Q.get(Ki),Ii=this._buildInstruction(si,n,Ci,Hr,Zr);if(Ii.errors&&Ii.errors.length)return void xt.push(Ii);if(Zr)return Ei.onStart(()=>Ib(Ki,Ii.fromStyles)),Ei.onDestroy(()=>p0(Ki,Ii.toStyles)),void r.push(Ei);if(si.isFallbackTransition)return Ei.onStart(()=>Ib(Ki,Ii.fromStyles)),Ei.onDestroy(()=>p0(Ki,Ii.toStyles)),void r.push(Ei);const jr=[];Ii.timelines.forEach(Bn=>{Bn.stretchStartingKeyframe=!0,this.disabledNodes.has(Bn.element)||jr.push(Bn)}),Ii.timelines=jr,n.append(Ki,Ii.timelines),a.push({instruction:Ii,player:Ei,element:Ki}),Ii.queriedElements.forEach(Bn=>Kp(l,Bn,[]).push(Ei)),Ii.preStyleProps.forEach((Bn,io)=>{if(Bn.size){let qs=u.get(io);qs||u.set(io,qs=new Set),Bn.forEach((Br,Ls)=>qs.add(Ls))}}),Ii.postStyleProps.forEach((Bn,io)=>{let qs=d.get(io);qs||d.set(io,qs=new Set),Bn.forEach((Br,Ls)=>qs.add(Ls))})});if(xt.length){const Wn=[];xt.forEach(ni=>{Wn.push(function mme(i,e){return new pi(3505,!1)}())}),dt.forEach(ni=>ni.destroy()),this.reportError(Wn)}const $t=new Map,nn=new Map;a.forEach(Wn=>{const ni=Wn.element;n.has(ni)&&(nn.set(ni,ni),this._beforeAnimationBuild(Wn.player.namespaceId,Wn.instruction,$t))}),r.forEach(Wn=>{const ni=Wn.element;this._getPreviousPlayers(ni,!1,Wn.namespaceId,Wn.triggerName,null).forEach(Ei=>{Kp($t,ni,[]).push(Ei),Ei.destroy()})});const gt=he.filter(Wn=>UG(Wn,u,d)),Wt=new Map;OG(Wt,this.driver,Le,d,V_).forEach(Wn=>{UG(Wn,u,d)&&gt.push(Wn)});const yi=new Map;k.forEach((Wn,ni)=>{OG(yi,this.driver,new Set(Wn),u,RF)}),gt.forEach(Wn=>{const ni=Wt.get(Wn),si=yi.get(Wn);Wt.set(Wn,new Map([...Array.from(ni?.entries()??[]),...Array.from(si?.entries()??[])]))});const Rn=[],kn=[],li={};a.forEach(Wn=>{const{element:ni,player:si,instruction:Ei}=Wn;if(n.has(ni)){if(A.has(ni))return si.onDestroy(()=>p0(ni,Ei.toStyles)),si.disabled=!0,si.overrideTotalTime(Ei.totalTime),void r.push(si);let Ki=li;if(nn.size>1){let Hr=ni;const Ci=[];for(;Hr=Hr.parentNode;){const Ii=nn.get(Hr);if(Ii){Ki=Ii;break}Ci.push(Hr)}Ci.forEach(Ii=>nn.set(Ii,Ki))}const Zr=this._buildAnimation(si.namespaceId,Ei,$t,s,yi,Wt);if(si.setRealPlayer(Zr),Ki===li)Rn.push(si);else{const Hr=this.playersByElement.get(Ki);Hr&&Hr.length&&(si.parentPlayer=Dy(Hr)),r.push(si)}}else Ib(ni,Ei.fromStyles),si.onDestroy(()=>p0(ni,Ei.toStyles)),kn.push(si),A.has(ni)&&r.push(si)}),kn.forEach(Wn=>{const ni=s.get(Wn.element);if(ni&&ni.length){const si=Dy(ni);Wn.setRealPlayer(si)}}),r.forEach(Wn=>{Wn.parentPlayer?Wn.syncPlayerEvents(Wn.parentPlayer):Wn.destroy()});for(let Wn=0;Wn<he.length;Wn++){const ni=he[Wn],si=ni[qA];if(o2(ni,Q4),si&&si.hasAnimation)continue;let Ei=[];if(l.size){let Zr=l.get(ni);Zr&&Zr.length&&Ei.push(...Zr);let Hr=this.driver.query(ni,ZR,!0);for(let Ci=0;Ci<Hr.length;Ci++){let Ii=l.get(Hr[Ci]);Ii&&Ii.length&&Ei.push(...Ii)}}const Ki=Ei.filter(Zr=>!Zr.destroyed);Ki.length?yge(this,ni,Ki):this.processLeaveNode(ni)}return he.length=0,Rn.forEach(Wn=>{this.players.push(Wn),Wn.onDone(()=>{Wn.destroy();const ni=this.players.indexOf(Wn);this.players.splice(ni,1)}),Wn.play()}),Rn}elementContainsData(e,t){let n=!1;const r=t[qA];return r&&r.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,r,s){let a=[];if(t){const l=this.playersByQueriedElement.get(e);l&&(a=l)}else{const l=this.playersByElement.get(e);if(l){const u=!s||s==mS;l.forEach(d=>{d.queued||!u&&d.triggerName!=r||a.push(d)})}}return(n||r)&&(a=a.filter(l=>!(n&&n!=l.namespaceId||r&&r!=l.triggerName))),a}_beforeAnimationBuild(e,t,n){const s=t.element,a=t.isRemovalTransition?void 0:e,l=t.isRemovalTransition?void 0:t.triggerName;for(const u of t.timelines){const d=u.element,A=d!==s,y=Kp(n,d,[]);this._getPreviousPlayers(d,A,a,l,t.toState).forEach(k=>{const Q=k.getRealPlayer();Q.beforeDestroy&&Q.beforeDestroy(),k.destroy(),y.push(k)})}Ib(s,t.fromStyles)}_buildAnimation(e,t,n,r,s,a){const l=t.triggerName,u=t.element,d=[],A=new Set,y=new Set,C=t.timelines.map(Q=>{const se=Q.element;A.add(se);const he=se[qA];if(he&&he.removedBeforeQueried)return new VC(Q.duration,Q.delay);const re=se!==u,Le=function vge(i){const e=[];return NG(i,e),e}((n.get(se)||dge).map($t=>$t.getRealPlayer())).filter($t=>!!$t.element&&$t.element===se),be=s.get(se),Ye=a.get(se),dt=uG(0,this._normalizer,0,Q.keyframes,be,Ye),xt=this._buildPlayer(Q,dt,Le);if(Q.subTimeline&&r&&y.add(se),re){const $t=new dk(e,l,se);$t.setRealPlayer(xt),d.push($t)}return xt});d.forEach(Q=>{Kp(this.playersByQueriedElement,Q.element,[]).push(Q),Q.onDone(()=>function mge(i,e,t){let n=i.get(e);if(n){if(n.length){const r=n.indexOf(t);n.splice(r,1)}0==n.length&&i.delete(e)}return n}(this.playersByQueriedElement,Q.element,Q))}),A.forEach(Q=>QA(Q,yG));const k=Dy(C);return k.onDestroy(()=>{A.forEach(Q=>o2(Q,yG)),p0(u,t.toStyles)}),y.forEach(Q=>{Kp(r,Q,[]).push(k)}),k}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new VC(e.duration,e.delay)}}class dk{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new VC,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,n)=>{t.forEach(r=>QR(e,n,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Kp(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function rD(i){return i&&1===i.nodeType}function kG(i,e){const t=i.style.display;return i.style.display=e??"none",t}function OG(i,e,t,n,r){const s=[];t.forEach(u=>s.push(kG(u)));const a=[];n.forEach((u,d)=>{const A=new Map;u.forEach(y=>{const C=e.computeStyle(d,y,r);A.set(y,C),(!C||0==C.length)&&(d[qA]=fge,a.push(d))}),i.set(d,A)});let l=0;return t.forEach(u=>kG(u,s[l++])),a}function LG(i,e){const t=new Map;if(i.forEach(l=>t.set(l,[])),0==e.length)return t;const n=1,r=new Set(e),s=new Map;function a(l){if(!l)return n;let u=s.get(l);if(u)return u;const d=l.parentNode;return u=t.has(d)?d:r.has(d)?n:a(d),s.set(l,u),u}return e.forEach(l=>{const u=a(l);u!==n&&t.get(u).push(l)}),t}function QA(i,e){i.classList?.add(e)}function o2(i,e){i.classList?.remove(e)}function yge(i,e,t){Dy(t).onDone(()=>i.processLeaveNode(e))}function NG(i,e){for(let t=0;t<i.length;t++){const n=i[t];n instanceof pz?NG(n.players,e):e.push(n)}}function UG(i,e,t){const n=t.get(i);if(!n)return!1;let r=e.get(i);return r?n.forEach(s=>r.add(s)):e.set(i,n),t.delete(i),!0}class sD{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Age(e,t,n),this._timelineEngine=new age(e,t,n),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,n,r,s){const a=e+"-"+r;let l=this._triggerCache[a];if(!l){const u=[],d=[],A=nk(this._driver,s,u,d);if(u.length)throw function sme(i,e){return new pi(3404,!1)}();l=function ige(i,e,t){return new rge(i,e,t)}(r,A,this._normalizer),this._triggerCache[a]=l}this._transitionEngine.registerTrigger(t,r,l)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,r){this._transitionEngine.insertNode(e,t,n,r)}onRemove(e,t,n,r){this._transitionEngine.removeNode(e,t,r||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,r){if("@"==n.charAt(0)){const[s,a]=hG(n);this._timelineEngine.command(s,t,a,r)}else this._transitionEngine.trigger(e,t,n,r)}listen(e,t,n,r,s){if("@"==n.charAt(0)){const[a,l]=hG(n);return this._timelineEngine.listen(a,t,l,s)}return this._transitionEngine.listen(e,t,n,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let wge=(()=>{class i{constructor(t,n,r){this._element=t,this._startStyles=n,this._endStyles=r,this._state=0;let s=i.initialStylesByElement.get(t);s||i.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&p0(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(p0(this._element,this._initialStyles),this._endStyles&&(p0(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(i.initialStylesByElement.delete(this._element),this._startStyles&&(Ib(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Ib(this._element,this._endStyles),this._endStyles=null),p0(this._element,this._initialStyles),this._state=3)}}return i.initialStylesByElement=new WeakMap,i})();function fk(i){let e=null;return i.forEach((t,n)=>{(function Mge(i){return"display"===i||"position"===i})(n)&&(e=e||new Map,e.set(n,t))}),e}class zG{constructor(e,t,n,r){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(n=>{t.push(Object.fromEntries(n))}),t}_triggerWebAnimation(e,t,n){return e.animate(this._convertKeyframesToObject(t),n)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((n,r)=>{"offset"!==r&&e.set(r,this._finished?n:CG(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class Cge{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return AG(e,t)}getParentElement(e){return XR(e)}query(e,t,n){return mG(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}animate(e,t,n,r,s,a=[]){const u={duration:n,delay:r,fill:0==r?"both":"forwards"};s&&(u.easing=s);const d=new Map,A=a.filter(k=>k instanceof zG);(function Dme(i,e){return 0===i||0===e})(n,r)&&A.forEach(k=>{k.currentSnapshot.forEach((Q,se)=>d.set(se,Q))});let y=function Cme(i){return i.length?i[0]instanceof Map?i:i.map(e=>vG(e)):[]}(t).map(k=>By(k));y=function Bme(i,e,t){if(t.size&&e.length){let n=e[0],r=[];if(t.forEach((s,a)=>{n.has(a)||r.push(a),n.set(a,s)}),r.length)for(let s=1;s<e.length;s++){let a=e[s];r.forEach(l=>a.set(l,CG(i,l)))}}return e}(e,y,d);const C=function xge(i,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=fk(e[0]),e.length>1&&(n=fk(e[e.length-1]))):e instanceof Map&&(t=fk(e)),t||n?new wge(i,t,n):null}(e,y);return new zG(e,y,u,C)}}let Sge=(()=>{class i extends lz{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:Zu.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?uz(t):t;return HG(this._renderer,null,n,"register",[r]),new Tge(n,this._renderer)}}return i.\u0275fac=function(t){return new(t||i)(oi(kp),oi(Zo))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();class Tge extends Ple{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new Ege(this._id,e,t||{},this._renderer)}}class Ege{constructor(e,t,n,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return HG(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function HG(i,e,t,n,r){return i.setProperty(e,`@@${t}:${n}`,r)}const VG="@.disabled";let Dge=(()=>{class i{constructor(t,n,r){this.delegate=t,this.engine=n,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,a)=>{const l=a?.parentNode(s);l&&a.removeChild(l,s)}}createRenderer(t,n){const s=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let A=this._rendererCache.get(s);return A||(A=new GG("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,A)),A}const a=n.id,l=n.id+"-"+this._currentId;this._currentId++,this.engine.register(l,t);const u=A=>{Array.isArray(A)?A.forEach(u):this.engine.registerTrigger(a,l,t,A.name,A)};return n.data.animation.forEach(u),new Bge(this,l,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,r){t>=0&&t<this._microtaskId?this._zone.run(()=>n(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[a,l]=s;a(l)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return i.\u0275fac=function(t){return new(t||i)(oi(kp),oi(sD),oi(po))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();class GG{constructor(e,t,n,r){this.namespaceId=e,this.delegate=t,this.engine=n,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,r=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,r){this.delegate.setAttribute(e,t,n,r)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,r){this.delegate.setStyle(e,t,n,r)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==VG?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Bge extends GG{constructor(e,t,n,r,s){super(t,n,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==VG?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.slice(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const r=function Ige(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(e);let s=t.slice(1),a="";return"@"!=s.charAt(0)&&([s,a]=function Pge(i){const e=i.indexOf(".");return[i.substring(0,e),i.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,a,l=>{this.factory.scheduleListenerCallback(l._data||-1,n,l)})}return this.delegate.listen(e,t,n)}}let Fge=(()=>{class i extends sD{constructor(t,n,r,s){super(t.body,n,r)}ngOnDestroy(){this.flush()}}return i.\u0275fac=function(t){return new(t||i)(oi(Zo),oi(KR),oi(ak),oi(Px))},i.\u0275prov=Ue({token:i,factory:i.\u0275fac}),i})();const qG=[{provide:lz,useClass:Sge},{provide:ak,useFactory:function Rge(){return new Jme}},{provide:sD,useClass:Fge},{provide:kp,useFactory:function kge(i,e,t){return new Dge(i,e,t)},deps:[iE,sD,po]}],pk=[{provide:KR,useFactory:()=>new Cge},{provide:dh,useValue:"BrowserAnimations"},...qG],QG=[{provide:KR,useClass:gG},{provide:dh,useValue:"NoopAnimations"},...qG];let Ak,Oge=(()=>{class i{static withConfig(t){return{ngModule:i,providers:t.disableAnimations?QG:pk}}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=Xs({type:i}),i.\u0275inj=pt({providers:pk,imports:[jL]}),i})();Ak=[{path:"",component:E9},{path:"home",component:E9},{path:"geometry",component:pae},{path:"atlas",component:VV},{path:"lhcb",component:spe},{path:"cms",component:ope},{path:"trackml",component:ape},{path:"playground",component:LAe}];let Lge=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=Xs({type:i,bootstrap:[yY]});static \u0275inj=pt({imports:[jL,U$,b6.forRoot(Ak,{useHash:!0}),Oge,OAe]})}return i})();c$().bootstrapModule(Lge).catch(i=>console.error(i))},3144:($r,At,Ce)=>{$r.exports={ResizeSensor:Ce(1710),ElementQueries:Ce(9648)}},9648:function($r,At,Ce){"use strict";var ze,M,L;typeof window<"u"&&window,M=[Ce(1710)],void 0!==(L="function"==typeof(ze=function(ye){var Be=function(){var Ze,Ie={},He=[];function Oe(R){R||(R=document.documentElement);var q=window.getComputedStyle(R,null).fontSize;return parseFloat(q)||16}function Y(R,q){var T=q.split(/\d/),$=T[T.length-1];switch(q=parseFloat(q),$){case"px":default:return q;case"em":return q*Oe(R);case"rem":return q*Oe();case"vw":return q*document.documentElement.clientWidth/100;case"vh":return q*document.documentElement.clientHeight/100;case"vmin":case"vmax":var J=document.documentElement.clientWidth/100,ie=document.documentElement.clientHeight/100;return q*(0,Math["vmin"===$?"min":"max"])(J,ie)}}function K(R,q){this.element=R;var T,$,J,ie,Me,de,fe,I,U=["min-width","min-height","max-width","max-height"];this.call=function(){for(T in J=function ce(R){if(!R.getBoundingClientRect)return{width:R.offsetWidth,height:R.offsetHeight};var q=R.getBoundingClientRect();return{width:Math.round(q.width),height:Math.round(q.height)}}(this.element),de={},Ie[q])Ie[q].hasOwnProperty(T)&&(ie=Y(this.element,($=Ie[q][T]).value),Me="width"===$.property?J.width:J.height,fe="","min"===$.mode&&Me>=ie&&(fe+=$.value),"max"===$.mode&&Me<=ie&&(fe+=$.value),de[I=$.mode+"-"+$.property]||(de[I]=""),fe&&-1===(" "+de[I]+" ").indexOf(" "+fe+" ")&&(de[I]+=" "+fe));for(var z in U)U.hasOwnProperty(z)&&(de[U[z]]?this.element.setAttribute(U[z],de[U[z]].substr(1)):this.element.removeAttribute(U[z]))}}function ue(R,q){R.elementQueriesSetupInformation||(R.elementQueriesSetupInformation=new K(R,q)),R.elementQueriesSensor||(R.elementQueriesSensor=new ye(R,function(){R.elementQueriesSetupInformation.call()}))}function X(R,q,T,$){if(typeof Ie[R]>"u"){Ie[R]=[];var J=He.length;Ze.innerHTML+="\n"+R+" {animation: 0.1s element-queries;}",Ze.innerHTML+="\n"+R+" > .resize-sensor {min-width: "+J+"px;}",He.push(R)}Ie[R].push({mode:q,property:T,value:$})}function Z(R){var q;if(document.querySelectorAll&&(q=R?R.querySelectorAll.bind(R):document.querySelectorAll.bind(document)),!q&&typeof $$<"u"&&(q=$$),!q&&typeof jQuery<"u"&&(q=jQuery),!q)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return q}function P(R){var q=[],T=[],$=[],J=0,ie=-1,Me=[];for(var de in R.children)if(R.children.hasOwnProperty(de)&&R.children[de].tagName&&"img"===R.children[de].tagName.toLowerCase()){q.push(R.children[de]);var fe=R.children[de].getAttribute("min-width")||R.children[de].getAttribute("data-min-width"),I=R.children[de].getAttribute("data-src")||R.children[de].getAttribute("url");$.push(I),T.push({minWidth:fe}),fe?R.children[de].style.display="none":(J=q.length-1,R.children[de].style.display="block")}function z(){var D,le=!1;for(D in q)q.hasOwnProperty(D)&&T[D].minWidth&&R.offsetWidth>T[D].minWidth&&(le=D);if(le||(le=J),ie!==le)if(Me[le])q[ie].style.display="none",q[le].style.display="block",ie=le;else{var oe=new Image;oe.onload=function(){q[le].src=$[le],q[ie].style.display="none",q[le].style.display="block",Me[le]=!0,ie=le},oe.src=$[le]}else q[le].src=$[le]}ie=J,R.resizeSensorInstance=new ye(R,z),z()}var p=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,w=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function m(R){var q,T,$,J;for(R=R.replace(/'/g,'"');null!==(q=p.exec(R));)for(T=q[1]+q[3],$=q[2];null!==(J=w.exec($));)X(T,J[1],J[2],J[3])}function _(R){var q="";if(R)if("string"==typeof R)(-1!==(R=R.toLowerCase()).indexOf("min-width")||-1!==R.indexOf("max-width"))&&m(R);else for(var T=0,$=R.length;T<$;T++)1===R[T].type?(-1!==(q=R[T].selectorText||R[T].cssText).indexOf("min-height")||-1!==q.indexOf("max-height")||-1!==q.indexOf("min-width")||-1!==q.indexOf("max-width"))&&m(q):4===R[T].type?_(R[T].cssRules||R[T].rules):3===R[T].type&&R[T].styleSheet.hasOwnProperty("cssRules")&&_(R[T].styleSheet.cssRules)}var F=!1;this.init=function(){var R="animationstart";typeof document.documentElement.style.webkitAnimationName<"u"?R="webkitAnimationStart":typeof document.documentElement.style.MozAnimationName<"u"?R="mozanimationstart":typeof document.documentElement.style.OAnimationName<"u"&&(R="oanimationstart"),document.body.addEventListener(R,function($){var J=$.target,ie=J&&window.getComputedStyle(J,null),Me=ie&&ie.getPropertyValue("animation-name");if(Me&&-1!==Me.indexOf("element-queries")){J.elementQueriesSensor=new ye(J,function(){J.elementQueriesSetupInformation&&J.elementQueriesSetupInformation.call()});var I=window.getComputedStyle(J.resizeSensor,null).getPropertyValue("min-width");I=parseInt(I.replace("px","")),ue($.target,He[I])}}),F||((Ze=document.createElement("style")).type="text/css",Ze.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",Ze.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(Ze),F=!0);for(var q=0,T=document.styleSheets.length;q<T;q++)try{document.styleSheets[q].href&&0===document.styleSheets[q].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[q].href),_(document.styleSheets[q].cssRules||document.styleSheets[q].rules||document.styleSheets[q].cssText)}catch{}!function x(){for(var q=Z()("[data-responsive-image],[responsive-image]"),T=0,$=q.length;T<$;T++)P(q[T])}()},this.findElementQueriesElements=function(R){!function O(R){var q=Z(R);for(var T in Ie)if(Ie.hasOwnProperty(T))for(var $=q(T,R),J=0,ie=$.length;J<ie;J++)ue($[J],T)}(R)},this.update=function(){this.init()}};Be.update=function(){Be.instance.update()},Be.detach=function(Ze){Ze.elementQueriesSetupInformation?(Ze.elementQueriesSensor.detach(),delete Ze.elementQueriesSetupInformation,delete Ze.elementQueriesSensor):Ze.resizeSensorInstance&&(Ze.resizeSensorInstance.detach(),delete Ze.resizeSensorInstance)},Be.init=function(){Be.instance||(Be.instance=new Be),Be.instance.init()};return Be.findElementQueriesElements=function(Ze){Be.instance.findElementQueriesElements(Ze)},Be.listen=function(){!function(Ze){if(document.addEventListener)document.addEventListener("DOMContentLoaded",Ze,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var Ie=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(Ze(),clearInterval(Ie))},10);else window.onload=Ze}(Be.init)},Be})?ze.apply(At,M):ze)&&($r.exports=L)},1710:function($r,At,Ce){"use strict";var ze,M;typeof window<"u"&&window,void 0!==(M="function"==typeof(ze=function(){if(typeof window>"u")return null;var L=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")(),ye=L.requestAnimationFrame||L.mozRequestAnimationFrame||L.webkitRequestAnimationFrame||function(ce){return L.setTimeout(ce,20)},Be=L.cancelAnimationFrame||L.mozCancelAnimationFrame||L.webkitCancelAnimationFrame||function(ce){L.clearTimeout(ce)};function je(ce,Y){var K=Object.prototype.toString.call(ce),ue="[object Array]"===K||"[object NodeList]"===K||"[object HTMLCollection]"===K||"[object Object]"===K||typeof jQuery<"u"&&ce instanceof jQuery||typeof Elements<"u"&&ce instanceof Elements,X=0,Z=ce.length;if(ue)for(;X<Z;X++)Y(ce[X]);else Y(ce)}function Ze(ce){if(!ce.getBoundingClientRect)return{width:ce.offsetWidth,height:ce.offsetHeight};var Y=ce.getBoundingClientRect();return{width:Math.round(Y.width),height:Math.round(Y.height)}}function Ie(ce,Y){Object.keys(Y).forEach(function(K){ce.style[K]=Y[K]})}var He=function(ce,Y){var K=0;function ue(){var O,P,Z=[];this.add=function(x){Z.push(x)},this.call=function(x){for(O=0,P=Z.length;O<P;O++)Z[O].call(this,x)},this.remove=function(x){var p=[];for(O=0,P=Z.length;O<P;O++)Z[O]!==x&&p.push(Z[O]);Z=p},this.length=function(){return Z.length}}function X(Z,O){if(Z){if(Z.resizedAttached)return void Z.resizedAttached.add(O);Z.resizedAttached=new ue,Z.resizedAttached.add(O),Z.resizeSensor=document.createElement("div"),Z.resizeSensor.dir="ltr",Z.resizeSensor.className="resize-sensor";var P={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},x={position:"absolute",left:"0px",top:"0px",transition:"0s"};Ie(Z.resizeSensor,P);var p=document.createElement("div");p.className="resize-sensor-expand",Ie(p,P);var w=document.createElement("div");Ie(w,x),p.appendChild(w);var m=document.createElement("div");m.className="resize-sensor-shrink",Ie(m,P);var _=document.createElement("div");Ie(_,x),Ie(_,{width:"200%",height:"200%"}),m.appendChild(_),Z.resizeSensor.appendChild(p),Z.resizeSensor.appendChild(m),Z.appendChild(Z.resizeSensor);var F=window.getComputedStyle(Z),R=F?F.getPropertyValue("position"):null;"absolute"!==R&&"relative"!==R&&"fixed"!==R&&"sticky"!==R&&(Z.style.position="relative");var q=!1,T=0,$=Ze(Z),J=0,ie=0,Me=!0;K=0;var fe=function(){if(Me){if(0===Z.offsetWidth&&0===Z.offsetHeight)return void(K||(K=ye(function(){K=0,fe()})));Me=!1}var le,D;D=Z.offsetHeight,w.style.width=(le=Z.offsetWidth)+10+"px",w.style.height=D+10+"px",p.scrollLeft=le+10,p.scrollTop=D+10,m.scrollLeft=le+10,m.scrollTop=D+10};Z.resizeSensor.resetSensor=fe;var I=function(){T=0,q&&(J=$.width,ie=$.height,Z.resizedAttached&&Z.resizedAttached.call($))},U=function(){$=Ze(Z),(q=$.width!==J||$.height!==ie)&&!T&&(T=ye(I)),fe()},z=function(le,D,oe){le.attachEvent?le.attachEvent("on"+D,oe):le.addEventListener(D,oe)};z(p,"scroll",U),z(m,"scroll",U),K=ye(function(){K=0,fe()})}}je(ce,function(Z){X(Z,Y)}),this.detach=function(Z){K||(Be(K),K=0),He.detach(ce,Z)},this.reset=function(){ce.resizeSensor.resetSensor()}};if(He.reset=function(ce){je(ce,function(Y){Y.resizeSensor.resetSensor()})},He.detach=function(ce,Y){je(ce,function(K){K&&(K.resizedAttached&&"function"==typeof Y&&(K.resizedAttached.remove(Y),K.resizedAttached.length())||K.resizeSensor&&(K.contains(K.resizeSensor)&&K.removeChild(K.resizeSensor),delete K.resizeSensor,delete K.resizedAttached))})},typeof MutationObserver<"u"){var Oe=new MutationObserver(function(ce){for(var Y in ce)if(ce.hasOwnProperty(Y))for(var K=ce[Y].addedNodes,ue=0;ue<K.length;ue++)K[ue].resizeSensor&&He.reset(K[ue])});document.addEventListener("DOMContentLoaded",function(ce){Oe.observe(document.body,{childList:!0,subtree:!0})})}return He})?ze.call(At,Ce,At,$r):ze)&&($r.exports=M)},3940:$r=>{"use strict";var At={single_source_shortest_paths:function(Ce,ze,M){var L={},ye={};ye[ze]=0;var je,Ze,Ie,He,Oe,Y,Be=At.PriorityQueue.make();for(Be.push(ze,0);!Be.empty();)for(Ie in He=(je=Be.pop()).cost,Oe=Ce[Ze=je.value]||{})Oe.hasOwnProperty(Ie)&&(Y=He+Oe[Ie],(typeof ye[Ie]>"u"||ye[Ie]>Y)&&(ye[Ie]=Y,Be.push(Ie,Y),L[Ie]=Ze));if(typeof M<"u"&&typeof ye[M]>"u"){var X=["Could not find a path from ",ze," to ",M,"."].join("");throw new Error(X)}return L},extract_shortest_path_from_predecessor_list:function(Ce,ze){for(var M=[],L=ze;L;)M.push(L),L=Ce[L];return M.reverse(),M},find_path:function(Ce,ze,M){var L=At.single_source_shortest_paths(Ce,ze,M);return At.extract_shortest_path_from_predecessor_list(L,M)},PriorityQueue:{make:function(Ce){var L,ze=At.PriorityQueue,M={};for(L in Ce=Ce||{},ze)ze.hasOwnProperty(L)&&(M[L]=ze[L]);return M.queue=[],M.sorter=Ce.sorter||ze.default_sorter,M},default_sorter:function(Ce,ze){return Ce.cost-ze.cost},push:function(Ce,ze){this.queue.push({value:Ce,cost:ze}),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};$r.exports=At},5724:$r=>{"use strict";$r.exports=function(Ce){for(var ze=[],M=Ce.length,L=0;L<M;L++){var ye=Ce.charCodeAt(L);if(ye>=55296&&ye<=56319&&M>L+1){var Be=Ce.charCodeAt(L+1);Be>=56320&&Be<=57343&&(ye=1024*(ye-55296)+Be-56320+65536,L+=1)}ye<128?ze.push(ye):ye<2048?(ze.push(ye>>6|192),ze.push(63&ye|128)):ye<55296||ye>=57344&&ye<65536?(ze.push(ye>>12|224),ze.push(ye>>6&63|128),ze.push(63&ye|128)):ye>=65536&&ye<=1114111?(ze.push(ye>>18|240),ze.push(ye>>12&63|128),ze.push(ye>>6&63|128),ze.push(63&ye|128)):ze.push(239,191,189)}return new Uint8Array(ze).buffer}},3960:function($r){$r.exports=function(){"use strict";var At=function(W,G){return(At=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(te,ee){te.__proto__=ee}||function(te,ee){for(var ke in ee)Object.prototype.hasOwnProperty.call(ee,ke)&&(te[ke]=ee[ke])})(W,G)};function Ce(W,G){if("function"!=typeof G&&null!==G)throw new TypeError("Class extends value "+String(G)+" is not a constructor or null");function te(){this.constructor=W}At(W,G),W.prototype=null===G?Object.create(G):(te.prototype=G.prototype,new te)}var ze=function(){return ze=Object.assign||function(G){for(var te,ee=1,ke=arguments.length;ee<ke;ee++)for(var tt in te=arguments[ee])Object.prototype.hasOwnProperty.call(te,tt)&&(G[tt]=te[tt]);return G},ze.apply(this,arguments)};function M(W,G,te,ee){return new(te||(te=Promise))(function(tt,St){function Kt(zn){try{Dn(ee.next(zn))}catch(ei){St(ei)}}function jt(zn){try{Dn(ee.throw(zn))}catch(ei){St(ei)}}function Dn(zn){zn.done?tt(zn.value):function ke(tt){return tt instanceof te?tt:new te(function(St){St(tt)})}(zn.value).then(Kt,jt)}Dn((ee=ee.apply(W,G||[])).next())})}function L(W,G){var ee,ke,tt,St,te={label:0,sent:function(){if(1&tt[0])throw tt[1];return tt[1]},trys:[],ops:[]};return St={next:Kt(0),throw:Kt(1),return:Kt(2)},"function"==typeof Symbol&&(St[Symbol.iterator]=function(){return this}),St;function Kt(Dn){return function(zn){return function jt(Dn){if(ee)throw new TypeError("Generator is already executing.");for(;te;)try{if(ee=1,ke&&(tt=2&Dn[0]?ke.return:Dn[0]?ke.throw||((tt=ke.return)&&tt.call(ke),0):ke.next)&&!(tt=tt.call(ke,Dn[1])).done)return tt;switch(ke=0,tt&&(Dn=[2&Dn[0],tt.value]),Dn[0]){case 0:case 1:tt=Dn;break;case 4:return te.label++,{value:Dn[1],done:!1};case 5:te.label++,ke=Dn[1],Dn=[0];continue;case 7:Dn=te.ops.pop(),te.trys.pop();continue;default:if(!(tt=(tt=te.trys).length>0&&tt[tt.length-1])&&(6===Dn[0]||2===Dn[0])){te=0;continue}if(3===Dn[0]&&(!tt||Dn[1]>tt[0]&&Dn[1]<tt[3])){te.label=Dn[1];break}if(6===Dn[0]&&te.label<tt[1]){te.label=tt[1],tt=Dn;break}if(tt&&te.label<tt[2]){te.label=tt[2],te.ops.push(Dn);break}tt[2]&&te.ops.pop(),te.trys.pop();continue}Dn=G.call(W,te)}catch(zn){Dn=[6,zn],ke=0}finally{ee=tt=0}if(5&Dn[0])throw Dn[1];return{value:Dn[0]?Dn[1]:void 0,done:!0}}([Dn,zn])}}}function ye(W,G,te){if(te||2===arguments.length)for(var tt,ee=0,ke=G.length;ee<ke;ee++)(tt||!(ee in G))&&(tt||(tt=Array.prototype.slice.call(G,0,ee)),tt[ee]=G[ee]);return W.concat(tt||G)}for(var Be=function(){function W(G,te,ee,ke){this.left=G,this.top=te,this.width=ee,this.height=ke}return W.prototype.add=function(G,te,ee,ke){return new W(this.left+G,this.top+te,this.width+ee,this.height+ke)},W.fromClientRect=function(G,te){return new W(te.left+G.windowBounds.left,te.top+G.windowBounds.top,te.width,te.height)},W.fromDOMRectList=function(G,te){var ee=Array.from(te).find(function(ke){return 0!==ke.width});return ee?new W(ee.left+G.windowBounds.left,ee.top+G.windowBounds.top,ee.width,ee.height):W.EMPTY},W.EMPTY=new W(0,0,0,0),W}(),je=function(W,G){return Be.fromClientRect(W,G.getBoundingClientRect())},Ie=function(W){for(var G=[],te=0,ee=W.length;te<ee;){var ke=W.charCodeAt(te++);if(ke>=55296&&ke<=56319&&te<ee){var tt=W.charCodeAt(te++);56320==(64512&tt)?G.push(((1023&ke)<<10)+(1023&tt)+65536):(G.push(ke),te--)}else G.push(ke)}return G},He=function(){for(var W=[],G=0;G<arguments.length;G++)W[G]=arguments[G];if(String.fromCodePoint)return String.fromCodePoint.apply(String,W);var te=W.length;if(!te)return"";for(var ee=[],ke=-1,tt="";++ke<te;){var St=W[ke];St<=65535?ee.push(St):ee.push(55296+((St-=65536)>>10),St%1024+56320),(ke+1===te||ee.length>16384)&&(tt+=String.fromCharCode.apply(String,ee),ee.length=0)}return tt},Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ce=typeof Uint8Array>"u"?[]:new Uint8Array(256),Y=0;Y<Oe.length;Y++)ce[Oe.charCodeAt(Y)]=Y;for(var K="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ue=typeof Uint8Array>"u"?[]:new Uint8Array(256),X=0;X<K.length;X++)ue[K.charCodeAt(X)]=X;for(var I=function(W,G,te){return W.slice?W.slice(G,te):new Uint16Array(Array.prototype.slice.call(W,G,te))},le=function(){function W(G,te,ee,ke,tt,St){this.initialValue=G,this.errorValue=te,this.highStart=ee,this.highValueIndex=ke,this.index=tt,this.data=St}return W.prototype.get=function(G){var te;if(G>=0){if(G<55296||G>56319&&G<=65535)return this.data[te=((te=this.index[G>>5])<<2)+(31&G)];if(G<=65535)return this.data[te=((te=this.index[2048+(G-55296>>5)])<<2)+(31&G)];if(G<this.highStart)return te=this.index[te=2080+(G>>11)],this.data[te=((te=this.index[te+=G>>5&63])<<2)+(31&G)];if(G<=1114111)return this.data[this.highValueIndex]}return this.errorValue},W}(),D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oe=typeof Uint8Array>"u"?[]:new Uint8Array(256),_e=0;_e<D.length;_e++)oe[D.charCodeAt(_e)]=_e;var te,ee,ke,St,Kt,Ke=10,Zt=13,Ot=15,wn=17,Ln=18,En=19,$n=20,vn=21,rn=22,qt=24,Qt=25,_n=26,dn=27,ci=28,Vi=30,Ur=32,Ar=33,cs=34,Rs=35,ho=37,ro=38,ws=39,Es=40,kl=42,eo=[9001,65288],al="!",xr="\xd7",el=(te=function(W){var ee,tt,St,Kt,jt,G=.75*W.length,te=W.length,ke=0;"="===W[W.length-1]&&(G--,"="===W[W.length-2]&&G--);var Dn=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(G):new Array(G),zn=Array.isArray(Dn)?Dn:new Uint8Array(Dn);for(ee=0;ee<te;ee+=4)tt=ue[W.charCodeAt(ee)],St=ue[W.charCodeAt(ee+1)],Kt=ue[W.charCodeAt(ee+2)],jt=ue[W.charCodeAt(ee+3)],zn[ke++]=tt<<2|St>>4,zn[ke++]=(15&St)<<4|Kt>>2,zn[ke++]=(3&Kt)<<6|63&jt;return Dn}("KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA=="),ee=Array.isArray(te)?function(W){for(var G=W.length,te=[],ee=0;ee<G;ee+=4)te.push(W[ee+3]<<24|W[ee+2]<<16|W[ee+1]<<8|W[ee]);return te}(te):new Uint32Array(te),ke=Array.isArray(te)?function(W){for(var G=W.length,te=[],ee=0;ee<G;ee+=2)te.push(W[ee+1]<<8|W[ee]);return te}(te):new Uint16Array(te),St=I(ke,12,ee[4]/2),Kt=2===ee[5]?I(ke,(24+ee[4])/2):function(W,G,te){return W.slice?W.slice(G,te):new Uint32Array(Array.prototype.slice.call(W,G,te))}(ee,Math.ceil((24+ee[4])/4)),new le(ee[0],ee[1],ee[2],ee[3],St,Kt)),lo=[Vi,36],Yi=[1,2,3,5],ga=[Ke,8],xa=[dn,_n],Ta=Yi.concat(ga),uc=[ro,ws,Es,cs,Rs],st=[Ot,Zt],rt=function(W,G,te,ee){var ke=ee[te];if(Array.isArray(W)?-1!==W.indexOf(ke):W===ke)for(var tt=te;tt<=ee.length;){if((St=ee[++tt])===G)return!0;if(St!==Ke)break}if(ke===Ke)for(tt=te;tt>0;){var Kt=ee[--tt];if(Array.isArray(W)?-1!==W.indexOf(Kt):W===Kt)for(var jt=te;jt<=ee.length;){var St;if((St=ee[++jt])===G)return!0;if(St!==Ke)break}if(Kt!==Ke)break}return!1},ot=function(W,G){for(var te=W;te>=0;){var ee=G[te];if(ee!==Ke)return ee;te--}return 0},wt=function(W,G,te,ee,ke){if(0===te[ee])return xr;var tt=ee-1;if(Array.isArray(ke)&&!0===ke[tt])return xr;var St=tt-1,Kt=tt+1,jt=G[tt],Dn=St>=0?G[St]:0,zn=G[Kt];if(2===jt&&3===zn)return xr;if(-1!==Yi.indexOf(jt))return al;if(-1!==Yi.indexOf(zn)||-1!==ga.indexOf(zn))return xr;if(8===ot(tt,G))return"\xf7";if(11===el.get(W[tt])||(jt===Ur||jt===Ar)&&11===el.get(W[Kt])||7===jt||7===zn||9===jt||-1===[Ke,Zt,Ot].indexOf(jt)&&9===zn||-1!==[wn,Ln,En,qt,ci].indexOf(zn)||ot(tt,G)===rn||rt(23,rn,tt,G)||rt([wn,Ln],vn,tt,G)||rt(12,12,tt,G))return xr;if(jt===Ke)return"\xf7";if(23===jt||23===zn)return xr;if(16===zn||16===jt)return"\xf7";if(-1!==[Zt,Ot,vn].indexOf(zn)||14===jt||36===Dn&&-1!==st.indexOf(jt)||jt===ci&&36===zn||zn===$n||-1!==lo.indexOf(zn)&&jt===Qt||-1!==lo.indexOf(jt)&&zn===Qt||jt===dn&&-1!==[ho,Ur,Ar].indexOf(zn)||-1!==[ho,Ur,Ar].indexOf(jt)&&zn===_n||-1!==lo.indexOf(jt)&&-1!==xa.indexOf(zn)||-1!==xa.indexOf(jt)&&-1!==lo.indexOf(zn)||-1!==[dn,_n].indexOf(jt)&&(zn===Qt||-1!==[rn,Ot].indexOf(zn)&&G[Kt+1]===Qt)||-1!==[rn,Ot].indexOf(jt)&&zn===Qt||jt===Qt&&-1!==[Qt,ci,qt].indexOf(zn))return xr;if(-1!==[Qt,ci,qt,wn,Ln].indexOf(zn))for(var ei=tt;ei>=0;){if((zi=G[ei])===Qt)return xr;if(-1===[ci,qt].indexOf(zi))break;ei--}if(-1!==[dn,_n].indexOf(zn))for(ei=-1!==[wn,Ln].indexOf(jt)?St:tt;ei>=0;){var zi;if((zi=G[ei])===Qt)return xr;if(-1===[ci,qt].indexOf(zi))break;ei--}if(ro===jt&&-1!==[ro,ws,cs,Rs].indexOf(zn)||-1!==[ws,cs].indexOf(jt)&&-1!==[ws,Es].indexOf(zn)||-1!==[Es,Rs].indexOf(jt)&&zn===Es||-1!==uc.indexOf(jt)&&-1!==[$n,_n].indexOf(zn)||-1!==uc.indexOf(zn)&&jt===dn||-1!==lo.indexOf(jt)&&-1!==lo.indexOf(zn)||jt===qt&&-1!==lo.indexOf(zn)||-1!==lo.concat(Qt).indexOf(jt)&&zn===rn&&-1===eo.indexOf(W[Kt])||-1!==lo.concat(Qt).indexOf(zn)&&jt===Ln)return xr;if(41===jt&&41===zn){for(var vs=te[tt],Qr=1;vs>0&&41===G[--vs];)Qr++;if(Qr%2!=0)return xr}return jt===Ur&&zn===Ar?xr:"\xf7"},fn=function(W,G){G||(G={lineBreak:"normal",wordBreak:"normal"});var te=function(W,G){void 0===G&&(G="strict");var te=[],ee=[],ke=[];return W.forEach(function(tt,St){var Kt=el.get(tt);if(Kt>50?(ke.push(!0),Kt-=50):ke.push(!1),-1!==["normal","auto","loose"].indexOf(G)&&-1!==[8208,8211,12316,12448].indexOf(tt))return ee.push(St),te.push(16);if(4===Kt||11===Kt){if(0===St)return ee.push(St),te.push(Vi);var jt=te[St-1];return-1===Ta.indexOf(jt)?(ee.push(ee[St-1]),te.push(jt)):(ee.push(St),te.push(Vi))}return ee.push(St),31===Kt?te.push("strict"===G?vn:ho):Kt===kl||29===Kt?te.push(Vi):43===Kt?te.push(tt>=131072&&tt<=196605||tt>=196608&&tt<=262141?ho:Vi):void te.push(Kt)}),[ee,te,ke]}(W,G.lineBreak),ee=te[0],ke=te[1],tt=te[2];return("break-all"===G.wordBreak||"break-word"===G.wordBreak)&&(ke=ke.map(function(Kt){return-1!==[Qt,Vi,kl].indexOf(Kt)?ho:Kt})),[ee,ke,"keep-all"===G.wordBreak?tt.map(function(Kt,jt){return Kt&&W[jt]>=19968&&W[jt]<=40959}):void 0]},pn=function(){function W(G,te,ee,ke){this.codePoints=G,this.required=te===al,this.start=ee,this.end=ke}return W.prototype.slice=function(){return He.apply(void 0,this.codePoints.slice(this.start,this.end))},W}(),fi=function(W){return W>=48&&W<=57},_i=function(W){return fi(W)||W>=65&&W<=70||W>=97&&W<=102},Ms=function(W){return 10===W||9===W||32===W},os=function(W){return function(W){return function(W){return W>=97&&W<=122}(W)||function(W){return W>=65&&W<=90}(W)}(W)||function(W){return W>=128}(W)||95===W},Cs=function(W){return os(W)||fi(W)||45===W},Co=function(W){return W>=0&&W<=8||11===W||W>=14&&W<=31||127===W},ua=function(W,G){return 92===W&&10!==G},Qs=function(W,G,te){return 45===W?os(G)||ua(G,te):!!os(W)||!(92!==W||!ua(W,G))},Ra=function(W,G,te){return 43===W||45===W?!!fi(G)||46===G&&fi(te):fi(46===W?G:W)},ha=function(W){var G=0,te=1;(43===W[G]||45===W[G])&&(45===W[G]&&(te=-1),G++);for(var ee=[];fi(W[G]);)ee.push(W[G++]);var ke=ee.length?parseInt(He.apply(void 0,ee),10):0;46===W[G]&&G++;for(var tt=[];fi(W[G]);)tt.push(W[G++]);var St=tt.length,Kt=St?parseInt(He.apply(void 0,tt),10):0;(69===W[G]||101===W[G])&&G++;var jt=1;(43===W[G]||45===W[G])&&(45===W[G]&&(jt=-1),G++);for(var Dn=[];fi(W[G]);)Dn.push(W[G++]);var zn=Dn.length?parseInt(He.apply(void 0,Dn),10):0;return te*(ke+Kt*Math.pow(10,-St))*Math.pow(10,jt*zn)},eA={type:2},qd={type:3},tA={type:4},Yu={type:13},Vl={type:8},fp={type:21},nA={type:9},Py={type:10},oi={type:11},Q_={type:12},Do={type:14},pp={type:23},m0={type:1},jA={type:25},Fy={type:24},Ry={type:26},ky={type:27},Qd={type:28},bd={type:29},Zu={type:31},yh={type:32},wa=function(){function W(){this._value=[]}return W.prototype.write=function(G){this._value=this._value.concat(Ie(G))},W.prototype.read=function(){for(var G=[],te=this.consumeToken();te!==yh;)G.push(te),te=this.consumeToken();return G},W.prototype.consumeToken=function(){var G=this.consumeCodePoint();switch(G){case 34:return this.consumeStringToken(34);case 35:var te=this.peekCodePoint(0),ee=this.peekCodePoint(1),ke=this.peekCodePoint(2);if(Cs(te)||ua(ee,ke)){var tt=Qs(te,ee,ke)?2:1;return{type:5,value:this.consumeName(),flags:tt}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Yu;break;case 39:return this.consumeStringToken(39);case 40:return eA;case 41:return qd;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Do;break;case 43:if(Ra(G,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(G),this.consumeNumericToken();break;case 44:return tA;case 45:var Kt=G,jt=this.peekCodePoint(0),Dn=this.peekCodePoint(1);if(Ra(Kt,jt,Dn))return this.reconsumeCodePoint(G),this.consumeNumericToken();if(Qs(Kt,jt,Dn))return this.reconsumeCodePoint(G),this.consumeIdentLikeToken();if(45===jt&&62===Dn)return this.consumeCodePoint(),this.consumeCodePoint(),Fy;break;case 46:if(Ra(G,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(G),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var zn=this.consumeCodePoint();if(42===zn&&47===(zn=this.consumeCodePoint()))return this.consumeToken();if(-1===zn)return this.consumeToken()}break;case 58:return Ry;case 59:return ky;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),jA;break;case 64:var ei=this.peekCodePoint(0),zi=this.peekCodePoint(1),vs=this.peekCodePoint(2);if(Qs(ei,zi,vs))return{type:7,value:this.consumeName()};break;case 91:return Qd;case 92:if(ua(G,this.peekCodePoint(0)))return this.reconsumeCodePoint(G),this.consumeIdentLikeToken();break;case 93:return bd;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Vl;break;case 123:return oi;case 125:return Q_;case 117:case 85:var Qr=this.peekCodePoint(0),us=this.peekCodePoint(1);return 43===Qr&&(_i(us)||63===us)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(G),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),nA;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),fp;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Py;break;case-1:return yh}return Ms(G)?(this.consumeWhiteSpace(),Zu):fi(G)?(this.reconsumeCodePoint(G),this.consumeNumericToken()):os(G)?(this.reconsumeCodePoint(G),this.consumeIdentLikeToken()):{type:6,value:He(G)}},W.prototype.consumeCodePoint=function(){var G=this._value.shift();return typeof G>"u"?-1:G},W.prototype.reconsumeCodePoint=function(G){this._value.unshift(G)},W.prototype.peekCodePoint=function(G){return G>=this._value.length?-1:this._value[G]},W.prototype.consumeUnicodeRangeToken=function(){for(var G=[],te=this.consumeCodePoint();_i(te)&&G.length<6;)G.push(te),te=this.consumeCodePoint();for(var ee=!1;63===te&&G.length<6;)G.push(te),te=this.consumeCodePoint(),ee=!0;if(ee)return{type:30,start:parseInt(He.apply(void 0,G.map(function(jt){return 63===jt?48:jt})),16),end:parseInt(He.apply(void 0,G.map(function(jt){return 63===jt?70:jt})),16)};var St=parseInt(He.apply(void 0,G),16);if(45===this.peekCodePoint(0)&&_i(this.peekCodePoint(1))){this.consumeCodePoint(),te=this.consumeCodePoint();for(var Kt=[];_i(te)&&Kt.length<6;)Kt.push(te),te=this.consumeCodePoint();return{type:30,start:St,end:parseInt(He.apply(void 0,Kt),16)}}return{type:30,start:St,end:St}},W.prototype.consumeIdentLikeToken=function(){var G=this.consumeName();return"url"===G.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:19,value:G}):{type:20,value:G}},W.prototype.consumeUrlToken=function(){var G=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:22,value:""};var te=this.peekCodePoint(0);if(39===te||34===te){var ee=this.consumeStringToken(this.consumeCodePoint());return 0===ee.type&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:22,value:ee.value}):(this.consumeBadUrlRemnants(),pp)}for(;;){var ke=this.consumeCodePoint();if(-1===ke||41===ke)return{type:22,value:He.apply(void 0,G)};if(Ms(ke))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:22,value:He.apply(void 0,G)}):(this.consumeBadUrlRemnants(),pp);if(34===ke||39===ke||40===ke||Co(ke))return this.consumeBadUrlRemnants(),pp;if(92===ke){if(!ua(ke,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),pp;G.push(this.consumeEscapedCodePoint())}else G.push(ke)}},W.prototype.consumeWhiteSpace=function(){for(;Ms(this.peekCodePoint(0));)this.consumeCodePoint()},W.prototype.consumeBadUrlRemnants=function(){for(;;){var G=this.consumeCodePoint();if(41===G||-1===G)return;ua(G,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},W.prototype.consumeStringSlice=function(G){for(var ee="";G>0;){var ke=Math.min(5e4,G);ee+=He.apply(void 0,this._value.splice(0,ke)),G-=ke}return this._value.shift(),ee},W.prototype.consumeStringToken=function(G){for(var te="",ee=0;;){var ke=this._value[ee];if(-1===ke||void 0===ke||ke===G)return{type:0,value:te+=this.consumeStringSlice(ee)};if(10===ke)return this._value.splice(0,ee),m0;if(92===ke){var tt=this._value[ee+1];-1!==tt&&void 0!==tt&&(10===tt?(te+=this.consumeStringSlice(ee),ee=-1,this._value.shift()):ua(ke,tt)&&(te+=this.consumeStringSlice(ee),te+=He(this.consumeEscapedCodePoint()),ee=-1))}ee++}},W.prototype.consumeNumber=function(){var G=[],te=4,ee=this.peekCodePoint(0);for((43===ee||45===ee)&&G.push(this.consumeCodePoint());fi(this.peekCodePoint(0));)G.push(this.consumeCodePoint());ee=this.peekCodePoint(0);var ke=this.peekCodePoint(1);if(46===ee&&fi(ke))for(G.push(this.consumeCodePoint(),this.consumeCodePoint()),te=8;fi(this.peekCodePoint(0));)G.push(this.consumeCodePoint());ee=this.peekCodePoint(0),ke=this.peekCodePoint(1);var tt=this.peekCodePoint(2);if((69===ee||101===ee)&&((43===ke||45===ke)&&fi(tt)||fi(ke)))for(G.push(this.consumeCodePoint(),this.consumeCodePoint()),te=8;fi(this.peekCodePoint(0));)G.push(this.consumeCodePoint());return[ha(G),te]},W.prototype.consumeNumericToken=function(){var G=this.consumeNumber(),te=G[0],ee=G[1],ke=this.peekCodePoint(0),tt=this.peekCodePoint(1),St=this.peekCodePoint(2);return Qs(ke,tt,St)?{type:15,number:te,flags:ee,unit:this.consumeName()}:37===ke?(this.consumeCodePoint(),{type:16,number:te,flags:ee}):{type:17,number:te,flags:ee}},W.prototype.consumeEscapedCodePoint=function(){var G=this.consumeCodePoint();if(_i(G)){for(var te=He(G);_i(this.peekCodePoint(0))&&te.length<6;)te+=He(this.consumeCodePoint());Ms(this.peekCodePoint(0))&&this.consumeCodePoint();var ee=parseInt(te,16);return 0===ee||function(W){return W>=55296&&W<=57343}(ee)||ee>1114111?65533:ee}return-1===G?65533:G},W.prototype.consumeName=function(){for(var G="";;){var te=this.consumeCodePoint();if(Cs(te))G+=He(te);else{if(!ua(te,this.peekCodePoint(0)))return this.reconsumeCodePoint(te),G;G+=He(this.consumeEscapedCodePoint())}}},W}(),$A=function(){function W(G){this._tokens=G}return W.create=function(G){var te=new wa;return te.write(G),new W(te.read())},W.parseValue=function(G){return W.create(G).parseComponentValue()},W.parseValues=function(G){return W.create(G).parseComponentValues()},W.prototype.parseComponentValue=function(){for(var G=this.consumeToken();31===G.type;)G=this.consumeToken();if(32===G.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(G);var te=this.consumeComponentValue();do{G=this.consumeToken()}while(31===G.type);if(32===G.type)return te;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},W.prototype.parseComponentValues=function(){for(var G=[];;){var te=this.consumeComponentValue();if(32===te.type)return G;G.push(te),G.push()}},W.prototype.consumeComponentValue=function(){var G=this.consumeToken();switch(G.type){case 11:case 28:case 2:return this.consumeSimpleBlock(G.type);case 19:return this.consumeFunction(G)}return G},W.prototype.consumeSimpleBlock=function(G){for(var te={type:G,values:[]},ee=this.consumeToken();;){if(32===ee.type||XA(ee,G))return te;this.reconsumeToken(ee),te.values.push(this.consumeComponentValue()),ee=this.consumeToken()}},W.prototype.consumeFunction=function(G){for(var te={name:G.value,values:[],type:18};;){var ee=this.consumeToken();if(32===ee.type||3===ee.type)return te;this.reconsumeToken(ee),te.values.push(this.consumeComponentValue())}},W.prototype.consumeToken=function(){var G=this._tokens.shift();return typeof G>"u"?yh:G},W.prototype.reconsumeToken=function(G){this._tokens.unshift(G)},W}(),uu=function(W){return 15===W.type},Da=function(W){return 17===W.type},cl=function(W){return 20===W.type},Di=function(W){return 0===W.type},Zl=function(W,G){return cl(W)&&W.value===G},g0=function(W){return 31!==W.type},Kr=function(W){return 31!==W.type&&4!==W.type},hu=function(W){var G=[],te=[];return W.forEach(function(ee){if(4===ee.type){if(0===te.length)throw new Error("Error parsing function args, zero tokens for arg");return G.push(te),void(te=[])}31!==ee.type&&te.push(ee)}),te.length&&G.push(te),G},XA=function(W,G){return 11===G&&12===W.type||28===G&&29===W.type||2===G&&3===W.type},Iu=function(W){return 17===W.type||15===W.type},Xs=function(W){return 16===W.type||Iu(W)},Wm=function(W){return W.length>1?[W[0],W[1]]:[W[0]]},ul={type:17,number:0,flags:4},gr={type:16,number:50,flags:4},ia={type:16,number:100,flags:4},Go=function(W,G,te){var ee=W[0],ke=W[1];return[qo(ee,G),qo(typeof ke<"u"?ke:ee,te)]},qo=function(W,G){if(16===W.type)return W.number/100*G;if(uu(W))switch(W.unit){case"rem":case"em":return 16*W.number;default:return W.number}return W.number},qh_parse=function(W,G){if(15===G.type)switch(G.unit){case"deg":return Math.PI*G.number/180;case"grad":return Math.PI/200*G.number;case"rad":return G.number;case"turn":return 2*Math.PI*G.number}throw new Error("Unsupported angle type")},Wd=function(W){return 15===W.type&&("deg"===W.unit||"grad"===W.unit||"rad"===W.unit||"turn"===W.unit)},vh=function(W){switch(W.filter(cl).map(function(te){return te.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ul,ul];case"to top":case"bottom":return ts(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ul,ia];case"to right":case"left":return ts(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[ia,ia];case"to bottom":case"top":return ts(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[ia,ul];case"to left":case"right":return ts(270)}return 0},ts=function(W){return Math.PI*W/180},Ws_parse=function(W,G){if(18===G.type){var te=zc[G.name];if(typeof te>"u")throw new Error('Attempting to parse an unsupported color function "'+G.name+'"');return te(W,G.values)}if(5===G.type){if(3===G.value.length){var ee=G.value.substring(0,1),ke=G.value.substring(1,2),tt=G.value.substring(2,3);return Ha(parseInt(ee+ee,16),parseInt(ke+ke,16),parseInt(tt+tt,16),1)}if(4===G.value.length){ee=G.value.substring(0,1),ke=G.value.substring(1,2),tt=G.value.substring(2,3);var St=G.value.substring(3,4);return Ha(parseInt(ee+ee,16),parseInt(ke+ke,16),parseInt(tt+tt,16),parseInt(St+St,16)/255)}if(6===G.value.length)return ee=G.value.substring(0,2),ke=G.value.substring(2,4),tt=G.value.substring(4,6),Ha(parseInt(ee,16),parseInt(ke,16),parseInt(tt,16),1);if(8===G.value.length)return ee=G.value.substring(0,2),ke=G.value.substring(2,4),tt=G.value.substring(4,6),St=G.value.substring(6,8),Ha(parseInt(ee,16),parseInt(ke,16),parseInt(tt,16),parseInt(St,16)/255)}if(20===G.type){var Kt=Ju[G.value.toUpperCase()];if(typeof Kt<"u")return Kt}return Ju.TRANSPARENT},js=function(W){return 0==(255&W)},Lo=function(W){var G=255&W,te=255&W>>8,ee=255&W>>16,ke=255&W>>24;return G<255?"rgba("+ke+","+ee+","+te+","+G/255+")":"rgb("+ke+","+ee+","+te+")"},Ha=function(W,G,te,ee){return(W<<24|G<<16|te<<8|Math.round(255*ee)<<0)>>>0},Ut=function(W,G){if(17===W.type)return W.number;if(16===W.type){var te=3===G?1:255;return 3===G?W.number/100*te:Math.round(W.number/100*te)}return 0},jd=function(W,G){var te=G.filter(Kr);if(3===te.length){var ee=te.map(Ut);return Ha(ee[0],ee[1],ee[2],1)}if(4===te.length){var Kt=te.map(Ut);return Ha(Kt[0],Kt[1],Kt[2],Kt[3])}return 0};function Al(W,G,te){return te<0&&(te+=1),te>=1&&(te-=1),te<1/6?(G-W)*te*6+W:te<.5?G:te<2/3?6*(G-W)*(2/3-te)+W:W}var du=function(W,G){var te=G.filter(Kr),ee=te[0],ke=te[1],tt=te[2],St=te[3],Kt=(17===ee.type?ts(ee.number):qh_parse(W,ee))/(2*Math.PI),jt=Xs(ke)?ke.number/100:0,Dn=Xs(tt)?tt.number/100:0,zn=typeof St<"u"&&Xs(St)?qo(St,1):1;if(0===jt)return Ha(255*Dn,255*Dn,255*Dn,1);var ei=Dn<=.5?Dn*(jt+1):Dn+jt-Dn*jt,zi=2*Dn-ei,vs=Al(zi,ei,Kt+1/3),Qr=Al(zi,ei,Kt),us=Al(zi,ei,Kt-1/3);return Ha(255*vs,255*Qr,255*us,zn)},zc={hsl:du,hsla:du,rgb:jd,rgba:jd},vo=function(W,G){return Ws_parse(W,$A.create(G).parseComponentValue())},Ju={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},eh={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(W,G){return G.map(function(te){if(cl(te))switch(te.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},$d={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Pu=function(W,G){var te=Ws_parse(W,G[0]),ee=G[1];return ee&&Xs(ee)?{color:te,stop:ee}:{color:te,stop:null}},Nl=function(W,G){var te=W[0],ee=W[W.length-1];null===te.stop&&(te.stop=ul),null===ee.stop&&(ee.stop=ia);for(var ke=[],tt=0,St=0;St<W.length;St++){var Kt=W[St].stop;if(null!==Kt){var jt=qo(Kt,G);ke.push(jt>tt?jt:tt),tt=jt}else ke.push(null)}var Dn=null;for(St=0;St<ke.length;St++){var zn=ke[St];if(null===zn)null===Dn&&(Dn=St);else if(null!==Dn){for(var ei=St-Dn,vs=(zn-ke[Dn-1])/(ei+1),Qr=1;Qr<=ei;Qr++)ke[Dn+Qr-1]=vs*Qr;Dn=null}}return W.map(function(us,No){return{color:us.color,stop:Math.max(Math.min(1,ke[No]/G),0)}})},xh=function(W,G,te){var ee="number"==typeof W?W:function(W,G,te){var ee=G/2,ke=te/2,tt=qo(W[0],G)-ee,St=ke-qo(W[1],te);return(Math.atan2(St,tt)+2*Math.PI)%(2*Math.PI)}(W,G,te),ke=Math.abs(G*Math.sin(ee))+Math.abs(te*Math.cos(ee)),tt=G/2,St=te/2,Kt=ke/2,jt=Math.sin(ee-Math.PI/2)*Kt,Dn=Math.cos(ee-Math.PI/2)*Kt;return[ke,tt-Dn,tt+Dn,St-jt,St+jt]},Ul=function(W,G){return Math.sqrt(W*W+G*G)},iu=function(W,G,te,ee,ke){return[[0,0],[0,G],[W,0],[W,G]].reduce(function(St,Kt){var zn=Ul(te-Kt[0],ee-Kt[1]);return(ke?zn<St.optimumDistance:zn>St.optimumDistance)?{optimumCorner:Kt,optimumDistance:zn}:St},{optimumDistance:ke?1/0:-1/0,optimumCorner:null}).optimumCorner},YA=function(W,G){var te=ts(180),ee=[];return hu(G).forEach(function(ke,tt){if(0===tt){var St=ke[0];if(20===St.type&&-1!==["top","left","right","bottom"].indexOf(St.value))return void(te=vh(ke));if(Wd(St))return void(te=(qh_parse(W,St)+ts(270))%ts(360))}var Kt=Pu(W,ke);ee.push(Kt)}),{angle:te,stops:ee,type:1}},Ap="closest-side",iA="farthest-side",xd="closest-corner",th="farthest-corner",W_="ellipse",Vc="contain",wh=function(W,G){var te=0,ee=3,ke=[],tt=[];return hu(G).forEach(function(St,Kt){var jt=!0;if(0===Kt?jt=St.reduce(function(zn,ei){if(cl(ei))switch(ei.value){case"center":return tt.push(gr),!1;case"top":case"left":return tt.push(ul),!1;case"right":case"bottom":return tt.push(ia),!1}else if(Xs(ei)||Iu(ei))return tt.push(ei),!1;return zn},jt):1===Kt&&(jt=St.reduce(function(zn,ei){if(cl(ei))switch(ei.value){case"circle":return te=0,!1;case W_:return te=1,!1;case Vc:case Ap:return ee=0,!1;case iA:return ee=1,!1;case xd:return ee=2,!1;case"cover":case th:return ee=3,!1}else if(Iu(ei)||Xs(ei))return Array.isArray(ee)||(ee=[]),ee.push(ei),!1;return zn},jt)),jt){var Dn=Pu(W,St);ke.push(Dn)}}),{size:ee,shape:te,stops:ke,position:tt,type:2}},fu_parse=function(W,G){if(22===G.type){var te={url:G.value,type:0};return W.cache.addImage(G.value),te}if(18===G.type){var ee=$m[G.name];if(typeof ee>"u")throw new Error('Attempting to parse an unsupported image function "'+G.name+'"');return ee(W,G.values)}throw new Error("Unsupported image type "+G.type)};for(var $m={"linear-gradient":function(W,G){var te=ts(180),ee=[];return hu(G).forEach(function(ke,tt){if(0===tt){var St=ke[0];if(20===St.type&&"to"===St.value)return void(te=vh(ke));if(Wd(St))return void(te=qh_parse(W,St))}var Kt=Pu(W,ke);ee.push(Kt)}),{angle:te,stops:ee,type:1}},"-moz-linear-gradient":YA,"-ms-linear-gradient":YA,"-o-linear-gradient":YA,"-webkit-linear-gradient":YA,"radial-gradient":function(W,G){var te=0,ee=3,ke=[],tt=[];return hu(G).forEach(function(St,Kt){var jt=!0;if(0===Kt){var Dn=!1;jt=St.reduce(function(ei,zi){if(Dn)if(cl(zi))switch(zi.value){case"center":return tt.push(gr),ei;case"top":case"left":return tt.push(ul),ei;case"right":case"bottom":return tt.push(ia),ei}else(Xs(zi)||Iu(zi))&&tt.push(zi);else if(cl(zi))switch(zi.value){case"circle":return te=0,!1;case W_:return te=1,!1;case"at":return Dn=!0,!1;case Ap:return ee=0,!1;case"cover":case iA:return ee=1,!1;case Vc:case xd:return ee=2,!1;case th:return ee=3,!1}else if(Iu(zi)||Xs(zi))return Array.isArray(ee)||(ee=[]),ee.push(zi),!1;return ei},jt)}if(jt){var zn=Pu(W,St);ke.push(zn)}}),{size:ee,shape:te,stops:ke,position:tt,type:2}},"-moz-radial-gradient":wh,"-ms-radial-gradient":wh,"-o-radial-gradient":wh,"-webkit-radial-gradient":wh,"-webkit-gradient":function(W,G){var te=ts(180),ee=[],ke=1;return hu(G).forEach(function(jt,Dn){var zn=jt[0];if(0===Dn){if(cl(zn)&&"linear"===zn.value)return void(ke=1);if(cl(zn)&&"radial"===zn.value)return void(ke=2)}if(18===zn.type)if("from"===zn.name){var ei=Ws_parse(W,zn.values[0]);ee.push({stop:ul,color:ei})}else if("to"===zn.name)ei=Ws_parse(W,zn.values[0]),ee.push({stop:ia,color:ei});else if("color-stop"===zn.name){var zi=zn.values.filter(Kr);if(2===zi.length){ei=Ws_parse(W,zi[1]);var vs=zi[0];Da(vs)&&ee.push({stop:{type:16,number:100*vs.number,flags:vs.flags},color:ei})}}}),1===ke?{angle:(te+ts(180))%ts(360),stops:ee,type:ke}:{size:3,shape:0,stops:ee,position:[],type:ke}}},Xd={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(W,G){if(0===G.length)return[];var te=G[0];return 20===te.type&&"none"===te.value?[]:G.filter(function(ee){return Kr(ee)&&function j_(W){return!(20===W.type&&"none"===W.value||18===W.type&&!$m[W.name])}(ee)}).map(function(ee){return fu_parse(W,ee)})}},ZA={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(W,G){return G.map(function(te){if(cl(te))switch(te.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},nh={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(W,G){return hu(G).map(function(te){return te.filter(Xs)}).map(Wm)}},$_={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(W,G){return hu(G).map(function(te){return te.filter(cl).map(function(ee){return ee.value}).join(" ")}).map(Oy)}},Oy=function(W){switch(W){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;default:return 0}},hl=(()=>{return(W=hl||(hl={})).AUTO="auto",W.CONTAIN="contain",W.COVER="cover",hl;var W})(),_0={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(W,G){return hu(G).map(function(te){return te.filter(Bc)})}},Bc=function(W){return cl(W)||Xs(W)},X_=function(W){return{name:"border-"+W+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},wd=X_("top"),mp=X_("right"),Ob=X_("bottom"),K_=X_("left"),JA=function(W){return{name:"border-radius-"+W,initialValue:"0 0",prefix:!1,type:1,parse:function(G,te){return Wm(te.filter(Xs))}}},Xm=JA("top-left"),_S=JA("top-right"),Ss=JA("bottom-right"),a2=JA("bottom-left"),Qh=function(W){return{name:"border-"+W+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(G,te){switch(te){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Y_=Qh("top"),Ic=Qh("right"),gp=Qh("bottom"),Ly=Qh("left"),em=function(W){return{name:"border-"+W+"-width",initialValue:"0",type:0,prefix:!1,parse:function(G,te){return uu(te)?te.number:0}}},_p=em("top"),Md=em("right"),Fu=em("bottom"),yp=em("left"),y0={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ru={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(W,G){return"rtl"===G?1:0}},v0={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(W,G){return G.filter(cl).reduce(function(te,ee){return te|b0(ee.value)},0)}},b0=function(W){switch(W){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},vc={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(W,G){switch(G){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},sA={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(W,G){return 20===G.type&&"normal"===G.value?0:17===G.type||15===G.type?G.number:0}},Wh=(()=>{return(W=Wh||(Wh={})).NORMAL="normal",W.STRICT="strict",Wh;var W})(),Va={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(W,G){return"strict"===G?Wh.STRICT:Wh.NORMAL}},x0={name:"line-height",initialValue:"normal",prefix:!1,type:4},pu=function(W,G){return cl(W)&&"normal"===W.value?1.2*G:17===W.type?G*W.number:Xs(W)?qo(W,G):G},jh={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(W,G){return 20===G.type&&"none"===G.value?null:fu_parse(W,G)}},bc={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(W,G){return"inside"===G?0:1}},Au={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(W,G){switch(G){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;default:return-1}}},Mh=function(W){return{name:"margin-"+W,initialValue:"0",prefix:!1,type:4}},Pc=Mh("top"),So=Mh("right"),Gl=Mh("bottom"),vp=Mh("left"),Io={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(W,G){return G.filter(cl).map(function(te){switch(te.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;default:return 0}})}},$h={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(W,G){return"break-word"===G?"break-word":"normal"}},$l=function(W){return{name:"padding-"+W,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Gc=$l("top"),Ny=$l("right"),Nf=$l("bottom"),Z_=$l("left"),tm={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(W,G){switch(G){case"right":return 2;case"center":case"justify":return 1;default:return 0}}},ec={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(W,G){switch(G){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Zi={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(W,G){return 1===G.length&&Zl(G[0],"none")?[]:hu(G).map(function(te){for(var ee={color:Ju.TRANSPARENT,offsetX:ul,offsetY:ul,blur:ul},ke=0,tt=0;tt<te.length;tt++){var St=te[tt];Iu(St)?(0===ke?ee.offsetX=St:1===ke?ee.offsetY=St:ee.blur=St,ke++):ee.color=Ws_parse(W,St)}return ee})}},_a={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(W,G){switch(G){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},ks={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(W,G){if(20===G.type&&"none"===G.value)return null;if(18===G.type){var te=nm[G.name];if(typeof te>"u")throw new Error('Attempting to parse an unsupported transform function "'+G.name+'"');return te(G.values)}return null}},nm={matrix:function(W){var G=W.filter(function(te){return 17===te.type}).map(function(te){return te.number});return 6===G.length?G:null},matrix3d:function(W){var G=W.filter(function(jt){return 17===jt.type}).map(function(jt){return jt.number});return 16===G.length?[G[0],G[1],G[4],G[5],G[12],G[13]]:null}},Uf={type:16,number:50,flags:4},qc=[Uf,Uf],mu={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(W,G){var te=G.filter(Xs);return 2!==te.length?qc:[te[0],te[1]]}},Xh={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(W,G){switch(G){case"hidden":return 1;case"collapse":return 2;default:return 0}}},Kd=(()=>{return(W=Kd||(Kd={})).NORMAL="normal",W.BREAK_ALL="break-all",W.KEEP_ALL="keep-all",Kd;var W})(),zf={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(W,G){switch(G){case"break-all":return Kd.BREAK_ALL;case"keep-all":return Kd.KEEP_ALL;default:return Kd.NORMAL}}},Hf={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(W,G){if(20===G.type)return{auto:!0,order:0};if(Da(G))return{auto:!1,order:G.number};throw new Error("Invalid z-index number parsed")}},Xl={name:"time",parse:function(W,G){if(15===G.type)switch(G.unit.toLowerCase()){case"s":return 1e3*G.number;case"ms":return G.number}throw new Error("Unsupported time type")}},Kh={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(W,G){return Da(G)?G.number:1}},im={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Yd={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(W,G){return G.filter(cl).map(function(te){switch(te.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(te){return 0!==te})}},Yh={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(W,G){var te=[],ee=[];return G.forEach(function(ke){switch(ke.type){case 20:case 0:te.push(ke.value);break;case 17:te.push(ke.number.toString());break;case 4:ee.push(te.join(" ")),te.length=0}}),te.length&&ee.push(te.join(" ")),ee.map(function(ke){return-1===ke.indexOf(" ")?ke:"'"+ke+"'"})}},ku={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Ou={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(W,G){return Da(G)?G.number:cl(G)&&"bold"===G.value?700:400}},w0={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(W,G){return G.filter(cl).map(function(te){return te.value})}},oA={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(W,G){switch(G){case"oblique":return"oblique";case"italic":return"italic";default:return"normal"}}},ql=function(W,G){return 0!=(W&G)},Cd={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(W,G){if(0===G.length)return[];var te=G[0];return 20===te.type&&"none"===te.value?[]:G}},Zd={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(W,G){if(0===G.length)return null;var te=G[0];if(20===te.type&&"none"===te.value)return null;for(var ee=[],ke=G.filter(g0),tt=0;tt<ke.length;tt++){var St=ke[tt],Kt=ke[tt+1];if(20===St.type){var jt=Kt&&Da(Kt)?Kt.number:1;ee.push({counter:St.value,increment:jt})}}return ee}},Sd={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(W,G){if(0===G.length)return[];for(var te=[],ee=G.filter(g0),ke=0;ke<ee.length;ke++){var tt=ee[ke],St=ee[ke+1];if(cl(tt)&&"none"!==tt.value){var Kt=St&&Da(St)?St.number:0;te.push({counter:tt.value,reset:Kt})}}return te}},Td={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(W,G){return G.filter(uu).map(function(te){return Xl.parse(W,te)})}},rm={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(W,G){if(0===G.length)return null;var te=G[0];if(20===te.type&&"none"===te.value)return null;var ee=[],ke=G.filter(Di);if(ke.length%2!=0)return null;for(var tt=0;tt<ke.length;tt+=2)ee.push({open:ke[tt].value,close:ke[tt+1].value});return ee}},aA=function(W,G,te){if(!W)return"";var ee=W[Math.min(G,W.length-1)];return ee?te?ee.open:ee.close:""},lA={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(W,G){return 1===G.length&&Zl(G[0],"none")?[]:hu(G).map(function(te){for(var ee={color:255,offsetX:ul,offsetY:ul,blur:ul,spread:ul,inset:!1},ke=0,tt=0;tt<te.length;tt++){var St=te[tt];Zl(St,"inset")?ee.inset=!0:Iu(St)?(0===ke?ee.offsetX=St:1===ke?ee.offsetY=St:2===ke?ee.blur=St:ee.spread=St,ke++):ee.color=Ws_parse(W,St)}return ee})}},cA={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(W,G){var ee=[];return G.filter(cl).forEach(function(ke){switch(ke.value){case"stroke":ee.push(1);break;case"fill":ee.push(0);break;case"markers":ee.push(2)}}),[0,1,2].forEach(function(ke){-1===ee.indexOf(ke)&&ee.push(ke)}),ee}},uA={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},sm={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(W,G){return uu(G)?G.number:0}},hA=function(){function W(G,te){var ee,ke;this.animationDuration=Wr(G,Td,te.animationDuration),this.backgroundClip=Wr(G,eh,te.backgroundClip),this.backgroundColor=Wr(G,$d,te.backgroundColor),this.backgroundImage=Wr(G,Xd,te.backgroundImage),this.backgroundOrigin=Wr(G,ZA,te.backgroundOrigin),this.backgroundPosition=Wr(G,nh,te.backgroundPosition),this.backgroundRepeat=Wr(G,$_,te.backgroundRepeat),this.backgroundSize=Wr(G,_0,te.backgroundSize),this.borderTopColor=Wr(G,wd,te.borderTopColor),this.borderRightColor=Wr(G,mp,te.borderRightColor),this.borderBottomColor=Wr(G,Ob,te.borderBottomColor),this.borderLeftColor=Wr(G,K_,te.borderLeftColor),this.borderTopLeftRadius=Wr(G,Xm,te.borderTopLeftRadius),this.borderTopRightRadius=Wr(G,_S,te.borderTopRightRadius),this.borderBottomRightRadius=Wr(G,Ss,te.borderBottomRightRadius),this.borderBottomLeftRadius=Wr(G,a2,te.borderBottomLeftRadius),this.borderTopStyle=Wr(G,Y_,te.borderTopStyle),this.borderRightStyle=Wr(G,Ic,te.borderRightStyle),this.borderBottomStyle=Wr(G,gp,te.borderBottomStyle),this.borderLeftStyle=Wr(G,Ly,te.borderLeftStyle),this.borderTopWidth=Wr(G,_p,te.borderTopWidth),this.borderRightWidth=Wr(G,Md,te.borderRightWidth),this.borderBottomWidth=Wr(G,Fu,te.borderBottomWidth),this.borderLeftWidth=Wr(G,yp,te.borderLeftWidth),this.boxShadow=Wr(G,lA,te.boxShadow),this.color=Wr(G,y0,te.color),this.direction=Wr(G,Ru,te.direction),this.display=Wr(G,v0,te.display),this.float=Wr(G,vc,te.cssFloat),this.fontFamily=Wr(G,Yh,te.fontFamily),this.fontSize=Wr(G,ku,te.fontSize),this.fontStyle=Wr(G,oA,te.fontStyle),this.fontVariant=Wr(G,w0,te.fontVariant),this.fontWeight=Wr(G,Ou,te.fontWeight),this.letterSpacing=Wr(G,sA,te.letterSpacing),this.lineBreak=Wr(G,Va,te.lineBreak),this.lineHeight=Wr(G,x0,te.lineHeight),this.listStyleImage=Wr(G,jh,te.listStyleImage),this.listStylePosition=Wr(G,bc,te.listStylePosition),this.listStyleType=Wr(G,Au,te.listStyleType),this.marginTop=Wr(G,Pc,te.marginTop),this.marginRight=Wr(G,So,te.marginRight),this.marginBottom=Wr(G,Gl,te.marginBottom),this.marginLeft=Wr(G,vp,te.marginLeft),this.opacity=Wr(G,Kh,te.opacity);var tt=Wr(G,Io,te.overflow);this.overflowX=tt[0],this.overflowY=tt[tt.length>1?1:0],this.overflowWrap=Wr(G,$h,te.overflowWrap),this.paddingTop=Wr(G,Gc,te.paddingTop),this.paddingRight=Wr(G,Ny,te.paddingRight),this.paddingBottom=Wr(G,Nf,te.paddingBottom),this.paddingLeft=Wr(G,Z_,te.paddingLeft),this.paintOrder=Wr(G,cA,te.paintOrder),this.position=Wr(G,ec,te.position),this.textAlign=Wr(G,tm,te.textAlign),this.textDecorationColor=Wr(G,im,null!==(ee=te.textDecorationColor)&&void 0!==ee?ee:te.color),this.textDecorationLine=Wr(G,Yd,null!==(ke=te.textDecorationLine)&&void 0!==ke?ke:te.textDecoration),this.textShadow=Wr(G,Zi,te.textShadow),this.textTransform=Wr(G,_a,te.textTransform),this.transform=Wr(G,ks,te.transform),this.transformOrigin=Wr(G,mu,te.transformOrigin),this.visibility=Wr(G,Xh,te.visibility),this.webkitTextStrokeColor=Wr(G,uA,te.webkitTextStrokeColor),this.webkitTextStrokeWidth=Wr(G,sm,te.webkitTextStrokeWidth),this.wordBreak=Wr(G,zf,te.wordBreak),this.zIndex=Wr(G,Hf,te.zIndex)}return W.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},W.prototype.isTransparent=function(){return js(this.backgroundColor)},W.prototype.isTransformed=function(){return null!==this.transform},W.prototype.isPositioned=function(){return 0!==this.position},W.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},W.prototype.isFloating=function(){return 0!==this.float},W.prototype.isInlineLevel=function(){return ql(this.display,4)||ql(this.display,33554432)||ql(this.display,268435456)||ql(this.display,536870912)||ql(this.display,67108864)||ql(this.display,134217728)},W}(),Km=function W(G,te){this.content=Wr(G,Cd,te.content),this.quotes=Wr(G,rm,te.quotes)},Ym=function W(G,te){this.counterIncrement=Wr(G,Zd,te.counterIncrement),this.counterReset=Wr(G,Sd,te.counterReset)},Wr=function(W,G,te){var ee=new wa,ke=null!==te&&typeof te<"u"?te.toString():G.initialValue;ee.write(ke);var tt=new $A(ee.read());switch(G.type){case 2:var St=tt.parseComponentValue();return G.parse(W,cl(St)?St.value:G.initialValue);case 0:return G.parse(W,tt.parseComponentValue());case 1:return G.parse(W,tt.parseComponentValues());case 4:return tt.parseComponentValue();case 3:switch(G.format){case"angle":return qh_parse(W,tt.parseComponentValue());case"color":return Ws_parse(W,tt.parseComponentValue());case"image":return fu_parse(W,tt.parseComponentValue());case"length":var Kt=tt.parseComponentValue();return Iu(Kt)?Kt:ul;case"length-percentage":var jt=tt.parseComponentValue();return Xs(jt)?jt:ul;case"time":return Xl.parse(W,tt.parseComponentValue())}}},xl=function(W,G){var te=function(W){switch(W.getAttribute("data-html2canvas-debug")){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}}(W);return 1===te||G===te},Zh=function W(G,te){this.context=G,this.textNodes=[],this.elements=[],this.flags=0,xl(te,3),this.styles=new hA(G,window.getComputedStyle(te,null)),O0(te)&&(this.styles.animationDuration.some(function(ee){return ee>0})&&(te.style.animationDuration="0s"),null!==this.styles.transform&&(te.style.transform="none")),this.bounds=je(this.context,te),xl(te,4)&&(this.flags|=16)},Zm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dA=typeof Uint8Array>"u"?[]:new Uint8Array(256),om=0;om<Zm.length;om++)dA[Zm.charCodeAt(om)]=om;for(var td=function(W,G,te){return W.slice?W.slice(G,te):new Uint16Array(Array.prototype.slice.call(W,G,te))},E0=function(){function W(G,te,ee,ke,tt,St){this.initialValue=G,this.errorValue=te,this.highStart=ee,this.highValueIndex=ke,this.index=tt,this.data=St}return W.prototype.get=function(G){var te;if(G>=0){if(G<55296||G>56319&&G<=65535)return this.data[te=((te=this.index[G>>5])<<2)+(31&G)];if(G<=65535)return this.data[te=((te=this.index[2048+(G-55296>>5)])<<2)+(31&G)];if(G<this.highStart)return te=this.index[te=2080+(G>>11)],this.data[te=((te=this.index[te+=G>>5&63])<<2)+(31&G)];if(G<=1114111)return this.data[this.highValueIndex]}return this.errorValue},W}(),bp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t1=typeof Uint8Array>"u"?[]:new Uint8Array(256),Ch=0;Ch<bp.length;Ch++)t1[bp.charCodeAt(Ch)]=Ch;var Qc=8,mA=9,ag=11,B0=12,F0=function(){for(var W=[],G=0;G<arguments.length;G++)W[G]=arguments[G];if(String.fromCodePoint)return String.fromCodePoint.apply(String,W);var te=W.length;if(!te)return"";for(var ee=[],ke=-1,tt="";++ke<te;){var St=W[ke];St<=65535?ee.push(St):ee.push(55296+((St-=65536)>>10),St%1024+56320),(ke+1===te||ee.length>16384)&&(tt+=String.fromCharCode.apply(String,ee),ee.length=0)}return tt},cg=function(W,G){var te=function(W){var ee,tt,St,Kt,jt,G=.75*W.length,te=W.length,ke=0;"="===W[W.length-1]&&(G--,"="===W[W.length-2]&&G--);var Dn=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(G):new Array(G),zn=Array.isArray(Dn)?Dn:new Uint8Array(Dn);for(ee=0;ee<te;ee+=4)tt=dA[W.charCodeAt(ee)],St=dA[W.charCodeAt(ee+1)],Kt=dA[W.charCodeAt(ee+2)],jt=dA[W.charCodeAt(ee+3)],zn[ke++]=tt<<2|St>>4,zn[ke++]=(15&St)<<4|Kt>>2,zn[ke++]=(3&Kt)<<6|63&jt;return Dn}(W),ee=Array.isArray(te)?function(W){for(var G=W.length,te=[],ee=0;ee<G;ee+=4)te.push(W[ee+3]<<24|W[ee+2]<<16|W[ee+1]<<8|W[ee]);return te}(te):new Uint32Array(te),ke=Array.isArray(te)?function(W){for(var G=W.length,te=[],ee=0;ee<G;ee+=2)te.push(W[ee+1]<<8|W[ee]);return te}(te):new Uint16Array(te),St=td(ke,12,ee[4]/2),Kt=2===ee[5]?td(ke,(24+ee[4])/2):function(W,G,te){return W.slice?W.slice(G,te):new Uint32Array(Array.prototype.slice.call(W,G,te))}(ee,Math.ceil((24+ee[4])/4));return new E0(ee[0],ee[1],ee[2],ee[3],St,Kt)}("AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA="),am=function(W){return cg.get(W)},Vf=function(W,G,te){var ee=te-2,ke=G[ee],tt=G[te-1],St=G[te];if(2===tt&&3===St)return"\xd7";if(2===tt||3===tt||4===tt||2===St||3===St||4===St)return"\xf7";if(tt===Qc&&-1!==[Qc,mA,ag,B0].indexOf(St)||(tt===ag||tt===mA)&&(St===mA||10===St)||(tt===B0||10===tt)&&10===St||13===St||5===St||7===St||1===tt)return"\xd7";if(13===tt&&14===St){for(;5===ke;)ke=G[--ee];if(14===ke)return"\xd7"}if(15===tt&&15===St){for(var Kt=0;15===ke;)Kt++,ke=G[--ee];if(Kt%2==0)return"\xd7"}return"\xf7"},n1=function(W){var G=function(W){for(var G=[],te=0,ee=W.length;te<ee;){var ke=W.charCodeAt(te++);if(ke>=55296&&ke<=56319&&te<ee){var tt=W.charCodeAt(te++);56320==(64512&tt)?G.push(((1023&ke)<<10)+(1023&tt)+65536):(G.push(ke),te--)}else G.push(ke)}return G}(W),te=G.length,ee=0,ke=0,tt=G.map(am);return{next:function(){if(ee>=te)return{done:!0,value:null};for(var St="\xd7";ee<te&&"\xd7"===(St=Vf(0,tt,++ee)););if("\xd7"!==St||ee===te){var Kt=F0.apply(null,G.slice(ke,ee));return ke=ee,{value:Kt,done:!1}}return{done:!0,value:null}}}},r1=function(W){return 0===W[0]&&255===W[1]&&0===W[2]&&255===W[3]},Th=function(W,G,te,ee,ke){var tt="http://www.w3.org/2000/svg",St=document.createElementNS(tt,"svg"),Kt=document.createElementNS(tt,"foreignObject");return St.setAttributeNS(null,"width",W.toString()),St.setAttributeNS(null,"height",G.toString()),Kt.setAttributeNS(null,"width","100%"),Kt.setAttributeNS(null,"height","100%"),Kt.setAttributeNS(null,"x",te.toString()),Kt.setAttributeNS(null,"y",ee.toString()),Kt.setAttributeNS(null,"externalResourcesRequired","true"),St.appendChild(Kt),Kt.appendChild(ke),St},Mp=function(W){return new Promise(function(G,te){var ee=new Image;ee.onload=function(){return G(ee)},ee.onerror=te,ee.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(W))})},Ql={get SUPPORT_RANGE_BOUNDS(){var W=function(W){if(W.createRange){var te=W.createRange();if(te.getBoundingClientRect){var ee=W.createElement("boundtest");ee.style.height="123px",ee.style.display="block",W.body.appendChild(ee),te.selectNode(ee);var ke=te.getBoundingClientRect(),tt=Math.round(ke.height);if(W.body.removeChild(ee),123===tt)return!0}}return!1}(document);return Object.defineProperty(Ql,"SUPPORT_RANGE_BOUNDS",{value:W}),W},get SUPPORT_WORD_BREAKING(){var W=Ql.SUPPORT_RANGE_BOUNDS&&function(W){var G=W.createElement("boundtest");G.style.width="50px",G.style.display="block",G.style.fontSize="12px",G.style.letterSpacing="0px",G.style.wordSpacing="0px",W.body.appendChild(G);var te=W.createRange();G.innerHTML="function"==typeof"".repeat?"&#128104;".repeat(10):"";var ee=G.firstChild,ke=Ie(ee.data).map(function(jt){return He(jt)}),tt=0,St={},Kt=ke.every(function(jt,Dn){te.setStart(ee,tt),te.setEnd(ee,tt+jt.length);var zn=te.getBoundingClientRect();tt+=jt.length;var ei=zn.x>St.x||zn.y>St.y;return St=zn,0===Dn||ei});return W.body.removeChild(G),Kt}(document);return Object.defineProperty(Ql,"SUPPORT_WORD_BREAKING",{value:W}),W},get SUPPORT_SVG_DRAWING(){var W=function(W){var G=new Image,te=W.createElement("canvas"),ee=te.getContext("2d");if(!ee)return!1;G.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{ee.drawImage(G,0,0),te.toDataURL()}catch{return!1}return!0}(document);return Object.defineProperty(Ql,"SUPPORT_SVG_DRAWING",{value:W}),W},get SUPPORT_FOREIGNOBJECT_DRAWING(){var W="function"==typeof Array.from&&"function"==typeof window.fetch?function(W){var G=W.createElement("canvas"),te=100;G.width=te,G.height=te;var ee=G.getContext("2d");if(!ee)return Promise.reject(!1);ee.fillStyle="rgb(0, 255, 0)",ee.fillRect(0,0,te,te);var ke=new Image,tt=G.toDataURL();ke.src=tt;var St=Th(te,te,0,0,ke);return ee.fillStyle="red",ee.fillRect(0,0,te,te),Mp(St).then(function(Kt){ee.drawImage(Kt,0,0);var jt=ee.getImageData(0,0,te,te).data;ee.fillStyle="red",ee.fillRect(0,0,te,te);var Dn=W.createElement("div");return Dn.style.backgroundImage="url("+tt+")",Dn.style.height="100px",r1(jt)?Mp(Th(te,te,0,0,Dn)):Promise.reject(!1)}).then(function(Kt){return ee.drawImage(Kt,0,0),r1(ee.getImageData(0,0,te,te).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(Ql,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:W}),W},get SUPPORT_CORS_IMAGES(){var W=typeof(new Image).crossOrigin<"u";return Object.defineProperty(Ql,"SUPPORT_CORS_IMAGES",{value:W}),W},get SUPPORT_RESPONSE_TYPE(){var W="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(Ql,"SUPPORT_RESPONSE_TYPE",{value:W}),W},get SUPPORT_CORS_XHR(){var W="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ql,"SUPPORT_CORS_XHR",{value:W}),W},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var W=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ql,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:W}),W}},id=function W(G,te){this.text=G,this.bounds=te},dg=function(W,G,te,ee){var ke=sr(G,te),tt=[],St=0;return ke.forEach(function(Kt){if(te.textDecorationLine.length||Kt.trim().length>0)if(Ql.SUPPORT_RANGE_BOUNDS){var jt=Gf(ee,St,Kt.length).getClientRects();if(jt.length>1){var Dn=s1(Kt),zn=0;Dn.forEach(function(zi){tt.push(new id(zi,Be.fromDOMRectList(W,Gf(ee,zn+St,zi.length).getClientRects()))),zn+=zi.length})}else tt.push(new id(Kt,Be.fromDOMRectList(W,jt)))}else{var ei=ee.splitText(Kt.length);tt.push(new id(Kt,tf(W,ee))),ee=ei}else Ql.SUPPORT_RANGE_BOUNDS||(ee=ee.splitText(Kt.length));St+=Kt.length}),tt},tf=function(W,G){var te=G.ownerDocument;if(te){var ee=te.createElement("html2canvaswrapper");ee.appendChild(G.cloneNode(!0));var ke=G.parentNode;if(ke){ke.replaceChild(ee,G);var tt=je(W,ee);return ee.firstChild&&ke.replaceChild(ee.firstChild,ee),tt}}return Be.EMPTY},Gf=function(W,G,te){var ee=W.ownerDocument;if(!ee)throw new Error("Node has no owner document");var ke=ee.createRange();return ke.setStart(W,G),ke.setEnd(W,G+te),ke},s1=function(W){if(Ql.SUPPORT_NATIVE_TEXT_SEGMENTATION){var G=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(G.segment(W)).map(function(te){return te.segment})}return function(W){for(var ee,G=n1(W),te=[];!(ee=G.next()).done;)ee.value&&te.push(ee.value.slice());return te}(W)},sr=function(W,G){return 0!==G.letterSpacing?s1(W):function(W,G){if(Ql.SUPPORT_NATIVE_TEXT_SEGMENTATION){var te=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(te.segment(W)).map(function(ee){return ee.segment})}return o1(W,G)}(W,G)},Nb=[32,160,4961,65792,65793,4153,4241],o1=function(W,G){for(var ke,te=function(W,G){var te=Ie(W),ee=fn(te,G),ke=ee[0],tt=ee[1],St=ee[2],Kt=te.length,jt=0,Dn=0;return{next:function(){if(Dn>=Kt)return{done:!0,value:null};for(var zn=xr;Dn<Kt&&(zn=wt(te,tt,ke,++Dn,St))===xr;);if(zn!==xr||Dn===Kt){var ei=new pn(te,zn,jt,Dn);return jt=Dn,{value:ei,done:!1}}return{done:!0,value:null}}}}(W,{lineBreak:G.lineBreak,wordBreak:"break-word"===G.overflowWrap?"break-word":G.wordBreak}),ee=[],tt=function(){if(ke.value){var St=ke.value.slice(),Kt=Ie(St),jt="";Kt.forEach(function(Dn){-1===Nb.indexOf(Dn)?jt+=He(Dn):(jt.length&&ee.push(jt),ee.push(He(Dn)),jt="")}),jt.length&&ee.push(jt)}};!(ke=te.next()).done;)tt();return ee},a1=function W(G,te,ee){this.text=fg(te.data,ee.textTransform),this.textBounds=dg(G,this.text,ee,te)},fg=function(W,G){switch(G){case 1:return W.toLowerCase();case 3:return W.replace(Ub,Hy);case 2:return W.toUpperCase();default:return W}},Ub=/(^|\s|:|-|\(|\))([a-z])/g,Hy=function(W,G,te){return W.length>0?G+te.toUpperCase():W},Rc=function(W){function G(te,ee){var ke=W.call(this,te,ee)||this;return ke.src=ee.currentSrc||ee.src,ke.intrinsicWidth=ee.naturalWidth,ke.intrinsicHeight=ee.naturalHeight,ke.context.cache.addImage(ke.src),ke}return Ce(G,W),G}(Zh),gA=function(W){function G(te,ee){var ke=W.call(this,te,ee)||this;return ke.canvas=ee,ke.intrinsicWidth=ee.width,ke.intrinsicHeight=ee.height,ke}return Ce(G,W),G}(Zh),Vy=function(W){function G(te,ee){var ke=W.call(this,te,ee)||this,tt=new XMLSerializer,St=je(te,ee);return ee.setAttribute("width",St.width+"px"),ee.setAttribute("height",St.height+"px"),ke.svg="data:image/svg+xml,"+encodeURIComponent(tt.serializeToString(ee)),ke.intrinsicWidth=ee.width.baseVal.value,ke.intrinsicHeight=ee.height.baseVal.value,ke.context.cache.addImage(ke.svg),ke}return Ce(G,W),G}(Zh),Ga=function(W){function G(te,ee){var ke=W.call(this,te,ee)||this;return ke.value=ee.value,ke}return Ce(G,W),G}(Zh),tc=function(W){function G(te,ee){var ke=W.call(this,te,ee)||this;return ke.start=ee.start,ke.reversed="boolean"==typeof ee.reversed&&!0===ee.reversed,ke}return Ce(G,W),G}(Zh),Cp=[{type:15,flags:0,unit:"px",number:3}],nf=[{type:16,flags:0,number:50}],Gy=function(W){return W.width>W.height?new Be(W.left+(W.width-W.height)/2,W.top,W.height,W.height):W.width<W.height?new Be(W.left,W.top+(W.height-W.width)/2,W.width,W.width):W},Eh=function(W){var G=W.type===pg?new Array(W.value.length+1).join("\u2022"):W.value;return 0===G.length?W.placeholder||"":G},Dd="checkbox",cm="radio",pg="password",Sp=707406591,Ag=function(W){function G(te,ee){var ke=W.call(this,te,ee)||this;switch(ke.type=ee.type.toLowerCase(),ke.checked=ee.checked,ke.value=Eh(ee),(ke.type===Dd||ke.type===cm)&&(ke.styles.backgroundColor=3739148031,ke.styles.borderTopColor=ke.styles.borderRightColor=ke.styles.borderBottomColor=ke.styles.borderLeftColor=2779096575,ke.styles.borderTopWidth=ke.styles.borderRightWidth=ke.styles.borderBottomWidth=ke.styles.borderLeftWidth=1,ke.styles.borderTopStyle=ke.styles.borderRightStyle=ke.styles.borderBottomStyle=ke.styles.borderLeftStyle=1,ke.styles.backgroundClip=[0],ke.styles.backgroundOrigin=[0],ke.bounds=Gy(ke.bounds)),ke.type){case Dd:ke.styles.borderTopRightRadius=ke.styles.borderTopLeftRadius=ke.styles.borderBottomRightRadius=ke.styles.borderBottomLeftRadius=Cp;break;case cm:ke.styles.borderTopRightRadius=ke.styles.borderTopLeftRadius=ke.styles.borderBottomRightRadius=ke.styles.borderBottomLeftRadius=nf}return ke}return Ce(G,W),G}(Zh),qy=function(W){function G(te,ee){var ke=W.call(this,te,ee)||this,tt=ee.options[ee.selectedIndex||0];return ke.value=tt&&tt.text||"",ke}return Ce(G,W),G}(Zh),l1=function(W){function G(te,ee){var ke=W.call(this,te,ee)||this;return ke.value=ee.value,ke}return Ce(G,W),G}(Zh),Qy=function(W){function G(te,ee){var ke=W.call(this,te,ee)||this;ke.src=ee.src,ke.width=parseInt(ee.width,10)||0,ke.height=parseInt(ee.height,10)||0,ke.backgroundColor=ke.styles.backgroundColor;try{if(ee.contentWindow&&ee.contentWindow.document&&ee.contentWindow.document.documentElement){ke.tree=Wy(te,ee.contentWindow.document.documentElement);var tt=ee.contentWindow.document.documentElement?vo(te,getComputedStyle(ee.contentWindow.document.documentElement).backgroundColor):Ju.TRANSPARENT,St=ee.contentWindow.document.body?vo(te,getComputedStyle(ee.contentWindow.document.body).backgroundColor):Ju.TRANSPARENT;ke.backgroundColor=js(tt)?js(St)?ke.styles.backgroundColor:St:tt}}catch{}return ke}return Ce(G,W),G}(Zh),Lu=["OL","UL","MENU"],_A=function(W,G,te,ee){for(var ke=G.firstChild,tt=void 0;ke;ke=tt)if(tt=ke.nextSibling,u1(ke)&&ke.data.trim().length>0)te.textNodes.push(new a1(W,ke,te.styles));else if(yA(ke))if(bA(ke)&&ke.assignedNodes)ke.assignedNodes().forEach(function(Kt){return _A(W,Kt,te,ee)});else{var St=qf(W,ke);St.styles.isVisible()&&(c1(ke,St,ee)?St.flags|=4:jy(St.styles)&&(St.flags|=2),-1!==Lu.indexOf(ke.tagName)&&(St.flags|=8),te.elements.push(St),ke.shadowRoot?_A(W,ke.shadowRoot,St,ee):!H0(ke)&&!Bd(ke)&&!V0(ke)&&_A(W,ke,St,ee))}},qf=function(W,G){return z0(G)?new Rc(W,G):vA(G)?new gA(W,G):Bd(G)?new Vy(W,G):h1(G)?new Ga(W,G):L0(G)?new tc(W,G):gg(G)?new Ag(W,G):V0(G)?new qy(W,G):H0(G)?new l1(W,G):um(G)?new Qy(W,G):new Zh(W,G)},Wy=function(W,G){var te=qf(W,G);return te.flags|=4,_A(W,G,te,te),te},c1=function(W,G,te){return G.styles.isPositionedWithZIndex()||G.styles.opacity<1||G.styles.isTransformed()||U0(W)&&te.styles.isTransparent()},jy=function(W){return W.isPositioned()||W.isFloating()},u1=function(W){return W.nodeType===Node.TEXT_NODE},yA=function(W){return W.nodeType===Node.ELEMENT_NODE},O0=function(W){return yA(W)&&typeof W.style<"u"&&!mg(W)},mg=function(W){return"object"==typeof W.className},h1=function(W){return"LI"===W.tagName},L0=function(W){return"OL"===W.tagName},gg=function(W){return"INPUT"===W.tagName},Bd=function(W){return"svg"===W.tagName},U0=function(W){return"BODY"===W.tagName},vA=function(W){return"CANVAS"===W.tagName},$y=function(W){return"VIDEO"===W.tagName},z0=function(W){return"IMG"===W.tagName},um=function(W){return"IFRAME"===W.tagName},_g=function(W){return"STYLE"===W.tagName},H0=function(W){return"TEXTAREA"===W.tagName},V0=function(W){return"SELECT"===W.tagName},bA=function(W){return"SLOT"===W.tagName},hm=function(W){return W.tagName.indexOf("-")>0},zb=function(){function W(){this.counters={}}return W.prototype.getCounterValue=function(G){var te=this.counters[G];return te&&te.length?te[te.length-1]:1},W.prototype.getCounterValues=function(G){return this.counters[G]||[]},W.prototype.pop=function(G){var te=this;G.forEach(function(ee){return te.counters[ee].pop()})},W.prototype.parse=function(G){var te=this,ee=G.counterIncrement,ke=G.counterReset,tt=!0;null!==ee&&ee.forEach(function(Kt){var jt=te.counters[Kt.counter];jt&&0!==Kt.increment&&(tt=!1,jt.length||jt.push(1),jt[Math.max(0,jt.length-1)]+=Kt.increment)});var St=[];return tt&&ke.forEach(function(Kt){var jt=te.counters[Kt.counter];St.push(Kt.counter),jt||(jt=te.counters[Kt.counter]=[]),jt.push(Kt.reset)}),St},W}(),Hb={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},f1={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},Vb={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},Gb={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},dm=function(W,G,te,ee,ke,tt){return W<G||W>te?q0(W,ke,tt.length>0):ee.integers.reduce(function(St,Kt,jt){for(;W>=Kt;)W-=Kt,St+=ee.values[jt];return St},"")+tt},Xy=function(W,G,te,ee){var ke="";do{te||W--,ke=ee(W)+ke,W/=G}while(W*G>=G);return ke},hc=function(W,G,te,ee,ke){var tt=te-G+1;return(W<0?"-":"")+(Xy(Math.abs(W),tt,ee,function(St){return He(Math.floor(St%tt)+G)})+ke)},Id=function(W,G,te){void 0===te&&(te=". ");var ee=G.length;return Xy(Math.abs(W),ee,!1,function(ke){return G[Math.floor(ke%ee)]})+te},rf=function(W,G,te,ee,ke,tt){if(W<-9999||W>9999)return q0(W,4,ke.length>0);var St=Math.abs(W),Kt=ke;if(0===St)return G[0]+Kt;for(var jt=0;St>0&&jt<=4;jt++){var Dn=St%10;0===Dn&&ql(tt,1)&&""!==Kt?Kt=G[Dn]+Kt:Dn>1||1===Dn&&0===jt||1===Dn&&1===jt&&ql(tt,2)||1===Dn&&1===jt&&ql(tt,4)&&W>100||1===Dn&&jt>1&&ql(tt,8)?Kt=G[Dn]+(jt>0?te[jt-1]:"")+Kt:1===Dn&&jt>0&&(Kt=te[jt-1]+Kt),St=Math.floor(St/10)}return(W<0?ee:"")+Kt},yg="\ub9c8\uc774\ub108\uc2a4",q0=function(W,G,te){var ee=te?". ":"",ke=te?"\u3001":"",tt=te?", ":"",St=te?" ":"";switch(G){case 0:return"\u2022"+St;case 1:return"\u25e6"+St;case 2:return"\u25fe"+St;case 5:var Kt=hc(W,48,57,!0,ee);return Kt.length<4?"0"+Kt:Kt;case 4:return Id(W,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",ke);case 6:return dm(W,1,3999,Hb,3,ee).toLowerCase();case 7:return dm(W,1,3999,Hb,3,ee);case 8:return hc(W,945,969,!1,ee);case 9:return hc(W,97,122,!1,ee);case 10:return hc(W,65,90,!1,ee);case 11:return hc(W,1632,1641,!0,ee);case 12:case 49:return dm(W,1,9999,f1,3,ee);case 35:return dm(W,1,9999,f1,3,ee).toLowerCase();case 13:return hc(W,2534,2543,!0,ee);case 14:case 30:return hc(W,6112,6121,!0,ee);case 15:return Id(W,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",ke);case 16:return Id(W,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",ke);case 17:case 48:return rf(W,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8ca0",ke,14);case 47:return rf(W,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8ca0",ke,15);case 42:return rf(W,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c","\u8d1f",ke,14);case 41:return rf(W,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396","\u62fe\u4f70\u4edf\u842c","\u8d1f",ke,15);case 26:return rf(W,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",ke,0);case 25:return rf(W,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07","\u30de\u30a4\u30ca\u30b9",ke,7);case 31:return rf(W,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",yg,tt,7);case 33:return rf(W,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",yg,tt,0);case 32:return rf(W,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",yg,tt,7);case 18:return hc(W,2406,2415,!0,ee);case 20:return dm(W,1,19999,Gb,3,ee);case 21:return hc(W,2790,2799,!0,ee);case 22:return hc(W,2662,2671,!0,ee);case 22:return dm(W,1,10999,Vb,3,ee);case 23:return Id(W,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case 24:return Id(W,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case 27:return hc(W,3302,3311,!0,ee);case 28:return Id(W,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",ke);case 29:return Id(W,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",ke);case 34:return hc(W,3792,3801,!0,ee);case 37:return hc(W,6160,6169,!0,ee);case 38:return hc(W,4160,4169,!0,ee);case 39:return hc(W,2918,2927,!0,ee);case 40:return hc(W,1776,1785,!0,ee);case 43:return hc(W,3046,3055,!0,ee);case 44:return hc(W,3174,3183,!0,ee);case 45:return hc(W,3664,3673,!0,ee);case 46:return hc(W,3872,3881,!0,ee);default:return hc(W,48,57,!0,ee)}},Qb="data-html2canvas-ignore",Q0=function(){function W(G,te,ee){if(this.context=G,this.options=ee,this.scrolledElements=[],this.referenceElement=te,this.counters=new zb,this.quoteDepth=0,!te.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(te.ownerDocument.documentElement,!1)}return W.prototype.toIFrame=function(G,te){var ee=this,ke=as(G,te);if(!ke.contentWindow)return Promise.reject("Unable to find iframe window");var tt=G.defaultView.pageXOffset,St=G.defaultView.pageYOffset,Kt=ke.contentWindow,jt=Kt.document,Dn=Zy(ke).then(function(){return M(ee,void 0,void 0,function(){var zn,ei;return L(this,function(zi){switch(zi.label){case 0:return this.scrolledElements.forEach(dc),Kt&&(Kt.scrollTo(te.left,te.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(Kt.scrollY!==te.top||Kt.scrollX!==te.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(Kt.scrollX-te.left,Kt.scrollY-te.top,0,0))),zn=this.options.onclone,typeof(ei=this.clonedReferenceElement)>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:jt.fonts&&jt.fonts.ready?[4,jt.fonts.ready]:[3,2];case 1:zi.sent(),zi.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Yy(jt)]:[3,4];case 3:zi.sent(),zi.label=4;case 4:return"function"==typeof zn?[2,Promise.resolve().then(function(){return zn(jt,ei)}).then(function(){return ke})]:[2,ke]}})})});return jt.open(),jt.write(fm(document.doctype)+"<html></html>"),pm(this.referenceElement.ownerDocument,tt,St),jt.replaceChild(jt.adoptNode(this.documentElement),jt.documentElement),jt.close(),Dn},W.prototype.createElementClone=function(G){if(xl(G,2),vA(G))return this.createCanvasClone(G);if($y(G))return this.createVideoClone(G);if(_g(G))return this.createStyleClone(G);var te=G.cloneNode(!1);return z0(te)&&(z0(G)&&G.currentSrc&&G.currentSrc!==G.src&&(te.src=G.currentSrc,te.srcset=""),"lazy"===te.loading&&(te.loading="eager")),hm(te)?this.createCustomElementClone(te):te},W.prototype.createCustomElementClone=function(G){var te=document.createElement("html2canvascustomelement");return af(G.style,te),te},W.prototype.createStyleClone=function(G){try{var te=G.sheet;if(te&&te.cssRules){var ee=[].slice.call(te.cssRules,0).reduce(function(tt,St){return St&&"string"==typeof St.cssText?tt+St.cssText:tt},""),ke=G.cloneNode(!1);return ke.textContent=ee,ke}}catch(tt){if(this.context.logger.error("Unable to access cssRules property",tt),"SecurityError"!==tt.name)throw tt}return G.cloneNode(!1)},W.prototype.createCanvasClone=function(G){var te;if(this.options.inlineImages&&G.ownerDocument){var ee=G.ownerDocument.createElement("img");try{return ee.src=G.toDataURL(),ee}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",G)}}var ke=G.cloneNode(!1);try{ke.width=G.width,ke.height=G.height;var tt=G.getContext("2d"),St=ke.getContext("2d");if(St)if(!this.options.allowTaint&&tt)St.putImageData(tt.getImageData(0,0,G.width,G.height),0,0);else{var Kt=null!==(te=G.getContext("webgl2"))&&void 0!==te?te:G.getContext("webgl");Kt&&!1===Kt.getContextAttributes()?.preserveDrawingBuffer&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",G),St.drawImage(G,0,0)}return ke}catch{this.context.logger.info("Unable to clone canvas as it is tainted",G)}return ke},W.prototype.createVideoClone=function(G){var te=G.ownerDocument.createElement("canvas");te.width=G.offsetWidth,te.height=G.offsetHeight;var ee=te.getContext("2d");try{return ee&&(ee.drawImage(G,0,0,te.width,te.height),this.options.allowTaint||ee.getImageData(0,0,te.width,te.height)),te}catch{this.context.logger.info("Unable to clone video as it is tainted",G)}var ke=G.ownerDocument.createElement("canvas");return ke.width=G.offsetWidth,ke.height=G.offsetHeight,ke},W.prototype.appendChildNode=function(G,te,ee){(!yA(te)||!function(W){return"SCRIPT"===W.tagName}(te)&&!te.hasAttribute(Qb)&&("function"!=typeof this.options.ignoreElements||!this.options.ignoreElements(te)))&&(!this.options.copyStyles||!yA(te)||!_g(te))&&G.appendChild(this.cloneNode(te,ee))},W.prototype.cloneChildNodes=function(G,te,ee){for(var ke=this,tt=G.shadowRoot?G.shadowRoot.firstChild:G.firstChild;tt;tt=tt.nextSibling)if(yA(tt)&&bA(tt)&&"function"==typeof tt.assignedNodes){var St=tt.assignedNodes();St.length&&St.forEach(function(Kt){return ke.appendChildNode(te,Kt,ee)})}else this.appendChildNode(te,tt,ee)},W.prototype.cloneNode=function(G,te){if(u1(G))return document.createTextNode(G.data);if(!G.ownerDocument)return G.cloneNode(!1);var ee=G.ownerDocument.defaultView;if(ee&&yA(G)&&(O0(G)||mg(G))){var ke=this.createElementClone(G);ke.style.transitionProperty="none";var tt=ee.getComputedStyle(G),St=ee.getComputedStyle(G,":before"),Kt=ee.getComputedStyle(G,":after");this.referenceElement===G&&O0(ke)&&(this.clonedReferenceElement=ke),U0(ke)&&ev(ke);var jt=this.counters.parse(new Ym(this.context,tt)),Dn=this.resolvePseudoContent(G,ke,St,Wo.BEFORE);hm(G)&&(te=!0),$y(G)||this.cloneChildNodes(G,ke,te),Dn&&ke.insertBefore(Dn,ke.firstChild);var zn=this.resolvePseudoContent(G,ke,Kt,Wo.AFTER);return zn&&ke.appendChild(zn),this.counters.pop(jt),(tt&&(this.options.copyStyles||mg(G))&&!um(G)||te)&&af(tt,ke),(0!==G.scrollTop||0!==G.scrollLeft)&&this.scrolledElements.push([ke,G.scrollLeft,G.scrollTop]),(H0(G)||V0(G))&&(H0(ke)||V0(ke))&&(ke.value=G.value),ke}return G.cloneNode(!1)},W.prototype.resolvePseudoContent=function(G,te,ee,ke){var tt=this;if(ee){var St=ee.content,Kt=te.ownerDocument;if(Kt&&St&&"none"!==St&&"-moz-alt-content"!==St&&"none"!==ee.display){this.counters.parse(new Ym(this.context,ee));var jt=new Km(this.context,ee),Dn=Kt.createElement("html2canvaspseudoelement");af(ee,Dn),jt.content.forEach(function(ei){if(0===ei.type)Dn.appendChild(Kt.createTextNode(ei.value));else if(22===ei.type){var zi=Kt.createElement("img");zi.src=ei.value,zi.style.opacity="1",Dn.appendChild(zi)}else if(18===ei.type){if("attr"===ei.name){var vs=ei.values.filter(cl);vs.length&&Dn.appendChild(Kt.createTextNode(G.getAttribute(vs[0].value)||""))}else if("counter"===ei.name){var Qr=ei.values.filter(Kr),No=Qr[1];if((us=Qr[0])&&cl(us)){var Ps=tt.counters.getCounterValue(us.value),Ds=No&&cl(No)?Au.parse(tt.context,No.value):3;Dn.appendChild(Kt.createTextNode(q0(Ps,Ds,!1)))}}else if("counters"===ei.name){var us,Ma=ei.values.filter(Kr),Uo=Ma[1];if(No=Ma[2],(us=Ma[0])&&cl(us)){var To=tt.counters.getCounterValues(us.value),fs=No&&cl(No)?Au.parse(tt.context,No.value):3,Ca=Uo&&0===Uo.type?Uo.value:"",ra=To.map(function(Uu){return q0(Uu,fs,!1)}).join(Ca);Dn.appendChild(Kt.createTextNode(ra))}}}else if(20===ei.type)switch(ei.value){case"open-quote":Dn.appendChild(Kt.createTextNode(aA(jt.quotes,tt.quoteDepth++,!0)));break;case"close-quote":Dn.appendChild(Kt.createTextNode(aA(jt.quotes,--tt.quoteDepth,!1)));break;default:Dn.appendChild(Kt.createTextNode(ei.value))}}),Dn.className=vg+" "+wA;var zn=ke===Wo.BEFORE?" "+vg:" "+wA;return mg(te)?te.className.baseValue+=zn:te.className+=zn,Dn}}},W.destroy=function(G){return!!G.parentNode&&(G.parentNode.removeChild(G),!0)},W}(),Wo=(()=>{return(W=Wo||(Wo={}))[W.BEFORE=0]="BEFORE",W[W.AFTER=1]="AFTER",Wo;var W})(),as=function(W,G){var te=W.createElement("iframe");return te.className="html2canvas-container",te.style.visibility="hidden",te.style.position="fixed",te.style.left="-10000px",te.style.top="0px",te.style.border="0",te.width=G.width.toString(),te.height=G.height.toString(),te.scrolling="no",te.setAttribute(Qb,"true"),W.body.appendChild(te),te},sf=function(W){return new Promise(function(G){W.complete?G():W.src?(W.onload=G,W.onerror=G):G()})},Yy=function(W){return Promise.all([].slice.call(W.images,0).map(sf))},Zy=function(W){return new Promise(function(G,te){var ee=W.contentWindow;if(!ee)return te("No window assigned for iframe");var ke=ee.document;ee.onload=W.onload=function(){ee.onload=W.onload=null;var tt=setInterval(function(){ke.body.childNodes.length>0&&"complete"===ke.readyState&&(clearInterval(tt),G(W))},50)}})},A1=["all","d","content"],af=function(W,G){for(var te=W.length-1;te>=0;te--){var ee=W.item(te);-1===A1.indexOf(ee)&&G.style.setProperty(ee,W.getPropertyValue(ee))}return G},fm=function(W){var G="";return W&&(G+="<!DOCTYPE ",W.name&&(G+=W.name),W.internalSubset&&(G+=W.internalSubset),W.publicId&&(G+='"'+W.publicId+'"'),W.systemId&&(G+='"'+W.systemId+'"'),G+=">"),G},pm=function(W,G,te){W&&W.defaultView&&(G!==W.defaultView.pageXOffset||te!==W.defaultView.pageYOffset)&&W.defaultView.scrollTo(G,te)},dc=function(W){var G=W[0],ee=W[2];G.scrollLeft=W[1],G.scrollTop=ee},vg="___html2canvas___pseudoelement_before",wA="___html2canvas___pseudoelement_after",Jy='{\n    content: "" !important;\n    display: none !important;\n}',ev=function(W){jf(W,"."+vg+":before"+Jy+"\n         ."+wA+":after"+Jy)},jf=function(W,G){var te=W.ownerDocument;if(te){var ee=te.createElement("style");ee.textContent=G,W.appendChild(ee)}},MA=function(){function W(){}return W.getOrigin=function(G){var te=W._link;return te?(te.href=G,te.href=te.href,te.protocol+te.hostname+te.port):"about:blank"},W.isSameOrigin=function(G){return W.getOrigin(G)===W._origin},W.setContext=function(G){W._link=G.document.createElement("a"),W._origin=W.getOrigin(G.location.href)},W._origin="about:blank",W}(),tv=function(){function W(G,te){this.context=G,this._options=te,this._cache={}}return W.prototype.addImage=function(G){var te=Promise.resolve();return this.has(G)||(Dh(G)||W0(G))&&(this._cache[G]=this.loadImage(G)).catch(function(){}),te},W.prototype.match=function(G){return this._cache[G]},W.prototype.loadImage=function(G){return M(this,void 0,void 0,function(){var te,ee,ke,tt,St=this;return L(this,function(Kt){switch(Kt.label){case 0:return te=MA.isSameOrigin(G),ee=!nc(G)&&!0===this._options.useCORS&&Ql.SUPPORT_CORS_IMAGES&&!te,ke=!nc(G)&&!te&&!Dh(G)&&"string"==typeof this._options.proxy&&Ql.SUPPORT_CORS_XHR&&!ee,te||!1!==this._options.allowTaint||nc(G)||Dh(G)||ke||ee?(tt=G,ke?[4,this.proxy(tt)]:[3,2]):[2];case 1:tt=Kt.sent(),Kt.label=2;case 2:return this.context.logger.debug("Added image "+G.substring(0,256)),[4,new Promise(function(jt,Dn){var zn=new Image;zn.onload=function(){return jt(zn)},zn.onerror=Dn,(rd(tt)||ee)&&(zn.crossOrigin="anonymous"),zn.src=tt,!0===zn.complete&&setTimeout(function(){return jt(zn)},500),St._options.imageTimeout>0&&setTimeout(function(){return Dn("Timed out ("+St._options.imageTimeout+"ms) loading image")},St._options.imageTimeout)})];case 3:return[2,Kt.sent()]}})})},W.prototype.has=function(G){return typeof this._cache[G]<"u"},W.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},W.prototype.proxy=function(G){var te=this,ee=this._options.proxy;if(!ee)throw new Error("No proxy defined");var ke=G.substring(0,256);return new Promise(function(tt,St){var Kt=Ql.SUPPORT_RESPONSE_TYPE?"blob":"text",jt=new XMLHttpRequest;jt.onload=function(){if(200===jt.status)if("text"===Kt)tt(jt.response);else{var ei=new FileReader;ei.addEventListener("load",function(){return tt(ei.result)},!1),ei.addEventListener("error",function(zi){return St(zi)},!1),ei.readAsDataURL(jt.response)}else St("Failed to proxy resource "+ke+" with status code "+jt.status)},jt.onerror=St;var Dn=ee.indexOf("?")>-1?"&":"?";if(jt.open("GET",""+ee+Dn+"url="+encodeURIComponent(G)+"&responseType="+Kt),"text"!==Kt&&jt instanceof XMLHttpRequest&&(jt.responseType=Kt),te._options.imageTimeout){var zn=te._options.imageTimeout;jt.timeout=zn,jt.ontimeout=function(){return St("Timed out ("+zn+"ms) proxying "+ke)}}jt.send()})},W}(),Ep=/^data:image\/svg\+xml/i,bg=/^data:image\/.*;base64,/i,xg=/^data:image\/.*/i,W0=function(W){return Ql.SUPPORT_SVG_DRAWING||!wg(W)},nc=function(W){return xg.test(W)},rd=function(W){return bg.test(W)},Dh=function(W){return"blob"===W.substr(0,4)},wg=function(W){return"svg"===W.substr(-3).toLowerCase()||Ep.test(W)},qr=function(){function W(G,te){this.type=0,this.x=G,this.y=te}return W.prototype.add=function(G,te){return new W(this.x+G,this.y+te)},W}(),sd=function(W,G,te){return new qr(W.x+(G.x-W.x)*te,W.y+(G.y-W.y)*te)},lf=function(){function W(G,te,ee,ke){this.type=1,this.start=G,this.startControl=te,this.endControl=ee,this.end=ke}return W.prototype.subdivide=function(G,te){var ee=sd(this.start,this.startControl,G),ke=sd(this.startControl,this.endControl,G),tt=sd(this.endControl,this.end,G),St=sd(ee,ke,G),Kt=sd(ke,tt,G),jt=sd(St,Kt,G);return te?new W(this.start,ee,St,jt):new W(jt,Kt,tt,this.end)},W.prototype.add=function(G,te){return new W(this.start.add(G,te),this.startControl.add(G,te),this.endControl.add(G,te),this.end.add(G,te))},W.prototype.reverse=function(){return new W(this.end,this.endControl,this.startControl,this.start)},W}(),Bh=function(W){return 1===W.type},m1=function W(G){var te=G.styles,ee=G.bounds,ke=Go(te.borderTopLeftRadius,ee.width,ee.height),tt=ke[0],St=ke[1],Kt=Go(te.borderTopRightRadius,ee.width,ee.height),jt=Kt[0],Dn=Kt[1],zn=Go(te.borderBottomRightRadius,ee.width,ee.height),ei=zn[0],zi=zn[1],vs=Go(te.borderBottomLeftRadius,ee.width,ee.height),Qr=vs[0],us=vs[1],No=[];No.push((tt+jt)/ee.width),No.push((Qr+ei)/ee.width),No.push((St+us)/ee.height),No.push((Dn+zi)/ee.height);var Ps=Math.max.apply(Math,No);Ps>1&&(tt/=Ps,St/=Ps,jt/=Ps,Dn/=Ps,ei/=Ps,zi/=Ps,Qr/=Ps,us/=Ps);var Ds=ee.width-jt,Ma=ee.height-zi,Uo=ee.width-ei,To=ee.height-us,fs=te.borderTopWidth,Ca=te.borderRightWidth,ra=te.borderBottomWidth,Po=te.borderLeftWidth,pc=qo(te.paddingTop,G.bounds.width),Uu=qo(te.paddingRight,G.bounds.width),rh=qo(te.paddingBottom,G.bounds.width),ml=qo(te.paddingLeft,G.bounds.width);this.topLeftBorderDoubleOuterBox=tt>0||St>0?Sl(ee.left+Po/3,ee.top+fs/3,tt-Po/3,St-fs/3,ya.TOP_LEFT):new qr(ee.left+Po/3,ee.top+fs/3),this.topRightBorderDoubleOuterBox=tt>0||St>0?Sl(ee.left+Ds,ee.top+fs/3,jt-Ca/3,Dn-fs/3,ya.TOP_RIGHT):new qr(ee.left+ee.width-Ca/3,ee.top+fs/3),this.bottomRightBorderDoubleOuterBox=ei>0||zi>0?Sl(ee.left+Uo,ee.top+Ma,ei-Ca/3,zi-ra/3,ya.BOTTOM_RIGHT):new qr(ee.left+ee.width-Ca/3,ee.top+ee.height-ra/3),this.bottomLeftBorderDoubleOuterBox=Qr>0||us>0?Sl(ee.left+Po/3,ee.top+To,Qr-Po/3,us-ra/3,ya.BOTTOM_LEFT):new qr(ee.left+Po/3,ee.top+ee.height-ra/3),this.topLeftBorderDoubleInnerBox=tt>0||St>0?Sl(ee.left+2*Po/3,ee.top+2*fs/3,tt-2*Po/3,St-2*fs/3,ya.TOP_LEFT):new qr(ee.left+2*Po/3,ee.top+2*fs/3),this.topRightBorderDoubleInnerBox=tt>0||St>0?Sl(ee.left+Ds,ee.top+2*fs/3,jt-2*Ca/3,Dn-2*fs/3,ya.TOP_RIGHT):new qr(ee.left+ee.width-2*Ca/3,ee.top+2*fs/3),this.bottomRightBorderDoubleInnerBox=ei>0||zi>0?Sl(ee.left+Uo,ee.top+Ma,ei-2*Ca/3,zi-2*ra/3,ya.BOTTOM_RIGHT):new qr(ee.left+ee.width-2*Ca/3,ee.top+ee.height-2*ra/3),this.bottomLeftBorderDoubleInnerBox=Qr>0||us>0?Sl(ee.left+2*Po/3,ee.top+To,Qr-2*Po/3,us-2*ra/3,ya.BOTTOM_LEFT):new qr(ee.left+2*Po/3,ee.top+ee.height-2*ra/3),this.topLeftBorderStroke=tt>0||St>0?Sl(ee.left+Po/2,ee.top+fs/2,tt-Po/2,St-fs/2,ya.TOP_LEFT):new qr(ee.left+Po/2,ee.top+fs/2),this.topRightBorderStroke=tt>0||St>0?Sl(ee.left+Ds,ee.top+fs/2,jt-Ca/2,Dn-fs/2,ya.TOP_RIGHT):new qr(ee.left+ee.width-Ca/2,ee.top+fs/2),this.bottomRightBorderStroke=ei>0||zi>0?Sl(ee.left+Uo,ee.top+Ma,ei-Ca/2,zi-ra/2,ya.BOTTOM_RIGHT):new qr(ee.left+ee.width-Ca/2,ee.top+ee.height-ra/2),this.bottomLeftBorderStroke=Qr>0||us>0?Sl(ee.left+Po/2,ee.top+To,Qr-Po/2,us-ra/2,ya.BOTTOM_LEFT):new qr(ee.left+Po/2,ee.top+ee.height-ra/2),this.topLeftBorderBox=tt>0||St>0?Sl(ee.left,ee.top,tt,St,ya.TOP_LEFT):new qr(ee.left,ee.top),this.topRightBorderBox=jt>0||Dn>0?Sl(ee.left+Ds,ee.top,jt,Dn,ya.TOP_RIGHT):new qr(ee.left+ee.width,ee.top),this.bottomRightBorderBox=ei>0||zi>0?Sl(ee.left+Uo,ee.top+Ma,ei,zi,ya.BOTTOM_RIGHT):new qr(ee.left+ee.width,ee.top+ee.height),this.bottomLeftBorderBox=Qr>0||us>0?Sl(ee.left,ee.top+To,Qr,us,ya.BOTTOM_LEFT):new qr(ee.left,ee.top+ee.height),this.topLeftPaddingBox=tt>0||St>0?Sl(ee.left+Po,ee.top+fs,Math.max(0,tt-Po),Math.max(0,St-fs),ya.TOP_LEFT):new qr(ee.left+Po,ee.top+fs),this.topRightPaddingBox=jt>0||Dn>0?Sl(ee.left+Math.min(Ds,ee.width-Ca),ee.top+fs,Ds>ee.width+Ca?0:Math.max(0,jt-Ca),Math.max(0,Dn-fs),ya.TOP_RIGHT):new qr(ee.left+ee.width-Ca,ee.top+fs),this.bottomRightPaddingBox=ei>0||zi>0?Sl(ee.left+Math.min(Uo,ee.width-Po),ee.top+Math.min(Ma,ee.height-ra),Math.max(0,ei-Ca),Math.max(0,zi-ra),ya.BOTTOM_RIGHT):new qr(ee.left+ee.width-Ca,ee.top+ee.height-ra),this.bottomLeftPaddingBox=Qr>0||us>0?Sl(ee.left+Po,ee.top+Math.min(To,ee.height-ra),Math.max(0,Qr-Po),Math.max(0,us-ra),ya.BOTTOM_LEFT):new qr(ee.left+Po,ee.top+ee.height-ra),this.topLeftContentBox=tt>0||St>0?Sl(ee.left+Po+ml,ee.top+fs+pc,Math.max(0,tt-(Po+ml)),Math.max(0,St-(fs+pc)),ya.TOP_LEFT):new qr(ee.left+Po+ml,ee.top+fs+pc),this.topRightContentBox=jt>0||Dn>0?Sl(ee.left+Math.min(Ds,ee.width+Po+ml),ee.top+fs+pc,Ds>ee.width+Po+ml?0:jt-Po+ml,Dn-(fs+pc),ya.TOP_RIGHT):new qr(ee.left+ee.width-(Ca+Uu),ee.top+fs+pc),this.bottomRightContentBox=ei>0||zi>0?Sl(ee.left+Math.min(Uo,ee.width-(Po+ml)),ee.top+Math.min(Ma,ee.height+fs+pc),Math.max(0,ei-(Ca+Uu)),zi-(ra+rh),ya.BOTTOM_RIGHT):new qr(ee.left+ee.width-(Ca+Uu),ee.top+ee.height-(ra+rh)),this.bottomLeftContentBox=Qr>0||us>0?Sl(ee.left+Po+ml,ee.top+To,Math.max(0,Qr-(Po+ml)),us-(ra+rh),ya.BOTTOM_LEFT):new qr(ee.left+Po+ml,ee.top+ee.height-(ra+rh))},ya=(()=>{return(W=ya||(ya={}))[W.TOP_LEFT=0]="TOP_LEFT",W[W.TOP_RIGHT=1]="TOP_RIGHT",W[W.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",W[W.BOTTOM_LEFT=3]="BOTTOM_LEFT",ya;var W})(),Sl=function(W,G,te,ee,ke){var tt=(Math.sqrt(2)-1)/3*4,St=te*tt,Kt=ee*tt,jt=W+te,Dn=G+ee;switch(ke){case ya.TOP_LEFT:return new lf(new qr(W,Dn),new qr(W,Dn-Kt),new qr(jt-St,G),new qr(jt,G));case ya.TOP_RIGHT:return new lf(new qr(W,G),new qr(W+St,G),new qr(jt,Dn-Kt),new qr(jt,Dn));case ya.BOTTOM_RIGHT:return new lf(new qr(jt,G),new qr(jt,G+Kt),new qr(W+St,Dn),new qr(W,Dn));default:return new lf(new qr(jt,Dn),new qr(jt-St,Dn),new qr(W,G+Kt),new qr(W,G))}},Am=function(W){return[W.topLeftBorderBox,W.topRightBorderBox,W.bottomRightBorderBox,W.bottomLeftBorderBox]},CA=function(W){return[W.topLeftPaddingBox,W.topRightPaddingBox,W.bottomRightPaddingBox,W.bottomLeftPaddingBox]},Wb=function W(G,te,ee){this.offsetX=G,this.offsetY=te,this.matrix=ee,this.type=0,this.target=6},od=function W(G,te){this.path=G,this.target=te,this.type=1},mm=function W(G){this.opacity=G,this.type=2,this.target=6},$f=function(W){return 1===W.type},Mg=function(W,G){return W.length===G.length&&W.some(function(te,ee){return te===G[ee]})},Fd=function W(G){this.element=G,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},Oc=function(){function W(G,te){if(this.container=G,this.parent=te,this.effects=[],this.curves=new m1(this.container),this.container.styles.opacity<1&&this.effects.push(new mm(this.container.styles.opacity)),null!==this.container.styles.transform&&this.effects.push(new Wb(this.container.bounds.left+this.container.styles.transformOrigin[0].number,this.container.bounds.top+this.container.styles.transformOrigin[1].number,this.container.styles.transform)),0!==this.container.styles.overflowX){var St=Am(this.curves),Kt=CA(this.curves);Mg(St,Kt)?this.effects.push(new od(St,6)):(this.effects.push(new od(St,2)),this.effects.push(new od(Kt,4)))}}return W.prototype.getEffects=function(G){for(var te=-1===[2,3].indexOf(this.container.styles.position),ee=this.parent,ke=this.effects.slice(0);ee;){var tt=ee.effects.filter(function(jt){return!$f(jt)});if(te||0!==ee.container.styles.position||!ee.parent){if(ke.unshift.apply(ke,tt),te=-1===[2,3].indexOf(ee.container.styles.position),0!==ee.container.styles.overflowX){var St=Am(ee.curves),Kt=CA(ee.curves);Mg(St,Kt)||ke.unshift(new od(Kt,6))}}else ke.unshift.apply(ke,tt);ee=ee.parent}return ke.filter(function(jt){return ql(jt.target,G)})},W}(),cf=function(W,G,te,ee){W.container.elements.forEach(function(ke){var tt=ql(ke.flags,4),St=ql(ke.flags,2),Kt=new Oc(ke,W);ql(ke.styles.display,2048)&&ee.push(Kt);var jt=ql(ke.flags,8)?[]:ee;if(tt||St){var Dn=tt||ke.styles.isPositioned()?te:G,zn=new Fd(Kt);if(ke.styles.isPositioned()||ke.styles.opacity<1||ke.styles.isTransformed()){var ei=ke.styles.zIndex.order;if(ei<0){var zi=0;Dn.negativeZIndex.some(function(Qr,us){return ei>Qr.element.container.styles.zIndex.order?(zi=us,!1):zi>0}),Dn.negativeZIndex.splice(zi,0,zn)}else if(ei>0){var vs=0;Dn.positiveZIndex.some(function(Qr,us){return ei>=Qr.element.container.styles.zIndex.order?(vs=us+1,!1):vs>0}),Dn.positiveZIndex.splice(vs,0,zn)}else Dn.zeroOrAutoZIndexOrTransformedOrOpacity.push(zn)}else ke.styles.isFloating()?Dn.nonPositionedFloats.push(zn):Dn.nonPositionedInlineLevel.push(zn);cf(Kt,zn,tt?zn:te,jt)}else ke.styles.isInlineLevel()?G.inlineLevel.push(Kt):G.nonInlineLevel.push(Kt),cf(Kt,G,te,jt);ql(ke.flags,8)&&ad(ke,jt)})},ad=function(W,G){for(var te=W instanceof tc?W.start:1,ee=W instanceof tc&&W.reversed,ke=0;ke<G.length;ke++){var tt=G[ke];tt.container instanceof Ga&&"number"==typeof tt.container.value&&0!==tt.container.value&&(te=tt.container.value),tt.listValue=q0(te,tt.container.styles.listStyleType,!0),te+=ee?-1:1}},Sg=function(W,G){switch(G){case 0:return rl(W.topLeftBorderBox,W.topLeftPaddingBox,W.topRightBorderBox,W.topRightPaddingBox);case 1:return rl(W.topRightBorderBox,W.topRightPaddingBox,W.bottomRightBorderBox,W.bottomRightPaddingBox);case 2:return rl(W.bottomRightBorderBox,W.bottomRightPaddingBox,W.bottomLeftBorderBox,W.bottomLeftPaddingBox);default:return rl(W.bottomLeftBorderBox,W.bottomLeftPaddingBox,W.topLeftBorderBox,W.topLeftPaddingBox)}},uf=function(W,G){var te=[];return Bh(W)?te.push(W.subdivide(.5,!1)):te.push(W),Bh(G)?te.push(G.subdivide(.5,!0)):te.push(G),te},rl=function(W,G,te,ee){var ke=[];return Bh(W)?ke.push(W.subdivide(.5,!1)):ke.push(W),Bh(te)?ke.push(te.subdivide(.5,!0)):ke.push(te),Bh(ee)?ke.push(ee.subdivide(.5,!0).reverse()):ke.push(ee),Bh(G)?ke.push(G.subdivide(.5,!1).reverse()):ke.push(G),ke},fc=function(W){var te=W.styles;return W.bounds.add(te.borderLeftWidth,te.borderTopWidth,-(te.borderRightWidth+te.borderLeftWidth),-(te.borderTopWidth+te.borderBottomWidth))},Dp=function(W){var G=W.styles,te=W.bounds,ee=qo(G.paddingLeft,te.width),ke=qo(G.paddingRight,te.width),tt=qo(G.paddingTop,te.width),St=qo(G.paddingBottom,te.width);return te.add(ee+G.borderLeftWidth,tt+G.borderTopWidth,-(G.borderRightWidth+G.borderLeftWidth+ee+ke),-(G.borderTopWidth+G.borderBottomWidth+tt+St))},Rd=function(W,G,te){var ee=function(W,G){return 0===W?G.bounds:2===W?Dp(G):fc(G)}(hf(W.styles.backgroundOrigin,G),W),ke=function(W,G){return 0===W?G.bounds:2===W?Dp(G):fc(G)}(hf(W.styles.backgroundClip,G),W),tt=y1(hf(W.styles.backgroundSize,G),te,ee),St=tt[0],Kt=tt[1],jt=Go(hf(W.styles.backgroundPosition,G),ee.width-St,ee.height-Kt);return[SA(hf(W.styles.backgroundRepeat,G),jt,tt,ee,ke),Math.round(ee.left+jt[0]),Math.round(ee.top+jt[1]),St,Kt]},ld=function(W){return cl(W)&&W.value===hl.AUTO},kd=function(W){return"number"==typeof W},y1=function(W,G,te){var ee=G[0],ke=G[1],tt=G[2],St=W[0],Kt=W[1];if(!St)return[0,0];if(Xs(St)&&Kt&&Xs(Kt))return[qo(St,te.width),qo(Kt,te.height)];var jt=kd(tt);if(cl(St)&&(St.value===hl.CONTAIN||St.value===hl.COVER))return kd(tt)?te.width/te.height<tt!=(St.value===hl.COVER)?[te.width,te.width/tt]:[te.height*tt,te.height]:[te.width,te.height];var zn=kd(ee),ei=kd(ke),zi=zn||ei;if(ld(St)&&(!Kt||ld(Kt)))return zn&&ei?[ee,ke]:jt||zi?zi&&jt?[zn?ee:ke*tt,ei?ke:ee/tt]:[zn?ee:te.width,ei?ke:te.height]:[te.width,te.height];if(jt){var Ps=0,Ds=0;return Xs(St)?Ps=qo(St,te.width):Xs(Kt)&&(Ds=qo(Kt,te.height)),ld(St)?Ps=Ds*tt:(!Kt||ld(Kt))&&(Ds=Ps/tt),[Ps,Ds]}var Ma=null,Uo=null;if(Xs(St)?Ma=qo(St,te.width):Kt&&Xs(Kt)&&(Uo=qo(Kt,te.height)),null!==Ma&&(!Kt||ld(Kt))&&(Uo=zn&&ei?Ma/ee*ke:te.height),null!==Uo&&ld(St)&&(Ma=zn&&ei?Uo/ke*ee:te.width),null!==Ma&&null!==Uo)return[Ma,Uo];throw new Error("Unable to calculate background-size for element")},hf=function(W,G){var te=W[G];return typeof te>"u"?W[0]:te},SA=function(W,G,te,ee,ke){var tt=G[0],St=G[1],Kt=te[0],jt=te[1];switch(W){case 2:return[new qr(Math.round(ee.left),Math.round(ee.top+St)),new qr(Math.round(ee.left+ee.width),Math.round(ee.top+St)),new qr(Math.round(ee.left+ee.width),Math.round(jt+ee.top+St)),new qr(Math.round(ee.left),Math.round(jt+ee.top+St))];case 3:return[new qr(Math.round(ee.left+tt),Math.round(ee.top)),new qr(Math.round(ee.left+tt+Kt),Math.round(ee.top)),new qr(Math.round(ee.left+tt+Kt),Math.round(ee.height+ee.top)),new qr(Math.round(ee.left+tt),Math.round(ee.height+ee.top))];case 1:return[new qr(Math.round(ee.left+tt),Math.round(ee.top+St)),new qr(Math.round(ee.left+tt+Kt),Math.round(ee.top+St)),new qr(Math.round(ee.left+tt+Kt),Math.round(ee.top+St+jt)),new qr(Math.round(ee.left+tt),Math.round(ee.top+St+jt))];default:return[new qr(Math.round(ke.left),Math.round(ke.top)),new qr(Math.round(ke.left+ke.width),Math.round(ke.top)),new qr(Math.round(ke.left+ke.width),Math.round(ke.height+ke.top)),new qr(Math.round(ke.left),Math.round(ke.height+ke.top))]}},Nu="Hidden Text",ym=function(){function W(G){this._data={},this._document=G}return W.prototype.parseMetrics=function(G,te){var ee=this._document.createElement("div"),ke=this._document.createElement("img"),tt=this._document.createElement("span"),St=this._document.body;ee.style.visibility="hidden",ee.style.fontFamily=G,ee.style.fontSize=te,ee.style.margin="0",ee.style.padding="0",ee.style.whiteSpace="nowrap",St.appendChild(ee),ke.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",ke.width=1,ke.height=1,ke.style.margin="0",ke.style.padding="0",ke.style.verticalAlign="baseline",tt.style.fontFamily=G,tt.style.fontSize=te,tt.style.margin="0",tt.style.padding="0",tt.appendChild(this._document.createTextNode(Nu)),ee.appendChild(tt),ee.appendChild(ke);var Kt=ke.offsetTop-tt.offsetTop+2;ee.removeChild(tt),ee.appendChild(this._document.createTextNode(Nu)),ee.style.lineHeight="normal",ke.style.verticalAlign="super";var jt=ke.offsetTop-ee.offsetTop+2;return St.removeChild(ee),{baseline:Kt,middle:jt}},W.prototype.getMetrics=function(G,te){var ee=G+" "+te;return typeof this._data[ee]>"u"&&(this._data[ee]=this.parseMetrics(G,te)),this._data[ee]},W}(),Bp=function W(G,te){this.context=G,this.options=te},b1=function(W){function G(te,ee){var ke=W.call(this,te,ee)||this;return ke._activeEffects=[],ke.canvas=ee.canvas?ee.canvas:document.createElement("canvas"),ke.ctx=ke.canvas.getContext("2d"),ee.canvas||(ke.canvas.width=Math.floor(ee.width*ee.scale),ke.canvas.height=Math.floor(ee.height*ee.scale),ke.canvas.style.width=ee.width+"px",ke.canvas.style.height=ee.height+"px"),ke.fontMetrics=new ym(document),ke.ctx.scale(ke.options.scale,ke.options.scale),ke.ctx.translate(-ee.x,-ee.y),ke.ctx.textBaseline="bottom",ke._activeEffects=[],ke.context.logger.debug("Canvas renderer initialized ("+ee.width+"x"+ee.height+") with scale "+ee.scale),ke}return Ce(G,W),G.prototype.applyEffects=function(te){for(var ee=this;this._activeEffects.length;)this.popEffect();te.forEach(function(ke){return ee.applyEffect(ke)})},G.prototype.applyEffect=function(te){this.ctx.save(),function(W){return 2===W.type}(te)&&(this.ctx.globalAlpha=te.opacity),function(W){return 0===W.type}(te)&&(this.ctx.translate(te.offsetX,te.offsetY),this.ctx.transform(te.matrix[0],te.matrix[1],te.matrix[2],te.matrix[3],te.matrix[4],te.matrix[5]),this.ctx.translate(-te.offsetX,-te.offsetY)),$f(te)&&(this.path(te.path),this.ctx.clip()),this._activeEffects.push(te)},G.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},G.prototype.renderStack=function(te){return M(this,void 0,void 0,function(){return L(this,function(ke){switch(ke.label){case 0:return te.element.container.styles.isVisible()?[4,this.renderStackContent(te)]:[3,2];case 1:ke.sent(),ke.label=2;case 2:return[2]}})})},G.prototype.renderNode=function(te){return M(this,void 0,void 0,function(){return L(this,function(ee){switch(ee.label){case 0:return ql(te.container.flags,16),te.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(te)]:[3,3];case 1:return ee.sent(),[4,this.renderNodeContent(te)];case 2:ee.sent(),ee.label=3;case 3:return[2]}})})},G.prototype.renderTextWithLetterSpacing=function(te,ee,ke){var tt=this;0===ee?this.ctx.fillText(te.text,te.bounds.left,te.bounds.top+ke):s1(te.text).reduce(function(Kt,jt){return tt.ctx.fillText(jt,Kt,te.bounds.top+ke),Kt+tt.ctx.measureText(jt).width},te.bounds.left)},G.prototype.createFontStyle=function(te){var ee=te.fontVariant.filter(function(St){return"normal"===St||"small-caps"===St}).join(""),ke=X0(te.fontFamily).join(", "),tt=uu(te.fontSize)?""+te.fontSize.number+te.fontSize.unit:te.fontSize.number+"px";return[[te.fontStyle,ee,te.fontWeight,tt,ke].join(" "),ke,tt]},G.prototype.renderTextNode=function(te,ee){return M(this,void 0,void 0,function(){var ke,St,Kt,jt,Dn,zn,ei,zi=this;return L(this,function(vs){return ke=this.createFontStyle(ee),St=ke[1],Kt=ke[2],this.ctx.font=ke[0],this.ctx.direction=1===ee.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",jt=this.fontMetrics.getMetrics(St,Kt),Dn=jt.baseline,zn=jt.middle,ei=ee.paintOrder,te.textBounds.forEach(function(Qr){ei.forEach(function(us){switch(us){case 0:zi.ctx.fillStyle=Lo(ee.color),zi.renderTextWithLetterSpacing(Qr,ee.letterSpacing,Dn);var No=ee.textShadow;No.length&&Qr.text.trim().length&&(No.slice(0).reverse().forEach(function(Ps){zi.ctx.shadowColor=Lo(Ps.color),zi.ctx.shadowOffsetX=Ps.offsetX.number*zi.options.scale,zi.ctx.shadowOffsetY=Ps.offsetY.number*zi.options.scale,zi.ctx.shadowBlur=Ps.blur.number,zi.renderTextWithLetterSpacing(Qr,ee.letterSpacing,Dn)}),zi.ctx.shadowColor="",zi.ctx.shadowOffsetX=0,zi.ctx.shadowOffsetY=0,zi.ctx.shadowBlur=0),ee.textDecorationLine.length&&(zi.ctx.fillStyle=Lo(ee.textDecorationColor||ee.color),ee.textDecorationLine.forEach(function(Ps){switch(Ps){case 1:zi.ctx.fillRect(Qr.bounds.left,Math.round(Qr.bounds.top+Dn),Qr.bounds.width,1);break;case 2:zi.ctx.fillRect(Qr.bounds.left,Math.round(Qr.bounds.top),Qr.bounds.width,1);break;case 3:zi.ctx.fillRect(Qr.bounds.left,Math.ceil(Qr.bounds.top+zn),Qr.bounds.width,1)}}));break;case 1:ee.webkitTextStrokeWidth&&Qr.text.trim().length&&(zi.ctx.strokeStyle=Lo(ee.webkitTextStrokeColor),zi.ctx.lineWidth=ee.webkitTextStrokeWidth,zi.ctx.lineJoin=window.chrome?"miter":"round",zi.ctx.strokeText(Qr.text,Qr.bounds.left,Qr.bounds.top+Dn)),zi.ctx.strokeStyle="",zi.ctx.lineWidth=0,zi.ctx.lineJoin="miter"}})}),[2]})})},G.prototype.renderReplacedElement=function(te,ee,ke){if(ke&&te.intrinsicWidth>0&&te.intrinsicHeight>0){var tt=Dp(te),St=CA(ee);this.path(St),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(ke,0,0,te.intrinsicWidth,te.intrinsicHeight,tt.left,tt.top,tt.width,tt.height),this.ctx.restore()}},G.prototype.renderNodeContent=function(te){return M(this,void 0,void 0,function(){var ee,ke,tt,St,Kt,zn,ei,zi,Qr,us,No,Ps,Ds,Ma,Uo,To;return L(this,function(fs){switch(fs.label){case 0:this.applyEffects(te.getEffects(4)),ke=te.curves,tt=(ee=te.container).styles,St=0,Kt=ee.textNodes,fs.label=1;case 1:return St<Kt.length?[4,this.renderTextNode(Kt[St],tt)]:[3,4];case 2:fs.sent(),fs.label=3;case 3:return St++,[3,1];case 4:if(!(ee instanceof Rc))return[3,8];fs.label=5;case 5:return fs.trys.push([5,7,,8]),[4,this.context.cache.match(ee.src)];case 6:return Ds=fs.sent(),this.renderReplacedElement(ee,ke,Ds),[3,8];case 7:return fs.sent(),this.context.logger.error("Error loading image "+ee.src),[3,8];case 8:if(ee instanceof gA&&this.renderReplacedElement(ee,ke,ee.canvas),!(ee instanceof Vy))return[3,12];fs.label=9;case 9:return fs.trys.push([9,11,,12]),[4,this.context.cache.match(ee.svg)];case 10:return Ds=fs.sent(),this.renderReplacedElement(ee,ke,Ds),[3,12];case 11:return fs.sent(),this.context.logger.error("Error loading svg "+ee.svg.substring(0,255)),[3,12];case 12:return ee instanceof Qy&&ee.tree?[4,new G(this.context,{scale:this.options.scale,backgroundColor:ee.backgroundColor,x:0,y:0,width:ee.width,height:ee.height}).render(ee.tree)]:[3,14];case 13:zn=fs.sent(),ee.width&&ee.height&&this.ctx.drawImage(zn,0,0,ee.width,ee.height,ee.bounds.left,ee.bounds.top,ee.bounds.width,ee.bounds.height),fs.label=14;case 14:if(ee instanceof Ag&&(ei=Math.min(ee.bounds.width,ee.bounds.height),ee.type===Dd?ee.checked&&(this.ctx.save(),this.path([new qr(ee.bounds.left+.39363*ei,ee.bounds.top+.79*ei),new qr(ee.bounds.left+.16*ei,ee.bounds.top+.5549*ei),new qr(ee.bounds.left+.27347*ei,ee.bounds.top+.44071*ei),new qr(ee.bounds.left+.39694*ei,ee.bounds.top+.5649*ei),new qr(ee.bounds.left+.72983*ei,ee.bounds.top+.23*ei),new qr(ee.bounds.left+.84*ei,ee.bounds.top+.34085*ei),new qr(ee.bounds.left+.39363*ei,ee.bounds.top+.79*ei)]),this.ctx.fillStyle=Lo(Sp),this.ctx.fill(),this.ctx.restore()):ee.type===cm&&ee.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(ee.bounds.left+ei/2,ee.bounds.top+ei/2,ei/4,0,2*Math.PI,!0),this.ctx.fillStyle=Lo(Sp),this.ctx.fill(),this.ctx.restore())),Dg(ee)&&ee.value.length){switch(zi=this.createFontStyle(tt),Qr=this.fontMetrics.getMetrics(Uo=zi[0],zi[1]).baseline,this.ctx.font=Uo,this.ctx.fillStyle=Lo(tt.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=$0(ee.styles.textAlign),To=Dp(ee),us=0,ee.styles.textAlign){case 1:us+=To.width/2;break;case 2:us+=To.width}No=To.add(us,0,0,-To.height/2+1),this.ctx.save(),this.path([new qr(To.left,To.top),new qr(To.left+To.width,To.top),new qr(To.left+To.width,To.top+To.height),new qr(To.left,To.top+To.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new id(ee.value,No),tt.letterSpacing,Qr),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ql(ee.styles.display,2048))return[3,20];if(null===ee.styles.listStyleImage)return[3,19];if(0!==(Ps=ee.styles.listStyleImage).type)return[3,18];Ds=void 0,Ma=Ps.url,fs.label=15;case 15:return fs.trys.push([15,17,,18]),[4,this.context.cache.match(Ma)];case 16:return Ds=fs.sent(),this.ctx.drawImage(Ds,ee.bounds.left-(Ds.width+10),ee.bounds.top),[3,18];case 17:return fs.sent(),this.context.logger.error("Error loading list-style-image "+Ma),[3,18];case 18:return[3,20];case 19:te.listValue&&-1!==ee.styles.listStyleType&&(Uo=this.createFontStyle(tt)[0],this.ctx.font=Uo,this.ctx.fillStyle=Lo(tt.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",To=new Be(ee.bounds.left,ee.bounds.top+qo(ee.styles.paddingTop,ee.bounds.width),ee.bounds.width,pu(tt.lineHeight,tt.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new id(te.listValue,To),tt.letterSpacing,pu(tt.lineHeight,tt.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),fs.label=20;case 20:return[2]}})})},G.prototype.renderStackContent=function(te){return M(this,void 0,void 0,function(){var ee,ke,tt,St,Kt,jt,Dn,zn,ei,zi,vs,Qr,us,No;return L(this,function(Ds){switch(Ds.label){case 0:return ql(te.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(te.element)];case 1:Ds.sent(),ee=0,ke=te.negativeZIndex,Ds.label=2;case 2:return ee<ke.length?[4,this.renderStack(ke[ee])]:[3,5];case 3:Ds.sent(),Ds.label=4;case 4:return ee++,[3,2];case 5:return[4,this.renderNodeContent(te.element)];case 6:Ds.sent(),tt=0,St=te.nonInlineLevel,Ds.label=7;case 7:return tt<St.length?[4,this.renderNode(St[tt])]:[3,10];case 8:Ds.sent(),Ds.label=9;case 9:return tt++,[3,7];case 10:Kt=0,jt=te.nonPositionedFloats,Ds.label=11;case 11:return Kt<jt.length?[4,this.renderStack(jt[Kt])]:[3,14];case 12:Ds.sent(),Ds.label=13;case 13:return Kt++,[3,11];case 14:Dn=0,zn=te.nonPositionedInlineLevel,Ds.label=15;case 15:return Dn<zn.length?[4,this.renderStack(zn[Dn])]:[3,18];case 16:Ds.sent(),Ds.label=17;case 17:return Dn++,[3,15];case 18:ei=0,zi=te.inlineLevel,Ds.label=19;case 19:return ei<zi.length?[4,this.renderNode(zi[ei])]:[3,22];case 20:Ds.sent(),Ds.label=21;case 21:return ei++,[3,19];case 22:vs=0,Qr=te.zeroOrAutoZIndexOrTransformedOrOpacity,Ds.label=23;case 23:return vs<Qr.length?[4,this.renderStack(Qr[vs])]:[3,26];case 24:Ds.sent(),Ds.label=25;case 25:return vs++,[3,23];case 26:us=0,No=te.positiveZIndex,Ds.label=27;case 27:return us<No.length?[4,this.renderStack(No[us])]:[3,30];case 28:Ds.sent(),Ds.label=29;case 29:return us++,[3,27];case 30:return[2]}})})},G.prototype.mask=function(te){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(te.slice(0).reverse()),this.ctx.closePath()},G.prototype.path=function(te){this.ctx.beginPath(),this.formatPath(te),this.ctx.closePath()},G.prototype.formatPath=function(te){var ee=this;te.forEach(function(ke,tt){var St=Bh(ke)?ke.start:ke;0===tt?ee.ctx.moveTo(St.x,St.y):ee.ctx.lineTo(St.x,St.y),Bh(ke)&&ee.ctx.bezierCurveTo(ke.startControl.x,ke.startControl.y,ke.endControl.x,ke.endControl.y,ke.end.x,ke.end.y)})},G.prototype.renderRepeat=function(te,ee,ke,tt){this.path(te),this.ctx.fillStyle=ee,this.ctx.translate(ke,tt),this.ctx.fill(),this.ctx.translate(-ke,-tt)},G.prototype.resizeImage=function(te,ee,ke){var tt;if(te.width===ee&&te.height===ke)return te;var Kt=(null!==(tt=this.canvas.ownerDocument)&&void 0!==tt?tt:document).createElement("canvas");return Kt.width=Math.max(1,ee),Kt.height=Math.max(1,ke),Kt.getContext("2d").drawImage(te,0,0,te.width,te.height,0,0,ee,ke),Kt},G.prototype.renderBackgroundImage=function(te){return M(this,void 0,void 0,function(){var ee,ke,tt,St,Kt;return L(this,function(Dn){switch(Dn.label){case 0:ee=te.styles.backgroundImage.length-1,ke=function(zn){var ei,zi,vs,Qr,us,No,Ps,Ds,Ma,Uo,To,fs,Ca,ra,Po,pc,Uu,rh,ml,dl,ic,gu,_u,Ip,Ih,Xf,Pp,df,ff,Kf,pf;return L(this,function(EA){switch(EA.label){case 0:if(0!==zn.type)return[3,5];ei=void 0,zi=zn.url,EA.label=1;case 1:return EA.trys.push([1,3,,4]),[4,tt.context.cache.match(zi)];case 2:return ei=EA.sent(),[3,4];case 3:return EA.sent(),tt.context.logger.error("Error loading background-image "+zi),[3,4];case 4:return ei&&(vs=Rd(te,ee,[ei.width,ei.height,ei.width/ei.height]),pc=vs[0],gu=vs[1],_u=vs[2],ra=tt.ctx.createPattern(tt.resizeImage(ei,ml=vs[3],dl=vs[4]),"repeat"),tt.renderRepeat(pc,ra,gu,_u)),[3,6];case 5:!function(W){return 1===W.type}(zn)?function(W){return 2===W.type}(zn)&&(Po=Rd(te,ee,[null,null,null]),pc=Po[0],Uu=Po[1],rh=Po[2],dl=Po[4],gu=qo((ic=0===zn.position.length?[gr]:zn.position)[0],ml=Po[3]),_u=qo(ic[ic.length-1],dl),Ip=function(W,G,te,ee,ke){var tt=0,St=0;switch(W.size){case 0:0===W.shape?tt=St=Math.min(Math.abs(G),Math.abs(G-ee),Math.abs(te),Math.abs(te-ke)):1===W.shape&&(tt=Math.min(Math.abs(G),Math.abs(G-ee)),St=Math.min(Math.abs(te),Math.abs(te-ke)));break;case 2:if(0===W.shape)tt=St=Math.min(Ul(G,te),Ul(G,te-ke),Ul(G-ee,te),Ul(G-ee,te-ke));else if(1===W.shape){var Kt=Math.min(Math.abs(te),Math.abs(te-ke))/Math.min(Math.abs(G),Math.abs(G-ee)),jt=iu(ee,ke,G,te,!0);St=Kt*(tt=Ul(jt[0]-G,(jt[1]-te)/Kt))}break;case 1:0===W.shape?tt=St=Math.max(Math.abs(G),Math.abs(G-ee),Math.abs(te),Math.abs(te-ke)):1===W.shape&&(tt=Math.max(Math.abs(G),Math.abs(G-ee)),St=Math.max(Math.abs(te),Math.abs(te-ke)));break;case 3:if(0===W.shape)tt=St=Math.max(Ul(G,te),Ul(G,te-ke),Ul(G-ee,te),Ul(G-ee,te-ke));else if(1===W.shape){Kt=Math.max(Math.abs(te),Math.abs(te-ke))/Math.max(Math.abs(G),Math.abs(G-ee));var ei=iu(ee,ke,G,te,!1);St=Kt*(tt=Ul(ei[0]-G,(ei[1]-te)/Kt))}}return Array.isArray(W.size)&&(tt=qo(W.size[0],ee),St=2===W.size.length?qo(W.size[1],ke):tt),[tt,St]}(zn,gu,_u,ml,dl),Xf=Ip[1],(Ih=Ip[0])>0&&Xf>0&&(Pp=tt.ctx.createRadialGradient(Uu+gu,rh+_u,0,Uu+gu,rh+_u,Ih),Nl(zn.stops,2*Ih).forEach(function(Yf){return Pp.addColorStop(Yf.stop,Lo(Yf.color))}),tt.path(pc),tt.ctx.fillStyle=Pp,Ih!==Xf?(df=te.bounds.left+.5*te.bounds.width,ff=te.bounds.top+.5*te.bounds.height,pf=1/(Kf=Xf/Ih),tt.ctx.save(),tt.ctx.translate(df,ff),tt.ctx.transform(1,0,0,Kf,0,0),tt.ctx.translate(-df,-ff),tt.ctx.fillRect(Uu,pf*(rh-ff)+ff,ml,dl*pf),tt.ctx.restore()):tt.ctx.fill())):(Qr=Rd(te,ee,[null,null,null]),pc=Qr[0],gu=Qr[1],_u=Qr[2],us=xh(zn.angle,ml=Qr[3],dl=Qr[4]),No=us[0],Ps=us[1],Ds=us[2],Ma=us[3],Uo=us[4],(To=document.createElement("canvas")).width=ml,To.height=dl,fs=To.getContext("2d"),Ca=fs.createLinearGradient(Ps,Ma,Ds,Uo),Nl(zn.stops,No).forEach(function(Yf){return Ca.addColorStop(Yf.stop,Lo(Yf.color))}),fs.fillStyle=Ca,fs.fillRect(0,0,ml,dl),ml>0&&dl>0&&(ra=tt.ctx.createPattern(To,"repeat"),tt.renderRepeat(pc,ra,gu,_u))),EA.label=6;case 6:return ee--,[2]}})},tt=this,St=0,Kt=te.styles.backgroundImage.slice(0).reverse(),Dn.label=1;case 1:return St<Kt.length?[5,ke(Kt[St])]:[3,4];case 2:Dn.sent(),Dn.label=3;case 3:return St++,[3,1];case 4:return[2]}})})},G.prototype.renderSolidBorder=function(te,ee,ke){return M(this,void 0,void 0,function(){return L(this,function(tt){return this.path(Sg(ke,ee)),this.ctx.fillStyle=Lo(te),this.ctx.fill(),[2]})})},G.prototype.renderDoubleBorder=function(te,ee,ke,tt){return M(this,void 0,void 0,function(){var St,Kt;return L(this,function(jt){switch(jt.label){case 0:return ee<3?[4,this.renderSolidBorder(te,ke,tt)]:[3,2];case 1:return jt.sent(),[2];case 2:return St=function(W,G){switch(G){case 0:return rl(W.topLeftBorderBox,W.topLeftBorderDoubleOuterBox,W.topRightBorderBox,W.topRightBorderDoubleOuterBox);case 1:return rl(W.topRightBorderBox,W.topRightBorderDoubleOuterBox,W.bottomRightBorderBox,W.bottomRightBorderDoubleOuterBox);case 2:return rl(W.bottomRightBorderBox,W.bottomRightBorderDoubleOuterBox,W.bottomLeftBorderBox,W.bottomLeftBorderDoubleOuterBox);default:return rl(W.bottomLeftBorderBox,W.bottomLeftBorderDoubleOuterBox,W.topLeftBorderBox,W.topLeftBorderDoubleOuterBox)}}(tt,ke),this.path(St),this.ctx.fillStyle=Lo(te),this.ctx.fill(),Kt=function(W,G){switch(G){case 0:return rl(W.topLeftBorderDoubleInnerBox,W.topLeftPaddingBox,W.topRightBorderDoubleInnerBox,W.topRightPaddingBox);case 1:return rl(W.topRightBorderDoubleInnerBox,W.topRightPaddingBox,W.bottomRightBorderDoubleInnerBox,W.bottomRightPaddingBox);case 2:return rl(W.bottomRightBorderDoubleInnerBox,W.bottomRightPaddingBox,W.bottomLeftBorderDoubleInnerBox,W.bottomLeftPaddingBox);default:return rl(W.bottomLeftBorderDoubleInnerBox,W.bottomLeftPaddingBox,W.topLeftBorderDoubleInnerBox,W.topLeftPaddingBox)}}(tt,ke),this.path(Kt),this.ctx.fill(),[2]}})})},G.prototype.renderNodeBackgroundAndBorders=function(te){return M(this,void 0,void 0,function(){var ee,ke,tt,St,Kt,jt,Dn,zn,ei=this;return L(this,function(zi){switch(zi.label){case 0:return this.applyEffects(te.getEffects(2)),ke=!js((ee=te.container.styles).backgroundColor)||ee.backgroundImage.length,tt=[{style:ee.borderTopStyle,color:ee.borderTopColor,width:ee.borderTopWidth},{style:ee.borderRightStyle,color:ee.borderRightColor,width:ee.borderRightWidth},{style:ee.borderBottomStyle,color:ee.borderBottomColor,width:ee.borderBottomWidth},{style:ee.borderLeftStyle,color:ee.borderLeftColor,width:ee.borderLeftWidth}],St=Bg(hf(ee.backgroundClip,0),te.curves),ke||ee.boxShadow.length?(this.ctx.save(),this.path(St),this.ctx.clip(),js(ee.backgroundColor)||(this.ctx.fillStyle=Lo(ee.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(te.container)]):[3,2];case 1:zi.sent(),this.ctx.restore(),ee.boxShadow.slice(0).reverse().forEach(function(vs){ei.ctx.save();var Qr=Am(te.curves),us=vs.inset?0:1e4,No=function(W,G,te,ee,ke){return W.map(function(tt,St){switch(St){case 0:return tt.add(G,te);case 1:return tt.add(G+ee,te);case 2:return tt.add(G+ee,te+ke);case 3:return tt.add(G,te+ke)}return tt})}(Qr,(vs.inset?1:-1)*vs.spread.number-us,(vs.inset?1:-1)*vs.spread.number,vs.spread.number*(vs.inset?-2:2),vs.spread.number*(vs.inset?-2:2));vs.inset?(ei.path(Qr),ei.ctx.clip(),ei.mask(No)):(ei.mask(Qr),ei.ctx.clip(),ei.path(No)),ei.ctx.shadowOffsetX=vs.offsetX.number+us,ei.ctx.shadowOffsetY=vs.offsetY.number,ei.ctx.shadowColor=Lo(vs.color),ei.ctx.shadowBlur=vs.blur.number,ei.ctx.fillStyle=vs.inset?Lo(vs.color):"rgba(0,0,0,1)",ei.ctx.fill(),ei.ctx.restore()}),zi.label=2;case 2:Kt=0,jt=0,Dn=tt,zi.label=3;case 3:return jt<Dn.length?0!==(zn=Dn[jt]).style&&!js(zn.color)&&zn.width>0?2!==zn.style?[3,5]:[4,this.renderDashedDottedBorder(zn.color,zn.width,Kt,te.curves,2)]:[3,11]:[3,13];case 4:return zi.sent(),[3,11];case 5:return 3!==zn.style?[3,7]:[4,this.renderDashedDottedBorder(zn.color,zn.width,Kt,te.curves,3)];case 6:return zi.sent(),[3,11];case 7:return 4!==zn.style?[3,9]:[4,this.renderDoubleBorder(zn.color,zn.width,Kt,te.curves)];case 8:return zi.sent(),[3,11];case 9:return[4,this.renderSolidBorder(zn.color,Kt,te.curves)];case 10:zi.sent(),zi.label=11;case 11:Kt++,zi.label=12;case 12:return jt++,[3,3];case 13:return[2]}})})},G.prototype.renderDashedDottedBorder=function(te,ee,ke,tt,St){return M(this,void 0,void 0,function(){var Kt,jt,Dn,zn,ei,zi,vs,Qr,us,No,Ps,Ds,Ma,Uo,To,fs;return L(this,function(Ca){return this.ctx.save(),Kt=function(W,G){switch(G){case 0:return uf(W.topLeftBorderStroke,W.topRightBorderStroke);case 1:return uf(W.topRightBorderStroke,W.bottomRightBorderStroke);case 2:return uf(W.bottomRightBorderStroke,W.bottomLeftBorderStroke);default:return uf(W.bottomLeftBorderStroke,W.topLeftBorderStroke)}}(tt,ke),jt=Sg(tt,ke),2===St&&(this.path(jt),this.ctx.clip()),Bh(jt[0])?(Dn=jt[0].start.x,zn=jt[0].start.y):(Dn=jt[0].x,zn=jt[0].y),Bh(jt[1])?(ei=jt[1].end.x,zi=jt[1].end.y):(ei=jt[1].x,zi=jt[1].y),vs=0===ke||2===ke?Math.abs(Dn-ei):Math.abs(zn-zi),this.ctx.beginPath(),this.formatPath(3===St?Kt:jt.slice(0,2)),Qr=ee<3?3*ee:2*ee,us=ee<3?2*ee:ee,3===St&&(Qr=ee,us=ee),No=!0,vs<=2*Qr?No=!1:vs<=2*Qr+us?(Qr*=Ps=vs/(2*Qr+us),us*=Ps):(Ds=Math.floor((vs+us)/(Qr+us)),Ma=(vs-Ds*Qr)/(Ds-1),us=(Uo=(vs-(Ds+1)*Qr)/Ds)<=0||Math.abs(us-Ma)<Math.abs(us-Uo)?Ma:Uo),No&&this.ctx.setLineDash(3===St?[0,Qr+us]:[Qr,us]),3===St?(this.ctx.lineCap="round",this.ctx.lineWidth=ee):this.ctx.lineWidth=2*ee+1.1,this.ctx.strokeStyle=Lo(te),this.ctx.stroke(),this.ctx.setLineDash([]),2===St&&(Bh(jt[0])&&(To=jt[3],fs=jt[0],this.ctx.beginPath(),this.formatPath([new qr(To.end.x,To.end.y),new qr(fs.start.x,fs.start.y)]),this.ctx.stroke()),Bh(jt[1])&&(To=jt[1],fs=jt[2],this.ctx.beginPath(),this.formatPath([new qr(To.end.x,To.end.y),new qr(fs.start.x,fs.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},G.prototype.render=function(te){return M(this,void 0,void 0,function(){var ee;return L(this,function(ke){switch(ke.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Lo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),ee=function(W){var G=new Oc(W,null),te=new Fd(G),ee=[];return cf(G,te,te,ee),ad(G.container,ee),te}(te),[4,this.renderStack(ee)];case 1:return ke.sent(),this.applyEffects([]),[2,this.canvas]}})})},G}(Bp),Dg=function(W){return W instanceof l1||W instanceof qy||W instanceof Ag&&W.type!==cm&&W.type!==Dd},Bg=function(W,G){switch(W){case 0:return Am(G);case 2:return function(W){return[W.topLeftContentBox,W.topRightContentBox,W.bottomRightContentBox,W.bottomLeftContentBox]}(G);default:return CA(G)}},$0=function(W){switch(W){case 1:return"center";case 2:return"right";default:return"left"}},x1=["-apple-system","system-ui"],X0=function(W){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?W.filter(function(G){return-1===x1.indexOf(G)}):W},K0=function(W){function G(te,ee){var ke=W.call(this,te,ee)||this;return ke.canvas=ee.canvas?ee.canvas:document.createElement("canvas"),ke.ctx=ke.canvas.getContext("2d"),ke.options=ee,ke.canvas.width=Math.floor(ee.width*ee.scale),ke.canvas.height=Math.floor(ee.height*ee.scale),ke.canvas.style.width=ee.width+"px",ke.canvas.style.height=ee.height+"px",ke.ctx.scale(ke.options.scale,ke.options.scale),ke.ctx.translate(-ee.x,-ee.y),ke.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+ee.width+"x"+ee.height+" at "+ee.x+","+ee.y+") with scale "+ee.scale),ke}return Ce(G,W),G.prototype.render=function(te){return M(this,void 0,void 0,function(){var ee,ke;return L(this,function(tt){switch(tt.label){case 0:return ee=Th(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,te),[4,w1(ee)];case 1:return ke=tt.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Lo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(ke,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},G}(Bp),w1=function(W){return new Promise(function(G,te){var ee=new Image;ee.onload=function(){G(ee)},ee.onerror=te,ee.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(W))})},TA=function(){function W(G){var ee=G.enabled;this.id=G.id,this.enabled=ee,this.start=Date.now()}return W.prototype.debug=function(){for(var G=[],te=0;te<arguments.length;te++)G[te]=arguments[te];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.debug?console.debug.apply(console,ye([this.id,this.getTime()+"ms"],G)):this.info.apply(this,G))},W.prototype.getTime=function(){return Date.now()-this.start},W.prototype.info=function(){for(var G=[],te=0;te<arguments.length;te++)G[te]=arguments[te];this.enabled&&typeof window<"u"&&window.console&&"function"==typeof console.info&&console.info.apply(console,ye([this.id,this.getTime()+"ms"],G))},W.prototype.warn=function(){for(var G=[],te=0;te<arguments.length;te++)G[te]=arguments[te];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.warn?console.warn.apply(console,ye([this.id,this.getTime()+"ms"],G)):this.info.apply(this,G))},W.prototype.error=function(){for(var G=[],te=0;te<arguments.length;te++)G[te]=arguments[te];this.enabled&&(typeof window<"u"&&window.console&&"function"==typeof console.error?console.error.apply(console,ye([this.id,this.getTime()+"ms"],G)):this.info.apply(this,G))},W.instances={},W}(),vm=function(){function W(G,te){var ee;this.windowBounds=te,this.instanceName="#"+W.instanceCount++,this.logger=new TA({id:this.instanceName,enabled:G.logging}),this.cache=null!==(ee=G.cache)&&void 0!==ee?ee:new tv(this,G)}return W.instanceCount=1,W}();typeof window<"u"&&MA.setContext(window);var Y0=function(W,G){return M(void 0,void 0,void 0,function(){var te,ee,ke,tt,St,Kt,jt,Dn,zn,ei,zi,vs,Qr,us,No,Ps,Ds,Ma,Uo,To,fs,ra,Po,pc,Uu,rh,ml,dl,ic,gu,_u,Ip,Ih,Xf,Pp,df,ff,Kf;return L(this,function(pf){switch(pf.label){case 0:if(!W||"object"!=typeof W)return[2,Promise.reject("Invalid element provided as first argument")];if(!(te=W.ownerDocument))throw new Error("Element is not attached to a Document");if(!(ee=te.defaultView))throw new Error("Document is not attached to a Window");return ke={allowTaint:null!==(ra=G.allowTaint)&&void 0!==ra&&ra,imageTimeout:null!==(Po=G.imageTimeout)&&void 0!==Po?Po:15e3,proxy:G.proxy,useCORS:null!==(pc=G.useCORS)&&void 0!==pc&&pc},tt=ze({logging:null===(Uu=G.logging)||void 0===Uu||Uu,cache:G.cache},ke),St={windowWidth:null!==(rh=G.windowWidth)&&void 0!==rh?rh:ee.innerWidth,windowHeight:null!==(ml=G.windowHeight)&&void 0!==ml?ml:ee.innerHeight,scrollX:null!==(dl=G.scrollX)&&void 0!==dl?dl:ee.pageXOffset,scrollY:null!==(ic=G.scrollY)&&void 0!==ic?ic:ee.pageYOffset},Kt=new Be(St.scrollX,St.scrollY,St.windowWidth,St.windowHeight),jt=new vm(tt,Kt),Dn=null!==(gu=G.foreignObjectRendering)&&void 0!==gu&&gu,zn={allowTaint:null!==(_u=G.allowTaint)&&void 0!==_u&&_u,onclone:G.onclone,ignoreElements:G.ignoreElements,inlineImages:Dn,copyStyles:Dn},jt.logger.debug("Starting document clone with size "+Kt.width+"x"+Kt.height+" scrolled to "+-Kt.left+","+-Kt.top),ei=new Q0(jt,W,zn),(zi=ei.clonedReferenceElement)?[4,ei.toIFrame(te,Kt)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return vs=pf.sent(),Qr=U0(zi)||function(W){return"HTML"===W.tagName}(zi)?function(W){var G=W.body,te=W.documentElement;if(!G||!te)throw new Error("Unable to get document size");var ee=Math.max(Math.max(G.scrollWidth,te.scrollWidth),Math.max(G.offsetWidth,te.offsetWidth),Math.max(G.clientWidth,te.clientWidth)),ke=Math.max(Math.max(G.scrollHeight,te.scrollHeight),Math.max(G.offsetHeight,te.offsetHeight),Math.max(G.clientHeight,te.clientHeight));return new Be(0,0,ee,ke)}(zi.ownerDocument):je(jt,zi),us=Qr.width,No=Qr.height,Ps=Qr.left,Ds=Qr.top,Ma=Ig(jt,zi,G.backgroundColor),Uo={canvas:G.canvas,backgroundColor:Ma,scale:null!==(Ih=null!==(Ip=G.scale)&&void 0!==Ip?Ip:ee.devicePixelRatio)&&void 0!==Ih?Ih:1,x:(null!==(Xf=G.x)&&void 0!==Xf?Xf:0)+Ps,y:(null!==(Pp=G.y)&&void 0!==Pp?Pp:0)+Ds,width:null!==(df=G.width)&&void 0!==df?df:Math.ceil(us),height:null!==(ff=G.height)&&void 0!==ff?ff:Math.ceil(No)},Dn?(jt.logger.debug("Document cloned, using foreign object rendering"),[4,new K0(jt,Uo).render(zi)]):[3,3];case 2:return To=pf.sent(),[3,5];case 3:return jt.logger.debug("Document cloned, element located at "+Ps+","+Ds+" with size "+us+"x"+No+" using computed rendering"),jt.logger.debug("Starting DOM parsing"),fs=Wy(jt,zi),Ma===fs.styles.backgroundColor&&(fs.styles.backgroundColor=Ju.TRANSPARENT),jt.logger.debug("Starting renderer for element at "+Uo.x+","+Uo.y+" with size "+Uo.width+"x"+Uo.height),[4,new b1(jt,Uo).render(fs)];case 4:To=pf.sent(),pf.label=5;case 5:return(!(null!==(Kf=G.removeContainer)&&void 0!==Kf)||Kf)&&(Q0.destroy(vs)||jt.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),jt.logger.debug("Finished rendering"),[2,To]}})})},Ig=function(W,G,te){var ee=G.ownerDocument,ke=ee.documentElement?vo(W,getComputedStyle(ee.documentElement).backgroundColor):Ju.TRANSPARENT,tt=ee.body?vo(W,getComputedStyle(ee.body).backgroundColor):Ju.TRANSPARENT,St="string"==typeof te?vo(W,te):null===te?Ju.TRANSPARENT:4294967295;return G===ee.documentElement?js(ke)?js(tt)?St:tt:ke:St};return function(W,G){return void 0===G&&(G={}),Y0(W,G)}}()},9238:$r=>{$r.exports=function At(Ce,ze,M){function L(je,Ze){if(!ze[je]){if(!Ce[je]){if(ye)return ye(je,!0);var He=new Error("Cannot find module '"+je+"'");throw He.code="MODULE_NOT_FOUND",He}var Oe=ze[je]={exports:{}};Ce[je][0].call(Oe.exports,function(ce){return L(Ce[je][1][ce]||ce)},Oe,Oe.exports,At,Ce,ze,M)}return ze[je].exports}for(var ye=void 0,Be=0;Be<M.length;Be++)L(M[Be]);return L}({1:[function(At,Ce,ze){"use strict";var M=At("./utils"),L=At("./support"),ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";ze.encode=function(Be){for(var je,Ze,Ie,Oe,ce,Y,K=[],ue=0,X=Be.length,Z=X,O="string"!==M.getTypeOf(Be);ue<Be.length;)Z=X-ue,Ie=O?(je=Be[ue++],Ze=ue<X?Be[ue++]:0,ue<X?Be[ue++]:0):(je=Be.charCodeAt(ue++),Ze=ue<X?Be.charCodeAt(ue++):0,ue<X?Be.charCodeAt(ue++):0),Oe=(3&je)<<4|Ze>>4,ce=1<Z?(15&Ze)<<2|Ie>>6:64,Y=2<Z?63&Ie:64,K.push(ye.charAt(je>>2)+ye.charAt(Oe)+ye.charAt(ce)+ye.charAt(Y));return K.join("")},ze.decode=function(Be){var je,Ze,Ie,He,Oe,ce,Y=0,K=0;if("data:"===Be.substr(0,"data:".length))throw new Error("Invalid base64 input, it looks like a data url.");var X,Z=3*(Be=Be.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(Be.charAt(Be.length-1)===ye.charAt(64)&&Z--,Be.charAt(Be.length-2)===ye.charAt(64)&&Z--,Z%1!=0)throw new Error("Invalid base64 input, bad content length.");for(X=L.uint8array?new Uint8Array(0|Z):new Array(0|Z);Y<Be.length;)je=ye.indexOf(Be.charAt(Y++))<<2|(He=ye.indexOf(Be.charAt(Y++)))>>4,Ze=(15&He)<<4|(Oe=ye.indexOf(Be.charAt(Y++)))>>2,Ie=(3&Oe)<<6|(ce=ye.indexOf(Be.charAt(Y++))),X[K++]=je,64!==Oe&&(X[K++]=Ze),64!==ce&&(X[K++]=Ie);return X}},{"./support":30,"./utils":32}],2:[function(At,Ce,ze){"use strict";var M=At("./external"),L=At("./stream/DataWorker"),ye=At("./stream/Crc32Probe"),Be=At("./stream/DataLengthProbe");function je(Ze,Ie,He,Oe,ce){this.compressedSize=Ze,this.uncompressedSize=Ie,this.crc32=He,this.compression=Oe,this.compressedContent=ce}je.prototype={getContentWorker:function(){var Ze=new L(M.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new Be("data_length")),Ie=this;return Ze.on("end",function(){if(this.streamInfo.data_length!==Ie.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),Ze},getCompressedWorker:function(){return new L(M.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},je.createWorkerFrom=function(Ze,Ie,He){return Ze.pipe(new ye).pipe(new Be("uncompressedSize")).pipe(Ie.compressWorker(He)).pipe(new Be("compressedSize")).withStreamInfo("compression",Ie)},Ce.exports=je},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(At,Ce,ze){"use strict";var M=At("./stream/GenericWorker");ze.STORE={magic:"\0\0",compressWorker:function(){return new M("STORE compression")},uncompressWorker:function(){return new M("STORE decompression")}},ze.DEFLATE=At("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(At,Ce,ze){"use strict";var M=At("./utils"),L=function(){for(var ye,Be=[],je=0;je<256;je++){ye=je;for(var Ze=0;Ze<8;Ze++)ye=1&ye?3988292384^ye>>>1:ye>>>1;Be[je]=ye}return Be}();Ce.exports=function(ye,Be){return void 0!==ye&&ye.length?"string"!==M.getTypeOf(ye)?function(je,Ze,Ie,He){var Oe=L,ce=0+Ie;je^=-1;for(var Y=0;Y<ce;Y++)je=je>>>8^Oe[255&(je^Ze[Y])];return-1^je}(0|Be,ye,ye.length):function(je,Ze,Ie,He){var Oe=L,ce=0+Ie;je^=-1;for(var Y=0;Y<ce;Y++)je=je>>>8^Oe[255&(je^Ze.charCodeAt(Y))];return-1^je}(0|Be,ye,ye.length):0}},{"./utils":32}],5:[function(At,Ce,ze){"use strict";ze.base64=!1,ze.binary=!1,ze.dir=!1,ze.createFolders=!0,ze.date=null,ze.compression=null,ze.compressionOptions=null,ze.comment=null,ze.unixPermissions=null,ze.dosPermissions=null},{}],6:[function(At,Ce,ze){"use strict";var M;M=typeof Promise<"u"?Promise:At("lie"),Ce.exports={Promise:M}},{lie:37}],7:[function(At,Ce,ze){"use strict";var M=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",L=At("pako"),ye=At("./utils"),Be=At("./stream/GenericWorker"),je=M?"uint8array":"array";function Ze(Ie,He){Be.call(this,"FlateWorker/"+Ie),this._pako=null,this._pakoAction=Ie,this._pakoOptions=He,this.meta={}}ze.magic="\b\0",ye.inherits(Ze,Be),Ze.prototype.processChunk=function(Ie){this.meta=Ie.meta,null===this._pako&&this._createPako(),this._pako.push(ye.transformTo(je,Ie.data),!1)},Ze.prototype.flush=function(){Be.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},Ze.prototype.cleanUp=function(){Be.prototype.cleanUp.call(this),this._pako=null},Ze.prototype._createPako=function(){this._pako=new L[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var Ie=this;this._pako.onData=function(He){Ie.push({data:He,meta:Ie.meta})}},ze.compressWorker=function(Ie){return new Ze("Deflate",Ie)},ze.uncompressWorker=function(){return new Ze("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(At,Ce,ze){"use strict";function M(Oe,ce){var Y,K="";for(Y=0;Y<ce;Y++)K+=String.fromCharCode(255&Oe),Oe>>>=8;return K}function L(Oe,ce,Y,K,ue,X){var Z,O,P=Oe.file,x=Oe.compression,p=X!==je.utf8encode,w=ye.transformTo("string",X(P.name)),m=ye.transformTo("string",je.utf8encode(P.name)),_=P.comment,F=ye.transformTo("string",X(_)),R=ye.transformTo("string",je.utf8encode(_)),q=m.length!==P.name.length,T=R.length!==_.length,$="",J="",ie="",Me=P.dir,de=P.date,fe={crc32:0,compressedSize:0,uncompressedSize:0};ce&&!Y||(fe.crc32=Oe.crc32,fe.compressedSize=Oe.compressedSize,fe.uncompressedSize=Oe.uncompressedSize);var I=0;ce&&(I|=8),p||!q&&!T||(I|=2048);var D,_e,U=0,z=0;Me&&(U|=16),"UNIX"===ue?(z=798,U|=(_e=D=P.unixPermissions,D||(_e=Me?16893:33204),(65535&_e)<<16)):(z=20,U|=function(D){return 63&(D||0)}(P.dosPermissions)),Z=de.getUTCHours(),Z<<=6,Z|=de.getUTCMinutes(),Z<<=5,Z|=de.getUTCSeconds()/2,O=de.getUTCFullYear()-1980,O<<=4,O|=de.getUTCMonth()+1,O<<=5,O|=de.getUTCDate(),q&&(J=M(1,1)+M(Ze(w),4)+m,$+="up"+M(J.length,2)+J),T&&(ie=M(1,1)+M(Ze(F),4)+R,$+="uc"+M(ie.length,2)+ie);var le="";return le+="\n\0",le+=M(I,2),le+=x.magic,le+=M(Z,2),le+=M(O,2),le+=M(fe.crc32,4),le+=M(fe.compressedSize,4),le+=M(fe.uncompressedSize,4),le+=M(w.length,2),le+=M($.length,2),{fileRecord:Ie.LOCAL_FILE_HEADER+le+w+$,dirRecord:Ie.CENTRAL_FILE_HEADER+M(z,2)+le+M(F.length,2)+"\0\0\0\0"+M(U,4)+M(K,4)+w+$+F}}var ye=At("../utils"),Be=At("../stream/GenericWorker"),je=At("../utf8"),Ze=At("../crc32"),Ie=At("../signature");function He(Oe,ce,Y,K){Be.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=ce,this.zipPlatform=Y,this.encodeFileName=K,this.streamFiles=Oe,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}ye.inherits(He,Be),He.prototype.push=function(Oe){var ce=Oe.meta.percent||0,Y=this.entriesCount,K=this._sources.length;this.accumulate?this.contentBuffer.push(Oe):(this.bytesWritten+=Oe.data.length,Be.prototype.push.call(this,{data:Oe.data,meta:{currentFile:this.currentFile,percent:Y?(ce+100*(Y-K-1))/Y:100}}))},He.prototype.openedSource=function(Oe){this.currentSourceOffset=this.bytesWritten,this.currentFile=Oe.file.name;var ce=this.streamFiles&&!Oe.file.dir;if(ce){var Y=L(Oe,ce,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:Y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},He.prototype.closedSource=function(Oe){this.accumulate=!1;var K,ce=this.streamFiles&&!Oe.file.dir,Y=L(Oe,ce,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(Y.dirRecord),ce)this.push({data:(K=Oe,Ie.DATA_DESCRIPTOR+M(K.crc32,4)+M(K.compressedSize,4)+M(K.uncompressedSize,4)),meta:{percent:100}});else for(this.push({data:Y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},He.prototype.flush=function(){for(var Oe=this.bytesWritten,ce=0;ce<this.dirRecords.length;ce++)this.push({data:this.dirRecords[ce],meta:{percent:100}});var ue,X,Z,x,K=(ue=this.dirRecords.length,X=this.bytesWritten-Oe,Z=Oe,x=ye.transformTo("string",(0,this.encodeFileName)(this.zipComment)),Ie.CENTRAL_DIRECTORY_END+"\0\0\0\0"+M(ue,2)+M(ue,2)+M(X,4)+M(Z,4)+M(x.length,2)+x);this.push({data:K,meta:{percent:100}})},He.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},He.prototype.registerPrevious=function(Oe){this._sources.push(Oe);var ce=this;return Oe.on("data",function(Y){ce.processChunk(Y)}),Oe.on("end",function(){ce.closedSource(ce.previous.streamInfo),ce._sources.length?ce.prepareNextSource():ce.end()}),Oe.on("error",function(Y){ce.error(Y)}),this},He.prototype.resume=function(){return!!Be.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},He.prototype.error=function(Oe){var ce=this._sources;if(!Be.prototype.error.call(this,Oe))return!1;for(var Y=0;Y<ce.length;Y++)try{ce[Y].error(Oe)}catch{}return!0},He.prototype.lock=function(){Be.prototype.lock.call(this);for(var Oe=this._sources,ce=0;ce<Oe.length;ce++)Oe[ce].lock()},Ce.exports=He},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(At,Ce,ze){"use strict";var M=At("../compressions"),L=At("./ZipFileWorker");ze.generateWorker=function(ye,Be,je){var Ze=new L(Be.streamFiles,je,Be.platform,Be.encodeFileName),Ie=0;try{ye.forEach(function(He,Oe){Ie++;var ce=function(X,Z){var O=X||Z,P=M[O];if(!P)throw new Error(O+" is not a valid compression method !");return P}(Oe.options.compression,Be.compression),K=Oe.dir,ue=Oe.date;Oe._compressWorker(ce,Oe.options.compressionOptions||Be.compressionOptions||{}).withStreamInfo("file",{name:He,dir:K,date:ue,comment:Oe.comment||"",unixPermissions:Oe.unixPermissions,dosPermissions:Oe.dosPermissions}).pipe(Ze)}),Ze.entriesCount=Ie}catch(He){Ze.error(He)}return Ze}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(At,Ce,ze){"use strict";function M(){if(!(this instanceof M))return new M;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var L=new M;for(var ye in this)"function"!=typeof this[ye]&&(L[ye]=this[ye]);return L}}(M.prototype=At("./object")).loadAsync=At("./load"),M.support=At("./support"),M.defaults=At("./defaults"),M.version="3.10.1",M.loadAsync=function(L,ye){return(new M).loadAsync(L,ye)},M.external=At("./external"),Ce.exports=M},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(At,Ce,ze){"use strict";var M=At("./utils"),L=At("./external"),ye=At("./utf8"),Be=At("./zipEntries"),je=At("./stream/Crc32Probe"),Ze=At("./nodejsUtils");function Ie(He){return new L.Promise(function(Oe,ce){var Y=He.decompressed.getContentWorker().pipe(new je);Y.on("error",function(K){ce(K)}).on("end",function(){Y.streamInfo.crc32!==He.decompressed.crc32?ce(new Error("Corrupted zip : CRC32 mismatch")):Oe()}).resume()})}Ce.exports=function(He,Oe){var ce=this;return Oe=M.extend(Oe||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:ye.utf8decode}),Ze.isNode&&Ze.isStream(He)?L.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):M.prepareContent("the loaded zip file",He,!0,Oe.optimizedBinaryString,Oe.base64).then(function(Y){var K=new Be(Oe);return K.load(Y),K}).then(function(Y){var K=[L.Promise.resolve(Y)],ue=Y.files;if(Oe.checkCRC32)for(var X=0;X<ue.length;X++)K.push(Ie(ue[X]));return L.Promise.all(K)}).then(function(Y){for(var K=Y.shift(),ue=K.files,X=0;X<ue.length;X++){var Z=ue[X],O=Z.fileNameStr,P=M.resolve(Z.fileNameStr);ce.file(P,Z.decompressed,{binary:!0,optimizedBinaryString:!0,date:Z.date,dir:Z.dir,comment:Z.fileCommentStr.length?Z.fileCommentStr:null,unixPermissions:Z.unixPermissions,dosPermissions:Z.dosPermissions,createFolders:Oe.createFolders}),Z.dir||(ce.file(P).unsafeOriginalName=O)}return K.zipComment.length&&(ce.comment=K.zipComment),ce})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(At,Ce,ze){"use strict";var M=At("../utils"),L=At("../stream/GenericWorker");function ye(Be,je){L.call(this,"Nodejs stream input adapter for "+Be),this._upstreamEnded=!1,this._bindStream(je)}M.inherits(ye,L),ye.prototype._bindStream=function(Be){var je=this;(this._stream=Be).pause(),Be.on("data",function(Ze){je.push({data:Ze,meta:{percent:0}})}).on("error",function(Ze){je.isPaused?this.generatedError=Ze:je.error(Ze)}).on("end",function(){je.isPaused?je._upstreamEnded=!0:je.end()})},ye.prototype.pause=function(){return!!L.prototype.pause.call(this)&&(this._stream.pause(),!0)},ye.prototype.resume=function(){return!!L.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},Ce.exports=ye},{"../stream/GenericWorker":28,"../utils":32}],13:[function(At,Ce,ze){"use strict";var M=At("readable-stream").Readable;function L(ye,Be,je){M.call(this,Be),this._helper=ye;var Ze=this;ye.on("data",function(Ie,He){Ze.push(Ie)||Ze._helper.pause(),je&&je(He)}).on("error",function(Ie){Ze.emit("error",Ie)}).on("end",function(){Ze.push(null)})}At("../utils").inherits(L,M),L.prototype._read=function(){this._helper.resume()},Ce.exports=L},{"../utils":32,"readable-stream":16}],14:[function(At,Ce,ze){"use strict";Ce.exports={isNode:typeof Buffer<"u",newBufferFrom:function(M,L){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(M,L);if("number"==typeof M)throw new Error('The "data" argument must not be a number');return new Buffer(M,L)},allocBuffer:function(M){if(Buffer.alloc)return Buffer.alloc(M);var L=new Buffer(M);return L.fill(0),L},isBuffer:function(M){return Buffer.isBuffer(M)},isStream:function(M){return M&&"function"==typeof M.on&&"function"==typeof M.pause&&"function"==typeof M.resume}}},{}],15:[function(At,Ce,ze){"use strict";function M(P,x,p){var w,m=ye.getTypeOf(x),_=ye.extend(p||{},Ze);_.date=_.date||new Date,null!==_.compression&&(_.compression=_.compression.toUpperCase()),"string"==typeof _.unixPermissions&&(_.unixPermissions=parseInt(_.unixPermissions,8)),_.unixPermissions&&16384&_.unixPermissions&&(_.dir=!0),_.dosPermissions&&16&_.dosPermissions&&(_.dir=!0),_.dir&&(P=ue(P)),_.createFolders&&(w=K(P))&&X.call(this,w,!0),p&&void 0!==p.binary||(_.binary=!("string"===m&&!1===_.binary&&!1===_.base64)),(x instanceof Ie&&0===x.uncompressedSize||_.dir||!x||0===x.length)&&(_.base64=!1,_.binary=!0,x="",_.compression="STORE",m="string");var R;R=x instanceof Ie||x instanceof Be?x:ce.isNode&&ce.isStream(x)?new Y(P,x):ye.prepareContent(P,x,_.binary,_.optimizedBinaryString,_.base64);var q=new He(P,R,_);this.files[P]=q}var L=At("./utf8"),ye=At("./utils"),Be=At("./stream/GenericWorker"),je=At("./stream/StreamHelper"),Ze=At("./defaults"),Ie=At("./compressedObject"),He=At("./zipObject"),Oe=At("./generate"),ce=At("./nodejsUtils"),Y=At("./nodejs/NodejsStreamInputAdapter"),K=function(P){"/"===P.slice(-1)&&(P=P.substring(0,P.length-1));var x=P.lastIndexOf("/");return 0<x?P.substring(0,x):""},ue=function(P){return"/"!==P.slice(-1)&&(P+="/"),P},X=function(P,x){return x=void 0!==x?x:Ze.createFolders,P=ue(P),this.files[P]||M.call(this,P,null,{dir:!0,createFolders:x}),this.files[P]};function Z(P){return"[object RegExp]"===Object.prototype.toString.call(P)}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(P){var x,p,w;for(x in this.files)w=this.files[x],(p=x.slice(this.root.length,x.length))&&x.slice(0,this.root.length)===this.root&&P(p,w)},filter:function(P){var x=[];return this.forEach(function(p,w){P(p,w)&&x.push(w)}),x},file:function(P,x,p){if(1!==arguments.length)return M.call(this,P=this.root+P,x,p),this;if(Z(P)){var w=P;return this.filter(function(_,F){return!F.dir&&w.test(_)})}var m=this.files[this.root+P];return m&&!m.dir?m:null},folder:function(P){if(!P)return this;if(Z(P))return this.filter(function(m,_){return _.dir&&P.test(m)});var p=X.call(this,this.root+P),w=this.clone();return w.root=p.name,w},remove:function(P){var x=this.files[P=this.root+P];if(x||("/"!==P.slice(-1)&&(P+="/"),x=this.files[P]),x&&!x.dir)delete this.files[P];else for(var p=this.filter(function(m,_){return _.name.slice(0,P.length)===P}),w=0;w<p.length;w++)delete this.files[p[w].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(P){var x,p={};try{if((p=ye.extend(P||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:L.utf8encode})).type=p.type.toLowerCase(),p.compression=p.compression.toUpperCase(),"binarystring"===p.type&&(p.type="string"),!p.type)throw new Error("No output type specified.");ye.checkSupport(p.type),"darwin"!==p.platform&&"freebsd"!==p.platform&&"linux"!==p.platform&&"sunos"!==p.platform||(p.platform="UNIX"),"win32"===p.platform&&(p.platform="DOS"),x=Oe.generateWorker(this,p,p.comment||this.comment||"")}catch(m){(x=new Be("error")).error(m)}return new je(x,p.type||"string",p.mimeType)},generateAsync:function(P,x){return this.generateInternalStream(P).accumulate(x)},generateNodeStream:function(P,x){return(P=P||{}).type||(P.type="nodebuffer"),this.generateInternalStream(P).toNodejsStream(x)}};Ce.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(At,Ce,ze){"use strict";Ce.exports=At("stream")},{stream:void 0}],17:[function(At,Ce,ze){"use strict";var M=At("./DataReader");function L(ye){M.call(this,ye);for(var Be=0;Be<this.data.length;Be++)ye[Be]=255&ye[Be]}At("../utils").inherits(L,M),L.prototype.byteAt=function(ye){return this.data[this.zero+ye]},L.prototype.lastIndexOfSignature=function(ye){for(var Be=ye.charCodeAt(0),je=ye.charCodeAt(1),Ze=ye.charCodeAt(2),Ie=ye.charCodeAt(3),He=this.length-4;0<=He;--He)if(this.data[He]===Be&&this.data[He+1]===je&&this.data[He+2]===Ze&&this.data[He+3]===Ie)return He-this.zero;return-1},L.prototype.readAndCheckSignature=function(ye){var Be=ye.charCodeAt(0),je=ye.charCodeAt(1),Ze=ye.charCodeAt(2),Ie=ye.charCodeAt(3),He=this.readData(4);return Be===He[0]&&je===He[1]&&Ze===He[2]&&Ie===He[3]},L.prototype.readData=function(ye){if(this.checkOffset(ye),0===ye)return[];var Be=this.data.slice(this.zero+this.index,this.zero+this.index+ye);return this.index+=ye,Be},Ce.exports=L},{"../utils":32,"./DataReader":18}],18:[function(At,Ce,ze){"use strict";var M=At("../utils");function L(ye){this.data=ye,this.length=ye.length,this.index=0,this.zero=0}L.prototype={checkOffset:function(ye){this.checkIndex(this.index+ye)},checkIndex:function(ye){if(this.length<this.zero+ye||ye<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+ye+"). Corrupted zip ?")},setIndex:function(ye){this.checkIndex(ye),this.index=ye},skip:function(ye){this.setIndex(this.index+ye)},byteAt:function(){},readInt:function(ye){var Be,je=0;for(this.checkOffset(ye),Be=this.index+ye-1;Be>=this.index;Be--)je=(je<<8)+this.byteAt(Be);return this.index+=ye,je},readString:function(ye){return M.transformTo("string",this.readData(ye))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var ye=this.readInt(4);return new Date(Date.UTC(1980+(ye>>25&127),(ye>>21&15)-1,ye>>16&31,ye>>11&31,ye>>5&63,(31&ye)<<1))}},Ce.exports=L},{"../utils":32}],19:[function(At,Ce,ze){"use strict";var M=At("./Uint8ArrayReader");function L(ye){M.call(this,ye)}At("../utils").inherits(L,M),L.prototype.readData=function(ye){this.checkOffset(ye);var Be=this.data.slice(this.zero+this.index,this.zero+this.index+ye);return this.index+=ye,Be},Ce.exports=L},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(At,Ce,ze){"use strict";var M=At("./DataReader");function L(ye){M.call(this,ye)}At("../utils").inherits(L,M),L.prototype.byteAt=function(ye){return this.data.charCodeAt(this.zero+ye)},L.prototype.lastIndexOfSignature=function(ye){return this.data.lastIndexOf(ye)-this.zero},L.prototype.readAndCheckSignature=function(ye){return ye===this.readData(4)},L.prototype.readData=function(ye){this.checkOffset(ye);var Be=this.data.slice(this.zero+this.index,this.zero+this.index+ye);return this.index+=ye,Be},Ce.exports=L},{"../utils":32,"./DataReader":18}],21:[function(At,Ce,ze){"use strict";var M=At("./ArrayReader");function L(ye){M.call(this,ye)}At("../utils").inherits(L,M),L.prototype.readData=function(ye){if(this.checkOffset(ye),0===ye)return new Uint8Array(0);var Be=this.data.subarray(this.zero+this.index,this.zero+this.index+ye);return this.index+=ye,Be},Ce.exports=L},{"../utils":32,"./ArrayReader":17}],22:[function(At,Ce,ze){"use strict";var M=At("../utils"),L=At("../support"),ye=At("./ArrayReader"),Be=At("./StringReader"),je=At("./NodeBufferReader"),Ze=At("./Uint8ArrayReader");Ce.exports=function(Ie){var He=M.getTypeOf(Ie);return M.checkSupport(He),"string"!==He||L.uint8array?"nodebuffer"===He?new je(Ie):L.uint8array?new Ze(M.transformTo("uint8array",Ie)):new ye(M.transformTo("array",Ie)):new Be(Ie)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(At,Ce,ze){"use strict";ze.LOCAL_FILE_HEADER="PK\x03\x04",ze.CENTRAL_FILE_HEADER="PK\x01\x02",ze.CENTRAL_DIRECTORY_END="PK\x05\x06",ze.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",ze.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",ze.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(At,Ce,ze){"use strict";var M=At("./GenericWorker"),L=At("../utils");function ye(Be){M.call(this,"ConvertWorker to "+Be),this.destType=Be}L.inherits(ye,M),ye.prototype.processChunk=function(Be){this.push({data:L.transformTo(this.destType,Be.data),meta:Be.meta})},Ce.exports=ye},{"../utils":32,"./GenericWorker":28}],25:[function(At,Ce,ze){"use strict";var M=At("./GenericWorker"),L=At("../crc32");function ye(){M.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}At("../utils").inherits(ye,M),ye.prototype.processChunk=function(Be){this.streamInfo.crc32=L(Be.data,this.streamInfo.crc32||0),this.push(Be)},Ce.exports=ye},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(At,Ce,ze){"use strict";var M=At("../utils"),L=At("./GenericWorker");function ye(Be){L.call(this,"DataLengthProbe for "+Be),this.propName=Be,this.withStreamInfo(Be,0)}M.inherits(ye,L),ye.prototype.processChunk=function(Be){Be&&(this.streamInfo[this.propName]=(this.streamInfo[this.propName]||0)+Be.data.length),L.prototype.processChunk.call(this,Be)},Ce.exports=ye},{"../utils":32,"./GenericWorker":28}],27:[function(At,Ce,ze){"use strict";var M=At("../utils"),L=At("./GenericWorker");function ye(Be){L.call(this,"DataWorker");var je=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,Be.then(function(Ze){je.dataIsReady=!0,je.data=Ze,je.max=Ze&&Ze.length||0,je.type=M.getTypeOf(Ze),je.isPaused||je._tickAndRepeat()},function(Ze){je.error(Ze)})}M.inherits(ye,L),ye.prototype.cleanUp=function(){L.prototype.cleanUp.call(this),this.data=null},ye.prototype.resume=function(){return!!L.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,M.delay(this._tickAndRepeat,[],this)),!0)},ye.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(M.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},ye.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var Be=null,je=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":Be=this.data.substring(this.index,je);break;case"uint8array":Be=this.data.subarray(this.index,je);break;case"array":case"nodebuffer":Be=this.data.slice(this.index,je)}return this.index=je,this.push({data:Be,meta:{percent:this.max?this.index/this.max*100:0}})},Ce.exports=ye},{"../utils":32,"./GenericWorker":28}],28:[function(At,Ce,ze){"use strict";function M(L){this.name=L||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}M.prototype={push:function(L){this.emit("data",L)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(L){this.emit("error",L)}return!0},error:function(L){return!this.isFinished&&(this.isPaused?this.generatedError=L:(this.isFinished=!0,this.emit("error",L),this.previous&&this.previous.error(L),this.cleanUp()),!0)},on:function(L,ye){return this._listeners[L].push(ye),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(L,ye){if(this._listeners[L])for(var Be=0;Be<this._listeners[L].length;Be++)this._listeners[L][Be].call(this,ye)},pipe:function(L){return L.registerPrevious(this)},registerPrevious:function(L){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=L.streamInfo,this.mergeStreamInfo(),this.previous=L;var ye=this;return L.on("data",function(Be){ye.processChunk(Be)}),L.on("end",function(){ye.end()}),L.on("error",function(Be){ye.error(Be)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var L=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),L=!0),this.previous&&this.previous.resume(),!L},flush:function(){},processChunk:function(L){this.push(L)},withStreamInfo:function(L,ye){return this.extraStreamInfo[L]=ye,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var L in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,L)&&(this.streamInfo[L]=this.extraStreamInfo[L])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var L="Worker "+this.name;return this.previous?this.previous+" -> "+L:L}},Ce.exports=M},{}],29:[function(At,Ce,ze){"use strict";var M=At("../utils"),L=At("./ConvertWorker"),ye=At("./GenericWorker"),Be=At("../base64"),je=At("../support"),Ze=At("../external"),Ie=null;if(je.nodestream)try{Ie=At("../nodejs/NodejsStreamOutputAdapter")}catch{}function Oe(ce,Y,K){var ue=Y;switch(Y){case"blob":case"arraybuffer":ue="uint8array";break;case"base64":ue="string"}try{this._internalType=ue,this._outputType=Y,this._mimeType=K,M.checkSupport(ue),this._worker=ce.pipe(new L(ue)),ce.lock()}catch(X){this._worker=new ye("error"),this._worker.error(X)}}Oe.prototype={accumulate:function(ce){return function He(ce,Y){return new Ze.Promise(function(K,ue){var X=[],Z=ce._internalType,O=ce._outputType,P=ce._mimeType;ce.on("data",function(x,p){X.push(x),Y&&Y(p)}).on("error",function(x){X=[],ue(x)}).on("end",function(){try{var x=function(p,w,m){switch(p){case"blob":return M.newBlob(M.transformTo("arraybuffer",w),m);case"base64":return Be.encode(w);default:return M.transformTo(p,w)}}(O,function(p,w){var m,_=0,F=null,R=0;for(m=0;m<w.length;m++)R+=w[m].length;switch(p){case"string":return w.join("");case"array":return Array.prototype.concat.apply([],w);case"uint8array":for(F=new Uint8Array(R),m=0;m<w.length;m++)F.set(w[m],_),_+=w[m].length;return F;case"nodebuffer":return Buffer.concat(w);default:throw new Error("concat : unsupported type '"+p+"'")}}(Z,X),P);K(x)}catch(p){ue(p)}X=[]}).resume()})}(this,ce)},on:function(ce,Y){var K=this;return this._worker.on(ce,"data"===ce?function(ue){Y.call(K,ue.data,ue.meta)}:function(){M.delay(Y,arguments,K)}),this},resume:function(){return M.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(ce){if(M.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new Ie(this,{objectMode:"nodebuffer"!==this._outputType},ce)}},Ce.exports=Oe},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(At,Ce,ze){"use strict";if(ze.base64=!0,ze.array=!0,ze.string=!0,ze.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",ze.nodebuffer=typeof Buffer<"u",ze.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")ze.blob=!1;else{var M=new ArrayBuffer(0);try{ze.blob=0===new Blob([M],{type:"application/zip"}).size}catch{try{var L=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);L.append(M),ze.blob=0===L.getBlob("application/zip").size}catch{ze.blob=!1}}}try{ze.nodestream=!!At("readable-stream").Readable}catch{ze.nodestream=!1}},{"readable-stream":16}],31:[function(At,Ce,ze){"use strict";for(var M=At("./utils"),L=At("./support"),ye=At("./nodejsUtils"),Be=At("./stream/GenericWorker"),je=new Array(256),Ze=0;Ze<256;Ze++)je[Ze]=252<=Ze?6:248<=Ze?5:240<=Ze?4:224<=Ze?3:192<=Ze?2:1;function Ie(){Be.call(this,"utf-8 decode"),this.leftOver=null}function He(){Be.call(this,"utf-8 encode")}je[254]=je[254]=1,ze.utf8encode=function(Oe){return L.nodebuffer?ye.newBufferFrom(Oe,"utf-8"):function(ce){var Y,K,ue,X,Z,O=ce.length,P=0;for(X=0;X<O;X++)55296==(64512&(K=ce.charCodeAt(X)))&&X+1<O&&56320==(64512&(ue=ce.charCodeAt(X+1)))&&(K=65536+(K-55296<<10)+(ue-56320),X++),P+=K<128?1:K<2048?2:K<65536?3:4;for(Y=L.uint8array?new Uint8Array(P):new Array(P),X=Z=0;Z<P;X++)55296==(64512&(K=ce.charCodeAt(X)))&&X+1<O&&56320==(64512&(ue=ce.charCodeAt(X+1)))&&(K=65536+(K-55296<<10)+(ue-56320),X++),K<128?Y[Z++]=K:(K<2048?Y[Z++]=192|K>>>6:(K<65536?Y[Z++]=224|K>>>12:(Y[Z++]=240|K>>>18,Y[Z++]=128|K>>>12&63),Y[Z++]=128|K>>>6&63),Y[Z++]=128|63&K);return Y}(Oe)},ze.utf8decode=function(Oe){return L.nodebuffer?M.transformTo("nodebuffer",Oe).toString("utf-8"):function(ce){var Y,K,ue,X,Z=ce.length,O=new Array(2*Z);for(Y=K=0;Y<Z;)if((ue=ce[Y++])<128)O[K++]=ue;else if(4<(X=je[ue]))O[K++]=65533,Y+=X-1;else{for(ue&=2===X?31:3===X?15:7;1<X&&Y<Z;)ue=ue<<6|63&ce[Y++],X--;1<X?O[K++]=65533:ue<65536?O[K++]=ue:(O[K++]=55296|(ue-=65536)>>10&1023,O[K++]=56320|1023&ue)}return O.length!==K&&(O.subarray?O=O.subarray(0,K):O.length=K),M.applyFromCharCode(O)}(Oe=M.transformTo(L.uint8array?"uint8array":"array",Oe))},M.inherits(Ie,Be),Ie.prototype.processChunk=function(Oe){var ce=M.transformTo(L.uint8array?"uint8array":"array",Oe.data);if(this.leftOver&&this.leftOver.length){if(L.uint8array){var Y=ce;(ce=new Uint8Array(Y.length+this.leftOver.length)).set(this.leftOver,0),ce.set(Y,this.leftOver.length)}else ce=this.leftOver.concat(ce);this.leftOver=null}var K=function(X,Z){var O;for((Z=Z||X.length)>X.length&&(Z=X.length),O=Z-1;0<=O&&128==(192&X[O]);)O--;return O<0||0===O?Z:O+je[X[O]]>Z?O:Z}(ce),ue=ce;K!==ce.length&&(L.uint8array?(ue=ce.subarray(0,K),this.leftOver=ce.subarray(K,ce.length)):(ue=ce.slice(0,K),this.leftOver=ce.slice(K,ce.length))),this.push({data:ze.utf8decode(ue),meta:Oe.meta})},Ie.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:ze.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},ze.Utf8DecodeWorker=Ie,M.inherits(He,Be),He.prototype.processChunk=function(Oe){this.push({data:ze.utf8encode(Oe.data),meta:Oe.meta})},ze.Utf8EncodeWorker=He},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(At,Ce,ze){"use strict";var M=At("./support"),L=At("./base64"),ye=At("./nodejsUtils"),Be=At("./external");function je(Y){return Y}function Ze(Y,K){for(var ue=0;ue<Y.length;++ue)K[ue]=255&Y.charCodeAt(ue);return K}At("setimmediate"),ze.newBlob=function(Y,K){ze.checkSupport("blob");try{return new Blob([Y],{type:K})}catch{try{var ue=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return ue.append(Y),ue.getBlob(K)}catch{throw new Error("Bug : can't construct the Blob.")}}};var Ie={stringifyByChunk:function(Y,K,ue){var X=[],Z=0,O=Y.length;if(O<=ue)return String.fromCharCode.apply(null,Y);for(;Z<O;)X.push(String.fromCharCode.apply(null,"array"===K||"nodebuffer"===K?Y.slice(Z,Math.min(Z+ue,O)):Y.subarray(Z,Math.min(Z+ue,O)))),Z+=ue;return X.join("")},stringifyByChar:function(Y){for(var K="",ue=0;ue<Y.length;ue++)K+=String.fromCharCode(Y[ue]);return K},applyCanBeUsed:{uint8array:function(){try{return M.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch{return!1}}(),nodebuffer:function(){try{return M.nodebuffer&&1===String.fromCharCode.apply(null,ye.allocBuffer(1)).length}catch{return!1}}()}};function He(Y){var K=65536,ue=ze.getTypeOf(Y),X=!0;if("uint8array"===ue?X=Ie.applyCanBeUsed.uint8array:"nodebuffer"===ue&&(X=Ie.applyCanBeUsed.nodebuffer),X)for(;1<K;)try{return Ie.stringifyByChunk(Y,ue,K)}catch{K=Math.floor(K/2)}return Ie.stringifyByChar(Y)}function Oe(Y,K){for(var ue=0;ue<Y.length;ue++)K[ue]=Y[ue];return K}ze.applyFromCharCode=He;var ce={};ce.string={string:je,array:function(Y){return Ze(Y,new Array(Y.length))},arraybuffer:function(Y){return ce.string.uint8array(Y).buffer},uint8array:function(Y){return Ze(Y,new Uint8Array(Y.length))},nodebuffer:function(Y){return Ze(Y,ye.allocBuffer(Y.length))}},ce.array={string:He,array:je,arraybuffer:function(Y){return new Uint8Array(Y).buffer},uint8array:function(Y){return new Uint8Array(Y)},nodebuffer:function(Y){return ye.newBufferFrom(Y)}},ce.arraybuffer={string:function(Y){return He(new Uint8Array(Y))},array:function(Y){return Oe(new Uint8Array(Y),new Array(Y.byteLength))},arraybuffer:je,uint8array:function(Y){return new Uint8Array(Y)},nodebuffer:function(Y){return ye.newBufferFrom(new Uint8Array(Y))}},ce.uint8array={string:He,array:function(Y){return Oe(Y,new Array(Y.length))},arraybuffer:function(Y){return Y.buffer},uint8array:je,nodebuffer:function(Y){return ye.newBufferFrom(Y)}},ce.nodebuffer={string:He,array:function(Y){return Oe(Y,new Array(Y.length))},arraybuffer:function(Y){return ce.nodebuffer.uint8array(Y).buffer},uint8array:function(Y){return Oe(Y,new Uint8Array(Y.length))},nodebuffer:je},ze.transformTo=function(Y,K){if(K=K||"",!Y)return K;ze.checkSupport(Y);var ue=ze.getTypeOf(K);return ce[ue][Y](K)},ze.resolve=function(Y){for(var K=Y.split("/"),ue=[],X=0;X<K.length;X++){var Z=K[X];"."===Z||""===Z&&0!==X&&X!==K.length-1||(".."===Z?ue.pop():ue.push(Z))}return ue.join("/")},ze.getTypeOf=function(Y){return"string"==typeof Y?"string":"[object Array]"===Object.prototype.toString.call(Y)?"array":M.nodebuffer&&ye.isBuffer(Y)?"nodebuffer":M.uint8array&&Y instanceof Uint8Array?"uint8array":M.arraybuffer&&Y instanceof ArrayBuffer?"arraybuffer":void 0},ze.checkSupport=function(Y){if(!M[Y.toLowerCase()])throw new Error(Y+" is not supported by this platform")},ze.MAX_VALUE_16BITS=65535,ze.MAX_VALUE_32BITS=-1,ze.pretty=function(Y){var K,ue,X="";for(ue=0;ue<(Y||"").length;ue++)X+="\\x"+((K=Y.charCodeAt(ue))<16?"0":"")+K.toString(16).toUpperCase();return X},ze.delay=function(Y,K,ue){setImmediate(function(){Y.apply(ue||null,K||[])})},ze.inherits=function(Y,K){function ue(){}ue.prototype=K.prototype,Y.prototype=new ue},ze.extend=function(){var Y,K,ue={};for(Y=0;Y<arguments.length;Y++)for(K in arguments[Y])Object.prototype.hasOwnProperty.call(arguments[Y],K)&&void 0===ue[K]&&(ue[K]=arguments[Y][K]);return ue},ze.prepareContent=function(Y,K,ue,X,Z){return Be.Promise.resolve(K).then(function(O){return M.blob&&(O instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O)))&&typeof FileReader<"u"?new Be.Promise(function(P,x){var p=new FileReader;p.onload=function(w){P(w.target.result)},p.onerror=function(w){x(w.target.error)},p.readAsArrayBuffer(O)}):O}).then(function(O){var x,P=ze.getTypeOf(O);return P?("arraybuffer"===P?O=ze.transformTo("uint8array",O):"string"===P&&(Z?O=L.decode(O):ue&&!0!==X&&(O=Ze(x=O,M.uint8array?new Uint8Array(x.length):new Array(x.length)))),O):Be.Promise.reject(new Error("Can't read the data of '"+Y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(At,Ce,ze){"use strict";var M=At("./reader/readerFor"),L=At("./utils"),ye=At("./signature"),Be=At("./zipEntry"),je=At("./support");function Ze(Ie){this.files=[],this.loadOptions=Ie}Ze.prototype={checkSignature:function(Ie){if(!this.reader.readAndCheckSignature(Ie)){this.reader.index-=4;var He=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+L.pretty(He)+", expected "+L.pretty(Ie)+")")}},isSignature:function(Ie,He){var Oe=this.reader.index;this.reader.setIndex(Ie);var ce=this.reader.readString(4)===He;return this.reader.setIndex(Oe),ce},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var Ie=this.reader.readData(this.zipCommentLength),Oe=L.transformTo(je.uint8array?"uint8array":"array",Ie);this.zipComment=this.loadOptions.decodeFileName(Oe)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var Ie,He,Oe,ce=this.zip64EndOfCentralSize-44;0<ce;)Ie=this.reader.readInt(2),He=this.reader.readInt(4),Oe=this.reader.readData(He),this.zip64ExtensibleData[Ie]={id:Ie,length:He,value:Oe}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var Ie,He;for(Ie=0;Ie<this.files.length;Ie++)this.reader.setIndex((He=this.files[Ie]).localHeaderOffset),this.checkSignature(ye.LOCAL_FILE_HEADER),He.readLocalPart(this.reader),He.handleUTF8(),He.processAttributes()},readCentralDir:function(){var Ie;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(ye.CENTRAL_FILE_HEADER);)(Ie=new Be({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(Ie);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var Ie=this.reader.lastIndexOfSignature(ye.CENTRAL_DIRECTORY_END);if(Ie<0)throw this.isSignature(0,ye.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(Ie);var He=Ie;if(this.checkSignature(ye.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===L.MAX_VALUE_16BITS||this.diskWithCentralDirStart===L.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===L.MAX_VALUE_16BITS||this.centralDirRecords===L.MAX_VALUE_16BITS||this.centralDirSize===L.MAX_VALUE_32BITS||this.centralDirOffset===L.MAX_VALUE_32BITS){if(this.zip64=!0,(Ie=this.reader.lastIndexOfSignature(ye.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(Ie),this.checkSignature(ye.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,ye.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(ye.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(ye.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var Oe=this.centralDirOffset+this.centralDirSize;this.zip64&&(Oe+=20,Oe+=12+this.zip64EndOfCentralSize);var ce=He-Oe;if(0<ce)this.isSignature(He,ye.CENTRAL_FILE_HEADER)||(this.reader.zero=ce);else if(ce<0)throw new Error("Corrupted zip: missing "+Math.abs(ce)+" bytes.")},prepareReader:function(Ie){this.reader=M(Ie)},load:function(Ie){this.prepareReader(Ie),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},Ce.exports=Ze},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(At,Ce,ze){"use strict";var M=At("./reader/readerFor"),L=At("./utils"),ye=At("./compressedObject"),Be=At("./crc32"),je=At("./utf8"),Ze=At("./compressions"),Ie=At("./support");function He(Oe,ce){this.options=Oe,this.loadOptions=ce}He.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(Oe){var ce,Y;if(Oe.skip(22),this.fileNameLength=Oe.readInt(2),Y=Oe.readInt(2),this.fileName=Oe.readData(this.fileNameLength),Oe.skip(Y),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(ce=function(K){for(var ue in Ze)if(Object.prototype.hasOwnProperty.call(Ze,ue)&&Ze[ue].magic===K)return Ze[ue];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+L.pretty(this.compressionMethod)+" unknown (inner file : "+L.transformTo("string",this.fileName)+")");this.decompressed=new ye(this.compressedSize,this.uncompressedSize,this.crc32,ce,Oe.readData(this.compressedSize))},readCentralPart:function(Oe){this.versionMadeBy=Oe.readInt(2),Oe.skip(2),this.bitFlag=Oe.readInt(2),this.compressionMethod=Oe.readString(2),this.date=Oe.readDate(),this.crc32=Oe.readInt(4),this.compressedSize=Oe.readInt(4),this.uncompressedSize=Oe.readInt(4);var ce=Oe.readInt(2);if(this.extraFieldsLength=Oe.readInt(2),this.fileCommentLength=Oe.readInt(2),this.diskNumberStart=Oe.readInt(2),this.internalFileAttributes=Oe.readInt(2),this.externalFileAttributes=Oe.readInt(4),this.localHeaderOffset=Oe.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");Oe.skip(ce),this.readExtraFields(Oe),this.parseZIP64ExtraField(Oe),this.fileComment=Oe.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var Oe=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==Oe&&(this.dosPermissions=63&this.externalFileAttributes),3==Oe&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var Oe=M(this.extraFields[1].value);this.uncompressedSize===L.MAX_VALUE_32BITS&&(this.uncompressedSize=Oe.readInt(8)),this.compressedSize===L.MAX_VALUE_32BITS&&(this.compressedSize=Oe.readInt(8)),this.localHeaderOffset===L.MAX_VALUE_32BITS&&(this.localHeaderOffset=Oe.readInt(8)),this.diskNumberStart===L.MAX_VALUE_32BITS&&(this.diskNumberStart=Oe.readInt(4))}},readExtraFields:function(Oe){var ce,Y,K,ue=Oe.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});Oe.index+4<ue;)ce=Oe.readInt(2),Y=Oe.readInt(2),K=Oe.readData(Y),this.extraFields[ce]={id:ce,length:Y,value:K};Oe.setIndex(ue)},handleUTF8:function(){var Oe=Ie.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=je.utf8decode(this.fileName),this.fileCommentStr=je.utf8decode(this.fileComment);else{var ce=this.findExtraFieldUnicodePath();if(null!==ce)this.fileNameStr=ce;else{var Y=L.transformTo(Oe,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(Y)}var K=this.findExtraFieldUnicodeComment();if(null!==K)this.fileCommentStr=K;else{var ue=L.transformTo(Oe,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(ue)}}},findExtraFieldUnicodePath:function(){var Oe=this.extraFields[28789];if(Oe){var ce=M(Oe.value);return 1!==ce.readInt(1)||Be(this.fileName)!==ce.readInt(4)?null:je.utf8decode(ce.readData(Oe.length-5))}return null},findExtraFieldUnicodeComment:function(){var Oe=this.extraFields[25461];if(Oe){var ce=M(Oe.value);return 1!==ce.readInt(1)||Be(this.fileComment)!==ce.readInt(4)?null:je.utf8decode(ce.readData(Oe.length-5))}return null}},Ce.exports=He},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(At,Ce,ze){"use strict";function M(ce,Y,K){this.name=ce,this.dir=K.dir,this.date=K.date,this.comment=K.comment,this.unixPermissions=K.unixPermissions,this.dosPermissions=K.dosPermissions,this._data=Y,this._dataBinary=K.binary,this.options={compression:K.compression,compressionOptions:K.compressionOptions}}var L=At("./stream/StreamHelper"),ye=At("./stream/DataWorker"),Be=At("./utf8"),je=At("./compressedObject"),Ze=At("./stream/GenericWorker");M.prototype={internalStream:function(ce){var Y=null,K="string";try{if(!ce)throw new Error("No output type specified.");var ue="string"===(K=ce.toLowerCase())||"text"===K;"binarystring"!==K&&"text"!==K||(K="string"),Y=this._decompressWorker();var X=!this._dataBinary;X&&!ue&&(Y=Y.pipe(new Be.Utf8EncodeWorker)),!X&&ue&&(Y=Y.pipe(new Be.Utf8DecodeWorker))}catch(Z){(Y=new Ze("error")).error(Z)}return new L(Y,K,"")},async:function(ce,Y){return this.internalStream(ce).accumulate(Y)},nodeStream:function(ce,Y){return this.internalStream(ce||"nodebuffer").toNodejsStream(Y)},_compressWorker:function(ce,Y){if(this._data instanceof je&&this._data.compression.magic===ce.magic)return this._data.getCompressedWorker();var K=this._decompressWorker();return this._dataBinary||(K=K.pipe(new Be.Utf8EncodeWorker)),je.createWorkerFrom(K,ce,Y)},_decompressWorker:function(){return this._data instanceof je?this._data.getContentWorker():this._data instanceof Ze?this._data:new ye(this._data)}};for(var Ie=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],He=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},Oe=0;Oe<Ie.length;Oe++)M.prototype[Ie[Oe]]=He;Ce.exports=M},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(At,Ce,ze){(function(M){"use strict";var L,ye,Be=M.MutationObserver||M.WebKitMutationObserver;if(Be){var je=0,Ze=new Be(ce),Ie=M.document.createTextNode("");Ze.observe(Ie,{characterData:!0}),L=function(){Ie.data=je=++je%2}}else if(M.setImmediate||void 0===M.MessageChannel)L="document"in M&&"onreadystatechange"in M.document.createElement("script")?function(){var Y=M.document.createElement("script");Y.onreadystatechange=function(){ce(),Y.onreadystatechange=null,Y.parentNode.removeChild(Y),Y=null},M.document.documentElement.appendChild(Y)}:function(){setTimeout(ce,0)};else{var He=new M.MessageChannel;He.port1.onmessage=ce,L=function(){He.port2.postMessage(0)}}var Oe=[];function ce(){var Y,K;ye=!0;for(var ue=Oe.length;ue;){for(K=Oe,Oe=[],Y=-1;++Y<ue;)K[Y]();ue=Oe.length}ye=!1}Ce.exports=function(Y){1!==Oe.push(Y)||ye||L()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(At,Ce,ze){"use strict";var M=At("immediate");function L(){}var ye={},Be=["REJECTED"],je=["FULFILLED"],Ze=["PENDING"];function Ie(ue){if("function"!=typeof ue)throw new TypeError("resolver must be a function");this.state=Ze,this.queue=[],this.outcome=void 0,ue!==L&&Y(this,ue)}function He(ue,X,Z){this.promise=ue,"function"==typeof X&&(this.onFulfilled=X,this.callFulfilled=this.otherCallFulfilled),"function"==typeof Z&&(this.onRejected=Z,this.callRejected=this.otherCallRejected)}function Oe(ue,X,Z){M(function(){var O;try{O=X(Z)}catch(P){return ye.reject(ue,P)}O===ue?ye.reject(ue,new TypeError("Cannot resolve promise with itself")):ye.resolve(ue,O)})}function ce(ue){var X=ue&&ue.then;if(ue&&("object"==typeof ue||"function"==typeof ue)&&"function"==typeof X)return function(){X.apply(ue,arguments)}}function Y(ue,X){var Z=!1;function O(p){Z||(Z=!0,ye.reject(ue,p))}function P(p){Z||(Z=!0,ye.resolve(ue,p))}var x=K(function(){X(P,O)});"error"===x.status&&O(x.value)}function K(ue,X){var Z={};try{Z.value=ue(X),Z.status="success"}catch(O){Z.status="error",Z.value=O}return Z}(Ce.exports=Ie).prototype.finally=function(ue){if("function"!=typeof ue)return this;var X=this.constructor;return this.then(function(Z){return X.resolve(ue()).then(function(){return Z})},function(Z){return X.resolve(ue()).then(function(){throw Z})})},Ie.prototype.catch=function(ue){return this.then(null,ue)},Ie.prototype.then=function(ue,X){if("function"!=typeof ue&&this.state===je||"function"!=typeof X&&this.state===Be)return this;var Z=new this.constructor(L);return this.state!==Ze?Oe(Z,this.state===je?ue:X,this.outcome):this.queue.push(new He(Z,ue,X)),Z},He.prototype.callFulfilled=function(ue){ye.resolve(this.promise,ue)},He.prototype.otherCallFulfilled=function(ue){Oe(this.promise,this.onFulfilled,ue)},He.prototype.callRejected=function(ue){ye.reject(this.promise,ue)},He.prototype.otherCallRejected=function(ue){Oe(this.promise,this.onRejected,ue)},ye.resolve=function(ue,X){var Z=K(ce,X);if("error"===Z.status)return ye.reject(ue,Z.value);var O=Z.value;if(O)Y(ue,O);else{ue.state=je,ue.outcome=X;for(var P=-1,x=ue.queue.length;++P<x;)ue.queue[P].callFulfilled(X)}return ue},ye.reject=function(ue,X){ue.state=Be,ue.outcome=X;for(var Z=-1,O=ue.queue.length;++Z<O;)ue.queue[Z].callRejected(X);return ue},Ie.resolve=function(ue){return ue instanceof this?ue:ye.resolve(new this(L),ue)},Ie.reject=function(ue){var X=new this(L);return ye.reject(X,ue)},Ie.all=function(ue){var X=this;if("[object Array]"!==Object.prototype.toString.call(ue))return this.reject(new TypeError("must be an array"));var Z=ue.length,O=!1;if(!Z)return this.resolve([]);for(var P=new Array(Z),x=0,p=-1,w=new this(L);++p<Z;)m(ue[p],p);return w;function m(_,F){X.resolve(_).then(function(R){P[F]=R,++x!==Z||O||(O=!0,ye.resolve(w,P))},function(R){O||(O=!0,ye.reject(w,R))})}},Ie.race=function(ue){if("[object Array]"!==Object.prototype.toString.call(ue))return this.reject(new TypeError("must be an array"));var Z=ue.length,O=!1;if(!Z)return this.resolve([]);for(var P=-1,x=new this(L);++P<Z;)this.resolve(ue[P]).then(function(w){O||(O=!0,ye.resolve(x,w))},function(w){O||(O=!0,ye.reject(x,w))});return x}},{immediate:36}],38:[function(At,Ce,ze){"use strict";var M={};(0,At("./lib/utils/common").assign)(M,At("./lib/deflate"),At("./lib/inflate"),At("./lib/zlib/constants")),Ce.exports=M},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(At,Ce,ze){"use strict";var M=At("./zlib/deflate"),L=At("./utils/common"),ye=At("./utils/strings"),Be=At("./zlib/messages"),je=At("./zlib/zstream"),Ze=Object.prototype.toString,Ie=0,He=-1,Oe=0,ce=8;function Y(ue){if(!(this instanceof Y))return new Y(ue);this.options=L.assign({level:He,method:ce,chunkSize:16384,windowBits:15,memLevel:8,strategy:Oe,to:""},ue||{});var X=this.options;X.raw&&0<X.windowBits?X.windowBits=-X.windowBits:X.gzip&&0<X.windowBits&&X.windowBits<16&&(X.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new je,this.strm.avail_out=0;var Z=M.deflateInit2(this.strm,X.level,X.method,X.windowBits,X.memLevel,X.strategy);if(Z!==Ie)throw new Error(Be[Z]);if(X.header&&M.deflateSetHeader(this.strm,X.header),X.dictionary){var O;if(O="string"==typeof X.dictionary?ye.string2buf(X.dictionary):"[object ArrayBuffer]"===Ze.call(X.dictionary)?new Uint8Array(X.dictionary):X.dictionary,(Z=M.deflateSetDictionary(this.strm,O))!==Ie)throw new Error(Be[Z]);this._dict_set=!0}}function K(ue,X){var Z=new Y(X);if(Z.push(ue,!0),Z.err)throw Z.msg||Be[Z.err];return Z.result}Y.prototype.push=function(ue,X){var Z,O,P=this.strm,x=this.options.chunkSize;if(this.ended)return!1;O=X===~~X?X:!0===X?4:0,P.input="string"==typeof ue?ye.string2buf(ue):"[object ArrayBuffer]"===Ze.call(ue)?new Uint8Array(ue):ue,P.next_in=0,P.avail_in=P.input.length;do{if(0===P.avail_out&&(P.output=new L.Buf8(x),P.next_out=0,P.avail_out=x),1!==(Z=M.deflate(P,O))&&Z!==Ie)return this.onEnd(Z),!(this.ended=!0);0!==P.avail_out&&(0!==P.avail_in||4!==O&&2!==O)||this.onData("string"===this.options.to?ye.buf2binstring(L.shrinkBuf(P.output,P.next_out)):L.shrinkBuf(P.output,P.next_out))}while((0<P.avail_in||0===P.avail_out)&&1!==Z);return 4===O?(Z=M.deflateEnd(this.strm),this.onEnd(Z),this.ended=!0,Z===Ie):2!==O||(this.onEnd(Ie),!(P.avail_out=0))},Y.prototype.onData=function(ue){this.chunks.push(ue)},Y.prototype.onEnd=function(ue){ue===Ie&&(this.result="string"===this.options.to?this.chunks.join(""):L.flattenChunks(this.chunks)),this.chunks=[],this.err=ue,this.msg=this.strm.msg},ze.Deflate=Y,ze.deflate=K,ze.deflateRaw=function(ue,X){return(X=X||{}).raw=!0,K(ue,X)},ze.gzip=function(ue,X){return(X=X||{}).gzip=!0,K(ue,X)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(At,Ce,ze){"use strict";var M=At("./zlib/inflate"),L=At("./utils/common"),ye=At("./utils/strings"),Be=At("./zlib/constants"),je=At("./zlib/messages"),Ze=At("./zlib/zstream"),Ie=At("./zlib/gzheader"),He=Object.prototype.toString;function Oe(Y){if(!(this instanceof Oe))return new Oe(Y);this.options=L.assign({chunkSize:16384,windowBits:0,to:""},Y||{});var K=this.options;K.raw&&0<=K.windowBits&&K.windowBits<16&&(K.windowBits=-K.windowBits,0===K.windowBits&&(K.windowBits=-15)),!(0<=K.windowBits&&K.windowBits<16)||Y&&Y.windowBits||(K.windowBits+=32),15<K.windowBits&&K.windowBits<48&&!(15&K.windowBits)&&(K.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ze,this.strm.avail_out=0;var ue=M.inflateInit2(this.strm,K.windowBits);if(ue!==Be.Z_OK)throw new Error(je[ue]);this.header=new Ie,M.inflateGetHeader(this.strm,this.header)}function ce(Y,K){var ue=new Oe(K);if(ue.push(Y,!0),ue.err)throw ue.msg||je[ue.err];return ue.result}Oe.prototype.push=function(Y,K){var ue,X,Z,O,P,x,p=this.strm,w=this.options.chunkSize,m=this.options.dictionary,_=!1;if(this.ended)return!1;X=K===~~K?K:!0===K?Be.Z_FINISH:Be.Z_NO_FLUSH,p.input="string"==typeof Y?ye.binstring2buf(Y):"[object ArrayBuffer]"===He.call(Y)?new Uint8Array(Y):Y,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new L.Buf8(w),p.next_out=0,p.avail_out=w),(ue=M.inflate(p,Be.Z_NO_FLUSH))===Be.Z_NEED_DICT&&m&&(x="string"==typeof m?ye.string2buf(m):"[object ArrayBuffer]"===He.call(m)?new Uint8Array(m):m,ue=M.inflateSetDictionary(this.strm,x)),ue===Be.Z_BUF_ERROR&&!0===_&&(ue=Be.Z_OK,_=!1),ue!==Be.Z_STREAM_END&&ue!==Be.Z_OK)return this.onEnd(ue),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&ue!==Be.Z_STREAM_END&&(0!==p.avail_in||X!==Be.Z_FINISH&&X!==Be.Z_SYNC_FLUSH)||("string"===this.options.to?(Z=ye.utf8border(p.output,p.next_out),O=p.next_out-Z,P=ye.buf2string(p.output,Z),p.next_out=O,p.avail_out=w-O,O&&L.arraySet(p.output,p.output,Z,O,0),this.onData(P)):this.onData(L.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(_=!0)}while((0<p.avail_in||0===p.avail_out)&&ue!==Be.Z_STREAM_END);return ue===Be.Z_STREAM_END&&(X=Be.Z_FINISH),X===Be.Z_FINISH?(ue=M.inflateEnd(this.strm),this.onEnd(ue),this.ended=!0,ue===Be.Z_OK):X!==Be.Z_SYNC_FLUSH||(this.onEnd(Be.Z_OK),!(p.avail_out=0))},Oe.prototype.onData=function(Y){this.chunks.push(Y)},Oe.prototype.onEnd=function(Y){Y===Be.Z_OK&&(this.result="string"===this.options.to?this.chunks.join(""):L.flattenChunks(this.chunks)),this.chunks=[],this.err=Y,this.msg=this.strm.msg},ze.Inflate=Oe,ze.inflate=ce,ze.inflateRaw=function(Y,K){return(K=K||{}).raw=!0,ce(Y,K)},ze.ungzip=ce},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(At,Ce,ze){"use strict";var M=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";ze.assign=function(Be){for(var je=Array.prototype.slice.call(arguments,1);je.length;){var Ze=je.shift();if(Ze){if("object"!=typeof Ze)throw new TypeError(Ze+"must be non-object");for(var Ie in Ze)Ze.hasOwnProperty(Ie)&&(Be[Ie]=Ze[Ie])}}return Be},ze.shrinkBuf=function(Be,je){return Be.length===je?Be:Be.subarray?Be.subarray(0,je):(Be.length=je,Be)};var L={arraySet:function(Be,je,Ze,Ie,He){if(je.subarray&&Be.subarray)Be.set(je.subarray(Ze,Ze+Ie),He);else for(var Oe=0;Oe<Ie;Oe++)Be[He+Oe]=je[Ze+Oe]},flattenChunks:function(Be){var je,Ze,Ie,He,Oe,ce;for(je=Ie=0,Ze=Be.length;je<Ze;je++)Ie+=Be[je].length;for(ce=new Uint8Array(Ie),je=He=0,Ze=Be.length;je<Ze;je++)ce.set(Oe=Be[je],He),He+=Oe.length;return ce}},ye={arraySet:function(Be,je,Ze,Ie,He){for(var Oe=0;Oe<Ie;Oe++)Be[He+Oe]=je[Ze+Oe]},flattenChunks:function(Be){return[].concat.apply([],Be)}};ze.setTyped=function(Be){Be?(ze.Buf8=Uint8Array,ze.Buf16=Uint16Array,ze.Buf32=Int32Array,ze.assign(ze,L)):(ze.Buf8=Array,ze.Buf16=Array,ze.Buf32=Array,ze.assign(ze,ye))},ze.setTyped(M)},{}],42:[function(At,Ce,ze){"use strict";var M=At("./common"),L=!0,ye=!0;try{String.fromCharCode.apply(null,[0])}catch{L=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ye=!1}for(var Be=new M.Buf8(256),je=0;je<256;je++)Be[je]=252<=je?6:248<=je?5:240<=je?4:224<=je?3:192<=je?2:1;function Ze(Ie,He){if(He<65537&&(Ie.subarray&&ye||!Ie.subarray&&L))return String.fromCharCode.apply(null,M.shrinkBuf(Ie,He));for(var Oe="",ce=0;ce<He;ce++)Oe+=String.fromCharCode(Ie[ce]);return Oe}Be[254]=Be[254]=1,ze.string2buf=function(Ie){var He,Oe,ce,Y,K,ue=Ie.length,X=0;for(Y=0;Y<ue;Y++)55296==(64512&(Oe=Ie.charCodeAt(Y)))&&Y+1<ue&&56320==(64512&(ce=Ie.charCodeAt(Y+1)))&&(Oe=65536+(Oe-55296<<10)+(ce-56320),Y++),X+=Oe<128?1:Oe<2048?2:Oe<65536?3:4;for(He=new M.Buf8(X),Y=K=0;K<X;Y++)55296==(64512&(Oe=Ie.charCodeAt(Y)))&&Y+1<ue&&56320==(64512&(ce=Ie.charCodeAt(Y+1)))&&(Oe=65536+(Oe-55296<<10)+(ce-56320),Y++),Oe<128?He[K++]=Oe:(Oe<2048?He[K++]=192|Oe>>>6:(Oe<65536?He[K++]=224|Oe>>>12:(He[K++]=240|Oe>>>18,He[K++]=128|Oe>>>12&63),He[K++]=128|Oe>>>6&63),He[K++]=128|63&Oe);return He},ze.buf2binstring=function(Ie){return Ze(Ie,Ie.length)},ze.binstring2buf=function(Ie){for(var He=new M.Buf8(Ie.length),Oe=0,ce=He.length;Oe<ce;Oe++)He[Oe]=Ie.charCodeAt(Oe);return He},ze.buf2string=function(Ie,He){var Oe,ce,Y,K,ue=He||Ie.length,X=new Array(2*ue);for(Oe=ce=0;Oe<ue;)if((Y=Ie[Oe++])<128)X[ce++]=Y;else if(4<(K=Be[Y]))X[ce++]=65533,Oe+=K-1;else{for(Y&=2===K?31:3===K?15:7;1<K&&Oe<ue;)Y=Y<<6|63&Ie[Oe++],K--;1<K?X[ce++]=65533:Y<65536?X[ce++]=Y:(X[ce++]=55296|(Y-=65536)>>10&1023,X[ce++]=56320|1023&Y)}return Ze(X,ce)},ze.utf8border=function(Ie,He){var Oe;for((He=He||Ie.length)>Ie.length&&(He=Ie.length),Oe=He-1;0<=Oe&&128==(192&Ie[Oe]);)Oe--;return Oe<0||0===Oe?He:Oe+Be[Ie[Oe]]>He?Oe:He}},{"./common":41}],43:[function(At,Ce,ze){"use strict";Ce.exports=function(M,L,ye,Be){for(var je=65535&M|0,Ze=M>>>16&65535|0,Ie=0;0!==ye;){for(ye-=Ie=2e3<ye?2e3:ye;Ze=Ze+(je=je+L[Be++]|0)|0,--Ie;);je%=65521,Ze%=65521}return je|Ze<<16|0}},{}],44:[function(At,Ce,ze){"use strict";Ce.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(At,Ce,ze){"use strict";var M=function(){for(var L,ye=[],Be=0;Be<256;Be++){L=Be;for(var je=0;je<8;je++)L=1&L?3988292384^L>>>1:L>>>1;ye[Be]=L}return ye}();Ce.exports=function(L,ye,Be,je){var Ze=M,Ie=je+Be;L^=-1;for(var He=je;He<Ie;He++)L=L>>>8^Ze[255&(L^ye[He])];return-1^L}},{}],46:[function(At,Ce,ze){"use strict";var M,L=At("../utils/common"),ye=At("./trees"),Be=At("./adler32"),je=At("./crc32"),Ze=At("./messages"),Ie=0,He=4,Oe=0,ce=-2,Y=-1,K=4,ue=2,X=8,Z=9,O=286,P=30,x=19,p=2*O+1,w=15,m=3,_=258,F=_+m+1,R=42,q=113,T=1,$=2,J=3,ie=4;function Me(ve,Je){return ve.msg=Ze[Je],Je}function de(ve){return(ve<<1)-(4<ve?9:0)}function fe(ve){for(var Je=ve.length;0<=--Je;)ve[Je]=0}function I(ve){var Je=ve.state,ct=Je.pending;ct>ve.avail_out&&(ct=ve.avail_out),0!==ct&&(L.arraySet(ve.output,Je.pending_buf,Je.pending_out,ct,ve.next_out),ve.next_out+=ct,Je.pending_out+=ct,ve.total_out+=ct,ve.avail_out-=ct,Je.pending-=ct,0===Je.pending&&(Je.pending_out=0))}function U(ve,Je){ye._tr_flush_block(ve,0<=ve.block_start?ve.block_start:-1,ve.strstart-ve.block_start,Je),ve.block_start=ve.strstart,I(ve.strm)}function z(ve,Je){ve.pending_buf[ve.pending++]=Je}function le(ve,Je){ve.pending_buf[ve.pending++]=Je>>>8&255,ve.pending_buf[ve.pending++]=255&Je}function D(ve,Je){var ct,We,Ke=ve.max_chain_length,ft=ve.strstart,zt=ve.prev_length,Zt=ve.nice_match,Mt=ve.strstart>ve.w_size-F?ve.strstart-(ve.w_size-F):0,Ot=ve.window,sn=ve.w_mask,wn=ve.prev,Ln=ve.strstart+_,En=Ot[ft+zt-1],$n=Ot[ft+zt];ve.prev_length>=ve.good_match&&(Ke>>=2),Zt>ve.lookahead&&(Zt=ve.lookahead);do{if(Ot[(ct=Je)+zt]===$n&&Ot[ct+zt-1]===En&&Ot[ct]===Ot[ft]&&Ot[++ct]===Ot[ft+1]){ft+=2,ct++;do{}while(Ot[++ft]===Ot[++ct]&&Ot[++ft]===Ot[++ct]&&Ot[++ft]===Ot[++ct]&&Ot[++ft]===Ot[++ct]&&Ot[++ft]===Ot[++ct]&&Ot[++ft]===Ot[++ct]&&Ot[++ft]===Ot[++ct]&&Ot[++ft]===Ot[++ct]&&ft<Ln);if(We=_-(Ln-ft),ft=Ln-_,zt<We){if(ve.match_start=Je,Zt<=(zt=We))break;En=Ot[ft+zt-1],$n=Ot[ft+zt]}}}while((Je=wn[Je&sn])>Mt&&0!=--Ke);return zt<=ve.lookahead?zt:ve.lookahead}function oe(ve){var Je,ct,We,Ke,ft,zt,Zt,Mt,Ot,sn,wn=ve.w_size;do{if(Ke=ve.window_size-ve.lookahead-ve.strstart,ve.strstart>=wn+(wn-F)){for(L.arraySet(ve.window,ve.window,wn,wn,0),ve.match_start-=wn,ve.strstart-=wn,ve.block_start-=wn,Je=ct=ve.hash_size;We=ve.head[--Je],ve.head[Je]=wn<=We?We-wn:0,--ct;);for(Je=ct=wn;We=ve.prev[--Je],ve.prev[Je]=wn<=We?We-wn:0,--ct;);Ke+=wn}if(0===ve.strm.avail_in)break;if(Zt=ve.window,Mt=ve.strstart+ve.lookahead,sn=void 0,(Ot=Ke)<(sn=(zt=ve.strm).avail_in)&&(sn=Ot),ct=0===sn?0:(zt.avail_in-=sn,L.arraySet(Zt,zt.input,zt.next_in,sn,Mt),1===zt.state.wrap?zt.adler=Be(zt.adler,Zt,sn,Mt):2===zt.state.wrap&&(zt.adler=je(zt.adler,Zt,sn,Mt)),zt.next_in+=sn,zt.total_in+=sn,sn),ve.lookahead+=ct,ve.lookahead+ve.insert>=m)for(ve.ins_h=ve.window[ft=ve.strstart-ve.insert],ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ft+1])&ve.hash_mask;ve.insert&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ft+m-1])&ve.hash_mask,ve.prev[ft&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ft,ft++,ve.insert--,!(ve.lookahead+ve.insert<m)););}while(ve.lookahead<F&&0!==ve.strm.avail_in)}function _e(ve,Je){for(var ct,We;;){if(ve.lookahead<F){if(oe(ve),ve.lookahead<F&&Je===Ie)return T;if(0===ve.lookahead)break}if(ct=0,ve.lookahead>=m&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+m-1])&ve.hash_mask,ct=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),0!==ct&&ve.strstart-ct<=ve.w_size-F&&(ve.match_length=D(ve,ct)),ve.match_length>=m)if(We=ye._tr_tally(ve,ve.strstart-ve.match_start,ve.match_length-m),ve.lookahead-=ve.match_length,ve.match_length<=ve.max_lazy_match&&ve.lookahead>=m){for(ve.match_length--;ve.strstart++,ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+m-1])&ve.hash_mask,ct=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart,0!=--ve.match_length;);ve.strstart++}else ve.strstart+=ve.match_length,ve.match_length=0,ve.ins_h=ve.window[ve.strstart],ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+1])&ve.hash_mask;else We=ye._tr_tally(ve,0,ve.window[ve.strstart]),ve.lookahead--,ve.strstart++;if(We&&(U(ve,!1),0===ve.strm.avail_out))return T}return ve.insert=ve.strstart<m-1?ve.strstart:m-1,Je===He?(U(ve,!0),0===ve.strm.avail_out?J:ie):ve.last_lit&&(U(ve,!1),0===ve.strm.avail_out)?T:$}function Ee(ve,Je){for(var ct,We,Ke;;){if(ve.lookahead<F){if(oe(ve),ve.lookahead<F&&Je===Ie)return T;if(0===ve.lookahead)break}if(ct=0,ve.lookahead>=m&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+m-1])&ve.hash_mask,ct=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),ve.prev_length=ve.match_length,ve.prev_match=ve.match_start,ve.match_length=m-1,0!==ct&&ve.prev_length<ve.max_lazy_match&&ve.strstart-ct<=ve.w_size-F&&(ve.match_length=D(ve,ct),ve.match_length<=5&&(1===ve.strategy||ve.match_length===m&&4096<ve.strstart-ve.match_start)&&(ve.match_length=m-1)),ve.prev_length>=m&&ve.match_length<=ve.prev_length){for(Ke=ve.strstart+ve.lookahead-m,We=ye._tr_tally(ve,ve.strstart-1-ve.prev_match,ve.prev_length-m),ve.lookahead-=ve.prev_length-1,ve.prev_length-=2;++ve.strstart<=Ke&&(ve.ins_h=(ve.ins_h<<ve.hash_shift^ve.window[ve.strstart+m-1])&ve.hash_mask,ct=ve.prev[ve.strstart&ve.w_mask]=ve.head[ve.ins_h],ve.head[ve.ins_h]=ve.strstart),0!=--ve.prev_length;);if(ve.match_available=0,ve.match_length=m-1,ve.strstart++,We&&(U(ve,!1),0===ve.strm.avail_out))return T}else if(ve.match_available){if((We=ye._tr_tally(ve,0,ve.window[ve.strstart-1]))&&U(ve,!1),ve.strstart++,ve.lookahead--,0===ve.strm.avail_out)return T}else ve.match_available=1,ve.strstart++,ve.lookahead--}return ve.match_available&&(We=ye._tr_tally(ve,0,ve.window[ve.strstart-1]),ve.match_available=0),ve.insert=ve.strstart<m-1?ve.strstart:m-1,Je===He?(U(ve,!0),0===ve.strm.avail_out?J:ie):ve.last_lit&&(U(ve,!1),0===ve.strm.avail_out)?T:$}function Ve(ve,Je,ct,We,Ke){this.good_length=ve,this.max_lazy=Je,this.nice_length=ct,this.max_chain=We,this.func=Ke}function Qe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new L.Buf16(2*p),this.dyn_dtree=new L.Buf16(2*(2*P+1)),this.bl_tree=new L.Buf16(2*(2*x+1)),fe(this.dyn_ltree),fe(this.dyn_dtree),fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new L.Buf16(w+1),this.heap=new L.Buf16(2*O+1),fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new L.Buf16(2*O+1),fe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function et(ve){var Je;return ve&&ve.state?(ve.total_in=ve.total_out=0,ve.data_type=ue,(Je=ve.state).pending=0,Je.pending_out=0,Je.wrap<0&&(Je.wrap=-Je.wrap),Je.status=Je.wrap?R:q,ve.adler=2===Je.wrap?0:1,Je.last_flush=Ie,ye._tr_init(Je),Oe):Me(ve,ce)}function Tt(ve){var ct,Je=et(ve);return Je===Oe&&((ct=ve.state).window_size=2*ct.w_size,fe(ct.head),ct.max_lazy_match=M[ct.level].max_lazy,ct.good_match=M[ct.level].good_length,ct.nice_match=M[ct.level].nice_length,ct.max_chain_length=M[ct.level].max_chain,ct.strstart=0,ct.block_start=0,ct.lookahead=0,ct.insert=0,ct.match_length=ct.prev_length=m-1,ct.match_available=0,ct.ins_h=0),Je}function Bt(ve,Je,ct,We,Ke,ft){if(!ve)return ce;var zt=1;if(Je===Y&&(Je=6),We<0?(zt=0,We=-We):15<We&&(zt=2,We-=16),Ke<1||Z<Ke||ct!==X||We<8||15<We||Je<0||9<Je||ft<0||K<ft)return Me(ve,ce);8===We&&(We=9);var Zt=new Qe;return(ve.state=Zt).strm=ve,Zt.wrap=zt,Zt.gzhead=null,Zt.w_bits=We,Zt.w_size=1<<Zt.w_bits,Zt.w_mask=Zt.w_size-1,Zt.hash_bits=Ke+7,Zt.hash_size=1<<Zt.hash_bits,Zt.hash_mask=Zt.hash_size-1,Zt.hash_shift=~~((Zt.hash_bits+m-1)/m),Zt.window=new L.Buf8(2*Zt.w_size),Zt.head=new L.Buf16(Zt.hash_size),Zt.prev=new L.Buf16(Zt.w_size),Zt.lit_bufsize=1<<Ke+6,Zt.pending_buf_size=4*Zt.lit_bufsize,Zt.pending_buf=new L.Buf8(Zt.pending_buf_size),Zt.d_buf=1*Zt.lit_bufsize,Zt.l_buf=3*Zt.lit_bufsize,Zt.level=Je,Zt.strategy=ft,Zt.method=ct,Tt(ve)}M=[new Ve(0,0,0,0,function(ve,Je){var ct=65535;for(ct>ve.pending_buf_size-5&&(ct=ve.pending_buf_size-5);;){if(ve.lookahead<=1){if(oe(ve),0===ve.lookahead&&Je===Ie)return T;if(0===ve.lookahead)break}ve.strstart+=ve.lookahead,ve.lookahead=0;var We=ve.block_start+ct;if((0===ve.strstart||ve.strstart>=We)&&(ve.lookahead=ve.strstart-We,ve.strstart=We,U(ve,!1),0===ve.strm.avail_out)||ve.strstart-ve.block_start>=ve.w_size-F&&(U(ve,!1),0===ve.strm.avail_out))return T}return ve.insert=0,Je===He?(U(ve,!0),0===ve.strm.avail_out?J:ie):(ve.strstart>ve.block_start&&U(ve,!1),T)}),new Ve(4,4,8,4,_e),new Ve(4,5,16,8,_e),new Ve(4,6,32,32,_e),new Ve(4,4,16,16,Ee),new Ve(8,16,32,32,Ee),new Ve(8,16,128,128,Ee),new Ve(8,32,128,256,Ee),new Ve(32,128,258,1024,Ee),new Ve(32,258,258,4096,Ee)],ze.deflateInit=function(ve,Je){return Bt(ve,Je,X,15,8,0)},ze.deflateInit2=Bt,ze.deflateReset=Tt,ze.deflateResetKeep=et,ze.deflateSetHeader=function(ve,Je){return ve&&ve.state?2!==ve.state.wrap?ce:(ve.state.gzhead=Je,Oe):ce},ze.deflate=function(ve,Je){var ct,We,Ke,ft;if(!ve||!ve.state||5<Je||Je<0)return ve?Me(ve,ce):ce;if(We=ve.state,!ve.output||!ve.input&&0!==ve.avail_in||666===We.status&&Je!==He)return Me(ve,0===ve.avail_out?-5:ce);if(We.strm=ve,ct=We.last_flush,We.last_flush=Je,We.status===R)if(2===We.wrap)ve.adler=0,z(We,31),z(We,139),z(We,8),We.gzhead?(z(We,(We.gzhead.text?1:0)+(We.gzhead.hcrc?2:0)+(We.gzhead.extra?4:0)+(We.gzhead.name?8:0)+(We.gzhead.comment?16:0)),z(We,255&We.gzhead.time),z(We,We.gzhead.time>>8&255),z(We,We.gzhead.time>>16&255),z(We,We.gzhead.time>>24&255),z(We,9===We.level?2:2<=We.strategy||We.level<2?4:0),z(We,255&We.gzhead.os),We.gzhead.extra&&We.gzhead.extra.length&&(z(We,255&We.gzhead.extra.length),z(We,We.gzhead.extra.length>>8&255)),We.gzhead.hcrc&&(ve.adler=je(ve.adler,We.pending_buf,We.pending,0)),We.gzindex=0,We.status=69):(z(We,0),z(We,0),z(We,0),z(We,0),z(We,0),z(We,9===We.level?2:2<=We.strategy||We.level<2?4:0),z(We,3),We.status=q);else{var zt=X+(We.w_bits-8<<4)<<8;zt|=(2<=We.strategy||We.level<2?0:We.level<6?1:6===We.level?2:3)<<6,0!==We.strstart&&(zt|=32),zt+=31-zt%31,We.status=q,le(We,zt),0!==We.strstart&&(le(We,ve.adler>>>16),le(We,65535&ve.adler)),ve.adler=1}if(69===We.status)if(We.gzhead.extra){for(Ke=We.pending;We.gzindex<(65535&We.gzhead.extra.length)&&(We.pending!==We.pending_buf_size||(We.gzhead.hcrc&&We.pending>Ke&&(ve.adler=je(ve.adler,We.pending_buf,We.pending-Ke,Ke)),I(ve),Ke=We.pending,We.pending!==We.pending_buf_size));)z(We,255&We.gzhead.extra[We.gzindex]),We.gzindex++;We.gzhead.hcrc&&We.pending>Ke&&(ve.adler=je(ve.adler,We.pending_buf,We.pending-Ke,Ke)),We.gzindex===We.gzhead.extra.length&&(We.gzindex=0,We.status=73)}else We.status=73;if(73===We.status)if(We.gzhead.name){Ke=We.pending;do{if(We.pending===We.pending_buf_size&&(We.gzhead.hcrc&&We.pending>Ke&&(ve.adler=je(ve.adler,We.pending_buf,We.pending-Ke,Ke)),I(ve),Ke=We.pending,We.pending===We.pending_buf_size)){ft=1;break}ft=We.gzindex<We.gzhead.name.length?255&We.gzhead.name.charCodeAt(We.gzindex++):0,z(We,ft)}while(0!==ft);We.gzhead.hcrc&&We.pending>Ke&&(ve.adler=je(ve.adler,We.pending_buf,We.pending-Ke,Ke)),0===ft&&(We.gzindex=0,We.status=91)}else We.status=91;if(91===We.status)if(We.gzhead.comment){Ke=We.pending;do{if(We.pending===We.pending_buf_size&&(We.gzhead.hcrc&&We.pending>Ke&&(ve.adler=je(ve.adler,We.pending_buf,We.pending-Ke,Ke)),I(ve),Ke=We.pending,We.pending===We.pending_buf_size)){ft=1;break}ft=We.gzindex<We.gzhead.comment.length?255&We.gzhead.comment.charCodeAt(We.gzindex++):0,z(We,ft)}while(0!==ft);We.gzhead.hcrc&&We.pending>Ke&&(ve.adler=je(ve.adler,We.pending_buf,We.pending-Ke,Ke)),0===ft&&(We.status=103)}else We.status=103;if(103===We.status&&(We.gzhead.hcrc?(We.pending+2>We.pending_buf_size&&I(ve),We.pending+2<=We.pending_buf_size&&(z(We,255&ve.adler),z(We,ve.adler>>8&255),ve.adler=0,We.status=q)):We.status=q),0!==We.pending){if(I(ve),0===ve.avail_out)return We.last_flush=-1,Oe}else if(0===ve.avail_in&&de(Je)<=de(ct)&&Je!==He)return Me(ve,-5);if(666===We.status&&0!==ve.avail_in)return Me(ve,-5);if(0!==ve.avail_in||0!==We.lookahead||Je!==Ie&&666!==We.status){var Zt=2===We.strategy?function(Mt,Ot){for(var sn;;){if(0===Mt.lookahead&&(oe(Mt),0===Mt.lookahead)){if(Ot===Ie)return T;break}if(Mt.match_length=0,sn=ye._tr_tally(Mt,0,Mt.window[Mt.strstart]),Mt.lookahead--,Mt.strstart++,sn&&(U(Mt,!1),0===Mt.strm.avail_out))return T}return Mt.insert=0,Ot===He?(U(Mt,!0),0===Mt.strm.avail_out?J:ie):Mt.last_lit&&(U(Mt,!1),0===Mt.strm.avail_out)?T:$}(We,Je):3===We.strategy?function(Mt,Ot){for(var sn,wn,Ln,En,$n=Mt.window;;){if(Mt.lookahead<=_){if(oe(Mt),Mt.lookahead<=_&&Ot===Ie)return T;if(0===Mt.lookahead)break}if(Mt.match_length=0,Mt.lookahead>=m&&0<Mt.strstart&&(wn=$n[Ln=Mt.strstart-1])===$n[++Ln]&&wn===$n[++Ln]&&wn===$n[++Ln]){En=Mt.strstart+_;do{}while(wn===$n[++Ln]&&wn===$n[++Ln]&&wn===$n[++Ln]&&wn===$n[++Ln]&&wn===$n[++Ln]&&wn===$n[++Ln]&&wn===$n[++Ln]&&wn===$n[++Ln]&&Ln<En);Mt.match_length=_-(En-Ln),Mt.match_length>Mt.lookahead&&(Mt.match_length=Mt.lookahead)}if(Mt.match_length>=m?(sn=ye._tr_tally(Mt,1,Mt.match_length-m),Mt.lookahead-=Mt.match_length,Mt.strstart+=Mt.match_length,Mt.match_length=0):(sn=ye._tr_tally(Mt,0,Mt.window[Mt.strstart]),Mt.lookahead--,Mt.strstart++),sn&&(U(Mt,!1),0===Mt.strm.avail_out))return T}return Mt.insert=0,Ot===He?(U(Mt,!0),0===Mt.strm.avail_out?J:ie):Mt.last_lit&&(U(Mt,!1),0===Mt.strm.avail_out)?T:$}(We,Je):M[We.level].func(We,Je);if(Zt!==J&&Zt!==ie||(We.status=666),Zt===T||Zt===J)return 0===ve.avail_out&&(We.last_flush=-1),Oe;if(Zt===$&&(1===Je?ye._tr_align(We):5!==Je&&(ye._tr_stored_block(We,0,0,!1),3===Je&&(fe(We.head),0===We.lookahead&&(We.strstart=0,We.block_start=0,We.insert=0))),I(ve),0===ve.avail_out))return We.last_flush=-1,Oe}return Je!==He?Oe:We.wrap<=0?1:(2===We.wrap?(z(We,255&ve.adler),z(We,ve.adler>>8&255),z(We,ve.adler>>16&255),z(We,ve.adler>>24&255),z(We,255&ve.total_in),z(We,ve.total_in>>8&255),z(We,ve.total_in>>16&255),z(We,ve.total_in>>24&255)):(le(We,ve.adler>>>16),le(We,65535&ve.adler)),I(ve),0<We.wrap&&(We.wrap=-We.wrap),0!==We.pending?Oe:1)},ze.deflateEnd=function(ve){var Je;return ve&&ve.state?(Je=ve.state.status)!==R&&69!==Je&&73!==Je&&91!==Je&&103!==Je&&Je!==q&&666!==Je?Me(ve,ce):(ve.state=null,Je===q?Me(ve,-3):Oe):ce},ze.deflateSetDictionary=function(ve,Je){var ct,We,Ke,ft,zt,Zt,Mt,Ot,sn=Je.length;if(!ve||!ve.state||2===(ft=(ct=ve.state).wrap)||1===ft&&ct.status!==R||ct.lookahead)return ce;for(1===ft&&(ve.adler=Be(ve.adler,Je,sn,0)),ct.wrap=0,sn>=ct.w_size&&(0===ft&&(fe(ct.head),ct.strstart=0,ct.block_start=0,ct.insert=0),Ot=new L.Buf8(ct.w_size),L.arraySet(Ot,Je,sn-ct.w_size,ct.w_size,0),Je=Ot,sn=ct.w_size),zt=ve.avail_in,Zt=ve.next_in,Mt=ve.input,ve.avail_in=sn,ve.next_in=0,ve.input=Je,oe(ct);ct.lookahead>=m;){for(We=ct.strstart,Ke=ct.lookahead-(m-1);ct.ins_h=(ct.ins_h<<ct.hash_shift^ct.window[We+m-1])&ct.hash_mask,ct.prev[We&ct.w_mask]=ct.head[ct.ins_h],ct.head[ct.ins_h]=We,We++,--Ke;);ct.strstart=We,ct.lookahead=m-1,oe(ct)}return ct.strstart+=ct.lookahead,ct.block_start=ct.strstart,ct.insert=ct.lookahead,ct.lookahead=0,ct.match_length=ct.prev_length=m-1,ct.match_available=0,ve.next_in=Zt,ve.input=Mt,ve.avail_in=zt,ct.wrap=ft,Oe},ze.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(At,Ce,ze){"use strict";Ce.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(At,Ce,ze){"use strict";Ce.exports=function(M,L){var ye,Be,je,Ze,Ie,He,Oe,ce,Y,K,ue,X,Z,O,P,x,p,w,m,_,F,R,q,T,$;T=M.input,je=(Be=M.next_in)+(M.avail_in-5),$=M.output,Ie=(Ze=M.next_out)-(L-M.avail_out),He=Ze+(M.avail_out-257),Oe=(ye=M.state).dmax,ce=ye.wsize,Y=ye.whave,K=ye.wnext,ue=ye.window,X=ye.hold,Z=ye.bits,O=ye.lencode,P=ye.distcode,x=(1<<ye.lenbits)-1,p=(1<<ye.distbits)-1;e:do{Z<15&&(X+=T[Be++]<<Z,X+=T[Be++]<<(Z+=8),Z+=8),w=O[X&x];t:for(;;){if(X>>>=m=w>>>24,Z-=m,0==(m=w>>>16&255))$[Ze++]=65535&w;else{if(!(16&m)){if(!(64&m)){w=O[(65535&w)+(X&(1<<m)-1)];continue t}if(32&m){ye.mode=12;break e}M.msg="invalid literal/length code",ye.mode=30;break e}_=65535&w,(m&=15)&&(Z<m&&(X+=T[Be++]<<Z,Z+=8),_+=X&(1<<m)-1,X>>>=m,Z-=m),Z<15&&(X+=T[Be++]<<Z,X+=T[Be++]<<(Z+=8),Z+=8),w=P[X&p];n:for(;;){if(X>>>=m=w>>>24,Z-=m,!(16&(m=w>>>16&255))){if(!(64&m)){w=P[(65535&w)+(X&(1<<m)-1)];continue n}M.msg="invalid distance code",ye.mode=30;break e}if(F=65535&w,Z<(m&=15)&&(X+=T[Be++]<<Z,(Z+=8)<m&&(X+=T[Be++]<<Z,Z+=8)),Oe<(F+=X&(1<<m)-1)){M.msg="invalid distance too far back",ye.mode=30;break e}if(X>>>=m,Z-=m,(m=Ze-Ie)<F){if(Y<(m=F-m)&&ye.sane){M.msg="invalid distance too far back",ye.mode=30;break e}if(q=ue,(R=0)===K){if(R+=ce-m,m<_){for(_-=m;$[Ze++]=ue[R++],--m;);R=Ze-F,q=$}}else if(K<m){if(R+=ce+K-m,(m-=K)<_){for(_-=m;$[Ze++]=ue[R++],--m;);if(R=0,K<_){for(_-=m=K;$[Ze++]=ue[R++],--m;);R=Ze-F,q=$}}}else if(R+=K-m,m<_){for(_-=m;$[Ze++]=ue[R++],--m;);R=Ze-F,q=$}for(;2<_;)$[Ze++]=q[R++],$[Ze++]=q[R++],$[Ze++]=q[R++],_-=3;_&&($[Ze++]=q[R++],1<_&&($[Ze++]=q[R++]))}else{for(R=Ze-F;$[Ze++]=$[R++],$[Ze++]=$[R++],$[Ze++]=$[R++],2<(_-=3););_&&($[Ze++]=$[R++],1<_&&($[Ze++]=$[R++]))}break}}break}}while(Be<je&&Ze<He);Be-=_=Z>>3,X&=(1<<(Z-=_<<3))-1,M.next_in=Be,M.next_out=Ze,M.avail_in=Be<je?je-Be+5:5-(Be-je),M.avail_out=Ze<He?He-Ze+257:257-(Ze-He),ye.hold=X,ye.bits=Z}},{}],49:[function(At,Ce,ze){"use strict";var M=At("../utils/common"),L=At("./adler32"),ye=At("./crc32"),Be=At("./inffast"),je=At("./inftrees"),Ze=1,Ie=2,He=0,Oe=-2,ce=1,Y=852,K=592;function ue(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function X(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new M.Buf16(320),this.work=new M.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function Z(R){var q;return R&&R.state?(R.total_in=R.total_out=(q=R.state).total=0,R.msg="",q.wrap&&(R.adler=1&q.wrap),q.mode=ce,q.last=0,q.havedict=0,q.dmax=32768,q.head=null,q.hold=0,q.bits=0,q.lencode=q.lendyn=new M.Buf32(Y),q.distcode=q.distdyn=new M.Buf32(K),q.sane=1,q.back=-1,He):Oe}function O(R){var q;return R&&R.state?((q=R.state).wsize=0,q.whave=0,q.wnext=0,Z(R)):Oe}function P(R,q){var T,$;return R&&R.state?($=R.state,q<0?(T=0,q=-q):(T=1+(q>>4),q<48&&(q&=15)),q&&(q<8||15<q)?Oe:(null!==$.window&&$.wbits!==q&&($.window=null),$.wrap=T,$.wbits=q,O(R))):Oe}function x(R,q){var T,$;return R?($=new X,(R.state=$).window=null,(T=P(R,q))!==He&&(R.state=null),T):Oe}var p,w,m=!0;function _(R){if(m){var q;for(p=new M.Buf32(512),w=new M.Buf32(32),q=0;q<144;)R.lens[q++]=8;for(;q<256;)R.lens[q++]=9;for(;q<280;)R.lens[q++]=7;for(;q<288;)R.lens[q++]=8;for(je(Ze,R.lens,0,288,p,0,R.work,{bits:9}),q=0;q<32;)R.lens[q++]=5;je(Ie,R.lens,0,32,w,0,R.work,{bits:5}),m=!1}R.lencode=p,R.lenbits=9,R.distcode=w,R.distbits=5}function F(R,q,T,$){var J,ie=R.state;return null===ie.window&&(ie.wsize=1<<ie.wbits,ie.wnext=0,ie.whave=0,ie.window=new M.Buf8(ie.wsize)),$>=ie.wsize?(M.arraySet(ie.window,q,T-ie.wsize,ie.wsize,0),ie.wnext=0,ie.whave=ie.wsize):($<(J=ie.wsize-ie.wnext)&&(J=$),M.arraySet(ie.window,q,T-$,J,ie.wnext),($-=J)?(M.arraySet(ie.window,q,T-$,$,0),ie.wnext=$,ie.whave=ie.wsize):(ie.wnext+=J,ie.wnext===ie.wsize&&(ie.wnext=0),ie.whave<ie.wsize&&(ie.whave+=J))),0}ze.inflateReset=O,ze.inflateReset2=P,ze.inflateResetKeep=Z,ze.inflateInit=function(R){return x(R,15)},ze.inflateInit2=x,ze.inflate=function(R,q){var T,$,J,ie,Me,de,fe,I,U,z,le,D,oe,_e,Ee,Ve,Qe,et,Tt,Bt,ve,Je,ct,We,Ke=0,ft=new M.Buf8(4),zt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&0!==R.avail_in)return Oe;12===(T=R.state).mode&&(T.mode=13),Me=R.next_out,J=R.output,ie=R.next_in,$=R.input,I=T.hold,U=T.bits,z=de=R.avail_in,le=fe=R.avail_out,Je=He;e:for(;;)switch(T.mode){case ce:if(0===T.wrap){T.mode=13;break}for(;U<16;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}if(2&T.wrap&&35615===I){ft[T.check=0]=255&I,ft[1]=I>>>8&255,T.check=ye(T.check,ft,2,0),U=I=0,T.mode=2;break}if(T.flags=0,T.head&&(T.head.done=!1),!(1&T.wrap)||(((255&I)<<8)+(I>>8))%31){R.msg="incorrect header check",T.mode=30;break}if(8!=(15&I)){R.msg="unknown compression method",T.mode=30;break}if(U-=4,ve=8+(15&(I>>>=4)),0===T.wbits)T.wbits=ve;else if(ve>T.wbits){R.msg="invalid window size",T.mode=30;break}T.dmax=1<<ve,R.adler=T.check=1,T.mode=512&I?10:12,U=I=0;break;case 2:for(;U<16;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}if(T.flags=I,8!=(255&T.flags)){R.msg="unknown compression method",T.mode=30;break}if(57344&T.flags){R.msg="unknown header flags set",T.mode=30;break}T.head&&(T.head.text=I>>8&1),512&T.flags&&(ft[0]=255&I,ft[1]=I>>>8&255,T.check=ye(T.check,ft,2,0)),U=I=0,T.mode=3;case 3:for(;U<32;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}T.head&&(T.head.time=I),512&T.flags&&(ft[0]=255&I,ft[1]=I>>>8&255,ft[2]=I>>>16&255,ft[3]=I>>>24&255,T.check=ye(T.check,ft,4,0)),U=I=0,T.mode=4;case 4:for(;U<16;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}T.head&&(T.head.xflags=255&I,T.head.os=I>>8),512&T.flags&&(ft[0]=255&I,ft[1]=I>>>8&255,T.check=ye(T.check,ft,2,0)),U=I=0,T.mode=5;case 5:if(1024&T.flags){for(;U<16;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}T.length=I,T.head&&(T.head.extra_len=I),512&T.flags&&(ft[0]=255&I,ft[1]=I>>>8&255,T.check=ye(T.check,ft,2,0)),U=I=0}else T.head&&(T.head.extra=null);T.mode=6;case 6:if(1024&T.flags&&(de<(D=T.length)&&(D=de),D&&(T.head&&(ve=T.head.extra_len-T.length,T.head.extra||(T.head.extra=new Array(T.head.extra_len)),M.arraySet(T.head.extra,$,ie,D,ve)),512&T.flags&&(T.check=ye(T.check,$,D,ie)),de-=D,ie+=D,T.length-=D),T.length))break e;T.length=0,T.mode=7;case 7:if(2048&T.flags){if(0===de)break e;for(D=0;ve=$[ie+D++],T.head&&ve&&T.length<65536&&(T.head.name+=String.fromCharCode(ve)),ve&&D<de;);if(512&T.flags&&(T.check=ye(T.check,$,D,ie)),de-=D,ie+=D,ve)break e}else T.head&&(T.head.name=null);T.length=0,T.mode=8;case 8:if(4096&T.flags){if(0===de)break e;for(D=0;ve=$[ie+D++],T.head&&ve&&T.length<65536&&(T.head.comment+=String.fromCharCode(ve)),ve&&D<de;);if(512&T.flags&&(T.check=ye(T.check,$,D,ie)),de-=D,ie+=D,ve)break e}else T.head&&(T.head.comment=null);T.mode=9;case 9:if(512&T.flags){for(;U<16;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}if(I!==(65535&T.check)){R.msg="header crc mismatch",T.mode=30;break}U=I=0}T.head&&(T.head.hcrc=T.flags>>9&1,T.head.done=!0),R.adler=T.check=0,T.mode=12;break;case 10:for(;U<32;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}R.adler=T.check=ue(I),U=I=0,T.mode=11;case 11:if(0===T.havedict)return R.next_out=Me,R.avail_out=fe,R.next_in=ie,R.avail_in=de,T.hold=I,T.bits=U,2;R.adler=T.check=1,T.mode=12;case 12:if(5===q||6===q)break e;case 13:if(T.last){I>>>=7&U,U-=7&U,T.mode=27;break}for(;U<3;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}switch(T.last=1&I,U-=1,3&(I>>>=1)){case 0:T.mode=14;break;case 1:if(_(T),T.mode=20,6!==q)break;I>>>=2,U-=2;break e;case 2:T.mode=17;break;case 3:R.msg="invalid block type",T.mode=30}I>>>=2,U-=2;break;case 14:for(I>>>=7&U,U-=7&U;U<32;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}if((65535&I)!=(I>>>16^65535)){R.msg="invalid stored block lengths",T.mode=30;break}if(T.length=65535&I,U=I=0,T.mode=15,6===q)break e;case 15:T.mode=16;case 16:if(D=T.length){if(de<D&&(D=de),fe<D&&(D=fe),0===D)break e;M.arraySet(J,$,ie,D,Me),de-=D,ie+=D,fe-=D,Me+=D,T.length-=D;break}T.mode=12;break;case 17:for(;U<14;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}if(T.nlen=257+(31&I),U-=5,T.ndist=1+(31&(I>>>=5)),U-=5,T.ncode=4+(15&(I>>>=5)),I>>>=4,U-=4,286<T.nlen||30<T.ndist){R.msg="too many length or distance symbols",T.mode=30;break}T.have=0,T.mode=18;case 18:for(;T.have<T.ncode;){for(;U<3;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}T.lens[zt[T.have++]]=7&I,I>>>=3,U-=3}for(;T.have<19;)T.lens[zt[T.have++]]=0;if(T.lencode=T.lendyn,T.lenbits=7,Je=je(0,T.lens,0,19,T.lencode,0,T.work,ct={bits:T.lenbits}),T.lenbits=ct.bits,Je){R.msg="invalid code lengths set",T.mode=30;break}T.have=0,T.mode=19;case 19:for(;T.have<T.nlen+T.ndist;){for(;Ve=(Ke=T.lencode[I&(1<<T.lenbits)-1])>>>16&255,Qe=65535&Ke,!((Ee=Ke>>>24)<=U);){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}if(Qe<16)I>>>=Ee,U-=Ee,T.lens[T.have++]=Qe;else{if(16===Qe){for(We=Ee+2;U<We;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}if(I>>>=Ee,U-=Ee,0===T.have){R.msg="invalid bit length repeat",T.mode=30;break}ve=T.lens[T.have-1],D=3+(3&I),I>>>=2,U-=2}else if(17===Qe){for(We=Ee+3;U<We;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}U-=Ee,ve=0,D=3+(7&(I>>>=Ee)),I>>>=3,U-=3}else{for(We=Ee+7;U<We;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}U-=Ee,ve=0,D=11+(127&(I>>>=Ee)),I>>>=7,U-=7}if(T.have+D>T.nlen+T.ndist){R.msg="invalid bit length repeat",T.mode=30;break}for(;D--;)T.lens[T.have++]=ve}}if(30===T.mode)break;if(0===T.lens[256]){R.msg="invalid code -- missing end-of-block",T.mode=30;break}if(T.lenbits=9,Je=je(Ze,T.lens,0,T.nlen,T.lencode,0,T.work,ct={bits:T.lenbits}),T.lenbits=ct.bits,Je){R.msg="invalid literal/lengths set",T.mode=30;break}if(T.distbits=6,T.distcode=T.distdyn,Je=je(Ie,T.lens,T.nlen,T.ndist,T.distcode,0,T.work,ct={bits:T.distbits}),T.distbits=ct.bits,Je){R.msg="invalid distances set",T.mode=30;break}if(T.mode=20,6===q)break e;case 20:T.mode=21;case 21:if(6<=de&&258<=fe){R.next_out=Me,R.avail_out=fe,R.next_in=ie,R.avail_in=de,T.hold=I,T.bits=U,Be(R,le),Me=R.next_out,J=R.output,fe=R.avail_out,ie=R.next_in,$=R.input,de=R.avail_in,I=T.hold,U=T.bits,12===T.mode&&(T.back=-1);break}for(T.back=0;Ve=(Ke=T.lencode[I&(1<<T.lenbits)-1])>>>16&255,Qe=65535&Ke,!((Ee=Ke>>>24)<=U);){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}if(Ve&&!(240&Ve)){for(et=Ee,Tt=Ve,Bt=Qe;Ve=(Ke=T.lencode[Bt+((I&(1<<et+Tt)-1)>>et)])>>>16&255,Qe=65535&Ke,!(et+(Ee=Ke>>>24)<=U);){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}I>>>=et,U-=et,T.back+=et}if(I>>>=Ee,U-=Ee,T.back+=Ee,T.length=Qe,0===Ve){T.mode=26;break}if(32&Ve){T.back=-1,T.mode=12;break}if(64&Ve){R.msg="invalid literal/length code",T.mode=30;break}T.extra=15&Ve,T.mode=22;case 22:if(T.extra){for(We=T.extra;U<We;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}T.length+=I&(1<<T.extra)-1,I>>>=T.extra,U-=T.extra,T.back+=T.extra}T.was=T.length,T.mode=23;case 23:for(;Ve=(Ke=T.distcode[I&(1<<T.distbits)-1])>>>16&255,Qe=65535&Ke,!((Ee=Ke>>>24)<=U);){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}if(!(240&Ve)){for(et=Ee,Tt=Ve,Bt=Qe;Ve=(Ke=T.distcode[Bt+((I&(1<<et+Tt)-1)>>et)])>>>16&255,Qe=65535&Ke,!(et+(Ee=Ke>>>24)<=U);){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}I>>>=et,U-=et,T.back+=et}if(I>>>=Ee,U-=Ee,T.back+=Ee,64&Ve){R.msg="invalid distance code",T.mode=30;break}T.offset=Qe,T.extra=15&Ve,T.mode=24;case 24:if(T.extra){for(We=T.extra;U<We;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}T.offset+=I&(1<<T.extra)-1,I>>>=T.extra,U-=T.extra,T.back+=T.extra}if(T.offset>T.dmax){R.msg="invalid distance too far back",T.mode=30;break}T.mode=25;case 25:if(0===fe)break e;if(T.offset>(D=le-fe)){if((D=T.offset-D)>T.whave&&T.sane){R.msg="invalid distance too far back",T.mode=30;break}oe=D>T.wnext?T.wsize-(D-=T.wnext):T.wnext-D,D>T.length&&(D=T.length),_e=T.window}else _e=J,oe=Me-T.offset,D=T.length;for(fe<D&&(D=fe),fe-=D,T.length-=D;J[Me++]=_e[oe++],--D;);0===T.length&&(T.mode=21);break;case 26:if(0===fe)break e;J[Me++]=T.length,fe--,T.mode=21;break;case 27:if(T.wrap){for(;U<32;){if(0===de)break e;de--,I|=$[ie++]<<U,U+=8}if(R.total_out+=le-=fe,T.total+=le,le&&(R.adler=T.check=T.flags?ye(T.check,J,le,Me-le):L(T.check,J,le,Me-le)),le=fe,(T.flags?I:ue(I))!==T.check){R.msg="incorrect data check",T.mode=30;break}U=I=0}T.mode=28;case 28:if(T.wrap&&T.flags){for(;U<32;){if(0===de)break e;de--,I+=$[ie++]<<U,U+=8}if(I!==(4294967295&T.total)){R.msg="incorrect length check",T.mode=30;break}U=I=0}T.mode=29;case 29:Je=1;break e;case 30:Je=-3;break e;case 31:return-4;default:return Oe}return R.next_out=Me,R.avail_out=fe,R.next_in=ie,R.avail_in=de,T.hold=I,T.bits=U,(T.wsize||le!==R.avail_out&&T.mode<30&&(T.mode<27||4!==q))&&F(R,R.output,R.next_out,le-R.avail_out)?(T.mode=31,-4):(le-=R.avail_out,R.total_in+=z-=R.avail_in,R.total_out+=le,T.total+=le,T.wrap&&le&&(R.adler=T.check=T.flags?ye(T.check,J,le,R.next_out-le):L(T.check,J,le,R.next_out-le)),R.data_type=T.bits+(T.last?64:0)+(12===T.mode?128:0)+(20===T.mode||15===T.mode?256:0),(0==z&&0===le||4===q)&&Je===He&&(Je=-5),Je)},ze.inflateEnd=function(R){if(!R||!R.state)return Oe;var q=R.state;return q.window&&(q.window=null),R.state=null,He},ze.inflateGetHeader=function(R,q){var T;return R&&R.state&&2&(T=R.state).wrap?((T.head=q).done=!1,He):Oe},ze.inflateSetDictionary=function(R,q){var T,$=q.length;return R&&R.state?0!==(T=R.state).wrap&&11!==T.mode?Oe:11===T.mode&&L(1,q,$,0)!==T.check?-3:F(R,q,$,$)?(T.mode=31,-4):(T.havedict=1,He):Oe},ze.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(At,Ce,ze){"use strict";var M=At("../utils/common"),L=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],ye=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],Be=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],je=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Ce.exports=function(Ze,Ie,He,Oe,ce,Y,K,ue){var X,Z,O,P,x,p,w,m,_,F=ue.bits,R=0,q=0,T=0,$=0,J=0,ie=0,Me=0,de=0,fe=0,I=0,U=null,z=0,le=new M.Buf16(16),D=new M.Buf16(16),oe=null,_e=0;for(R=0;R<=15;R++)le[R]=0;for(q=0;q<Oe;q++)le[Ie[He+q]]++;for(J=F,$=15;1<=$&&0===le[$];$--);if($<J&&(J=$),0===$)return ce[Y++]=20971520,ce[Y++]=20971520,ue.bits=1,0;for(T=1;T<$&&0===le[T];T++);for(J<T&&(J=T),R=de=1;R<=15;R++)if(de<<=1,(de-=le[R])<0)return-1;if(0<de&&(0===Ze||1!==$))return-1;for(D[1]=0,R=1;R<15;R++)D[R+1]=D[R]+le[R];for(q=0;q<Oe;q++)0!==Ie[He+q]&&(K[D[Ie[He+q]]++]=q);if(p=0===Ze?(U=oe=K,19):1===Ze?(U=L,z-=257,oe=ye,_e-=257,256):(U=Be,oe=je,-1),R=T,x=Y,Me=q=I=0,O=-1,P=(fe=1<<(ie=J))-1,1===Ze&&852<fe||2===Ze&&592<fe)return 1;for(;;){for(w=R-Me,_=K[q]<p?(m=0,K[q]):K[q]>p?(m=oe[_e+K[q]],U[z+K[q]]):(m=96,0),X=1<<R-Me,T=Z=1<<ie;ce[x+(I>>Me)+(Z-=X)]=w<<24|m<<16|_|0,0!==Z;);for(X=1<<R-1;I&X;)X>>=1;if(0!==X?(I&=X-1,I+=X):I=0,q++,0==--le[R]){if(R===$)break;R=Ie[He+K[q]]}if(J<R&&(I&P)!==O){for(0===Me&&(Me=J),x+=T,de=1<<(ie=R-Me);ie+Me<$&&!((de-=le[ie+Me])<=0);)ie++,de<<=1;if(fe+=1<<ie,1===Ze&&852<fe||2===Ze&&592<fe)return 1;ce[O=I&P]=J<<24|ie<<16|x-Y|0}}return 0!==I&&(ce[x+I]=R-Me<<24|64<<16|0),ue.bits=J,0}},{"../utils/common":41}],51:[function(At,Ce,ze){"use strict";Ce.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(At,Ce,ze){"use strict";var M=At("../utils/common");function Be(Ke){for(var ft=Ke.length;0<=--ft;)Ke[ft]=0}var je=0,Ie=256,He=Ie+1+29,Oe=30,ce=19,Y=2*He+1,K=15,ue=16,Z=256,O=16,P=17,x=18,p=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],m=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],_=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(He+2));Be(F);var R=new Array(2*Oe);Be(R);var q=new Array(512);Be(q);var T=new Array(256);Be(T);var $=new Array(29);Be($);var J,ie,Me,de=new Array(Oe);function fe(Ke,ft,zt,Zt,Mt){this.static_tree=Ke,this.extra_bits=ft,this.extra_base=zt,this.elems=Zt,this.max_length=Mt,this.has_stree=Ke&&Ke.length}function I(Ke,ft){this.dyn_tree=Ke,this.max_code=0,this.stat_desc=ft}function U(Ke){return Ke<256?q[Ke]:q[256+(Ke>>>7)]}function z(Ke,ft){Ke.pending_buf[Ke.pending++]=255&ft,Ke.pending_buf[Ke.pending++]=ft>>>8&255}function le(Ke,ft,zt){Ke.bi_valid>ue-zt?(Ke.bi_buf|=ft<<Ke.bi_valid&65535,z(Ke,Ke.bi_buf),Ke.bi_buf=ft>>ue-Ke.bi_valid,Ke.bi_valid+=zt-ue):(Ke.bi_buf|=ft<<Ke.bi_valid&65535,Ke.bi_valid+=zt)}function D(Ke,ft,zt){le(Ke,zt[2*ft],zt[2*ft+1])}function oe(Ke,ft){for(var zt=0;zt|=1&Ke,Ke>>>=1,zt<<=1,0<--ft;);return zt>>>1}function _e(Ke,ft,zt){var Zt,Mt,Ot=new Array(K+1),sn=0;for(Zt=1;Zt<=K;Zt++)Ot[Zt]=sn=sn+zt[Zt-1]<<1;for(Mt=0;Mt<=ft;Mt++){var wn=Ke[2*Mt+1];0!==wn&&(Ke[2*Mt]=oe(Ot[wn]++,wn))}}function Ee(Ke){var ft;for(ft=0;ft<He;ft++)Ke.dyn_ltree[2*ft]=0;for(ft=0;ft<Oe;ft++)Ke.dyn_dtree[2*ft]=0;for(ft=0;ft<ce;ft++)Ke.bl_tree[2*ft]=0;Ke.dyn_ltree[2*Z]=1,Ke.opt_len=Ke.static_len=0,Ke.last_lit=Ke.matches=0}function Ve(Ke){8<Ke.bi_valid?z(Ke,Ke.bi_buf):0<Ke.bi_valid&&(Ke.pending_buf[Ke.pending++]=Ke.bi_buf),Ke.bi_buf=0,Ke.bi_valid=0}function Qe(Ke,ft,zt,Zt){var Mt=2*ft,Ot=2*zt;return Ke[Mt]<Ke[Ot]||Ke[Mt]===Ke[Ot]&&Zt[ft]<=Zt[zt]}function et(Ke,ft,zt){for(var Zt=Ke.heap[zt],Mt=zt<<1;Mt<=Ke.heap_len&&(Mt<Ke.heap_len&&Qe(ft,Ke.heap[Mt+1],Ke.heap[Mt],Ke.depth)&&Mt++,!Qe(ft,Zt,Ke.heap[Mt],Ke.depth));)Ke.heap[zt]=Ke.heap[Mt],zt=Mt,Mt<<=1;Ke.heap[zt]=Zt}function Tt(Ke,ft,zt){var Zt,Mt,Ot,sn,wn=0;if(0!==Ke.last_lit)for(;Zt=Ke.pending_buf[Ke.d_buf+2*wn]<<8|Ke.pending_buf[Ke.d_buf+2*wn+1],Mt=Ke.pending_buf[Ke.l_buf+wn],wn++,0===Zt?D(Ke,Mt,ft):(D(Ke,(Ot=T[Mt])+Ie+1,ft),0!==(sn=p[Ot])&&le(Ke,Mt-=$[Ot],sn),D(Ke,Ot=U(--Zt),zt),0!==(sn=w[Ot])&&le(Ke,Zt-=de[Ot],sn)),wn<Ke.last_lit;);D(Ke,Z,ft)}function Bt(Ke,ft){var zt,Zt,Mt,Ot=ft.dyn_tree,sn=ft.stat_desc.static_tree,wn=ft.stat_desc.has_stree,Ln=ft.stat_desc.elems,En=-1;for(Ke.heap_len=0,Ke.heap_max=Y,zt=0;zt<Ln;zt++)0!==Ot[2*zt]?(Ke.heap[++Ke.heap_len]=En=zt,Ke.depth[zt]=0):Ot[2*zt+1]=0;for(;Ke.heap_len<2;)Ot[2*(Mt=Ke.heap[++Ke.heap_len]=En<2?++En:0)]=1,Ke.depth[Mt]=0,Ke.opt_len--,wn&&(Ke.static_len-=sn[2*Mt+1]);for(ft.max_code=En,zt=Ke.heap_len>>1;1<=zt;zt--)et(Ke,Ot,zt);for(Mt=Ln;zt=Ke.heap[1],Ke.heap[1]=Ke.heap[Ke.heap_len--],et(Ke,Ot,1),Zt=Ke.heap[1],Ke.heap[--Ke.heap_max]=zt,Ke.heap[--Ke.heap_max]=Zt,Ot[2*Mt]=Ot[2*zt]+Ot[2*Zt],Ke.depth[Mt]=(Ke.depth[zt]>=Ke.depth[Zt]?Ke.depth[zt]:Ke.depth[Zt])+1,Ot[2*zt+1]=Ot[2*Zt+1]=Mt,Ke.heap[1]=Mt++,et(Ke,Ot,1),2<=Ke.heap_len;);Ke.heap[--Ke.heap_max]=Ke.heap[1],function($n,vn){var rn,Gt,qt,Qt,_n,dn,ci=vn.dyn_tree,ir=vn.max_code,Vi=vn.stat_desc.static_tree,br=vn.stat_desc.has_stree,Ur=vn.stat_desc.extra_bits,Ar=vn.stat_desc.extra_base,cs=vn.stat_desc.max_length,Rs=0;for(Qt=0;Qt<=K;Qt++)$n.bl_count[Qt]=0;for(ci[2*$n.heap[$n.heap_max]+1]=0,rn=$n.heap_max+1;rn<Y;rn++)cs<(Qt=ci[2*ci[2*(Gt=$n.heap[rn])+1]+1]+1)&&(Qt=cs,Rs++),ci[2*Gt+1]=Qt,ir<Gt||($n.bl_count[Qt]++,_n=0,Ar<=Gt&&(_n=Ur[Gt-Ar]),$n.opt_len+=(dn=ci[2*Gt])*(Qt+_n),br&&($n.static_len+=dn*(Vi[2*Gt+1]+_n)));if(0!==Rs){do{for(Qt=cs-1;0===$n.bl_count[Qt];)Qt--;$n.bl_count[Qt]--,$n.bl_count[Qt+1]+=2,$n.bl_count[cs]--,Rs-=2}while(0<Rs);for(Qt=cs;0!==Qt;Qt--)for(Gt=$n.bl_count[Qt];0!==Gt;)ir<(qt=$n.heap[--rn])||(ci[2*qt+1]!==Qt&&($n.opt_len+=(Qt-ci[2*qt+1])*ci[2*qt],ci[2*qt+1]=Qt),Gt--)}}(Ke,ft),_e(Ot,En,Ke.bl_count)}function ve(Ke,ft,zt){var Zt,Mt,Ot=-1,sn=ft[1],wn=0,Ln=7,En=4;for(0===sn&&(Ln=138,En=3),ft[2*(zt+1)+1]=65535,Zt=0;Zt<=zt;Zt++)Mt=sn,sn=ft[2*(Zt+1)+1],++wn<Ln&&Mt===sn||(wn<En?Ke.bl_tree[2*Mt]+=wn:0!==Mt?(Mt!==Ot&&Ke.bl_tree[2*Mt]++,Ke.bl_tree[2*O]++):wn<=10?Ke.bl_tree[2*P]++:Ke.bl_tree[2*x]++,Ot=Mt,En=(wn=0)===sn?(Ln=138,3):Mt===sn?(Ln=6,3):(Ln=7,4))}function Je(Ke,ft,zt){var Zt,Mt,Ot=-1,sn=ft[1],wn=0,Ln=7,En=4;for(0===sn&&(Ln=138,En=3),Zt=0;Zt<=zt;Zt++)if(Mt=sn,sn=ft[2*(Zt+1)+1],!(++wn<Ln&&Mt===sn)){if(wn<En)for(;D(Ke,Mt,Ke.bl_tree),0!=--wn;);else 0!==Mt?(Mt!==Ot&&(D(Ke,Mt,Ke.bl_tree),wn--),D(Ke,O,Ke.bl_tree),le(Ke,wn-3,2)):wn<=10?(D(Ke,P,Ke.bl_tree),le(Ke,wn-3,3)):(D(Ke,x,Ke.bl_tree),le(Ke,wn-11,7));Ot=Mt,En=(wn=0)===sn?(Ln=138,3):Mt===sn?(Ln=6,3):(Ln=7,4)}}Be(de);var ct=!1;function We(Ke,ft,zt,Zt){var Mt,Ot,sn;le(Ke,(je<<1)+(Zt?1:0),3),Ot=ft,sn=zt,Ve(Mt=Ke),z(Mt,sn),z(Mt,~sn),M.arraySet(Mt.pending_buf,Mt.window,Ot,sn,Mt.pending),Mt.pending+=sn}ze._tr_init=function(Ke){ct||(function(){var ft,zt,Zt,Mt,Ot,sn=new Array(K+1);for(Mt=Zt=0;Mt<28;Mt++)for($[Mt]=Zt,ft=0;ft<1<<p[Mt];ft++)T[Zt++]=Mt;for(T[Zt-1]=Mt,Mt=Ot=0;Mt<16;Mt++)for(de[Mt]=Ot,ft=0;ft<1<<w[Mt];ft++)q[Ot++]=Mt;for(Ot>>=7;Mt<Oe;Mt++)for(de[Mt]=Ot<<7,ft=0;ft<1<<w[Mt]-7;ft++)q[256+Ot++]=Mt;for(zt=0;zt<=K;zt++)sn[zt]=0;for(ft=0;ft<=143;)F[2*ft+1]=8,ft++,sn[8]++;for(;ft<=255;)F[2*ft+1]=9,ft++,sn[9]++;for(;ft<=279;)F[2*ft+1]=7,ft++,sn[7]++;for(;ft<=287;)F[2*ft+1]=8,ft++,sn[8]++;for(_e(F,He+1,sn),ft=0;ft<Oe;ft++)R[2*ft+1]=5,R[2*ft]=oe(ft,5);J=new fe(F,p,Ie+1,He,K),ie=new fe(R,w,0,Oe,K),Me=new fe(new Array(0),m,0,ce,7)}(),ct=!0),Ke.l_desc=new I(Ke.dyn_ltree,J),Ke.d_desc=new I(Ke.dyn_dtree,ie),Ke.bl_desc=new I(Ke.bl_tree,Me),Ke.bi_buf=0,Ke.bi_valid=0,Ee(Ke)},ze._tr_stored_block=We,ze._tr_flush_block=function(Ke,ft,zt,Zt){var Mt,Ot,sn=0;0<Ke.level?(2===Ke.strm.data_type&&(Ke.strm.data_type=function(wn){var Ln,En=4093624447;for(Ln=0;Ln<=31;Ln++,En>>>=1)if(1&En&&0!==wn.dyn_ltree[2*Ln])return 0;if(0!==wn.dyn_ltree[18]||0!==wn.dyn_ltree[20]||0!==wn.dyn_ltree[26])return 1;for(Ln=32;Ln<Ie;Ln++)if(0!==wn.dyn_ltree[2*Ln])return 1;return 0}(Ke)),Bt(Ke,Ke.l_desc),Bt(Ke,Ke.d_desc),sn=function(wn){var Ln;for(ve(wn,wn.dyn_ltree,wn.l_desc.max_code),ve(wn,wn.dyn_dtree,wn.d_desc.max_code),Bt(wn,wn.bl_desc),Ln=ce-1;3<=Ln&&0===wn.bl_tree[2*_[Ln]+1];Ln--);return wn.opt_len+=3*(Ln+1)+5+5+4,Ln}(Ke),(Ot=Ke.static_len+3+7>>>3)<=(Mt=Ke.opt_len+3+7>>>3)&&(Mt=Ot)):Mt=Ot=zt+5,zt+4<=Mt&&-1!==ft?We(Ke,ft,zt,Zt):4===Ke.strategy||Ot===Mt?(le(Ke,2+(Zt?1:0),3),Tt(Ke,F,R)):(le(Ke,4+(Zt?1:0),3),function(wn,Ln,En,$n){var vn;for(le(wn,Ln-257,5),le(wn,En-1,5),le(wn,$n-4,4),vn=0;vn<$n;vn++)le(wn,wn.bl_tree[2*_[vn]+1],3);Je(wn,wn.dyn_ltree,Ln-1),Je(wn,wn.dyn_dtree,En-1)}(Ke,Ke.l_desc.max_code+1,Ke.d_desc.max_code+1,sn+1),Tt(Ke,Ke.dyn_ltree,Ke.dyn_dtree)),Ee(Ke),Zt&&Ve(Ke)},ze._tr_tally=function(Ke,ft,zt){return Ke.pending_buf[Ke.d_buf+2*Ke.last_lit]=ft>>>8&255,Ke.pending_buf[Ke.d_buf+2*Ke.last_lit+1]=255&ft,Ke.pending_buf[Ke.l_buf+Ke.last_lit]=255&zt,Ke.last_lit++,0===ft?Ke.dyn_ltree[2*zt]++:(Ke.matches++,ft--,Ke.dyn_ltree[2*(T[zt]+Ie+1)]++,Ke.dyn_dtree[2*U(ft)]++),Ke.last_lit===Ke.lit_bufsize-1},ze._tr_align=function(Ke){var ft;le(Ke,2,3),D(Ke,Z,F),16===(ft=Ke).bi_valid?(z(ft,ft.bi_buf),ft.bi_buf=0,ft.bi_valid=0):8<=ft.bi_valid&&(ft.pending_buf[ft.pending++]=255&ft.bi_buf,ft.bi_buf>>=8,ft.bi_valid-=8)}},{"../utils/common":41}],53:[function(At,Ce,ze){"use strict";Ce.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(At,Ce,ze){(function(M){!function(L,ye){"use strict";if(!L.setImmediate){var Be,je,Ze,Ie,He=1,Oe={},ce=!1,Y=L.document,K=Object.getPrototypeOf&&Object.getPrototypeOf(L);K=K&&K.setTimeout?K:L,Be="[object process]"==={}.toString.call(L.process)?function(O){process.nextTick(function(){X(O)})}:function(){if(L.postMessage&&!L.importScripts){var O=!0,P=L.onmessage;return L.onmessage=function(){O=!1},L.postMessage("","*"),L.onmessage=P,O}}()?(Ie="setImmediate$"+Math.random()+"$",L.addEventListener?L.addEventListener("message",Z,!1):L.attachEvent("onmessage",Z),function(O){L.postMessage(Ie+O,"*")}):L.MessageChannel?((Ze=new MessageChannel).port1.onmessage=function(O){X(O.data)},function(O){Ze.port2.postMessage(O)}):Y&&"onreadystatechange"in Y.createElement("script")?(je=Y.documentElement,function(O){var P=Y.createElement("script");P.onreadystatechange=function(){X(O),P.onreadystatechange=null,je.removeChild(P),P=null},je.appendChild(P)}):function(O){setTimeout(X,0,O)},K.setImmediate=function(O){"function"!=typeof O&&(O=new Function(""+O));for(var P=new Array(arguments.length-1),x=0;x<P.length;x++)P[x]=arguments[x+1];return Oe[He]={callback:O,args:P},Be(He),He++},K.clearImmediate=ue}function ue(O){delete Oe[O]}function X(O){if(ce)setTimeout(X,0,O);else{var P=Oe[O];if(P){ce=!0;try{!function(x){var p=x.callback,w=x.args;switch(w.length){case 0:p();break;case 1:p(w[0]);break;case 2:p(w[0],w[1]);break;case 3:p(w[0],w[1],w[2]);break;default:p.apply(ye,w)}}(P)}finally{ue(O),ce=!1}}}}function Z(O){O.source===L&&"string"==typeof O.data&&0===O.data.indexOf(Ie)&&X(+O.data.slice(Ie.length))}}(typeof self>"u"?void 0===M?this:M:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)},9393:($r,At,Ce)=>{const ze=Ce(801),M=Ce(3105),L=Ce(6948),ye=Ce(6297);function Be(je,Ze,Ie,He,Oe){const ce=[].slice.call(arguments,1),Y=ce.length,K="function"==typeof ce[Y-1];if(!K&&!ze())throw new Error("Callback required as last argument");if(!K){if(Y<1)throw new Error("Too few arguments provided");return 1===Y?(Ie=Ze,Ze=He=void 0):2===Y&&!Ze.getContext&&(He=Ie,Ie=Ze,Ze=void 0),new Promise(function(ue,X){try{const Z=M.create(Ie,He);ue(je(Z,Ze,He))}catch(Z){X(Z)}})}if(Y<2)throw new Error("Too few arguments provided");2===Y?(Oe=Ie,Ie=Ze,Ze=He=void 0):3===Y&&(Ze.getContext&&typeof Oe>"u"?(Oe=He,He=void 0):(Oe=He,He=Ie,Ie=Ze,Ze=void 0));try{const ue=M.create(Ie,He);Oe(null,je(ue,Ze,He))}catch(ue){Oe(ue)}}At.create=M.create,At.toCanvas=Be.bind(null,L.render),At.toDataURL=Be.bind(null,L.renderToDataURL),At.toString=Be.bind(null,function(je,Ze,Ie){return ye.render(je,Ie)})},801:$r=>{$r.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},7225:($r,At,Ce)=>{const ze=Ce(5909).getSymbolSize;At.getRowColCoords=function(L){if(1===L)return[];const ye=Math.floor(L/7)+2,Be=ze(L),je=145===Be?26:2*Math.ceil((Be-13)/(2*ye-2)),Ze=[Be-7];for(let Ie=1;Ie<ye-1;Ie++)Ze[Ie]=Ze[Ie-1]-je;return Ze.push(6),Ze.reverse()},At.getPositions=function(L){const ye=[],Be=At.getRowColCoords(L),je=Be.length;for(let Ze=0;Ze<je;Ze++)for(let Ie=0;Ie<je;Ie++)0===Ze&&0===Ie||0===Ze&&Ie===je-1||Ze===je-1&&0===Ie||ye.push([Be[Ze],Be[Ie]]);return ye}},1022:($r,At,Ce)=>{const ze=Ce(3041),M=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function L(ye){this.mode=ze.ALPHANUMERIC,this.data=ye}L.getBitsLength=function(Be){return 11*Math.floor(Be/2)+Be%2*6},L.prototype.getLength=function(){return this.data.length},L.prototype.getBitsLength=function(){return L.getBitsLength(this.data.length)},L.prototype.write=function(Be){let je;for(je=0;je+2<=this.data.length;je+=2){let Ze=45*M.indexOf(this.data[je]);Ze+=M.indexOf(this.data[je+1]),Be.put(Ze,11)}this.data.length%2&&Be.put(M.indexOf(this.data[je]),6)},$r.exports=L},1012:$r=>{function At(){this.buffer=[],this.length=0}At.prototype={get:function(Ce){const ze=Math.floor(Ce/8);return 1==(this.buffer[ze]>>>7-Ce%8&1)},put:function(Ce,ze){for(let M=0;M<ze;M++)this.putBit(1==(Ce>>>ze-M-1&1))},getLengthInBits:function(){return this.length},putBit:function(Ce){const ze=Math.floor(this.length/8);this.buffer.length<=ze&&this.buffer.push(0),Ce&&(this.buffer[ze]|=128>>>this.length%8),this.length++}},$r.exports=At},4373:$r=>{function At(Ce){if(!Ce||Ce<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=Ce,this.data=new Uint8Array(Ce*Ce),this.reservedBit=new Uint8Array(Ce*Ce)}At.prototype.set=function(Ce,ze,M,L){const ye=Ce*this.size+ze;this.data[ye]=M,L&&(this.reservedBit[ye]=!0)},At.prototype.get=function(Ce,ze){return this.data[Ce*this.size+ze]},At.prototype.xor=function(Ce,ze,M){this.data[Ce*this.size+ze]^=M},At.prototype.isReserved=function(Ce,ze){return this.reservedBit[Ce*this.size+ze]},$r.exports=At},4179:($r,At,Ce)=>{const ze=Ce(5724),M=Ce(3041);function L(ye){this.mode=M.BYTE,"string"==typeof ye&&(ye=ze(ye)),this.data=new Uint8Array(ye)}L.getBitsLength=function(Be){return 8*Be},L.prototype.getLength=function(){return this.data.length},L.prototype.getBitsLength=function(){return L.getBitsLength(this.data.length)},L.prototype.write=function(ye){for(let Be=0,je=this.data.length;Be<je;Be++)ye.put(this.data[Be],8)},$r.exports=L},8439:($r,At,Ce)=>{const ze=Ce(5755),M=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],L=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];At.getBlocksCount=function(Be,je){switch(je){case ze.L:return M[4*(Be-1)+0];case ze.M:return M[4*(Be-1)+1];case ze.Q:return M[4*(Be-1)+2];case ze.H:return M[4*(Be-1)+3];default:return}},At.getTotalCodewordsCount=function(Be,je){switch(je){case ze.L:return L[4*(Be-1)+0];case ze.M:return L[4*(Be-1)+1];case ze.Q:return L[4*(Be-1)+2];case ze.H:return L[4*(Be-1)+3];default:return}}},5755:($r,At)=>{At.L={bit:1},At.M={bit:0},At.Q={bit:3},At.H={bit:2},At.isValid=function(M){return M&&typeof M.bit<"u"&&M.bit>=0&&M.bit<4},At.from=function(M,L){if(At.isValid(M))return M;try{return function Ce(ze){if("string"!=typeof ze)throw new Error("Param is not a string");switch(ze.toLowerCase()){case"l":case"low":return At.L;case"m":case"medium":return At.M;case"q":case"quartile":return At.Q;case"h":case"high":return At.H;default:throw new Error("Unknown EC Level: "+ze)}}(M)}catch{return L}}},1910:($r,At,Ce)=>{const ze=Ce(5909).getSymbolSize;At.getPositions=function(ye){const Be=ze(ye);return[[0,0],[Be-7,0],[0,Be-7]]}},1846:($r,At,Ce)=>{const ze=Ce(5909),ye=ze.getBCHDigit(1335);At.getEncodedBits=function(je,Ze){const Ie=je.bit<<3|Ze;let He=Ie<<10;for(;ze.getBCHDigit(He)-ye>=0;)He^=1335<<ze.getBCHDigit(He)-ye;return 21522^(Ie<<10|He)}},3907:($r,At)=>{const Ce=new Uint8Array(512),ze=new Uint8Array(256);(function(){let L=1;for(let ye=0;ye<255;ye++)Ce[ye]=L,ze[L]=ye,L<<=1,256&L&&(L^=285);for(let ye=255;ye<512;ye++)Ce[ye]=Ce[ye-255]})(),At.log=function(L){if(L<1)throw new Error("log("+L+")");return ze[L]},At.exp=function(L){return Ce[L]},At.mul=function(L,ye){return 0===L||0===ye?0:Ce[ze[L]+ze[ye]]}},6910:($r,At,Ce)=>{const ze=Ce(3041),M=Ce(5909);function L(ye){this.mode=ze.KANJI,this.data=ye}L.getBitsLength=function(Be){return 13*Be},L.prototype.getLength=function(){return this.data.length},L.prototype.getBitsLength=function(){return L.getBitsLength(this.data.length)},L.prototype.write=function(ye){let Be;for(Be=0;Be<this.data.length;Be++){let je=M.toSJIS(this.data[Be]);if(je>=33088&&je<=40956)je-=33088;else{if(!(je>=57408&&je<=60351))throw new Error("Invalid SJIS character: "+this.data[Be]+"\nMake sure your charset is UTF-8");je-=49472}je=192*(je>>>8&255)+(255&je),ye.put(je,13)}},$r.exports=L},3524:($r,At)=>{At.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function ze(M,L,ye){switch(M){case At.Patterns.PATTERN000:return(L+ye)%2==0;case At.Patterns.PATTERN001:return L%2==0;case At.Patterns.PATTERN010:return ye%3==0;case At.Patterns.PATTERN011:return(L+ye)%3==0;case At.Patterns.PATTERN100:return(Math.floor(L/2)+Math.floor(ye/3))%2==0;case At.Patterns.PATTERN101:return L*ye%2+L*ye%3==0;case At.Patterns.PATTERN110:return(L*ye%2+L*ye%3)%2==0;case At.Patterns.PATTERN111:return(L*ye%3+(L+ye)%2)%2==0;default:throw new Error("bad maskPattern:"+M)}}At.isValid=function(L){return null!=L&&""!==L&&!isNaN(L)&&L>=0&&L<=7},At.from=function(L){return At.isValid(L)?parseInt(L,10):void 0},At.getPenaltyN1=function(L){const ye=L.size;let Be=0,je=0,Ze=0,Ie=null,He=null;for(let Oe=0;Oe<ye;Oe++){je=Ze=0,Ie=He=null;for(let ce=0;ce<ye;ce++){let Y=L.get(Oe,ce);Y===Ie?je++:(je>=5&&(Be+=je-5+3),Ie=Y,je=1),Y=L.get(ce,Oe),Y===He?Ze++:(Ze>=5&&(Be+=Ze-5+3),He=Y,Ze=1)}je>=5&&(Be+=je-5+3),Ze>=5&&(Be+=Ze-5+3)}return Be},At.getPenaltyN2=function(L){const ye=L.size;let Be=0;for(let je=0;je<ye-1;je++)for(let Ze=0;Ze<ye-1;Ze++){const Ie=L.get(je,Ze)+L.get(je,Ze+1)+L.get(je+1,Ze)+L.get(je+1,Ze+1);(4===Ie||0===Ie)&&Be++}return 3*Be},At.getPenaltyN3=function(L){const ye=L.size;let Be=0,je=0,Ze=0;for(let Ie=0;Ie<ye;Ie++){je=Ze=0;for(let He=0;He<ye;He++)je=je<<1&2047|L.get(Ie,He),He>=10&&(1488===je||93===je)&&Be++,Ze=Ze<<1&2047|L.get(He,Ie),He>=10&&(1488===Ze||93===Ze)&&Be++}return 40*Be},At.getPenaltyN4=function(L){let ye=0;const Be=L.data.length;for(let Ze=0;Ze<Be;Ze++)ye+=L.data[Ze];return 10*Math.abs(Math.ceil(100*ye/Be/5)-10)},At.applyMask=function(L,ye){const Be=ye.size;for(let je=0;je<Be;je++)for(let Ze=0;Ze<Be;Ze++)ye.isReserved(Ze,je)||ye.xor(Ze,je,ze(L,Ze,je))},At.getBestMask=function(L,ye){const Be=Object.keys(At.Patterns).length;let je=0,Ze=1/0;for(let Ie=0;Ie<Be;Ie++){ye(Ie),At.applyMask(Ie,L);const He=At.getPenaltyN1(L)+At.getPenaltyN2(L)+At.getPenaltyN3(L)+At.getPenaltyN4(L);At.applyMask(Ie,L),He<Ze&&(Ze=He,je=Ie)}return je}},3041:($r,At,Ce)=>{const ze=Ce(3426),M=Ce(3959);At.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},At.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},At.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},At.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},At.MIXED={bit:-1},At.getCharCountIndicator=function(Be,je){if(!Be.ccBits)throw new Error("Invalid mode: "+Be);if(!ze.isValid(je))throw new Error("Invalid version: "+je);return je>=1&&je<10?Be.ccBits[0]:je<27?Be.ccBits[1]:Be.ccBits[2]},At.getBestModeForData=function(Be){return M.testNumeric(Be)?At.NUMERIC:M.testAlphanumeric(Be)?At.ALPHANUMERIC:M.testKanji(Be)?At.KANJI:At.BYTE},At.toString=function(Be){if(Be&&Be.id)return Be.id;throw new Error("Invalid mode")},At.isValid=function(Be){return Be&&Be.bit&&Be.ccBits},At.from=function(Be,je){if(At.isValid(Be))return Be;try{return function L(ye){if("string"!=typeof ye)throw new Error("Param is not a string");switch(ye.toLowerCase()){case"numeric":return At.NUMERIC;case"alphanumeric":return At.ALPHANUMERIC;case"kanji":return At.KANJI;case"byte":return At.BYTE;default:throw new Error("Unknown mode: "+ye)}}(Be)}catch{return je}}},58:($r,At,Ce)=>{const ze=Ce(3041);function M(L){this.mode=ze.NUMERIC,this.data=L.toString()}M.getBitsLength=function(ye){return 10*Math.floor(ye/3)+(ye%3?ye%3*3+1:0)},M.prototype.getLength=function(){return this.data.length},M.prototype.getBitsLength=function(){return M.getBitsLength(this.data.length)},M.prototype.write=function(ye){let Be,je,Ze;for(Be=0;Be+3<=this.data.length;Be+=3)je=this.data.substr(Be,3),Ze=parseInt(je,10),ye.put(Ze,10);const Ie=this.data.length-Be;Ie>0&&(je=this.data.substr(Be),Ze=parseInt(je,10),ye.put(Ze,3*Ie+1))},$r.exports=M},6662:($r,At,Ce)=>{const ze=Ce(3907);At.mul=function(L,ye){const Be=new Uint8Array(L.length+ye.length-1);for(let je=0;je<L.length;je++)for(let Ze=0;Ze<ye.length;Ze++)Be[je+Ze]^=ze.mul(L[je],ye[Ze]);return Be},At.mod=function(L,ye){let Be=new Uint8Array(L);for(;Be.length-ye.length>=0;){const je=Be[0];for(let Ie=0;Ie<ye.length;Ie++)Be[Ie]^=ze.mul(ye[Ie],je);let Ze=0;for(;Ze<Be.length&&0===Be[Ze];)Ze++;Be=Be.slice(Ze)}return Be},At.generateECPolynomial=function(L){let ye=new Uint8Array([1]);for(let Be=0;Be<L;Be++)ye=At.mul(ye,new Uint8Array([1,ze.exp(Be)]));return ye}},3105:($r,At,Ce)=>{const ze=Ce(5909),M=Ce(5755),L=Ce(1012),ye=Ce(4373),Be=Ce(7225),je=Ce(1910),Ze=Ce(3524),Ie=Ce(8439),He=Ce(874),Oe=Ce(5423),ce=Ce(1846),Y=Ce(3041),K=Ce(9690);function P(_,F,R){const q=_.size,T=ce.getEncodedBits(F,R);let $,J;for($=0;$<15;$++)J=1==(T>>$&1),_.set($<6?$:$<8?$+1:q-15+$,8,J,!0),_.set(8,$<8?q-$-1:$<9?15-$-1+1:15-$-1,J,!0);_.set(q-8,8,1,!0)}function m(_,F,R,q){let T;if(Array.isArray(_))T=K.fromArray(_);else{if("string"!=typeof _)throw new Error("Invalid data");{let de=F;if(!de){const fe=K.rawSplit(_);de=Oe.getBestVersionForData(fe,R)}T=K.fromString(_,de||40)}}const $=Oe.getBestVersionForData(T,R);if(!$)throw new Error("The amount of data is too big to be stored in a QR Code");if(F){if(F<$)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+$+".\n")}else F=$;const J=function p(_,F,R){const q=new L;R.forEach(function(Me){q.put(Me.mode.bit,4),q.put(Me.getLength(),Y.getCharCountIndicator(Me.mode,_)),Me.write(q)});const J=8*(ze.getSymbolTotalCodewords(_)-Ie.getTotalCodewordsCount(_,F));for(q.getLengthInBits()+4<=J&&q.put(0,4);q.getLengthInBits()%8!=0;)q.putBit(0);const ie=(J-q.getLengthInBits())/8;for(let Me=0;Me<ie;Me++)q.put(Me%2?17:236,8);return function w(_,F,R){const q=ze.getSymbolTotalCodewords(F),$=q-Ie.getTotalCodewordsCount(F,R),J=Ie.getBlocksCount(F,R),Me=J-q%J,de=Math.floor(q/J),fe=Math.floor($/J),I=fe+1,U=de-fe,z=new He(U);let le=0;const D=new Array(J),oe=new Array(J);let _e=0;const Ee=new Uint8Array(_.buffer);for(let Bt=0;Bt<J;Bt++){const ve=Bt<Me?fe:I;D[Bt]=Ee.slice(le,le+ve),oe[Bt]=z.encode(D[Bt]),le+=ve,_e=Math.max(_e,ve)}const Ve=new Uint8Array(q);let et,Tt,Qe=0;for(et=0;et<_e;et++)for(Tt=0;Tt<J;Tt++)et<D[Tt].length&&(Ve[Qe++]=D[Tt][et]);for(et=0;et<U;et++)for(Tt=0;Tt<J;Tt++)Ve[Qe++]=oe[Tt][et];return Ve}(q,_,F)}(F,R,T),ie=ze.getSymbolSize(F),Me=new ye(ie);return function ue(_,F){const R=_.size,q=je.getPositions(F);for(let T=0;T<q.length;T++){const $=q[T][0],J=q[T][1];for(let ie=-1;ie<=7;ie++)if(!($+ie<=-1||R<=$+ie))for(let Me=-1;Me<=7;Me++)J+Me<=-1||R<=J+Me||_.set($+ie,J+Me,ie>=0&&ie<=6&&(0===Me||6===Me)||Me>=0&&Me<=6&&(0===ie||6===ie)||ie>=2&&ie<=4&&Me>=2&&Me<=4,!0)}}(Me,F),function X(_){const F=_.size;for(let R=8;R<F-8;R++){const q=R%2==0;_.set(R,6,q,!0),_.set(6,R,q,!0)}}(Me),function Z(_,F){const R=Be.getPositions(F);for(let q=0;q<R.length;q++){const T=R[q][0],$=R[q][1];for(let J=-2;J<=2;J++)for(let ie=-2;ie<=2;ie++)_.set(T+J,$+ie,-2===J||2===J||-2===ie||2===ie||0===J&&0===ie,!0)}}(Me,F),P(Me,R,0),F>=7&&function O(_,F){const R=_.size,q=Oe.getEncodedBits(F);let T,$,J;for(let ie=0;ie<18;ie++)T=Math.floor(ie/3),$=ie%3+R-8-3,J=1==(q>>ie&1),_.set(T,$,J,!0),_.set($,T,J,!0)}(Me,F),function x(_,F){const R=_.size;let q=-1,T=R-1,$=7,J=0;for(let ie=R-1;ie>0;ie-=2)for(6===ie&&ie--;;){for(let Me=0;Me<2;Me++)if(!_.isReserved(T,ie-Me)){let de=!1;J<F.length&&(de=1==(F[J]>>>$&1)),_.set(T,ie-Me,de),$--,-1===$&&(J++,$=7)}if(T+=q,T<0||R<=T){T-=q,q=-q;break}}}(Me,J),isNaN(q)&&(q=Ze.getBestMask(Me,P.bind(null,Me,R))),Ze.applyMask(q,Me),P(Me,R,q),{modules:Me,version:F,errorCorrectionLevel:R,maskPattern:q,segments:T}}At.create=function(F,R){if(typeof F>"u"||""===F)throw new Error("No input text");let T,$,q=M.M;return typeof R<"u"&&(q=M.from(R.errorCorrectionLevel,M.M),T=Oe.from(R.version),$=Ze.from(R.maskPattern),R.toSJISFunc&&ze.setToSJISFunction(R.toSJISFunc)),m(F,T,q,$)}},874:($r,At,Ce)=>{const ze=Ce(6662);function M(L){this.genPoly=void 0,this.degree=L,this.degree&&this.initialize(this.degree)}M.prototype.initialize=function(ye){this.degree=ye,this.genPoly=ze.generateECPolynomial(this.degree)},M.prototype.encode=function(ye){if(!this.genPoly)throw new Error("Encoder not initialized");const Be=new Uint8Array(ye.length+this.degree);Be.set(ye);const je=ze.mod(Be,this.genPoly),Ze=this.degree-je.length;if(Ze>0){const Ie=new Uint8Array(this.degree);return Ie.set(je,Ze),Ie}return je},$r.exports=M},3959:($r,At)=>{let M="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";M=M.replace(/u/g,"\\u");const L="(?:(?![A-Z0-9 $%*+\\-./:]|"+M+")(?:.|[\r\n]))+";At.KANJI=new RegExp(M,"g"),At.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),At.BYTE=new RegExp(L,"g"),At.NUMERIC=new RegExp("[0-9]+","g"),At.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const ye=new RegExp("^"+M+"$"),Be=new RegExp("^[0-9]+$"),je=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");At.testKanji=function(Ie){return ye.test(Ie)},At.testNumeric=function(Ie){return Be.test(Ie)},At.testAlphanumeric=function(Ie){return je.test(Ie)}},9690:($r,At,Ce)=>{const ze=Ce(3041),M=Ce(58),L=Ce(1022),ye=Ce(4179),Be=Ce(6910),je=Ce(3959),Ze=Ce(5909),Ie=Ce(3940);function He(O){return unescape(encodeURIComponent(O)).length}function Oe(O,P,x){const p=[];let w;for(;null!==(w=O.exec(x));)p.push({data:w[0],index:w.index,mode:P,length:w[0].length});return p}function ce(O){const P=Oe(je.NUMERIC,ze.NUMERIC,O),x=Oe(je.ALPHANUMERIC,ze.ALPHANUMERIC,O);let p,w;return Ze.isKanjiModeEnabled()?(p=Oe(je.BYTE,ze.BYTE,O),w=Oe(je.KANJI,ze.KANJI,O)):(p=Oe(je.BYTE_KANJI,ze.BYTE,O),w=[]),P.concat(x,p,w).sort(function(_,F){return _.index-F.index}).map(function(_){return{data:_.data,mode:_.mode,length:_.length}})}function Y(O,P){switch(P){case ze.NUMERIC:return M.getBitsLength(O);case ze.ALPHANUMERIC:return L.getBitsLength(O);case ze.KANJI:return Be.getBitsLength(O);case ze.BYTE:return ye.getBitsLength(O)}}function Z(O,P){let x;const p=ze.getBestModeForData(O);if(x=ze.from(P,p),x!==ze.BYTE&&x.bit<p.bit)throw new Error('"'+O+'" cannot be encoded with mode '+ze.toString(x)+".\n Suggested mode is: "+ze.toString(p));switch(x===ze.KANJI&&!Ze.isKanjiModeEnabled()&&(x=ze.BYTE),x){case ze.NUMERIC:return new M(O);case ze.ALPHANUMERIC:return new L(O);case ze.KANJI:return new Be(O);case ze.BYTE:return new ye(O)}}At.fromArray=function(P){return P.reduce(function(x,p){return"string"==typeof p?x.push(Z(p,null)):p.data&&x.push(Z(p.data,p.mode)),x},[])},At.fromString=function(P,x){const w=function ue(O){const P=[];for(let x=0;x<O.length;x++){const p=O[x];switch(p.mode){case ze.NUMERIC:P.push([p,{data:p.data,mode:ze.ALPHANUMERIC,length:p.length},{data:p.data,mode:ze.BYTE,length:p.length}]);break;case ze.ALPHANUMERIC:P.push([p,{data:p.data,mode:ze.BYTE,length:p.length}]);break;case ze.KANJI:P.push([p,{data:p.data,mode:ze.BYTE,length:He(p.data)}]);break;case ze.BYTE:P.push([{data:p.data,mode:ze.BYTE,length:He(p.data)}])}}return P}(ce(P,Ze.isKanjiModeEnabled())),m=function X(O,P){const x={},p={start:{}};let w=["start"];for(let m=0;m<O.length;m++){const _=O[m],F=[];for(let R=0;R<_.length;R++){const q=_[R],T=""+m+R;F.push(T),x[T]={node:q,lastCount:0},p[T]={};for(let $=0;$<w.length;$++){const J=w[$];x[J]&&x[J].node.mode===q.mode?(p[J][T]=Y(x[J].lastCount+q.length,q.mode)-Y(x[J].lastCount,q.mode),x[J].lastCount+=q.length):(x[J]&&(x[J].lastCount=q.length),p[J][T]=Y(q.length,q.mode)+4+ze.getCharCountIndicator(q.mode,P))}}w=F}for(let m=0;m<w.length;m++)p[w[m]].end=0;return{map:p,table:x}}(w,x),_=Ie.find_path(m.map,"start","end"),F=[];for(let R=1;R<_.length-1;R++)F.push(m.table[_[R]].node);return At.fromArray(function K(O){return O.reduce(function(P,x){const p=P.length-1>=0?P[P.length-1]:null;return p&&p.mode===x.mode?(P[P.length-1].data+=x.data,P):(P.push(x),P)},[])}(F))},At.rawSplit=function(P){return At.fromArray(ce(P,Ze.isKanjiModeEnabled()))}},5909:($r,At)=>{let Ce;const ze=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];At.getSymbolSize=function(L){if(!L)throw new Error('"version" cannot be null or undefined');if(L<1||L>40)throw new Error('"version" should be in range from 1 to 40');return 4*L+17},At.getSymbolTotalCodewords=function(L){return ze[L]},At.getBCHDigit=function(M){let L=0;for(;0!==M;)L++,M>>>=1;return L},At.setToSJISFunction=function(L){if("function"!=typeof L)throw new Error('"toSJISFunc" is not a valid function.');Ce=L},At.isKanjiModeEnabled=function(){return typeof Ce<"u"},At.toSJIS=function(L){return Ce(L)}},3426:($r,At)=>{At.isValid=function(ze){return!isNaN(ze)&&ze>=1&&ze<=40}},5423:($r,At,Ce)=>{const ze=Ce(5909),M=Ce(8439),L=Ce(5755),ye=Ce(3041),Be=Ce(3426),Ze=ze.getBCHDigit(7973);function He(Y,K){return ye.getCharCountIndicator(Y,K)+4}function Oe(Y,K){let ue=0;return Y.forEach(function(X){const Z=He(X.mode,K);ue+=Z+X.getBitsLength()}),ue}At.from=function(K,ue){return Be.isValid(K)?parseInt(K,10):ue},At.getCapacity=function(K,ue,X){if(!Be.isValid(K))throw new Error("Invalid QR Code version");typeof X>"u"&&(X=ye.BYTE);const P=8*(ze.getSymbolTotalCodewords(K)-M.getTotalCodewordsCount(K,ue));if(X===ye.MIXED)return P;const x=P-He(X,K);switch(X){case ye.NUMERIC:return Math.floor(x/10*3);case ye.ALPHANUMERIC:return Math.floor(x/11*2);case ye.KANJI:return Math.floor(x/13);default:return Math.floor(x/8)}},At.getBestVersionForData=function(K,ue){let X;const Z=L.from(ue,L.M);if(Array.isArray(K)){if(K.length>1)return function ce(Y,K){for(let ue=1;ue<=40;ue++)if(Oe(Y,ue)<=At.getCapacity(ue,K,ye.MIXED))return ue}(K,Z);if(0===K.length)return 1;X=K[0]}else X=K;return function Ie(Y,K,ue){for(let X=1;X<=40;X++)if(K<=At.getCapacity(X,ue,Y))return X}(X.mode,X.getLength(),Z)},At.getEncodedBits=function(K){if(!Be.isValid(K)||K<7)throw new Error("Invalid QR Code version");let ue=K<<12;for(;ze.getBCHDigit(ue)-Ze>=0;)ue^=7973<<ze.getBCHDigit(ue)-Ze;return K<<12|ue}},6948:($r,At,Ce)=>{const ze=Ce(1591);At.render=function(Be,je,Ze){let Ie=Ze,He=je;typeof Ie>"u"&&(!je||!je.getContext)&&(Ie=je,je=void 0),je||(He=function L(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}()),Ie=ze.getOptions(Ie);const Oe=ze.getImageWidth(Be.modules.size,Ie),ce=He.getContext("2d"),Y=ce.createImageData(Oe,Oe);return ze.qrToImageData(Y.data,Be,Ie),function M(ye,Be,je){ye.clearRect(0,0,Be.width,Be.height),Be.style||(Be.style={}),Be.height=je,Be.width=je,Be.style.height=je+"px",Be.style.width=je+"px"}(ce,He,Oe),ce.putImageData(Y,0,0),He},At.renderToDataURL=function(Be,je,Ze){let Ie=Ze;return typeof Ie>"u"&&(!je||!je.getContext)&&(Ie=je,je=void 0),Ie||(Ie={}),At.render(Be,je,Ie).toDataURL(Ie.type||"image/png",(Ie.rendererOpts||{}).quality)}},6297:($r,At,Ce)=>{const ze=Ce(1591);function M(Be,je){const Ze=Be.a/255,Ie=je+'="'+Be.hex+'"';return Ze<1?Ie+" "+je+'-opacity="'+Ze.toFixed(2).slice(1)+'"':Ie}function L(Be,je,Ze){let Ie=Be+je;return typeof Ze<"u"&&(Ie+=" "+Ze),Ie}At.render=function(je,Ze,Ie){const He=ze.getOptions(Ze),Oe=je.modules.size,ce=je.modules.data,Y=Oe+2*He.margin,K=He.color.light.a?"<path "+M(He.color.light,"fill")+' d="M0 0h'+Y+"v"+Y+'H0z"/>':"",ue="<path "+M(He.color.dark,"stroke")+' d="'+function ye(Be,je,Ze){let Ie="",He=0,Oe=!1,ce=0;for(let Y=0;Y<Be.length;Y++){const K=Math.floor(Y%je),ue=Math.floor(Y/je);!K&&!Oe&&(Oe=!0),Be[Y]?(ce++,Y>0&&K>0&&Be[Y-1]||(Ie+=Oe?L("M",K+Ze,.5+ue+Ze):L("m",He,0),He=0,Oe=!1),K+1<je&&Be[Y+1]||(Ie+=L("h",ce),ce=0)):He++}return Ie}(ce,Oe,He.margin)+'"/>',O='<svg xmlns="http://www.w3.org/2000/svg" '+(He.width?'width="'+He.width+'" height="'+He.width+'" ':"")+'viewBox="0 0 '+Y+" "+Y+'" shape-rendering="crispEdges">'+K+ue+"</svg>\n";return"function"==typeof Ie&&Ie(null,O),O}},1591:($r,At)=>{function Ce(ze){if("number"==typeof ze&&(ze=ze.toString()),"string"!=typeof ze)throw new Error("Color should be defined as hex string");let M=ze.slice().replace("#","").split("");if(M.length<3||5===M.length||M.length>8)throw new Error("Invalid hex color: "+ze);(3===M.length||4===M.length)&&(M=Array.prototype.concat.apply([],M.map(function(ye){return[ye,ye]}))),6===M.length&&M.push("F","F");const L=parseInt(M.join(""),16);return{r:L>>24&255,g:L>>16&255,b:L>>8&255,a:255&L,hex:"#"+M.slice(0,6).join("")}}At.getOptions=function(M){M||(M={}),M.color||(M.color={});const ye=M.width&&M.width>=21?M.width:void 0;return{width:ye,scale:ye?4:M.scale||4,margin:typeof M.margin>"u"||null===M.margin||M.margin<0?4:M.margin,color:{dark:Ce(M.color.dark||"#000000ff"),light:Ce(M.color.light||"#ffffffff")},type:M.type,rendererOpts:M.rendererOpts||{}}},At.getScale=function(M,L){return L.width&&L.width>=M+2*L.margin?L.width/(M+2*L.margin):L.scale},At.getImageWidth=function(M,L){const ye=At.getScale(M,L);return Math.floor((M+2*L.margin)*ye)},At.qrToImageData=function(M,L,ye){const Be=L.modules.size,je=L.modules.data,Ze=At.getScale(Be,ye),Ie=Math.floor((Be+2*ye.margin)*Ze),He=ye.margin*Ze,Oe=[ye.color.light,ye.color.dark];for(let ce=0;ce<Ie;ce++)for(let Y=0;Y<Ie;Y++){let K=4*(ce*Ie+Y),ue=ye.color.light;ce>=He&&Y>=He&&ce<Ie-He&&Y<Ie-He&&(ue=Oe[je[Math.floor((ce-He)/Ze)*Be+Math.floor((Y-He)/Ze)]?1:0]),M[K++]=ue.r,M[K++]=ue.g,M[K++]=ue.b,M[K]=ue.a}}},1583:function($r){$r.exports=function(){"use strict";var At=function(){var Ce=0,ze=document.createElement("div");function M(Oe){return ze.appendChild(Oe.dom),Oe}function L(Oe){for(var ce=0;ce<ze.children.length;ce++)ze.children[ce].style.display=ce===Oe?"block":"none";Ce=Oe}ze.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",ze.addEventListener("click",function(Oe){Oe.preventDefault(),L(++Ce%ze.children.length)},!1);var ye=(performance||Date).now(),Be=ye,je=0,Ze=M(new At.Panel("FPS","#0ff","#002")),Ie=M(new At.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var He=M(new At.Panel("MB","#f08","#201"));return L(0),{REVISION:16,dom:ze,addPanel:M,showPanel:L,begin:function(){ye=(performance||Date).now()},end:function(){je++;var Oe=(performance||Date).now();if(Ie.update(Oe-ye,200),Be+1e3<=Oe&&(Ze.update(1e3*je/(Oe-Be),100),Be=Oe,je=0,He)){var ce=performance.memory;He.update(ce.usedJSHeapSize/1048576,ce.jsHeapSizeLimit/1048576)}return Oe},update:function(){ye=this.end()},domElement:ze,setMode:L}};return At.Panel=function(Ce,ze,M){var L=1/0,ye=0,Be=Math.round,je=Be(window.devicePixelRatio||1),Ze=80*je,Ie=48*je,He=3*je,Oe=2*je,ce=3*je,Y=15*je,K=74*je,ue=30*je,X=document.createElement("canvas");X.width=Ze,X.height=Ie,X.style.cssText="width:80px;height:48px";var Z=X.getContext("2d");return Z.font="bold "+9*je+"px Helvetica,Arial,sans-serif",Z.textBaseline="top",Z.fillStyle=M,Z.fillRect(0,0,Ze,Ie),Z.fillStyle=ze,Z.fillText(Ce,He,Oe),Z.fillRect(ce,Y,K,ue),Z.fillStyle=M,Z.globalAlpha=.9,Z.fillRect(ce,Y,K,ue),{dom:X,update:function(O,P){L=Math.min(L,O),ye=Math.max(ye,O),Z.fillStyle=M,Z.globalAlpha=1,Z.fillRect(0,0,Ze,Y),Z.fillStyle=ze,Z.fillText(Be(O)+" "+Ce+" ("+Be(L)+"-"+Be(ye)+")",He,Oe),Z.drawImage(X,ce+je,Y,K-je,ue,ce,Y,K-je,ue),Z.fillRect(ce+K-je,Y,je,ue),Z.fillStyle=M,Z.globalAlpha=.9,Z.fillRect(ce+K-je,Y,je,Be((1-O/P)*ue))}}},At}()},5835:($r,At,Ce)=>{"use strict";function ze(L,ye,Be,je,Ze,Ie,He){try{var Oe=L[Ie](He),ce=Oe.value}catch(Y){return void Be(Y)}Oe.done?ye(ce):Promise.resolve(ce).then(je,Ze)}function M(L){return function(){var ye=this,Be=arguments;return new Promise(function(je,Ze){var Ie=L.apply(ye,Be);function He(ce){ze(Ie,je,Ze,He,Oe,"next",ce)}function Oe(ce){ze(Ie,je,Ze,He,Oe,"throw",ce)}He(void 0)})}}Ce.d(At,{Z:()=>M})},3675:($r,At,Ce)=>{"use strict";Ce.d(At,{Bu:()=>Y,Cq:()=>He,Ee:()=>je,Yi:()=>Be,Yo:()=>ye,be:()=>ce,ln:()=>Oe,pc:()=>Ze,q9:()=>Ie});var ze=Ce(5835),M=Ce(2253),L=Ce(9542);function ye(ue,X){if((0,L.isNodeJs)()&&"bbox"!=X)return{x:0,y:0,width:parseInt(ue.attr("width")),height:parseInt(ue.attr("height"))};const Z=x=>{let p=ue.style(x);return p&&(0,L.isStr)(p)?(p=parseFloat(p.replace("px","")),Number.isFinite(p)?Math.round(p):0):0};let O=ue.node().getBoundingClientRect();"bbox"==X&&parseFloat(O.width)>0&&(O=ue.node().getBBox());let P={x:0,y:0,width:parseInt(O.width),height:parseInt(O.height)};return void 0!==O.left?(P.x=parseInt(O.left),P.y=parseInt(O.top)):void 0!==O.x&&(P.x=parseInt(O.x),P.y=parseInt(O.y)),(void 0===X||"nopadding"==X)&&(P.width-=Z("padding-left")+Z("padding-right"),P.height-=Z("padding-top")+Z("padding-bottom")),P}function Be(ue,X){for(;X&&!ue.empty()&&!ue.classed("root_canvas");){let Z=ue.attr("class");Z&&(Z.indexOf("root_frame")>=0||Z.indexOf("__root_pad_")>=0)&&(X.x+=ue.property("draw_x")||0,X.y+=ue.property("draw_y")||0),ue=(0,M.Ys)(ue.node().parentNode)}return X}function je(ue,X,Z){X||(X="6.4g");let O=(X=X.trim()).length;if(O<2)return Z?[ue.toFixed(4),"6.4f"]:ue.toFixed(4);let x,P=X[O-1],p=(X=X.slice(0,O-1)).indexOf(".");p=p<0?4:parseInt(X.slice(p+1)),(!Number.isInteger(p)||p<=0)&&(p=4);let w=!1;if("e"==P||"E"==P)x=!0;else if("Q"==P)x=!0,w=!0;else if("f"==P||"F"==P)x=!1;else if("W"==P)x=!1,w=!0;else{if("g"==P||"G"==P){let _=je(ue,X+"Q",!0),F=je(ue,X+"W",!0);return _[0].length<F[0].length&&(F=_),Z?F:F[0]}x=!1,p=4}if(x){w&&p--,p<0&&(p=0);let _=ue.toExponential(p);return Z?[_,"5."+p+"e"]:_}let m=ue.toFixed(p);if(w){ue&&0===Number(m)&&p>0&&(p=20,m=ue.toFixed(p));let _=0;for(;_<m.length&&("0"==m[_]||"-"==m[_]||"."==m[_]);)_++;let F=m.length-_-p;m.indexOf(".")>_&&F--,0!=F&&(p-=F,p<0?p=0:p>20&&(p=20),m=ue.toFixed(p))}return Z?[m,"5."+p+"f"]:m}class Ze{constructor(X){this.opt=(0,L.isStr)(X)?X.toUpperCase().trim():"",this.part=""}empty(){return 0===this.opt.length||0==this.opt.replace(/[ ;_,]/g,"").length}remain(){return this.opt}check(X,Z){let O=this.opt.indexOf(X);if(O<0)return!1;if(this.opt=this.opt.slice(0,O)+this.opt.slice(O+X.length),this.part="",!Z)return!0;let P=O;for(;P<this.opt.length&&" "!==this.opt[P]&&","!==this.opt[P]&&";"!==this.opt[P];)P++;return P>O&&(this.part=this.opt.slice(O,P),this.opt=this.opt.slice(0,O)+this.opt.slice(P)),!0}partAsInt(X,Z){let O=this.part.replace(/^\D+/g,"");return O=O?parseInt(O,10):Number.NaN,Number.isInteger(O)?O+(X||0):Z||0}partAsFloat(X,Z){let O=this.part.replace(/^\D+/g,"");return O=O?parseFloat(O):Number.NaN,Number.isFinite(O)?O+(X||0):Z||0}}class Ie{constructor(X){void 0!==X&&this.seed(X)}seed(X){(X=Math.abs(X))>1e8?X=Math.abs(1e8*Math.sin(X)):X<1&&(X*=1e8),this.m_w=Math.round(X),this.m_z=987654321}random(){if(void 0===this.m_z)return Math.random();this.m_z=36969*(65535&this.m_z)+(this.m_z>>16)&4294967295,this.m_w=18e3*(65535&this.m_w)+(this.m_w>>16)&4294967295;let X=(this.m_z<<16)+this.m_w&4294967295;return X/=4294967296,X+.5}}function He(ue,X,Z,O){const P=ue.indexOf("bezier")>=0;void 0===O&&(O=P?2:0),void 0===Z&&(Z=0);const x=(Me,de)=>(de.gry-Me.gry)/(de.grx-Me.grx);let T,$,m={path:"",close:""},_=X[0],F=Math.max(_.gry,Z+5),R=Math.round(_.grx),q=Math.round(_.gry),J=X.length;const ie=Me=>{let de=Math.round(Me);if(0==O||de===Me)return de.toString();let fe=Me.toFixed(O);for(;"0"==fe[fe.length-1]&&fe.lastIndexOf(".")<fe.length-1;)fe=fe.slice(0,fe.length-1);return"."==fe[fe.length-1]&&(fe=fe.slice(0,fe.length-1)),"-0"==fe&&(fe="0"),fe};if(m.path=("L"==ue[0]?"L":"M")+ie(_.grx)+","+ie(_.gry),(P||ue.indexOf("calc")>=0)&&(Me=>{let de,fe,I,U,z=(Me=>{let de=0,fe=Me.length-1,I=[],U=Me[0],z=Me[1],le=I[0]=x(U,z);for(;++de<fe;)U=z,z=Me[de+1],I[de]=(le+(le=x(U,z)))/2;return I[de]=le,I})(Me),le=-1,D=Me.length-1;for(;++le<D;)de=x(Me[le],Me[le+1]),Math.abs(de)<1e-6?z[le]=z[le+1]=0:(fe=z[le]/de,I=z[le+1]/de,U=fe*fe+I*I,U>9&&(U=3*de/Math.sqrt(U),z[le]=U*fe,z[le+1]=U*I));for(le=-1;++le<=D;)U=(Me[Math.min(D,le+1)].grx-Me[Math.max(0,le-1)].grx)/(6*(1+z[le]*z[le])),Me[le].dgrx=U||0,Me[le].dgry=z[le]*U||0})(X),P){m.path+=`C${ie(_.grx+_.dgrx)},${ie(_.gry+_.dgry)},`;for(let Me=1;Me<J;++Me){let de=_;_=X[Me],Me>1&&(m.path+="S"),m.path+=`${ie(_.grx-_.dgrx)},${ie(_.gry-_.dgry)},${ie(_.grx)},${ie(_.gry)}`,F=Math.max(F,de.gry)}}else if(J<1e4){let Me=0,de=0;const fe=()=>{Me&&(m.path+="h"+Me,Me=0),de&&(m.path+="v"+de,de=0)};for(let I=1;I<J;++I)_=X[I],T=Math.round(_.grx)-R,$=Math.round(_.gry)-q,T&&$?(fe(),m.path+=`l${T},${$}`):!T&&$?((0===de||$<0!=de<0)&&fe(),de+=$):T&&!$&&((0===Me||T<0!=Me<0)&&fe(),Me+=T),R+=T,q+=$,F=Math.max(F,q);fe()}else{let Me,de,fe=q,I=q,U=q;for(let z=1;z<J;++z)_=X[z],Me=Math.round(_.grx),de=Math.round(_.gry),F=Math.max(F,de),T=Me-R,0!==T?(fe!==I&&(fe!=q&&(m.path+="v"+(fe-q)),m.path+="v"+(I-fe),I!=U&&(m.path+="v"+(U-I)),q=U),$=de-q,m.path+=$?`l${T},${$}`:"h"+T,R=Me,q=de,U=fe=I=de):(fe=Math.min(fe,de),I=Math.max(I,de),U=de);fe!=I&&(fe!=q&&(m.path+="v"+(fe-q)),m.path+="v"+(I-fe),I!=U&&(m.path+="v"+(U-I)))}return Z>0&&(m.close=`L${ie(_.grx)},${ie(F)}h${ie(X[0].grx-_.grx)}Z`),m}function Oe(ue){return(ue=(ue=ue.replace(/url\(\&quot\;\#(\w+)\&quot\;\)/g,"url(#$1)").replace(/ class=\"\w*\"/g,"").replace(/ pad=\"\w*\"/g,"").replace(/ title=\"\"/g,"").replace(/<g objname=\"\w*\" objtype=\"\w*\"/g,"<g").replace(/<g transform=\"translate\(\d+\,\d+\)\"><\/g>/g,"").replace(/<g><\/g>/g,"")).replace(/<svg x=\"0\" y=\"0\" overflow=\"hidden\" width=\"\d+\" height=\"\d+\" viewBox=\"0 0 \d+ \d+\"><\/svg>/g,"")).indexOf("xlink:href")<0&&(ue=ue.replace(/ xmlns:xlink=\"http:\/\/www.w3.org\/1999\/xlink\"/g,"")),ue}class ce{constructor(X){this.divid=null,X&&this.setDom(X)}setDom(X){void 0!==X&&(this.divid=X,delete this._selected_main)}getDom(){return this.divid}selectDom(X){if(!this.divid)return(0,M.Ys)(null);let Z=this._selected_main;if(!Z){if((0,L.isStr)(this.divid)){let p=this.divid;"#"!=p[0]&&(p="#"+p),Z=(0,M.Ys)(p),Z.empty()||(this.divid=Z.node())}else Z=(0,M.Ys)(this.divid);this._selected_main=Z}if(!Z||Z.empty()||"origin"===X)return Z;let O=Z.property("use_enlarge"),x="simple"==(Z.property("layout")||"simple")?"":Z.property("layout_selector");return x&&(Z=Z.select(x)),!X&&!Z.empty()&&O&&(Z=(0,M.Ys)("#jsroot_enlarge_div")),Z}_accessTopPainter(X){let Z=this.selectDom().node()?.firstChild;return Z?(!0===X?Z.painter=this:!1===X&&delete Z.painter,Z.painter):null}setTopPainter(){this._accessTopPainter(!0)}getTopPainter(){return this._accessTopPainter()}clearTopPainter(){this._accessTopPainter(!1)}cleanup(X){this.clearTopPainter();let Z=this.selectDom("origin");!Z.empty()&&!X&&Z.html(""),this.divid=null,delete this._selected_main,(0,L.isFunc)(this._hpainter?.removePainter)&&this._hpainter.removePainter(this),delete this._hitemname,delete this._hdrawopt,delete this._hpainter}checkResize(){}testMainResize(X,Z,O){let P=this.enlargeMain("state"),x=this.selectDom("origin"),p=this.selectDom();"on"!==P&&Z&&Z.width&&Z.height&&x.style("width",Z.width+"px").style("height",Z.height+"px");let m=ye(x,!0),_=x.attr("can_resize"),F=!1;"height"==_&&O&&Math.abs(m.width*O-m.height)>.1*m.width&&(F=!0),(m.height<=5||m.width<=5)&&_&&"false"!==_&&(F=!0),F&&"on"!==P&&(m.width>5?(O=O||.66,x.style("height",Math.round(m.width*O)+"px")):"height"!==_&&x.style("width","200px").style("height","100px"));let R=ye(p),q=p.property("_jsroot_height"),T=p.property("_jsroot_width");return R.changed=!1,q&&T&&q>0&&T>0?(q!==R.height||T!==R.width)&&(R.changed=X>1||R.width/T<.9||R.width/T>1.1||R.height/q<.9||R.height/q>1.1):R.changed=!0,R.changed&&p.property("_jsroot_height",R.height).property("_jsroot_width",R.width),x.property("did_enlarge")&&(R.changed=!0,x.property("did_enlarge",!1)),R}enlargeMain(X,Z){let O=this.selectDom(!0),P=this.selectDom("origin");if(O.empty()||!L.settings.CanEnlarge||!1===P.property("can_enlarge"))return!1;if(void 0===X||"verify"===X)return!0;let x=P.property("use_enlarge")?"on":"off";if("state"===X)return x;"toggle"===X&&(X="off"===x);let p=(0,M.Ys)("#jsroot_enlarge_div");if(!0===X&&"on"!==x){if(!p.empty())return!1;p=(0,M.Ys)(document.body).append("div").attr("id","jsroot_enlarge_div").attr("style","position: fixed; margin: 0px; border: 0px; padding: 0px; left: 1px; right: 1px; top: 1px; bottom: 1px; background: white; opacity: 0.95; z-index: 100; overflow: hidden;");let w=ye(O),m=ye(p);if((m.width<=w.width||m.height<=w.height)&&m.width*m.height<w.width*w.height)return Z||console.log(`Enlarged area ${m.width} x ${m.height} smaller then original drawing ${w.width} x ${w.height}`),p.remove(),!1;for(;O.node().childNodes.length>0;)p.node().appendChild(O.node().firstChild);return P.property("use_enlarge",!0),P.property("did_enlarge",!0),!0}if(!1===X&&"off"!==x){for(;p.node()&&p.node().childNodes.length>0;)O.node().appendChild(p.node().firstChild);return p.remove(),P.property("use_enlarge",!1),P.property("did_enlarge",!0),!0}return!1}setItemName(X,Z,O){(0,L.isStr)(X)?this._hitemname=X:delete this._hitemname,(0,L.isStr)(Z)&&(this._hdrawopt=Z),this._hpainter=O}getItemName(){return this._hitemname??null}getItemDrawOpt(){return this._hdrawopt??""}}function Y(){return K.apply(this,arguments)}function K(){return(K=(0,ze.Z)(function*(){return Ce.e(993).then(Ce.t.bind(Ce,5993,19)).then(ue=>(L.internals.nodejs_window||(L.internals.nodejs_window=new ue.JSDOM("<!DOCTYPE html>hello").window,L.internals.nodejs_document=L.internals.nodejs_window.document,L.internals.nodejs_body=(0,M.Ys)(L.internals.nodejs_document).select("body")),{JSDOM:ue.JSDOM,doc:L.internals.nodejs_document,body:L.internals.nodejs_body}))})).apply(this,arguments)}},4953:($r,At,Ce)=>{"use strict";Ce.d(At,{G:()=>L});const ze=["Arial","iTimes New Roman","bTimes New Roman","biTimes New Roman","Arial","oArial","bArial","boArial","Courier New","oCourier New","bCourier New","boCourier New","Symbol","Times New Roman","Wingdings","iSymbol","Verdana","iVerdana","bVerdana","biVerdana"],M=[.5778,.5314,.5809,.554,.5778,.5783,.6034,.603,.6003,.6004,.6003,.6005,.5521,.5521,.5664,.5314,.5664,.5495,.5748,.5578];class L{constructor(Be,je,Ze,Ie,He,Oe){if(this.name="Arial",this.style=null,this.weight=null,Ze&&je<1&&(je*=Ze,this.scaled=!0),this.size=Math.round(je||11),this.scale=Ze,null!==Be){let ce=Math.floor(Be/10),Y=ze[ce]||"Arial";for(;Y;){if("b"===Y[0])this.weight="bold";else if("i"===Y[0])this.style="italic";else{if("o"!==Y[0])break;this.style="oblique"}Y=Y.slice(1)}this.name=Y,this.aver_width=M[ce]||.55}else this.name=Ie,this.style=He||null,this.weight=Oe||null,this.aver_width=this.weight?.58:.55;"Symbol"==this.name||"Wingdings"==this.name?(this.isSymbol=this.name,this.name="Times New Roman"):this.isSymbol="",this.func=this.setFont.bind(this)}setFont(Be,je){Be.attr("font-family",this.name),"without-size"!=je&&Be.attr("font-size",this.size).attr("xml:space","preserve"),Be.attr("font-weight",this.weight||null),Be.attr("font-style",this.style||null)}setSize(Be){this.size=Math.round(Be)}setColor(Be){this.color=Be}setAlign(Be){this.align=Be}setAngle(Be){this.angle=Be}roundAngle(Be,je){this.angle=parseInt(this.angle||0),Number.isInteger(this.angle)||(this.angle=0),this.angle=Math.round(this.angle/Be)*Be+(je||0),this.angle<0?this.angle+=360:this.angle>=360&&(this.angle-=360)}clearFont(Be){Be.attr("font-family",null).attr("font-size",null).attr("xml:space",null).attr("font-weight",null).attr("font-style",null)}isMonospace(){let Be=this.name.toLowerCase();return 0==Be.indexOf("courier")||"monospace"==Be||"monaco"==Be}getFontHtml(){let Be=Math.round(this.size)+"pt "+this.name;return this.weight&&(Be+=" "+this.weight),this.style&&(Be+=" "+this.style),Be}getFontName(){return this.isSymbol||this.name||"none"}}},6458:($r,At,Ce)=>{"use strict";Ce.d(At,{Eq:()=>p,FG:()=>K,O5:()=>O,SI:()=>x,SO:()=>ue,VE:()=>Y,VO:()=>w,X8:()=>P,tK:()=>ce});var ze=Ce(5835),M=Ce(2253),L=Ce(9542),ye=Ce(48),Be=Ce(3675),je=Ce(6417),Ze=Ce(3627),Ie=Ce(6367),He=Ce(4953),Oe=Ce(3038);class ce extends Be.be{constructor(_,F,R){super(_),this.pad_name=_?this.selectCurrentPad():"",this.assignObject(F),(0,L.isStr)(R)&&(this.options={original:R})}assignObject(_){(0,L.isObject)(_)?this.draw_object=_:delete this.draw_object}setPadName(_){this.pad_name=(0,L.isStr)(_)?_:this.selectCurrentPad()}getPadName(){return this.pad_name||""}assignSnapId(_){this.snapid=_}cleanup(){this.removeG();let _=!0;if(this.isMainPainter()){let F=this.getPadPainter();(!F||!1===F.normal_canvas)&&(_=!1)}delete this.pad_name,delete this._main_painter,this.draw_object=null,delete this.snapid,delete this.fillatt,delete this.lineatt,delete this.markeratt,delete this.bins,delete this.root_colors,delete this.options,delete this.options_store,delete this.rstyle,delete this.csstype,super.cleanup(_)}getObject(){return this.draw_object}getClassName(){return this.getObject()?._typename||""}matchObjectType(_){return!(!_||!this.draw_object)&&((0,L.isStr)(_)?this.draw_object._typename===_:_._typename?this.draw_object._typename===_._typename:this.draw_object._typename.match(_))}setItemName(_,F,R){if(super.setItemName(_,F,R),this.no_default_title||!_)return;let q=this.getCanvSvg();q.empty()?this.selectDom().attr("title",_):q.select("title").text(_);let T=this.getCanvPainter();T&&(T===this||this.isMainPainter()&&T===this.getPadPainter())&&T.drawItemNameOnCanvas(_)}storeDrawOpt(_){if(!this.options)return;_||(_="");let F=_.indexOf(";;");F>=0&&(_=_.slice(0,F)),this.options.original=_,this.options_store=Object.assign({},this.options)}getDrawOpt(){if(!this.options)return"";if((0,L.isFunc)(this.options.asString)){let _=!1,F=this.getPadPainter();if(!this.options_store||F?._interactively_changed)_=!0;else for(let R in this.options)this.options[R]!==this.options_store[R]&&(_=!0);if(_)return this.options.asString(this.isMainPainter(),F?.getRootPad())}return this.options.original||""}getSupportedDrawOptions(){let _=this.getPadPainter(),F=this.getObject();return F?._typename&&_?.getObjectDrawSettings?_.getObjectDrawSettings("ROOT."+F._typename,"nosame")?.opts:[]}redrawObject(_,F){if(!this.updateObject(_,F))return!1;let R=document.body.style.cursor;document.body.style.cursor="wait";let q=this.redrawPad();return document.body.style.cursor=R,q||!0}updateObject(_){return!!this.matchObjectType(_)&&(Object.assign(this.getObject(),_),!0)}getObjectHint(){let _=this.getItemName(),F=this.getObject();return _||(_=F&&F.fName?F.fName:""),_||(_=this.getClassName()),_.length>20&&(_=_.slice(0,17)+"..."),_}getColor(_){return this.root_colors||(this.root_colors=this.getCanvPainter()?.root_colors||(0,Oe._V)()),this.root_colors[_]}addColor(_){this.root_colors||(this.root_colors=this.getCanvPainter()?.root_colors||(0,Oe._V)());let F=this.root_colors.indexOf(_);return F>=0?F:(this.root_colors.push(_),this.root_colors.length-1)}isTooltipAllowed(){return!!(this.getCanvPainter()||this).tooltip_allowed}setTooltipAllowed(_){void 0===_&&(_=!0);let F=this.getCanvPainter()||this;F.tooltip_allowed="toggle"==_?!F.tooltip_allowed:_}checkResize(_){let F=this.getCanvPainter();return!!F&&(F.checkCanvasResize(_),!0)}removeG(){this.draw_g&&(this.draw_g.remove(),delete this.draw_g)}getG(){return this.draw_g}createG(_){let F;if(_){let R=this.getFrameSvg();if(R.empty())return console.error("Not found frame to create g element inside"),R;(0,L.isStr)(_)||(_="main_layer"),F=R.select("."+_)}else F=this.getLayerSvg("primitives_layer");return this.draw_g&&this.draw_g.node().parentNode!==F.node()&&(console.log("g element changes its layer!!"),this.removeG()),this.draw_g?this.draw_g.selectAll("*").remove():(this.draw_g=F.append("svg:g"),_||F.selectChildren(".most_upper_primitives").raise()),this.draw_object&&(this.draw_g.attr("objname",(this.draw_object.fName||"name").replace(/[^\w]/g,"_")),this.draw_g.attr("objtype",(this.draw_object._typename||"type").replace(/[^\w]/g,"_"))),this.draw_g.property("in_frame",!!_),this.draw_g}getCanvSvg(){return this.selectDom().select(".root_canvas")}getPadSvg(_){void 0===_&&(_=this.pad_name);let F=this.getCanvSvg();if(!_||F.empty())return F;let R=F.property("pad_painter");return R&&R.pads_cache&&R.pads_cache[_]?(0,M.Ys)(R.pads_cache[_]):(F=F.select(".primitives_layer .__root_pad_"+_),R&&(R.pads_cache||(R.pads_cache={}),R.pads_cache[_]=F.node()),F)}getLayerSvg(_,F){let R=this.getPadSvg(F);if(R.empty())return R;0==_.indexOf("prim#")&&(R=R.select(".primitives_layer"),_=_.slice(5));let q=R.node().firstChild;for(;q;){let T=(0,M.Ys)(q);if(T.classed(_))return T;q=q.nextSibling}return(0,M.Ys)(null)}selectCurrentPad(_){let F=this.getCanvSvg();if(F.empty())return"";let R=F.property("current_pad");return void 0!==_&&F.property("current_pad",_),R}getPadPainter(_){let F=this.getPadSvg((0,L.isStr)(_)?_:void 0);return F.empty()?null:F.property("pad_painter")}getCanvPainter(){let _=this.getCanvSvg();return _.empty()?null:_.property("pad_painter")}getAxisToSvgFunc(_,F){let R={isndc:_,nornd:F},q=this.draw_g&&this.draw_g.property("in_frame");if(q&&(R.main=this.getFramePainter()),R.main?.grx&&R.main?.gry)F?(R.x=function(T){return this.main.grx(T)},R.y=function(T){return this.main.gry(T)}):(R.x=function(T){return Math.round(this.main.grx(T))},R.y=function(T){return Math.round(this.main.gry(T))});else if(q)console.error(`Problem to create functor for ${this.getClassName()}`),R.x=()=>0,R.y=()=>0;else{let T=this.getPadPainter();_||(R.pad=T?.getRootPad(!0)),R.padw=T?.getPadWidth()??10,R.x=function($){return this.pad&&(this.pad.fLogx&&($=$>0?Math.log10($):this.pad.fUxmin),$=($-this.pad.fX1)/(this.pad.fX2-this.pad.fX1)),$*=this.padw,this.nornd?$:Math.round($)},R.padh=T?.getPadHeight()??10,R.y=function($){return this.pad&&(this.pad.fLogy&&($=$>0?Math.log10($):this.pad.fUymin),$=($-this.pad.fY1)/(this.pad.fY2-this.pad.fY1)),$=(1-$)*this.padh,this.nornd?$:Math.round($)}}return R}axisToSvg(_,F,R,q){return this.getAxisToSvgFunc(R,q)[_](F)}svgToAxis(_,F,R){if(this.draw_g&&this.draw_g.property("in_frame"))return this.getFramePainter()?.revertAxis(_,F)??0;let T=this.getPadPainter(),$=T?"y"==_?1-F/T.getPadHeight():F/T.getPadWidth():0,J=R||!T?null:T.getRootPad(!0);return J&&("y"==_?($=J.fY1+$*(J.fY2-J.fY1),J.fLogy&&($=Math.pow(10,$))):($=J.fX1+$*(J.fX2-J.fX1),J.fLogx&&($=Math.pow(10,$)))),$}getFrameSvg(_){let F=this.getLayerSvg("primitives_layer",_);if(F.empty())return F;let R=F.node().firstChild;for(;R;){let q=(0,M.Ys)(R);if(q.classed("root_frame"))return q;R=R.nextSibling}return(0,M.Ys)(null)}getFramePainter(){return this.getPadPainter()?.getFramePainter()}getMainPainter(_){let F=this._main_painter;if(!F){let R=this.getPadPainter();F=R?R.getMainPainter():this.getTopPainter(),F||(F=null),_||(this._main_painter=F)}return F}isMainPainter(){return this===this.getMainPainter()}setAsMainPainter(_){let F=this.getPadPainter();F?F.setMainPainter(this,_):this.setTopPainter()}addToPadPrimitives(_){void 0!==_&&this.setPadName(_);let F=this.getPadPainter(_);return!(!F||F===this||(F.painters.indexOf(this)<0&&F.painters.push(this),!this.rstyle&&F.next_rstyle&&(this.rstyle=F.next_rstyle),0))}removeFromPadPrimitives(){let _=this.getPadPainter();if(!_||_===this)return!1;let F=_.painters.indexOf(this);return F>=0&&_.painters.splice(F,1),!0}createAttMarker(_){(0,L.isObject)(_)?void 0!==_.fMarkerColor&&void 0!==_.fMarkerStyle&&void 0!==_.fMarkerSize&&(_={attr:_,std:!1}):_={std:!0},void 0===_.std&&(_.std=!0),void 0===_.painter&&(_.painter=this);let F=_.std?this.markeratt:null;return F?(!F.changed||_.force)&&F.setArgs(_):F=new je.M(_),_.std&&(this.markeratt=F),F}createAttLine(_){(0,L.isObject)(_)?void 0!==_.fLineColor&&void 0!==_.fLineStyle&&void 0!==_.fLineWidth&&(_={attr:_,std:!1}):_={std:!0},void 0===_.std&&(_.std=!0),void 0===_.painter&&(_.painter=this);let F=_.std?this.lineatt:null;return F?(!F.changed||_.force)&&F.setArgs(_):F=new Ie.rE(_),_.std&&(this.lineatt=F),F}createAttFill(_){(0,L.isObject)(_)?_._typename&&void 0!==_.fFillColor&&void 0!==_.fFillStyle&&(_={attr:_,std:!1}):_={std:!0},void 0===_.std&&(_.std=!0);let F=_.std?this.fillatt:null;return _.svg||(_.svg=this.getCanvSvg()),void 0===_.painter&&(_.painter=this),F?(!F.changed||_.force)&&F.setArgs(_):F=new Ze.Y(_),_.std&&(this.fillatt=F),F}forEachPainter(_,F){let R=this.getPadPainter();if(R)R.forEachPainterInPad(_,F);else{let q=this.getTopPainter();q&&"pads"!==F&&_(q)}}interactiveRedraw(_,F,R){var q=this;return(0,ze.Z)(function*(){let T,$;return(0,L.isStr)(F)&&0!=F.indexOf("exec:")&&(T=F),"pad"==_?$=q.redrawPad(T):!1!==_&&($=q.redraw(T)),(0,L.getPromise)($).then(()=>{let J=q.getCanvPainter();return(0,L.isFunc)(J?.producePadEvent)&&J.producePadEvent("redraw",q.getPadPainter(),q,null,R),(0,L.isFunc)(J?.processChanges)&&J.processChanges(F,q,R),q})})()}redrawPad(_){var F=this;return(0,ze.Z)(function*(){let R=F.getPadPainter();return!!R&&R.redrawPad(_)})()}executeMenuCommand(_){return"Inspect"==_.fName&&this.showInspector()}submitCanvExec(_,F){if(!_||!(0,L.isStr)(_))return;let R=this.getCanvPainter();(0,L.isFunc)(R?.submitExec)&&R.submitExec(this,_,F)}deleteAttr(){delete this.lineatt,delete this.fillatt,delete this.markeratt}showInspector(){return!1}fillContextMenu(_){let F=this.getObjectHint();return this.getObject()&&"_typename"in this.getObject()&&(F=this.getObject()._typename+"::"+F),_.add("header:"+F),_.addAttributesMenu(this),_.size()>0&&this.showInspector("check")&&_.add("Inspect",this.showInspector),_.size()>0}showObjectStatus(_,F,R,q){let T=this.getCanvPainter();if(T&&!(0,L.isFunc)(T.showCanvasStatus)&&(T=null),!T&&!(0,L.isFunc)(L.internals.showStatus)||"on"===this.enlargeMain("state"))return!1;if(void 0===_&&void 0===F){let $=this.getObject();if(!$)return;_=this.getItemName()||$.fName,F=$.fTitle||$._typename,R=$._typename}T?T.showCanvasStatus(_,F,R,q):L.internals.showStatus(_,F,R,q)}redraw(){}startTextDrawing(_,F,R,q){if(R||(R=this.draw_g),!R||R.empty())return;let T="font"===F?_:new He.G(_,F),$=this.getPadPainter();R.call(T.func),R.property("draw_text_completed",!1).property("all_args",[]).property("text_font",T).property("text_factor",0).property("max_text_width",0).property("max_font_size",q).property("_fast_drawing",$?._fast_drawing||!1),R.property("_fast_drawing")&&R.property("_font_too_small",q&&q<5||T.size<4)}scaleTextDrawing(_,F){F||(F=this.draw_g),F&&!F.empty()&&_&&_>F.property("text_factor")&&F.property("text_factor",_)}_checkAllTextDrawing(_,F,R){let q=_.property("all_args"),T=0;if(q||(console.log("Text drawing is finished - why calling _checkAllTextDrawing?????"),q=[]),q.forEach(U=>{U.ready||T++}),T>0)return void((0,L.isFunc)(F)&&(_.node().textResolveFunc=F,_.node().try_optimize=R));_.property("all_args",null);let $=_.property("text_factor"),J=_.property("text_font"),ie=_.property("max_font_size"),Me=J.size,de=!1,fe=!0;$>0&&($<.9||$>1)&&(J.size=Math.max(1,Math.floor(J.size/$))),ie&&J.size>ie&&(J.size=ie),J.size!=Me&&(_.call(J.func),Me=J.size),q.forEach(U=>{if(U.mj_node&&U.applyAttributesToMathJax){let z=U.mj_node.select("svg");U.applyAttributesToMathJax(this,U.mj_node,z,U,Me,$),delete U.mj_node,fe=!1}else U.txt_g&&(fe=!1)}),F||(F=_.node().textResolveFunc,R=_.node().try_optimize,delete _.node().textResolveFunc,delete _.node().try_optimize);let I=R&&fe?[]:null;q.forEach(U=>{let z,le,D=1;if(U.txt_node)z=U.txt_node,delete U.txt_node,le=!0,null!==I&&I.push(z);else{if(!U.txt_g)return;z=U.txt_g,delete U.txt_g,le=!1}if(z.attr("visibility",null),de=!0,U.width&&("middle"==U.align[0]?U.x+=U.width/2:"end"==U.align[0]&&(U.x+=U.width)),U.height&&(0===U.align[1].indexOf("bottom")?U.y+=U.height:"middle"==U.align[1]&&(U.y+=U.height/2)),U.dx=U.dy=0,le)(0,L.isNodeJs)()?U.scale&&$>0&&(U.box.width*=1/$,U.box.height*=1/$):!U.plain&&!U.fast&&(U.box=(0,Be.Yo)(z,"bbox")),U.plain?(z.attr("text-anchor",U.align[0]),"top"==U.align[1]?z.attr("dy",".8em"):"middle"==U.align[1]&&((0,L.isNodeJs)()?z.attr("dy",".4em"):z.attr("dominant-baseline","middle"))):(z.attr("text-anchor","start"),U.dx=("middle"==U.align[0]?-.5:"end"==U.align[0]?-1:0)*U.box.width,U.dy=("top"==U.align[1]?U.top_shift||1:"middle"==U.align[1]?U.mid_shift||.5:0)*U.box.height);else if(U.text_rect){let _e=U.text_rect;D=$>0&&Math.abs(1-$)>.01?1/$:1,U.dx=("middle"==U.align[0]?-.5:"end"==U.align[0]?-1:0)*_e.width*D,"top"==U.align[1]?U.dy=-_e.y1*D:"bottom"==U.align[1]?U.dy=-_e.y2*D:"middle"==U.align[1]&&(U.dy=-.5*(_e.y1+_e.y2)*D)}else console.error("text rect not calcualted - please check code");U.rotate||(U.x+=U.dx,U.y+=U.dy,U.dx=U.dy=0);let oe="";U.y?oe=`translate(${Math.round(U.x)},${Math.round(U.y)})`:U.x&&(oe=`translate(${Math.round(U.x)})`),U.rotate&&(oe+=` rotate(${Math.round(U.rotate)})`),1!==D&&(oe+=` scale(${D.toFixed(3)})`),U.dy?oe+=` translate(${Math.round(U.dx)},${Math.round(U.dy)})`:U.dx&&(oe+=` translate(${Math.round(U.dx)})`),oe&&z.attr("transform",oe)}),de||J.clearFont(_),null!==I&&I.length>1&&["fill","text-anchor"].forEach(U=>{let z=I[0].attr(U);I.forEach(le=>{let D=le.attr(U);(!D||D!==z)&&(z=void 0)}),z&&(_.attr(U,z),I.forEach(le=>{le.attr(U,null)}))}),F&&F(this)}_postprocessDrawText(_,F){return _.box=(0,L.isNodeJs)()||L.settings.ApproxTextSize||_.fast?_.text_rect||{height:1.2*_.font_size,width:_.text.length*_.font_size*_.font.aver_width}:(0,Be.Yo)(F,"bbox"),F.attr("visibility","hidden"),_.box.width>_.draw_g.property("max_text_width")&&_.draw_g.property("max_text_width",_.box.width),_.scale&&this.scaleTextDrawing(Math.max(1.05*_.box.width/_.width,1*_.box.height/_.height),_.draw_g),_.result_width=_.box.width,_.result_height=_.box.height,(0,L.isFunc)(_.post_process)&&_.post_process(this),_.box.width}drawText(_){if(_.text||(_.text=""),_.draw_g=_.draw_g||this.draw_g,!_.draw_g||_.draw_g.empty())return;let F=_.draw_g.property("text_font");_.font=F,F&&(F.color&&!_.color&&(_.color=F.color),F.align&&!_.align&&(_.align=F.align),F.angle&&!_.rotate&&(_.rotate=F.angle));let R=["start","middle"];if((0,L.isStr)(_.align)?(R=_.align.split(";"),1==R.length&&R.push("middle")):"number"==typeof _.align?(_.align/10>=3?R[0]="end":_.align/10>=2&&(R[0]="middle"),_.align%10==0?R[1]="bottom":_.align%10==1?R[1]="bottom-base":_.align%10==3&&(R[1]="top")):(0,L.isObject)(_.align)&&2==_.align.length&&(R=_.align),void 0===_.latex&&(_.latex=1),_.align=R,_.x=_.x||0,_.y=_.y||0,_.scale=_.width&&_.height&&!_.font_size,_.width=_.width||0,_.height=_.height||0,_.draw_g.property("_fast_drawing"))if(_.scale){if(_.height<4)return 0}else if(_.font_size){if(_.font_size<4)return 0}else if(_.draw_g.property("_font_too_small"))return 0;_.draw_g.property("all_args").push(_),_.ready=!1;let q=2==_.latex;return 1===_.latex&&(q=L.settings.Latex==L.constants.Latex.AlwaysMathJax||L.settings.Latex==L.constants.Latex.MathJax&&_.text.match(/[#{\\]/g)||_.text.match(/[\\]/g)),!q||_.nomathjax?(_.txt_node=_.draw_g.append("svg:text"),_.color&&_.txt_node.attr("fill",_.color),_.font_size?_.txt_node.attr("font-size",_.font_size):_.font_size=F.size,_.plain=!_.latex||L.settings.Latex==L.constants.Latex.Off||L.settings.Latex==L.constants.Latex.Symbols,_.simple_latex=_.latex&&L.settings.Latex==L.constants.Latex.Symbols,!_.plain||_.simple_latex||_.font&&_.font.isSymbol?(_.simple_latex||(0,ye.$1)(_.text)||_.plain?(_.simple_latex=!0,(0,ye.TT)(this,_.txt_node,_)):(_.txt_node.remove(),delete _.txt_node,_.txt_g=_.draw_g.append("svg:g"),(0,ye.ug)(this,_.txt_g,_)),_.ready=!0,this._postprocessDrawText(_,_.txt_g||_.txt_node),_.draw_g.property("draw_text_completed")&&this._checkAllTextDrawing(_.draw_g),0):(_.plain=!0,_.txt_node.text(_.text),_.ready=!0,this._postprocessDrawText(_,_.txt_node))):(_.mj_node=_.draw_g.append("svg:g").attr("visibility","hidden"),(0,ye.hs)(this,_.mj_node,_).then(()=>{_.ready=!0,_.draw_g.property("draw_text_completed")&&this._checkAllTextDrawing(_.draw_g)}),0)}finishTextDrawing(_,F){var R=this;return(0,ze.Z)(function*(){return _||(_=R.draw_g),!(!_||_.empty())&&(_.property("draw_text_completed",!0),new Promise(q=>{R._checkAllTextDrawing(_,q,F)}))})()}configureUserContextMenu(_){_&&(0,L.isFunc)(_)?this._userContextMenuFunc=_:delete this._userContextMenuFunc}fillObjectExecMenu(_,F){var R=this;return(0,ze.Z)(function*(){if(R._userContextMenuFunc)return R._userContextMenuFunc(_,F);let q=R.getCanvPainter();if(!R.snapid||!q||q?._readonly||!q?._websocket)return _;function T(ie){let Me=this.exec_painter||this,de=Me.getCanvPainter(),fe=Me.args_menu_items[parseInt(ie)];if(fe&&fe.fName){if("Show:Editor"==fe.fExec)return void((0,L.isFunc)(de?.activateGed)&&de.activateGed(Me));if((!(0,L.isFunc)(de?.executeObjectMethod)||!de.executeObjectMethod(Me,fe,Me.args_menu_id))&&!Me.executeMenuCommand(fe)&&Me.args_menu_id){if(!fe.fArgs)return de?.v7canvas?de.submitExec(Me,fe.fExec,F):Me.submitCanvExec(fe.fExec,Me.args_menu_id);fe.fClassName=Me.getClassName(),(Me.args_menu_id.indexOf("#x")>0||Me.args_menu_id.indexOf("#y")>0||Me.args_menu_id.indexOf("#z")>0)&&(fe.fClassName=L.clTAxis),_.showMethodArgsDialog(fe).then(I=>{if(!I||Me.executeMenuCommand(fe,I))return;let U=fe.fExec.slice(0,fe.fExec.length-1)+I+")";de?.v7canvas?de.submitExec(Me,U,F):de&&de.sendWebsocket(`OBJEXEC:${Me.args_menu_id}:${U}`)})}}}const $=(ie,Me,de,fe)=>{if(R._got_menu)return;R._got_menu=!0,fe&&Me!==fe.fId&&console.error(`missmatch between request ${Me} and reply ${fe.fId} identifiers`);let I=fe?fe.fItems:null;if(I&&I.length){let U;ie.size()>0&&ie.add("separator"),R.args_menu_items=I,R.args_menu_id=fe.fId;for(let z=0;z<I.length;++z){let le=I[z];if(le.fClassName&&U&&U!=le.fClassName&&(ie.add("endsub:"),U=""),U!=le.fClassName){U=le.fClassName;let D=U.lastIndexOf("::"),oe=D>0?U.slice(D+2):U;ie.add("sub:"+oe.replace(/[<>]/g,"_"))}void 0===le.fChecked||le.fChecked<0?ie.add(le.fName,z,T):ie.addchk(le.fChecked,le.fName,z,T)}U&&ie.add("endsub:")}de(ie)};let J=R.snapid;return F&&(J+="#"+F),R._got_menu=!1,_.painter&&(_.painter.exec_painter=_.painter!==R?R:void 0),new Promise(ie=>{setTimeout(()=>$(_,J,ie),2e3),q.submitMenuRequest(R,F,J).then(Me=>$(_,J,ie,Me))})})()}configureUserTooltipHandler(_,F){_&&(0,L.isFunc)(_)?(this._user_tooltip_handler=_,this._user_tooltip_timeout=F||100):(delete this._user_tooltip_handler,delete this._user_tooltip_timeout)}configureUserClickHandler(_){let F=this.getFramePainter();(0,L.isFunc)(F?.configureUserClickHandler)&&F.configureUserClickHandler(_)}configureUserDblclickHandler(_){let F=this.getFramePainter();(0,L.isFunc)(F?.configureUserDblclickHandler)&&F.configureUserDblclickHandler(_)}hasUserTooltip(){return(0,L.isFunc)(this._user_tooltip_handler)}provideUserTooltip(_){if(!this.hasUserTooltip())return;if(this._user_tooltip_timeout<=0)return this._user_tooltip_handler(_);if(this._user_tooltip_handle&&(clearTimeout(this._user_tooltip_handle),delete this._user_tooltip_handle),!_)return this._user_tooltip_handler(_);let F=_;this._user_tooltip_handle=setTimeout(()=>{delete this._user_tooltip_handle,this._user_tooltip_handler&&this._user_tooltip_handler(F)},this._user_tooltip_timeout)}provideSpecialDrawArea(_){var F=this;return(0,ze.Z)(function*(){return _==F._special_draw_area||F.getCanvPainter().toggleProjection(_).then(()=>(F._special_draw_area=_,!0))})()}drawInSpecialArea(_,F){var R=this;return(0,ze.Z)(function*(){let q=R.getCanvPainter();return!(!R._special_draw_area||!(0,L.isFunc)(q?.drawProjection))&&q.drawProjection(R._special_draw_area,_,F)})()}getToolTip(_){if(void 0===_?.clientX||void 0===_?.clientY)return null;let F=this.getFrameSvg();if(F.empty())return null;let R=F.select(".main_layer");if(R.empty())return null;let q=(0,M.cx)(_,R.node()),T={touch:!1,x:q[0],y:q[1]};if((0,L.isFunc)(this.extractToolTip))return this.extractToolTip(T);T.disabled=!0;let $=(0,L.isFunc)(this.processTooltipEvent)?this.processTooltipEvent(T):null;return $?.user_info||$}}function Y(m,_){let F=new Be.be(m);return F.txt=_,F.redrawObject=function(R){return this.txt=R,this.drawText(),!0},F.drawText=(0,ze.Z)(function*(){let R=this.txt._typename&&this.txt._typename==L.clTObjString?this.txt.fString:this.txt.value;(0,L.isStr)(R)||(R="<undefined>");let q=this.txt.mathjax||L.settings.Latex==L.constants.Latex.AlwaysMathJax;if(!q&&!("as_is"in this.txt)){let J=R.split("\n");R="";for(let ie=0;ie<J.length;++ie)R+=`<pre style='margin:0'>${J[ie]}</pre>`}let T=this.selectDom(),$=T.select("div");return $.empty()&&($=T.append("div").attr("style","max-width:100%;max-height:100%;overflow:auto")),$.html(R),this.setTopPainter(),q&&(0,ye.jR)(T.node()),this}),F.drawText()}function K(m){return new ce(m).getCanvPainter()}function ue(m){return new ce(m).getMainPainter(!0)}let Z=null;function O(m){if(m.active){let _=Z?Z.getFramePainter():null;_&&_.setFrameActive(!1),Z=m.pp,_=Z?Z.getFramePainter():null,_&&_.setFrameActive(!0)}else Z===m.pp&&(Z=null)}function P(){return Z}function x(m,_){!0===_?_={force:!0}:(0,L.isObject)(_)||(_=null);let F=!1;return new ce(m).forEachPainter(R=>{!F&&(0,L.isFunc)(R.checkResize)&&(F=R.checkResize(_))}),F}function p(m){let _=new ce(m),F=[];return _.forEachPainter(R=>{F.indexOf(R)<0&&F.push(R)}),F.forEach(R=>R.cleanup()),_.selectDom().html(""),F}const w={kDecimals:(0,L.BIT)(7),kTickPlus:(0,L.BIT)(9),kTickMinus:(0,L.BIT)(10),kAxisRange:(0,L.BIT)(11),kCenterTitle:(0,L.BIT)(12),kCenterLabels:(0,L.BIT)(14),kRotateTitle:(0,L.BIT)(15),kPalette:(0,L.BIT)(16),kNoExponent:(0,L.BIT)(17),kLabelsHori:(0,L.BIT)(18),kLabelsVert:(0,L.BIT)(19),kLabelsDown:(0,L.BIT)(20),kLabelsUp:(0,L.BIT)(21),kIsInteger:(0,L.BIT)(22),kMoreLogLabels:(0,L.BIT)(23),kOppositeTitle:(0,L.BIT)(32)}},3627:($r,At,Ce)=>{"use strict";Ce.d(At,{Y:()=>ye});var ze=Ce(9542),M=Ce(2253),L=Ce(3038);class ye{constructor(je){this.color="none",this.colorindx=0,this.pattern=0,this.used=!0,this.kind=je.kind||2,this.changed=!1,this.func=this.apply.bind(this),this.setArgs(je),this.changed=!1}setArgs(je){(0,ze.isObject)(je.attr)&&(void 0===je.pattern&&void 0!==je.attr.fFillStyle&&(je.pattern=je.attr.fFillStyle),void 0===je.color&&void 0!==je.attr.fFillColor&&(je.color=je.attr.fFillColor));let Ze=this.changed;this.change(je.color,je.pattern,je.svg,je.color_as_svg,je.painter),this.changed=Ze}apply(je){this.used=!0,je.style("fill",this.getFillColor()),"opacity"in this&&je.style("opacity",this.opacity),"antialias"in this&&je.style("antialias",this.antialias)}getFillColor(){return this.pattern_url||this.color}getFillColorAlt(je){return this.color&&"none"!=this.color?this.color:je}empty(){let je=this.getFillColor();return!je||"none"==je}hasColor(){return this.color&&"none"!=this.color}setSolidColor(je){delete this.pattern_url,this.color=je,this.pattern=1001}setOpacity(je){this.opacity=je}isSolid(je){return 1001===this.pattern&&(!je||je==this.color)}verifyDirectChange(je){(0,ze.isStr)(this.pattern)&&(this.pattern=parseInt(this.pattern)),Number.isInteger(this.pattern)||(this.pattern=0),this.change(this.color,this.pattern,je?je.getCanvSvg():null,!0,je)}change(je,Ze,Ie,He,Oe){if(delete this.pattern_url,this.changed=!0,void 0!==je&&Number.isInteger(parseInt(je))&&!He&&(this.colorindx=parseInt(je)),void 0!==Ze&&Number.isInteger(parseInt(Ze))&&(this.pattern=parseInt(Ze),delete this.opacity,delete this.antialias),1e3==this.pattern&&0===this.colorindx)return this.pattern_url="white",!0;if(1e3==this.pattern&&(this.pattern=1001),this.pattern<1001)return this.pattern_url="none",!0;if(this.isSolid()&&0===this.colorindx&&1===this.kind&&!He)return this.pattern_url="none",!0;let ce=this.colorindx;if(He?(this.color=je,"none"!=je&&(ce=(0,M.$_)(je).hex().slice(1))):this.color=Oe?Oe.getColor(ce):(0,L.Lq)(ce),(0,ze.isStr)(this.color)||(this.color="none"),this.isSolid())return!0;if(this.pattern>=4e3&&this.pattern<=4100)return this.opacity=(this.pattern-4e3)/100,!0;if(!Ie||Ie.empty()||this.pattern<3e3||"none"==this.color)return!1;let Y=`pat_${this.pattern}_${ce}`,K=Ie.select(".canvas_defs");if(K.empty()&&(K=Ie.insert("svg:defs",":first-child").attr("class","canvas_defs")),this.pattern_url=`url(#${Y})`,this.antialias=!1,!K.select("."+Y).empty())return!0;let ue="",X=null,Z="",O="",P=2,x=2;switch(this.pattern){case 3001:P=x=2,Z="M0,0h1v1h-1zM1,1h1v1h-1z";break;case 3002:P=4,x=2,Z="M1,0h1v1h-1zM3,1h1v1h-1z";break;case 3003:P=x=4,Z="M2,1h1v1h-1zM0,3h1v1h-1z";break;case 3004:P=x=8,ue="M8,0L0,8";break;case 3005:P=x=8,ue="M0,0L8,8";break;case 3006:P=x=4,ue="M1,0v4";break;case 3007:P=x=4,ue="M0,1h4";break;case 3008:P=x=10,Z="M0,3v-3h3ZM7,0h3v3ZM0,7v3h3ZM7,10h3v-3ZM5,2l3,3l-3,3l-3,-3Z",ue="M0,3l5,5M3,10l5,-5M10,7l-5,-5M7,0l-5,5";break;case 3009:P=12,x=12,ue="M0,0A6,6,0,0,0,12,0M6,6A6,6,0,0,0,12,12M6,6A6,6,0,0,1,0,12",X="none";break;case 3010:P=x=10,ue="M0,2h10M0,7h10M2,0v2M7,2v5M2,7v3";break;case 3011:P=9,x=18,ue="M5,0v8M2,1l6,6M8,1l-6,6M9,9v8M6,10l3,3l-3,3M0,9v8M3,10l-3,3l3,3",X="none";break;case 3012:P=10,x=20,ue="M5,1A4,4,0,0,0,5,9A4,4,0,0,0,5,1M0,11A4,4,0,0,1,0,19M10,11A4,4,0,0,0,10,19",X="none";break;case 3013:P=x=7,ue="M0,0L7,7M7,0L0,7",X="none";break;case 3014:P=x=16,ue="M0,0h16v16h-16v-16M0,12h16M12,0v16M4,0v8M4,4h8M0,8h8M8,4v8",X="none";break;case 3015:P=6,x=12,ue="M2,1A2,2,0,0,0,2,5A2,2,0,0,0,2,1M0,7A2,2,0,0,1,0,11M6,7A2,2,0,0,0,6,11",X="none";break;case 3016:P=12,x=7,ue="M0,1A3,2,0,0,1,3,3A3,2,0,0,0,9,3A3,2,0,0,1,12,1",X="none";break;case 3017:P=x=4,ue="M3,1l-2,2";break;case 3018:P=x=4,ue="M1,1l2,2";break;case 3019:P=x=12,ue="M1,6A5,5,0,0,0,11,6A5,5,0,0,0,1,6h-1h1A5,5,0,0,1,6,11v1v-1A5,5,0,0,1,11,6h1h-1A5,5,0,0,1,6,1v-1v1A5,5,0,0,1,1,6",X="none";break;case 3020:P=7,x=12,ue="M1,0A2,3,0,0,0,3,3A2,3,0,0,1,3,9A2,3,0,0,0,1,12",X="none";break;case 3021:P=x=8,ue="M8,2h-2v4h-4v2M2,0v2h-2",X="none";break;case 3022:P=x=8,ue="M0,2h2v4h4v2M6,0v2h2",X="none";break;case 3023:P=x=8,Z="M4,0h4v4zM8,4v4h-4z",O="M4,0L0,4L4,8L8,4Z";break;case 3024:P=x=16,Z="M0,8v8h2v-8zM8,0v8h2v-8M4,14v2h12v-2z",O="M0,2h8v6h4v-6h4v12h-12v-6h-4z";break;case 3025:P=x=18,Z="M5,13v-8h8ZM18,0v18h-18l5,-5h8v-8Z";break;default:if(this.pattern>3025&&this.pattern<3100){P=4,x=2,Z="M1,0h1v1h-1zM3,1h1v1h-1z";break}let w=this.pattern%1e3,m=w%10,_=(w-m)%100/10,F=(w-10*_-m)/100;if(!F)break;let T,$,J,ie,Me,de,fe,q=F*(6*Math.round(2*Math.max(.5,ze.gStyle.fHatchesSpacing)));P=x=6*q;const I=(U,z)=>{for(T=[],$=q,Me=0,fe=x,Math.abs(U)<3&&($=Math.round(q/12*9)),0==U?($=Math.round(q/12*8),Me=$/2):U>0?fe-=$:Me=$;Me<=fe;)de=Me+U*$,de<0?(ie=Math.round(Me/(Me-de)*P),T.push(0,Me,ie,0),T.push(P,x-Me,P-ie,x)):de>x?(ie=Math.round((x-Me)/(de-Me)*P),T.push(0,Me,ie,x),T.push(P,x-Me,P-ie,0)):T.push(0,Me,P,de),Me+=$;for(let le=0;le<T.length;le+=4)z?(J=T[le+1],Me=T[le],ie=T[le+3],de=T[le+2]):(J=T[le],Me=T[le+1],ie=T[le+2],de=T[le+3]),ue+=`M${J},${Me}`,ue+=de==Me?"h"+(ie-J):ie==J?"v"+(de-Me):`L${ie},${de}`};switch(_){case 0:I(0);break;case 1:I(1);break;case 2:I(2);break;case 3:I(3);break;case 4:I(6);break;case 6:I(3,!0);break;case 7:I(2,!0);break;case 8:I(1,!0);break;case 9:I(0,!0)}switch(m){case 0:_&&I(0);break;case 1:I(-1);break;case 2:I(-2);break;case 3:I(-3);break;case 4:I(-6);break;case 6:I(-3,!0);break;case 7:I(-2,!0);break;case 8:I(-1,!0);break;case 9:9!=_&&I(0,!0)}}if(!Z&&!ue)return!1;let p=K.append("svg:pattern").attr("id",Y).attr("class",Y).attr("patternUnits","userSpaceOnUse").attr("width",P).attr("height",x);if(O){let w=(0,M.B8)(this.color);w.r=Math.round((w.r+255)/2),w.g=Math.round((w.g+255)/2),w.b=Math.round((w.b+255)/2),p.append("svg:path").attr("d",O).style("fill",w)}return Z&&p.append("svg:path").attr("d",Z).style("fill",this.color),ue&&p.append("svg:path").attr("d",ue).style("stroke",this.color).style("stroke-width",ze.gStyle.fHatchesLineWidth).style("fill",X),!0}createSample(je,Ze,Ie,He){He&&(je=(0,M.Ys)(je));const Oe=new ye({svg:je,pattern:this.pattern,color:this.color,color_as_svg:!0});je.append("path").attr("d",`M0,0h${Ze}v${Ie}h${-Ze}z`).call(Oe.func)}saveToStyle(je,Ze){if(je){let Ie=this.colorindx??(0,L.Kv)(this.color);Ie>=0&&(ze.gStyle[je]=Ie)}Ze&&(ze.gStyle[Ze]=this.pattern)}}},6367:($r,At,Ce)=>{"use strict";Ce.d(At,{p:()=>je,rE:()=>Be});var ze=Ce(2253),M=Ce(9542),L=Ce(3038);const ye=["","","3,3","1,2","3,4,1,4","5,3,1,3","5,3,1,3,1,3,1,3","5,5","5,3,1,3,1,3","20,5","20,10,1,10","1,3"];class Be{constructor(Ie){this.func=this.apply.bind(this),this.used=!0,Ie._typename&&void 0!==Ie.fLineStyle&&(Ie={attr:Ie}),this.setArgs(Ie)}setArgs(Ie){Ie.attr?(this.color_index=Ie.attr.fLineColor,Ie.color=Ie.color0||(Ie.painter?Ie.painter.getColor(this.color_index):(0,L.Lq)(this.color_index)),void 0===Ie.width&&(Ie.width=Ie.attr.fLineWidth),void 0===Ie.style&&(Ie.style=Ie.attr.fLineStyle)):(0,M.isStr)(Ie.color)?"none"!==Ie.color&&!Ie.width&&(Ie.width=1):"number"==typeof Ie.color&&(this.color_index=Ie.color,Ie.color=Ie.painter?Ie.painter.getColor(Ie.color):(0,L.Lq)(Ie.color)),void 0===Ie.width&&(Ie.width=Ie.color&&"none"!=Ie.color?1:0),this.color=0===Ie.width?"none":Ie.color,this.width=Ie.width,this.style=Ie.style,this.pattern=Ie.pattern||ye[this.style]||null,Ie.can_excl&&(this.excl_side=this.excl_width=0,Math.abs(this.width)>99&&(this.excl_side=this.width<0?-1:1,this.excl_width=5*Math.floor(this.width/100),this.width=Math.abs(this.width%100))),!this.color&&this.width>0&&(this.color="lightgrey")}changeExcl(Ie,He){void 0!==He&&(this.excl_width=He),void 0!==Ie&&(this.excl_side=Ie,0===this.excl_width&&0!==this.excl_side&&(this.excl_width=20)),this.changed=!0}empty(){return"none"==this.color}setBorder(Ie,He){this.rx=Ie,this.ry=He,this.func=this.applyBorder.bind(this)}apply(Ie){this.used=!0,this.empty()?Ie.style("stroke",null).style("stroke-width",null).style("stroke-dasharray",null):Ie.style("stroke",this.color).style("stroke-width",this.width).style("stroke-dasharray",this.pattern)}applyBorder(Ie){this.used=!0,this.empty()?Ie.style("stroke",null).style("stroke-width",null).style("stroke-dasharray",null).attr("rx",null).attr("ry",null):Ie.style("stroke",this.color).style("stroke-width",this.width).style("stroke-dasharray",this.pattern).attr("rx",this.rx||null).attr("ry",this.ry||null)}change(Ie,He,Oe){void 0!==Ie&&(this.color!==Ie&&delete this.color_index,this.color=Ie),void 0!==He&&(this.width=He),void 0!==Oe&&(this.style=Oe,this.pattern=ye[this.style]||null),this.changed=!0}verifyDirectChange(){this.change(this.color,parseInt(this.width),parseInt(this.style))}createSample(Ie,He,Oe,ce){ce&&(Ie=(0,ze.Ys)(Ie)),Ie.append("path").attr("d",`M0,${Oe/2}h${He}`).call(this.func)}saveToStyle(Ie,He,Oe){if(Ie){let ce=void 0!==this.color_index?this.color_index:(0,L.Kv)(this.color);ce>=0&&(M.gStyle[Ie]=ce)}He&&(M.gStyle[He]=this.width),Oe&&(M.gStyle[Oe]=this.style)}}function je(Ze){return(Ze<0||Ze>=ye.length)&&(Ze=11),ye[Ze]}},6417:($r,At,Ce)=>{"use strict";Ce.d(At,{M:()=>Be});var ze=Ce(9542),M=Ce(2253),L=Ce(3038);const ye=[0,1,2,3,4,5,106,107,104,1,1,1,1,1,1,1,1,1,1,1,104,125,126,132,4,25,26,27,28,130,30,3,32,127,128,35,36,37,38,137,40,140,42,142,44,144,46,146,148,149];class Be{constructor(Ze){this.x0=this.y0=0,this.color="black",this.style=1,this.size=8,this.scale=1,this.stroke=!0,this.fill=!0,this.marker="",this.ndig=0,this.used=!0,this.changed=!1,this.func=this.apply.bind(this),this.setArgs(Ze),this.changed=!1}setArgs(Ze){(0,ze.isObject)(Ze)&&"number"==typeof Ze.fMarkerStyle&&(Ze={attr:Ze}),Ze.attr&&(void 0===Ze.color&&(Ze.color=Ze.painter?Ze.painter.getColor(Ze.attr.fMarkerColor):(0,L.Lq)(Ze.attr.fMarkerColor)),(!Ze.style||Ze.style<0)&&(Ze.style=Ze.attr.fMarkerStyle),Ze.size||(Ze.size=Ze.attr.fMarkerSize)),this.color=Ze.color,this.style=Ze.style,this.size=Ze.size,this.refsize=Ze.refsize,this._configure()}resetPos(){this.lastx=this.lasty=null}create(Ze,Ie){if(!this.optimized)return`M${(Ze+this.x0).toFixed(this.ndig)},${(Ie+this.y0).toFixed(this.ndig)}${this.marker}`;let He=Math.round(Ze),Oe=Math.round(Ie),ce=`M${He},${Oe}`;if(null!==this.lastx)if(He==this.lastx&&Oe==this.lasty)ce="";else{let Y=`m${He-this.lastx},${Oe-this.lasty}`;Y.length<ce.length&&(ce=Y)}return this.lastx=He+1,this.lasty=Oe,ce+"h1"}getFullSize(){return this.scale*this.size}getMarkerLength(){return this.marker?this.marker.length:10}change(Ze,Ie,He){this.changed=!0,void 0!==Ze&&(this.color=Ze),void 0!==Ie&&Ie>=0&&(this.style=Ie),void 0!==He&&(this.size=He),this._configure()}_configure(){if(this.x0=this.y0=0,1===this.style||777===this.style)return this.fill=!1,this.marker="h1",this.size=1,this.optimized=!0,this.resetPos(),!0;this.optimized=!1;let Ze=ye[this.style]??104,Ie=Ze%100;this.fill=Ze>=100,this.scale=this.refsize||8;let He=this.getFullSize();this.ndig=He>7?0:He>2?1:2,30==Ie&&this.ndig++;let Oe=He.toFixed(this.ndig),ce=(He/2).toFixed(this.ndig),Y=(He/3).toFixed(this.ndig),K=(He/4).toFixed(this.ndig),ue=(He/8).toFixed(this.ndig),X=(3*He/8).toFixed(this.ndig);switch(Ie){case 1:this.marker="h1";break;case 2:this.y0=-He/2,this.marker=`v${Oe}m-${ce},-${ce}h${Oe}`;break;case 3:this.x0=this.y0=-He/2,this.marker=`l${Oe},${Oe}m0,-${Oe}l-${Oe},${Oe}m0,-${ce}h${Oe}m-${ce},-${ce}v${Oe}`;break;case 4:this.x0=-parseFloat(ce),Oe=(2*parseFloat(ce)).toFixed(this.ndig),this.marker=`a${ce},${ce},0,1,0,${Oe},0a${ce},${ce},0,1,0,-${Oe},0z`;break;case 5:this.x0=this.y0=-He/2,this.marker=`l${Oe},${Oe}m0,-${Oe}l-${Oe},${Oe}`;break;case 6:this.x0=-1,this.marker="a1,1,0,1,0,2,0a1,1,0,1,0,-2,0z";break;case 7:this.x0=-1.5,this.marker="a1.5,1.5,0,1,0,3,0a1.5,1.5,0,1,0,-3,0z";break;case 25:this.x0=this.y0=-He/2,this.marker=`v${Oe}h${Oe}v-${Oe}z`;break;case 26:this.y0=-He/2,this.marker=`l-${ce},${Oe}h${Oe}z`;break;case 27:default:this.y0=-He/2,this.marker=`l${Y},${ce}l-${Y},${ce}l-${Y},-${ce}z`;break;case 28:this.x0=this.y0=He/6,this.marker=`h${Y}v-${Y}h-${Y}v-${Y}h-${Y}v${Y}h-${Y}v${Y}h${Y}v${Y}h${Y}z`;break;case 30:this.y0=-He/2;let Z=(5*He/6).toFixed(this.ndig),O=(5*He/8).toFixed(this.ndig);this.marker=`l${Y},${Oe}l-${Z},-${O}h${Oe}l-${Z},${O}z`;break;case 32:this.y0=He/2,this.marker=`l-${ce},-${Oe}h${Oe}z`;break;case 35:this.x0=-He/2,this.marker=`l${ce},${ce}l${ce},-${ce}l-${ce},-${ce}zh${Oe}m-${ce},-${ce}v${Oe}`;break;case 36:this.x0=this.y0=-He/2,this.marker=`h${Oe}v${Oe}h-${Oe}zl${Oe},${Oe}m0,-${Oe}l-${Oe},${Oe}`;break;case 37:this.x0=-He/2,this.marker=`h${Oe}l-${K},-${ce}l-${ce},${Oe}h${ce}l-${ce},-${Oe}z`;break;case 38:this.x0=-He/4,this.y0=-He/2,this.marker=`h${ce}l${K},${K}v${ce}l-${K},${K}h-${ce}l-${K},-${K}v-${ce}zm${K},0v${Oe}m-${ce},-${ce}h${Oe}`;break;case 40:this.x0=-He/4,this.y0=-He/2,this.marker=`l${ce},${Oe}l${K},-${K}l-${Oe},-${ce}zm${ce},0l-${ce},${Oe}l-${K},-${K}l${Oe},-${ce}z`;break;case 42:this.y0=-He/2,this.marker=`l${ue},${X}l${X},${ue}l-${X},${ue}l-${ue},${X}l-${ue},-${X}l-${X},-${ue}l${X},-${ue}z`;break;case 44:this.x0=-He/4,this.y0=-He/2,this.marker=`h${ce}l-${ue},${X}l${X},-${ue}v${ce}l-${X},-${ue}l${ue},${X}h-${ce}l${ue},-${X}l-${X},${ue}v-${ce}l${X},${ue}z`;break;case 46:this.x0=-He/4,this.y0=-He/2,this.marker=`l${K},${K}l${K},-${K}l${K},${K}l-${K},${K}l${K},${K}l-${K},${K}l-${K},-${K}l-${K},${K}l-${K},-${K}l${K},-${K}l-${K},-${K}z`;break;case 48:this.x0=-He/4,this.y0=-He/2,this.marker=`l${K},${K}l-${K},${K}l-${K},-${K}zm${ce},0l${K},${K}l-${K},${K}l-${K},-${K}zm0,${ce}l${K},${K}l-${K},${K}l-${K},-${K}zm-${ce},0l${K},${K}l-${K},${K}l-${K},-${K}z`;break;case 49:this.x0=-He/6,this.y0=-He/2,this.marker=`h${Y}v${Y}h-${Y}zm${Y},${Y}h${Y}v${Y}h-${Y}zm-${Y},${Y}h${Y}v${Y}h-${Y}zm-${Y},-${Y}h${Y}v${Y}h-${Y}z`}return!0}getStrokeColor(){return this.stroke?this.color:"none"}getFillColor(){return this.fill?this.color:"none"}empty(){return"none"===this.color||!this.fill&&!this.stroke}apply(Ze){Ze.style("stroke",this.stroke?this.color:"none").style("fill",this.fill?this.color:"none")}verifyDirectChange(){this.change(this.color,parseInt(this.style),parseFloat(this.size))}createSample(Ze,Ie,He,Oe){Oe&&(Ze=(0,M.Ys)(Ze)),this.resetPos(),Ze.append("path").attr("d",this.create(Ie/2,He/2)).call(this.func)}}},1968:($r,At,Ce)=>{"use strict";Ce.d(At,{$Y:()=>He,B_:()=>R,JV:()=>x,Qy:()=>w,Sh:()=>Y,XZ:()=>m,cM:()=>X,iq:()=>K,mF:()=>p,oc:()=>Oe,rq:()=>q,sU:()=>Ie,v2:()=>Z,vm:()=>_,wu:()=>O});var ze=Ce(5835),M=Ce(2253),L=Ce(9900),ye=Ce(9542),Be=Ce(3675),je=Ce(6417),Ze=Ce(6367);const Ie=new L.Zxw(L.Qm_);function He(T,$,J){if(T){void 0!==J&&(globalThis.docuemnt=J);let U=new L.uMZ;return U.setPrecision($),U}const ie=";stroke-opacity:1;stroke-width:1;stroke-linecap:round",Me=";fill-opacity:1";let de={svg_attr:{},svg_style:{},path_attr:{},accPath:"",createElementNS(U,z){return"path"==z?{_wrapper:this,setAttribute(le,D){if("style"==le&&D){let oe=D.indexOf(ie);oe>=0&&oe==D.length-ie.length&&(D=D.slice(0,D.length-ie.length));let _e=D.indexOf(Me);_e>=0&&_e==D.length-Me.length&&(D=D.slice(0,D.length-Me.length))}this._wrapper.path_attr[le]=D}}:"svg"!=z?(console.error(`not supported element for SVGRenderer ${z}`),null):{_wrapper:this,childNodes:[],style:this.svg_style,setAttribute(le,D){this._wrapper.svg_attr[le]=D},appendChild(le){this._wrapper.accPath+=`<path style="${this._wrapper.path_attr.style}" d="${this._wrapper.path_attr.d}"/>`,this._wrapper.path_attr={}},removeChild(le){this.childNodes=[]}}}},fe=globalThis.document;globalThis.document=de;let I=new L.uMZ;return globalThis.document=fe,I.doc_wrapper=de,I.originalRender=I.render,I.render=function(U,z){let le=globalThis.document;globalThis.document=this.doc_wrapper,this.originalRender(U,z),globalThis.document=le},I.clearHTML=function(){this.doc_wrapper.accPath=""},I.makeOuterHTML=function(){let U=this.doc_wrapper;return`<svg xmlns="http://www.w3.org/2000/svg" viewBox="${U.svg_attr.viewBox}" width="${U.svg_attr.width}" height="${U.svg_attr.height}"${U.svg_style.backgroundColor?` style="background:${U.svg_style.backgroundColor}"`:""}>${U.accPath}</svg>`},I.setPrecision($),I}function Oe(T){T||(T=(0,ye.isBatchMode)()?ye.settings.Render3DBatch:ye.settings.Render3D);let $=ye.constants.Render3D;return T==$.Default&&(T=(0,ye.isBatchMode)()?$.WebGLImage:$.WebGL),(0,ye.isBatchMode)()&&T==$.WebGL&&(T=$.WebGLImage),T}let ce={access3dKind(T){let $=this.getPadSvg();if($.empty())return-1;let J=$.property("can3d");return void 0!==T&&$.property("can3d",T),J??-1},getSizeFor3d(T,$){void 0===T&&(T=(T=Oe())!==ye.constants.Render3D.WebGL?ye.constants.Embed3D.EmbedSVG:ye.settings.Embed3D!=ye.constants.Embed3D.Default?ye.settings.Embed3D:ye.browser.isFirefox||ye.browser.chromeVersion>95?ye.constants.Embed3D.Embed:ye.constants.Embed3D.Overlay);let J=this.getPadSvg(),ie="draw3d_"+(this.getPadName()||"canvas");if(J.empty()){let U=(0,Be.Yo)(this.selectDom());return U.height<10&&U.width>10&&(U.height=Math.round(.66*U.width),this.selectDom().style("height",U.height+"px")),U.x=0,U.y=0,U.clname=ie,U.can3d=-1,U}let fe,Me=this.getFramePainter(),de=this.getPadPainter();if(Me?.mode3d&&T>0)fe=Me.getFrameRect();else{let U=T>0?J:this.getCanvSvg();fe={x:0,y:0,width:U.property("draw_width"),height:U.property("draw_height")},Number.isNaN(fe.width)||Number.isNaN(fe.height)?(fe.width=de.getPadWidth(),fe.height=de.getPadHeight()):Me&&!Me.mode3d&&(U=this.getFrameSvg(),fe.x=U.property("draw_x"),fe.y=U.property("draw_y"))}fe.clname=ie,fe.can3d=T;let I=de?.getPadRect();if(I){let U=Math.round(.07*fe.width),z=Math.round(.05*fe.height);fe.x=Math.max(0,fe.x-U),fe.y=Math.max(0,fe.y-z),fe.width=Math.min(fe.width+2*U,I.width-fe.x),fe.height=Math.min(fe.height+2*z,I.height-fe.y)}return 1===T&&(fe=(0,Be.Yi)(this.getPadSvg(),fe)),fe},clear3dCanvas(){let T=this.access3dKind(null);if(T<0){let J=this.selectDom().node(),ie=J?J.firstChild:null;return ie&&!ie.$jsroot&&(ie=ie.nextSibling),ie&&ie.$jsroot&&(delete ie.painter,J.removeChild(ie)),T}let $=this.getSizeFor3d(T);if(0===$.can3d)(0,M.Ys)(this.getCanvSvg().node().nextSibling).remove(),this.getCanvSvg().style("display",null);else{if(this.getPadSvg().empty())return;this.apply3dSize($).remove(),this.getFrameSvg().style("display",null)}return T},add3dCanvas(T,$,J){if($&&!(T.can3d<-1)){if(-1===T.can3d){let ie=this.selectDom().node();return void(null!==ie&&(ie.appendChild($),$.painter=this,$.$jsroot=!0))}if(T.can3d>0&&!J&&(T.can3d=ye.constants.Embed3D.EmbedSVG),this.access3dKind(T.can3d),0===T.can3d)this.getCanvSvg().style("display","none"),this.getCanvSvg().node().parentNode.appendChild($);else{if(this.getPadSvg().empty())return;this.getFrameSvg().style("display","none"),this.apply3dSize(T).attr("title","").node().appendChild($)}}},apply3dSize(T,$){if(T.can3d<0)return(0,M.Ys)(null);let J;if(T.can3d>1){if(J=this.getLayerSvg(T.clname),$)return J;let ie=this.getPadSvg();T.can3d===ye.constants.Embed3D.EmbedSVG?(J.empty()&&(J=ie.insert("g",".primitives_layer").attr("class",T.clname)),J.attr("transform",`translate(${T.x},${T.y})`)):(J.empty()&&(J=ie.insert("foreignObject",".primitives_layer").attr("class",T.clname)),J.attr("x",T.x).attr("y",T.y).attr("width",T.width).attr("height",T.height).attr("viewBox",`0 0 ${T.width} ${T.height}`).attr("preserveAspectRatio","xMidYMid"))}else{let ie=this.getCanvSvg().node().parentNode;if(J=(0,M.Ys)(ie).select("."+T.clname),$)return J;this.getCanvSvg().property("redraw_by_resize",!0),J.empty()&&(J=(0,M.Ys)(ie).append("div").attr("class",T.clname).style("user-select","none"));let Me=ie.getBoundingClientRect();for(;ie;){if(ie===document){ie=null;break}try{if("static"!==getComputedStyle(ie).position)break}catch{break}ie=ie.parentNode}let de=ie?.getBoundingClientRect()??{top:0,left:0},fe=Math.round(Me.left-de.left),I=Math.round(Me.top-de.top);J.style("position","absolute").style("left",T.x+fe+"px").style("top",T.y+I+"px").style("width",T.width+"px").style("height",T.height+"px")}return J}};function Y(T){Object.assign(T,ce)}function K(T,$,J,ie){return ue.apply(this,arguments)}function ue(){return(ue=(0,ze.Z)(function*(T,$,J,ie){let de,Me=ye.constants.Render3D,fe=!1,I=(0,ye.getDocument)();if(J=Oe(J),ie||(ie={antialias:!0,alpha:!0}),J==Me.WebGL)de=Promise.resolve(new L.CP7(ie));else if(J==Me.SVG){let U=He(!1,0,I);(0,ye.isBatchMode)()?fe=!0:U.jsroot_dom=I.createElementNS("http://www.w3.org/2000/svg","svg"),de=Promise.resolve(U)}else if((0,ye.isNodeJs)())de=Ce.e(478).then(Ce.t.bind(Ce,9478,19)).then(U=>(ie.canvas=U.default.createCanvas(T,$),ie.canvas.addEventListener=function(){},ie.canvas.removeEventListener=function(){},ie.canvas.style={},Ce.e(908).then(Ce.t.bind(Ce,1908,19)))).then(U=>{let z=U.default(T,$,{preserveDrawingBuffer:!0});if(!z)throw Error("Fail to create headless-gl");ie.context=z,z.canvas=ie.canvas;let le=new L.CP7(ie);return le.jsroot_output=new L.dd2(T,$),le.setRenderTarget(le.jsroot_output),fe=!0,le});else{let U=new L.CP7(ie);U.jsroot_dom=I.createElementNS("http://www.w3.org/2000/svg","image"),(0,M.Ys)(U.jsroot_dom).attr("width",T).attr("height",$),de=Promise.resolve(U)}return de.then(U=>(fe?(ye.internals.svg_3ds||(ye.internals.svg_3ds=[]),U.workaround_id=ye.internals.svg_3ds.length,ye.internals.svg_3ds[U.workaround_id]="<svg></svg>",U.jsroot_dom=I.createElementNS("http://www.w3.org/2000/svg","path"),U.jsroot_dom.setAttribute("jsroot_svg_workaround",U.workaround_id)):U.jsroot_dom||(U.jsroot_dom=U.domElement),U.setSize(T,$),U.jsroot_render3d=J,U.setJSROOTSize=function(z,le){if(this.jsroot_render3d===ye.constants.Render3D.WebGLImage&&!(0,ye.isBatchMode)()&&!(0,ye.isNodeJs)())return(0,M.Ys)(this.jsroot_dom).attr("width",z).attr("height",le)},U))})).apply(this,arguments)}function X(T){if(T)if((0,ye.isNodeJs)()){let J=((0,ye.isFunc)(T.getContext)?T.getContext():null)?.getExtension("STACKGL_destroy_context");J&&J.destroy()}else ye.browser.isChrome&&(0,ye.isFunc)(T.forceContextLoss)&&T.forceContextLoss(),(0,ye.isFunc)(T.dispose)&&T.dispose()}function Z(T){T.clearHTML&&T.clearHTML()}function O(T){let $=ye.constants.Render3D;if(T.jsroot_render3d!=$.WebGL)if(T.jsroot_render3d==$.SVG)if((0,ye.isBatchMode)())ye.internals.svg_3ds[T.workaround_id]=T.makeOuterHTML();else{let J=T.jsroot_dom.parentNode;J&&(J.innerHTML=T.makeOuterHTML(),T.jsroot_dom=J.firstChild)}else if((0,ye.isNodeJs)()){let J=T.domElement,ie=J.getContext("2d"),Me=new Uint8Array(4*J.width*J.height);T.readRenderTargetPixels(T.jsroot_output,0,0,J.width,J.height,Me);let I,U,de=0,fe=4*(J.height-1)*J.width;for(;de<fe;){for(I=0;I<4*J.width;++I)U=Me[de+I],Me[de+I]=Me[fe+I],Me[fe+I]=U;de+=4*J.width,fe-=4*J.width}let z=ie.createImageData(J.width,J.height);z.data.set(Me),ie.putImageData(z,0,0);let le=J.toDataURL("image/png");ye.internals.svg_3ds[T.workaround_id]=`<image width="${J.width}" height="${J.height}" xlink:href="${le}"></image>`}else{let J=T.domElement.toDataURL("image/png");(0,M.Ys)(T.jsroot_dom).attr("xlink:href",J)}}ye.internals.processSvgWorkarounds=function(T,$){if(!ye.internals.svg_3ds)return T;for(let J=0;J<ye.internals.svg_3ds.length;++J)T=T.replace(`<path jsroot_svg_workaround="${J}"></path>`,ye.internals.svg_3ds[J]);return $||(ye.internals.svg_3ds=void 0),T};class P{constructor($,J){this.tt=null,this.cont=null,this.lastlbl="",this.parent=$||document.body,this.canvas=J,this.abspos=!$}checkParent($){$&&this.parent!==$&&(this.hide(),this.parent=$)}extract_pos($){if((0,ye.isObject)($)&&void 0!==$.u&&void 0!==$.l)return $;let J={u:0,l:0};return this.abspos?(J.l=$.pageX,J.u=$.pageY):(J.l=$.offsetX,J.u=$.offsetY),J}pos($){if(!this.tt)return;let J=this.extract_pos($);if(!this.abspos){let ie=this.parent.getBoundingClientRect(),Me=this.canvas.getBoundingClientRect();void 0!==ie.left&&void 0!==Me.left&&(J.l+=Me.left-ie.left),void 0!==ie.top&&void 0!==Me.top&&(J.u+=Me.top-ie.top),J.l+this.tt.offsetWidth+3>=this.parent.offsetWidth&&(J.l=this.parent.offsetWidth-this.tt.offsetWidth-3),J.u+this.tt.offsetHeight+15>=this.parent.offsetHeight&&(J.u=this.parent.offsetHeight-this.tt.offsetHeight-15);let de=this.parent;for(;de;){let fe=getComputedStyle(de);if(!fe||"static"!==fe.position||!de.parentNode||1!=de.parentNode.nodeType)break;de=de.parentNode}if(de&&de!==this.parent){let fe=de.getBoundingClientRect();J.l+=ie.left-fe.left,J.u+=ie.top-fe.top}}this.tt.style.top=J.u+15+"px",this.tt.style.left=J.l+3+"px"}show($){if(!$)return this.hide();if((0,ye.isObject)($)&&($.lines||$.line)){if($.only_status)return this.hide();if($.line)$=$.line;else{let J=$.lines[0];for(let ie=1;ie<$.lines.length;++ie)J+="<br/>"+$.lines[ie];$=J}}null===this.tt&&(this.tt=document.createElement("div"),this.tt.setAttribute("style","opacity: 1; filter: alpha(opacity=1); position: absolute; display: block; overflow: hidden; z-index: 101;"),this.cont=document.createElement("div"),this.cont.setAttribute("style","display: block; padding: 2px 12px 3px 7px; margin-left: 5px; font-size: 11px; background: #777; color: #fff;"),this.tt.appendChild(this.cont),this.parent.appendChild(this.tt)),this.lastlbl!==$&&(this.cont.innerHTML=$,this.lastlbl=$,this.tt.style.width="auto")}hide(){null!==this.tt&&this.parent.removeChild(this.tt),this.tt=null,this.lastlbl=""}}function x(T,$,J,ie,Me){let de=null,fe=ye.settings.Zooming&&ye.settings.ZoomMouse,I=(0,ye.isFunc)(T.processMouseClick);function U(oe){if(de){if(de.mouse_zoom_mesh)return oe.stopImmediatePropagation(),void oe.stopPropagation();if(!(void 0!==oe.button&&0!==oe.button||void 0!==oe.buttons&&1!==oe.buttons)){if(de.enable_zoom&&(de.mouse_zoom_mesh=de.detectZoomMesh(oe),de.mouse_zoom_mesh))return oe.stopImmediatePropagation(),void oe.stopPropagation();de.enable_select&&(de.mouse_select_pnt=de.getMousePos(oe,{}))}}}function z(oe){if(de){if(de.mouse_zoom_mesh&&de.mouse_zoom_mesh.point2&&de.painter.get3dZoomCoord){let _e=de.mouse_zoom_mesh.object.zoom,Ee=de.painter.get3dZoomCoord(de.mouse_zoom_mesh.point,_e),Ve=de.painter.get3dZoomCoord(de.mouse_zoom_mesh.point2,_e);if(Ee>Ve){let Qe=Ee;Ee=Ve,Ve=Qe}"z"===_e&&de.mouse_zoom_mesh.object.use_y_for_z&&(_e="y"),Ee<Ve&&de.painter.zoom(_e,Ee,Ve)&&(de.mouse_zoom_mesh=null)}if(de.enable_zoom&&de.removeZoomMesh(),de.enable_select&&de.mouse_select_pnt){let _e=de.getMousePos(oe,{}),Ee=_e.x==de.mouse_select_pnt.x&&_e.y==de.mouse_select_pnt.y;if(delete de.mouse_select_pnt,Ee){let Ve=de.getMouseIntersects(_e);de.painter.processMouseClick(_e,Ve,oe)}}}}function D(oe){if(!de)return;if(function le(oe){return!(!oe||void 0===oe.renderer)&&void 0!==oe.render_tmout}(de.painter)||de.mouse_zoom_mesh)return oe.preventDefault(),oe.stopPropagation(),void oe.stopImmediatePropagation();let _e=de.detectZoomMesh(oe);if(_e&&(oe.preventDefault(),oe.stopPropagation(),oe.stopImmediatePropagation(),(0,ye.isFunc)(de.painter?.analyzeMouseWheelEvent))){let Ee=_e.object.zoom,Ve=_e.point[Ee],Qe={name:Ee,ignore:!1};switch(Ee){case"x":Ve=(Ve+de.painter.size_x3d)/2/de.painter.size_x3d;break;case"y":Ve=(Ve+de.painter.size_y3d)/2/de.painter.size_y3d;break;case"z":Ve=Ve/2/de.painter.size_z3d}de.painter.analyzeMouseWheelEvent(oe,Qe,Ve,!1),"z"===Ee&&_e.object.use_y_for_z&&(Ee="y"),de.painter.zoom(Ee,Qe.min,Qe.max)}}return ye.settings.Zooming&&ye.settings.ZoomWheel&&ie.domElement.addEventListener("wheel",D),(fe||I)&&(ie.domElement.addEventListener("pointerdown",U),ie.domElement.addEventListener("pointerup",z)),de=new L.zxs($,ie.domElement),de.enableDamping=!1,de.dampingFactor=1,de.enableZoom=!0,de.enableKeys=ye.settings.HandleKeys,Me&&(de.target.copy(Me),de.target0.copy(Me),de.update()),de.tooltip=new P(T.selectDom().node(),ie.domElement),de.painter=T,de.camera=$,de.scene=J,de.renderer=ie,de.raycaster=new L.iMs,de.raycaster.params.Line.threshold=10,de.raycaster.params.Points.threshold=5,de.mouse_zoom_mesh=null,de.block_ctxt=!1,de.block_mousemove=!1,de.cursor_changed=!1,de.control_changed=!1,de.control_active=!1,de.mouse_ctxt={x:0,y:0,on:!1},de.enable_zoom=fe,de.enable_select=I,de.cleanup=function(){ye.settings.Zooming&&ye.settings.ZoomWheel&&this.domElement.removeEventListener("wheel",D),(this.enable_zoom||this.enable_select)&&(this.domElement.removeEventListener("pointerdown",U),this.domElement.removeEventListener("pointerup",z)),this.domElement.removeEventListener("click",this.lstn_click),this.domElement.removeEventListener("dblclick",this.lstn_dblclick),this.domElement.removeEventListener("contextmenu",this.lstn_contextmenu),this.domElement.removeEventListener("mousemove",this.lstn_mousemove),this.domElement.removeEventListener("mouseleave",this.lstn_mouseleave),this.dispose(),this.tooltip.hide(),delete this.tooltip,delete this.painter,delete this.camera,delete this.scene,delete this.renderer,delete this.raycaster,delete this.mouse_zoom_mesh},de.HideTooltip=function(){this.tooltip.hide()},de.getMousePos=function(oe,_e){return _e.x="offsetX"in oe?oe.offsetX:oe.layerX,_e.y="offsetY"in oe?oe.offsetY:oe.layerY,_e.clientX=oe.clientX,_e.clientY=oe.clientY,_e},de.getOriginDirectionIntersects=function(oe,_e){this.raycaster.set(oe,_e);let Ee=this.raycaster.intersectObjects(this.scene.children,!0);return(0,ye.isFunc)(this.painter.filterIntersects)&&(Ee=this.painter.filterIntersects(Ee)),Ee},de.getMouseIntersects=function(oe){if(!this.renderer)return[];let _e=this.renderer instanceof L.CP7?this.renderer.getSize(new L.FM8):this.renderer.domElement,Ee={x:oe.x/_e.width*2-1,y:-oe.y/_e.height*2+1};this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.raycaster.setFromCamera(Ee,this.camera);let Ve=this.raycaster.intersectObjects(this.scene.children,!0);return(0,ye.isFunc)(this.painter.filterIntersects)&&(Ve=this.painter.filterIntersects(Ve)),Ve},de.detectZoomMesh=function(oe){let _e=this.getMousePos(oe,{}),Ee=this.getMouseIntersects(_e);if(Ee)for(let Ve=0;Ve<Ee.length;++Ve)if(Ee[Ve].object.zoom)return Ee[Ve];return null},de.getInfoAtMousePosition=function(oe){let _e=this.getMouseIntersects(oe),Ee=null,Ve=null;for(let Qe=0;Qe<_e.length;++Qe)if(_e[Qe].object.tooltip){Ee=_e[Qe].object.tooltip(_e[Qe]),Ve=_e[Qe].object.painter;break}if(Ee&&Ve)return{obj:Ve.getObject(),name:Ve.getObject().fName,bin:Ee.bin,cont:Ee.value,binx:Ee.ix,biny:Ee.iy,binz:Ee.iz,grx:(Ee.x1+Ee.x2)/2,gry:(Ee.y1+Ee.y2)/2,grz:(Ee.z1+Ee.z2)/2}},de.processDblClick=function(oe){let _e=this.detectZoomMesh(oe);if(_e&&this.painter)return void this.painter.unzoom(_e.object.use_y_for_z?"y":_e.object.zoom);let Ee=this.painter?this.painter.getFramePainter():null;if((0,ye.isFunc)(Ee?._dblclick_handler)){let Ve=this.getInfoAtMousePosition(this.getMousePos(oe,{}));if(Ve)return void Ee._dblclick_handler(Ve)}this.reset()},de.changeEvent=function(){this.mouse_ctxt.on=!1,this.painter.render3D(0),this.control_changed=!0},de.startEvent=function(){this.control_active=!0,this.block_ctxt=!1,this.mouse_ctxt.on=!1,this.tooltip.hide()},de.endEvent=function(){this.control_active=!1,this.mouse_ctxt.on&&(this.mouse_ctxt.on=!1,this.contextMenu(this.mouse_ctxt,this.getMouseIntersects(this.mouse_ctxt))),this.control_changed=!1},de.mainProcessContextMenu=function(oe){oe.preventDefault(),this.getMousePos(oe,this.mouse_ctxt),this.control_active?this.mouse_ctxt.on=!0:this.block_ctxt?this.block_ctxt=!1:this.contextMenu(this.mouse_ctxt,this.getMouseIntersects(this.mouse_ctxt))},de.contextMenu=function(){},de.setTooltipEnabled=function(oe){this.block_mousemove=!oe,!1===oe&&(this.tooltip.hide(),this.removeZoomMesh())},de.removeZoomMesh=function(){this.mouse_zoom_mesh&&this.mouse_zoom_mesh.object.showSelection()&&this.painter.render3D(),this.mouse_zoom_mesh=null},de.mainProcessMouseMove=function(oe){if(this.painter&&(this.control_active&&oe.buttons&&2&oe.buttons&&(this.block_ctxt=!0),!this.control_active&&!this.block_mousemove&&this.processMouseMove)){if(this.mouse_zoom_mesh){let _e=this.detectZoomMesh(oe),Ee=_e?.object===this.mouse_zoom_mesh.object?_e.point:this.mouse_zoom_mesh.object.globalIntersect(this.raycaster);return Ee&&(this.mouse_zoom_mesh.point2=Ee),Ee&&this.painter.enable_highlight&&this.mouse_zoom_mesh.object.showSelection(this.mouse_zoom_mesh.point,Ee)&&this.painter.render3D(0),void this.tooltip.hide()}oe.preventDefault(),this.tmout_mouse=this.getMousePos(oe,{}),this.tmout_ttpos=this.tooltip?this.tooltip.extract_pos(oe):null,this.tmout_handle&&(clearTimeout(this.tmout_handle),delete this.tmout_handle),this.mouse_tmout?this.tmout_handle=setTimeout(()=>this.delayedProcessMouseMove(),this.mouse_tmout):this.delayedProcessMouseMove()}},de.delayedProcessMouseMove=function(){if(delete this.tmout_handle,!this.painter)return;let oe=this.tmout_mouse,_e=this.getMouseIntersects(oe),Ee=this.processMouseMove(_e);if(Ee){let Ve="",Qe="",et="",Tt="";oe&&(et=oe.x.toFixed(0)+","+oe.y.toFixed(0)),(0,ye.isStr)(Ee)?Tt=Ee:(Ve=Ee.name,Qe=Ee.title,Ee.line?Tt=Ee.line:Ee.lines&&(Tt=Ee.lines.slice(1).join(" "),Ve=Ee.lines[0])),this.painter.showObjectStatus(Ve,Qe,Tt,et)}if(this.cursor_changed=!1,Ee&&this.painter?.isTooltipAllowed())this.tooltip.checkParent(this.painter.selectDom().node()),this.tooltip.show(Ee,oe),this.tooltip.pos(this.tmout_ttpos);else if(this.tooltip.hide(),_e)for(let Ve=0;Ve<_e.length;++Ve)_e[Ve].object.zoom&&(this.cursor_changed=!0);document.body.style.cursor=this.cursor_changed?"pointer":"auto"},de.mainProcessMouseLeave=function(){this.painter&&(this.tmout_handle&&(clearTimeout(this.tmout_handle),delete this.tmout_handle),this.tooltip.hide(),(0,ye.isFunc)(this.processMouseLeave)&&this.processMouseLeave(),this.cursor_changed&&(document.body.style.cursor="auto",this.cursor_changed=!1))},de.mainProcessDblClick=function(oe){this.single_click_tm&&(clearTimeout(this.single_click_tm),delete this.single_click_tm),this.processDblClick(oe)},de.processClick=function(oe,_e){if(delete this.single_click_tm,1==_e){let Ee=this.painter?this.painter.getFramePainter():null;if((0,ye.isFunc)(Ee?._click_handler)){let Ve=this.getInfoAtMousePosition(oe);if(Ve)return void Ee._click_handler(Ve)}}if(2==_e&&(0,ye.isFunc)(this.processSingleClick)){let Ee=this.getMouseIntersects(oe);this.processSingleClick(Ee)}},de.lstn_click=function(oe){if(2==oe.detail)return;this.single_click_tm&&(clearTimeout(this.single_click_tm),delete this.single_click_tm);let _e=0,Ee=this.painter?.getFramePainter();(0,ye.isFunc)(Ee?._click_handler)?_e=1:this.processSingleClick&&this.painter?.options?.mouse_click&&(_e=2),_e&&(this.single_click_tm=setTimeout(this.processClick.bind(this,this.getMousePos(oe,{}),_e),300))}.bind(de),de.addEventListener("change",()=>de.changeEvent()),de.addEventListener("start",()=>de.startEvent()),de.addEventListener("end",()=>de.endEvent()),de.lstn_contextmenu=oe=>de.mainProcessContextMenu(oe),de.lstn_dblclick=oe=>de.mainProcessDblClick(oe),de.lstn_mousemove=oe=>de.mainProcessMouseMove(oe),de.lstn_mouseleave=()=>de.mainProcessMouseLeave(),ie.domElement.addEventListener("click",de.lstn_click),ie.domElement.addEventListener("dblclick",de.lstn_dblclick),ie.domElement.addEventListener("contextmenu",de.lstn_contextmenu),ie.domElement.addEventListener("mousemove",de.lstn_mousemove),ie.domElement.addEventListener("mouseleave",de.lstn_mouseleave),de}function p(T,$){if(T){if(T.children)for(let J=0;J<T.children.length;J++)p(T.children[J]);if($)return void(T.children=[]);T.children=void 0,T.geometry&&(T.geometry.dispose(),T.geometry=void 0),T.material&&(T.material.map&&(T.material.map.dispose(),T.material.map=void 0),T.material.dispose(),T.material=void 0),delete T.painter,delete T.bins_index,delete T.tooltip,delete T.stack,delete T.drawn_highlight,T=void 0}}function w(T,$,J,ie=!1){let Me=new L.u9r;if(Me.setAttribute("position",T instanceof Float32Array?new L.TlE(T,3):new L.a$l(T,3)),J&&Me.setIndex(new L.TlE(J,1)),$.isLineDashedMaterial){let de=new L.Pa4,fe=new L.Pa4,I=0,U=null;if(J){U=new Float32Array(J.length);for(let z=0;z<J.length;z+=2){let le=J[z],D=J[z+1];de.set(T[le],T[le+1],T[le+2]),fe.set(T[D],T[D+1],T[D+2]),U[z]=I,I+=fe.distanceTo(de),U[z+1]=I}}else{U=new Float32Array(T.length/3);for(let z=0;z<T.length;z+=6)de.set(T[z],T[z+1],T[z+2]),fe.set(T[z+3],T[z+4],T[z+5]),U[z/3]=I,I+=fe.distanceTo(de),U[z/3+1]=I}Me.setAttribute("lineDistance",new L.TlE(U,1))}return ie?Me:new L.ejS(Me,$)}const m={Vertices:[new L.Pa4(1,1,1),new L.Pa4(1,1,0),new L.Pa4(1,0,1),new L.Pa4(1,0,0),new L.Pa4(0,1,0),new L.Pa4(0,1,1),new L.Pa4(0,0,0),new L.Pa4(0,0,1)],Indexes:[0,2,1,2,3,1,4,6,5,6,7,5,4,5,1,5,0,1,7,6,2,6,3,2,5,7,0,7,2,0,1,3,4,3,6,4],Normals:[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],Segments:[0,2,2,7,7,5,5,0,1,3,3,6,6,4,4,1,1,0,3,2,6,7,4,5]};m.MeshSegments=function(){let T=m,$=new Int32Array(T.Segments.length);for(let J=0;J<$.length;++J)for(let ie=0;ie<T.Indexes.length;++ie)if(T.Segments[J]===T.Indexes[ie]){$[J]=ie;break}return $}();class _{cleanup(){}extractIndex(){}setSelected(){}setHighlight(){}checkHighlightIndex(){}}class R{constructor($,J,ie){this.webgl=void 0===J||J,this.scale=ie||1,this.pos=new Float32Array(3*$),this.geom=new L.u9r,this.geom.setAttribute("position",new L.TlE(this.pos,3)),this.indx=0}addPoint($,J,ie){this.pos[this.indx]=$,this.pos[this.indx+1]=J,this.pos[this.indx+2]=ie,this.indx+=3}createPoints($){(0,ye.isObject)($)||($={color:$}),$.color||($.color="black");let J=1;$.style?1===$.style?J=.3:6===$.style?J=.5:7===$.style&&(J=.7):J=1.1;let ie=z=>{let le={size:3*this.scale*J};z?(le.map=z,le.transparent=!0):le.color=$.color||"black";let D=new L.woe(this.geom,new L.UY4(le));return D.nvertex=1,D};if(1!==J){let z=ie();return this.noPromise?z:Promise.resolve(z)}let U,Me=new je.M({style:$.style,color:$.color,size:7}),de=Me.fill?1:7,fe=`<svg width="64" height="64" xmlns="http://www.w3.org/2000/svg"><path d="${Me.create(32,32)}" style="stroke: ${Me.getStrokeColor()}; stroke-width: ${de}; fill: ${Me.getFillColor()}"></path></svg>`,I="data:image/svg+xml;charset=utf8,"+((0,ye.isNodeJs)()?fe:encodeURIComponent(fe));if((0,ye.isNodeJs)())U=Ce.e(478).then(Ce.t.bind(Ce,9478,19)).then(z=>z.default.loadImage(I).then(le=>{const D=z.default.createCanvas(64,64);return D.getContext("2d").drawImage(le,0,0,64,64),new L.ROQ(D)}));else{if(this.noPromise)return ie((new L.dpR).load(I));U=new Promise((z,le)=>{(new L.dpR).load(I,oe=>z(oe),void 0,()=>le())})}return U.then(ie)}}function q(T,$,J=!1){if(!T||!$)return null;let ie,Me,de;(0,ye.isStr)($)||J?(ie=T.v7EvalColor($+"color","black"),Me=parseInt(T.v7EvalAttr($+"style",0)),de=parseInt(T.v7EvalAttr($+"width",1))):(ie=T.getColor($.fLineColor),Me=$.fLineStyle,de=$.fLineWidth);let U,fe=Me?(0,Ze.p)(Me):"",I=fe?fe.split(","):[];return U=I&&I.length>=2?new L.FT0({color:ie,dashSize:parseInt(I[0]),gapSize:parseInt(I[1])}):new L.nls({color:ie}),de&&de>1&&(U.linewidth=de),U}},3038:($r,At,Ce)=>{"use strict";Ce.d(At,{$8:()=>Ze,Kv:()=>Oe,Lq:()=>He,NC:()=>M,VZ:()=>Y,_V:()=>Be,hI:()=>ce,ow:()=>Ie,tF:()=>je});var ze=Ce(9542);function M(K,ue){let X=Math.round(K*(ue||255)).toString(16);return 1==X.length?"0"+X:X}let L=[];function Be(){return L}function je(K){if(K?._typename!=ze.clTColor)return null;let ue="#"+M(K.fRed)+M(K.fGreen)+M(K.fBlue);switch(void 0!==K.fAlpha&&1!==K.fAlpha&&(ue+=M(K.fAlpha)),ue){case"#ffffff":return"white";case"#000000":return"black";case"#ff0000":return"red";case"#00ff00":return"green";case"#0000ff":return"blue";case"#ffff00":return"yellow";case"#ff00ff":return"magenta";case"#00ffff":return"cyan"}return ue}function Ze(K,ue){if(!K){K=[];for(let Z=0;Z<L.length;++Z)K[Z]=L[Z]}if(!ue)return K;let X=ue;if(ue._typename&&ue.arr){X=[];for(let Z=0;Z<ue.arr.length;++Z){let O=ue.arr[Z];O?._typename==ze.clTColor&&O.fNumber>=0&&O.fNumber<=1e4&&(X[O.fNumber]=je(O))}}for(let Z=0;Z<X.length;++Z)X[Z]&&K[Z]!=X[Z]&&(K[Z]=X[Z]);return K}function Ie(K){Ze(L,K)}function He(K){return L[K]}function Oe(K){if(!K)return-1;for(let ue=0;ue<L.length;++ue)if(L[ue]==K)return ue;return-1}function ce(K,ue){ue||(ue=L);let X=ue.indexOf(K);return X>=0?X:(ue.push(K),ue.length-1)}class Y{constructor(ue){this.palette=ue}calcColorIndex(ue,X){let Z=this.palette.length,O=Math.floor((ue+.99)*Z/(X-1));return O>Z-1?Z-1:O}getColor(ue){return this.palette[ue]}getLength(){return this.palette.length}calcColor(ue,X){return this.getColor(this.calcColorIndex(ue,X))}}!function ye(){let K=["white","black","red","green","blue","yellow","magenta","cyan","#59d454","#5954d9","white"];K[110]="white",[{n:11,s:"c1b7ad4d4d4d6666668080809a9a9ab3b3b3cdcdcde6e6e6f3f3f3cdc8accdc8acc3c0a9bbb6a4b3a697b8a49cae9a8d9c8f83886657b1cfc885c3a48aa9a1839f8daebdc87b8f9a768a926983976e7b857d9ad280809caca6c0d4cf88dfbb88bd9f83c89a7dc08378cf5f61ac8f94a6787b946971d45a549300ff7b00ff6300ff4b00ff3300ff1b00ff0300ff0014ff002cff0044ff005cff0074ff008cff00a4ff00bcff00d4ff00ecff00fffd00ffe500ffcd00ffb500ff9d00ff8500ff6d00ff5500ff3d00ff2600ff0e0aff0022ff003aff0052ff006aff0082ff009aff00b1ff00c9ff00e1ff00f9ff00ffef00ffd700ffbf00ffa700ff8f00ff7700ff6000ff4800ff3000ff1800ff0000"},{n:201,s:"5c5c5c7b7b7bb8b8b8d7d7d78a0f0fb81414ec4848f176760f8a0f14b81448ec4876f1760f0f8a1414b84848ec7676f18a8a0fb8b814ecec48f1f1768a0f8ab814b8ec48ecf176f10f8a8a14b8b848ecec76f1f1"},{n:390,s:"ffffcdffff9acdcd9affff66cdcd669a9a66ffff33cdcd339a9a33666633ffff00cdcd009a9a00666600333300"},{n:406,s:"cdffcd9aff9a9acd9a66ff6666cd66669a6633ff3333cd33339a3333663300ff0000cd00009a00006600003300"},{n:422,s:"cdffff9affff9acdcd66ffff66cdcd669a9a33ffff33cdcd339a9a33666600ffff00cdcd009a9a006666003333"},{n:590,s:"cdcdff9a9aff9a9acd6666ff6666cd66669a3333ff3333cd33339a3333660000ff0000cd00009a000066000033"},{n:606,s:"ffcdffff9affcd9acdff66ffcd66cd9a669aff33ffcd33cd9a339a663366ff00ffcd00cd9a009a660066330033"},{n:622,s:"ffcdcdff9a9acd9a9aff6666cd66669a6666ff3333cd33339a3333663333ff0000cd00009a0000660000330000"},{n:791,s:"ffcd9acd9a669a66339a6600cd9a33ffcd66ff9a00ffcd33cd9a00ffcd00ff9a33cd66006633009a3300cd6633ff9a66ff6600ff6633cd3300ff33009aff3366cd00336600339a0066cd339aff6666ff0066ff3333cd0033ff00cdff9a9acd66669a33669a009acd33cdff669aff00cdff339acd00cdff009affcd66cd9a339a66009a6633cd9a66ffcd00ff6633ffcd00cd9a00ffcd33ff9a00cd66006633009a3333cd6666ff9a00ff9a33ff6600cd3300ff339acdff669acd33669a00339a3366cd669aff0066ff3366ff0033cd0033ff339aff0066cd00336600669a339acd66cdff009aff33cdff009acd00cdffcd9aff9a66cd66339a66009a9a33cdcd66ff9a00ffcd33ff9a00cdcd00ff9a33ff6600cd33006633009a6633cd9a66ff6600ff6633ff3300cd3300ffff339acd00666600339a0033cd3366ff669aff0066ff3366cd0033ff0033ff9acdcd669a9a33669a0066cd339aff66cdff009acd009aff33cdff009a"},{n:920,s:"cdcdcd9a9a9a666666333333"}].forEach(X=>{let Z=X.s;for(let O=0;O<Z.length;O+=6)K[X.n+O/6]="#"+Z.slice(O,O+6)}),L=K}()},48:($r,At,Ce)=>{"use strict";Ce.d(At,{$1:()=>Z,RO:()=>Ze,TT:()=>X,hs:()=>J,jR:()=>Me,ug:()=>P});var ze=Ce(5835),M=Ce(9542),L=Ce(3675),ye=Ce(4953);const Be={"#alpha":"\u03b1","#beta":"\u03b2","#chi":"\u03c7","#delta":"\u03b4","#digamma":"\u03dd","#varepsilon":"\u03b5","#phi":"\u03c6","#gamma":"\u03b3","#eta":"\u03b7","#iota":"\u03b9","#varphi":"\u03c6","#kappa":"\u03ba","#koppa":"\u03df","#sampi":"\u03e1","#lambda":"\u03bb","#mu":"\u03bc","#nu":"\u03bd","#omicron":"\u03bf","#pi":"\u03c0","#theta":"\u03b8","#rho":"\u03c1","#sigma":"\u03c3","#stigma":"\u03db","#san":"\u03fb","#sho":"\u03f8","#tau":"\u03c4","#upsilon":"\u03c5","#varomega":"\u03d6","#varcoppa":"\u03d9","#omega":"\u03c9","#xi":"\u03be","#psi":"\u03c8","#zeta":"\u03b6","#Alpha":"\u0391","#Beta":"\u0392","#Chi":"\u03a7","#Delta":"\u0394","#Digamma":"\u03dc","#Epsilon":"\u0395","#Phi":"\u03a6","#Gamma":"\u0393","#Eta":"\u0397","#Iota":"\u0399","#vartheta":"\u03d1","#Kappa":"\u039a","#Koppa":"\u03de","#varKoppa":"\u03d8","#Sampi":"\u03e0","#Lambda":"\u039b","#Mu":"\u039c","#Nu":"\u039d","#Omicron":"\u039f","#Pi":"\u03a0","#Theta":"\u0398","#Rho":"\u03a1","#Sigma":"\u03a3","#Stigma":"\u03da","#San":"\u03fa","#Sho":"\u03f7","#Tau":"\u03a4","#Upsilon":"\u03a5","#varsigma":"\u03c2","#Omega":"\u03a9","#Xi":"\u039e","#Psi":"\u03a8","#Zeta":"\u0396","#varUpsilon":"\u03d2","#epsilon":"\u03b5","#P":"\xb6","#sqrt":"\u221a","#bar":"","#overline":"","#underline":"","#strike":"","#leq":"\u2264","#/":"\u2044","#infty":"\u221e","#voidb":"\u0192","#club":"\u2663","#diamond":"\u2666","#heart":"\u2665","#spade":"\u2660","#leftrightarrow":"\u2194","#leftarrow":"\u2190","#uparrow":"\u2191","#rightarrow":"\u2192","#downarrow":"\u2193","#circ":"\u02c6","#pm":"\xb1","#doublequote":"\u2033","#geq":"\u2265","#times":"\xd7","#propto":"\u221d","#partial":"\u2202","#bullet":"\u2022","#divide":"\xf7","#neq":"\u2260","#equiv":"\u2261","#approx":"\u2248","#3dots":"\u2026","#cbar":"|","#topbar":"\xaf","#downleftarrow":"\u21b5","#aleph":"\u2135","#Jgothic":"\u2111","#Rgothic":"\u211c","#voidn":"\u2118","#otimes":"\u2297","#oplus":"\u2295","#oslash":"\u2205","#cap":"\u2229","#cup":"\u222a","#supseteq":"\u2287","#supset":"\u2283","#notsubset":"\u2284","#subseteq":"\u2286","#subset":"\u2282","#int":"\u222b","#in":"\u2208","#notin":"\u2209","#angle":"\u2220","#nabla":"\u2207","#oright":"\xae","#ocopyright":"\xa9","#trademark":"\u2122","#prod":"\u220f","#surd":"\u221a","#upoint":"\u02d9","#corner":"\xac","#wedge":"\u2227","#vee":"\u2228","#Leftrightarrow":"\u21d4","#Leftarrow":"\u21d0","#Uparrow":"\u21d1","#Rightarrow":"\u21d2","#Downarrow":"\u21d3","#LT":"<","#void1":"\xae","#copyright":"\xa9","#void3":"\u2122","#sum":"\u2211","#arctop":"\u239b","#lbar":"\u23b8","#arcbottom":"\u239d","#void8":"","#bottombar":"\u230a","#arcbar":"\u23a7","#ltbar":"\u23a8","#AA":"\u212b","#aa":"\xe5","#void06":"","#GT":">","#forall":"\u2200","#exists":"\u2203","#vec":"","#dot":"\u22c5","#hat":"\xb7","#ddot":"","#acute":"","#grave":"","#check":"\u2713","#tilde":"\u02dc","#slash":"\u2044","#hbar":"\u0127","#box":"\u25fd","#Box":"\u2610","#parallel":"\u2225","#perp":"\u22a5","#odot":"\u2299","#left":"","#right":"","{}":""},je=new RegExp("("+Object.keys(Be).join("|").replace(/\\\{/g,"{").replace(/\\\}/g,"}")+")","g"),Ze=(fe,I)=>{for(;fe.length>2&&"{"==fe[0]&&"}"==fe[fe.length-1];)fe=fe.slice(1,fe.length-1);return fe.replace(je,U=>Be[U]).replace(/\{\}/g,"")},Ie=[453,535,661,973,955,1448,1242,324,593,596,778,1011,431,570,468,492,947,885,947,947,947,947,947,947,947,947,511,495,980,1010,987,893,1624,1185,1147,1193,1216,1080,1028,1270,1274,531,910,1177,1004,1521,1252,1276,1111,1276,1164,1056,1073,1215,1159,1596,1150,1124,1065,540,591,540,837,874,572,929,972,879,973,901,569,967,973,453,458,903,453,1477,973,970,972,976,638,846,548,973,870,1285,884,864,835,656,430,656,1069],He={945:1002,946:996,967:917,948:953,949:834,966:1149,947:847,951:989,953:516,954:951,955:913,956:1003,957:862,959:967,960:1070,952:954,961:973,963:1017,964:797,965:944,982:1354,969:1359,958:803,968:1232,950:825,913:1194,914:1153,935:1162,916:1178,917:1086,934:1358,915:1016,919:1275,921:539,977:995,922:1189,923:1170,924:1523,925:1253,927:1281,928:1281,920:1285,929:1102,931:1041,932:1069,933:1135,962:848,937:1279,926:1092,936:1334,918:1067,978:1154,8730:986,8804:940,8260:476,8734:1453,402:811,9827:1170,9830:931,9829:1067,9824:965,8596:1768,8592:1761,8593:895,8594:1761,8595:895,710:695,177:955,8243:680,8805:947,215:995,8733:1124,8706:916,8226:626,247:977,8800:969,8801:1031,8776:976,8230:1552,175:883,8629:1454,8501:1095,8465:1002,8476:1490,8472:1493,8855:1417,8853:1417,8709:1205,8745:1276,8746:1404,8839:1426,8835:1426,8836:1426,8838:1426,8834:1426,8747:480,8712:1426,8713:1426,8736:1608,8711:1551,174:1339,169:1339,8482:1469,8719:1364,729:522,172:1033,8743:1383,8744:1383,8660:1768,8656:1496,8657:1447,8658:1496,8659:1447,8721:1182,9115:882,9144:1e3,9117:882,8970:749,9127:1322,9128:1322,8491:1150,229:929,8704:1397,8707:1170,8901:524,183:519,10003:1477,732:692,295:984,9725:1780,9744:1581,8741:737,8869:1390,8857:1421};function Oe(fe,I,U){let z=fe.length,le=(U||I.size)*I.aver_width;if(I.isMonospace())return z*le;let D=0;for(let oe=0;oe<z;++oe){let _e=fe.charCodeAt(oe);D+=_e>=32&&_e<127?Ie[_e-32]:He[_e]||1e3}return D/1e3*le}const ce=[{name:"#it{"},{name:"#bf{"},{name:"#underline{",deco:"underline"},{name:"#overline{",deco:"overline"},{name:"#strike{",deco:"line-through"},{name:"#kern[",arg:"float"},{name:"#lower[",arg:"float"},{name:"#scale[",arg:"float"},{name:"#color[",arg:"int"},{name:"#font[",arg:"int"},{name:"_{",low_up:"low"},{name:"^{",low_up:"up"},{name:"#bar{",deco:"overline"},{name:"#hat{",accent:"\u02c6",hasw:!0},{name:"#check{",accent:"\u02c7",hasw:!0},{name:"#acute{",accent:"\u02ca"},{name:"#grave{",accent:"\u02cb"},{name:"#dot{",accent:"\u02d9"},{name:"#ddot{",accent:"\u02ba",hasw:!0},{name:"#tilde{",accent:"\u02dc",hasw:!0},{name:"#slash{",accent:"\u2215"},{name:"#vec{",accent:"\u02ed",hasw:!0},{name:"#frac{",twolines:"line"},{name:"#splitline{",twolines:!0},{name:"#sqrt[",arg:"int",sqrt:!0},{name:"#sqrt{",sqrt:!0},{name:"#sum",special:"\u2211",w:.8,h:.9},{name:"#int",special:"\u222b",w:.3,h:1},{name:"#left[",right:"#right]",braces:"[]"},{name:"#left(",right:"#right)",braces:"()"},{name:"#left{",right:"#right}",braces:"{}"},{name:"#left|",right:"#right|",braces:"||"},{name:"#[]{",braces:"[]"},{name:"#(){",braces:"()"},{name:"#{}{",braces:"{}"},{name:"#||{",braces:"||"}],Y=[0,8704,0,8707,0,0,8717,0,0,8727,0,0,8722,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8773,913,914,935,916,917,934,915,919,921,977,922,923,924,925,927,928,920,929,931,932,933,962,937,926,936,918,0,8756,0,8869,0,0,945,946,967,948,949,966,947,951,953,981,954,955,956,957,959,960,952,961,963,964,965,982,969,958,968,950,0,402,0,8764,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,978,8242,8804,8260,8734,0,9827,9830,9829,9824,8596,8592,8593,8594,8595,0,0,8243,8805,0,8733,8706,8729,0,8800,8801,8776,8230,0,0,8629,8501,8465,8476,8472,8855,8853,8709,8745,8746,8835,8839,8836,8834,8838,8712,8713,8736,8711,0,0,8482,8719,8730,8901,0,8743,8744,8660,8656,8657,8658,8659,9674,9001,0,0,8482,8721,0,0,0,0,0,0,0,0,0,0,8364,9002,8747,8992,0,8993],K=[128393,9986,9985,128083,128365,128366,128367,128383,9990,128386,128387,128234,128235,128236,128237,128193,128194,128196,128463,128464,128452,8987,128430,128432,128434,128435,128436,128427,128428,9991,9997,128398,9996,128076,128077,128078,9756,9758,9757,9759,128400,9786,128528,9785,128163,9760,127987,127985,9992,9788,128167,10052,128326,10014,128328,10016,10017,9770,9775,2384,9784,9800,9801,9802,9803,9804,9805,9806,9807,9808,9809,9810,9811,128624,128629,9679,128318,9632,9633,128912,10065,10066,11047,10731,9670,10070,11045,8999,11193,8984,127989,127990,128630,128631,0,9450,9312,9313,9314,9315,9316,9317,9318,9319,9320,9321,9471,10102,10103,10104,10105,10106,10107,10108,10109,10110,10111,128610,128608,128609,128611,128606,128604,128605,128607,183,8226,9642,9898,128902,128904,9673,9678,128319,9642,9723,128962,10022,9733,10038,10036,10041,10037,11216,8982,10209,8977,11217,10026,10032,128336,128337,128338,128339,128340,128341,128342,128343,128344,128345,128346,128347,11184,11185,11186,11187,11188,11189,11190,11191,128618,128619,128597,128596,128599,128598,128592,128593,128594,128595,9003,8998,11160,11162,11161,11163,11144,11146,11145,11147,129128,129130,129129,129131,129132,129133,129135,129134,129144,129146,129145,129147,129148,129149,129151,129150,8678,8680,8679,8681,11012,8691,11008,11009,11011,11010,129196,129197,128502,10004,128503,128505];function ue(fe,I){let U="",z="Wingdings"==I?K:Y;for(let le=0;le<fe.length;++le){let D=fe.charCodeAt(le);U+=String.fromCodePoint((D>32?z[D-33]:0)||D)}return U}function X(fe,I,U){U.plain=!0,U.simple_latex&&(U.text=Ze(U.text)),I.text(U.font&&U.font.isSymbol?ue(U.text,U.font.isSymbol):U.text)}function Z(fe){return!fe||fe.indexOf("#")<0&&fe.indexOf("{")<0}function O(fe,I,U,z){let le=0;const D=()=>(z.g||(z.g=fe.append("svg:g")),z.g),oe=Bt=>{z.x+=Math.round(Bt)},_e=(Bt,ve,Je,ct)=>{z.rect?(z.rect.x1=Math.min(z.rect.x1,Bt),z.rect.y1=Math.min(z.rect.y1,ve),z.rect.x2=Math.max(z.rect.x2,Je),z.rect.y2=Math.max(z.rect.y2,ct)):z.rect={x1:Bt,y1:ve,x2:Je,y2:ct},z.rect.width=z.rect.x2-z.rect.x1,z.rect.height=z.rect.y2-z.rect.y1,z.parent||(I.text_rect=z.rect)},Ee=(Bt,ve,Je,ct)=>{ve=Math.round(ve),(Je=Math.round(Je))?Bt.g.attr("transform",`translate(${ve},${Je})`):ve&&Bt.g.attr("transform",`translate(${ve})`),Bt.rect.x1+=ve,Bt.rect.x2+=ve,Bt.rect.y1+=Je,Bt.rect.y2+=Je,ct?_e(z.x+Bt.rect.x1,z.y+Bt.rect.y1,z.x+Bt.rect.x2,z.y+Bt.rect.y2):_e(Bt.rect.x1,Bt.rect.y1,Bt.rect.x2,Bt.rect.y2)},Ve=()=>{let Bt=D();return 1==le&&!U&&!z.x&&!z.y||(Bt=Bt.append("svg:g"),z.y?Bt.attr("transform",`translate(${z.x},${z.y})`):z.x&&Bt.attr("transform",`translate(${z.x})`)),Bt},Qe=(Bt,ve,Je)=>{let ct=0,We=1,Ke=!1,ft=!1;ve||(ve="{"),Je||(Je="}");const zt=Mt=>ct+Mt.length<=U.length&&U.slice(ct,ct+Mt.length)==Mt;for(Bt&&(zt(ve)?U=U.slice(ve.length):Ke=!0);!Ke&&0!=We&&ct<U.length;)zt(ve)?(We++,ct+=ve.length):zt(Je)?(We--,ct+=Je.length,0==We&&"string"==typeof Bt&&zt(Bt+ve)&&(We++,ct+=ve.length+Bt.length,Bt=!0,ft=!0)):ct++;if(0!=We||Ke)return console.log(`mismatch with open ${ve} and closing ${Je} in ${U}`),-1;let Zt=U.slice(0,ct-Je.length);return ft&&(Zt=ve+Zt+Je),U=U.slice(ct),Zt},et=(Bt,ve)=>Bt.append("svg:path").style("stroke",ve?"none":z.color||I.color).style("stroke-width",ve?null:Math.max(1,Math.round(z.fsize*(z.font.weight?.1:.07)))).style("fill",ve?z.color||I.color:"none"),Tt=Bt=>({lvl:z.lvl+1,x:0,y:0,fsize:z.fsize*(Bt||1),color:z.color,font:z.font,parent:z,painter:z.painter});for(;U;){let Bt=U.length,ve=null;for(let We=0;We<ce.length;++We){let Ke=U.indexOf(ce[We].name);Ke>=0&&Ke<Bt&&(Bt=Ke,ve=ce[We])}if(Bt>0){let We=Bt==U.length&&0==le&&!ve;le++;let Ke=Ze(U.slice(0,Bt));if(Ke||We){let zt=(z.g||(We?fe:D())).append("svg:text");We&&!z.g&&(z.g=zt),z.ufont&&z.font.setFont(z.g),void 0!==z.bold&&z.g.attr("font-weight",z.bold?"bold":"normal"),void 0!==z.italic&&z.g.attr("font-style",z.italic?"italic":"normal"),zt.attr("fill",z.color||I.color||null),z.fisze!==z.font.size&&zt.attr("font-size",Math.round(z.fsize)),zt.text(z.font&&z.font.isSymbol?ue(Ke,z.font.isSymbol):Ke);let Zt=(0,M.isNodeJs)()||M.settings.ApproxTextSize||I.fast?{height:1.2*z.fsize,width:Oe(Ke,z.font,z.fsize)}:(0,L.Yo)(zt,"nopadding");z.x&&zt.attr("x",z.x),z.y&&zt.attr("y",z.y),z.last_y1=z.y-.8*Zt.height,z.last_y2=z.y+.2*Zt.height,_e(z.x,z.last_y1,z.x+Zt.width,z.last_y2),We?z.deco&&(zt.attr("text-decoration",z.deco),delete z.deco):oe(Zt.width)}}if(!ve)return!0;if(U=U.slice(Bt+ve.name.length),le++,ve.accent){let We=Qe();if(-1===We)return!1;let Ke=Ve(),ft=Tt();O(Ke,I,We,ft);let zt=.6*z.fsize,Zt=0,Mt=ft.rect.width,Ot=Math.round(ft.rect.y1),sn=Math.round(.1*z.fsize),wn=2*sn,Ln=`a${sn},${sn},0,0,1,${wn},0a${sn},${sn},0,0,1,${-wn},0z`;ve.hasw&&Mt<zt&&(Mt=zt,Zt=(zt-ft.rect.width)/2);let En=Math.round(.5*Mt),$n=Math.round(.3*Mt),vn=En-$n,rn=En+$n;switch(Mt=2*En,Ee(ft,Zt,0,!0),ve.name){case"#check{":et(Ke).attr("d",`M${vn},${Ot-wn}L${En},${Ot}L${rn},${Ot-wn}`);break;case"#acute{":et(Ke).attr("d",`M${En},${Ot}l${wn},${-wn}`);break;case"#grave{":et(Ke).attr("d",`M${En},${Ot}l${-wn},${-wn}`);break;case"#dot{":et(Ke,!0).attr("d",`M${En-sn},${Ot}${Ln}`);break;case"#ddot{":et(Ke,!0).attr("d",`M${En-3*sn},${Ot}${Ln} M${En+sn},${Ot}${Ln}`);break;case"#tilde{":et(Ke).attr("d",`M${vn},${Ot} a${$n},${wn},0,0,1,${$n},0 a${$n},${wn},0,0,0,${$n},0`);break;case"#slash{":et(Ke).attr("d",`M${Mt},${Ot}L0,${Math.round(ft.rect.y2)}`);break;case"#vec{":et(Ke).attr("d",`M${vn},${Ot}H${rn}M${rn-wn},${Ot-wn}l${wn},${wn}l${-wn},${wn}`);break;default:et(Ke).attr("d",`M${vn},${Ot}L${En},${Ot-wn}L${rn},${Ot}`)}oe(ft.rect.width);continue}if(ve.twolines){z.twolines=!0;let We=Qe(),Ke=Qe(!0);if(-1===We||-1===Ke)return!1;let ft=Ve(),zt=z.parent&&z.parent.twolines?.7:1,Zt=Tt(zt);O(ft,I,We,Zt);let Mt="line"==ve.twolines?et(ft):null,Ot=Tt(zt);O(ft,I,Ke,Ot);let sn=Math.max(Zt.rect.width,Ot.rect.width),wn=Zt.rect.width-Ot.rect.width,Ln=.35*-z.fsize;Ee(Zt,wn<0?-wn/2:0,Ln-Zt.rect.y2,!0),Ee(Ot,wn>0?wn/2:0,Ln-Ot.rect.y1,!0),Mt&&Mt.attr("d",`M0,${Math.round(Ln)}h${Math.round(sn-.1*z.fsize)}`),oe(sn),delete z.twolines;continue}const Je=We=>{let Ke={};if(We&&(Ke[We]=Qe(),-1===Ke[We]))return!1;for(;U;)if("_"==U[0]){if(U=U.slice(1),Ke.low=Ke.low?-1:Qe("_"),-1===Ke.low)return console.log(`error with ${ve.name} low limit`),!1}else{if("^"!=U[0])break;if(U=U.slice(1),Ke.up=Ke.up?-1:Qe("^"),-1===Ke.up)return console.log(`error with ${ve.name} upper limit `+U),!1}return Ke};if(ve.low_up){const We=Je(ve.low_up);if(!We)return!1;let Ke,ft,zt=z.x,Zt=-z.fsize,Mt=.25*z.fsize,Ot=0,sn=0;We.up&&(Ke=Tt(.6),O(D(),I,We.up,Ke)),We.low&&(ft=Tt(.6),O(D(),I,We.low,ft)),void 0!==z.last_y1&&void 0!==z.last_y2&&(Zt=z.last_y1,Mt=z.last_y2),Ke&&(Ee(Ke,zt,Zt-Ke.rect.y1-.1*z.fsize),Ot=Ke.rect.width),ft&&(Ee(ft,zt,Mt-ft.rect.y2+.1*z.fsize),sn=ft.rect.width),oe(Math.max(Ot,sn));continue}if(ve.special){let Ot,sn,We=Je()||{},Ke=Ve(),ft=et(Ke),zt=Math.round(1.7*z.fsize),Zt=Math.round(z.fsize),Mt=Math.round(.1*zt);if("#sum"==ve.name?(Ot=sn=Zt/2,ft.attr("d",`M${Zt},${Math.round(-.75*zt)}h${-Zt}l${Math.round(.4*Zt)},${Math.round(.3*zt)}l${Math.round(-.4*Zt)},${Math.round(.7*zt)}h${Zt}`)):(Ot=3*Mt,sn=Mt,ft.attr("d",`M0,${Math.round(.25*zt-Mt)}a${Mt},${Mt},0,0,0,${2*Mt},0v${2*Mt-zt}a${Mt},${Mt},0,1,1,${2*Mt},0`)),_e(z.x,z.y-.6*zt,z.x+Zt,z.y+.4*zt),We.low){let wn=Tt(.6);O(Ke,I,We.low,wn),Ee(wn,sn-wn.rect.width/2,.25*zt-wn.rect.y1,!0)}if(We.up){let wn=Tt(.6);O(Ke,I,We.up,wn),Ee(wn,Ot-wn.rect.width/2,-.75*zt-wn.rect.y2,!0)}oe(Zt);continue}if(ve.braces){let We=ve.right,ft=Qe(!1,We?ve.name:"{",We),zt=Ve(),Zt=Tt(),Mt=et(zt);O(zt,I,ft,Zt);let Ot=et(zt),sn=Math.max(2,Math.round(.2*z.fsize)),wn=Zt.rect,Ln=Math.round(wn.y2-wn.y1),En=Math.round(wn.y1),$n=Math.round(wn.width);switch(ve.braces){case"||":Mt.attr("d",`M${sn},${En}v${Ln}`),Ot.attr("d",`M${3*sn+$n},${En}v${Ln}`);break;case"[]":Mt.attr("d",`M${2*sn},${En}h${-sn}v${Ln}h${sn}`),Ot.attr("d",`M${2*sn+$n},${En}h${sn}v${Ln}h${-sn}`);break;case"{}":Mt.attr("d",`M${2*sn},${En} a${sn},${sn},0,0,0,${-sn},${sn} v${Ln/2-2*sn} a${sn},${sn},0,0,1,${-sn},${sn} a${sn},${sn},0,0,1,${sn},${sn} v${Ln/2-2*sn} a${sn},${sn},0,0,0,${sn},${sn}`),Ot.attr("d",`M${2*sn+$n},${En} a${sn},${sn},0,0,1,${sn},${sn} v${Ln/2-2*sn} a${sn},${sn},0,0,0,${sn},${sn} a${sn},${sn},0,0,0,${-sn},${sn} v${Ln/2-2*sn} a${sn},${sn},0,0,1,${-sn},${sn}`);break;default:Mt.attr("d",`M${sn},${En}a${4*Ln},${4*Ln},0,0,0,0,${Ln}`),Ot.attr("d",`M${3*sn+$n},${En}a${4*Ln},${4*Ln},0,0,1,0,${Ln}`)}Ee(Zt,2*sn,0,!0),_e(z.x,z.y+wn.y1,z.x+4*sn+wn.width,z.y+wn.y2),oe(4*sn+wn.width),z.last_y1=wn.y1,z.last_y2=wn.y2;continue}if(ve.deco){let We=Qe(),Ke=Ve(),ft=Tt();ft.deco=ve.deco,O(Ke,I,We,ft);let zt=ft.rect;if(ft.deco){let Zt=et(Ke),Mt=Math.round(zt.width);switch(ft.deco){case"underline":Zt.attr("d",`M0,${Math.round(zt.y2)}h${Mt}`);break;case"overline":Zt.attr("d",`M0,${Math.round(zt.y1)}h${Mt}`);break;case"line-through":Zt.attr("d",`M0,${Math.round(.45*zt.y1+.55*zt.y2)}h${Mt}`)}}Ee(ft,0,0,!0),oe(zt.width);continue}if("#bf{"==ve.name||"#it{"==ve.name){let We=Qe();if(-1===We)return!1;let Ke=Tt();"#bf{"==ve.name?Ke.bold=!Ke.bold:Ke.italic=!Ke.italic,O(D(),I,We,Ke),Ee(Ke,z.x,z.y),oe(Ke.rect.width);continue}let ct=0;if(ve.arg){let We=U.indexOf("]{");if(We<0)return console.log("missing argument for ",ve.name),!1;if(ct=U.slice(0,We),"int"==ve.arg){if(ct=parseInt(ct),!Number.isInteger(ct))return console.log("wrong int argument",U.slice(0,We)),!1}else if("float"==ve.arg&&(ct=parseFloat(ct),!Number.isFinite(ct)))return console.log("wrong float argument",U.slice(0,We)),!1;U=U.slice(We+2)}if("#kern["!=ve.name&&"#lower["!=ve.name)if("#color["!=ve.name&&"#scale["!=ve.name&&"#font["!=ve.name){if(ve.sqrt){let We=Qe();if(-1===We)return!1;let ft,Ke=Ve(),zt=Tt();ve.arg&&(ft=Tt(.7),O(Ke,I,ct.toString(),ft));let Zt=et(Ke);O(Ke,I,We,zt);let Mt=zt.rect,Ot=Math.round(Mt.height),sn=Math.round(.1*Mt.height),wn=Math.round(Mt.width),Ln=Math.round((Mt.y1+Mt.y2)/2),En=Math.round(.2*z.fsize),$n=Math.round(Mt.y2);ft&&Ee(ft,0,Ln-.3*ft.fsize,!0),Zt.attr("d",`M0,${Ln}h${sn}l${sn},${$n-Ln-En}l${sn},${-Ot+En}h${Math.round(.2*Ot+wn)}v${sn}`),Ee(zt,.4*Ot,0,!0),_e(z.x,z.y+Mt.y1-.1*z.fsize,z.x+wn+.6*Ot,z.y+Mt.y2),oe(wn+.6*Ot)}}else{let We=Qe();if(-1===We)return!1;let Ke=Tt();"#color["==ve.name?Ke.color=z.painter.getColor(ct):"#font["==ve.name?(Ke.font=new ye.G(ct),Ke.ufont=!0):Ke.fsize*=ct,O(D(),I,We,Ke),Ee(Ke,z.x,z.y),oe(Ke.rect.width)}else{let We=Qe();if(-1===We)return!1;let Ke=Tt();O(D(),I,We,Ke);let ft=0,zt=0;"kern["==ve.name?ft=ct:zt=ct,Ee(Ke,z.x+ft*Ke.rect.width,z.y+zt*Ke.rect.height),oe(Ke.rect.width*(ft>0?1+ct:1))}}return!0}function P(fe,I,U){return O(I,U,U.text,{lvl:0,g:I,x:0,y:0,dx:0,dy:-.1,fsize:U.font_size,font:U.font,parent:null,painter:fe})}let x;function p(){return w.apply(this,arguments)}function w(){return(w=(0,ze.Z)(function*(){let fe=void 0!==x;if(!fe&&typeof globalThis.MathJax<"u")return globalThis.MathJax;fe||(x=[]);let I=new Promise(le=>{x?x.push(le):le(globalThis.MathJax)});if(fe)return I;let z,U={scale:1,minScale:.5,mtextInheritFont:!1,merrorInheritFont:!0,mathmlSpacing:!1,skipAttributes:{},exFactor:.5,displayAlign:"center",displayIndent:"0",fontCache:"local",localID:null,internalSpeechTitles:!0,titleID:0};return(0,M.isNodeJs)()?(0,L.Bu)().then(le=>(z=le.JSDOM,Ce.e(887).then(Ce.t.bind(Ce,1887,19)))).then(le=>(le.init({loader:{load:["input/tex","output/svg","[tex]/color","[tex]/upgreek","[tex]/mathtools","[tex]/physics"]},tex:{packages:{"[+]":["color","upgreek","mathtools","physics"]}},svg:U,config:{JSDOM:z},startup:{typeset:!1,ready(){MathJax.startup.registerConstructor("jsdomAdaptor",()=>new MathJax._.adaptors.HTMLAdaptor.HTMLAdaptor((new MathJax.config.config.JSDOM).window)),MathJax.startup.useAdaptor("jsdomAdaptor",!0),MathJax.startup.defaultReady();let D=x;x=void 0,D.forEach(oe=>oe(MathJax))}}}),I)):(window.MathJax={options:{enableMenu:!1},loader:{load:["[tex]/color","[tex]/upgreek","[tex]/mathtools","[tex]/physics"]},tex:{packages:{"[+]":["color","upgreek","mathtools","physics"]}},svg:U,startup:{ready(){MathJax.startup.defaultReady();let le=x;x=void 0,le.forEach(D=>D(globalThis.MathJax))}}},(0,M.loadScript)(M.source_dir+"../mathjax/3.2.0/es5/tex-svg.js").catch(()=>(0,M.loadScript)("https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-svg.js")).then(()=>I))})).apply(this,arguments)}const m={"#LT":"\\langle","#GT":"\\rangle","#club":"\\clubsuit","#spade":"\\spadesuit","#heart":"\\heartsuit","#diamond":"\\diamondsuit","#voidn":"\\wp","#voidb":"f","#copyright":"(c)","#ocopyright":"(c)","#trademark":"TM","#void3":"TM","#oright":"R","#void1":"R","#3dots":"\\ldots","#lbar":"\\mid","#void8":"\\mid","#divide":"\\div","#Jgothic":"\\Im","#Rgothic":"\\Re","#doublequote":'"',"#plus":"+","#minus":"-","#/":"/","#upoint":".","#aa":"\\mathring{a}","#AA":"\\mathring{A}","#omicron":"o","#Alpha":"A","#Beta":"B","#Epsilon":"E","#Zeta":"Z","#Eta":"H","#Iota":"I","#Kappa":"K","#Mu":"M","#Nu":"N","#Omicron":"O","#Rho":"P","#Tau":"T","#Chi":"X","#varomega":"\\varpi","#corner":"?","#ltbar":"?","#bottombar":"?","#notsubset":"?","#arcbottom":"?","#cbar":"?","#arctop":"?","#topbar":"?","#arcbar":"?","#downleftarrow":"?","#splitline":"\\genfrac{}{}{0pt}{}","#it":"\\textit","#bf":"\\textbf","#frac":"\\frac","#left{":"\\lbrace","#right}":"\\rbrace","#left\\[":"\\lbrack","#right\\]":"\\rbrack","#\\[\\]{":"\\lbrack"," } ":"\\rbrack","#\\[":"\\lbrack","#\\]":"\\rbrack","#{":"\\lbrace","#}":"\\rbrace"," ":"\\;"},_={upDelta:"Updelta",upGamma:"Upgamma",upLambda:"Uplambda",upOmega:"Upomega",upPhi:"Upphi",upPi:"Uppi",upPsi:"Uppsi",upSigma:"Upsigma",upTheta:"Uptheta",upUpsilon:"Upupsilon",upXi:"Upxi",notcong:"ncong",notgeq:"ngeq",notgr:"ngtr",notless:"nless",notleq:"nleq",notsucc:"nsucc",notprec:"nprec",notsubseteq:"nsubseteq",notsupseteq:"nsupseteq",openclubsuit:"clubsuit",openspadesuit:"spadesuit",dasharrow:"dashrightarrow",comp:"circ",iiintop:"iiint",iintop:"iint",ointop:"oint"},F={Digamma:988,upDigamma:988,digamma:989,updigamma:989,Koppa:990,koppa:991,upkoppa:991,upKoppa:990,VarKoppa:984,upVarKoppa:984,varkoppa:985,upvarkoppa:985,varkappa:954,upvarkappa:954,varbeta:976,upvarbeta:976,Sampi:992,upSampi:992,sampi:993,upsampi:993,Stigma:986,upStigma:986,stigma:987,upstigma:987,San:1018,upSan:1018,san:1019,upsan:1019,Sho:1015,upSho:1015,sho:1016,upsho:1016,P:182,aa:176,bulletdashcirc:8887,circdashbullet:8886,downuparrows:8693,updownarrows:8645,dashdownarrow:8675,dashuparrow:8673,complement:8705,dbar:396,ddddot:8943,dddot:8943,ddots:8945,defineequal:8797,defineeq:8797,downdownharpoons:10597,downupharpoons:10607,updownharpoons:10606,upupharpoons:10595,hateq:8793,ldbrack:10214,rdbrack:10215,leadsfrom:8604,leftsquigarrow:8668,lightning:9735,napprox:8777,nasymp:8813,nequiv:8802,nsimeq:8772,nsubseteq:8840,nsubset:8836,notapprox:8777,notasymp:8813,notequiv:8802,notni:8716,notsimeq:8772,notsubseteq:8840,notsubset:8836,notsupseteq:8841,notsupset:8837,nsupset:8837,setdif:8726,simarrow:10610,t:8256,u:711,v:711,undercurvearrowright:10555,updbar:396,wwbar:8213,awointop:8754,awoint:8755,barintop:10780,barint:10779,cwintop:8753,cwint:8753,cwointop:8755,cwoint:8754,oiiintop:8752,oiiint:8752,oiintop:8751,oiint:8751,slashintop:10767,slashint:10767},R=['"',"'","`","=","~"];function $(fe,I,U,z,le,D){let oe=parseInt(U.attr("width")),_e=parseInt(U.attr("height"));if(Number.isInteger(_e)&&Number.isInteger(oe))D>0&&(oe/=D,_e/=D,U.attr("width",Math.round(oe)).attr("height",Math.round(_e)));else{let Tt=(0,L.Yo)(I,"bbox");oe=Tt.width||oe||100,_e=Tt.height||_e||10}D>0&&z.valign&&(z.valign=z.valign/D),null===z.valign&&(z.valign=(le-_e)/2);let Ee={x:1,y:1},Ve="x",Qe="y";180==z.rotate?Ee.x=Ee.y=-1:(270==z.rotate||90==z.rotate)&&(Ee.x=270==z.rotate?-1:1,Ee.y=-Ee.x,Ve="y",Qe="x"),"middle"==z.align[0]?z[Ve]+=Ee.x*(z.width-oe)/2:"end"==z.align[0]&&(z[Ve]+=Ee.x*(z.width-oe)),"middle"==z.align[1]?z[Qe]+=Ee.y*(z.height-_e)/2:"bottom"==z.align[1]?z[Qe]+=Ee.y*(z.height-_e):"bottom-base"==z.align[1]&&(z[Qe]+=Ee.y*(z.height-_e-z.valign));let et=`translate(${z.x},${z.y})`;z.rotate&&(et+=` rotate(${z.rotate})`),I.attr("transform",et).attr("visibility",null)}function J(fe,I,U){return ie.apply(this,arguments)}function ie(){return(ie=(0,ze.Z)(function*(fe,I,U){let z=function q(fe,I,U,z){if(2!=I){for(let oe in m)fe=fe.replace(new RegExp(oe,"g"),m[oe]);for(let oe in Be)oe.length>2&&(fe=fe.replace(new RegExp(oe,"g"),"\\"+oe.slice(1)));let le="",D=!0;for(;fe;){let oe=fe.indexOf("#color[");if(oe<0&&D){le=fe;break}if(D=!1,0!=oe&&(le+=oe<0?fe:fe.slice(0,oe),oe<0))break;if(oe=(fe=fe.slice(oe+7)).indexOf("]{"),oe<=0)break;let _e=parseInt(fe.slice(0,oe));if(!Number.isInteger(_e))break;let Ee=z.getColor(_e),Ve=1;for(fe=fe.slice(oe+2),oe=-1;Ve&&++oe<fe.length;)"{"==fe[oe]?Ve++:"}"==fe[oe]&&Ve--;if(0!=Ve)break;let Qe=fe.slice(0,oe);fe=fe.slice(oe+1),Qe&&(le+=`\\color{${Ee}}{${Qe}}`)}fe=le}else{"\\^"==fe&&(fe="\\unicode{0x5E}"),"\\vec"==fe&&(fe="\\unicode{0x2192}"),fe=fe.replace(/\\\./g,"\\unicode{0x2E}").replace(/\\\^/g,"\\hat");for(let le in F)fe=fe.replace(new RegExp(`\\\\\\b${le}\\b`,"g"),`\\unicode{0x${F[le].toString(16)}}`);for(let le in R)fe=fe.replace(new RegExp(`(\\\\${R[le]})`,"g"),`\\unicode{0x${R[le].charCodeAt(0).toString(16)}}`);for(let le in _)fe=fe.replace(new RegExp(`\\\\\\b${le}\\b`,"g"),`\\${_[le]}`)}return(0,M.isStr)(U)?`\\color{${U}}{${fe}}`:fe}(U.text,U.latex,U.color,fe),le={em:U.font.size,ex:U.font.size/2,family:U.font.name,scale:1,containerWidth:-1,lineWidth:1e5};return p().then(()=>MathJax.tex2svgPromise(z,le)).then(D=>{let oe=D.querySelector("svg");return I.append(()=>oe),function T(fe,I,U,z){let le=Ee=>{if(!Ee||!(0,M.isStr)(Ee)||Ee.length<3)return null;let Ve=Ee.indexOf("ex");return Ve<0||Ve!==Ee.length-2?null:(Ee=parseFloat(Ee.slice(0,Ve)),Number.isFinite(Ee)?Ee*z.font.size*.5:null)},D=le(U.getAttribute("width")),oe=le(U.getAttribute("height")),_e=U.getAttribute("style");if(_e&&_e.length>18&&0==_e.indexOf("vertical-align:")){let Ee=_e.indexOf("ex;");_e=Ee>0&&Ee==_e.length-3?le(_e.slice(16,_e.length-1)):null}else _e=null;if(D=!D||D<=.5?1:Math.round(D),oe=!oe||oe<=.5?1:Math.round(oe),U.setAttribute("width",D),U.setAttribute("height",oe),U.removeAttribute("style"),!(0,M.isNodeJs)()){let Ee=(0,L.Yo)(I,"bbox");D=1.05*Ee.width,oe=1.05*Ee.height}z.valign=_e,z.scale&&fe.scaleTextDrawing(Math.max(D/z.width,oe/z.height),z.draw_g)}(fe,I,oe,U),U.applyAttributesToMathJax=$,!0})})).apply(this,arguments)}function Me(fe){return de.apply(this,arguments)}function de(){return(de=(0,ze.Z)(function*(fe){return p().then(()=>MathJax.typesetPromise(fe?[fe]:void 0))})).apply(this,arguments)}},6976:($r,At,Ce)=>{"use strict";Ce.r(At),Ce.d(At,{Beta:()=>_n,BetaDist:()=>Ar,BetaDistI:()=>cs,BetaIncomplete:()=>Ve,BreitWigner:()=>Qt,Chebyshev1:()=>_o,Chebyshev10:()=>Ae,Chebyshev2:()=>el,Chebyshev3:()=>lo,Chebyshev4:()=>Yi,Chebyshev5:()=>ga,Chebyshev6:()=>xa,Chebyshev7:()=>Ta,Chebyshev8:()=>uc,Chebyshev9:()=>st,ChebyshevN:()=>xr,FDist:()=>$n,FDistI:()=>rn,Gamma:()=>w,GammaDist:()=>dn,Gaus:()=>qt,Landau:()=>J,LaplaceDist:()=>ci,LaplaceDistI:()=>ir,LogNormal:()=>Ur,Polynomial1eval:()=>Oe,Polynomialeval:()=>He,Prob:()=>Gt,Student:()=>Vi,StudentI:()=>br,beta:()=>I,beta_cdf_c:()=>et,beta_pdf:()=>fe,beta_quantile:()=>Qe,breitwigner_cdf:()=>ct,breitwigner_cdf_c:()=>Je,cauchy_cdf:()=>Ke,cauchy_cdf_c:()=>We,cauchy_pdf:()=>ft,chisquared_cdf:()=>Tt,chisquared_cdf_c:()=>U,chisquared_pdf:()=>En,crystalball_cdf:()=>eo,crystalball_cdf_c:()=>al,crystalball_function:()=>Yo,crystalball_pdf:()=>kl,erf:()=>ue,erfc:()=>K,expo:()=>ro,exponential_cdf:()=>Ln,exponential_cdf_c:()=>wn,fdistribution_cdf:()=>rn,fdistribution_cdf_c:()=>vn,fdistribution_pdf:()=>$n,gamma:()=>w,gamma_pdf:()=>Zt,gamma_quantile:()=>ve,gamma_quantile_c:()=>Bt,gaus:()=>Rs,gausn:()=>es,gaussian_cdf:()=>P,gaussian_cdf_c:()=>O,gaussian_pdf:()=>zt,gausxy:()=>ho,getTEfficiencyBoundaryFunc:()=>Yn,igam:()=>q,igamc:()=>R,igami:()=>T,inc_beta:()=>Ee,inc_gamma:()=>Me,inc_gamma_c:()=>ie,incbet:()=>oe,incbi:()=>_e,landau:()=>ws,landau_pdf:()=>$,landaun:()=>Es,lgam:()=>ce,lgamma:()=>de,lognormal_cdf:()=>Z,lognormal_cdf_c:()=>X,lognormal_pdf:()=>x,ndtri:()=>m,normal_cdf:()=>P,normal_cdf_c:()=>O,normal_pdf:()=>p,normal_quantile:()=>_,normal_quantile_c:()=>F,pseries:()=>D,stirf:()=>Y,tdistribution_cdf:()=>Ot,tdistribution_cdf_c:()=>Mt,tdistribution_pdf:()=>sn,tgamma:()=>w});const ze=11102230246251565e-32,M=-708.3964185322641,L=709.782712893384,ye=108.11685576785767,Be=4503599627370496,je=2220446049250313e-31,Ze=1.4142135623730951,Ie=3.141592653589793;function He(lt,mt,Lt){if(!Lt)return mt[0];let $e=mt[0];for(let Nt=1;Nt<=Lt;++Nt)$e=$e*lt+mt[Nt];return $e}function Oe(lt,mt,Lt){if(!Lt)return mt[0];let $e=lt+mt[0];for(let Nt=1;Nt<Lt;++Nt)$e=$e*lt+mt[Nt];return $e}function ce(lt){let mt,Lt,$e,Nt,it;const Sn=[-1378.2515256912086,-38801.631513463784,-331612.9927388712,-1162370.974927623,-1721737.0082083966,-853555.6642457654],Fn=[-351.81570143652345,-17064.210665188115,-220528.59055385445,-1139334.4436798252,-2532523.0717758294,-2018891.4143353277];if(lt>=Number.MAX_VALUE||lt==Number.POSITIVE_INFINITY)return Number.POSITIVE_INFINITY;if(lt<-34)return Lt=-lt,Nt=ce(Lt),mt=Math.floor(Lt),mt==Lt||(it=Lt-mt,it>.5&&(mt+=1,it=mt-Lt),it=Lt*Math.sin(Math.PI*it),it<1e-300)?Number.POSITIVE_INFINITY:(it=Math.log(Math.PI)-Math.log(it)-Nt,it);if(lt<13){for(it=1,mt=0,$e=lt;$e>=3;)mt-=1,$e=lt+mt,it*=$e;for(;$e<2;){if($e<1e-300)return Number.POSITIVE_INFINITY;it/=$e,mt+=1,$e=lt+mt}return it<0&&(it=-it),2==$e?Math.log(it):(mt-=2,mt=(lt+=mt)*He(lt,Sn,5)/Oe(lt,Fn,6),Math.log(it)+mt)}return lt>2556348e299?Number.POSITIVE_INFINITY:(Lt=(lt-.5)*Math.log(lt)-lt+.9189385332046728,lt>1e8||(mt=1/(lt*lt),Lt+=lt>=1e3?((.0007936507936507937*mt-.002777777777777778)*mt+.08333333333333333)/lt:He(mt,[.0008116141674705085,-.0005950619042843014,.0007936503404577169,-.002777777777300997,.08333333333333319],4)/lt),Lt)}function Y(lt){let mt,Lt,$e;const it=Math.sqrt(2*Math.PI);return Lt=1/lt,Lt=1+Lt*He(Lt,[.0007873113957930937,-.00022954996161337813,-.0026813261780578124,.0034722222160545866,.08333333333334822],4),mt=Math.exp(lt),lt>ye?($e=Math.pow(lt,.5*lt-.25),mt=$e*($e/mt)):mt=Math.pow(lt,lt-.5)/mt,mt=it*mt*Lt,mt}function K(lt){let it,un,It,Pt,Sn;return It=lt<0?-lt:lt,It<1?1-ue(lt):(Sn=-lt*lt,Sn<-L||(Sn=Math.exp(Sn),It<8?(it=He(It,[2.461969814735305e-10,.5641895648310689,7.463210564422699,48.63719709856814,196.5208329560771,526.4451949954773,934.5285271719576,1027.5518868951572,557.5353353693994],8),un=Oe(It,[13.228195115474499,86.70721408859897,354.9377788878199,975.7085017432055,1823.9091668790973,2246.3376081871097,1656.6630919416134,557.5353408177277],8)):(it=He(It,[.5641895835477551,1.275366707599781,5.019050422511805,6.160210979930536,7.4097426995044895,2.9788666537210022],5),un=Oe(It,[2.2605286322011726,9.396035249380015,12.048953980809666,17.08144507475659,9.608968090632859,3.369076451000815],6)),Pt=Sn*it/un,lt<0&&(Pt=2-Pt),0==Pt)?lt<0?2:0:Pt)}function ue(lt){if(Math.abs(lt)>1)return 1-K(lt);let $e=lt*lt;return lt*He($e,[9.604973739870516,90.02601972038427,2232.005345946843,7003.325141128051,55592.30130103949],4)/Oe($e,[33.56171416475031,521.3579497801527,4594.323829709801,22629.000061389095,49267.39426086359],5)}function X(lt,mt,Lt,$e){void 0===$e&&($e=0);let Nt=(Math.log(lt-$e)-mt)/(Lt*Ze);return Nt>1?.5*K(Nt):.5*(1-ue(Nt))}function Z(lt,mt,Lt,$e=0){let Nt=(Math.log(lt-$e)-mt)/(Lt*Ze);return Nt<-1?.5*K(-Nt):.5*(1+ue(Nt))}function O(lt,mt,Lt=0){let $e=(lt-Lt)/(mt*Ze);return $e>1?.5*K($e):.5*(1-ue($e))}function P(lt,mt,Lt=0){let $e=(lt-Lt)/(mt*Ze);return $e<-1?K(-$e):.5*(1+ue($e))}function x(lt,mt,Lt,$e=0){if(lt-$e<=0)return 0;let Nt=(Math.log(lt-$e)-mt)/Lt;return 1/((lt-$e)*Math.abs(Lt)*Math.sqrt(2*Ie))*Math.exp(-Nt*Nt/2)}function p(lt,mt=1,Lt=0){let $e=(lt-Lt)/mt;return 1/(Math.sqrt(2*Ie)*Math.abs(mt))*Math.exp(-$e*$e/2)}function w(lt){let mt,Lt,$e,Nt,it=1;if(lt>=Number.MAX_VALUE)return lt;if(Lt=Math.abs(lt),Lt>33){if(lt<0){if(mt=Math.floor(Lt),mt==Lt)return Number.POSITIVE_INFINITY;if(Nt=Math.round(mt),1&Nt||(it=-1),$e=Lt-mt,$e>.5&&(mt+=1,$e=Lt-mt),$e=Lt*Math.sin(Math.PI*$e),0==$e)return it>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;$e=Math.abs($e),$e=Math.PI/($e*Y(Lt))}else $e=Y(lt);return it*$e}for($e=1;lt>=3;)$e*=lt-=1;let un=!1;for(;lt<0&&!un;)lt>-1e-9?un=!0:($e/=lt,lt+=1);for(;lt<2&&!un;)lt<1e-9?un=!0:($e/=lt,lt+=1);return un?0==lt?Number.POSITIVE_INFINITY:$e/((1+.5772156649015329*lt)*lt):2==lt?$e:(mt=He(lt-=2,[.00016011952247675185,.0011913514700658638,.010421379756176158,.04763678004571372,.20744822764843598,.4942148268014971,1],6),Lt=He(lt,[-23158187332412014e-21,.0005396055804933034,-.004456419138517973,.011813978522206043,.035823639860549865,-.23459179571824335,.0714304917030273,1],7),$e*mt/Lt)}function m(lt){if(lt<=0)return Number.NEGATIVE_INFINITY;if(lt>=1)return Number.POSITIVE_INFINITY;const Pt=.1353352832366127;let Gi,In,ii,lr,cr,Sn=1,Fn=lt;return Fn>1-Pt&&(Fn=1-Fn,Sn=0),Fn>Pt?(Fn-=.5,ii=Fn*Fn,Gi=Fn+Fn*(ii*He(ii,[-59.96335010141079,98.00107541859997,-56.67628574690703,13.931260938727968,-1.2391658386738125],4)/Oe(ii,[1.9544885833814176,4.676279128988815,86.36024213908905,-225.46268785411937,200.26021238006066,-82.03722561683334,15.90562251262117,-1.1833162112133],8)),Gi*=2.5066282746310007,Gi):(Gi=Math.sqrt(-2*Math.log(Fn)),lr=Gi-Math.log(Gi)/Gi,In=1/Gi,cr=Gi<8?In*He(In,[4.0554489230596245,31.525109459989388,57.16281922464213,44.08050738932008,14.684956192885803,2.1866330685079025,-.1402560791713545,-.03504246268278482,-.0008574567851546854],8)/Oe(In,[15.779988325646675,45.39076351288792,41.3172038254672,15.04253856929075,2.504649462083094,-.14218292285478779,-.03808064076915783,-.0009332594808954574],8):In*He(In,[3.2377489177694603,6.915228890689842,3.9388102529247444,1.3330346081580755,.20148538954917908,.012371663481782003,.00030158155350823543,26580697468673755e-22,6.239745391849833e-9],8)/Oe(In,[6.02427039364742,3.6798356385616087,1.3770209948908132,.21623699359449663,.013420400608854318,.00032801446468212774,28924786474538068e-22,6.790194080099813e-9],8),Gi=lr-cr,0!=Sn&&(Gi=-Gi),Gi)}function _(lt,mt){return mt*m(lt)}function F(lt,mt){return-mt*m(lt)}function R(lt,mt){if(lt<=0)return 0;if(mt<=0)return 1;if(mt<1||mt<lt)return 1-q(lt,mt);let Lt=lt*Math.log(mt)-mt-ce(lt);if(Lt<-L)return 0;Lt=Math.exp(Lt);let Gi,In,ii,lr,cr,$e=1-lt,Nt=mt+$e+1,it=0,un=1,It=mt,Pt=mt+1,Sn=Nt*mt,Fn=Pt/Sn;do{it+=1,$e+=1,Nt+=2,Gi=$e*it,lr=Pt*Nt-un*Gi,cr=Sn*Nt-It*Gi,cr?(In=lr/cr,ii=Math.abs((Fn-In)/In),Fn=In):ii=1,un=Pt,Pt=lr,It=Sn,Sn=cr,Math.abs(lr)>Be&&(un*=je,Pt*=je,It*=je,Sn*=je)}while(ii>ze);return Fn*Lt}function q(lt,mt){if(lt<=0)return 1;if(mt<=0)return 0;if(mt>1&&mt>lt)return 1-R(lt,mt);let Lt=lt*Math.log(mt)-mt-ce(lt);if(Lt<-L)return 0;Lt=Math.exp(Lt);let $e=lt,Nt=1,it=1;do{$e+=1,Nt*=mt/$e,it+=Nt}while(Nt/it>ze);return it*Lt/lt}function T(lt,mt){if(lt<=0)return console.error("igami : Wrong domain for parameter a (must be > 0)"),0;if(mt<=0)return Number.POSITIVE_INFINITY;if(mt>=1)return 0;const Lt=Number.MAX_VALUE;let it,Pt,Sn,Fn,In,ii,$e=Lt,Nt=0,un=0,It=1,Gi=5*ze;for(Sn=1/(9*lt),Pt=1-Sn-m(mt)*Math.sqrt(Sn),it=lt*Pt*Pt*Pt,Fn=ce(lt),In=0;In<10&&!(it>$e||it<Nt||(Pt=R(lt,it),Pt<un||Pt>It)||(Pt<mt?($e=it,un=Pt):(Nt=it,It=Pt),Sn=(lt-1)*Math.log(it)-it-Fn,Sn<-L));++In){if(Sn=-Math.exp(Sn),Sn=(Pt-mt)/Sn,Math.abs(Sn/it)<ze)return it;it-=Sn}if(Sn=.0625,$e==Lt)for(it<=0&&(it=1);$e==Lt;){if(it*=1+Sn,Pt=R(lt,it),Pt<mt){$e=it,un=Pt;break}Sn+=Sn}for(Sn=.5,ii=0,In=0;In<400&&(it=Nt+Sn*($e-Nt),Pt=R(lt,it),Fn=($e-Nt)/(Nt+$e),!(Math.abs(Fn)<Gi||(Fn=(Pt-mt)/mt,Math.abs(Fn)<Gi)||it<=0));++In)Pt>=mt?(Nt=it,It=Pt,ii<0?(ii=0,Sn=.5):Sn=ii>1?.5*Sn+.5:(mt-un)/(It-un),ii+=1):($e=it,un=Pt,ii>0?(ii=0,Sn=.5):ii<-1?Sn*=.5:Sn=(mt-un)/(It-un),ii-=1);return it}function $(lt,mt,Lt=0){if(mt<=0)return 0;const $e=(lt-Lt)/mt;let Nt,it,un,It;const Pt=[.4259894875,-.124976255,.039842437,-.006298287635,.001511162253],Sn=[1,-.3388260629,.09594393323,-.01608042283,.003778942063],Fn=[.1788541609,.1173957403,.01488850518,-.001394989411,.0001283617211],Gi=[1,.7428795082,.3153932961,.06694219548,.008790609714],In=[.1788544503,.09359161662,.006325387654,6611667319e-14,-2031049101e-15],ii=[1,.6097809921,.2560616665,.04746722384,.006957301675],lr=[.9874054407,118.6723273,849.279436,-743.7792444,427.0262186],cr=[1,106.8615961,337.6496214,2016.712389,1597.063511],Qi=[1.003675074,167.5702434,4789.711289,21217.86767,-22324.9491],is=[1,156.9424537,3745.310488,9834.698876,66924.28357],Vs=[1.000827619,664.9143136,62972.92665,475554.6998,-5743609.109],na=[1,651.4101098,56974.73333,165917.4725,-2815759.939],yo=[.04166666667,-.01996527778,.02709538966],pi=[-1.84556867,-4.284640743];if($e<-5.5){if(Nt=Math.exp($e+1),Nt<1e-10)return 0;it=Math.exp(-1/Nt),un=Math.sqrt(Nt),It=it/un*.3989422803*(1+(yo[0]+(yo[1]+yo[2]*Nt)*Nt)*Nt)}else $e<-1?(Nt=Math.exp(-$e-1),It=Math.exp(-Nt)*Math.sqrt(Nt)*(Pt[0]+(Pt[1]+(Pt[2]+(Pt[3]+Pt[4]*$e)*$e)*$e)*$e)/(Sn[0]+(Sn[1]+(Sn[2]+(Sn[3]+Sn[4]*$e)*$e)*$e)*$e)):$e<1?It=(Fn[0]+(Fn[1]+(Fn[2]+(Fn[3]+Fn[4]*$e)*$e)*$e)*$e)/(Gi[0]+(Gi[1]+(Gi[2]+(Gi[3]+Gi[4]*$e)*$e)*$e)*$e):$e<5?It=(In[0]+(In[1]+(In[2]+(In[3]+In[4]*$e)*$e)*$e)*$e)/(ii[0]+(ii[1]+(ii[2]+(ii[3]+ii[4]*$e)*$e)*$e)*$e):$e<12?(Nt=1/$e,It=Nt*Nt*(lr[0]+(lr[1]+(lr[2]+(lr[3]+lr[4]*Nt)*Nt)*Nt)*Nt)/(cr[0]+(cr[1]+(cr[2]+(cr[3]+cr[4]*Nt)*Nt)*Nt)*Nt)):$e<50?(Nt=1/$e,It=Nt*Nt*(Qi[0]+(Qi[1]+(Qi[2]+(Qi[3]+Qi[4]*Nt)*Nt)*Nt)*Nt)/(is[0]+(is[1]+(is[2]+(is[3]+is[4]*Nt)*Nt)*Nt)*Nt)):$e<300?(Nt=1/$e,It=Nt*Nt*(Vs[0]+(Vs[1]+(Vs[2]+(Vs[3]+Vs[4]*Nt)*Nt)*Nt)*Nt)/(na[0]+(na[1]+(na[2]+(na[3]+na[4]*Nt)*Nt)*Nt)*Nt)):(Nt=1/($e-$e*Math.log($e)/($e+1)),It=Nt*Nt*(1+(pi[0]+pi[1]*Nt)*Nt));return It/mt}function J(lt,mt,Lt,$e){if(Lt<=0)return 0;const Nt=$((lt-mt)/Lt,1,0);return $e?Nt/Lt:Nt}function ie(lt,mt){return R(lt,mt)}function Me(lt,mt){return q(lt,mt)}function de(lt){return ce(lt)}function fe(lt,mt,Lt){if(lt<0||lt>1)return 0;if(0==lt){if(mt<1)return Number.POSITIVE_INFINITY;if(mt>1)return 0;if(1==mt)return Lt}if(1==lt){if(Lt<1)return Number.POSITIVE_INFINITY;if(Lt>1)return 0;if(1==Lt)return mt}return Math.exp(de(mt+Lt)-de(mt)-de(Lt)+Math.log(lt)*(mt-1)+Math.log1p(-lt)*(Lt-1))}function I(lt,mt){return Math.exp(de(lt)+de(mt)-de(lt+mt))}function U(lt,mt,Lt=0){return ie(.5*mt,.5*(lt-Lt))}function D(lt,mt,Lt){let $e,Nt,it,un,It,Pt,Sn,Fn;for(Fn=1/lt,it=(1-mt)*Lt,un=it/(lt+1),Pt=un,Nt=it,It=2,$e=0,Sn=ze*Fn;Math.abs(un)>Sn;)it=(It-mt)*Lt/It,Nt*=it,un=Nt/(lt+It),$e+=un,It+=1;return $e+=Pt,$e+=Fn,it=lt*Math.log(Lt),lt+mt<ye&&Math.abs(it)<L?(Nt=w(lt+mt)/(w(lt)*w(mt)),$e=$e*Nt*Math.pow(Lt,lt)):(Nt=ce(lt+mt)-ce(lt)-ce(mt)+it+Math.log($e),$e=Nt<M?0:Math.exp(Nt)),$e}function oe(lt,mt,Lt){let $e,Nt,it,un,It,Pt,Sn,Fn;return lt<=0||mt<=0||Lt<=0?0:Lt>=1?1:(Fn=0,Pt=1-Lt,Lt>lt/(lt+mt)?(Fn=1,$e=mt,Nt=lt,It=Lt,un=Pt):($e=lt,Nt=mt,It=Pt,un=Lt),1==Fn&&Nt*un<=1&&un<=.95?it=D($e,Nt,un):(Sn=un*($e+Nt-2)-($e-1),Pt=Sn<0?function z(lt,mt,Lt){let $e,Nt,it,un,It,Pt,Sn,Fn,Gi,In,ii,lr,cr,Qi,is,Vs,na,yo,pi,bl;Fn=lt,Gi=lt+mt,In=lt,ii=lt+1,lr=1,cr=mt-1,Qi=ii,is=lt+2,un=0,Sn=1,it=1,Pt=1,yo=1,Vs=1,bl=0,pi=3*ze;do{if($e=-Lt*Fn*Gi/(In*ii),Nt=it+un*$e,It=Pt+Sn*$e,un=it,it=Nt,Sn=Pt,Pt=It,$e=Lt*lr*cr/(Qi*is),Nt=it+un*$e,It=Pt+Sn*$e,un=it,it=Nt,Sn=Pt,Pt=It,0!=It&&(Vs=Nt/It),0!=Vs?(na=Math.abs((yo-Vs)/Vs),yo=Vs):na=1,na<pi)break;Fn+=1,Gi+=1,In+=2,ii+=2,lr+=1,cr-=1,Qi+=2,is+=2,Math.abs(It)+Math.abs(Nt)>Be&&(un*=je,it*=je,Sn*=je,Pt*=je),(Math.abs(It)<je||Math.abs(Nt)<je)&&(un*=Be,it*=Be,Sn*=Be,Pt*=Be)}while(++bl<300);return yo}($e,Nt,un):function le(lt,mt,Lt){let $e,Nt,it,un,It,Pt,Sn,Fn,Gi,In,ii,lr,cr,Qi,is,Vs,na,yo,pi,bl,Fr;Fn=lt,Gi=mt-1,In=lt,ii=lt+1,lr=1,cr=lt+mt,Qi=lt+1,is=lt+2,un=0,Sn=1,it=1,Pt=1,pi=Lt/(1-Lt),yo=1,Vs=1,Fr=0,bl=3*ze;do{if($e=-pi*Fn*Gi/(In*ii),Nt=it+un*$e,It=Pt+Sn*$e,un=it,it=Nt,Sn=Pt,Pt=It,$e=pi*lr*cr/(Qi*is),Nt=it+un*$e,It=Pt+Sn*$e,un=it,it=Nt,Sn=Pt,Pt=It,0!=It&&(Vs=Nt/It),0!=Vs?(na=Math.abs((yo-Vs)/Vs),yo=Vs):na=1,na<bl)break;Fn+=1,Gi-=1,In+=2,ii+=2,lr+=1,cr+=1,Qi+=2,is+=2,Math.abs(It)+Math.abs(Nt)>Be&&(un*=je,it*=je,Sn*=je,Pt*=je),(Math.abs(It)<je||Math.abs(Nt)<je)&&(un*=Be,it*=Be,Sn*=Be,Pt*=Be)}while(++Fr<300);return yo}($e,Nt,un)/It,Sn=$e*Math.log(un),it=Nt*Math.log(It),$e+Nt<ye&&Math.abs(Sn)<L&&Math.abs(it)<L?(it=Math.pow(It,Nt),it*=Math.pow(un,$e),it/=$e,it*=Pt,it*=w($e+Nt)/(w($e)*w(Nt))):(Sn+=it+ce($e+Nt)-ce($e)-ce(Nt),Sn+=Math.log(Pt/$e),it=Sn<M?0:Math.exp(Sn))),1==Fn&&(it=it<=ze?1-ze:1-it),it)}function _e(lt,mt,Lt){let $e,Nt,it,un,It,Pt,Sn,Fn,Gi,In,ii,lr,cr,Qi,is,Vs,na,yo,pi,bl=!0;if(lt<=0||mt<=0)return 0;const Fr=()=>(na&&(Pt=Pt<=ze?1-ze:1-Pt),Pt);if(Vs=0,Lt<=0)return 0;if(Lt>=1)return 1;if(Sn=0,cr=0,Fn=1,Qi=1,pi=0,lt<=1||mt<=1)lr=1e-6,na=0,$e=lt,Nt=mt,it=Lt,Pt=$e/($e+Nt),It=oe($e,Nt,Pt);else{if(lr=1e-4,In=-m(Lt),Lt>.5?(na=1,$e=mt,Nt=lt,it=1-Lt,In=-In):(na=0,$e=lt,Nt=mt,it=Lt),Gi=(In*In-3)/6,Pt=2/(1/(2*$e-1)+1/(2*Nt-1)),un=In*Math.sqrt(Pt+Gi)/Pt-(1/(2*Nt-1)-1/(2*$e-1))*(Gi+5/6-2/(3*Pt)),un*=2,un<M)return Pt=0,Fr();Pt=$e/($e+Nt*Math.exp(un)),It=oe($e,Nt,Pt),In=(It-it)/it,Math.abs(In)<.2&&(bl=!1)}let Is=1e3;for(;Is-- >0;){for(;bl;){for(yo=0,ii=.5,Vs=0;Vs<100;Vs++){if(0!=Vs){if(Pt=Sn+ii*(Fn-Sn),1==Pt&&(Pt=1-ze),0==Pt&&(ii=.5,Pt=Sn+ii*(Fn-Sn),0==Pt))return Fr();if(It=oe($e,Nt,Pt),In=(Fn-Sn)/(Fn+Sn),Math.abs(In)<lr||(In=(It-it)/it,Math.abs(In)<lr))break}if(It<it){if(Sn=Pt,cr=It,yo<0?(yo=0,ii=.5):ii=yo>3?1-(1-ii)*(1-ii):yo>1?.5*ii+.5:(it-It)/(Qi-cr),yo+=1,Sn>.75){1==na?(na=0,$e=lt,Nt=mt,it=Lt):(na=1,$e=mt,Nt=lt,it=1-Lt),Pt=1-Pt,It=oe($e,Nt,Pt),Sn=0,cr=0,Fn=1,Qi=1;continue}}else{if(Fn=Pt,1==na&&Fn<ze)return Pt=0,Fr();Qi=It,yo>0?(yo=0,ii=.5):yo<-3?ii*=ii:yo<-1?ii*=.5:ii=(It-it)/(Qi-cr),yo-=1}}if(Sn>=1)return Pt=1-ze,Fr();if(Pt<=0)return Pt=0,Fr();break}if(bl=!0,pi)return Fr();for(pi=1,Gi=ce($e+Nt)-ce($e)-ce(Nt),Vs=0;Vs<8&&(0!=Vs&&(It=oe($e,Nt,Pt)),It<cr?(Pt=Sn,It=cr):It>Qi?(Pt=Fn,It=Qi):It<it?(Sn=Pt,cr=It):(Fn=Pt,Qi=It),1!=Pt&&0!=Pt);Vs++){if(un=($e-1)*Math.log(Pt)+(Nt-1)*Math.log(1-Pt)+Gi,un<M)return Fr();if(un>L||(un=Math.exp(un),un=(It-it)/un,is=Pt-un,is<=Sn&&(It=(Pt-Sn)/(Fn-Sn),is=Sn+.5*It*(Pt-Sn),is<=0))||is>=Fn&&(It=(Fn-Pt)/(Fn-Sn),is=Fn-.5*It*(Fn-Pt),is>=1))break;if(Pt=is,Math.abs(un/Pt)<128*ze)return Fr()}lr=256*ze}return Fr()}function Ee(lt,mt,Lt){return oe(mt,Lt,lt)}const Ve=Ee;function Qe(lt,mt,Lt){return _e(mt,Lt,lt)}function et(lt,mt,Lt){return Ee(1-lt,Lt,mt)}function Tt(lt,mt,Lt=0){return Me(.5*mt,.5*(lt-Lt))}function Bt(lt,mt,Lt){return Lt*T(mt,lt)}function ve(lt,mt,Lt){return Lt*T(mt,1-lt)}function Je(lt,mt,Lt=0){return.5-Math.atan(2*(lt-Lt)/mt)/Ie}function ct(lt,mt,Lt=0){return.5+Math.atan(2*(lt-Lt)/mt)/Ie}function We(lt,mt,Lt=0){return.5-Math.atan((lt-Lt)/mt)/Ie}function Ke(lt,mt,Lt=0){return.5+Math.atan((lt-Lt)/mt)/Ie}function ft(lt,mt=1,Lt=0){return mt/(Ie*((lt-Lt)*(lt-Lt)+mt*mt))}function zt(lt,mt=1,Lt=0){let $e=(lt-Lt)/mt;return 1/(Math.sqrt(2*Ie)*Math.abs(mt))*Math.exp(-$e*$e/2)}function Zt(lt,mt,Lt,$e=0){return lt-$e<0?0:lt-$e==0?1==mt?1/Lt:0:1==mt?Math.exp(-(lt-$e)/Lt)/Lt:Math.exp((mt-1)*Math.log((lt-$e)/Lt)-(lt-$e)/Lt-de(mt))/Lt}function Mt(lt,mt,Lt=0){let $e=lt-Lt,Nt=$e>0?1:-1;return.5-.5*Ee($e*$e/(mt+$e*$e),.5,.5*mt)*Nt}function Ot(lt,mt,Lt=0){let $e=lt-Lt,Nt=$e>0?1:-1;return.5+.5*Ee($e*$e/(mt+$e*$e),.5,.5*mt)*Nt}function sn(lt,mt,Lt=0){return Math.exp(de((mt+1)/2)-de(mt/2))/Math.sqrt(Ie*mt)*Math.pow(1+(lt-Lt)*(lt-Lt)/mt,-(mt+1)/2)}function wn(lt,mt,Lt=0){return lt-Lt<0?1:Math.exp(-mt*(lt-Lt))}function Ln(lt,mt,Lt=0){return lt-Lt<0?0:-Math.expm1(-mt*(lt-Lt))}function En(lt,mt,Lt=0){return lt-Lt<0?0:lt==Lt&&0==mt/2-1?.5:Math.exp((mt/2-1)*Math.log((lt-Lt)/2)-(lt-Lt)/2-de(mt/2))/2}function $n(lt,mt,Lt,$e=0){return mt<0||Lt<0?Number.NaN:lt-$e<0?0:Math.exp(mt/2*Math.log(mt)+Lt/2*Math.log(Lt)+de((mt+Lt)/2)-de(mt/2)-de(Lt/2)+(mt/2-1)*Math.log(lt-$e)-(mt+Lt)/2*Math.log(Lt+mt*(lt-$e)))}function vn(lt,mt,Lt,$e=0){return mt<0||Lt<0?Number.NaN:Lt/(Lt+mt*(lt-$e))>.9&&mt>1&&Lt>1?1-rn(lt,mt,Lt,$e):Ee(Lt/(Lt+mt*(lt-$e)),.5*Lt,.5*mt)}function rn(lt,mt,Lt,$e=0){if(mt<0||Lt<0)return Number.NaN;let Nt=mt*(lt-$e)/(Lt+mt*(lt-$e));return Nt>.9&&mt>1&&Lt>1?1-vn(lt,mt,Lt,$e):Ee(Nt,.5*mt,.5*Lt)}function Gt(lt,mt){return mt<=0?0:lt<=0?lt<0?0:1:U(lt,mt,0)}function qt(lt,mt,Lt){return Math.exp(-.5*Math.pow((lt-mt)/Lt,2))}function Qt(lt,mt,Lt){return Lt/((lt-mt)*(lt-mt)+Lt*Lt/4)/2/Math.PI}function _n(lt,mt){return Math.exp(de(lt)+de(mt)-de(lt+mt))}function dn(lt,mt,Lt=0,$e=1){return lt<Lt||mt<=0||$e<=0?0:Zt(lt,mt,$e,Lt)}function ci(lt,mt=0,Lt=1){return Math.exp(-Math.abs((lt-mt)/Lt))/(2*Lt)}function ir(lt,mt=0,Lt=1){return lt<=mt?.5*Math.exp(-Math.abs((lt-mt)/Lt)):1-.5*Math.exp(-Math.abs((lt-mt)/Lt))}function Vi(lt,mt){if(mt<1)return 0;let Lt=mt,$e=.5*Lt,Nt=$e+.5,it=Math.sqrt(Lt*Math.PI)*w($e)*Math.pow(1+lt*lt/Lt,Nt);return w(Nt)/it}function br(lt,mt){let Lt=mt;return lt>0?1-.5*Ve(Lt/(Lt+lt*lt),.5*Lt,.5):.5*Ve(Lt/(Lt+lt*lt),.5*Lt,.5)}function Ur(lt,mt,Lt=0,$e=1){return lt<Lt||mt<=0||$e<=0?0:x(lt,Math.log($e),mt,Lt)}function Ar(lt,mt,Lt){if(lt<0||lt>1||mt<=0||Lt<=0)return 0;let $e=_n(mt,Lt);return Math.pow(lt,mt-1)*Math.pow(1-lt,Lt-1)/$e}function cs(lt,mt,Lt){return lt<0||lt>1||mt<=0||Lt<=0?0:Ve(lt,mt,Lt)}function Rs(lt,mt,Lt){return lt.GetParValue(Lt+0)*Math.exp(-.5*Math.pow((mt-lt.GetParValue(Lt+1))/lt.GetParValue(Lt+2),2))}function es(lt,mt,Lt){return Rs(lt,mt,Lt)/(Math.sqrt(2*Math.PI)*lt.GetParValue(Lt+2))}function ho(lt,mt,Lt,$e){return lt.GetParValue($e+0)*Math.exp(-.5*Math.pow((mt-lt.GetParValue($e+1))/lt.GetParValue($e+2),2))*Math.exp(-.5*Math.pow((Lt-lt.GetParValue($e+3))/lt.GetParValue($e+4),2))}function ro(lt,mt,Lt){return Math.exp(lt.GetParValue(Lt+0)+lt.GetParValue(Lt+1)*mt)}function ws(lt,mt,Lt){return J(mt,lt.GetParValue(Lt+1),lt.GetParValue(Lt+2),!1)}function Es(lt,mt,Lt){return J(mt,lt.GetParValue(Lt+1),lt.GetParValue(Lt+2),!0)}function Yo(lt,mt,Lt,$e,Nt=0){if($e<0)return 0;let it=(lt-Nt)/$e;mt<0&&(it=-it);let un=Math.abs(mt);if(it>-un)return Math.exp(-.5*it*it);let It=Lt/un;return Math.exp(-.5*un*un)*Math.pow(It/(It-un-it),Lt)}function kl(lt,mt,Lt,$e,Nt=0){if($e<0)return 0;if(Lt<=1)return Number.NaN;let it=Math.abs(mt);return 1/($e*(Lt/it*1/(Lt-1)*Math.exp(-mt*mt/2)+Math.sqrt(Ie/2)*(1+ue(it/Math.sqrt(2)))))*Yo(lt,mt,Lt,$e,Nt)}function fo(lt,mt,Lt,$e,Nt=0){if(0==$e||0==mt)return 0;let it=1==Lt,un=(lt-Nt)/$e;mt<0&&(un=-un);let It=Math.abs(mt),Pt=0,Sn=0;const Fn=Math.sqrt(Ie/2),Gi=Math.sqrt(2*Ie),In=1/Math.sqrt(2);if(un<=-It){let ii=Math.pow(Lt/It,Lt)*Math.exp(-.5*mt*mt),lr=Lt/It-It;Sn=it?-ii*Math.log(Lt/It)+ii*Math.log(lr-un):Lt/It*(1/(Lt-1))*Math.exp(-mt*mt/2)-ii/(Lt-1)*Math.pow(lr-un,1-Lt),Pt=Fn*(1+ue(It*In))}else Pt=O(un,1),Pt*=Gi,Sn=0;return $e*(Pt+Sn)}function eo(lt,mt,Lt,$e,Nt=0){if(Lt<=1)return Number.NaN;let it=Math.abs(mt),Pt=$e*(Lt/it*1/(Lt-1)*Math.exp(-mt*mt/2)+Math.sqrt(Ie/2)*(1+ue(it/Math.sqrt(2)))),Sn=fo(lt,mt,Lt,$e,Nt);return mt>0?1-Sn/Pt:Sn/Pt}function al(lt,mt,Lt,$e,Nt=0){if(Lt<=1)return Number.NaN;let it=Math.abs(mt),Pt=$e*(Lt/it*1/(Lt-1)*Math.exp(-mt*mt/2)+Math.sqrt(Ie/2)*(1+ue(it/Math.sqrt(2)))),Sn=fo(lt,mt,Lt,$e,Nt);return mt>0?Sn/Pt:1-Sn/Pt}function xr(lt,mt,Lt){let $e=0,Nt=0,it=2*mt;for(let un=lt;un>=1;un--){let It=$e;$e=it*$e-Nt+Lt[un],Nt=It}return mt*$e-Nt+Lt[0]}function _o(lt,mt,Lt){return mt+Lt*lt}function el(lt,mt,Lt,$e){return mt+Lt*lt+$e*(2*lt*lt-1)}function lo(lt,...mt){return xr(3,lt,mt)}function Yi(lt,...mt){return xr(4,lt,mt)}function ga(lt,...mt){return xr(5,lt,mt)}function xa(lt,...mt){return xr(6,lt,mt)}function Ta(lt,...mt){return xr(7,lt,mt)}function uc(lt,...mt){return xr(8,lt,mt)}function st(lt,...mt){return xr(9,lt,mt)}function Ae(lt,...mt){return xr(10,lt,mt)}function rt(lt,mt,Lt,$e){let Nt=(1-Lt)/2;return $e?mt==lt?1:Qe(1-Nt,mt+1,lt-mt):0==mt?0:Qe(Nt,mt,lt-mt+1)}function ot(lt,mt,Lt,$e){if(0==lt)return $e?1:0;let it=mt/lt,It=_(1-(1-Lt)/2,Math.sqrt(it*(1-it)/lt));return $e?it+It>1?1:it+It:it-It<0?0:it-It}function wt(lt,mt,Lt,$e){if(0==lt)return $e?1:0;let it=mt/lt,un=_(1-(1-Lt)/2,1),It=(mt+.5*un*un)/(lt+un*un),Pt=un/(lt+un*un)*Math.sqrt(lt*it*(1-it)+un*un/4);return $e?It+Pt>1?1:It+Pt:It-Pt<0?0:It-Pt}function fn(lt,mt,Lt,$e){let it=_(1-(1-Lt)/2,1),un=(mt+.5*it*it)/(lt+it*it),It=it*Math.sqrt(un*(1-un)/(lt+it*it));return $e?un+It>1?1:un+It:un-It<0?0:un-It}function pn(lt,mt,Lt,$e){const un=(1-Lt)/2;let Pt=0,Sn=1,Fn=0;if(mt>0&&mt<1){let Gi=pn(lt,0,Lt,$e);return Fn=(pn(lt,1,Lt,$e)-Gi)*mt+Gi,Fn}for(;Math.abs(Sn-Pt)>1e-9;){Fn=(Pt+Sn)/2;let Gi=.5*fe(Fn,mt+1,lt-mt+1)/(lt+1);mt-1>=0&&(Gi+=et(Fn,mt,lt-mt+1)),Gi>($e?un:1-un)?Pt=Fn:Sn=Fn}return Fn}function jn(lt,mt,Lt,$e,Nt,it){let un=mt+Nt,It=lt-mt+it;return $e?un>0&&It>0?Qe((1+Lt)/2,un,It):1:un>0&&It>0?Qe((1-Lt)/2,un,It):0}function Yn(lt,mt){if(mt)return jn;switch(lt){case 0:return rt;case 1:return ot;case 2:return wt;case 3:return fn;case 4:return console.log("Feldman-Cousins interval kFFC not supported; using kFCP"),rt;case 8:return pn}return console.log(`Not recognized stat option ${lt}, using kFCP`),rt}},9542:($r,At,Ce)=>{"use strict";Ce.r(At),Ce.d(At,{BIT:()=>R,_ensureJSROOT:()=>mt,addMethods:()=>$,atob_func:()=>K,browser:()=>X,btoa_func:()=>ue,clTAttCanvas:()=>cs,clTAttFill:()=>Je,clTAttLine:()=>ve,clTAttMarker:()=>ct,clTAttText:()=>We,clTAxis:()=>ho,clTBox:()=>dn,clTCanvas:()=>Ar,clTClonesArray:()=>Bt,clTColor:()=>Qt,clTCutG:()=>Zt,clTF1:()=>kl,clTF2:()=>fo,clTGaxis:()=>Rs,clTGeoNode:()=>_o,clTGeoNodeMatrix:()=>el,clTGeoVolume:()=>xr,clTGraph:()=>ft,clTGraphPolargram:()=>Mt,clTGraphTime:()=>Ot,clTH1:()=>ws,clTH2:()=>Es,clTH3:()=>Yo,clTHashList:()=>Qe,clTLatex:()=>Gt,clTLegend:()=>En,clTLegendEntry:()=>$n,clTLine:()=>_n,clTList:()=>Ve,clTMap:()=>et,clTMathText:()=>qt,clTMultiGraph:()=>zt,clTNamed:()=>oe,clTObjArray:()=>Tt,clTObjString:()=>Ee,clTObject:()=>D,clTPad:()=>Ur,clTPaletteAxis:()=>vn,clTPave:()=>sn,clTPaveStats:()=>Ln,clTPaveText:()=>wn,clTPolyLine:()=>ci,clTPolyLine3D:()=>ir,clTPolyMarker3D:()=>Vi,clTProfile:()=>eo,clTProfile2D:()=>al,clTString:()=>_e,clTStyle:()=>ro,clTText:()=>rn,clone:()=>q,constants:()=>O,create:()=>Yi,createHistogram:()=>ga,createHttpRequest:()=>U,createTGraph:()=>Ta,createTHStack:()=>uc,createTMultiGraph:()=>st,createTPolyLine:()=>xa,decodeUrl:()=>de,findFunction:()=>fe,gStyle:()=>x,getDocument:()=>p,getMethods:()=>rt,getPromise:()=>lt,httpRequest:()=>z,injectCode:()=>w,internals:()=>Ze,isArrayProto:()=>Z,isBatchMode:()=>Oe,isFunc:()=>pn,isNodeJs:()=>Y,isObject:()=>fn,isPromise:()=>Yn,isRootCollection:()=>wt,isStr:()=>jn,kNoZoom:()=>lo,loadScript:()=>_,parse:()=>J,parseMulti:()=>ie,registerMethods:()=>ot,setBatchMode:()=>ce,settings:()=>P,source_dir:()=>Be,toJSON:()=>Me,version:()=>ye,version_date:()=>L,version_id:()=>M});var ze=Ce(5835);let M="7.3.1",L="28/03/2023",ye=M+" "+L,Be="",je=!!("object"==typeof process&&fn(process.versions)&&process.versions.node&&process.versions.v8),Ze={id_counter:1};const Ie="file:///home/runner/work/phoenix/phoenix/node_modules/jsroot/modules/core.mjs";if(Ie&&jn(Ie)){const $e=Ie.indexOf("modules/core.mjs");$e>=0?(Be=Ie.slice(0,$e),console.log(`Set jsroot source_dir to ${Be}, ${ye}`)):(console.log(`jsroot bundle, ${ye}`),Ze.ignore_v6=!0)}let He=je;function Oe(){return He}function ce($e){He=!!$e}function Y(){return je}const K=Y()?$e=>Buffer.from($e,"base64").toString("latin1"):globalThis?.atob,ue=Y()?$e=>Buffer.from($e,"latin1").toString("base64"):globalThis?.btoa;let X={isFirefox:!0,isSafari:!1,isChrome:!1,isWin:!1,touches:!1};function Z($e){if($e.length<14||0!=$e.indexOf("[object "))return 0;let Nt=$e.indexOf("Array]");return Nt<0||Nt!=$e.length-6?0:14==$e.length?1:2}typeof document<"u"&&typeof window<"u"&&typeof navigator<"u"&&(X.isFirefox=navigator.userAgent.indexOf("Firefox")>=0||typeof InstallTrigger<"u",X.isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,X.isChrome=!!window.chrome,X.isChromeHeadless=navigator.userAgent.indexOf("HeadlessChrome")>=0,X.chromeVersion=X.isChrome||X.isChromeHeadless?parseInt(navigator.userAgent.match(/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\.([0-9]+)\.([0-9]+)/)[1]):0,X.isWin=navigator.userAgent.indexOf("Windows")>=0,X.touches="ontouchend"in document);let O={Render3D:{Default:0,WebGL:1,WebGLImage:2,SVG:3,fromString($e){return"webgl"===$e||"gl"==$e?this.WebGL:"img"===$e?this.WebGLImage:"svg"===$e?this.SVG:this.Default}},Embed3D:{NoEmbed:-1,Default:0,Overlay:1,Embed:2,EmbedSVG:3,fromString($e){return"embed"===$e?this.Embed:"overlay"===$e?this.Overlay:this.Default}},Latex:{Off:0,Symbols:1,Normal:2,MathJax:3,AlwaysMathJax:4,fromString($e){if(!$e||!jn($e))return this.Normal;switch($e){case"off":return this.Off;case"symbols":return this.Symbols;case"normal":case"latex":case"exp":case"experimental":return this.Normal;case"MathJax":case"mathjax":case"math":return this.MathJax;case"AlwaysMathJax":case"alwaysmath":case"alwaysmathjax":return this.AlwaysMathJax}let Nt=parseInt($e);return Number.isInteger(Nt)&&Nt>=this.Off&&Nt<=this.AlwaysMathJax?Nt:this.Normal}}},P={Render3D:O.Render3D.Default,Render3DBatch:O.Render3D.Default,Embed3D:O.Embed3D.Default,Tooltip:!0,TooltipAnimation:500,ContextMenu:!0,Zooming:!0,ZoomMouse:!0,ZoomWheel:!0,ZoomTouch:!0,MoveResize:!0,HandleKeys:!0,DragAndDrop:!0,DragGraphs:!0,ProgressBox:!0,ToolBar:"popup",ToolBarSide:"left",ToolBarVert:!1,CanEnlarge:!0,CanAdjustFrame:!1,ApproxTextSize:!1,OptimizeDraw:1,AutoStat:!0,FrameNDC:{fX1NDC:.07,fY1NDC:.12,fX2NDC:.95,fY2NDC:.88},SmallPad:{width:150,height:100},Palette:57,Latex:O.Latex.Normal,GeoGradPerSegm:6,GeoCompressComp:!0,IgnoreUrlOptions:!1,HierarchyLimit:250,XValuesFormat:void 0,YValuesFormat:void 0,ZValuesFormat:void 0,HandleWrongHttpResponse:!1,UseStamp:!0,MaxRanges:200,SkipStreamerInfos:!1,OnlyLastCycle:!1,DarkMode:!1,PreferSavedPoints:!1};je&&Object.assign(P,{ToolBar:!1,Tooltip:0,ContextMenu:!1,Zooming:!1,MoveResize:!1,DragAndDrop:!1,ProgressBox:!1});let x={fName:"Modern",fOptLogx:0,fOptLogy:0,fOptLogz:0,fOptDate:0,fOptFile:0,fDateX:.01,fDateY:.01,fOptTitle:1,fCanvasColor:0,fPadColor:0,fPadBottomMargin:.1,fPadTopMargin:.1,fPadLeftMargin:.1,fPadRightMargin:.1,fPadGridX:!1,fPadGridY:!1,fPadTickX:0,fPadTickY:0,fStatColor:0,fStatStyle:1e3,fStatTextColor:1,fStatFontSize:0,fStatFont:42,fStatBorderSize:1,fStatFormat:"6.4g",fStatX:.98,fStatY:.935,fStatW:.2,fStatH:.16,fTitleAlign:23,fTitleColor:0,fTitleTextColor:1,fTitleBorderSize:0,fTitleFont:42,fTitleFontSize:.05,fTitleStyle:0,fTitleX:.5,fTitleY:.995,fTitleW:0,fTitleH:0,fFitFormat:"5.4g",fOptStat:1111,fOptFit:0,fNumberContours:20,fGridColor:0,fGridStyle:3,fGridWidth:1,fFrameFillColor:0,fFrameFillStyle:1001,fFrameLineColor:1,fFrameLineWidth:1,fFrameLineStyle:1,fFrameBorderSize:1,fFrameBorderMode:0,fEndErrorSize:2,fErrorX:.5,fHistMinimumZero:!1,fHistTopMargin:.05,fHistFillColor:0,fHistFillStyle:1001,fHistLineColor:602,fHistLineStyle:1,fHistLineWidth:1,fPaintTextFormat:"g",fTimeOffset:788918400,fLegendBorderSize:1,fLegendFont:42,fLegendTextSize:0,fLegendFillColor:0,fHatchesLineWidth:1,fHatchesSpacing:1};function p(){return je?Ze.nodejs_document:typeof document<"u"?document:"object"==typeof window?window.document:void 0}function w($e){return m.apply(this,arguments)}function m(){return(m=(0,ze.Z)(function*($e){if(je){let Nt,it;return Ce.e(282).then(Ce.t.bind(Ce,1282,19)).then(un=>(Nt=un.tmpNameSync()+".js",Ce.e(148).then(Ce.t.bind(Ce,2148,19)))).then(un=>(it=un,it.writeFileSync(Nt,$e),import("file://"+Nt))).finally(()=>it.unlinkSync(Nt))}if(typeof document<"u"){let Nt=document.getElementsByTagName("script");for(let un=0;un<Nt.length;++un)if(Nt[un].innerHTML==$e)return!0;return($e.indexOf("JSROOT.require")>=0?mt():Promise.resolve(!0)).then(()=>new Promise(un=>{let It=document.createElement("script");It.setAttribute("type","text/javascript"),It.innerHTML=$e,document.head.appendChild(It),setTimeout(()=>un(!0),10)}))}return!1})).apply(this,arguments)}function _($e){return F.apply(this,arguments)}function F(){return(F=(0,ze.Z)(function*($e){if(!$e)return!0;if(jn($e)&&$e.indexOf(";")>=0&&($e=$e.split(";")),!jn($e)){let It=$e,Pt=()=>!It.length||_(It.shift()).then(Pt,Pt);return Pt()}0===$e.indexOf("$$$")&&(0==($e=$e.slice(3)).indexOf("style/")&&$e.indexOf(".css")<0&&($e+=".css"),$e=Be+$e);let Nt,it=$e.indexOf(".css")>0;if(je)return it?null:0==$e.indexOf("http:")||0==$e.indexOf("https:")?z($e,"text").then(It=>w(It)):import($e);const un=It=>{if(It==$e)return!0;let Pt=It.indexOf($e);return Pt>0&&Pt+$e.length==It.length&&"/"==It[Pt-1]};if(it){let It=document.getElementsByTagName("link");for(let Pt=0;Pt<It.length;++Pt)if(It[Pt].href&&"text/css"===It[Pt].type&&"stylesheet"===It[Pt].rel&&un(It[Pt].href))return!0}else{let It=document.getElementsByTagName("script");for(let Pt=0;Pt<It.length;++Pt)if(un(It[Pt].src))return!0}return it?(Nt=document.createElement("link"),Nt.setAttribute("rel","stylesheet"),Nt.setAttribute("type","text/css"),Nt.setAttribute("href",$e)):(Nt=document.createElement("script"),Nt.setAttribute("type","text/javascript"),Nt.setAttribute("src",$e)),new Promise((It,Pt)=>{Nt.onload=()=>It(!0),Nt.onerror=()=>{Nt.remove(),Pt(Error(`Fail to load ${$e}`))},document.head.appendChild(Nt)})})).apply(this,arguments)}function R($e){return 1<<$e}function q($e,Nt,it){if(!$e)return null;if(Nt){const Pt=Nt.obj.indexOf($e);if(Pt>=0)return Nt.clones[Pt]}else Nt={obj:[],clones:[],nofunc:it};let un=Z(Object.prototype.toString.apply($e));if(1==un){let Pt=[];Nt.obj.push($e),Nt.clones.push(Pt);for(let Sn=0;Sn<$e.length;++Sn)fn($e[Sn])?Pt.push(q($e[Sn],Nt)):Pt.push($e[Sn]);return Pt}if(2==un){let Pt=[];Nt.obj.push($e),Nt.clones.push(Pt);for(let Sn=0;Sn<$e.length;++Sn)Pt.push($e[Sn]);return Pt}let It={};Nt.obj.push($e),Nt.clones.push(It);for(let Pt in $e)fn($e[Pt])?It[Pt]=q($e[Pt],Nt):(!Nt.nofunc||!pn($e[Pt]))&&(It[Pt]=$e[Pt]);return It}const T=Object.assign;function $($e,Nt){T($e,rt(Nt||$e._typename,$e))}function J($e){if(!$e)return null;let un,Nt=jn($e)?JSON.parse($e):$e,it=[];const It=Pt=>{if(null==Pt)return;if(jn(Pt)){if(un||Pt.length<6||0!==Pt.indexOf("$ref:"))return;let In=parseInt(Pt.slice(5));return!Number.isInteger(In)||In<0||In>=it.length?void 0:(un=!1,it[In])}if("object"!=typeof Pt)return;if(Z(Object.prototype.toString.apply(Pt))>0){for(let In=0;In<Pt.length;++In){let ii=It(Pt[In]);void 0!==ii&&(Pt[In]=ii)}return}let Fn=Object.keys(Pt),Gi=Fn.length;if(!1!==un&&1===Gi&&"$ref"===Fn[0]){const In=parseInt(Pt.$ref);return!Number.isInteger(In)||In<0||In>=it.length?void 0:(un=!0,it[In])}if(!1!==un&&Gi>1&&"$arr"===Fn[0]&&"len"===Fn[1]){let In;switch(Pt.$arr){case"Int8":In=new Int8Array(Pt.len);break;case"Uint8":In=new Uint8Array(Pt.len);break;case"Int16":In=new Int16Array(Pt.len);break;case"Uint16":In=new Uint16Array(Pt.len);break;case"Int32":In=new Int32Array(Pt.len);break;case"Uint32":In=new Uint32Array(Pt.len);break;case"Float32":In=new Float32Array(Pt.len);break;case"Int64":case"Uint64":case"Float64":In=new Float64Array(Pt.len);break;default:In=new Array(Pt.len)}if(In.fill("Bool"!==Pt.$arr&&0),void 0!==Pt.b){let ii=K(Pt.b);if(!In.buffer)throw new Error("base64 coding supported only for native arrays with binary data");{let lr=new DataView(In.buffer,Pt.o||0),cr=Math.min(ii.length,lr.byteLength);for(let Qi=0;Qi<cr;++Qi)lr.setUint8(Qi,ii.charCodeAt(Qi))}}else{let ii=2,lr=0;for(;ii<Gi;){if("p"==Fn[ii][0]&&(lr=Pt[Fn[ii++]]),"v"!==Fn[ii][0])throw new Error(`Unexpected member ${Fn[ii]} in array decoding`);let cr=Pt[Fn[ii++]];if("object"==typeof cr)for(let Qi=0;Qi<cr.length;++Qi)In[lr++]=cr[Qi];else if(In[lr++]=cr,ii<Gi&&"n"==Fn[ii][0]){let Qi=Pt[Fn[ii++]];for(;--Qi;)In[lr++]=cr}}}return In}if(!1!==un&&3===Gi&&"$pair"===Fn[0]&&"first"===Fn[1]&&"second"===Fn[2]){un=!0;let In=It(Pt.first),ii=It(Pt.second);return void 0!==In&&(Pt.first=In),void 0!==ii&&(Pt.second=ii),Pt._typename=Pt.$pair,void delete Pt.$pair}if(!(it.indexOf(Pt)>=0)){it.push(Pt),Pt._typename&&$(Pt);for(let In=0;In<Gi;++In){const ii=Fn[In],lr=It(Pt[ii]);void 0!==lr&&(Pt[ii]=lr)}}};return It(Nt),Nt}function ie($e){if(!$e)return null;let Nt=JSON.parse($e);if(Nt&&Nt.length)for(let it=0;it<Nt.length;++it)Nt[it]=J(Nt[it]);return Nt}function Me($e,Nt){if(!fn($e))return"";let it=[];const un=Pt=>{if(pn(Pt))return;if(null==Pt||!fn(Pt))return Pt;if(Z(Object.prototype.toString.apply(Pt))>0){let ii=new Array(Pt.length);for(let lr=0;lr<Pt.length;++lr)ii[lr]=un(Pt[lr]);return ii}let Sn=it.indexOf(Pt);if(Sn>=0)return{$ref:Sn};let Fn=Object.keys(Pt),Gi=Fn.length,In={};if(3==Gi&&"$pair"===Fn[0]&&"first"===Fn[1]&&"second"===Fn[2])return In.$pair=Pt.$pair,In.first=un(Pt.first),In.second=un(Pt.second),In;it.push(Pt);for(let ii=0;ii<Gi;++ii){let lr=Fn[ii];lr&&"$"!=lr[0]&&(In[lr]=un(Pt[lr]))}return In};let It=un($e);return JSON.stringify(It,null,Nt)}function de($e){let Nt={opts:{},has(un){return void 0!==this.opts[un]},get(un,It){let Pt=this.opts[un];return void 0!==Pt?Pt:It}};if(!$e||!jn($e)){if(P.IgnoreUrlOptions||typeof document>"u")return Nt;$e=document.URL}Nt.url=$e;let it=$e.indexOf("?");if(it<0)return Nt;for($e=decodeURI($e.slice(it+1));$e;){let un=0,It=0,Pt=-1,Sn=-1;for(;un<$e.length&&(0!==It||"&"!==$e[un]&&"#"!==$e[un]);){switch($e[un]){case"'":It>=0&&(It=(It+1)%2),Sn<0&&(Sn=un);break;case'"':It<=0&&(It=(It-1)%2),Sn<0&&(Sn=un);break;case"=":Sn<0&&Pt<0&&(Pt=un)}un++}if(Pt<0&&Sn<0&&(Nt.opts[$e.slice(0,un)]=""),Pt>0){let Fn=$e.slice(Pt+1,un);("'"===Fn[0]||'"'===Fn[0])&&Fn[0]===Fn[Fn.length-1]&&(Fn=Fn.slice(1,Fn.length-1)),Nt.opts[$e.slice(0,Pt)]=Fn}if(un>=$e.length||"#"==$e[un])break;$e=$e.slice(un+1)}return Nt}function fe($e){if(pn($e))return $e;if(!jn($e))return null;let Nt=$e.split("."),it=globalThis;for(let un=0;it&&un<Nt.length;++un)it=it[Nt[un]];return pn(it)?it:null}function I($e,Nt,it,un,It){$e.http_callback=pn(un)?un.bind($e):function(){},$e.error_callback=pn(It)?It.bind($e):function(Gi){console.warn(Gi.message),this.http_callback(null)}.bind($e),it||(it="buf");let Pt="GET",Sn=!0,Fn=it.indexOf(";sync");switch(Fn>0&&(it=it.slice(0,Fn),Sn=!1),it){case"head":Pt="HEAD";break;case"posttext":Pt="POST",it="text";break;case"postbuf":Pt="POST",it="buf";break;case"post":case"multi":Pt="POST"}return $e.kind=it,P.HandleWrongHttpResponse&&"GET"==Pt&&pn($e.addEventListener)&&$e.addEventListener("progress",function(Gi){Gi.lengthComputable&&this.expected_size&&Gi.loaded>this.expected_size&&(this.did_abort=!0,this.abort(),this.error_callback(Error(`Server sends more bytes ${Gi.loaded} than expected ${this.expected_size}. Abort I/O operation`),598))}.bind($e)),$e.onreadystatechange=function(){if(!this.did_abort){if(2===this.readyState&&this.expected_size){let Gi=parseInt(this.getResponseHeader("Content-Length"));if(Number.isInteger(Gi)&&Gi>this.expected_size&&!P.HandleWrongHttpResponse)return this.did_abort=!0,this.abort(),this.error_callback(Error(`Server response size ${Gi} larger than expected ${this.expected_size}. Abort I/O operation`),599)}if(4==this.readyState){if(200!=this.status&&206!=this.status&&!X.qt5&&(0!=this.status||0!=Nt.indexOf("file://")&&0!=Nt.indexOf("blob:")))return this.error_callback(Error(`Fail to load url ${Nt}`),this.status);if(this.nodejs_checkzip&&"gzip"==this.getResponseHeader("content-encoding"))return Ce.e(843).then(Ce.t.bind(Ce,4843,19)).then(Gi=>{let In=Gi.unzipSync(Buffer.from(this.response)),ii=JSON.parse(In);return this.http_callback(J(ii))});switch(this.kind){case"xml":return this.http_callback(this.responseXML);case"text":return this.http_callback(this.responseText);case"object":return this.http_callback(J(this.responseText));case"multi":return this.http_callback(ie(this.responseText));case"head":return this.http_callback(this)}if(void 0===this.responseType)return this.http_callback(this.responseText);if("bin"==this.kind&&"byteLength"in this.response){let Gi="",In=new Uint8Array(this.response);for(let ii=0;ii<In.length;++ii)Gi+=String.fromCharCode(In[ii]);return this.http_callback(Gi)}this.http_callback(this.response)}}},$e.open(Pt,Nt,Sn),("bin"==it||"buf"==it)&&($e.responseType="arraybuffer"),je&&"GET"==Pt&&"object"===it&&Nt.indexOf(".json.gz")>0&&($e.nodejs_checkzip=!0,$e.responseType="arraybuffer"),$e}function U($e,Nt,it,un,It){if(Y()){if(!It)throw Error("Not allowed to create http requests in node without promise");return Ce.e(680).then(Ce.t.bind(Ce,1680,19)).then(Sn=>{let Fn=new Sn.default;return I(Fn,$e,Nt,it,un),Fn})}let Pt=new XMLHttpRequest;return I(Pt,$e,Nt,it,un),It?Promise.resolve(Pt):Pt}function z($e,Nt,it){return le.apply(this,arguments)}function le(){return(le=(0,ze.Z)(function*($e,Nt,it){return new Promise((un,It)=>{U($e,Nt,un,It,!0).then(Pt=>Pt.send(it||null))})})).apply(this,arguments)}const D="TObject",oe="TNamed",_e="TString",Ee="TObjString",Ve="TList",Qe="THashList",et="TMap",Tt="TObjArray",Bt="TClonesArray",ve="TAttLine",Je="TAttFill",ct="TAttMarker",We="TAttText",Ke="THStack",ft="TGraph",zt="TMultiGraph",Zt="TCutG",Mt="TGraphPolargram",Ot="TGraphTime",sn="TPave",wn="TPaveText",Ln="TPaveStats",En="TLegend",$n="TLegendEntry",vn="TPaletteAxis",rn="TText",Gt="TLatex",qt="TMathText",Qt="TColor",_n="TLine",dn="TBox",ci="TPolyLine",ir="TPolyLine3D",Vi="TPolyMarker3D",br="TAttPad",Ur="TPad",Ar="TCanvas",cs="TAttCanvas",Rs="TGaxis",es="TAttAxis",ho="TAxis",ro="TStyle",ws="TH1",Es="TH2",Yo="TH3",kl="TF1",fo="TF2",eo="TProfile",al="TProfile2D",xr="TGeoVolume",_o="TGeoNode",el="TGeoNodeMatrix",lo=-1111;function Yi($e,Nt){let it=Nt||{};switch($e){case D:T(it,{fUniqueID:0,fBits:0});break;case oe:T(it,{fUniqueID:0,fBits:0,fName:"",fTitle:""});break;case Ve:case Qe:T(it,{name:$e,arr:[],opt:[]});break;case es:T(it,{fNdivisions:510,fAxisColor:1,fLabelColor:1,fLabelFont:42,fLabelOffset:.005,fLabelSize:.035,fTickLength:.03,fTitleOffset:1,fTitleSize:.035,fTitleColor:1,fTitleFont:42});break;case ho:Yi(oe,it),Yi(es,it),T(it,{fNbins:1,fXmin:0,fXmax:1,fXbins:[],fFirst:0,fLast:0,fBits2:0,fTimeDisplay:!1,fTimeFormat:"",fLabels:null,fModLabs:null});break;case ve:T(it,{fLineColor:1,fLineStyle:1,fLineWidth:1});break;case Je:T(it,{fFillColor:0,fFillStyle:0});break;case ct:T(it,{fMarkerColor:1,fMarkerStyle:1,fMarkerSize:1});break;case _n:Yi(D,it),Yi(ve,it),T(it,{fX1:0,fX2:1,fY1:0,fY2:1});break;case dn:Yi(D,it),Yi(ve,it),Yi(Je,it),T(it,{fX1:0,fX2:1,fY1:0,fY2:1});break;case sn:Yi(dn,it),T(it,{fX1NDC:0,fY1NDC:0,fX2NDC:1,fY2NDC:1,fBorderSize:0,fInit:1,fShadowColor:1,fCornerRadius:0,fOption:"brNDC",fName:"title"});break;case We:T(it,{fTextAngle:0,fTextSize:0,fTextAlign:22,fTextColor:1,fTextFont:42});break;case wn:Yi(sn,it),Yi(We,it),T(it,{fLabel:"",fLongest:27,fMargin:.05,fLines:Yi(Ve)});break;case Ln:Yi(wn,it),T(it,{fFillColor:x.fStatColor,fFillStyle:x.fStatStyle,fTextFont:x.fStatFont,fTextSize:x.fStatFontSize,fTextColor:x.fStatTextColor,fBorderSize:x.fStatBorderSize,fOptFit:0,fOptStat:0,fFitFormat:"",fStatFormat:"",fParent:null});break;case En:Yi(sn,it),Yi(We,it),T(it,{fColumnSeparation:0,fEntrySeparation:.1,fMargin:.25,fNColumns:1,fPrimitives:Yi(Ve),fBorderSize:x.fLegendBorderSize,fTextFont:x.fLegendFont,fTextSize:x.fLegendTextSize,fFillColor:x.fLegendFillColor});break;case vn:Yi(sn,it),T(it,{fAxis:Yi(Rs),fH:null,fName:sn});break;case $n:Yi(D,it),Yi(We,it),Yi(ve,it),Yi(Je,it),Yi(ct,it),T(it,{fLabel:"",fObject:null,fOption:""});break;case rn:Yi(oe,it),Yi(We,it),T(it,{fLimitFactorSize:3,fOriginSize:.04});break;case Gt:Yi(rn,it),Yi(ve,it),T(it,{fX:0,fY:0});break;case Ee:Yi(D,it),T(it,{fString:""});break;case ws:Yi(oe,it),Yi(ve,it),Yi(Je,it),Yi(ct,it),T(it,{fBits:8,fNcells:0,fXaxis:Yi(ho),fYaxis:Yi(ho),fZaxis:Yi(ho),fFillColor:x.fHistFillColor,fFillStyle:x.fHistFillStyle,fLineColor:x.fHistLineColor,fLineStyle:x.fHistLineStyle,fLineWidth:x.fHistLineWidth,fBarOffset:0,fBarWidth:1e3,fEntries:0,fTsumw:0,fTsumw2:0,fTsumwx:0,fTsumwx2:0,fMaximum:lo,fMinimum:lo,fNormFactor:0,fContour:[],fSumw2:[],fOption:"",fFunctions:Yi(Ve),fBufferSize:0,fBuffer:[],fBinStatErrOpt:0,fStatOverflows:2});break;case"TH1I":case"TH1L64":case"TH1F":case"TH1D":case"TH1S":case"TH1C":Yi(ws,it),it.fArray=[];break;case Es:Yi(ws,it),T(it,{fScalefactor:1,fTsumwy:0,fTsumwy2:0,fTsumwxy:0});break;case"TH2I":case"TH2L64":case"TH2F":case"TH2D":case"TH2S":case"TH2C":Yi(Es,it),it.fArray=[];break;case Yo:Yi(ws,it),T(it,{fTsumwy:0,fTsumwy2:0,fTsumwz:0,fTsumwz2:0,fTsumwxy:0,fTsumwxz:0,fTsumwyz:0});break;case"TH3I":case"TH3L64":case"TH3F":case"TH3D":case"TH3S":case"TH3C":Yi(Yo,it),it.fArray=[];break;case Ke:Yi(oe,it),T(it,{fHists:Yi(Ve),fHistogram:null,fMaximum:lo,fMinimum:lo});break;case ft:Yi(oe,it),Yi(ve,it),Yi(Je,it),Yi(ct,it),T(it,{fFunctions:Yi(Ve),fHistogram:null,fMaxSize:0,fMaximum:lo,fMinimum:lo,fNpoints:0,fX:[],fY:[]});break;case"TGraphAsymmErrors":Yi(ft,it),T(it,{fEXlow:[],fEXhigh:[],fEYlow:[],fEYhigh:[]});break;case zt:Yi(oe,it),T(it,{fFunctions:Yi(Ve),fGraphs:Yi(Ve),fHistogram:null,fMaximum:lo,fMinimum:lo});break;case Mt:Yi(oe,it),Yi(We,it),Yi(ve,it),T(it,{fRadian:!0,fDegree:!1,fGrad:!1,fPolarLabelColor:1,fRadialLabelColor:1,fAxisAngle:0,fPolarOffset:.04,fPolarTextSize:.04,fRadialOffset:.025,fRadialTextSize:.035,fRwrmin:0,fRwrmax:1,fRwtmin:0,fRwtmax:2*Math.PI,fTickpolarSize:.02,fPolarLabelFont:62,fRadialLabelFont:62,fCutRadial:0,fNdivRad:508,fNdivPol:508});break;case ci:Yi(D,it),Yi(ve,it),Yi(Je,it),T(it,{fLastPoint:-1,fN:0,fOption:"",fX:null,fY:null});break;case Rs:Yi(_n,it),Yi(We,it),T(it,{fChopt:"",fFunctionName:"",fGridLength:0,fLabelColor:1,fLabelFont:42,fLabelOffset:.005,fLabelSize:.035,fName:"",fNdiv:12,fTickSize:.02,fTimeFormat:"",fTitle:"",fTitleOffset:1,fTitleSize:.035,fWmax:100,fWmin:0});break;case br:T(it,{fLeftMargin:x.fPadLeftMargin,fRightMargin:x.fPadRightMargin,fBottomMargin:x.fPadBottomMargin,fTopMargin:x.fPadTopMargin,fXfile:2,fYfile:2,fAfile:1,fXstat:.99,fYstat:.99,fAstat:2,fFrameFillColor:x.fFrameFillColor,fFrameFillStyle:x.fFrameFillStyle,fFrameLineColor:x.fFrameLineColor,fFrameLineWidth:x.fFrameLineWidth,fFrameLineStyle:x.fFrameLineStyle,fFrameBorderSize:x.fFrameBorderSize,fFrameBorderMode:x.fFrameBorderMode});break;case Ur:Yi(D,it),Yi(ve,it),Yi(Je,it),Yi(br,it),T(it,{fFillColor:x.fPadColor,fFillStyle:1001,fX1:0,fY1:0,fX2:1,fY2:1,fXtoAbsPixelk:1,fXtoPixelk:1,fXtoPixel:1,fYtoAbsPixelk:1,fYtoPixelk:1,fYtoPixel:1,fUtoAbsPixelk:1,fUtoPixelk:1,fUtoPixel:1,fVtoAbsPixelk:1,fVtoPixelk:1,fVtoPixel:1,fAbsPixeltoXk:1,fPixeltoXk:1,fPixeltoX:1,fAbsPixeltoYk:1,fPixeltoYk:1,fPixeltoY:1,fXlowNDC:0,fYlowNDC:0,fXUpNDC:0,fYUpNDC:0,fWNDC:1,fHNDC:1,fAbsXlowNDC:0,fAbsYlowNDC:0,fAbsWNDC:1,fAbsHNDC:1,fUxmin:0,fUymin:0,fUxmax:0,fUymax:0,fTheta:30,fPhi:30,fAspectRatio:0,fNumber:0,fLogx:x.fOptLogx,fLogy:x.fOptLogy,fLogz:x.fOptLogz,fTickx:x.fPadTickX,fTicky:x.fPadTickY,fPadPaint:0,fCrosshair:0,fCrosshairPos:0,fBorderSize:2,fBorderMode:0,fModified:!1,fGridx:x.fPadGridX,fGridy:x.fPadGridY,fAbsCoord:!1,fEditable:!0,fFixedAspectRatio:!1,fPrimitives:Yi(Ve),fExecs:null,fName:"pad",fTitle:"canvas"});break;case cs:T(it,{fXBetween:2,fYBetween:2,fTitleFromTop:1.2,fXdate:.2,fYdate:.3,fAdate:1});break;case Ar:Yi(Ur,it),T(it,{fFillColor:x.fCanvasColor,fFillStyle:1001,fNumPaletteColor:0,fNextPaletteColor:0,fDISPLAY:"$DISPLAY",fDoubleBuffer:0,fRetained:!0,fXsizeUser:0,fYsizeUser:0,fXsizeReal:20,fYsizeReal:10,fWindowTopX:0,fWindowTopY:0,fWindowWidth:0,fWindowHeight:0,fCw:500,fCh:300,fCatt:Yi(cs),kMoveOpaque:!0,kResizeOpaque:!0,fHighLightColor:5,fBatch:!0,kShowEventStatus:!1,kAutoExec:!0,kMenuBar:!0});break;case xr:Yi(oe,it),Yi(ve,it),Yi(Je,it),T(it,{fGeoAtt:0,fFinder:null,fMedium:null,fNodes:null,fNtotal:0,fNumber:0,fRefCount:0,fShape:null,fVoxels:null});break;case _o:Yi(oe,it),T(it,{fGeoAtt:0,fMother:null,fNovlp:0,fNumber:0,fOverlaps:null,fVolume:null});break;case el:Yi(_o,it),T(it,{fMatrix:null});break;case"TGeoTrack":Yi(D,it),Yi(ve,it),Yi(ct,it),T(it,{fGeoAtt:0,fNpoints:0,fPoints:[]});break;case ir:Yi(D,it),Yi(ve,it),T(it,{fLastPoint:-1,fN:0,fOption:"",fP:[]});break;case Vi:Yi(D,it),Yi(ct,it),T(it,{fLastPoint:-1,fN:0,fName:"",fOption:"",fP:[]})}return it._typename=$e,$(it,$e),it}function ga($e,Nt,it,un){let It=Yi($e);if(!It.fXaxis||!It.fYaxis||!It.fZaxis)return null;switch(It.fName="hist",It.fTitle="title",Nt&&T(It.fXaxis,{fNbins:Nt,fXmin:0,fXmax:Nt}),it&&T(It.fYaxis,{fNbins:it,fXmin:0,fXmax:it}),un&&T(It.fZaxis,{fNbins:un,fXmin:0,fXmax:un}),parseInt($e[2])){case 1:Nt&&(It.fNcells=Nt+2);break;case 2:Nt&&it&&(It.fNcells=(Nt+2)*(it+2));break;case 3:Nt&&it&&un&&(It.fNcells=(Nt+2)*(it+2)*(un+2))}if(It.fNcells>0){switch($e[3]){case"C":It.fArray=new Int8Array(It.fNcells);break;case"S":It.fArray=new Int16Array(It.fNcells);break;case"I":It.fArray=new Int32Array(It.fNcells);break;case"F":It.fArray=new Float32Array(It.fNcells);break;case"L":case"D":It.fArray=new Float64Array(It.fNcells);break;default:It.fArray=new Array(It.fNcells)}It.fArray.fill(0)}return It}function xa($e,Nt){let it=Yi(ci);return $e&&(it.fN=$e,Nt?(it.fX=new Int32Array($e),it.fY=new Int32Array($e)):(it.fX=new Float32Array($e),it.fY=new Float32Array($e))),it}function Ta($e,Nt,it){let un=T(Yi(ft),{fBits:1032,fName:"graph",fTitle:"title"});if($e>0){un.fMaxSize=un.fNpoints=$e;const It=fn(Nt)&&Nt.length===$e,Pt=fn(it)&&it.length===$e;for(let Sn=0;Sn<$e;++Sn)un.fX.push(It?Nt[Sn]:Sn/$e),un.fY.push(Pt?it[Sn]:Sn/$e)}return un}function uc(){let $e=Yi(Ke);for(let Nt=0;Nt<arguments.length;++Nt)$e.fHists.Add(arguments[Nt],"");return $e}function st(){let $e=Yi(zt);for(let Nt=0;Nt<arguments.length;++Nt)$e.fGraphs.Add(arguments[Nt],"");return $e}const Ae={};function rt($e,Nt){let it=Ae[$e],un=void 0!==it;return un||(it={}),($e==D||$e==oe||Nt&&void 0!==Nt.fBits)&&typeof it.TestBit>"u"&&(it.TestBit=function(It){return 0!=(this.fBits&It)},it.InvertBit=function(It){this.fBits=this.fBits^16777215&It}),un||(($e===Ve||$e===Qe)&&(it.Clear=function(){this.arr=[],this.opt=[]},it.Add=function(It,Pt){this.arr.push(It),this.opt.push(jn(Pt)?Pt:"")},it.AddFirst=function(It,Pt){this.arr.unshift(It),this.opt.unshift(jn(Pt)?Pt:"")},it.RemoveAt=function(It){this.arr.splice(It,1),this.opt.splice(It,1)}),($e===wn||$e===Ln)&&(it.AddText=function(It){let Pt=Yi(Gt);Pt.fTitle=It,Pt.fTextAlign=this.fTextAlign,this.fLines.Add(Pt)},it.Clear=function(){this.fLines.Clear()}),(0==$e.indexOf(kl)||$e===fo)&&(it.addFormula=function(It){It&&(void 0===this.formulas&&(this.formulas=[]),this.formulas.push(It))},it.GetParName=function(It){if(this.fParams&&this.fParams.fParNames)return this.fParams.fParNames[It];if(this.fFormula&&this.fFormula.fParams)for(let Pt=0;Pt<this.fFormula.fParams.length;++Pt)if(this.fFormula.fParams[Pt].second==It)return this.fFormula.fParams[Pt].first;return this.fNames&&this.fNames[It]?this.fNames[It]:"p"+It},it.GetParValue=function(It){return this.fParams&&this.fParams.fParameters?this.fParams.fParameters[It]:this.fFormula&&this.fFormula.fClingParameters?this.fFormula.fClingParameters[It]:this.fParams?this.fParams[It]:void 0},it.GetParError=function(It){return this.fParErrors?this.fParErrors[It]:void 0},it.GetNumPars=function(){return this.fNpar}),(0==$e.indexOf(ft)||$e==Zt)&&$e!=Mt&&$e!=Ot&&(it.IsInside=function(It,Pt){let Sn=0,Fn=this.fNpoints-1,Gi=this.fX,In=this.fY,ii=!1;for(;Sn<this.fNpoints;++Sn)(In[Sn]<Pt&&In[Fn]>=Pt||In[Fn]<Pt&&In[Sn]>=Pt)&&Gi[Sn]+(Pt-In[Sn])/(In[Fn]-In[Sn])*(Gi[Fn]-Gi[Sn])<It&&(ii=!ii),Fn=Sn;return ii}),(0==$e.indexOf(ws)||0==$e.indexOf(Es)||0==$e.indexOf(Yo))&&(it.getBinError=function(It){return It>=this.fNcells&&(It=this.fNcells-1),It<0&&(It=0),It<this.fSumw2.length?Math.sqrt(this.fSumw2[It]):Math.sqrt(Math.abs(this.fArray[It]))},it.setBinContent=function(It,Pt){this.fEntries++,this.fTsumw=0,It>=0&&It<this.fArray.length&&(this.fArray[It]=Pt)}),0==$e.indexOf(ws)&&(it.getBin=function(It){return It},it.getBinContent=function(It){return this.fArray[It]},it.Fill=function(It,Pt){let Sn=this.fXaxis,Fn=1+Math.floor((It-Sn.fXmin)/(Sn.fXmax-Sn.fXmin)*Sn.fNbins);Fn<0?Fn=0:Fn>Sn.fNbins+1&&(Fn=Sn.fNbins+1),this.fArray[Fn]+=void 0===Pt?1:Pt,this.fEntries++}),0==$e.indexOf(Es)&&(it.getBin=function(It,Pt){return It+(this.fXaxis.fNbins+2)*Pt},it.getBinContent=function(It,Pt){return this.fArray[this.getBin(It,Pt)]},it.Fill=function(It,Pt,Sn){let Fn=this.fXaxis,Gi=this.fYaxis,In=1+Math.floor((It-Fn.fXmin)/(Fn.fXmax-Fn.fXmin)*Fn.fNbins),ii=1+Math.floor((Pt-Gi.fXmin)/(Gi.fXmax-Gi.fXmin)*Gi.fNbins);In<0?In=0:In>Fn.fNbins+1&&(In=Fn.fNbins+1),ii<0?ii=0:ii>Gi.fNbins+1&&(ii=Gi.fNbins+1),this.fArray[In+(Fn.fNbins+2)*ii]+=void 0===Sn?1:Sn,this.fEntries++}),0==$e.indexOf(Yo)&&(it.getBin=function(It,Pt,Sn){return It+(this.fXaxis.fNbins+2)*(Pt+(this.fYaxis.fNbins+2)*Sn)},it.getBinContent=function(It,Pt,Sn){return this.fArray[this.getBin(It,Pt,Sn)]},it.Fill=function(It,Pt,Sn,Fn){let Gi=this.fXaxis,In=this.fYaxis,ii=this.fZaxis,lr=1+Math.floor((It-Gi.fXmin)/(Gi.fXmax-Gi.fXmin)*Gi.fNbins),cr=1+Math.floor((Pt-In.fXmin)/(In.fXmax-In.fXmin)*In.fNbins),Qi=1+Math.floor((Sn-ii.fXmin)/(ii.fXmax-ii.fXmin)*ii.fNbins);lr<0?lr=0:lr>Gi.fNbins+1&&(lr=Gi.fNbins+1),cr<0?cr=0:cr>In.fNbins+1&&(cr=In.fNbins+1),Qi<0?Qi=0:Qi>ii.fNbins+1&&(Qi=ii.fNbins+1),this.fArray[lr+(Gi.fNbins+2)*(cr+(In.fNbins+2)*Qi)]+=void 0===Fn?1:Fn,this.fEntries++}),0==$e.indexOf(eo)&&(0==$e.indexOf(al)?(it.getBin=function(It,Pt){return It+(this.fXaxis.fNbins+2)*Pt},it.getBinContent=function(It,Pt){let Sn=this.getBin(It,Pt);return Sn<0||Sn>=this.fNcells||this.fBinEntries[Sn]<1e-300||!this.fArray?0:this.fArray[Sn]/this.fBinEntries[Sn]},it.getBinEntries=function(It,Pt){let Sn=this.getBin(It,Pt);return Sn<0||Sn>=this.fNcells?0:this.fBinEntries[Sn]}):(it.getBin=function(It){return It},it.getBinContent=function(It){return It<0||It>=this.fNcells||this.fBinEntries[It]<1e-300||!this.fArray?0:this.fArray[It]/this.fBinEntries[It]}),it.getBinEffectiveEntries=function(It){if(It<0||It>=this.fNcells)return 0;let Pt=this.fBinEntries[It];if(!this.fBinSumw2||this.fBinSumw2.length!=this.fNcells)return Pt;let Sn=this.fBinSumw2[It];return Sn>0?Pt*Pt/Sn:0},it.getBinError=function(It){if(It<0||It>=this.fNcells)return 0;let Pt=this.fArray[It],Sn=this.fBinEntries[It],Fn=this.fSumw2[It],Gi=this.getBinEffectiveEntries(It);if(Sn<1e-300)return 0;if(3===this.fErrorMode)return 1/Math.sqrt(Sn);let lr=Math.sqrt(Math.abs(Fn/Sn-(Pt/Sn)**2));return 2===this.fErrorMode?0!=lr?lr/Math.sqrt(Gi):1/Math.sqrt(12*Gi):1===this.fErrorMode?lr:lr/Math.sqrt(Gi)}),$e==ho&&(it.GetBinLowEdge=function(It){return this.fNbins<=0?0:this.fXbins.length>0&&It>0&&It<=this.fNbins?this.fXbins[It-1]:this.fXmin+(It-1)*(this.fXmax-this.fXmin)/this.fNbins},it.GetBinCenter=function(It){return this.fNbins<=0?0:this.fXbins.length>0&&It>0&&It<this.fNbins?(this.fXbins[It-1]+this.fXbins[It])/2:this.fXmin+(It-.5)*(this.fXmax-this.fXmin)/this.fNbins}),0===$e.indexOf("ROOT::Math::LorentzVector")&&(it.Px=it.X=function(){return this.fCoordinates.Px()},it.Py=it.Y=function(){return this.fCoordinates.Py()},it.Pz=it.Z=function(){return this.fCoordinates.Pz()},it.E=it.T=function(){return this.fCoordinates.E()},it.M2=function(){return this.fCoordinates.M2()},it.M=function(){return this.fCoordinates.M()},it.R=it.P=function(){return this.fCoordinates.R()},it.P2=function(){return this.P()*this.P()},it.Pt=it.pt=function(){return Math.sqrt(this.P2())},it.Phi=it.phi=function(){return Math.atan2(this.fCoordinates.Py(),this.fCoordinates.Px())},it.Eta=it.eta=function(){return Math.atanh(this.Pz()/this.P())}),0===$e.indexOf("ROOT::Math::PxPyPzE4D")&&(it.Px=it.X=function(){return this.fX},it.Py=it.Y=function(){return this.fY},it.Pz=it.Z=function(){return this.fZ},it.E=it.T=function(){return this.fT},it.P2=function(){return this.fX**2+this.fY**2+this.fZ**2},it.R=it.P=function(){return Math.sqrt(this.P2())},it.Mag2=it.M2=function(){return this.fT**2-this.fX**2-this.fY**2-this.fZ**2},it.Mag=it.M=function(){return this.M2()>=0?Math.sqrt(this.M2()):-Math.sqrt(-this.M2())},it.Perp2=it.Pt2=function(){return this.fX**2+this.fY**2},it.Pt=it.pt=function(){return Math.sqrt(this.P2())},it.Phi=it.phi=function(){return Math.atan2(this.fY,this.fX)},it.Eta=it.eta=function(){return Math.atanh(this.Pz/this.P())}),Ae[$e]=it),it}function ot($e,Nt){Ae[$e]=Nt}function wt($e,Nt){if(fn($e)){if($e.$kind===Ve||$e.$kind===Tt)return!0;Nt||(Nt=$e._typename)}return!!Nt&&(Nt===Ve||Nt===Qe||Nt===et||Nt===Tt||Nt===Bt)}function fn($e){return $e&&"object"==typeof $e}function pn($e){return"function"==typeof $e}function jn($e){return"string"==typeof $e}function Yn($e){return fn($e)&&pn($e.then)}function lt($e){return Yn($e)?$e:Promise.resolve($e)}function mt(){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,ze.Z)(function*(){return(globalThis.JSROOT?Promise.resolve(!0):_(Be+"scripts/JSRoot.core.js")).then(()=>{if(globalThis.JSROOT?._complete_loading)return globalThis.JSROOT._complete_loading()}).then(()=>globalThis.JSROOT)})).apply(this,arguments)}},2253:($r,At,Ce)=>{"use strict";function M(g,V,pe){g.prototype=V.prototype=pe,pe.constructor=g}function L(g,V){var pe=Object.create(g.prototype);for(var xe in V)pe[xe]=V[xe];return pe}function ye(){}Ce.d(At,{$_:()=>m,B8:()=>q,BY:()=>rm,N2:()=>lt,Nb:()=>_1,Xf:()=>W0,Ys:()=>qh,cx:()=>Lo,d:()=>Ha,eh:()=>dA,fF:()=>eo,i$:()=>fm,oh:()=>Ul,p2:()=>xl});var je=1/.7,Ze="\\s*([+-]?\\d+)\\s*",Ie="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",He="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Oe=/^#([0-9a-f]{3,8})$/,ce=new RegExp(`^rgb\\(${Ze},${Ze},${Ze}\\)$`),Y=new RegExp(`^rgb\\(${He},${He},${He}\\)$`),K=new RegExp(`^rgba\\(${Ze},${Ze},${Ze},${Ie}\\)$`),ue=new RegExp(`^rgba\\(${He},${He},${He},${Ie}\\)$`),X=new RegExp(`^hsl\\(${Ie},${He},${He}\\)$`),Z=new RegExp(`^hsla\\(${Ie},${He},${He},${Ie}\\)$`),O={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function P(){return this.rgb().formatHex()}function w(){return this.rgb().formatRgb()}function m(g){var V,pe;return g=(g+"").trim().toLowerCase(),(V=Oe.exec(g))?(pe=V[1].length,V=parseInt(V[1],16),6===pe?_(V):3===pe?new T(V>>8&15|V>>4&240,V>>4&15|240&V,(15&V)<<4|15&V,1):8===pe?F(V>>24&255,V>>16&255,V>>8&255,(255&V)/255):4===pe?F(V>>12&15|V>>8&240,V>>8&15|V>>4&240,V>>4&15|240&V,((15&V)<<4|15&V)/255):null):(V=ce.exec(g))?new T(V[1],V[2],V[3],1):(V=Y.exec(g))?new T(255*V[1]/100,255*V[2]/100,255*V[3]/100,1):(V=K.exec(g))?F(V[1],V[2],V[3],V[4]):(V=ue.exec(g))?F(255*V[1]/100,255*V[2]/100,255*V[3]/100,V[4]):(V=X.exec(g))?I(V[1],V[2]/100,V[3]/100,1):(V=Z.exec(g))?I(V[1],V[2]/100,V[3]/100,V[4]):O.hasOwnProperty(g)?_(O[g]):"transparent"===g?new T(NaN,NaN,NaN,0):null}function _(g){return new T(g>>16&255,g>>8&255,255&g,1)}function F(g,V,pe,xe){return xe<=0&&(g=V=pe=NaN),new T(g,V,pe,xe)}function R(g){return g instanceof ye||(g=m(g)),g?new T((g=g.rgb()).r,g.g,g.b,g.opacity):new T}function q(g,V,pe,xe){return 1===arguments.length?R(g):new T(g,V,pe,xe??1)}function T(g,V,pe,xe){this.r=+g,this.g=+V,this.b=+pe,this.opacity=+xe}function $(){return`#${fe(this.r)}${fe(this.g)}${fe(this.b)}`}function ie(){const g=Me(this.opacity);return`${1===g?"rgb(":"rgba("}${de(this.r)}, ${de(this.g)}, ${de(this.b)}${1===g?")":`, ${g})`}`}function Me(g){return isNaN(g)?1:Math.max(0,Math.min(1,g))}function de(g){return Math.max(0,Math.min(255,Math.round(g)||0))}function fe(g){return((g=de(g))<16?"0":"")+g.toString(16)}function I(g,V,pe,xe){return xe<=0?g=V=pe=NaN:pe<=0||pe>=1?g=V=NaN:V<=0&&(g=NaN),new le(g,V,pe,xe)}function U(g){if(g instanceof le)return new le(g.h,g.s,g.l,g.opacity);if(g instanceof ye||(g=m(g)),!g)return new le;if(g instanceof le)return g;var V=(g=g.rgb()).r/255,pe=g.g/255,xe=g.b/255,Ge=Math.min(V,pe,xe),nt=Math.max(V,pe,xe),yt=NaN,Ct=nt-Ge,Ft=(nt+Ge)/2;return Ct?(yt=V===nt?(pe-xe)/Ct+6*(pe<xe):pe===nt?(xe-V)/Ct+2:(V-pe)/Ct+4,Ct/=Ft<.5?nt+Ge:2-nt-Ge,yt*=60):Ct=Ft>0&&Ft<1?0:yt,new le(yt,Ct,Ft,g.opacity)}function le(g,V,pe,xe){this.h=+g,this.s=+V,this.l=+pe,this.opacity=+xe}function D(g){return(g=(g||0)%360)<0?g+360:g}function oe(g){return Math.max(0,Math.min(1,g||0))}function _e(g,V,pe){return 255*(g<60?V+(pe-V)*g/60:g<180?pe:g<240?V+(pe-V)*(240-g)/60:V)}M(ye,m,{copy(g){return Object.assign(new this.constructor,this,g)},displayable(){return this.rgb().displayable()},hex:P,formatHex:P,formatHex8:function x(){return this.rgb().formatHex8()},formatHsl:function p(){return U(this).formatHsl()},formatRgb:w,toString:w}),M(T,q,L(ye,{brighter(g){return g=null==g?je:Math.pow(je,g),new T(this.r*g,this.g*g,this.b*g,this.opacity)},darker(g){return g=null==g?.7:Math.pow(.7,g),new T(this.r*g,this.g*g,this.b*g,this.opacity)},rgb(){return this},clamp(){return new T(de(this.r),de(this.g),de(this.b),Me(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$,formatHex:$,formatHex8:function J(){return`#${fe(this.r)}${fe(this.g)}${fe(this.b)}${fe(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:ie,toString:ie})),M(le,function z(g,V,pe,xe){return 1===arguments.length?U(g):new le(g,V,pe,xe??1)},L(ye,{brighter(g){return g=null==g?je:Math.pow(je,g),new le(this.h,this.s,this.l*g,this.opacity)},darker(g){return g=null==g?.7:Math.pow(.7,g),new le(this.h,this.s,this.l*g,this.opacity)},rgb(){var g=this.h%360+360*(this.h<0),V=isNaN(g)||isNaN(this.s)?0:this.s,pe=this.l,xe=pe+(pe<.5?pe:1-pe)*V,Ge=2*pe-xe;return new T(_e(g>=240?g-240:g+120,Ge,xe),_e(g,Ge,xe),_e(g<120?g+240:g-120,Ge,xe),this.opacity)},clamp(){return new le(D(this.h),oe(this.s),oe(this.l),Me(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const g=Me(this.opacity);return`${1===g?"hsl(":"hsla("}${D(this.h)}, ${100*oe(this.s)}%, ${100*oe(this.l)}%${1===g?")":`, ${g})`}`}}));const Ee=Math.PI/180,Ve=180/Math.PI,et=.96422,Tt=1,Bt=.82521,ve=4/29,Je=6/29,ct=3*Je*Je,We=Je*Je*Je;function Ke(g){if(g instanceof Zt)return new Zt(g.l,g.a,g.b,g.opacity);if(g instanceof vn)return rn(g);g instanceof T||(g=R(g));var nt,yt,V=wn(g.r),pe=wn(g.g),xe=wn(g.b),Ge=Mt((.2225045*V+.7168786*pe+.0606169*xe)/Tt);return V===pe&&pe===xe?nt=yt=Ge:(nt=Mt((.4360747*V+.3850649*pe+.1430804*xe)/et),yt=Mt((.0139322*V+.0971045*pe+.7141733*xe)/Bt)),new Zt(116*Ge-16,500*(nt-Ge),200*(Ge-yt),g.opacity)}function Zt(g,V,pe,xe){this.l=+g,this.a=+V,this.b=+pe,this.opacity=+xe}function Mt(g){return g>We?Math.pow(g,1/3):g/ct+ve}function Ot(g){return g>Je?g*g*g:ct*(g-ve)}function sn(g){return 255*(g<=.0031308?12.92*g:1.055*Math.pow(g,1/2.4)-.055)}function wn(g){return(g/=255)<=.04045?g/12.92:Math.pow((g+.055)/1.055,2.4)}function vn(g,V,pe,xe){this.h=+g,this.c=+V,this.l=+pe,this.opacity=+xe}function rn(g){if(isNaN(g.h))return new Zt(g.l,0,0,g.opacity);var V=g.h*Ee;return new Zt(g.l,Math.cos(V)*g.c,Math.sin(V)*g.c,g.opacity)}M(Zt,function zt(g,V,pe,xe){return 1===arguments.length?Ke(g):new Zt(g,V,pe,xe??1)},L(ye,{brighter(g){return new Zt(this.l+18*(g??1),this.a,this.b,this.opacity)},darker(g){return new Zt(this.l-18*(g??1),this.a,this.b,this.opacity)},rgb(){var g=(this.l+16)/116,V=isNaN(this.a)?g:g+this.a/500,pe=isNaN(this.b)?g:g-this.b/200;return new T(sn(3.1338561*(V=et*Ot(V))-1.6168667*(g=Tt*Ot(g))-.4906146*(pe=Bt*Ot(pe))),sn(-.9787684*V+1.9161415*g+.033454*pe),sn(.0719453*V-.2289914*g+1.4052427*pe),this.opacity)}})),M(vn,function $n(g,V,pe,xe){return 1===arguments.length?function Ln(g){if(g instanceof vn)return new vn(g.h,g.c,g.l,g.opacity);if(g instanceof Zt||(g=Ke(g)),0===g.a&&0===g.b)return new vn(NaN,0<g.l&&g.l<100?0:NaN,g.l,g.opacity);var V=Math.atan2(g.b,g.a)*Ve;return new vn(V<0?V+360:V,Math.sqrt(g.a*g.a+g.b*g.b),g.l,g.opacity)}(g):new vn(g,V,pe,xe??1)},L(ye,{brighter(g){return new vn(this.h,this.c,this.l+18*(g??1),this.opacity)},darker(g){return new vn(this.h,this.c,this.l-18*(g??1),this.opacity)},rgb(){return rn(this).rgb()}}));var qt=1.78277,Qt=-.29227,_n=-.90649,dn=1.97294,ci=dn*_n,ir=dn*qt,Vi=qt*Qt- -.14861*_n;function Ar(g,V,pe,xe){this.h=+g,this.s=+V,this.l=+pe,this.opacity=+xe}M(Ar,function Ur(g,V,pe,xe){return 1===arguments.length?function br(g){if(g instanceof Ar)return new Ar(g.h,g.s,g.l,g.opacity);g instanceof T||(g=R(g));var pe=g.g/255,xe=g.b/255,Ge=(Vi*xe+ci*(g.r/255)-ir*pe)/(Vi+ci-ir),nt=xe-Ge,yt=(dn*(pe-Ge)-Qt*nt)/_n,Ct=Math.sqrt(yt*yt+nt*nt)/(dn*Ge*(1-Ge)),Ft=Ct?Math.atan2(yt,nt)*Ve-120:NaN;return new Ar(Ft<0?Ft+360:Ft,Ct,Ge,g.opacity)}(g):new Ar(g,V,pe,xe??1)},L(ye,{brighter(g){return g=null==g?je:Math.pow(je,g),new Ar(this.h,this.s,this.l*g,this.opacity)},darker(g){return g=null==g?.7:Math.pow(.7,g),new Ar(this.h,this.s,this.l*g,this.opacity)},rgb(){var g=isNaN(this.h)?0:(this.h+120)*Ee,V=+this.l,pe=isNaN(this.s)?0:this.s*V*(1-V),xe=Math.cos(g),Ge=Math.sin(g);return new T(255*(V+pe*(-.14861*xe+qt*Ge)),255*(V+pe*(Qt*xe+_n*Ge)),255*(V+pe*(dn*xe)),this.opacity)}}));var cs=Math.abs,Rs=Math.cos,es=Math.sin,ho=Math.PI,ro=ho/2,ws=2*ho,Es=Math.max,Yo=1e-12;function kl(g,V){return Array.from({length:V-g},(pe,xe)=>g+xe)}function eo(){return function _o(g,V){var pe=0,xe=null,Ge=null,nt=null;function yt(Ct){var Sr,Ft=Ct.length,Vt=new Array(Ft),an=kl(0,Ft),Tn=new Array(Ft*Ft),Pn=new Array(Ft),xi=0;Ct=Float64Array.from({length:Ft*Ft},V?(pr,$i)=>Ct[$i%Ft][$i/Ft|0]:(pr,$i)=>Ct[$i/Ft|0][$i%Ft]);for(let pr=0;pr<Ft;++pr){let $i=0;for(let $s=0;$s<Ft;++$s)$i+=Ct[pr*Ft+$s]+g*Ct[$s*Ft+pr];xi+=Vt[pr]=$i}Sr=(xi=Es(0,ws-pe*Ft)/xi)?pe:ws/Ft;{let pr=0;xe&&an.sort(($i,$s)=>xe(Vt[$i],Vt[$s]));for(const $i of an){const $s=pr;if(g){const mo=kl(1+~Ft,Ft).filter(Er=>Er<0?Ct[~Er*Ft+$i]:Ct[$i*Ft+Er]);Ge&&mo.sort((Er,Ri)=>Ge(Er<0?-Ct[~Er*Ft+$i]:Ct[$i*Ft+Er],Ri<0?-Ct[~Ri*Ft+$i]:Ct[$i*Ft+Ri]));for(const Er of mo)Er<0?(Tn[~Er*Ft+$i]||(Tn[~Er*Ft+$i]={source:null,target:null})).target={index:$i,startAngle:pr,endAngle:pr+=Ct[~Er*Ft+$i]*xi,value:Ct[~Er*Ft+$i]}:(Tn[$i*Ft+Er]||(Tn[$i*Ft+Er]={source:null,target:null})).source={index:$i,startAngle:pr,endAngle:pr+=Ct[$i*Ft+Er]*xi,value:Ct[$i*Ft+Er]};Pn[$i]={index:$i,startAngle:$s,endAngle:pr,value:Vt[$i]}}else{const mo=kl(0,Ft).filter(Er=>Ct[$i*Ft+Er]||Ct[Er*Ft+$i]);Ge&&mo.sort((Er,Ri)=>Ge(Ct[$i*Ft+Er],Ct[$i*Ft+Ri]));for(const Er of mo){let Ri;if($i<Er?(Ri=Tn[$i*Ft+Er]||(Tn[$i*Ft+Er]={source:null,target:null}),Ri.source={index:$i,startAngle:pr,endAngle:pr+=Ct[$i*Ft+Er]*xi,value:Ct[$i*Ft+Er]}):(Ri=Tn[Er*Ft+$i]||(Tn[Er*Ft+$i]={source:null,target:null}),Ri.target={index:$i,startAngle:pr,endAngle:pr+=Ct[$i*Ft+Er]*xi,value:Ct[$i*Ft+Er]},$i===Er&&(Ri.source=Ri.target)),Ri.source&&Ri.target&&Ri.source.value<Ri.target.value){const to=Ri.source;Ri.source=Ri.target,Ri.target=to}}Pn[$i]={index:$i,startAngle:$s,endAngle:pr,value:Vt[$i]}}pr+=Sr}}return(Tn=Object.values(Tn)).groups=Pn,nt?Tn.sort(nt):Tn}return yt.padAngle=function(Ct){return arguments.length?(pe=Es(0,Ct),yt):pe},yt.sortGroups=function(Ct){return arguments.length?(xe=Ct,yt):xe},yt.sortSubgroups=function(Ct){return arguments.length?(Ge=Ct,yt):Ge},yt.sortChords=function(Ct){return arguments.length?(null==Ct?nt=null:(nt=function fo(g){return function(V,pe){return g(V.source.value+V.target.value,pe.source.value+pe.target.value)}}(Ct))._=Ct,yt):nt&&nt._},yt}(!1,!1)}const el=Math.PI,lo=2*el,Yi=1e-6,ga=lo-Yi;function xa(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ta(){return new xa}xa.prototype=Ta.prototype={constructor:xa,moveTo:function(g,V){this._+="M"+(this._x0=this._x1=+g)+","+(this._y0=this._y1=+V)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(g,V){this._+="L"+(this._x1=+g)+","+(this._y1=+V)},quadraticCurveTo:function(g,V,pe,xe){this._+="Q"+ +g+","+ +V+","+(this._x1=+pe)+","+(this._y1=+xe)},bezierCurveTo:function(g,V,pe,xe,Ge,nt){this._+="C"+ +g+","+ +V+","+ +pe+","+ +xe+","+(this._x1=+Ge)+","+(this._y1=+nt)},arcTo:function(g,V,pe,xe,Ge){var nt=this._x1,yt=this._y1,Ct=(pe=+pe)-(g=+g),Ft=(xe=+xe)-(V=+V),Vt=nt-g,an=yt-V,Tn=Vt*Vt+an*an;if((Ge=+Ge)<0)throw new Error("negative radius: "+Ge);if(null===this._x1)this._+="M"+(this._x1=g)+","+(this._y1=V);else if(Tn>Yi)if(Math.abs(an*Ct-Ft*Vt)>Yi&&Ge){var Pn=pe-nt,xi=xe-yt,Sr=Ct*Ct+Ft*Ft,pr=Pn*Pn+xi*xi,$i=Math.sqrt(Sr),$s=Math.sqrt(Tn),mo=Ge*Math.tan((el-Math.acos((Sr+Tn-pr)/(2*$i*$s)))/2),Er=mo/$s,Ri=mo/$i;Math.abs(Er-1)>Yi&&(this._+="L"+(g+Er*Vt)+","+(V+Er*an)),this._+="A"+Ge+","+Ge+",0,0,"+ +(an*Pn>Vt*xi)+","+(this._x1=g+Ri*Ct)+","+(this._y1=V+Ri*Ft)}else this._+="L"+(this._x1=g)+","+(this._y1=V)},arc:function(g,V,pe,xe,Ge,nt){g=+g,V=+V,nt=!!nt;var yt=(pe=+pe)*Math.cos(xe),Ct=pe*Math.sin(xe),Ft=g+yt,Vt=V+Ct,an=1^nt,Tn=nt?xe-Ge:Ge-xe;if(pe<0)throw new Error("negative radius: "+pe);null===this._x1?this._+="M"+Ft+","+Vt:(Math.abs(this._x1-Ft)>Yi||Math.abs(this._y1-Vt)>Yi)&&(this._+="L"+Ft+","+Vt),pe&&(Tn<0&&(Tn=Tn%lo+lo),Tn>ga?this._+="A"+pe+","+pe+",0,1,"+an+","+(g-yt)+","+(V-Ct)+"A"+pe+","+pe+",0,1,"+an+","+(this._x1=Ft)+","+(this._y1=Vt):Tn>Yi&&(this._+="A"+pe+","+pe+",0,"+ +(Tn>=el)+","+an+","+(this._x1=g+pe*Math.cos(Ge))+","+(this._y1=V+pe*Math.sin(Ge))))},rect:function(g,V,pe,xe){this._+="M"+(this._x0=this._x1=+g)+","+(this._y0=this._y1=+V)+"h"+ +pe+"v"+ +xe+"h"+-pe+"Z"},toString:function(){return this._}};var uc=Array.prototype.slice;function st(g){return function(){return g}}function Ae(g){return g.source}function rt(g){return g.target}function ot(g){return g.radius}function wt(g){return g.startAngle}function fn(g){return g.endAngle}function pn(){return 0}function lt(){return function Yn(g){var V=Ae,pe=rt,xe=ot,Ge=ot,nt=wt,yt=fn,Ct=pn,Ft=null;function Vt(){var an,Tn=V.apply(this,arguments),Pn=pe.apply(this,arguments),xi=Ct.apply(this,arguments)/2,Sr=uc.call(arguments),pr=+xe.apply(this,(Sr[0]=Tn,Sr)),$i=nt.apply(this,Sr)-ro,$s=yt.apply(this,Sr)-ro,mo=+Ge.apply(this,(Sr[0]=Pn,Sr)),Er=nt.apply(this,Sr)-ro,Ri=yt.apply(this,Sr)-ro;if(Ft||(Ft=an=Ta()),xi>Yo&&(cs($s-$i)>2*xi+Yo?$s>$i?($i+=xi,$s-=xi):($i-=xi,$s+=xi):$i=$s=($i+$s)/2,cs(Ri-Er)>2*xi+Yo?Ri>Er?(Er+=xi,Ri-=xi):(Er-=xi,Ri+=xi):Er=Ri=(Er+Ri)/2),Ft.moveTo(pr*Rs($i),pr*es($i)),Ft.arc(0,0,pr,$i,$s),$i!==Er||$s!==Ri)if(g){var zr=mo-+g.apply(this,arguments),Qo=(Er+Ri)/2;Ft.quadraticCurveTo(0,0,zr*Rs(Er),zr*es(Er)),Ft.lineTo(mo*Rs(Qo),mo*es(Qo)),Ft.lineTo(zr*Rs(Ri),zr*es(Ri))}else Ft.quadraticCurveTo(0,0,mo*Rs(Er),mo*es(Er)),Ft.arc(0,0,mo,Er,Ri);if(Ft.quadraticCurveTo(0,0,pr*Rs($i),pr*es($i)),Ft.closePath(),an)return Ft=null,an+""||null}return g&&(Vt.headRadius=function(an){return arguments.length?(g="function"==typeof an?an:st(+an),Vt):g}),Vt.radius=function(an){return arguments.length?(xe=Ge="function"==typeof an?an:st(+an),Vt):xe},Vt.sourceRadius=function(an){return arguments.length?(xe="function"==typeof an?an:st(+an),Vt):xe},Vt.targetRadius=function(an){return arguments.length?(Ge="function"==typeof an?an:st(+an),Vt):Ge},Vt.startAngle=function(an){return arguments.length?(nt="function"==typeof an?an:st(+an),Vt):nt},Vt.endAngle=function(an){return arguments.length?(yt="function"==typeof an?an:st(+an),Vt):yt},Vt.padAngle=function(an){return arguments.length?(Ct="function"==typeof an?an:st(+an),Vt):Ct},Vt.source=function(an){return arguments.length?(V=an,Vt):V},Vt.target=function(an){return arguments.length?(pe=an,Vt):pe},Vt.context=function(an){return arguments.length?(Ft=an??null,Vt):Ft},Vt}()}var Lt={value:()=>{}};function $e(){for(var xe,g=0,V=arguments.length,pe={};g<V;++g){if(!(xe=arguments[g]+"")||xe in pe||/[\s.]/.test(xe))throw new Error("illegal type: "+xe);pe[xe]=[]}return new Nt(pe)}function Nt(g){this._=g}function un(g,V){for(var Ge,pe=0,xe=g.length;pe<xe;++pe)if((Ge=g[pe]).name===V)return Ge.value}function It(g,V,pe){for(var xe=0,Ge=g.length;xe<Ge;++xe)if(g[xe].name===V){g[xe]=Lt,g=g.slice(0,xe).concat(g.slice(xe+1));break}return null!=pe&&g.push({name:V,value:pe}),g}Nt.prototype=$e.prototype={constructor:Nt,on:function(g,V){var Ge,pe=this._,xe=function it(g,V){return g.trim().split(/^|\s+/).map(function(pe){var xe="",Ge=pe.indexOf(".");if(Ge>=0&&(xe=pe.slice(Ge+1),pe=pe.slice(0,Ge)),pe&&!V.hasOwnProperty(pe))throw new Error("unknown type: "+pe);return{type:pe,name:xe}})}(g+"",pe),nt=-1,yt=xe.length;if(!(arguments.length<2)){if(null!=V&&"function"!=typeof V)throw new Error("invalid callback: "+V);for(;++nt<yt;)if(Ge=(g=xe[nt]).type)pe[Ge]=It(pe[Ge],g.name,V);else if(null==V)for(Ge in pe)pe[Ge]=It(pe[Ge],g.name,null);return this}for(;++nt<yt;)if((Ge=(g=xe[nt]).type)&&(Ge=un(pe[Ge],g.name)))return Ge},copy:function(){var g={},V=this._;for(var pe in V)g[pe]=V[pe].slice();return new Nt(g)},call:function(g,V){if((Ge=arguments.length-2)>0)for(var Ge,nt,pe=new Array(Ge),xe=0;xe<Ge;++xe)pe[xe]=arguments[xe+2];if(!this._.hasOwnProperty(g))throw new Error("unknown type: "+g);for(xe=0,Ge=(nt=this._[g]).length;xe<Ge;++xe)nt[xe].value.apply(V,pe)},apply:function(g,V,pe){if(!this._.hasOwnProperty(g))throw new Error("unknown type: "+g);for(var xe=this._[g],Ge=0,nt=xe.length;Ge<nt;++Ge)xe[Ge].value.apply(V,pe)}};var Pt="http://www.w3.org/1999/xhtml",Sn={svg:"http://www.w3.org/2000/svg",xhtml:Pt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Fn(g){var V=g+="",pe=V.indexOf(":");return pe>=0&&"xmlns"!==(V=g.slice(0,pe))&&(g=g.slice(pe+1)),Sn.hasOwnProperty(V)?{space:Sn[V],local:g}:g}function Gi(g){return function(){var V=this.ownerDocument,pe=this.namespaceURI;return pe===Pt&&V.documentElement.namespaceURI===Pt?V.createElement(g):V.createElementNS(pe,g)}}function In(g){return function(){return this.ownerDocument.createElementNS(g.space,g.local)}}function ii(g){var V=Fn(g);return(V.local?In:Gi)(V)}function lr(){}function cr(g){return null==g?lr:function(){return this.querySelector(g)}}function Vs(){return[]}function na(g){return null==g?Vs:function(){return this.querySelectorAll(g)}}function bl(g){return function(){return this.matches(g)}}function Fr(g){return function(V){return V.matches(g)}}var Is=Array.prototype.find;function Xr(){return this.firstElementChild}var tl=Array.prototype.filter;function ll(){return Array.from(this.children)}function Mo(g){return new Array(g.length)}function Ol(g,V){this.ownerDocument=g.ownerDocument,this.namespaceURI=g.namespaceURI,this._next=null,this._parent=g,this.__data__=V}function _c(g,V,pe,xe,Ge,nt){for(var Ct,yt=0,Ft=V.length,Vt=nt.length;yt<Vt;++yt)(Ct=V[yt])?(Ct.__data__=nt[yt],xe[yt]=Ct):pe[yt]=new Ol(g,nt[yt]);for(;yt<Ft;++yt)(Ct=V[yt])&&(Ge[yt]=Ct)}function Jp(g,V,pe,xe,Ge,nt,yt){var Ct,Ft,xi,Vt=new Map,an=V.length,Tn=nt.length,Pn=new Array(an);for(Ct=0;Ct<an;++Ct)(Ft=V[Ct])&&(Pn[Ct]=xi=yt.call(Ft,Ft.__data__,Ct,V)+"",Vt.has(xi)?Ge[Ct]=Ft:Vt.set(xi,Ft));for(Ct=0;Ct<Tn;++Ct)xi=yt.call(g,nt[Ct],Ct,nt)+"",(Ft=Vt.get(xi))?(xe[Ct]=Ft,Ft.__data__=nt[Ct],Vt.delete(xi)):pe[Ct]=new Ol(g,nt[Ct]);for(Ct=0;Ct<an;++Ct)(Ft=V[Ct])&&Vt.get(Pn[Ct])===Ft&&(Ge[Ct]=Ft)}function nu(g){return g.__data__}function N(g){return"object"==typeof g&&"length"in g?g:Array.from(g)}function Ue(g,V){return g<V?-1:g>V?1:g>=V?0:NaN}function mn(g){return function(){this.removeAttribute(g)}}function An(g){return function(){this.removeAttributeNS(g.space,g.local)}}function fi(g,V){return function(){this.setAttribute(g,V)}}function ti(g,V){return function(){this.setAttributeNS(g.space,g.local,V)}}function _i(g,V){return function(){var pe=V.apply(this,arguments);null==pe?this.removeAttribute(g):this.setAttribute(g,pe)}}function Mn(g,V){return function(){var pe=V.apply(this,arguments);null==pe?this.removeAttributeNS(g.space,g.local):this.setAttributeNS(g.space,g.local,pe)}}function Ui(g){return g.ownerDocument&&g.ownerDocument.defaultView||g.document&&g||g.defaultView}function Bi(g){return function(){this.style.removeProperty(g)}}function Ms(g,V,pe){return function(){this.style.setProperty(g,V,pe)}}function os(g,V,pe){return function(){var xe=V.apply(this,arguments);null==xe?this.style.removeProperty(g):this.style.setProperty(g,xe,pe)}}function Co(g,V){return g.style.getPropertyValue(V)||Ui(g).getComputedStyle(g,null).getPropertyValue(V)}function ua(g){return function(){delete this[g]}}function Qs(g,V){return function(){this[g]=V}}function Ra(g,V){return function(){var pe=V.apply(this,arguments);null==pe?delete this[g]:this[g]=pe}}function eA(g){return g.trim().split(/^|\s+/)}function qd(g){return g.classList||new tA(g)}function tA(g){this._node=g,this._names=eA(g.getAttribute("class")||"")}function Yu(g,V){for(var pe=qd(g),xe=-1,Ge=V.length;++xe<Ge;)pe.add(V[xe])}function Vl(g,V){for(var pe=qd(g),xe=-1,Ge=V.length;++xe<Ge;)pe.remove(V[xe])}function fp(g){return function(){Yu(this,g)}}function nA(g){return function(){Vl(this,g)}}function Py(g,V){return function(){(V.apply(this,arguments)?Yu:Vl)(this,g)}}function Q_(){this.textContent=""}function Do(g){return function(){this.textContent=g}}function pp(g){return function(){var V=g.apply(this,arguments);this.textContent=V??""}}function jA(){this.innerHTML=""}function Fy(g){return function(){this.innerHTML=g}}function Ry(g){return function(){var V=g.apply(this,arguments);this.innerHTML=V??""}}function Qd(){this.nextSibling&&this.parentNode.appendChild(this)}function Zu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function $A(){return null}function Da(){var g=this.parentNode;g&&g.removeChild(this)}function Di(){var g=this.cloneNode(!1),V=this.parentNode;return V?V.insertBefore(g,this.nextSibling):g}function Zl(){var g=this.cloneNode(!0),V=this.parentNode;return V?V.insertBefore(g,this.nextSibling):g}function Iu(g){return function(){var V=this.__on;if(V){for(var nt,pe=0,xe=-1,Ge=V.length;pe<Ge;++pe)nt=V[pe],g.type&&nt.type!==g.type||nt.name!==g.name?V[++xe]=nt:this.removeEventListener(nt.type,nt.listener,nt.options);++xe?V.length=xe:delete this.__on}}}function Xs(g,V,pe){return function(){var Ge,xe=this.__on,nt=function hu(g){return function(V){g.call(this,V,this.__data__)}}(V);if(xe)for(var yt=0,Ct=xe.length;yt<Ct;++yt)if((Ge=xe[yt]).type===g.type&&Ge.name===g.name)return this.removeEventListener(Ge.type,Ge.listener,Ge.options),this.addEventListener(Ge.type,Ge.listener=nt,Ge.options=pe),void(Ge.value=V);this.addEventListener(g.type,nt,pe),Ge={type:g.type,name:g.name,value:V,listener:nt,options:pe},xe?xe.push(Ge):this.__on=[Ge]}}function ul(g,V,pe){var xe=Ui(g),Ge=xe.CustomEvent;"function"==typeof Ge?Ge=new Ge(V,pe):(Ge=xe.document.createEvent("Event"),pe?(Ge.initEvent(V,pe.bubbles,pe.cancelable),Ge.detail=pe.detail):Ge.initEvent(V,!1,!1)),g.dispatchEvent(Ge)}function gr(g,V){return function(){return ul(this,g,V)}}function ia(g,V){return function(){return ul(this,g,V.apply(this,arguments))}}Ol.prototype={constructor:Ol,appendChild:function(g){return this._parent.insertBefore(g,this._next)},insertBefore:function(g,V){return this._parent.insertBefore(g,V)},querySelector:function(g){return this._parent.querySelector(g)},querySelectorAll:function(g){return this._parent.querySelectorAll(g)}},tA.prototype={add:function(g){this._names.indexOf(g)<0&&(this._names.push(g),this._node.setAttribute("class",this._names.join(" ")))},remove:function(g){var V=this._names.indexOf(g);V>=0&&(this._names.splice(V,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(g){return this._names.indexOf(g)>=0}};var yc=[null];function Ll(g,V){this._groups=g,this._parents=V}function wr(){return new Ll([[document.documentElement]],yc)}function qh(g){return"string"==typeof g?new Ll([[document.querySelector(g)]],[document.documentElement]):new Ll([[g]],yc)}Ll.prototype=wr.prototype={constructor:Ll,select:function Qi(g){"function"!=typeof g&&(g=cr(g));for(var V=this._groups,pe=V.length,xe=new Array(pe),Ge=0;Ge<pe;++Ge)for(var Ft,Vt,nt=V[Ge],yt=nt.length,Ct=xe[Ge]=new Array(yt),an=0;an<yt;++an)(Ft=nt[an])&&(Vt=g.call(Ft,Ft.__data__,an,nt))&&("__data__"in Ft&&(Vt.__data__=Ft.__data__),Ct[an]=Vt);return new Ll(xe,this._parents)},selectAll:function pi(g){g="function"==typeof g?function yo(g){return function(){return function is(g){return null==g?[]:Array.isArray(g)?g:Array.from(g)}(g.apply(this,arguments))}}(g):na(g);for(var V=this._groups,pe=V.length,xe=[],Ge=[],nt=0;nt<pe;++nt)for(var Ft,yt=V[nt],Ct=yt.length,Vt=0;Vt<Ct;++Vt)(Ft=yt[Vt])&&(xe.push(g.call(Ft,Ft.__data__,Vt,yt)),Ge.push(Ft));return new Ll(xe,Ge)},selectChild:function ys(g){return this.select(null==g?Xr:function Ea(g){return function(){return Is.call(this.children,g)}}("function"==typeof g?g:Fr(g)))},selectChildren:function nl(g){return this.selectAll(null==g?ll:function Of(g){return function(){return tl.call(this.children,g)}}("function"==typeof g?g:Fr(g)))},filter:function Qa(g){"function"!=typeof g&&(g=bl(g));for(var V=this._groups,pe=V.length,xe=new Array(pe),Ge=0;Ge<pe;++Ge)for(var Ft,nt=V[Ge],yt=nt.length,Ct=xe[Ge]=[],Vt=0;Vt<yt;++Vt)(Ft=nt[Vt])&&g.call(Ft,Ft.__data__,Vt,nt)&&Ct.push(Ft);return new Ll(xe,this._parents)},data:function we(g,V){if(!arguments.length)return Array.from(this,nu);var pe=V?Jp:_c,xe=this._parents,Ge=this._groups;"function"!=typeof g&&(g=function Cl(g){return function(){return g}}(g));for(var nt=Ge.length,yt=new Array(nt),Ct=new Array(nt),Ft=new Array(nt),Vt=0;Vt<nt;++Vt){var an=xe[Vt],Tn=Ge[Vt],Pn=Tn.length,xi=N(g.call(an,an&&an.__data__,Vt,xe)),Sr=xi.length,pr=Ct[Vt]=new Array(Sr),$i=yt[Vt]=new Array(Sr);pe(an,Tn,pr,$i,Ft[Vt]=new Array(Pn),xi,V);for(var Ri,to,mo=0,Er=0;mo<Sr;++mo)if(Ri=pr[mo]){for(mo>=Er&&(Er=mo+1);!(to=$i[Er])&&++Er<Sr;);Ri._next=to||null}}return(yt=new Ll(yt,xe))._enter=Ct,yt._exit=Ft,yt},enter:function Gh(){return new Ll(this._enter||this._groups.map(Mo),this._parents)},exit:function E(){return new Ll(this._exit||this._groups.map(Mo),this._parents)},join:function H(g,V,pe){var xe=this.enter(),Ge=this,nt=this.exit();return"function"==typeof g?(xe=g(xe))&&(xe=xe.selection()):xe=xe.append(g+""),null!=V&&(Ge=V(Ge))&&(Ge=Ge.selection()),null==pe?nt.remove():pe(nt),xe&&Ge?xe.merge(Ge).order():Ge},merge:function me(g){for(var V=g.selection?g.selection():g,pe=this._groups,xe=V._groups,Ge=pe.length,yt=Math.min(Ge,xe.length),Ct=new Array(Ge),Ft=0;Ft<yt;++Ft)for(var xi,Vt=pe[Ft],an=xe[Ft],Tn=Vt.length,Pn=Ct[Ft]=new Array(Tn),Sr=0;Sr<Tn;++Sr)(xi=Vt[Sr]||an[Sr])&&(Pn[Sr]=xi);for(;Ft<Ge;++Ft)Ct[Ft]=pe[Ft];return new Ll(Ct,this._parents)},selection:function Lf(){return this},order:function De(){for(var g=this._groups,V=-1,pe=g.length;++V<pe;)for(var yt,xe=g[V],Ge=xe.length-1,nt=xe[Ge];--Ge>=0;)(yt=xe[Ge])&&(nt&&4^yt.compareDocumentPosition(nt)&&nt.parentNode.insertBefore(yt,nt),nt=yt);return this},sort:function Re(g){function V(Tn,Pn){return Tn&&Pn?g(Tn.__data__,Pn.__data__):!Tn-!Pn}g||(g=Ue);for(var pe=this._groups,xe=pe.length,Ge=new Array(xe),nt=0;nt<xe;++nt){for(var Vt,yt=pe[nt],Ct=yt.length,Ft=Ge[nt]=new Array(Ct),an=0;an<Ct;++an)(Vt=yt[an])&&(Ft[an]=Vt);Ft.sort(V)}return new Ll(Ge,this._parents).order()},call:function Xe(){var g=arguments[0];return arguments[0]=this,g.apply(null,arguments),this},nodes:function pt(){return Array.from(this)},node:function vt(){for(var g=this._groups,V=0,pe=g.length;V<pe;++V)for(var xe=g[V],Ge=0,nt=xe.length;Ge<nt;++Ge){var yt=xe[Ge];if(yt)return yt}return null},size:function Ht(){let g=0;for(const V of this)++g;return g},empty:function hn(){return!this.node()},each:function gn(g){for(var V=this._groups,pe=0,xe=V.length;pe<xe;++pe)for(var Ct,Ge=V[pe],nt=0,yt=Ge.length;nt<yt;++nt)(Ct=Ge[nt])&&g.call(Ct,Ct.__data__,nt,Ge);return this},attr:function Nr(g,V){var pe=Fn(g);if(arguments.length<2){var xe=this.node();return pe.local?xe.getAttributeNS(pe.space,pe.local):xe.getAttribute(pe)}return this.each((null==V?pe.local?An:mn:"function"==typeof V?pe.local?Mn:_i:pe.local?ti:fi)(pe,V))},style:function Cs(g,V,pe){return arguments.length>1?this.each((null==V?Bi:"function"==typeof V?os:Ms)(g,V,pe??"")):Co(this.node(),g)},property:function ha(g,V){return arguments.length>1?this.each((null==V?ua:"function"==typeof V?Ra:Qs)(g,V)):this.node()[g]},classed:function oi(g,V){var pe=eA(g+"");if(arguments.length<2){for(var xe=qd(this.node()),Ge=-1,nt=pe.length;++Ge<nt;)if(!xe.contains(pe[Ge]))return!1;return!0}return this.each(("function"==typeof V?Py:V?fp:nA)(pe,V))},text:function m0(g){return arguments.length?this.each(null==g?Q_:("function"==typeof g?pp:Do)(g)):this.node().textContent},html:function ky(g){return arguments.length?this.each(null==g?jA:("function"==typeof g?Ry:Fy)(g)):this.node().innerHTML},raise:function bd(){return this.each(Qd)},lower:function yh(){return this.each(Zu)},append:function wa(g){var V="function"==typeof g?g:ii(g);return this.select(function(){return this.appendChild(V.apply(this,arguments))})},insert:function uu(g,V){var pe="function"==typeof g?g:ii(g),xe=null==V?$A:"function"==typeof V?V:cr(V);return this.select(function(){return this.insertBefore(pe.apply(this,arguments),xe.apply(this,arguments)||null)})},remove:function cl(){return this.each(Da)},clone:function g0(g){return this.select(g?Zl:Di)},datum:function Kr(g){return arguments.length?this.property("__data__",g):this.node().__data__},on:function Wm(g,V,pe){var Ge,yt,xe=function XA(g){return g.trim().split(/^|\s+/).map(function(V){var pe="",xe=V.indexOf(".");return xe>=0&&(pe=V.slice(xe+1),V=V.slice(0,xe)),{type:V,name:pe}})}(g+""),nt=xe.length;if(!(arguments.length<2)){for(Ct=V?Xs:Iu,Ge=0;Ge<nt;++Ge)this.each(Ct(xe[Ge],V,pe));return this}var Ct=this.node().__on;if(Ct)for(var an,Ft=0,Vt=Ct.length;Ft<Vt;++Ft)for(Ge=0,an=Ct[Ft];Ge<nt;++Ge)if((yt=xe[Ge]).type===an.type&&yt.name===an.name)return an.value},dispatch:function Go(g,V){return this.each(("function"==typeof V?ia:gr)(g,V))},[Symbol.iterator]:function*qo(){for(var g=this._groups,V=0,pe=g.length;V<pe;++V)for(var yt,xe=g[V],Ge=0,nt=xe.length;Ge<nt;++Ge)(yt=xe[Ge])&&(yield yt)}};var vh=0;function Ws(){this._="@"+(++vh).toString(36)}function js(g){let V;for(;V=g.sourceEvent;)g=V;return g}function Lo(g,V){if(g=js(g),void 0===V&&(V=g.currentTarget),V){var pe=V.ownerSVGElement||V;if(pe.createSVGPoint){var xe=pe.createSVGPoint();return xe.x=g.clientX,xe.y=g.clientY,[(xe=xe.matrixTransform(V.getScreenCTM().inverse())).x,xe.y]}if(V.getBoundingClientRect){var Ge=V.getBoundingClientRect();return[g.clientX-Ge.left-V.clientLeft,g.clientY-Ge.top-V.clientTop]}}return[g.pageX,g.pageY]}function Ha(g,V){return g.target&&(g=js(g),void 0===V&&(V=g.currentTarget),g=g.touches||[g]),Array.from(g,pe=>Lo(pe,V))}Ws.prototype=function ts(){return new Ws}.prototype={constructor:Ws,get:function(g){for(var V=this._;!(V in g);)if(!(g=g.parentNode))return;return g[V]},set:function(g,V){return g[this._]=V},remove:function(g){return this._ in g&&delete g[this._]},toString:function(){return this._}};const jd={passive:!1},Al={capture:!0,passive:!1};function du(g){g.stopImmediatePropagation()}function zc(g){g.preventDefault(),g.stopImmediatePropagation()}var eh=g=>()=>g;function $d(g,{sourceEvent:V,subject:pe,target:xe,identifier:Ge,active:nt,x:yt,y:Ct,dx:Ft,dy:Vt,dispatch:an}){Object.defineProperties(this,{type:{value:g,enumerable:!0,configurable:!0},sourceEvent:{value:V,enumerable:!0,configurable:!0},subject:{value:pe,enumerable:!0,configurable:!0},target:{value:xe,enumerable:!0,configurable:!0},identifier:{value:Ge,enumerable:!0,configurable:!0},active:{value:nt,enumerable:!0,configurable:!0},x:{value:yt,enumerable:!0,configurable:!0},y:{value:Ct,enumerable:!0,configurable:!0},dx:{value:Ft,enumerable:!0,configurable:!0},dy:{value:Vt,enumerable:!0,configurable:!0},_:{value:an}})}function Pu(g){return!g.ctrlKey&&!g.button}function Nl(){return this.parentNode}function bh(g,V){return V??{x:g.x,y:g.y}}function xh(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ul(){var Ct,Ft,Vt,an,g=Pu,V=Nl,pe=bh,xe=xh,Ge={},nt=$e("start","drag","end"),yt=0,Tn=0;function Pn(Ri){Ri.on("mousedown.drag",xi).filter(xe).on("touchstart.drag",$i).on("touchmove.drag",$s,jd).on("touchend.drag touchcancel.drag",mo).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function xi(Ri,to){if(!an&&g.call(this,Ri,to)){var zr=Er(this,V.call(this,Ri,to),Ri,to,"mouse");zr&&(qh(Ri.view).on("mousemove.drag",Sr,Al).on("mouseup.drag",pr,Al),function vo(g){var V=g.document.documentElement,pe=qh(g).on("dragstart.drag",zc,Al);"onselectstart"in V?pe.on("selectstart.drag",zc,Al):(V.__noselect=V.style.MozUserSelect,V.style.MozUserSelect="none")}(Ri.view),du(Ri),Vt=!1,Ct=Ri.clientX,Ft=Ri.clientY,zr("start",Ri))}}function Sr(Ri){if(zc(Ri),!Vt){var to=Ri.clientX-Ct,zr=Ri.clientY-Ft;Vt=to*to+zr*zr>Tn}Ge.mouse("drag",Ri)}function pr(Ri){qh(Ri.view).on("mousemove.drag mouseup.drag",null),function Ju(g,V){var pe=g.document.documentElement,xe=qh(g).on("dragstart.drag",null);V&&(xe.on("click.drag",zc,Al),setTimeout(function(){xe.on("click.drag",null)},0)),"onselectstart"in pe?xe.on("selectstart.drag",null):(pe.style.MozUserSelect=pe.__noselect,delete pe.__noselect)}(Ri.view,Vt),zc(Ri),Ge.mouse("end",Ri)}function $i(Ri,to){if(g.call(this,Ri,to)){var Pl,rc,zr=Ri.changedTouches,Qo=V.call(this,Ri,to),aa=zr.length;for(Pl=0;Pl<aa;++Pl)(rc=Er(this,Qo,Ri,to,zr[Pl].identifier,zr[Pl]))&&(du(Ri),rc("start",Ri,zr[Pl]))}}function $s(Ri){var Qo,aa,to=Ri.changedTouches,zr=to.length;for(Qo=0;Qo<zr;++Qo)(aa=Ge[to[Qo].identifier])&&(zc(Ri),aa("drag",Ri,to[Qo]))}function mo(Ri){var Qo,aa,to=Ri.changedTouches,zr=to.length;for(an&&clearTimeout(an),an=setTimeout(function(){an=null},500),Qo=0;Qo<zr;++Qo)(aa=Ge[to[Qo].identifier])&&(du(Ri),aa("end",Ri,to[Qo]))}function Er(Ri,to,zr,Qo,aa,Pl){var Gs,Fo,sc,rc=nt.copy(),Ks=Lo(Pl||zr,to);if(null!=(sc=pe.call(Ri,new $d("beforestart",{sourceEvent:zr,target:Pn,identifier:aa,active:yt,x:Ks[0],y:Ks[1],dx:0,dy:0,dispatch:rc}),Qo)))return Gs=sc.x-Ks[0]||0,Fo=sc.y-Ks[1]||0,function zu(Wc,yu,Fh){var Af,jc=Ks;switch(Wc){case"start":Ge[aa]=zu,Af=yt++;break;case"end":delete Ge[aa],--yt;case"drag":Ks=Lo(Fh||yu,to),Af=yt}rc.call(Wc,Ri,new $d(Wc,{sourceEvent:yu,subject:sc,target:Pn,identifier:aa,active:Af,x:Ks[0]+Gs,y:Ks[1]+Fo,dx:Ks[0]-jc[0],dy:Ks[1]-jc[1],dispatch:rc}),Qo)}}return Pn.filter=function(Ri){return arguments.length?(g="function"==typeof Ri?Ri:eh(!!Ri),Pn):g},Pn.container=function(Ri){return arguments.length?(V="function"==typeof Ri?Ri:eh(Ri),Pn):V},Pn.subject=function(Ri){return arguments.length?(pe="function"==typeof Ri?Ri:eh(Ri),Pn):pe},Pn.touchable=function(Ri){return arguments.length?(xe="function"==typeof Ri?Ri:eh(!!Ri),Pn):xe},Pn.on=function(){var Ri=nt.on.apply(nt,arguments);return Ri===nt?Pn:Ri},Pn.clickDistance=function(Ri){return arguments.length?(Tn=(Ri=+Ri)*Ri,Pn):Math.sqrt(Tn)},Pn}function iu(g,V){return null==g||null==V?NaN:g<V?-1:g>V?1:g>=V?0:NaN}function KA(g,V){return null==g||null==V?NaN:V<g?-1:V>g?1:V>=g?0:NaN}function ka(g){let V,pe,xe;function Ge(Ct,Ft,Vt=0,an=Ct.length){if(Vt<an){if(0!==V(Ft,Ft))return an;do{const Tn=Vt+an>>>1;pe(Ct[Tn],Ft)<0?Vt=Tn+1:an=Tn}while(Vt<an)}return Vt}return 2!==g.length?(V=iu,pe=(Ct,Ft)=>iu(g(Ct),Ft),xe=(Ct,Ft)=>g(Ct)-Ft):(V=g===iu||g===KA?g:YA,pe=g,xe=g),{left:Ge,center:function yt(Ct,Ft,Vt=0,an=Ct.length){const Tn=Ge(Ct,Ft,Vt,an-1);return Tn>Vt&&xe(Ct[Tn-1],Ft)>-xe(Ct[Tn],Ft)?Tn-1:Tn},right:function nt(Ct,Ft,Vt=0,an=Ct.length){if(Vt<an){if(0!==V(Ft,Ft))return an;do{const Tn=Vt+an>>>1;pe(Ct[Tn],Ft)<=0?Vt=Tn+1:an=Tn}while(Vt<an)}return Vt}}}function YA(){return 0}$d.prototype.on=function(){var g=this._.on.apply(this._,arguments);return g===this._?this:g};const xd=ka(iu).right;ka(function jm(g){return null===g?NaN:+g});var th=xd;class Hc extends Map{constructor(V,pe=rA){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:pe}}),null!=V)for(const[xe,Ge]of V)this.set(xe,Ge)}get(V){return super.get(W_(this,V))}has(V){return super.has(W_(this,V))}set(V,pe){return super.set(function Jl({_intern:g,_key:V},pe){const xe=V(pe);return g.has(xe)?g.get(xe):(g.set(xe,pe),pe)}(this,V),pe)}delete(V){return super.delete(function Vc({_intern:g,_key:V},pe){const xe=V(pe);return g.has(xe)&&(g.get(xe),g.delete(xe)),pe}(this,V))}}var Dc=Math.sqrt(50),fu=Math.sqrt(10),j_=Math.sqrt(2);function $m(g,V,pe){var xe,nt,yt,Ct,Ge=-1;if(pe=+pe,(g=+g)==(V=+V)&&pe>0)return[g];if((xe=V<g)&&(nt=g,g=V,V=nt),0===(Ct=Xd(g,V,pe))||!isFinite(Ct))return[];if(Ct>0){let Ft=Math.round(g/Ct),Vt=Math.round(V/Ct);for(Ft*Ct<g&&++Ft,Vt*Ct>V&&--Vt,yt=new Array(nt=Vt-Ft+1);++Ge<nt;)yt[Ge]=(Ft+Ge)*Ct}else{Ct=-Ct;let Ft=Math.round(g*Ct),Vt=Math.round(V*Ct);for(Ft/Ct<g&&++Ft,Vt/Ct>V&&--Vt,yt=new Array(nt=Vt-Ft+1);++Ge<nt;)yt[Ge]=(Ft+Ge)/Ct}return xe&&yt.reverse(),yt}function Xd(g,V,pe){var xe=(V-g)/Math.max(0,pe),Ge=Math.floor(Math.log(xe)/Math.LN10),nt=xe/Math.pow(10,Ge);return Ge>=0?(nt>=Dc?10:nt>=fu?5:nt>=j_?2:1)*Math.pow(10,Ge):-Math.pow(10,-Ge)/(nt>=Dc?10:nt>=fu?5:nt>=j_?2:1)}function ZA(g,V,pe){var xe=Math.abs(V-g)/Math.max(0,pe),Ge=Math.pow(10,Math.floor(Math.log(xe)/Math.LN10)),nt=xe/Ge;return nt>=Dc?Ge*=10:nt>=fu?Ge*=5:nt>=j_&&(Ge*=2),V<g?-Ge:Ge}function wd(g,V){switch(arguments.length){case 0:break;case 1:this.range(g);break;default:this.range(V).domain(g)}return this}Symbol("implicit");var Ss=g=>()=>g;function Ic(g,V){var pe=V-g;return pe?function a2(g,V){return function(pe){return g+pe*V}}(g,pe):Ss(isNaN(g)?V:g)}var gp=function g(V){var pe=function Y_(g){return 1==(g=+g)?Ic:function(V,pe){return pe-V?function Qh(g,V,pe){return g=Math.pow(g,pe),V=Math.pow(V,pe)-g,pe=1/pe,function(xe){return Math.pow(g+xe*V,pe)}}(V,pe,g):Ss(isNaN(V)?pe:V)}}(V);function xe(Ge,nt){var yt=pe((Ge=q(Ge)).r,(nt=q(nt)).r),Ct=pe(Ge.g,nt.g),Ft=pe(Ge.b,nt.b),Vt=Ic(Ge.opacity,nt.opacity);return function(an){return Ge.r=yt(an),Ge.g=Ct(an),Ge.b=Ft(an),Ge.opacity=Vt(an),Ge+""}}return xe.gamma=g,xe}(1);function Ly(g,V){V||(V=[]);var Ge,pe=g?Math.min(V.length,g.length):0,xe=V.slice();return function(nt){for(Ge=0;Ge<pe;++Ge)xe[Ge]=g[Ge]*(1-nt)+V[Ge]*nt;return xe}}function _p(g,V){var yt,pe=V?V.length:0,xe=g?Math.min(pe,g.length):0,Ge=new Array(xe),nt=new Array(pe);for(yt=0;yt<xe;++yt)Ge[yt]=sA(g[yt],V[yt]);for(;yt<pe;++yt)nt[yt]=V[yt];return function(Ct){for(yt=0;yt<xe;++yt)nt[yt]=Ge[yt](Ct);return nt}}function Md(g,V){var pe=new Date;return g=+g,V=+V,function(xe){return pe.setTime(g*(1-xe)+V*xe),pe}}function Fu(g,V){return g=+g,V=+V,function(pe){return g*(1-pe)+V*pe}}function yp(g,V){var Ge,pe={},xe={};for(Ge in(null===g||"object"!=typeof g)&&(g={}),(null===V||"object"!=typeof V)&&(V={}),V)Ge in g?pe[Ge]=sA(g[Ge],V[Ge]):xe[Ge]=V[Ge];return function(nt){for(Ge in pe)xe[Ge]=pe[Ge](nt);return xe}}var y0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ru=new RegExp(y0.source,"g");function vc(g,V){var xe,Ge,nt,pe=y0.lastIndex=Ru.lastIndex=0,yt=-1,Ct=[],Ft=[];for(g+="",V+="";(xe=y0.exec(g))&&(Ge=Ru.exec(V));)(nt=Ge.index)>pe&&(nt=V.slice(pe,nt),Ct[yt]?Ct[yt]+=nt:Ct[++yt]=nt),(xe=xe[0])===(Ge=Ge[0])?Ct[yt]?Ct[yt]+=Ge:Ct[++yt]=Ge:(Ct[++yt]=null,Ft.push({i:yt,x:Fu(xe,Ge)})),pe=Ru.lastIndex;return pe<V.length&&(nt=V.slice(pe),Ct[yt]?Ct[yt]+=nt:Ct[++yt]=nt),Ct.length<2?Ft[0]?function b0(g){return function(V){return g(V)+""}}(Ft[0].x):function v0(g){return function(){return g}}(V):(V=Ft.length,function(Vt){for(var Tn,an=0;an<V;++an)Ct[(Tn=Ft[an]).i]=Tn.x(Vt);return Ct.join("")})}function sA(g,V){var xe,pe=typeof V;return null==V||"boolean"===pe?Ss(V):("number"===pe?Fu:"string"===pe?(xe=m(V))?(V=xe,gp):vc:V instanceof m?gp:V instanceof Date?Md:function em(g){return ArrayBuffer.isView(g)&&!(g instanceof DataView)}(V)?Ly:Array.isArray(V)?_p:"function"!=typeof V.valueOf&&"function"!=typeof V.toString||isNaN(V)?yp:Fu)(g,V)}function Wh(g,V){return g=+g,V=+V,function(pe){return Math.round(g*(1-pe)+V*pe)}}var jh,Va=180/Math.PI,x0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function pu(g,V,pe,xe,Ge,nt){var yt,Ct,Ft;return(yt=Math.sqrt(g*g+V*V))&&(g/=yt,V/=yt),(Ft=g*pe+V*xe)&&(pe-=g*Ft,xe-=V*Ft),(Ct=Math.sqrt(pe*pe+xe*xe))&&(pe/=Ct,xe/=Ct,Ft/=Ct),g*xe<V*pe&&(g=-g,V=-V,Ft=-Ft,yt=-yt),{translateX:Ge,translateY:nt,rotate:Math.atan2(V,g)*Va,skewX:Math.atan(Ft)*Va,scaleX:yt,scaleY:Ct}}function Mh(g,V,pe,xe){function Ge(Vt){return Vt.length?Vt.pop()+" ":""}return function(Vt,an){var Tn=[],Pn=[];return Vt=g(Vt),an=g(an),function nt(Vt,an,Tn,Pn,xi,Sr){if(Vt!==Tn||an!==Pn){var pr=xi.push("translate(",null,V,null,pe);Sr.push({i:pr-4,x:Fu(Vt,Tn)},{i:pr-2,x:Fu(an,Pn)})}else(Tn||Pn)&&xi.push("translate("+Tn+V+Pn+pe)}(Vt.translateX,Vt.translateY,an.translateX,an.translateY,Tn,Pn),function yt(Vt,an,Tn,Pn){Vt!==an?(Vt-an>180?an+=360:an-Vt>180&&(Vt+=360),Pn.push({i:Tn.push(Ge(Tn)+"rotate(",null,xe)-2,x:Fu(Vt,an)})):an&&Tn.push(Ge(Tn)+"rotate("+an+xe)}(Vt.rotate,an.rotate,Tn,Pn),function Ct(Vt,an,Tn,Pn){Vt!==an?Pn.push({i:Tn.push(Ge(Tn)+"skewX(",null,xe)-2,x:Fu(Vt,an)}):an&&Tn.push(Ge(Tn)+"skewX("+an+xe)}(Vt.skewX,an.skewX,Tn,Pn),function Ft(Vt,an,Tn,Pn,xi,Sr){if(Vt!==Tn||an!==Pn){var pr=xi.push(Ge(xi)+"scale(",null,",",null,")");Sr.push({i:pr-4,x:Fu(Vt,Tn)},{i:pr-2,x:Fu(an,Pn)})}else(1!==Tn||1!==Pn)&&xi.push(Ge(xi)+"scale("+Tn+","+Pn+")")}(Vt.scaleX,Vt.scaleY,an.scaleX,an.scaleY,Tn,Pn),Vt=an=null,function(xi){for(var $i,Sr=-1,pr=Pn.length;++Sr<pr;)Tn[($i=Pn[Sr]).i]=$i.x(xi);return Tn.join("")}}}var Pc=Mh(function bc(g){const V=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(g+"");return V.isIdentity?x0:pu(V.a,V.b,V.c,V.d,V.e,V.f)},"px, ","px)","deg)"),So=Mh(function Au(g){return null!=g&&(jh||(jh=document.createElementNS("http://www.w3.org/2000/svg","g")),jh.setAttribute("transform",g),g=jh.transform.baseVal.consolidate())?pu((g=g.matrix).a,g.b,g.c,g.d,g.e,g.f):x0},", ",")",")");function Io(g){return+g}var $h=[0,1];function $l(g){return g}function Gc(g,V){return(V-=g=+g)?function(pe){return(pe-g)/V}:function vp(g){return function(){return g}}(isNaN(V)?NaN:.5)}function Nf(g,V,pe){var xe=g[0],Ge=g[1],nt=V[0],yt=V[1];return Ge<xe?(xe=Gc(Ge,xe),nt=pe(yt,nt)):(xe=Gc(xe,Ge),nt=pe(nt,yt)),function(Ct){return nt(xe(Ct))}}function Z_(g,V,pe){var xe=Math.min(g.length,V.length)-1,Ge=new Array(xe),nt=new Array(xe),yt=-1;for(g[xe]<g[0]&&(g=g.slice().reverse(),V=V.slice().reverse());++yt<xe;)Ge[yt]=Gc(g[yt],g[yt+1]),nt[yt]=pe(V[yt],V[yt+1]);return function(Ct){var Ft=th(g,Ct,1,xe)-1;return nt[Ft](Ge[Ft](Ct))}}function tm(g,V){return V.domain(g.domain()).range(g.range()).interpolate(g.interpolate()).clamp(g.clamp()).unknown(g.unknown())}function ec(){var xe,Ge,nt,Ct,Ft,Vt,g=$h,V=$h,pe=sA,yt=$l;function an(){var Pn=Math.min(g.length,V.length);return yt!==$l&&(yt=function Ny(g,V){var pe;return g>V&&(pe=g,g=V,V=pe),function(xe){return Math.max(g,Math.min(V,xe))}}(g[0],g[Pn-1])),Ct=Pn>2?Z_:Nf,Ft=Vt=null,Tn}function Tn(Pn){return null==Pn||isNaN(Pn=+Pn)?nt:(Ft||(Ft=Ct(g.map(xe),V,pe)))(xe(yt(Pn)))}return Tn.invert=function(Pn){return yt(Ge((Vt||(Vt=Ct(V,g.map(xe),Fu)))(Pn)))},Tn.domain=function(Pn){return arguments.length?(g=Array.from(Pn,Io),an()):g.slice()},Tn.range=function(Pn){return arguments.length?(V=Array.from(Pn),an()):V.slice()},Tn.rangeRound=function(Pn){return V=Array.from(Pn),pe=Wh,an()},Tn.clamp=function(Pn){return arguments.length?(yt=!!Pn||$l,an()):yt!==$l},Tn.interpolate=function(Pn){return arguments.length?(pe=Pn,an()):pe},Tn.unknown=function(Pn){return arguments.length?(nt=Pn,Tn):nt},function(Pn,xi){return xe=Pn,Ge=xi,an()}}function Zi(){return ec()($l,$l)}function ks(g,V){if((pe=(g=V?g.toExponential(V-1):g.toExponential()).indexOf("e"))<0)return null;var pe,xe=g.slice(0,pe);return[xe.length>1?xe[0]+xe.slice(2):xe,+g.slice(pe+1)]}function Ts(g){return(g=ks(Math.abs(g)))?g[1]:NaN}var Kd,Uf=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function qc(g){if(!(V=Uf.exec(g)))throw new Error("invalid format: "+g);var V;return new mu({fill:V[1],align:V[2],sign:V[3],symbol:V[4],zero:V[5],width:V[6],comma:V[7],precision:V[8]&&V[8].slice(1),trim:V[9],type:V[10]})}function mu(g){this.fill=void 0===g.fill?" ":g.fill+"",this.align=void 0===g.align?">":g.align+"",this.sign=void 0===g.sign?"-":g.sign+"",this.symbol=void 0===g.symbol?"":g.symbol+"",this.zero=!!g.zero,this.width=void 0===g.width?void 0:+g.width,this.comma=!!g.comma,this.precision=void 0===g.precision?void 0:+g.precision,this.trim=!!g.trim,this.type=void 0===g.type?"":g.type+""}function Hf(g,V){var pe=ks(g,V);if(!pe)return g+"";var xe=pe[0],Ge=pe[1];return Ge<0?"0."+new Array(-Ge).join("0")+xe:xe.length>Ge+1?xe.slice(0,Ge+1)+"."+xe.slice(Ge+1):xe+new Array(Ge-xe.length+2).join("0")}qc.prototype=mu.prototype,mu.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Xl={"%":(g,V)=>(100*g).toFixed(V),b:g=>Math.round(g).toString(2),c:g=>g+"",d:function _a(g){return Math.abs(g=Math.round(g))>=1e21?g.toLocaleString("en").replace(/,/g,""):g.toString(10)},e:(g,V)=>g.toExponential(V),f:(g,V)=>g.toFixed(V),g:(g,V)=>g.toPrecision(V),o:g=>Math.round(g).toString(8),p:(g,V)=>Hf(100*g,V),r:Hf,s:function zf(g,V){var pe=ks(g,V);if(!pe)return g+"";var xe=pe[0],Ge=pe[1],nt=Ge-(Kd=3*Math.max(-8,Math.min(8,Math.floor(Ge/3))))+1,yt=xe.length;return nt===yt?xe:nt>yt?xe+new Array(nt-yt+1).join("0"):nt>0?xe.slice(0,nt)+"."+xe.slice(nt):"0."+new Array(1-nt).join("0")+ks(g,Math.max(0,V+nt-1))[0]},X:g=>Math.round(g).toString(16).toUpperCase(),x:g=>Math.round(g).toString(16)};function Kh(g){return g}var ku,Ou,w0,im=Array.prototype.map,Yd=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Td(g){var V=g.domain;return g.ticks=function(pe){var xe=V();return $m(xe[0],xe[xe.length-1],pe??10)},g.tickFormat=function(pe,xe){var Ge=V();return function Sd(g,V,pe,xe){var nt,Ge=ZA(g,V,pe);switch((xe=qc(xe??",f")).type){case"s":var yt=Math.max(Math.abs(g),Math.abs(V));return null==xe.precision&&!isNaN(nt=function Cd(g,V){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Ts(V)/3)))-Ts(Math.abs(g)))}(Ge,yt))&&(xe.precision=nt),w0(xe,yt);case"":case"e":case"g":case"p":case"r":null==xe.precision&&!isNaN(nt=function Zd(g,V){return g=Math.abs(g),V=Math.abs(V)-g,Math.max(0,Ts(V)-Ts(g))+1}(Ge,Math.max(Math.abs(g),Math.abs(V))))&&(xe.precision=nt-("e"===xe.type));break;case"f":case"%":null==xe.precision&&!isNaN(nt=function ql(g){return Math.max(0,-Ts(Math.abs(g)))}(Ge))&&(xe.precision=nt-2*("%"===xe.type))}return Ou(xe)}(Ge[0],Ge[Ge.length-1],pe??10,xe)},g.nice=function(pe){null==pe&&(pe=10);var Ft,Vt,xe=V(),Ge=0,nt=xe.length-1,yt=xe[Ge],Ct=xe[nt],an=10;for(Ct<yt&&(Vt=yt,yt=Ct,Ct=Vt,Vt=Ge,Ge=nt,nt=Vt);an-- >0;){if((Vt=Xd(yt,Ct,pe))===Ft)return xe[Ge]=yt,xe[nt]=Ct,V(xe);if(Vt>0)yt=Math.floor(yt/Vt)*Vt,Ct=Math.ceil(Ct/Vt)*Vt;else{if(!(Vt<0))break;yt=Math.ceil(yt*Vt)/Vt,Ct=Math.floor(Ct*Vt)/Vt}Ft=Vt}return g},g}function rm(){var g=Zi();return g.copy=function(){return tm(g,rm())},wd.apply(g,arguments),Td(g)}function lA(g,V){var yt,pe=0,xe=(g=g.slice()).length-1,Ge=g[pe],nt=g[xe];return nt<Ge&&(yt=pe,pe=xe,xe=yt,yt=Ge,Ge=nt,nt=yt),g[pe]=V.floor(Ge),g[xe]=V.ceil(nt),g}function cA(g){return Math.log(g)}function uA(g){return Math.exp(g)}function sm(g){return-Math.log(-g)}function hA(g){return-Math.exp(-g)}function Km(g){return isFinite(g)?+("1e"+g):g<0?0:g}function Yr(g){return(V,pe)=>-g(-V,pe)}function xl(){const g=function Il(g){const V=g(cA,uA),pe=V.domain;let Ge,nt,xe=10;function yt(){return Ge=function Wr(g){return g===Math.E?Math.log:10===g&&Math.log10||2===g&&Math.log2||(g=Math.log(g),V=>Math.log(V)/g)}(xe),nt=function Ym(g){return 10===g?Km:g===Math.E?Math.exp:V=>Math.pow(g,V)}(xe),pe()[0]<0?(Ge=Yr(Ge),nt=Yr(nt),g(sm,hA)):g(cA,uA),V}return V.base=function(Ct){return arguments.length?(xe=+Ct,yt()):xe},V.domain=function(Ct){return arguments.length?(pe(Ct),yt()):pe()},V.ticks=Ct=>{const Ft=pe();let Vt=Ft[0],an=Ft[Ft.length-1];const Tn=an<Vt;Tn&&([Vt,an]=[an,Vt]);let Sr,pr,Pn=Ge(Vt),xi=Ge(an);const $i=null==Ct?10:+Ct;let $s=[];if(!(xe%1)&&xi-Pn<$i){if(Pn=Math.floor(Pn),xi=Math.ceil(xi),Vt>0){for(;Pn<=xi;++Pn)for(Sr=1;Sr<xe;++Sr)if(pr=Pn<0?Sr/nt(-Pn):Sr*nt(Pn),!(pr<Vt)){if(pr>an)break;$s.push(pr)}}else for(;Pn<=xi;++Pn)for(Sr=xe-1;Sr>=1;--Sr)if(pr=Pn>0?Sr/nt(-Pn):Sr*nt(Pn),!(pr<Vt)){if(pr>an)break;$s.push(pr)}2*$s.length<$i&&($s=$m(Vt,an,$i))}else $s=$m(Pn,xi,Math.min(xi-Pn,$i)).map(nt);return Tn?$s.reverse():$s},V.tickFormat=(Ct,Ft)=>{if(null==Ct&&(Ct=10),null==Ft&&(Ft=10===xe?"s":","),"function"!=typeof Ft&&(!(xe%1)&&null==(Ft=qc(Ft)).precision&&(Ft.trim=!0),Ft=Ou(Ft)),Ct===1/0)return Ft;const Vt=Math.max(1,xe*Ct/V.ticks().length);return an=>{let Tn=an/nt(Math.round(Ge(an)));return Tn*xe<xe-.5&&(Tn*=xe),Tn<=Vt?Ft(an):""}},V.nice=()=>pe(lA(pe(),{floor:Ct=>nt(Math.floor(Ge(Ct))),ceil:Ct=>nt(Math.ceil(Ge(Ct)))})),V}(ec()).domain([1,10]);return g.copy=()=>tm(g,xl()).base(g.base()),wd.apply(g,arguments),g}function Zh(g){return function(V){return Math.sign(V)*Math.log1p(Math.abs(V/g))}}function Jh(g){return function(V){return Math.sign(V)*Math.expm1(Math.abs(V))*g}}function dA(){var g=function Zm(g){var V=1,pe=g(Zh(V),Jh(V));return pe.constant=function(xe){return arguments.length?g(Zh(V=+xe),Jh(V)):V},Td(pe)}(ec());return g.copy=function(){return tm(g,dA()).constant(g.constant())},wd.apply(g,arguments)}!function oA(g){ku=function Yh(g){var V=void 0===g.grouping||void 0===g.thousands?Kh:function xc(g,V){return function(pe,xe){for(var Ge=pe.length,nt=[],yt=0,Ct=g[0],Ft=0;Ge>0&&Ct>0&&(Ft+Ct+1>xe&&(Ct=Math.max(1,xe-Ft)),nt.push(pe.substring(Ge-=Ct,Ge+Ct)),!((Ft+=Ct+1)>xe));)Ct=g[yt=(yt+1)%g.length];return nt.reverse().join(V)}}(im.call(g.grouping,Number),g.thousands+""),pe=void 0===g.currency?"":g.currency[0]+"",xe=void 0===g.currency?"":g.currency[1]+"",Ge=void 0===g.decimal?".":g.decimal+"",nt=void 0===g.numerals?Kh:function nm(g){return function(V){return V.replace(/[0-9]/g,function(pe){return g[+pe]})}}(im.call(g.numerals,String)),yt=void 0===g.percent?"%":g.percent+"",Ct=void 0===g.minus?"\u2212":g.minus+"",Ft=void 0===g.nan?"NaN":g.nan+"";function Vt(Tn){var Pn=(Tn=qc(Tn)).fill,xi=Tn.align,Sr=Tn.sign,pr=Tn.symbol,$i=Tn.zero,$s=Tn.width,mo=Tn.comma,Er=Tn.precision,Ri=Tn.trim,to=Tn.type;"n"===to?(mo=!0,to="g"):Xl[to]||(void 0===Er&&(Er=12),Ri=!0,to="g"),($i||"0"===Pn&&"="===xi)&&($i=!0,Pn="0",xi="=");var zr="$"===pr?pe:"#"===pr&&/[boxX]/.test(to)?"0"+to.toLowerCase():"",Qo="$"===pr?xe:/[%p]/.test(to)?yt:"",aa=Xl[to],Pl=/[defgprs%]/.test(to);function rc(Ks){var sc,zu,Wc,Gs=zr,Fo=Qo;if("c"===to)Fo=aa(Ks)+Fo,Ks="";else{var yu=(Ks=+Ks)<0||1/Ks<0;if(Ks=isNaN(Ks)?Ft:aa(Math.abs(Ks),Er),Ri&&(Ks=function Xh(g){e:for(var Ge,V=g.length,pe=1,xe=-1;pe<V;++pe)switch(g[pe]){case".":xe=Ge=pe;break;case"0":0===xe&&(xe=pe),Ge=pe;break;default:if(!+g[pe])break e;xe>0&&(xe=0)}return xe>0?g.slice(0,xe)+g.slice(Ge+1):g}(Ks)),yu&&0==+Ks&&"+"!==Sr&&(yu=!1),Gs=(yu?"("===Sr?Sr:Ct:"-"===Sr||"("===Sr?"":Sr)+Gs,Fo=("s"===to?Yd[8+Kd/3]:"")+Fo+(yu&&"("===Sr?")":""),Pl)for(sc=-1,zu=Ks.length;++sc<zu;)if(48>(Wc=Ks.charCodeAt(sc))||Wc>57){Fo=(46===Wc?Ge+Ks.slice(sc+1):Ks.slice(sc))+Fo,Ks=Ks.slice(0,sc);break}}mo&&!$i&&(Ks=V(Ks,1/0));var Fh=Gs.length+Ks.length+Fo.length,jc=Fh<$s?new Array($s-Fh+1).join(Pn):"";switch(mo&&$i&&(Ks=V(jc+Ks,jc.length?$s-Fo.length:1/0),jc=""),xi){case"<":Ks=Gs+Ks+Fo+jc;break;case"=":Ks=Gs+jc+Ks+Fo;break;case"^":Ks=jc.slice(0,Fh=jc.length>>1)+Gs+Ks+Fo+jc.slice(Fh);break;default:Ks=jc+Gs+Ks+Fo}return nt(Ks)}return Er=void 0===Er?6:/[gprs]/.test(to)?Math.max(1,Math.min(21,Er)):Math.max(0,Math.min(20,Er)),rc.toString=function(){return Tn+""},rc}return{format:Vt,formatPrefix:function an(Tn,Pn){var xi=Vt(((Tn=qc(Tn)).type="f",Tn)),Sr=3*Math.max(-8,Math.min(8,Math.floor(Ts(Pn)/3))),pr=Math.pow(10,-Sr),$i=Yd[8+Sr/3];return function($s){return xi(pr*$s)+$i}}}}(g),Ou=ku.format,w0=ku.formatPrefix}({thousands:",",grouping:[3],currency:["$",""]});var e1=new Date,S0=new Date;function Fc(g,V,pe,xe){function Ge(nt){return g(nt=0===arguments.length?new Date:new Date(+nt)),nt}return Ge.floor=function(nt){return g(nt=new Date(+nt)),nt},Ge.ceil=function(nt){return g(nt=new Date(nt-1)),V(nt,1),g(nt),nt},Ge.round=function(nt){var yt=Ge(nt),Ct=Ge.ceil(nt);return nt-yt<Ct-nt?yt:Ct},Ge.offset=function(nt,yt){return V(nt=new Date(+nt),null==yt?1:Math.floor(yt)),nt},Ge.range=function(nt,yt,Ct){var Vt,Ft=[];if(nt=Ge.ceil(nt),Ct=null==Ct?1:Math.floor(Ct),!(nt<yt&&Ct>0))return Ft;do{Ft.push(Vt=new Date(+nt)),V(nt,Ct),g(nt)}while(Vt<nt&&nt<yt);return Ft},Ge.filter=function(nt){return Fc(function(yt){if(yt>=yt)for(;g(yt),!nt(yt);)yt.setTime(yt-1)},function(yt,Ct){if(yt>=yt)if(Ct<0)for(;++Ct<=0;)for(;V(yt,-1),!nt(yt););else for(;--Ct>=0;)for(;V(yt,1),!nt(yt););})},pe&&(Ge.count=function(nt,yt){return e1.setTime(+nt),S0.setTime(+yt),g(e1),g(S0),Math.floor(pe(e1,S0))},Ge.every=function(nt){return nt=Math.floor(nt),isFinite(nt)&&nt>0?nt>1?Ge.filter(xe?function(yt){return xe(yt)%nt==0}:function(yt){return Ge.count(0,yt)%nt==0}):Ge:null}),Ge}var T0=Fc(function(){},function(g,V){g.setTime(+g+V)},function(g,V){return V-g});T0.every=function(g){return g=Math.floor(g),isFinite(g)&&g>0?g>1?Fc(function(V){V.setTime(Math.floor(V/g)*g)},function(V,pe){V.setTime(+V+pe*g)},function(V,pe){return(pe-V)/g}):T0:null};var Lb=T0;const ed=1e3,ih=60*ed,td=60*ih,nd=24*td,ng=7*nd,E0=30*nd,bp=365*nd;var Ch=Fc(function(g){g.setTime(g-g.getMilliseconds())},function(g,V){g.setTime(+g+V*ed)},function(g,V){return(V-g)/ed},function(g){return g.getUTCSeconds()}),xp=Fc(function(g){g.setTime(g-g.getMilliseconds()-g.getSeconds()*ed)},function(g,V){g.setTime(+g+V*ih)},function(g,V){return(V-g)/ih},function(g){return g.getMinutes()}),rg=Fc(function(g){g.setTime(g-g.getMilliseconds()-g.getSeconds()*ed-g.getMinutes()*ih)},function(g,V){g.setTime(+g+V*td)},function(g,V){return(V-g)/td},function(g){return g.getHours()}),og=Fc(g=>g.setHours(0,0,0,0),(g,V)=>g.setDate(g.getDate()+V),(g,V)=>(V-g-(V.getTimezoneOffset()-g.getTimezoneOffset())*ih)/nd,g=>g.getDate()-1);function Qc(g){return Fc(function(V){V.setDate(V.getDate()-(V.getDay()+7-g)%7),V.setHours(0,0,0,0)},function(V,pe){V.setDate(V.getDate()+7*pe)},function(V,pe){return(pe-V-(pe.getTimezoneOffset()-V.getTimezoneOffset())*ih)/ng})}var mA=Qc(0),Jd=Qc(1),ef=(Qc(2),Qc(3),Qc(4)),F0=(Qc(5),Qc(6),Fc(function(g){g.setDate(1),g.setHours(0,0,0,0)},function(g,V){g.setMonth(g.getMonth()+V)},function(g,V){return V.getMonth()-g.getMonth()+12*(V.getFullYear()-g.getFullYear())},function(g){return g.getMonth()})),cg=Fc(function(g){g.setMonth(0,1),g.setHours(0,0,0,0)},function(g,V){g.setFullYear(g.getFullYear()+V)},function(g,V){return V.getFullYear()-g.getFullYear()},function(g){return g.getFullYear()});cg.every=function(g){return isFinite(g=Math.floor(g))&&g>0?Fc(function(V){V.setFullYear(Math.floor(V.getFullYear()/g)*g),V.setMonth(0,1),V.setHours(0,0,0,0)},function(V,pe){V.setFullYear(V.getFullYear()+pe*g)}):null};var wc=cg,am=Fc(function(g){g.setUTCSeconds(0,0)},function(g,V){g.setTime(+g+V*ih)},function(g,V){return(V-g)/ih},function(g){return g.getUTCMinutes()}),n1=Fc(function(g){g.setUTCMinutes(0,0,0)},function(g,V){g.setTime(+g+V*td)},function(g,V){return(V-g)/td},function(g){return g.getUTCHours()}),lm=Fc(function(g){g.setUTCHours(0,0,0,0)},function(g,V){g.setUTCDate(g.getUTCDate()+V)},function(g,V){return(V-g)/nd},function(g){return g.getUTCDate()-1});function Sh(g){return Fc(function(V){V.setUTCDate(V.getUTCDate()-(V.getUTCDay()+7-g)%7),V.setUTCHours(0,0,0,0)},function(V,pe){V.setUTCDate(V.getUTCDate()+7*pe)},function(V,pe){return(pe-V)/ng})}var hg=Sh(0),il=Sh(1),wp=(Sh(2),Sh(3),Sh(4)),id=(Sh(5),Sh(6),Fc(function(g){g.setUTCDate(1),g.setUTCHours(0,0,0,0)},function(g,V){g.setUTCMonth(g.getUTCMonth()+V)},function(g,V){return V.getUTCMonth()-g.getUTCMonth()+12*(V.getUTCFullYear()-g.getUTCFullYear())},function(g){return g.getUTCMonth()})),dg=Fc(function(g){g.setUTCMonth(0,1),g.setUTCHours(0,0,0,0)},function(g,V){g.setUTCFullYear(g.getUTCFullYear()+V)},function(g,V){return V.getUTCFullYear()-g.getUTCFullYear()},function(g){return g.getUTCFullYear()});dg.every=function(g){return isFinite(g=Math.floor(g))&&g>0?Fc(function(V){V.setUTCFullYear(Math.floor(V.getUTCFullYear()/g)*g),V.setUTCMonth(0,1),V.setUTCHours(0,0,0,0)},function(V,pe){V.setUTCFullYear(V.getUTCFullYear()+pe*g)}):null};var tf=dg;function Gf(g,V,pe,xe,Ge,nt){const yt=[[Ch,1,ed],[Ch,5,5*ed],[Ch,15,15*ed],[Ch,30,30*ed],[nt,1,ih],[nt,5,5*ih],[nt,15,15*ih],[nt,30,30*ih],[Ge,1,td],[Ge,3,3*td],[Ge,6,6*td],[Ge,12,12*td],[xe,1,nd],[xe,2,2*nd],[pe,1,ng],[V,1,E0],[V,3,3*E0],[g,1,bp]];function Ft(Vt,an,Tn){const Pn=Math.abs(an-Vt)/Tn,xi=ka(([,,$i])=>$i).right(yt,Pn);if(xi===yt.length)return g.every(ZA(Vt/bp,an/bp,Tn));if(0===xi)return Lb.every(Math.max(ZA(Vt,an,Tn),1));const[Sr,pr]=yt[Pn/yt[xi-1][2]<yt[xi][2]/Pn?xi-1:xi];return Sr.every(pr)}return[function Ct(Vt,an,Tn){const Pn=an<Vt;Pn&&([Vt,an]=[an,Vt]);const xi=Tn&&"function"==typeof Tn.range?Tn:Ft(Vt,an,Tn),Sr=xi?xi.range(Vt,+an+1):[];return Pn?Sr.reverse():Sr},Ft]}const[s1,zy]=Gf(tf,id,hg,lm,n1,am),[sr,Nb]=Gf(wc,F0,mA,og,rg,xp);function o1(g){if(0<=g.y&&g.y<100){var V=new Date(-1,g.m,g.d,g.H,g.M,g.S,g.L);return V.setFullYear(g.y),V}return new Date(g.y,g.m,g.d,g.H,g.M,g.S,g.L)}function a1(g){if(0<=g.y&&g.y<100){var V=new Date(Date.UTC(-1,g.m,g.d,g.H,g.M,g.S,g.L));return V.setUTCFullYear(g.y),V}return new Date(Date.UTC(g.y,g.m,g.d,g.H,g.M,g.S,g.L))}function fg(g,V,pe){return{y:g,m:V,d:pe,H:0,M:0,S:0,L:0}}var af,fm,dc,Wf,Hy={"-":"",_:" ",0:"0"},Rc=/^\s*\d+/,gA=/^%/,Vy=/[\\^$*+?|[\]().{}]/g;function Ga(g,V,pe){var xe=g<0?"-":"",Ge=(xe?-g:g)+"",nt=Ge.length;return xe+(nt<pe?new Array(pe-nt+1).join(V)+Ge:Ge)}function tc(g){return g.replace(Vy,"\\$&")}function Cp(g){return new RegExp("^(?:"+g.map(tc).join("|")+")","i")}function nf(g){return new Map(g.map((V,pe)=>[V.toLowerCase(),pe]))}function Gy(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+1));return xe?(g.w=+xe[0],pe+xe[0].length):-1}function Eh(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+1));return xe?(g.u=+xe[0],pe+xe[0].length):-1}function Dd(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+2));return xe?(g.U=+xe[0],pe+xe[0].length):-1}function cm(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+2));return xe?(g.V=+xe[0],pe+xe[0].length):-1}function pg(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+2));return xe?(g.W=+xe[0],pe+xe[0].length):-1}function Sp(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+4));return xe?(g.y=+xe[0],pe+xe[0].length):-1}function Ag(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+2));return xe?(g.y=+xe[0]+(+xe[0]>68?1900:2e3),pe+xe[0].length):-1}function qy(g,V,pe){var xe=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(V.slice(pe,pe+6));return xe?(g.Z=xe[1]?0:-(xe[2]+(xe[3]||"00")),pe+xe[0].length):-1}function l1(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+1));return xe?(g.q=3*xe[0]-3,pe+xe[0].length):-1}function Qy(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+2));return xe?(g.m=xe[0]-1,pe+xe[0].length):-1}function Lu(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+2));return xe?(g.d=+xe[0],pe+xe[0].length):-1}function _A(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+3));return xe?(g.m=0,g.d=+xe[0],pe+xe[0].length):-1}function qf(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+2));return xe?(g.H=+xe[0],pe+xe[0].length):-1}function Wy(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+2));return xe?(g.M=+xe[0],pe+xe[0].length):-1}function c1(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+2));return xe?(g.S=+xe[0],pe+xe[0].length):-1}function jy(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+3));return xe?(g.L=+xe[0],pe+xe[0].length):-1}function u1(g,V,pe){var xe=Rc.exec(V.slice(pe,pe+6));return xe?(g.L=Math.floor(xe[0]/1e3),pe+xe[0].length):-1}function yA(g,V,pe){var xe=gA.exec(V.slice(pe,pe+1));return xe?pe+xe[0].length:-1}function O0(g,V,pe){var xe=Rc.exec(V.slice(pe));return xe?(g.Q=+xe[0],pe+xe[0].length):-1}function mg(g,V,pe){var xe=Rc.exec(V.slice(pe));return xe?(g.s=+xe[0],pe+xe[0].length):-1}function h1(g,V){return Ga(g.getDate(),V,2)}function L0(g,V){return Ga(g.getHours(),V,2)}function gg(g,V){return Ga(g.getHours()%12||12,V,2)}function N0(g,V){return Ga(1+og.count(wc(g),g),V,3)}function Bd(g,V){return Ga(g.getMilliseconds(),V,3)}function U0(g,V){return Bd(g,V)+"000"}function vA(g,V){return Ga(g.getMonth()+1,V,2)}function $y(g,V){return Ga(g.getMinutes(),V,2)}function z0(g,V){return Ga(g.getSeconds(),V,2)}function um(g){var V=g.getDay();return 0===V?7:V}function _g(g,V){return Ga(mA.count(wc(g)-1,g),V,2)}function d1(g){var V=g.getDay();return V>=4||0===V?ef(g):ef.ceil(g)}function H0(g,V){return g=d1(g),Ga(ef.count(wc(g),g)+(4===wc(g).getDay()),V,2)}function V0(g){return g.getDay()}function bA(g,V){return Ga(Jd.count(wc(g)-1,g),V,2)}function hm(g,V){return Ga(g.getFullYear()%100,V,2)}function zb(g,V){return Ga((g=d1(g)).getFullYear()%100,V,2)}function Hb(g,V){return Ga(g.getFullYear()%1e4,V,4)}function f1(g,V){var pe=g.getDay();return Ga((g=pe>=4||0===pe?ef(g):ef.ceil(g)).getFullYear()%1e4,V,4)}function Vb(g){var V=g.getTimezoneOffset();return(V>0?"-":(V*=-1,"+"))+Ga(V/60|0,"0",2)+Ga(V%60,"0",2)}function Gb(g,V){return Ga(g.getUTCDate(),V,2)}function dm(g,V){return Ga(g.getUTCHours(),V,2)}function Xy(g,V){return Ga(g.getUTCHours()%12||12,V,2)}function hc(g,V){return Ga(1+lm.count(tf(g),g),V,3)}function Id(g,V){return Ga(g.getUTCMilliseconds(),V,3)}function xA(g,V){return Id(g,V)+"000"}function Tp(g,V){return Ga(g.getUTCMonth()+1,V,2)}function Qf(g,V){return Ga(g.getUTCMinutes(),V,2)}function G0(g,V){return Ga(g.getUTCSeconds(),V,2)}function rf(g){var V=g.getUTCDay();return 0===V?7:V}function qb(g,V){return Ga(hg.count(tf(g)-1,g),V,2)}function p1(g){var V=g.getUTCDay();return V>=4||0===V?wp(g):wp.ceil(g)}function Ky(g,V){return g=p1(g),Ga(wp.count(tf(g),g)+(4===tf(g).getUTCDay()),V,2)}function yg(g){return g.getUTCDay()}function q0(g,V){return Ga(il.count(tf(g)-1,g),V,2)}function Qb(g,V){return Ga(g.getUTCFullYear()%100,V,2)}function Q0(g,V){return Ga((g=p1(g)).getUTCFullYear()%100,V,2)}function Wo(g,V){return Ga(g.getUTCFullYear()%1e4,V,4)}function as(g,V){var pe=g.getUTCDay();return Ga((g=pe>=4||0===pe?wp(g):wp.ceil(g)).getUTCFullYear()%1e4,V,4)}function sf(){return"+0000"}function Yy(){return"%"}function Zy(g){return+g}function A1(g){return Math.floor(+g/1e3)}!function Mc(g){af=function Ub(g){var V=g.dateTime,pe=g.date,xe=g.time,Ge=g.periods,nt=g.days,yt=g.shortDays,Ct=g.months,Ft=g.shortMonths,Vt=Cp(Ge),an=nf(Ge),Tn=Cp(nt),Pn=nf(nt),xi=Cp(yt),Sr=nf(yt),pr=Cp(Ct),$i=nf(Ct),$s=Cp(Ft),mo=nf(Ft),Er={a:function yu(ds){return yt[ds.getDay()]},A:function Fh(ds){return nt[ds.getDay()]},b:function jc(ds){return Ft[ds.getMonth()]},B:function Af(ds){return Ct[ds.getMonth()]},c:null,d:h1,e:h1,f:U0,g:zb,G:f1,H:L0,I:gg,j:N0,L:Bd,m:vA,M:$y,p:function Rp(ds){return Ge[+(ds.getHours()>=12)]},q:function J0(ds){return 1+~~(ds.getMonth()/3)},Q:Zy,s:A1,S:z0,u:um,U:_g,V:H0,w:V0,W:bA,x:null,X:null,y:hm,Y:Hb,Z:Vb,"%":Yy},Ri={a:function Od(ds){return yt[ds.getUTCDay()]},A:function mf(ds){return nt[ds.getUTCDay()]},b:function Zf(ds){return Ft[ds.getUTCMonth()]},B:function Bs(ds){return Ct[ds.getUTCMonth()]},c:null,d:Gb,e:Gb,f:xA,g:Q0,G:as,H:dm,I:Xy,j:hc,L:Id,m:Tp,M:Qf,p:function Pg(ds){return Ge[+(ds.getUTCHours()>=12)]},q:function kp(ds){return 1+~~(ds.getUTCMonth()/3)},Q:Zy,s:A1,S:G0,u:rf,U:qb,V:Ky,w:yg,W:q0,x:null,X:null,y:Qb,Y:Wo,Z:sf,"%":Yy},to={a:function rc(ds,da,Wa){var Dr=xi.exec(da.slice(Wa));return Dr?(ds.w=Sr.get(Dr[0].toLowerCase()),Wa+Dr[0].length):-1},A:function Ks(ds,da,Wa){var Dr=Tn.exec(da.slice(Wa));return Dr?(ds.w=Pn.get(Dr[0].toLowerCase()),Wa+Dr[0].length):-1},b:function Gs(ds,da,Wa){var Dr=$s.exec(da.slice(Wa));return Dr?(ds.m=mo.get(Dr[0].toLowerCase()),Wa+Dr[0].length):-1},B:function Fo(ds,da,Wa){var Dr=pr.exec(da.slice(Wa));return Dr?(ds.m=$i.get(Dr[0].toLowerCase()),Wa+Dr[0].length):-1},c:function sc(ds,da,Wa){return aa(ds,V,da,Wa)},d:Lu,e:Lu,f:u1,g:Ag,G:Sp,H:qf,I:qf,j:_A,L:jy,m:Qy,M:Wy,p:function Pl(ds,da,Wa){var Dr=Vt.exec(da.slice(Wa));return Dr?(ds.p=an.get(Dr[0].toLowerCase()),Wa+Dr[0].length):-1},q:l1,Q:O0,s:mg,S:c1,u:Eh,U:Dd,V:cm,w:Gy,W:pg,x:function zu(ds,da,Wa){return aa(ds,pe,da,Wa)},X:function Wc(ds,da,Wa){return aa(ds,xe,da,Wa)},y:Ag,Y:Sp,Z:qy,"%":yA};function zr(ds,da){return function(Wa){var Hu,Ld,ud,Dr=[],sh=-1,gl=0,oh=ds.length;for(Wa instanceof Date||(Wa=new Date(+Wa));++sh<oh;)37===ds.charCodeAt(sh)&&(Dr.push(ds.slice(gl,sh)),null!=(Ld=Hy[Hu=ds.charAt(++sh)])?Hu=ds.charAt(++sh):Ld="e"===Hu?" ":"0",(ud=da[Hu])&&(Hu=ud(Wa,Ld)),Dr.push(Hu),gl=sh+1);return Dr.push(ds.slice(gl,sh)),Dr.join("")}}function Qo(ds,da){return function(Wa){var gl,oh,Dr=fg(1900,void 0,1);if(aa(Dr,ds,Wa+="",0)!=Wa.length)return null;if("Q"in Dr)return new Date(Dr.Q);if("s"in Dr)return new Date(1e3*Dr.s+("L"in Dr?Dr.L:0));if(da&&!("Z"in Dr)&&(Dr.Z=0),"p"in Dr&&(Dr.H=Dr.H%12+12*Dr.p),void 0===Dr.m&&(Dr.m="q"in Dr?Dr.q:0),"V"in Dr){if(Dr.V<1||Dr.V>53)return null;"w"in Dr||(Dr.w=1),"Z"in Dr?(oh=(gl=a1(fg(Dr.y,0,1))).getUTCDay(),gl=oh>4||0===oh?il.ceil(gl):il(gl),gl=lm.offset(gl,7*(Dr.V-1)),Dr.y=gl.getUTCFullYear(),Dr.m=gl.getUTCMonth(),Dr.d=gl.getUTCDate()+(Dr.w+6)%7):(oh=(gl=o1(fg(Dr.y,0,1))).getDay(),gl=oh>4||0===oh?Jd.ceil(gl):Jd(gl),gl=og.offset(gl,7*(Dr.V-1)),Dr.y=gl.getFullYear(),Dr.m=gl.getMonth(),Dr.d=gl.getDate()+(Dr.w+6)%7)}else("W"in Dr||"U"in Dr)&&("w"in Dr||(Dr.w="u"in Dr?Dr.u%7:"W"in Dr?1:0),oh="Z"in Dr?a1(fg(Dr.y,0,1)).getUTCDay():o1(fg(Dr.y,0,1)).getDay(),Dr.m=0,Dr.d="W"in Dr?(Dr.w+6)%7+7*Dr.W-(oh+5)%7:Dr.w+7*Dr.U-(oh+6)%7);return"Z"in Dr?(Dr.H+=Dr.Z/100|0,Dr.M+=Dr.Z%100,a1(Dr)):o1(Dr)}}function aa(ds,da,Wa,Dr){for(var Hu,Ld,sh=0,gl=da.length,oh=Wa.length;sh<gl;){if(Dr>=oh)return-1;if(37===(Hu=da.charCodeAt(sh++))){if(Hu=da.charAt(sh++),!(Ld=to[Hu in Hy?da.charAt(sh++):Hu])||(Dr=Ld(ds,Wa,Dr))<0)return-1}else if(Hu!=Wa.charCodeAt(Dr++))return-1}return Dr}return Er.x=zr(pe,Er),Er.X=zr(xe,Er),Er.c=zr(V,Er),Ri.x=zr(pe,Ri),Ri.X=zr(xe,Ri),Ri.c=zr(V,Ri),{format:function(ds){var da=zr(ds+="",Er);return da.toString=function(){return ds},da},parse:function(ds){var da=Qo(ds+="",!1);return da.toString=function(){return ds},da},utcFormat:function(ds){var da=zr(ds+="",Ri);return da.toString=function(){return ds},da},utcParse:function(ds){var da=Qo(ds+="",!0);return da.toString=function(){return ds},da}}}(g),fm=af.format,dc=af.utcFormat,Wf=af.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var vg="%Y-%m-%dT%H:%M:%S.%LZ";function Ep(g){return new Date(g)}function bg(g){return g instanceof Date?+g:+new Date(+g)}function xg(g,V,pe,xe,Ge,nt,yt,Ct,Ft,Vt){var an=Zi(),Tn=an.invert,Pn=an.domain,xi=Vt(".%L"),Sr=Vt(":%S"),pr=Vt("%I:%M"),$i=Vt("%I %p"),$s=Vt("%a %d"),mo=Vt("%b %d"),Er=Vt("%B"),Ri=Vt("%Y");function to(zr){return(Ft(zr)<zr?xi:Ct(zr)<zr?Sr:yt(zr)<zr?pr:nt(zr)<zr?$i:xe(zr)<zr?Ge(zr)<zr?$s:mo:pe(zr)<zr?Er:Ri)(zr)}return an.invert=function(zr){return new Date(Tn(zr))},an.domain=function(zr){return arguments.length?Pn(Array.from(zr,bg)):Pn().map(Ep)},an.ticks=function(zr){var Qo=Pn();return g(Qo[0],Qo[Qo.length-1],zr??10)},an.tickFormat=function(zr,Qo){return null==Qo?to:Vt(Qo)},an.nice=function(zr){var Qo=Pn();return(!zr||"function"!=typeof zr.range)&&(zr=V(Qo[0],Qo[Qo.length-1],zr??10)),zr?Pn(lA(Qo,zr)):an},an.copy=function(){return tm(an,xg(g,V,pe,xe,Ge,nt,yt,Ct,Ft,Vt))},an}function W0(){return wd.apply(xg(sr,Nb,wc,F0,mA,og,rg,xp,Ch,fm).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function od(g){return function(){return g}}Date.prototype.toISOString||dc(vg),+new Date("2000-01-01T00:00:00.000Z")||Wf(vg);const mm=Math.abs,kc=Math.atan2,$f=Math.cos,gm=Math.max,Mg=Math.min,Pd=Math.sin,Fd=Math.sqrt,Oc=1e-12,cf=Math.PI,ad=cf/2,Cg=2*cf;function j0(g){return g>=1?ad:g<=-1?-ad:Math.asin(g)}function Tg(g){return g.innerRadius}function g1(g){return g.outerRadius}function uf(g){return g.startAngle}function rl(g){return g.endAngle}function fc(g){return g&&g.padAngle}function Eg(g,V,pe,xe,Ge,nt,yt){var Ct=g-pe,Ft=V-xe,Vt=(yt?nt:-nt)/Fd(Ct*Ct+Ft*Ft),an=Vt*Ft,Tn=-Vt*Ct,Pn=g+an,xi=V+Tn,Sr=pe+an,pr=xe+Tn,$i=(Pn+Sr)/2,$s=(xi+pr)/2,mo=Sr-Pn,Er=pr-xi,Ri=mo*mo+Er*Er,to=Ge-nt,zr=Pn*pr-Sr*xi,Qo=(Er<0?-1:1)*Fd(gm(0,to*to*Ri-zr*zr)),aa=(zr*Er-mo*Qo)/Ri,Pl=(-zr*mo-Er*Qo)/Ri,rc=(zr*Er+mo*Qo)/Ri,Ks=(-zr*mo+Er*Qo)/Ri,Gs=aa-$i,Fo=Pl-$s,sc=rc-$i,zu=Ks-$s;return Gs*Gs+Fo*Fo>sc*sc+zu*zu&&(aa=rc,Pl=Ks),{cx:aa,cy:Pl,x01:-an,y01:-Tn,x11:aa*(Ge/to-1),y11:Pl*(Ge/to-1)}}function _1(){var g=Tg,V=g1,pe=od(0),xe=null,Ge=uf,nt=rl,yt=fc,Ct=null;function Ft(){var Vt,an,Tn=+g.apply(this,arguments),Pn=+V.apply(this,arguments),xi=Ge.apply(this,arguments)-ad,Sr=nt.apply(this,arguments)-ad,pr=mm(Sr-xi),$i=Sr>xi;if(Ct||(Ct=Vt=Ta()),Pn<Tn&&(an=Pn,Pn=Tn,Tn=an),Pn>Oc)if(pr>Cg-Oc)Ct.moveTo(Pn*$f(xi),Pn*Pd(xi)),Ct.arc(0,0,Pn,xi,Sr,!$i),Tn>Oc&&(Ct.moveTo(Tn*$f(Sr),Tn*Pd(Sr)),Ct.arc(0,0,Tn,Sr,xi,$i));else{var Gs,Fo,$s=xi,mo=Sr,Er=xi,Ri=Sr,to=pr,zr=pr,Qo=yt.apply(this,arguments)/2,aa=Qo>Oc&&(xe?+xe.apply(this,arguments):Fd(Tn*Tn+Pn*Pn)),Pl=Mg(mm(Pn-Tn)/2,+pe.apply(this,arguments)),rc=Pl,Ks=Pl;if(aa>Oc){var sc=j0(aa/Tn*Pd(Qo)),zu=j0(aa/Pn*Pd(Qo));(to-=2*sc)>Oc?(Er+=sc*=$i?1:-1,Ri-=sc):(to=0,Er=Ri=(xi+Sr)/2),(zr-=2*zu)>Oc?($s+=zu*=$i?1:-1,mo-=zu):(zr=0,$s=mo=(xi+Sr)/2)}var Wc=Pn*$f($s),yu=Pn*Pd($s),Fh=Tn*$f(Ri),jc=Tn*Pd(Ri);if(Pl>Oc){var mf,Af=Pn*$f(mo),Rp=Pn*Pd(mo),J0=Tn*$f(Er),Od=Tn*Pd(Er);if(pr<cf&&(mf=function Dp(g,V,pe,xe,Ge,nt,yt,Ct){var Ft=pe-g,Vt=xe-V,an=yt-Ge,Tn=Ct-nt,Pn=Tn*Ft-an*Vt;if(!(Pn*Pn<Oc))return[g+(Pn=(an*(V-nt)-Tn*(g-Ge))/Pn)*Ft,V+Pn*Vt]}(Wc,yu,J0,Od,Af,Rp,Fh,jc))){var Zf=Wc-mf[0],Bs=yu-mf[1],Pg=Af-mf[0],kp=Rp-mf[1],ds=1/Pd(function Sg(g){return g>1?0:g<-1?cf:Math.acos(g)}((Zf*Pg+Bs*kp)/(Fd(Zf*Zf+Bs*Bs)*Fd(Pg*Pg+kp*kp)))/2),da=Fd(mf[0]*mf[0]+mf[1]*mf[1]);rc=Mg(Pl,(Tn-da)/(ds-1)),Ks=Mg(Pl,(Pn-da)/(ds+1))}}zr>Oc?Ks>Oc?(Gs=Eg(J0,Od,Wc,yu,Pn,Ks,$i),Fo=Eg(Af,Rp,Fh,jc,Pn,Ks,$i),Ct.moveTo(Gs.cx+Gs.x01,Gs.cy+Gs.y01),Ks<Pl?Ct.arc(Gs.cx,Gs.cy,Ks,kc(Gs.y01,Gs.x01),kc(Fo.y01,Fo.x01),!$i):(Ct.arc(Gs.cx,Gs.cy,Ks,kc(Gs.y01,Gs.x01),kc(Gs.y11,Gs.x11),!$i),Ct.arc(0,0,Pn,kc(Gs.cy+Gs.y11,Gs.cx+Gs.x11),kc(Fo.cy+Fo.y11,Fo.cx+Fo.x11),!$i),Ct.arc(Fo.cx,Fo.cy,Ks,kc(Fo.y11,Fo.x11),kc(Fo.y01,Fo.x01),!$i))):(Ct.moveTo(Wc,yu),Ct.arc(0,0,Pn,$s,mo,!$i)):Ct.moveTo(Wc,yu),Tn>Oc&&to>Oc?rc>Oc?(Gs=Eg(Fh,jc,Af,Rp,Tn,-rc,$i),Fo=Eg(Wc,yu,J0,Od,Tn,-rc,$i),Ct.lineTo(Gs.cx+Gs.x01,Gs.cy+Gs.y01),rc<Pl?Ct.arc(Gs.cx,Gs.cy,rc,kc(Gs.y01,Gs.x01),kc(Fo.y01,Fo.x01),!$i):(Ct.arc(Gs.cx,Gs.cy,rc,kc(Gs.y01,Gs.x01),kc(Gs.y11,Gs.x11),!$i),Ct.arc(0,0,Tn,kc(Gs.cy+Gs.y11,Gs.cx+Gs.x11),kc(Fo.cy+Fo.y11,Fo.cx+Fo.x11),$i),Ct.arc(Fo.cx,Fo.cy,rc,kc(Fo.y11,Fo.x11),kc(Fo.y01,Fo.x01),!$i))):Ct.arc(0,0,Tn,Ri,Er,$i):Ct.lineTo(Fh,jc)}else Ct.moveTo(0,0);if(Ct.closePath(),Vt)return Ct=null,Vt+""||null}return Ft.centroid=function(){var Vt=(+g.apply(this,arguments)+ +V.apply(this,arguments))/2,an=(+Ge.apply(this,arguments)+ +nt.apply(this,arguments))/2-cf/2;return[$f(an)*Vt,Pd(an)*Vt]},Ft.innerRadius=function(Vt){return arguments.length?(g="function"==typeof Vt?Vt:od(+Vt),Ft):g},Ft.outerRadius=function(Vt){return arguments.length?(V="function"==typeof Vt?Vt:od(+Vt),Ft):V},Ft.cornerRadius=function(Vt){return arguments.length?(pe="function"==typeof Vt?Vt:od(+Vt),Ft):pe},Ft.padRadius=function(Vt){return arguments.length?(xe=null==Vt?null:"function"==typeof Vt?Vt:od(+Vt),Ft):xe},Ft.startAngle=function(Vt){return arguments.length?(Ge="function"==typeof Vt?Vt:od(+Vt),Ft):Ge},Ft.endAngle=function(Vt){return arguments.length?(nt="function"==typeof Vt?Vt:od(+Vt),Ft):nt},Ft.padAngle=function(Vt){return arguments.length?(yt="function"==typeof Vt?Vt:od(+Vt),Ft):yt},Ft.context=function(Vt){return arguments.length?(Ct=Vt??null,Ft):Ct},Ft}var hf,SA,Rd=0,ld=0,kd=0,y1=1e3,_m=0,Nu=0,ym=0,Bp="object"==typeof performance&&performance.now?performance:Date,v1="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(g){setTimeout(g,17)};function b1(){return Nu||(v1(Dg),Nu=Bp.now()+ym)}function Dg(){Nu=0}function Bg(){this._call=this._time=this._next=null}function $0(g,V,pe){var xe=new Bg;return xe.restart(g,V,pe),xe}function X0(){Nu=(_m=Bp.now())+ym,Rd=ld=0;try{!function x1(){b1(),++Rd;for(var V,g=hf;g;)(V=Nu-g._time)>=0&&g._call.call(void 0,V),g=g._next;--Rd}()}finally{Rd=0,function w1(){for(var g,pe,V=hf,xe=1/0;V;)V._call?(xe>V._time&&(xe=V._time),g=V,V=V._next):(pe=V._next,V._next=null,V=g?g._next=pe:hf=pe);SA=g,TA(xe)}(),Nu=0}}function K0(){var g=Bp.now(),V=g-_m;V>y1&&(ym-=V,_m=g)}function TA(g){Rd||(ld&&(ld=clearTimeout(ld)),g-Nu>24?(g<1/0&&(ld=setTimeout(X0,g-Bp.now()-ym)),kd&&(kd=clearInterval(kd))):(kd||(_m=Bp.now(),kd=setInterval(K0,y1)),Rd=1,v1(X0)))}function vm(g,V,pe){var xe=new Bg;return xe.restart(Ge=>{xe.stop(),g(Ge+V)},V=null==V?0:+V,pe),xe}Bg.prototype=$0.prototype={constructor:Bg,restart:function(g,V,pe){if("function"!=typeof g)throw new TypeError("callback is not a function");pe=(null==pe?b1():+pe)+(null==V?0:+V),!this._next&&SA!==this&&(SA?SA._next=this:hf=this,SA=this),this._call=g,this._time=pe,TA()},stop:function(){this._call&&(this._call=null,this._time=1/0,TA())}};var M1=$e("start","end","cancel","interrupt"),Y0=[],Ig=0,W=1,G=2,te=3,ee=4,ke=5,tt=6;function St(g,V,pe,xe,Ge,nt){var yt=g.__transition;if(yt){if(pe in yt)return}else g.__transition={};!function zn(g,V,pe){var Ge,xe=g.__transition;function yt(Vt){var an,Tn,Pn,xi;if(pe.state!==W)return Ft();for(an in xe)if((xi=xe[an]).name===pe.name){if(xi.state===te)return vm(yt);xi.state===ee?(xi.state=tt,xi.timer.stop(),xi.on.call("interrupt",g,g.__data__,xi.index,xi.group),delete xe[an]):+an<V&&(xi.state=tt,xi.timer.stop(),xi.on.call("cancel",g,g.__data__,xi.index,xi.group),delete xe[an])}if(vm(function(){pe.state===te&&(pe.state=ee,pe.timer.restart(Ct,pe.delay,pe.time),Ct(Vt))}),pe.state=G,pe.on.call("start",g,g.__data__,pe.index,pe.group),pe.state===G){for(pe.state=te,Ge=new Array(Pn=pe.tween.length),an=0,Tn=-1;an<Pn;++an)(xi=pe.tween[an].value.call(g,g.__data__,pe.index,pe.group))&&(Ge[++Tn]=xi);Ge.length=Tn+1}}function Ct(Vt){for(var an=Vt<pe.duration?pe.ease.call(null,Vt/pe.duration):(pe.timer.restart(Ft),pe.state=ke,1),Tn=-1,Pn=Ge.length;++Tn<Pn;)Ge[Tn].call(g,an);pe.state===ke&&(pe.on.call("end",g,g.__data__,pe.index,pe.group),Ft())}function Ft(){for(var Vt in pe.state=tt,pe.timer.stop(),delete xe[V],xe)return;delete g.__transition}xe[V]=pe,pe.timer=$0(function nt(Vt){pe.state=W,pe.timer.restart(yt,pe.delay,pe.time),pe.delay<=Vt&&yt(Vt-pe.delay)},0,pe.time)}(g,pe,{name:V,index:xe,group:Ge,on:M1,tween:Y0,time:nt.time,delay:nt.delay,duration:nt.duration,ease:nt.ease,timer:null,state:Ig})}function Kt(g,V){var pe=Dn(g,V);if(pe.state>Ig)throw new Error("too late; already scheduled");return pe}function jt(g,V){var pe=Dn(g,V);if(pe.state>te)throw new Error("too late; already running");return pe}function Dn(g,V){var pe=g.__transition;if(!pe||!(pe=pe[V]))throw new Error("transition not found");return pe}function vs(g,V){var pe,xe;return function(){var Ge=jt(this,g),nt=Ge.tween;if(nt!==pe)for(var yt=0,Ct=(xe=pe=nt).length;yt<Ct;++yt)if(xe[yt].name===V){(xe=xe.slice()).splice(yt,1);break}Ge.tween=xe}}function Qr(g,V,pe){var xe,Ge;if("function"!=typeof pe)throw new Error;return function(){var nt=jt(this,g),yt=nt.tween;if(yt!==xe){Ge=(xe=yt).slice();for(var Ct={name:V,value:pe},Ft=0,Vt=Ge.length;Ft<Vt;++Ft)if(Ge[Ft].name===V){Ge[Ft]=Ct;break}Ft===Vt&&Ge.push(Ct)}nt.tween=Ge}}function No(g,V,pe){var xe=g._id;return g.each(function(){var Ge=jt(this,xe);(Ge.value||(Ge.value={}))[V]=pe.apply(this,arguments)}),function(Ge){return Dn(Ge,xe).value[V]}}function Ps(g,V){var pe;return("number"==typeof V?Fu:V instanceof m?gp:(pe=m(V))?(V=pe,gp):vc)(g,V)}function Ds(g){return function(){this.removeAttribute(g)}}function Ma(g){return function(){this.removeAttributeNS(g.space,g.local)}}function Uo(g,V,pe){var xe,nt,Ge=pe+"";return function(){var yt=this.getAttribute(g);return yt===Ge?null:yt===xe?nt:nt=V(xe=yt,pe)}}function To(g,V,pe){var xe,nt,Ge=pe+"";return function(){var yt=this.getAttributeNS(g.space,g.local);return yt===Ge?null:yt===xe?nt:nt=V(xe=yt,pe)}}function fs(g,V,pe){var xe,Ge,nt;return function(){var yt,Ft,Ct=pe(this);return null==Ct?void this.removeAttribute(g):(yt=this.getAttribute(g))===(Ft=Ct+"")?null:yt===xe&&Ft===Ge?nt:(Ge=Ft,nt=V(xe=yt,Ct))}}function Ca(g,V,pe){var xe,Ge,nt;return function(){var yt,Ft,Ct=pe(this);return null==Ct?void this.removeAttributeNS(g.space,g.local):(yt=this.getAttributeNS(g.space,g.local))===(Ft=Ct+"")?null:yt===xe&&Ft===Ge?nt:(Ge=Ft,nt=V(xe=yt,Ct))}}function Uu(g,V){var pe,xe;function Ge(){var nt=V.apply(this,arguments);return nt!==xe&&(pe=(xe=nt)&&function pc(g,V){return function(pe){this.setAttributeNS(g.space,g.local,V.call(this,pe))}}(g,nt)),pe}return Ge._value=V,Ge}function rh(g,V){var pe,xe;function Ge(){var nt=V.apply(this,arguments);return nt!==xe&&(pe=(xe=nt)&&function Po(g,V){return function(pe){this.setAttribute(g,V.call(this,pe))}}(g,nt)),pe}return Ge._value=V,Ge}function dl(g,V){return function(){Kt(this,g).delay=+V.apply(this,arguments)}}function ic(g,V){return V=+V,function(){Kt(this,g).delay=V}}function _u(g,V){return function(){jt(this,g).duration=+V.apply(this,arguments)}}function Ip(g,V){return V=+V,function(){jt(this,g).duration=V}}var yS=wr.prototype.constructor;function C1(g){return function(){this.style.removeProperty(g)}}var A2=0;function cd(g,V,pe,xe){this._groups=g,this._parents=V,this._name=pe,this._id=xe}function Zb(){return++A2}var Ph=wr.prototype;cd.prototype=function Yb(g){return wr().transition(g)}.prototype={constructor:cd,select:function $b(g){var V=this._name,pe=this._id;"function"!=typeof g&&(g=cr(g));for(var xe=this._groups,Ge=xe.length,nt=new Array(Ge),yt=0;yt<Ge;++yt)for(var an,Tn,Ct=xe[yt],Ft=Ct.length,Vt=nt[yt]=new Array(Ft),Pn=0;Pn<Ft;++Pn)(an=Ct[Pn])&&(Tn=g.call(an,an.__data__,Pn,Ct))&&("__data__"in an&&(Tn.__data__=an.__data__),Vt[Pn]=Tn,St(Vt[Pn],V,pe,Pn,Vt,Dn(an,pe)));return new cd(nt,this._parents,V,pe)},selectAll:function Xb(g){var V=this._name,pe=this._id;"function"!=typeof g&&(g=na(g));for(var xe=this._groups,Ge=xe.length,nt=[],yt=[],Ct=0;Ct<Ge;++Ct)for(var an,Ft=xe[Ct],Vt=Ft.length,Tn=0;Tn<Vt;++Tn)if(an=Ft[Tn]){for(var xi,Pn=g.call(an,an.__data__,Tn,Ft),Sr=Dn(an,pe),pr=0,$i=Pn.length;pr<$i;++pr)(xi=Pn[pr])&&St(xi,V,pe,pr,Pn,Sr);nt.push(Pn),yt.push(an)}return new cd(nt,yt,V,pe)},selectChild:Ph.selectChild,selectChildren:Ph.selectChildren,filter:function Kf(g){"function"!=typeof g&&(g=bl(g));for(var V=this._groups,pe=V.length,xe=new Array(pe),Ge=0;Ge<pe;++Ge)for(var Ft,nt=V[Ge],yt=nt.length,Ct=xe[Ge]=[],Vt=0;Vt<yt;++Vt)(Ft=nt[Vt])&&g.call(Ft,Ft.__data__,Vt,nt)&&Ct.push(Ft);return new cd(xe,this._parents,this._name,this._id)},merge:function pf(g){if(g._id!==this._id)throw new Error;for(var V=this._groups,pe=g._groups,xe=V.length,nt=Math.min(xe,pe.length),yt=new Array(xe),Ct=0;Ct<nt;++Ct)for(var Pn,Ft=V[Ct],Vt=pe[Ct],an=Ft.length,Tn=yt[Ct]=new Array(an),xi=0;xi<an;++xi)(Pn=Ft[xi]||Vt[xi])&&(Tn[xi]=Pn);for(;Ct<xe;++Ct)yt[Ct]=V[Ct];return new cd(yt,this._parents,this._name,this._id)},selection:function vS(){return new yS(this._groups,this._parents)},transition:function fl(){for(var g=this._name,V=this._id,pe=Zb(),xe=this._groups,Ge=xe.length,nt=0;nt<Ge;++nt)for(var Ft,yt=xe[nt],Ct=yt.length,Vt=0;Vt<Ct;++Vt)if(Ft=yt[Vt]){var an=Dn(Ft,V);St(Ft,g,pe,Vt,yt,{time:an.time+an.delay+an.duration,delay:0,duration:an.duration,ease:an.ease})}return new cd(xe,this._parents,g,pe)},call:Ph.call,nodes:Ph.nodes,node:Ph.node,size:Ph.size,empty:Ph.empty,each:Ph.each,on:function Fp(g,V){var pe=this._id;return arguments.length<2?Dn(this.node(),pe).on.on(g):this.each(function Yf(g,V,pe){var xe,Ge,nt=function EA(g){return(g+"").trim().split(/^|\s+/).every(function(V){var pe=V.indexOf(".");return pe>=0&&(V=V.slice(0,pe)),!V||"start"===V})}(V)?Kt:jt;return function(){var yt=nt(this,g),Ct=yt.on;Ct!==xe&&(Ge=(xe=Ct).copy()).on(V,pe),yt.on=Ge}}(pe,g,V))},attr:function ra(g,V){var pe=Fn(g),xe="transform"===pe?So:Ps;return this.attrTween(g,"function"==typeof V?(pe.local?Ca:fs)(pe,xe,No(this,"attr."+g,V)):null==V?(pe.local?Ma:Ds)(pe):(pe.local?To:Uo)(pe,xe,V))},attrTween:function ml(g,V){var pe="attr."+g;if(arguments.length<2)return(pe=this.tween(pe))&&pe._value;if(null==V)return this.tween(pe,null);if("function"!=typeof V)throw new Error;var xe=Fn(g);return this.tween(pe,(xe.local?Uu:rh)(xe,V))},style:function Kb(g,V,pe){var xe="transform"==(g+="")?Pc:Ps;return null==V?this.styleTween(g,function bS(g,V){var pe,xe,Ge;return function(){var nt=Co(this,g),yt=(this.style.removeProperty(g),Co(this,g));return nt===yt?null:nt===pe&&yt===xe?Ge:Ge=V(pe=nt,xe=yt)}}(g,xe)).on("end.style."+g,C1(g)):"function"==typeof V?this.styleTween(g,function l2(g,V,pe){var xe,Ge,nt;return function(){var yt=Co(this,g),Ct=pe(this),Ft=Ct+"";return null==Ct&&(this.style.removeProperty(g),Ft=Ct=Co(this,g)),yt===Ft?null:yt===xe&&Ft===Ge?nt:(Ge=Ft,nt=V(xe=yt,Ct))}}(g,xe,No(this,"style."+g,V))).each(function xS(g,V){var pe,xe,Ge,Ct,nt="style."+V,yt="end."+nt;return function(){var Ft=jt(this,g),Vt=Ft.on,an=null==Ft.value[nt]?Ct||(Ct=C1(V)):void 0;(Vt!==pe||Ge!==an)&&(xe=(pe=Vt).copy()).on(yt,Ge=an),Ft.on=xe}}(this._id,g)):this.styleTween(g,function S1(g,V,pe){var xe,nt,Ge=pe+"";return function(){var yt=Co(this,g);return yt===Ge?null:yt===xe?nt:nt=V(xe=yt,pe)}}(g,xe,V),pe).on("end.style."+g,null)},styleTween:function h2(g,V,pe){var xe="style."+(g+="");if(arguments.length<2)return(xe=this.tween(xe))&&xe._value;if(null==V)return this.tween(xe,null);if("function"!=typeof V)throw new Error;return this.tween(xe,function u2(g,V,pe){var xe,Ge;function nt(){var yt=V.apply(this,arguments);return yt!==Ge&&(xe=(Ge=yt)&&function c2(g,V,pe){return function(xe){this.style.setProperty(g,V.call(this,xe),pe)}}(g,yt,pe)),xe}return nt._value=V,nt}(g,V,pe??""))},text:function T1(g){return this.tween("text","function"==typeof g?function iv(g){return function(){var V=g(this);this.textContent=V??""}}(No(this,"text",g)):function d2(g){return function(){this.textContent=g}}(null==g?"":g+""))},textTween:function f2(g){var V="text";if(arguments.length<1)return(V=this.tween(V))&&V._value;if(null==g)return this.tween(V,null);if("function"!=typeof g)throw new Error;return this.tween(V,function E1(g){var V,pe;function xe(){var Ge=g.apply(this,arguments);return Ge!==pe&&(V=(pe=Ge)&&function rv(g){return function(V){this.textContent=g.call(this,V)}}(Ge)),V}return xe._value=g,xe}(g))},remove:function jb(){return this.on("end.remove",function Z0(g){return function(){var V=this.parentNode;for(var pe in this.__transition)if(+pe!==g)return;V&&V.removeChild(this)}}(this._id))},tween:function us(g,V){var pe=this._id;if(g+="",arguments.length<2){for(var yt,xe=Dn(this.node(),pe).tween,Ge=0,nt=xe.length;Ge<nt;++Ge)if((yt=xe[Ge]).name===g)return yt.value;return null}return this.each((null==V?vs:Qr)(pe,g,V))},delay:function gu(g){var V=this._id;return arguments.length?this.each(("function"==typeof g?dl:ic)(V,g)):Dn(this.node(),V).delay},duration:function Ih(g){var V=this._id;return arguments.length?this.each(("function"==typeof g?_u:Ip)(V,g)):Dn(this.node(),V).duration},ease:function Pp(g){var V=this._id;return arguments.length?this.each(function Xf(g,V){if("function"!=typeof V)throw new Error;return function(){jt(this,g).ease=V}}(V,g)):Dn(this.node(),V).ease},easeVarying:function ff(g){if("function"!=typeof g)throw new Error;return this.each(function df(g,V){return function(){var pe=V.apply(this,arguments);if("function"!=typeof pe)throw new Error;jt(this,g).ease=pe}}(this._id,g))},end:function p2(){var g,V,pe=this,xe=pe._id,Ge=pe.size();return new Promise(function(nt,yt){var Ct={value:yt},Ft={value:function(){0==--Ge&&nt()}};pe.each(function(){var Vt=jt(this,xe),an=Vt.on;an!==g&&((V=(g=an).copy())._.cancel.push(Ct),V._.interrupt.push(Ct),V._.end.push(Ft)),Vt.on=V}),0===Ge&&nt()})},[Symbol.iterator]:Ph[Symbol.iterator]};var sv={time:null,delay:0,duration:250,ease:function m2(g){return((g*=2)<=1?g*g*g:(g-=2)*g*g+2)/2}};function ov(g,V){for(var pe;!(pe=g.__transition)||!(pe=pe[V]);)if(!(g=g.parentNode))throw new Error(`transition ${V} not found`);return pe}wr.prototype.interrupt=function zi(g){return this.each(function(){!function ei(g,V){var xe,Ge,yt,pe=g.__transition,nt=!0;if(pe){for(yt in V=null==V?null:V+"",pe)(xe=pe[yt]).name===V?(Ge=xe.state>G&&xe.state<ke,xe.state=tt,xe.timer.stop(),xe.on.call(Ge?"interrupt":"cancel",g,g.__data__,xe.index,xe.group),delete pe[yt]):nt=!1;nt&&delete g.__transition}}(this,g)})},wr.prototype.transition=function wS(g){var V,pe;g instanceof cd?(V=g._id,g=g._name):(V=Zb(),(pe=sv).time=b1(),g=null==g?null:g+"");for(var xe=this._groups,Ge=xe.length,nt=0;nt<Ge;++nt)for(var Ft,yt=xe[nt],Ct=yt.length,Vt=0;Vt<Ct;++Vt)(Ft=yt[Vt])&&St(Ft,g,V,Vt,yt,pe||ov(Ft,V));return new cd(xe,this._parents,g,V)}},7825:($r,At,Ce)=>{"use strict";Ce.d(At,{JO:()=>_,Rw:()=>w,St:()=>m,ii:()=>q,pz:()=>$,wu:()=>F});var ze=Ce(5835),L=(Ce(2253),Ce(9542)),ye=Ce(8538),Be=Ce(3414),je=Ce(3675),Ze=Ce(6458),Ie=Ce(3834);const He="ROOT::Experimental::";function Oe(){return ce.apply(this,arguments)}function ce(){return(ce=(0,ze.Z)(function*(){return Ce.e(592).then(Ce.bind(Ce,4971))})).apply(this,arguments)}function Y(){return K.apply(this,arguments)}function K(){return(K=(0,ze.Z)(function*(){return Promise.resolve().then(Ce.bind(Ce,9665)).then(D=>{let oe=m("ROOT.TGeoVolumeAssembly");return oe&&(oe.icon="img_geoassembly"),D})})).apply(this,arguments)}const ue="TGraph2D",X="TH2Poly",Z="TEllipse",O="TSpline3",P="TTree",x="TCanvasWebSnapshot",p={lst:[{name:L.clTCanvas,icon:"img_canvas",class:()=>Promise.resolve().then(Ce.bind(Ce,49)).then(D=>D.TCanvasPainter),opt:";grid;gridx;gridy;tick;tickx;ticky;log;logx;logy;logz",expand_item:"fPrimitives"},{name:L.clTPad,icon:"img_canvas",class:()=>Promise.resolve().then(Ce.bind(Ce,3834)).then(D=>D.TPadPainter),opt:";grid;gridx;gridy;tick;tickx;ticky;log;logx;logy;logz",expand_item:"fPrimitives"},{name:"TSlider",icon:"img_canvas",class:()=>Promise.resolve().then(Ce.bind(Ce,3834)).then(D=>D.TPadPainter)},{name:Ie.clTButton,icon:"img_canvas",class:()=>Promise.resolve().then(Ce.bind(Ce,3834)).then(D=>D.TPadPainter)},{name:"TFrame",icon:"img_frame",draw:()=>Promise.resolve().then(Ce.bind(Ce,49)).then(D=>D.drawTFrame)},{name:L.clTPave,icon:"img_pavetext",class:()=>Promise.resolve().then(Ce.bind(Ce,4585)).then(D=>D.TPavePainter)},{name:L.clTPaveText,sameas:L.clTPave},{name:"TPavesText",sameas:L.clTPave},{name:L.clTPaveStats,sameas:L.clTPave},{name:"TPaveLabel",sameas:L.clTPave},{name:"TDiamond",sameas:L.clTPave},{name:L.clTLegend,icon:"img_pavelabel",sameas:L.clTPave},{name:L.clTPaletteAxis,icon:"img_colz",sameas:L.clTPave},{name:L.clTLatex,icon:"img_text",draw:()=>Oe().then(D=>D.drawText),direct:!0},{name:L.clTMathText,sameas:L.clTLatex},{name:L.clTText,sameas:L.clTLatex},{name:/^TH1/,icon:"img_histo1d",class:()=>Promise.resolve().then(Ce.bind(Ce,629)).then(D=>D.TH1Painter),opt:";hist;P;P0;E;E1;E2;E3;E4;E1X0;L;LF2;B;B1;A;TEXT;LEGO;same",ctrl:"l"},{name:L.clTProfile,icon:"img_profile",class:()=>Promise.resolve().then(Ce.bind(Ce,629)).then(D=>D.TH1Painter),opt:";E0;E1;E2;p;AH;hist"},{name:X,icon:"img_histo2d",class:()=>Promise.resolve().then(Ce.bind(Ce,8189)).then(D=>D.TH2Painter),opt:";COL;COL0;COLZ;LCOL;LCOL0;LCOLZ;LEGO;TEXT;same",expand_item:"fBins",theonly:!0},{name:"TProfile2Poly",sameas:X},{name:"TH2PolyBin",icon:"img_histo2d",draw_field:"fPoly",draw_field_opt:"L"},{name:/^TH2/,icon:"img_histo2d",class:()=>Promise.resolve().then(Ce.bind(Ce,8189)).then(D=>D.TH2Painter),dflt:"col",opt:";COL;COLZ;COL0;COL1;COL0Z;COL1Z;COLA;BOX;BOX1;PROJ;PROJX1;PROJX2;PROJX3;PROJY1;PROJY2;PROJY3;SCAT;TEXT;TEXTE;TEXTE0;CANDLE;CANDLE1;CANDLE2;CANDLE3;CANDLE4;CANDLE5;CANDLE6;CANDLEY1;CANDLEY2;CANDLEY3;CANDLEY4;CANDLEY5;CANDLEY6;VIOLIN;VIOLIN1;VIOLIN2;VIOLINY1;VIOLINY2;CONT;CONT1;CONT2;CONT3;CONT4;ARR;SURF;SURF1;SURF2;SURF4;SURF6;E;A;LEGO;LEGO0;LEGO1;LEGO2;LEGO3;LEGO4;same",ctrl:"lego"},{name:L.clTProfile2D,sameas:L.clTH2},{name:/^TH3/,icon:"img_histo3d",class:()=>Promise.resolve().then(Ce.bind(Ce,5906)).then(D=>D.TH3Painter),opt:";SCAT;BOX;BOX2;BOX3;GLBOX1;GLBOX2;GLCOL"},{name:"THStack",icon:"img_histo1d",class:()=>Ce.e(832).then(Ce.bind(Ce,832)).then(D=>D.THStackPainter),expand_item:"fHists",opt:"NOSTACK;HIST;E;PFC;PLC"},{name:L.clTPolyMarker3D,icon:"img_histo3d",draw:()=>Promise.all([Ce.e(592),Ce.e(60)]).then(Ce.bind(Ce,7060)).then(D=>D.drawPolyMarker3D),direct:!0,frame:"3d"},{name:L.clTPolyLine3D,icon:"img_graph",draw:()=>Promise.all([Ce.e(592),Ce.e(60)]).then(Ce.bind(Ce,7060)).then(D=>D.drawPolyLine3D),direct:!0,frame:"3d"},{name:"TGraphStruct"},{name:"TGraphNode"},{name:"TGraphEdge"},{name:L.clTGraphTime,icon:"img_graph",class:()=>Ce.e(137).then(Ce.bind(Ce,8137)).then(D=>D.TGraphTimePainter),opt:"once;repeat;first",theonly:!0},{name:ue,icon:"img_graph",class:()=>Ce.e(351).then(Ce.bind(Ce,7351)).then(D=>D.TGraph2DPainter),opt:";P;PCOL",theonly:!0},{name:"TGraph2DErrors",sameas:ue,opt:";P;PCOL;ERR",theonly:!0},{name:"TGraph2DAsymmErrors",sameas:ue,opt:";P;PCOL;ERR",theonly:!0},{name:L.clTGraphPolargram,icon:"img_graph",class:()=>Ce.e(274).then(Ce.bind(Ce,6274)).then(D=>D.TGraphPolargramPainter),theonly:!0},{name:"TGraphPolar",icon:"img_graph",class:()=>Ce.e(274).then(Ce.bind(Ce,6274)).then(D=>D.TGraphPolarPainter),opt:";F;L;P;PE",theonly:!0},{name:/^TGraph/,icon:"img_graph",class:()=>Ce.e(241).then(Ce.bind(Ce,8241)).then(D=>D.TGraphPainter),opt:";L;P"},{name:"TEfficiency",icon:"img_graph",class:()=>Promise.all([Ce.e(241),Ce.e(592),Ce.e(946)]).then(Ce.bind(Ce,8946)).then(D=>D.TEfficiencyPainter),opt:";AP"},{name:L.clTCutG,sameas:L.clTGraph},{name:/^RooHist/,sameas:L.clTGraph},{name:/^RooCurve/,sameas:L.clTGraph},{name:"RooPlot",icon:"img_canvas",func:function z(D,oe){return le.apply(this,arguments)}},{name:"TRatioPlot",icon:"img_mgraph",class:()=>Promise.all([Ce.e(592),Ce.e(230)]).then(Ce.bind(Ce,4230)).then(D=>D.TRatioPlotPainter),opt:""},{name:L.clTMultiGraph,icon:"img_mgraph",class:()=>Promise.all([Ce.e(241),Ce.e(592),Ce.e(717)]).then(Ce.bind(Ce,3717)).then(D=>D.TMultiGraphPainter),opt:";l;p;3d",expand_item:"fGraphs"},{name:ye.I8,icon:"img_question",draw:()=>Promise.resolve().then(Ce.bind(Ce,4074)).then(D=>D.drawStreamerInfo)},{name:"TWebPainting",icon:"img_graph",class:()=>Ce.e(15).then(Ce.bind(Ce,15)).then(D=>D.TWebPaintingPainter)},{name:x,icon:"img_canvas",draw:()=>Promise.resolve().then(Ce.bind(Ce,49)).then(D=>D.drawTPadSnapshot)},{name:"TPadWebSnapshot",sameas:x},{name:"kind:Text",icon:"img_text",func:Ze.VE},{name:L.clTObjString,icon:"img_text",func:Ze.VE},{name:L.clTF1,icon:"img_tf1",class:()=>Ce.e(592).then(Ce.bind(Ce,9428)).then(D=>D.TF1Painter)},{name:L.clTF2,icon:"img_tf2",draw:()=>Promise.all([Ce.e(592),Ce.e(601)]).then(Ce.bind(Ce,3601)).then(D=>D.drawTF2)},{name:O,icon:"img_tf1",class:()=>Ce.e(484).then(Ce.bind(Ce,1484)).then(D=>D.TSplinePainter)},{name:"TSpline5",sameas:O},{name:Z,icon:"img_graph",draw:()=>Oe().then(D=>D.drawEllipse),direct:!0},{name:"TArc",sameas:Z},{name:"TCrown",sameas:Z},{name:"TPie",icon:"img_graph",draw:()=>Oe().then(D=>D.drawPie),direct:!0},{name:"TPieSlice",icon:"img_graph",dummy:!0},{name:"TExec",icon:"img_graph",dummy:!0},{name:L.clTLine,icon:"img_graph",draw:()=>Oe().then(D=>D.drawTLine)},{name:"TArrow",icon:"img_graph",class:()=>Ce.e(99).then(Ce.bind(Ce,5099)).then(D=>D.TArrowPainter)},{name:L.clTPolyLine,icon:"img_graph",draw:()=>Oe().then(D=>D.drawPolyLine),direct:!0},{name:"TCurlyLine",sameas:L.clTPolyLine},{name:"TCurlyArc",sameas:L.clTPolyLine},{name:"TParallelCoord",icon:"img_graph",dummy:!0},{name:L.clTGaxis,icon:"img_graph",draw:()=>Promise.resolve().then(Ce.bind(Ce,49)).then(D=>D.drawTGaxis)},{name:L.clTBox,icon:"img_graph",draw:()=>Oe().then(D=>D.drawBox),direct:!0},{name:"TWbox",sameas:L.clTBox},{name:"TSliderBox",sameas:L.clTBox},{name:"TMarker",icon:"img_graph",draw:()=>Oe().then(D=>D.drawMarker),direct:!0},{name:"TPolyMarker",icon:"img_graph",draw:()=>Oe().then(D=>D.drawPolyMarker),direct:!0},{name:"TASImage",icon:"img_mgraph",class:()=>Ce.e(647).then(Ce.bind(Ce,5647)).then(D=>D.TASImagePainter),opt:";z"},{name:"TJSImage",icon:"img_mgraph",draw:()=>Oe().then(D=>D.drawJSImage),opt:";scale;center"},{name:L.clTGeoVolume,icon:"img_histo3d",class:()=>Y().then(D=>D.TGeoPainter),get_expand:()=>Y().then(D=>D.expandGeoObject),opt:";more;all;count;projx;projz;wire;no_screen;dflt",ctrl:"dflt"},{name:"TEveGeoShapeExtract",sameas:L.clTGeoVolume,opt:";more;all;count;projx;projz;wire;dflt"},{name:He+"REveGeoShapeExtract",sameas:L.clTGeoVolume,opt:";more;all;count;projx;projz;wire;dflt"},{name:"TGeoOverlap",sameas:L.clTGeoVolume,opt:";more;all;count;projx;projz;wire;dflt",dflt:"dflt",ctrl:"expand"},{name:"TGeoManager",sameas:L.clTGeoVolume,opt:";more;all;count;projx;projz;wire;tracks;no_screen;dflt",dflt:"expand",ctrl:"dflt"},{name:"TGeoVolumeAssembly",sameas:L.clTGeoVolume,opt:";more;all;count"},{name:/^TGeo/,class:()=>Y().then(D=>D.TGeoPainter),get_expand:()=>Y().then(D=>D.expandGeoObject),opt:";more;all;axis;compa;count;projx;projz;wire;no_screen;dflt",dflt:"dflt",ctrl:"expand"},{name:"TAxis3D",icon:"img_graph",draw:()=>Y().then(D=>D.drawAxis3D),direct:!0},{name:"kind:Command",icon:"img_execute",execute:!0},{name:"TFolder",icon:"img_folder",icon2:"img_folderopen",noinspect:!0,get_expand:()=>Promise.resolve().then(Ce.bind(Ce,4074)).then(D=>D.folderHierarchy)},{name:"TTask",icon:"img_task",get_expand:()=>Promise.resolve().then(Ce.bind(Ce,4074)).then(D=>D.taskHierarchy),for_derived:!0},{name:P,icon:"img_tree",get_expand:()=>Promise.resolve().then(Ce.bind(Ce,3414)).then(D=>D.treeHierarchy),draw:()=>Promise.all([Ce.e(241),Ce.e(592),Ce.e(580)]).then(Ce.bind(Ce,2580)).then(D=>D.drawTree),dflt:"expand",opt:"player;testio",shift:"inspect"},{name:"TNtuple",sameas:P},{name:"TNtupleD",sameas:P},{name:Be.clTBranchFunc,icon:"img_leaf_method",draw:()=>Promise.all([Ce.e(241),Ce.e(592),Ce.e(580)]).then(Ce.bind(Ce,2580)).then(D=>D.drawTree),opt:";dump",noinspect:!0},{name:/^TBranch/,icon:"img_branch",draw:()=>Promise.all([Ce.e(241),Ce.e(592),Ce.e(580)]).then(Ce.bind(Ce,2580)).then(D=>D.drawTree),dflt:"expand",opt:";dump",ctrl:"dump",shift:"inspect",ignore_online:!0,always_draw:!0},{name:/^TLeaf/,icon:"img_leaf",noexpand:!0,draw:()=>Promise.all([Ce.e(241),Ce.e(592),Ce.e(580)]).then(Ce.bind(Ce,2580)).then(D=>D.drawTree),opt:";dump",ctrl:"dump",ignore_online:!0,always_draw:!0},{name:L.clTList,icon:"img_list",draw:()=>Promise.resolve().then(Ce.bind(Ce,4074)).then(D=>D.drawList),get_expand:()=>Promise.resolve().then(Ce.bind(Ce,4074)).then(D=>D.listHierarchy),dflt:"expand"},{name:L.clTHashList,sameas:L.clTList},{name:L.clTObjArray,sameas:L.clTList},{name:L.clTClonesArray,sameas:L.clTList},{name:L.clTMap,sameas:L.clTList},{name:L.clTColor,icon:"img_color"},{name:"TFile",icon:"img_file",noinspect:!0},{name:"TMemFile",icon:"img_file",noinspect:!0},{name:L.clTStyle,icon:"img_question",noexpand:!0},{name:"Session",icon:"img_globe"},{name:"kind:TopFolder",icon:"img_base"},{name:"kind:Folder",icon:"img_folder",icon2:"img_folderopen",noinspect:!0},{name:He+"RCanvas",icon:"img_canvas",class:()=>I().then(D=>D.RCanvasPainter),opt:"",expand_item:"fPrimitives"},{name:He+"RCanvasDisplayItem",icon:"img_canvas",draw:()=>I().then(D=>D.drawRPadSnapshot),opt:"",expand_item:"fPrimitives"},{name:He+"RHist1Drawable",icon:"img_histo1d",class:()=>I("rh1").then(D=>D.RH1Painter),opt:""},{name:He+"RHist2Drawable",icon:"img_histo2d",class:()=>I("rh2").then(D=>D.RH2Painter),opt:""},{name:He+"RHist3Drawable",icon:"img_histo3d",class:()=>I("rh3").then(D=>D.RH3Painter),opt:""},{name:He+"RHistDisplayItem",icon:"img_histo1d",draw:()=>I("rh3").then(D=>D.drawHistDisplayItem),opt:""},{name:He+"RText",icon:"img_text",draw:()=>I("more").then(D=>D.drawText),opt:"",direct:"v7",csstype:"text"},{name:He+"RFrameTitle",icon:"img_text",draw:()=>I().then(D=>D.drawRFrameTitle),opt:"",direct:"v7",csstype:"title"},{name:He+"RPaletteDrawable",icon:"img_text",class:()=>I("more").then(D=>D.RPalettePainter),opt:""},{name:He+"RDisplayHistStat",icon:"img_pavetext",class:()=>I("pave").then(D=>D.RHistStatsPainter),opt:""},{name:He+"RLine",icon:"img_graph",draw:()=>I("more").then(D=>D.drawLine),opt:"",direct:"v7",csstype:"line"},{name:He+"RBox",icon:"img_graph",draw:()=>I("more").then(D=>D.drawBox),opt:"",direct:"v7",csstype:"box"},{name:He+"RMarker",icon:"img_graph",draw:()=>I("more").then(D=>D.drawMarker),opt:"",direct:"v7",csstype:"marker"},{name:He+"RPave",icon:"img_pavetext",class:()=>I("pave").then(D=>D.RPavePainter),opt:""},{name:He+"RLegend",icon:"img_graph",class:()=>I("pave").then(D=>D.RLegendPainter),opt:""},{name:He+"RPaveText",icon:"img_pavetext",class:()=>I("pave").then(D=>D.RPaveTextPainter),opt:""},{name:He+"RFrame",icon:"img_frame",draw:()=>I().then(D=>D.drawRFrame),opt:""},{name:He+"RFont",icon:"img_text",draw:()=>I().then(D=>D.drawRFont),opt:"",direct:"v7",csstype:"font"},{name:He+"RAxisDrawable",icon:"img_frame",draw:()=>I().then(D=>D.drawRAxis),opt:""}],cache:{}};function w(D){return p.lst.push(D),D}function m(D,oe){if(!(0,L.isStr)(D))return null;""===oe&&(oe=null);let _e=null;if(null===oe&&D in p.cache)return p.cache[D];let Ee=0==D.indexOf("ROOT.")?D.slice(5):"kind:"+D,Ve=0;for(let Qe=0;Qe<p.lst.length;++Qe){let et=p.lst[Qe];if((0,L.isStr)(et.name)){if(et.name!=Ee)continue}else if(!Ee.match(et.name))continue;if(et.sameas){let Tt=m("ROOT."+et.sameas,oe);if(Tt){for(let Bt in Tt)void 0===et[Bt]&&(et[Bt]=Tt[Bt]);delete et.sameas}return et}if(null==oe)return D in p.cache||(p.cache[D]=et),et;if((0,L.isStr)(oe)){if(_e||(_e=et),"::expand"==oe){if("expand"in et||"expand_item"in et)return et}else if("opt"in et){let Tt=et.opt.split(";");for(let Bt=0;Bt<Tt.length;++Bt)Tt[Bt]=Tt[Bt].toLowerCase();if(Tt.indexOf(oe.toLowerCase())>=0)return et}}else if(oe===Ve)return et;++Ve}return _e}function _(D){return(0,L.isStr)(D)&&(D=m(D)),!!(0,L.isObject)(D)&&!!(D.func||D.class||D.draw||D.draw_field)}function F(D,oe){let _e={opts:null,inspect:!1,expand:!1,draw:!1,handle:null};if(!(0,L.isStr)(D))return _e;let Ee=!1,Ve=!1,Qe=!1;(0,L.isStr)(oe)||(oe="");for(let et=0;et<1e3;++et){let Tt=m(D,et);if(!(Tt&&(_e.handle||(_e.handle=Tt),Tt.noinspect&&(Ve=!0),(Tt.expand||Tt.get_expand||Tt.expand_item||Tt.can_expand)&&(Qe=!0),Tt.func||Tt.class||Tt.draw)))break;if(Ee=!0,!("opt"in Tt))continue;let Bt=Tt.opt.split(";");for(let ve=0;ve<Bt.length;++ve)Bt[ve]=Bt[ve].toLowerCase(),!(oe.indexOf("nosame")>=0&&0==Bt[ve].indexOf("same"))&&(null===_e.opts&&(_e.opts=[]),_e.opts.indexOf(Bt[ve])<0&&_e.opts.push(Bt[ve]));if(Tt.theonly)break}return oe.indexOf("noinspect")>=0&&(Ve=!0),Ee&&null===_e.opts&&(_e.opts=[""]),!Ee&&0==D.indexOf("ROOT.")&&!Ve&&(_e.opts=[]),!Ve&&_e.opts&&_e.opts.push("inspect"),_e.inspect=!Ve,_e.expand=Qe,_e.draw=!!_e.opts,_e}function q(D,oe,_e){return T.apply(this,arguments)}function T(){return(T=(0,ze.Z)(function*(D,oe,_e){if(!(0,L.isObject)(oe))return Promise.reject(Error("not an object in draw call"));if("inspect"==_e)return Promise.resolve().then(Ce.bind(Ce,4074)).then(Tt=>Tt.drawInspector(D,oe));let Ee,Ve,et;if("_typename"in oe)Ve="type "+oe._typename,Ee=m("ROOT."+oe._typename,_e);else{if(!("_kind"in oe))return Promise.resolve().then(Ce.bind(Ce,4074)).then(Tt=>Tt.drawInspector(D,oe));Ve="kind "+oe._kind,Ee=m(oe._kind,_e)}if(!Ee)return Promise.reject(Error(`Object of ${Ve} cannot be shown with draw`));if(Ee.dummy)return null;if(Ee.draw_field&&oe[Ee.draw_field])return q(D,oe[Ee.draw_field],_e||Ee.draw_field_opt);if(!_(Ee)){if(_e&&_e.indexOf("same")>=0){let Tt=(0,Ze.SO)(D);if((0,L.isFunc)(Tt?.performDrop))return Tt.performDrop(oe,"",null,_e)}return Promise.reject(Error(`Function not specified to draw object ${Ve}`))}function Qe(){let Tt,Bt;return"v7"==Ee.direct?Tt=Ce.e(56).then(Ce.bind(Ce,9056)).then(ve=>(Bt=new ve.RObjectPainter(D,oe,_e,Ee.csstype),Bt.redraw=Ee.func,ve.ensureRCanvas(Bt,Ee.frame||!1))).then(()=>Bt.redraw()):Ee.direct?(Bt=new Ze.tK(D,oe,_e),Bt.redraw=Ee.func,Tt=Promise.resolve().then(Ce.bind(Ce,49)).then(ve=>ve.ensureTCanvas(Bt,Ee.frame||!1)).then(()=>Bt.redraw())):Tt=(0,L.getPromise)(Ee.func(D,oe,_e)),Tt.then(ve=>{if(Bt||(Bt=ve),!Bt)throw Error(`Fail to draw object ${Ve}`);return(0,L.isObject)(Bt)&&!Bt.options&&(Bt.options={original:_e||""}),Bt})}if((0,L.isFunc)(Ee.func))return Qe();if((0,L.isFunc)(Ee.class))et=Ee.class().then(Tt=>{Ee.func=Tt.draw});else if((0,L.isFunc)(Ee.draw))et=Ee.draw().then(Tt=>{Ee.func=Tt});else{if(!Ee.func||!(0,L.isStr)(Ee.func))return Promise.reject(Error(`Draw function or class not specified to draw ${Ve}`));if(!Ee.prereq&&!Ee.script)return Promise.reject(Error(`Prerequicities to load ${Ee.func} are not specified`));et=(L.internals.ignore_v6?Promise.resolve(!0):(0,L._ensureJSROOT)().then(Bt=>(Ee.prereq?Bt.require(Ee.prereq):Promise.resolve(!0)).then(()=>{if(Ee.script)return(0,L.loadScript)(Ee.script)}).then(()=>Bt._complete_loading()))).then(()=>{let Bt=(0,L.findFunction)(Ee.func);if(!(0,L.isFunc)(Bt))return Promise.reject(Error(`Fail to find function ${Ee.func} after loading ${Ee.prereq||Ee.script}`));Ee.func=Bt})}return et.then(()=>Qe())})).apply(this,arguments)}function $(D,oe,_e){return J.apply(this,arguments)}function J(){return(J=(0,ze.Z)(function*(D,oe,_e){if(!(0,L.isObject)(oe))return Promise.reject(Error("not an object in redraw"));let Ve,et,Ee=(0,Ze.FG)(D),Qe=null;if(oe._typename&&(Ve=m("ROOT."+oe._typename)),Ve?.draw_field&&oe[Ve.draw_field]&&(oe=oe[Ve.draw_field]),Ee)if(Ee.matchObjectType(oe._typename))et=Ee.redrawObject(oe,_e),et&&(Qe=Ee);else for(let Tt=0;Tt<Ee.painters.length;++Tt){let Bt=Ee.painters[Tt];if(Bt.matchObjectType(oe._typename)&&(et=Bt.redrawObject(oe,_e),et)){Qe=Bt;break}}else{let Tt=new je.be(D).getTopPainter();(0,L.isFunc)(Tt?.redrawObject)&&(et=Tt.redrawObject(oe,_e),et&&(Qe=Tt))}return Qe?(0,L.getPromise)(et).then(()=>Qe):((0,Ze.Eq)(D),q(D,oe,_e))})).apply(this,arguments)}function fe(D){D.prototype.drawObject=q,D.prototype.getObjectDrawSettings=F}function I(D){return U.apply(this,arguments)}function U(){return(U=(0,ze.Z)(function*(D){return Ce.e(56).then(Ce.bind(Ce,9056)).then(oe=>{switch(fe(oe.RPadPainter),D){case"more":return Promise.all([Ce.e(56),Ce.e(260)]).then(Ce.bind(Ce,260));case"pave":return Promise.all([Ce.e(56),Ce.e(625)]).then(Ce.bind(Ce,3625));case"rh1":return Promise.all([Ce.e(56),Ce.e(172),Ce.e(61)]).then(Ce.bind(Ce,6061));case"rh2":return Promise.all([Ce.e(56),Ce.e(172),Ce.e(476)]).then(Ce.bind(Ce,6476));case"rh3":return Promise.all([Ce.e(56),Ce.e(172),Ce.e(476),Ce.e(61),Ce.e(579)]).then(Ce.bind(Ce,9579))}return oe})})).apply(this,arguments)}function le(){return(le=(0,ze.Z)(function*(D,oe){return q(D,oe._hist,"hist").then(_e=>{let Ee=[];for(let Ve=0;Ve<oe._items.arr.length;++Ve)Ee.push(q(D,oe._items.arr[Ve],oe._items.opt[Ve]));return Promise.all(Ee).then(()=>_e)})})).apply(this,arguments)}L.internals.addDrawFunc=w,fe(Ie.TPadPainter),L.internals.addStreamerInfosForPainter=function ie(D){function oe(_e,Ee){if(!_e.fElements||Ee>10)return null;for(let Ve=0;Ve<_e.fElements.arr.length;++Ve){let Qe=_e.fElements.arr[Ve];if("BASE"!==Qe.fTypeName)continue;let et=m("ROOT."+Qe.fName);if(et&&!et.for_derived&&(et=null),null===et)for(let Tt=0;Tt<D.arr.length;++Tt)if(D.arr[Tt].fName===Qe.fName){et=oe(D.arr[Tt],Ee+1);break}if(et?.for_derived)return et}return null}D&&D.arr.forEach(_e=>{if(null!==m("ROOT."+_e.fName))return;let Ee=oe(_e,0);if(Ee){let Ve=Object.assign({},Ee);Ve.name=_e.fName,w(Ve)}})}},9665:($r,At,Ce)=>{"use strict";Ce.r(At),Ce.d(At,{ClonedNodes:()=>Ae,GeoDrawingControl:()=>Qi,TGeoPainter:()=>tl,build:()=>nu,createGeoPainter:()=>nl,drawAxis3D:()=>Jp,drawDummy3DGeom:()=>Cl,expandGeoObject:()=>Gi,produceRenderOrder:()=>fn});var ze=Ce(5835),M=Ce(9542),L=Ce(9900),ye=Ce(9622),Be=Ce(1968),je=Ce(3038),Ze=Ce(3675),Ie=Ce(6458),He=Ce(4383),Oe=Ce(49);class Z{constructor(N,E,H,me,De,Re){this.x=N,this.y=E,this.z=H,this.nx=me,this.ny=De,this.nz=Re}setnormal(N,E,H){this.nx=N,this.ny=E,this.nz=H}clone(){return new Z(this.x,this.y,this.z,this.nx,this.ny,this.nz)}add(N){return this.x+=N.x,this.y+=N.y,this.z+=N.z,this}subtract(N){return this.x-=N.x,this.y-=N.y,this.z-=N.z,this}cross3(N,E,H){let me=this.x,De=this.y,Re=this.z;return this.x=De*H-Re*E,this.y=Re*N-me*H,this.z=me*E-De*N,this}normalize(){let N=Math.sqrt(this.x**2+this.y**2+this.z**2);return this.x/=N,this.y/=N,this.z/=N,this}dot(N){return this.x*N.x+this.y*N.y+this.z*N.z}diff(N){let De=this.x**2+this.y**2+this.z**2;return((this.x-N.x)**2+(this.y-N.y)**2+(this.z-N.z)**2)/(De>0?De:1e-10)}interpolate(N,E){let H=1-E;return new Z(this.x*H+N.x*E,this.y*H+N.y*E,this.z*H+N.z*E,this.nx*H+N.nx*E,this.ny*H+N.ny*E,this.nz*H+N.nz*E)}applyMatrix4(N){let E=this.x,H=this.y,me=this.z,De=N.elements;return this.x=De[0]*E+De[4]*H+De[8]*me+De[12],this.y=De[1]*E+De[5]*H+De[9]*me+De[13],this.z=De[2]*E+De[6]*H+De[10]*me+De[14],E=this.nx,H=this.ny,me=this.nz,this.nx=De[0]*E+De[4]*H+De[8]*me,this.ny=De[1]*E+De[5]*H+De[9]*me,this.nz=De[2]*E+De[6]*H+De[10]*me,this}}class O{constructor(N,E,H){this.vertices=N||[],this.nsign=1,E?this.copyProperties(E,H):this.vertices.length>0&&this.calculateProperties()}copyProperties(N,E){return this.normal=N.normal,this.w=N.w,this.nsign=N.nsign,E&&void 0!==N.id&&(this.id=N.id,this.parent=N),this}calculateProperties(N){if(this.normal&&!N)return;let E=this.vertices[0],H=this.vertices[1],me=this.vertices[2];return this.nsign=1,this.normal=new Z(H.x-E.x,H.y-E.y,H.z-E.z,0,0,0).cross3(me.x-E.x,me.y-E.y,me.z-E.z).normalize(),this.w=this.normal.dot(E),this}clone(){let N=this.vertices.length,E=[];for(let H=0;H<N;++H)E.push(this.vertices[H].clone());return new O(E,this)}flip(){return this.nsign*=-1,this.vertices.reverse(),this}classifyVertex(N){let E=this.nsign*(this.normal.dot(N)-this.w);return E<-1e-5?2:E>1e-5?1:0}classifySide(N){let E=0,H=0,me=N.vertices.length;for(let De=0;De<me;++De){let Re=this.classifyVertex(N.vertices[De]);1===Re?++E:2===Re&&++H}return E>0&&0===H?1:0===E&&H>0?2:0===E&&0===H?0:3}splitPolygon(N,E,H,me,De){let Re=this.classifySide(N);if(0===Re)(this.nsign*N.nsign*this.normal.dot(N.normal)>0?E:H).push(N);else if(1===Re)me.push(N);else if(2===Re)De.push(N);else{let Ht,hn,gn,mn,An,fi,ti,_i,Ue=N.vertices.length,Xe=this.normal.x,pt=this.normal.y,vt=this.normal.z,Mn=[],Nr=[];for(Ht=0;Ht<Ue;++Ht)hn=(Ht+1)%Ue,An=N.vertices[Ht],fi=N.vertices[hn],gn=this.classifyVertex(An),mn=this.classifyVertex(fi),2!=gn&&Mn.push(An),1!=gn&&Nr.push(An),3==(gn|mn)&&(ti=(this.w-(Xe*An.x+pt*An.y+vt*An.z))/(Xe*(fi.x-An.x)+pt*(fi.y-An.y)+vt*(fi.z-An.z)),_i=An.interpolate(fi,ti),Mn.push(_i),Nr.push(_i));Mn.length>=3&&me.push(new O(Mn,N,!0)),Nr.length>=3&&De.push(new O(Nr,N,!0))}}}class P{constructor(N,E){if(this.polygons=[],this.front=this.back=void 0,!N)return;this.divider=N[0].clone();let H=N.length,me=[],De=[];for(let Re=0;Re<H;++Re)void 0!==E&&(N[Re].id=E++,delete N[Re].parent),0==Re?this.polygons.push(N[0]):this.divider.splitPolygon(N[Re],this.polygons,this.polygons,me,De);void 0!==E&&(this.maxnodeid=E),me.length>0&&(this.front=new P(me)),De.length>0&&(this.back=new P(De))}build(N){let E=N.length,H=0,me=[],De=[];this.divider||(this.divider=N[0].clone(),this.polygons.push(N[0]),H=1);for(let Re=H;Re<E;++Re)this.divider.splitPolygon(N[Re],this.polygons,this.polygons,me,De);me.length>0&&(this.front||(this.front=new P),this.front.build(me)),De.length>0&&(this.back||(this.back=new P),this.back.build(De))}collectPolygons(N){void 0===N&&(N=[]);let E=this.polygons.length;for(let H=0;H<E;++H)N.push(this.polygons[H]);return this.front?.collectPolygons(N),this.back?.collectPolygons(N),N}numPolygons(){return this.polygons.length+(this.front?.numPolygons()||0)+(this.back?.numPolygons()||0)}clone(){let N=new P;return N.divider=this.divider?.clone(),N.polygons=this.polygons.map(E=>E.clone()),N.front=this.front?.clone(),N.back=this.back?.clone(),N}invert(){let N=this.polygons.length;for(let H=0;H<N;++H)this.polygons[H].flip();this.divider.flip(),this.front&&this.front.invert(),this.back&&this.back.invert();let E=this.front;return this.front=this.back,this.back=E,this}clipPolygons(N){if(!this.divider)return N.slice();let E=N.length,H=[],me=[];for(let De=0;De<E;++De)this.divider.splitPolygon(N[De],H,me,H,me);return this.front&&(H=this.front.clipPolygons(H)),me=this.back?this.back.clipPolygons(me):[],H.concat(me)}clipTo(N){this.polygons=N.clipPolygons(this.polygons),this.front&&this.front.clipTo(N),this.back&&this.back.clipTo(N)}}function x(we){let N,E,H=we.length,me=0;for(N=0;N<H;++N)me+=9*(we[N].vertices.length-2);let Xe,De=new Float32Array(me),Re=new Float32Array(me),Ue=0;function pt(Ht){De[Ue]=Ht.x,De[Ue+1]=Ht.y,De[Ue+2]=Ht.z,Re[Ue]=Xe.nsign*Ht.nx,Re[Ue+1]=Xe.nsign*Ht.ny,Re[Ue+2]=Xe.nsign*Ht.nz,Ue+=3}for(N=0;N<H;++N)for(Xe=we[N],E=2;E<Xe.vertices.length;++E)pt(Xe.vertices[0]),pt(Xe.vertices[E-1]),pt(Xe.vertices[E]);let vt=new L.u9r;return vt.setAttribute("position",new L.TlE(De,3)),vt.setAttribute("normal",new L.TlE(Re,3)),vt}class p{constructor(N,E,H,me){if(!(N instanceof L.Kj0)){if(N instanceof P)return this.tree=N,this.matrix=null,this;if(N instanceof L.u9r){let An,fi,ti,_i,hn=N.getAttribute("position").array,gn=N.getAttribute("normal").array,mn=[];for(let Mn=0;Mn<hn.length;Mn+=9)An=new O,fi=new Z(hn[Mn],hn[Mn+1],hn[Mn+2],gn[Mn],gn[Mn+1],gn[Mn+2]),E&&fi.applyMatrix4(E),ti=new Z(hn[Mn+3],hn[Mn+4],hn[Mn+5],gn[Mn+3],gn[Mn+4],gn[Mn+5]),E&&ti.applyMatrix4(E),_i=new Z(hn[Mn+6],hn[Mn+7],hn[Mn+8],gn[Mn+6],gn[Mn+7],gn[Mn+8]),E&&_i.applyMatrix4(E),me?An.vertices.push(fi,_i,ti):An.vertices.push(fi,ti,_i),An.calculateProperties(!0),mn.push(An);return this.tree=new P(mn,H),void 0!==H&&(this.maxid=this.tree.maxnodeid),this}if(N.polygons&&N.polygons[0]instanceof O){let hn=N.polygons;for(let gn=0;gn<hn.length;++gn){let mn=hn[gn];if(E){let An=[];for(let fi=0;fi<mn.vertices.length;++fi)An.push(mn.vertices[fi].clone().applyMatrix4(E));mn.vertices=An}mn.calculateProperties(E)}return this.tree=new P(hn,H),void 0!==H&&(this.maxid=this.tree.maxnodeid),this}throw Error("ThreeBSP: Given geometry is unsupported")}N.updateMatrix(),E=this.matrix=N.matrix.clone();let Ue,Xe,pt,vt,Ht,De=[],Re=(N=N.geometry).faces.length;for(let hn=0;hn<Re;++hn)Ue=N.faces[hn],vt=Ue.normal,Xe=new O,Ht=Ue.vertexNormals&&3==Ue.vertexNormals.length,pt=N.vertices[Ue.a],Ht&&(vt=Ue.vertexNormals[0]),pt=new Z(pt.x,pt.y,pt.z,vt.x,vt.y,vt.z),E&&pt.applyMatrix4(E),Xe.vertices.push(pt),pt=N.vertices[Ue.b],Ht&&(vt=Ue.vertexNormals[1]),pt=new Z(pt.x,pt.y,pt.z,vt.x,vt.y,vt.z),E&&pt.applyMatrix4(E),Xe.vertices.push(pt),pt=N.vertices[Ue.c],Ht&&(vt=Ue.vertexNormals[2]),pt=new Z(pt.x,pt.y,pt.z,vt.x,vt.y,vt.z),E&&pt.applyMatrix4(E),Xe.vertices.push(pt),Xe.calculateProperties(!0),De.push(Xe);this.tree=new P(De,H),void 0!==H&&(this.maxid=this.tree.maxnodeid)}subtract(N){let E=this.tree.clone(),H=N.tree.clone();return E.invert(),E.clipTo(H),H.clipTo(E),H.invert(),H.clipTo(E),H.invert(),E.build(H.collectPolygons()),E.invert(),E=new p(E),E.matrix=this.matrix,E}union(N){let E=this.tree.clone(),H=N.tree.clone();return E.clipTo(H),H.clipTo(E),H.invert(),H.clipTo(E),H.invert(),E.build(H.collectPolygons()),E=new p(E),E.matrix=this.matrix,E}intersect(N){let E=this.tree.clone(),H=N.tree.clone();return E.invert(),H.clipTo(E),H.invert(),E.clipTo(H),H.clipTo(E),E.build(H.collectPolygons()),E.invert(),E=new p(E),E.matrix=this.matrix,E}tryToCompress(N){if(void 0===this.maxid)return;let H,me,Re,Xe,pt,vt,Ht,hn,E=[],De=0,Ue=N.length;for(Re=0;Re<Ue;++Re)Xe=N[Re],void 0!==Xe.id&&(void 0===E[Xe.id]&&(E[Xe.id]=[]),E[Xe.id].push(Xe));for(Re=0;Re<E.length;++Re)if(H=E[Re],void 0!==H)for(Ue=H.length,me=Ue>1;me;)for(me=!1,Ht=0;Ht<Ue-1;++Ht)if(pt=H[Ht],pt?.parent)for(hn=Ht+1;hn<Ue;++hn)if(vt=H[hn],vt&&pt.parent===vt.parent&&pt.nsign===vt.nsign){pt.nsign!==pt.parent.nsign&&pt.parent.flip(),De++,H[Ht]=pt.parent,H[hn]=null,pt.parent.vertices.length<3&&console.log("something wrong with parent"),me=!0;break}if(De>0)for(N.splice(0,N.length),Re=0;Re<E.length;++Re)if(H=E[Re],void 0!==H)for(Ht=0,Ue=H.length;Ht<Ue;++Ht)H[Ht]&&N.push(H[Ht])}direct_subtract(N){let E=this.tree,H=N.tree;return E.invert(),E.clipTo(H),H.clipTo(E),H.invert(),H.clipTo(E),H.invert(),E.build(H.collectPolygons()),E.invert(),this}direct_union(N){let E=this.tree,H=N.tree;return E.clipTo(H),H.clipTo(E),H.invert(),H.clipTo(E),H.invert(),E.build(H.collectPolygons()),this}direct_intersect(N){let E=this.tree,H=N.tree;return E.invert(),H.clipTo(E),H.invert(),E.clipTo(H),H.clipTo(E),E.build(H.collectPolygons()),E.invert(),this}cut_from_plane(N){let E=this.tree,H=N.tree;return E.invert(),H.clipTo(E),this}scale(N,E,H){let me=this.tree.collectPolygons();for(let De=0;De<me.length;++De){let Re=me[De];for(let Ue=0;Ue<Re.vertices.length;++Ue){let Xe=Re.vertices[Ue];Xe.x*=N,Xe.y*=E,Xe.z*=H}Re.calculateProperties(!0)}}toPolygons(){let N=this.tree.collectPolygons();this.tryToCompress(N);for(let E=0;E<N.length;++E)delete N[E].id,delete N[E].parent;return N}toBufferGeometry(){return x(this.toPolygons())}toMesh(N){let E=this.toBufferGeometry(),H=new L.Kj0(E,N);return this.matrix&&(H.position.setFromMatrixPosition(this.matrix),H.rotation.setFromRotationMatrix(this.matrix)),H}}let m={GradPerSegm:6,CompressComp:!0};function _(we,N){if(void 0===N)return m[we];m[we]=N}const F=0,R=1,T={kVisOverride:(0,M.BIT)(0),kVisNone:(0,M.BIT)(1),kVisThis:(0,M.BIT)(2),kVisDaughters:(0,M.BIT)(3),kVisOneLevel:(0,M.BIT)(4),kVisStreamed:(0,M.BIT)(5),kVisTouched:(0,M.BIT)(6),kVisOnScreen:(0,M.BIT)(7),kVisContainers:(0,M.BIT)(12),kVisOnly:(0,M.BIT)(13),kVisBranch:(0,M.BIT)(14),kVisRaytrace:(0,M.BIT)(15)},$="TGeoBBox",J="TGeoArb8",ie="TGeoCone",Me="TGeoConeSeg",de="TGeoTube",fe="TGeoTubeSeg",I="TGeoCtub",U="TGeoTrd1",z="TGeoTrd2",le="TGeoPara",D="TGeoParaboloid",oe="TGeoPcon",_e="TGeoPgon",Ee="TGeoShapeAssembly",Ve="TGeoSphere",Qe="TGeoTorus",et="TGeoXtru",Tt="TGeoTrap",Bt="TGeoGtra",ve="TGeoEltu",Je="TGeoHype",ct="TGeoCompositeShape",We="TGeoHalfSpace",Ke="TGeoScaledShape";function ft(we,N){let E=we.fGeoAtt;return void 0!==E&&0!=(E&N)}function zt(we,N,E){void 0!==we.fGeoAtt&&(we.fGeoAtt=E?we.fGeoAtt|N:we.fGeoAtt&~N)}function Zt(we,N){void 0!==we.fGeoAtt&&(we.fGeoAtt=we.fGeoAtt^16777215&N)}function Mt(we,N){if(void 0===N&&(N=!0),zt(we,T.kVisThis,!N),we.fNodes)for(let E=0;E<we.fNodes.arr.length;++E)zt(we.fNodes.arr[E].fVolume,T.kVisThis,!N)}const Ot={};function sn(we){void 0===Ot[we]&&(Ot[we]=!0,console.warn(we))}function wn(we){return(0,M.isObject)(we)?"fShape"in we&&"fTrans"in we?R:F:-1}function Ln(we){return we?we._typename!==ct?1:Ln(we.fNode.fLeft)+Ln(we.fNode.fRight):0}function En(we){return we?.fName?we.fName+(we.$geo_suffix||""):""}function $n(we,N){if(we){if(we.$geo_checked)return;we.$geo_checked=!0}let E=[],H=[];for(let me=0;me<N.length;++me){let De=N[me];if(De?.fName){if(!De.$geo_suffix){let Re=E.indexOf(De.fName);if(Re>=0){let Ue=H[Re]||1;for(;E.indexOf(De.fName+"#"+Ue)>=0;)++Ue;De.$geo_suffix="#"+Ue,H[Re]=Ue+1}}E.push(En(De))}}}function vn(we,N,E,H,me,De,Re,Ue,Xe){let pt=new L.Pa4(we,N,E),vt=new L.Pa4(H,me,De),Ht=new L.Pa4(Re,Ue,Xe),hn=new L.Pa4,gn=new L.Pa4;return hn.subVectors(Ht,vt),gn.subVectors(pt,vt),hn.cross(gn),hn}class rn{constructor(N){this.nfaces=N,this.indx=0,this.pos=new Float32Array(9*N),this.norm=new Float32Array(9*N)}addFace3(N,E,H,me,De,Re,Ue,Xe,pt){let vt=this.indx,Ht=this.pos;Ht[vt]=N,Ht[vt+1]=E,Ht[vt+2]=H,Ht[vt+3]=me,Ht[vt+4]=De,Ht[vt+5]=Re,Ht[vt+6]=Ue,Ht[vt+7]=Xe,Ht[vt+8]=pt,this.last4=!1,this.indx=vt+9}startPolygon(){}stopPolygon(){}addFace4(N,E,H,me,De,Re,Ue,Xe,pt,vt,Ht,hn,gn){let mn=this.indx,An=this.pos;1!==gn&&(An[mn]=N,An[mn+1]=E,An[mn+2]=H,An[mn+3]=me,An[mn+4]=De,An[mn+5]=Re,An[mn+6]=Ue,An[mn+7]=Xe,An[mn+8]=pt,mn+=9),2!==gn&&(An[mn]=N,An[mn+1]=E,An[mn+2]=H,An[mn+3]=Ue,An[mn+4]=Xe,An[mn+5]=pt,An[mn+6]=vt,An[mn+7]=Ht,An[mn+8]=hn,mn+=9),this.last4=mn!==this.indx+9,this.indx=mn}setNormal4(N,E,H,me,De,Re,Ue,Xe,pt,vt,Ht,hn,gn){if(this.last4&&gn)return console.error("missmatch between addFace4 and setNormal4 calls");let mn=this.indx-(this.last4?18:9),An=this.norm;1!==gn&&(An[mn]=N,An[mn+1]=E,An[mn+2]=H,An[mn+3]=me,An[mn+4]=De,An[mn+5]=Re,An[mn+6]=Ue,An[mn+7]=Xe,An[mn+8]=pt,mn+=9),2!==gn&&(An[mn]=N,An[mn+1]=E,An[mn+2]=H,An[mn+3]=Ue,An[mn+4]=Xe,An[mn+5]=pt,An[mn+6]=vt,An[mn+7]=Ht,An[mn+8]=hn)}recalcZ(N){let E=this.pos,H=this.indx,me=H-(this.last4?18:9);for(;me<H;)E[me+2]=N(E[me],E[me+1],E[me+2]),me+=3}calcNormal(){this.cb||(this.pA=new L.Pa4,this.pB=new L.Pa4,this.pC=new L.Pa4,this.cb=new L.Pa4,this.ab=new L.Pa4),this.pA.fromArray(this.pos,this.indx-9),this.pB.fromArray(this.pos,this.indx-6),this.pC.fromArray(this.pos,this.indx-3),this.cb.subVectors(this.pC,this.pB),this.ab.subVectors(this.pA,this.pB),this.cb.cross(this.ab),this.setNormal(this.cb.x,this.cb.y,this.cb.z)}setNormal(N,E,H){let me=this.indx-9,De=this.norm;De[me]=De[me+3]=De[me+6]=N,De[me+1]=De[me+4]=De[me+7]=E,De[me+2]=De[me+5]=De[me+8]=H,this.last4&&(me-=9,De[me]=De[me+3]=De[me+6]=N,De[me+1]=De[me+4]=De[me+7]=E,De[me+2]=De[me+5]=De[me+8]=H)}setNormal_12_34(N,E,H,me,De,Re,Ue){void 0===Ue&&(Ue=0);let Xe=this.indx-(Ue>0?9:18),pt=this.norm;1!==Ue&&(pt[Xe]=N,pt[Xe+1]=E,pt[Xe+2]=H,pt[Xe+3]=N,pt[Xe+4]=E,pt[Xe+5]=H,pt[Xe+6]=me,pt[Xe+7]=De,pt[Xe+8]=Re,Xe+=9),2!==Ue&&(pt[Xe]=N,pt[Xe+1]=E,pt[Xe+2]=H,pt[Xe+3]=me,pt[Xe+4]=De,pt[Xe+5]=Re,pt[Xe+6]=me,pt[Xe+7]=De,pt[Xe+8]=Re,Xe+=9)}create(){this.nfaces!==this.indx/9&&console.error(`Mismatch with created ${this.nfaces} and filled ${this.indx/9} number of faces`);let N=new L.u9r;return N.setAttribute("position",new L.TlE(this.pos,3)),N.setAttribute("normal",new L.TlE(this.norm,3)),N}}class Gt{constructor(){this.polygons=[]}startPolygon(N){this.multi=1,this.mnormal=N}stopPolygon(){this.multi&&(this.multi=0,console.error("Polygon should be already closed at this moment"))}addFace3(N,E,H,me,De,Re,Ue,Xe,pt){this.addFace4(N,E,H,me,De,Re,Ue,Xe,pt,Ue,Xe,pt,2)}addFace4(N,E,H,me,De,Re,Ue,Xe,pt,vt,Ht,hn,gn){if(void 0===gn&&(gn=0),this.v1=new Z(N,E,H,0,0,0),this.v2=1===gn?null:new Z(me,De,Re,0,0,0),this.v3=new Z(Ue,Xe,pt,0,0,0),this.v4=2===gn?null:new Z(vt,Ht,hn,0,0,0),this.reduce=gn,this.multi){let An;return 2!==gn&&console.error("polygon not supported for not-reduced faces"),1==this.multi++?(An=new O,An.vertices.push(this.mnormal?this.v2:this.v3),this.polygons.push(An)):(An=this.polygons[this.polygons.length-1],(this.mnormal?this.v2:this.v3).diff(this.mnormal?An.vertices[An.vertices.length-1]:An.vertices[0])>1e-12&&console.error("vertex missmatch when building polygon")),void((this.mnormal?this.v3:this.v2).diff(this.mnormal?An.vertices[0]:An.vertices[An.vertices.length-1])<1e-12?this.multi=0:this.mnormal?An.vertices.push(this.v3):An.vertices.unshift(this.v2))}let mn=new O;switch(gn){case 0:mn.vertices.push(this.v1,this.v2,this.v3,this.v4);break;case 1:mn.vertices.push(this.v1,this.v3,this.v4);break;case 2:mn.vertices.push(this.v1,this.v2,this.v3)}this.polygons.push(mn)}setNormal4(N,E,H,me,De,Re,Ue,Xe,pt,vt,Ht,hn){this.v1.setnormal(N,E,H),this.v2&&this.v2.setnormal(me,De,Re),this.v3.setnormal(Ue,Xe,pt),this.v4&&this.v4.setnormal(vt,Ht,hn)}setNormal_12_34(N,E,H,me,De,Re){this.v1.setnormal(N,E,H),this.v2&&this.v2.setnormal(N,E,H),this.v3.setnormal(me,De,Re),this.v4&&this.v4.setnormal(me,De,Re)}calcNormal(){this.cb||(this.pA=new L.Pa4,this.pB=new L.Pa4,this.pC=new L.Pa4,this.cb=new L.Pa4,this.ab=new L.Pa4),this.pA.set(this.v1.x,this.v1.y,this.v1.z),1!==this.reduce?(this.pB.set(this.v2.x,this.v2.y,this.v2.z),this.pC.set(this.v3.x,this.v3.y,this.v3.z)):(this.pB.set(this.v3.x,this.v3.y,this.v3.z),this.pC.set(this.v4.x,this.v4.y,this.v4.z)),this.cb.subVectors(this.pC,this.pB),this.ab.subVectors(this.pA,this.pB),this.cb.cross(this.ab),this.setNormal(this.cb.x,this.cb.y,this.cb.z)}setNormal(N,E,H){this.v1.setnormal(N,E,H),this.v2&&this.v2.setnormal(N,E,H),this.v3.setnormal(N,E,H),this.v4&&this.v4.setnormal(N,E,H)}recalcZ(N){this.v1.z=N(this.v1.x,this.v1.y,this.v1.z),this.v2&&(this.v2.z=N(this.v2.x,this.v2.y,this.v2.z)),this.v3.z=N(this.v3.x,this.v3.y,this.v3.z),this.v4&&(this.v4.z=N(this.v4.x,this.v4.y,this.v4.z))}create(){return{polygons:this.polygons}}}function Qt(we,N){let E=[4,7,6,5,0,3,7,4,4,5,1,0,6,2,1,5,7,3,2,6,1,2,3,0],H=N>0?new Gt:new rn(12);for(let me=0;me<E.length;me+=4){let De=3*E[me],Re=3*E[me+1],Ue=3*E[me+2],Xe=3*E[me+3];H.addFace4(we[De],we[De+1],we[De+2],we[Re],we[Re+1],we[Re+2],we[Ue],we[Ue+1],we[Ue+2],we[Xe],we[Xe+1],we[Xe+2]),0===me?H.setNormal(0,0,1):20===me?H.setNormal(0,0,-1):H.calcNormal()}return H.create()}function Vi(we,N){let E,H;we._typename==ie||we._typename==Me?(E=[we.fRmax2,we.fRmax1],H=[we.fRmin2,we.fRmin1]):(E=[we.fRmax,we.fRmax],H=[we.fRmin,we.fRmin]);let me=H[0]>0||H[1]>0,De=0,Re=360;(we._typename==Me||we._typename==fe||we._typename==I)&&(De=we.fPhi1,Re=we.fPhi2-we.fPhi1);let Ue=Math.max(4,Math.round(Re/m.GradPerSegm)),Xe=Ue*(E[0]<=0||E[1]<=0?1:2);if(me&&(Xe+=Ue*(H[0]<=0||H[1]<=0?1:2)),E[0]>0&&(Xe+=Ue*(H[0]>0?2:1)),E[1]>0&&(Xe+=Ue*(H[1]>0?2:1)),Re<360&&(Xe+=(E[0]>H[0]?2:0)+(E[1]>H[1]?2:0)),N<0)return Xe;let pt=De*Math.PI/180,vt=Re/Ue*Math.PI/180,Ht=new Float32Array(Ue+1),hn=new Float32Array(Ue+1);for(let An=0;An<=Ue;++An)hn[An]=Math.cos(pt+An*vt),Ht[An]=Math.sin(pt+An*vt);let gn=N?new Gt:new rn(Xe);const mn=we._typename!==I?null:(An,fi,ti)=>{let _i=ti<0?we.fNlow:we.fNhigh;return(ti<0?-we.fDz:we.fDz)-(An*_i[0]+fi*_i[1])/_i[2]};for(let An=0;An<2&&(1!==An||me);++An){let fi=0===An?E:H,ti=An,_i=1-An,Mn=1,Nr=0;if(fi[0]!==fi[1]){let Bi=Math.atan2(fi[1]-fi[0],2*we.fDZ);Mn=Math.cos(Bi),Nr=Math.sin(Bi)}1===An&&(Mn*=-1,Nr*=-1);let Ui=fi[0]<=0?2:fi[1]<=0?1:0;for(let Bi=0;Bi<Ue;++Bi)gn.addFace4(fi[0]*hn[Bi+ti],fi[0]*Ht[Bi+ti],we.fDZ,fi[1]*hn[Bi+ti],fi[1]*Ht[Bi+ti],-we.fDZ,fi[1]*hn[Bi+_i],fi[1]*Ht[Bi+_i],-we.fDZ,fi[0]*hn[Bi+_i],fi[0]*Ht[Bi+_i],we.fDZ,Ui),mn&&gn.recalcZ(mn),gn.setNormal_12_34(Mn*hn[Bi+ti],Mn*Ht[Bi+ti],Nr,Mn*hn[Bi+_i],Mn*Ht[Bi+_i],Nr,Ui)}for(let An=0;An<2;++An){if(E[An]<=0)continue;let fi=An,ti=1-An,_i=0==An?1:-1,Mn=H[An]<=0?2:0;2===Mn&&360===Re&&!mn&&gn.startPolygon(0===An);for(let Nr=0;Nr<Ue;++Nr)gn.addFace4(H[An]*hn[Nr+fi],H[An]*Ht[Nr+fi],_i*we.fDZ,E[An]*hn[Nr+fi],E[An]*Ht[Nr+fi],_i*we.fDZ,E[An]*hn[Nr+ti],E[An]*Ht[Nr+ti],_i*we.fDZ,H[An]*hn[Nr+ti],H[An]*Ht[Nr+ti],_i*we.fDZ,Mn),mn?(gn.recalcZ(mn),gn.calcNormal()):gn.setNormal(0,0,_i);gn.stopPolygon()}return Re<360&&(gn.addFace4(H[1]*hn[0],H[1]*Ht[0],-we.fDZ,E[1]*hn[0],E[1]*Ht[0],-we.fDZ,E[0]*hn[0],E[0]*Ht[0],we.fDZ,H[0]*hn[0],H[0]*Ht[0],we.fDZ,E[0]===H[0]?2:H[1]===E[1]?1:0),mn&&gn.recalcZ(mn),gn.calcNormal(),gn.addFace4(H[0]*hn[Ue],H[0]*Ht[Ue],we.fDZ,E[0]*hn[Ue],E[0]*Ht[Ue],we.fDZ,E[1]*hn[Ue],E[1]*Ht[Ue],-we.fDZ,H[1]*hn[Ue],H[1]*Ht[Ue],-we.fDZ,E[0]===H[0]?1:H[1]===E[1]?2:0),mn&&gn.recalcZ(mn),gn.calcNormal()),gn.create()}function ro(we){if(!we)return null;let N,E,H;switch(we._typename){case"TGeoTranslation":N=we.fTranslation;break;case"TGeoRotation":E=we.fRotationMatrix;break;case"TGeoScale":H=we.fScale;break;case"TGeoGenTrans":H=we.fScale;case"TGeoCombiTrans":N=we.fTranslation,we.fRotation&&(E=we.fRotation.fRotationMatrix);break;case"TGeoHMatrix":N=we.fTranslation,E=we.fRotationMatrix,H=we.fScale;break;case"TGeoIdentity":break;default:console.warn(`unsupported matrix ${we._typename}`)}if(!N&&!E&&!H)return null;let me=new L.yGw;return E&&me.set(E[0],E[1],E[2],0,E[3],E[4],E[5],0,E[6],E[7],E[8],0,0,0,0,1),N&&me.setPosition(N[0],N[1],N[2]),H&&me.scale(new L.Pa4(H[0],H[1],H[2])),me}function ws(we,N){let E=null;if(we===R)E=new L.yGw,N.fTrans&&(E.set(N.fTrans[0],N.fTrans[4],N.fTrans[8],0,N.fTrans[1],N.fTrans[5],N.fTrans[9],0,N.fTrans[2],N.fTrans[6],N.fTrans[10],0,0,0,0,1),E.setPosition(N.fTrans[12],N.fTrans[13],N.fTrans[14]));else if(N.fMatrix)E=ro(N.fMatrix);else if("TGeoNodeOffset"==N._typename&&N.fFinder){const H=(0,M.BIT)(14);switch(N.fFinder.fBits&H&&sn("Unsupported reflected pattern "+N.fFinder._typename),N.fFinder._typename){case"TGeoPatternX":case"TGeoPatternY":case"TGeoPatternZ":case"TGeoPatternParaX":case"TGeoPatternParaY":case"TGeoPatternParaZ":let me=N.fFinder.fStart+(N.fIndex+.5)*N.fFinder.fStep;switch(E=new L.yGw,N.fFinder._typename[N.fFinder._typename.length-1]){case"X":E.setPosition(me,0,0);break;case"Y":E.setPosition(0,me,0);break;case"Z":E.setPosition(0,0,me)}break;case"TGeoPatternCylPhi":let De=Math.PI/180*(N.fFinder.fStart+(N.fIndex+.5)*N.fFinder.fStep),Re=Math.cos(De),Ue=Math.sin(De);E=new L.yGw,E.set(Re,-Ue,0,0,Ue,Re,0,0,0,0,1,0,0,0,0,1);break;case"TGeoPatternCylR":E=new L.yGw;break;case"TGeoPatternTrapZ":let Xe=N.fFinder.fStart+(N.fIndex+.5)*N.fFinder.fStep;E=new L.yGw,E.setPosition(N.fFinder.fTxz*Xe,N.fFinder.fTyz*Xe,Xe);break;default:sn(`Unsupported pattern type ${N.fFinder._typename}`)}}return E}function Es(we){if(!we)return 0;if(we instanceof p)return we.tree.numPolygons();if(we.polygons)return we.polygons.length;let N=we.getAttribute("position");return N?.count?Math.round(N.count/3):0}function fo(we,N){if(!we?.fN||!we?.fP)return null;let E=new L.Pa4(we.fP[0],we.fP[1],we.fP[2]),H=new L.Pa4(we.fN[0],we.fN[1],we.fN[2]);H.normalize();let me=1e10;if(N){let Ht=function kl(we){if(!we)return null;let N=null;if(we instanceof p?N=we.tree.collectPolygons():we.polygons&&(N=we.polygons),null!==N){let E=new L.ZzF;for(let H=0;H<N.length;++H){let me=N[H],De=me.vertices.length;for(let Re=0;Re<De;++Re)E.expandByPoint(me.vertices[Re])}return E}return we.boundingBox||we.computeBoundingBox(),we.boundingBox.clone()}(N);Ht&&(me=1e3*Ht.getSize(new L.Pa4).length())}let De=new L.Pa4(-me,-me/2,0),Re=new L.Pa4(0,me,0),Ue=new L.Pa4(me,-me/2,0),Xe=new L.Pa4(0,0,-me),pt=new L.u9r,vt=new Float32Array([De.x,De.y,De.z,Ue.x,Ue.y,Ue.z,Re.x,Re.y,Re.z,De.x,De.y,De.z,Re.x,Re.y,Re.z,Xe.x,Xe.y,Xe.z,Re.x,Re.y,Re.z,Ue.x,Ue.y,Ue.z,Xe.x,Xe.y,Xe.z,Ue.x,Ue.y,Ue.z,De.x,De.y,De.z,Xe.x,Xe.y,Xe.z]);pt.setAttribute("position",new L.TlE(vt,3)),pt.computeVertexNormals(),pt.lookAt(H),pt.computeVertexNormals();for(let Ht=0;Ht<vt.length;Ht+=3)vt[Ht]=vt[Ht]+E.x,vt[Ht+1]=vt[Ht+1]+E.y,vt[Ht+2]=vt[Ht+2]+E.z;return pt}function eo(we){if(!we)return 0;if(we instanceof p)return we.tree.numPolygons();if(we.polygons)return we.polygons.length;let N=we.getAttribute("position");return N?.count?Math.round(N.count/3):0}function _o(we,N){void 0===N&&(N=0);try{switch(we._typename){case $:return function qt(we,N){if(N<0)return 12;let E=we.fDX,H=we.fDY,me=we.fDZ,De=N?new Gt:new rn(12);return De.addFace4(E,H,me,E,-H,me,E,-H,-me,E,H,-me),De.setNormal(1,0,0),De.addFace4(-E,H,-me,-E,-H,-me,-E,-H,me,-E,H,me),De.setNormal(-1,0,0),De.addFace4(-E,H,-me,-E,H,me,E,H,me,E,H,-me),De.setNormal(0,1,0),De.addFace4(-E,-H,me,-E,-H,-me,E,-H,-me,E,-H,me),De.setNormal(0,-1,0),De.addFace4(-E,H,me,-E,-H,me,E,-H,me,E,H,me),De.setNormal(0,0,1),De.addFace4(E,H,-me,E,-H,-me,-E,-H,-me,-E,H,-me),De.setNormal(0,0,-1),De.create()}(we,N);case le:return function _n(we,N){if(N<0)return 12;let E=we.fTxy,H=we.fTxz,me=we.fTyz;return Qt([-we.fZ*H-E*we.fY-we.fX,-we.fY-we.fZ*me,-we.fZ,-we.fZ*H+E*we.fY-we.fX,we.fY-we.fZ*me,-we.fZ,-we.fZ*H+E*we.fY+we.fX,we.fY-we.fZ*me,-we.fZ,-we.fZ*H-E*we.fY+we.fX,-we.fY-we.fZ*me,-we.fZ,we.fZ*H-E*we.fY-we.fX,we.fZ*me-we.fY,we.fZ,we.fZ*H+E*we.fY-we.fX,we.fY+we.fZ*me,we.fZ,we.fZ*H+E*we.fY+we.fX,we.fY+we.fZ*me,we.fZ,we.fZ*H-E*we.fY+we.fX,we.fZ*me-we.fY,we.fZ],N)}(we,N);case U:case z:return function dn(we,N){if(N<0)return 12;let E,H;return we._typename==U?E=H=we.fDY:(E=we.fDy1,H=we.fDy2),Qt([-we.fDx1,E,-we.fDZ,we.fDx1,E,-we.fDZ,we.fDx1,-E,-we.fDZ,-we.fDx1,-E,-we.fDZ,-we.fDx2,H,we.fDZ,we.fDx2,H,we.fDZ,we.fDx2,-H,we.fDZ,-we.fDx2,-H,we.fDZ],N)}(we,N);case J:case Tt:case Bt:return function ci(we,N){if(N<0)return 12;let E=[we.fXY[0][0],we.fXY[0][1],-we.fDZ,we.fXY[1][0],we.fXY[1][1],-we.fDZ,we.fXY[2][0],we.fXY[2][1],-we.fDZ,we.fXY[3][0],we.fXY[3][1],-we.fDZ,we.fXY[4][0],we.fXY[4][1],we.fDZ,we.fXY[5][0],we.fXY[5][1],we.fDZ,we.fXY[6][0],we.fXY[6][1],we.fDZ,we.fXY[7][0],we.fXY[7][1],we.fDZ];const H=[4,7,6,6,5,4,3,7,4,4,0,3,5,1,0,0,4,5,6,2,1,1,5,6,7,3,2,2,6,7,1,2,3,3,0,1];for(let Ue=0;Ue<E.length;Ue+=E.length/2)for(let Xe=Ue;Xe<Ue+E.length/2-3;Xe+=3)for(let pt=Xe+3;pt<Ue+E.length/2;pt+=3)if(E[Xe]===E[pt]&&E[Xe+1]===E[pt+1]&&E[Xe+2]===E[pt+2])for(let vt=0;vt<H.length;++vt)H[vt]===pt/3&&(H[vt]=Xe/3);let me=[],De=0;for(let Ue=0;Ue<H.length;Ue+=3){let Xe=100*H[Ue]+10*H[Ue+1]+H[Ue+2],pt=100*H[Ue+1]+10*H[Ue+2]+H[Ue],vt=100*H[Ue+2]+10*H[Ue]+H[Ue+1];H[Ue]==H[Ue+1]||H[Ue]==H[Ue+2]||H[Ue+1]==H[Ue+2]||me.indexOf(Xe)>=0||me.indexOf(pt)>=0||me.indexOf(vt)>=0?H[Ue]=H[Ue+1]=H[Ue+2]=-1:(me.push(Xe,pt,vt),De++)}let Re=N?new Gt:new rn(De);for(let Ue=0;Ue<H.length;Ue+=6){let Xe=3*H[Ue],pt=3*H[Ue+1],vt=3*H[Ue+2],Ht=3*H[Ue+3],hn=3*H[Ue+4],gn=3*H[Ue+5],mn=null;if(Xe>=0&&Ht>=0&&N)if(0===Ue)mn=new L.Pa4(0,0,1);else if(30===Ue)mn=new L.Pa4(0,0,-1);else{let An=vn(E[Xe],E[Xe+1],E[Xe+2],E[pt],E[pt+1],E[pt+2],E[vt],E[vt+1],E[vt+2]);An.normalize();let fi=vn(E[Ht],E[Ht+1],E[Ht+2],E[hn],E[hn+1],E[hn+2],E[gn],E[gn+1],E[gn+2]);fi.normalize(),An.distanceToSquared(fi)<1e-12&&(mn=An)}null!==mn?(Re.addFace4(E[Xe],E[Xe+1],E[Xe+2],E[pt],E[pt+1],E[pt+2],E[vt],E[vt+1],E[vt+2],E[hn],E[hn+1],E[hn+2]),Re.setNormal(mn.x,mn.y,mn.z)):(Xe>=0&&(Re.addFace3(E[Xe],E[Xe+1],E[Xe+2],E[pt],E[pt+1],E[pt+2],E[vt],E[vt+1],E[vt+2]),Re.calcNormal()),Ht>=0&&(Re.addFace3(E[Ht],E[Ht+1],E[Ht+2],E[hn],E[hn+1],E[hn+2],E[gn],E[gn+1],E[gn+2]),Re.calcNormal()))}return Re.create()}(we,N);case Ve:return function ir(we,N){let E=[we.fRmax,we.fRmin],H=we.fPhi1,me=we.fPhi2-we.fPhi1,De=we.fTheta1,Re=we.fTheta2-we.fTheta1,Ue=we.fNseg,Xe=we.fNz,pt=E[1]<=0;if(N>0){let Ui=(pt?2:4)*Ue*Xe/N;Ui>1&&(Ue=Math.max(4,Math.floor(Ue/Math.sqrt(Ui))),Xe=Math.max(4,Math.floor(Xe/Math.sqrt(Ui))))}let vt=Ue*Xe*2,Ht=2*Ue,hn=2*Ue,gn=360===me?0:Xe*(pt?2:4),mn=1e-10;if(pt&&(hn=Ht=Ue),N<0)return vt*(pt?1:2)+Ht+hn+gn;let An=new Float32Array(Ue+1),fi=new Float32Array(Ue+1),ti=new Float32Array(Xe+1),_i=new Float32Array(Xe+1);for(let Ui=0;Ui<=Xe;++Ui){let Bi=(De+Re/Xe*Ui)*Math.PI/180;ti[Ui]=Math.sin(Bi),_i[Ui]=Math.cos(Bi)}for(let Ui=0;Ui<=Ue;++Ui){let Bi=(H+me/Ue*Ui)*Math.PI/180;An[Ui]=Math.sin(Bi),fi[Ui]=Math.cos(Bi)}Math.abs(ti[0])<=mn&&(vt-=Ue,Ht=0),Math.abs(ti[Xe])<=mn&&(vt-=Ue,hn=0);let Mn=vt*(pt?1:2)+Ht+hn+gn,Nr=N?new Gt:new rn(Mn);for(let Ui=0;Ui<2&&(1!==Ui||!pt);++Ui){let Bi=E[Ui],Ms=0===Ui?1:-1,os=1-Ui,Cs=1-os;for(let Co=0;Co<Xe;++Co){let ua=Co+os,Qs=Co+Cs,Ra=0;Math.abs(ti[ua])<=mn?Ra=1:Math.abs(ti[Qs])<=mn&&(Ra=2);for(let ha=0;ha<Ue;++ha)Nr.addFace4(Bi*ti[ua]*fi[ha],Bi*ti[ua]*An[ha],Bi*_i[ua],Bi*ti[ua]*fi[ha+1],Bi*ti[ua]*An[ha+1],Bi*_i[ua],Bi*ti[Qs]*fi[ha+1],Bi*ti[Qs]*An[ha+1],Bi*_i[Qs],Bi*ti[Qs]*fi[ha],Bi*ti[Qs]*An[ha],Bi*_i[Qs],Ra),Nr.setNormal4(Ms*ti[ua]*fi[ha],Ms*ti[ua]*An[ha],Ms*_i[ua],Ms*ti[ua]*fi[ha+1],Ms*ti[ua]*An[ha+1],Ms*_i[ua],Ms*ti[Qs]*fi[ha+1],Ms*ti[Qs]*An[ha+1],Ms*_i[Qs],Ms*ti[Qs]*fi[ha],Ms*ti[Qs]*An[ha],Ms*_i[Qs],Ra)}}for(let Ui=0;Ui<=Xe;Ui+=Xe)if(Math.abs(ti[Ui])>=mn){let Bi=ti[Ui],Ms=_i[Ui],os=0===Ui?0:1,Cs=1-os;for(let Co=0;Co<Ue;++Co)Nr.addFace4(E[1]*Bi*fi[Co+os],E[1]*Bi*An[Co+os],E[1]*Ms,E[0]*Bi*fi[Co+os],E[0]*Bi*An[Co+os],E[0]*Ms,E[0]*Bi*fi[Co+Cs],E[0]*Bi*An[Co+Cs],E[0]*Ms,E[1]*Bi*fi[Co+Cs],E[1]*Bi*An[Co+Cs],E[1]*Ms,pt?2:0),Nr.calcNormal()}if(me<360)for(let Ui=0;Ui<=Ue;Ui+=Ue){let Bi=An[Ui],Ms=fi[Ui],os=0===Ui?1:0,Cs=1-os;for(let Co=0;Co<Xe;++Co)Nr.addFace4(E[1]*ti[Co+os]*Ms,E[1]*ti[Co+os]*Bi,E[1]*_i[Co+os],E[0]*ti[Co+os]*Ms,E[0]*ti[Co+os]*Bi,E[0]*_i[Co+os],E[0]*ti[Co+Cs]*Ms,E[0]*ti[Co+Cs]*Bi,E[0]*_i[Co+Cs],E[1]*ti[Co+Cs]*Ms,E[1]*ti[Co+Cs]*Bi,E[1]*_i[Co+Cs],pt?2:0),Nr.calcNormal()}return Nr.create()}(we,N);case ie:case Me:case de:case fe:case I:return Vi(we,N);case ve:return function br(we,N){let E=Math.max(4,Math.round(360/m.GradPerSegm));if(N<0)return 4*E;let H=new Float32Array(E+1),me=new Float32Array(E+1);for(let vt=0;vt<=E;++vt){let Ht=vt/E*2*Math.PI;H[vt]=we.fRmin*Math.cos(Ht),me[vt]=we.fRmax*Math.sin(Ht)}let Re,Ue,De=N?new Gt:new rn(4*E),Xe=1,pt=0;for(let vt=0;vt<E;++vt){De.addFace4(H[vt],me[vt],+we.fDZ,H[vt],me[vt],-we.fDZ,H[vt+1],me[vt+1],-we.fDZ,H[vt+1],me[vt+1],we.fDZ),Re=Xe,Ue=pt,Xe=H[vt+1]*we.fRmax/we.fRmin,pt=me[vt+1]*we.fRmin/we.fRmax;let Ht=Math.sqrt(Xe**2+pt**2);Xe/=Ht,pt/=Ht,De.setNormal_12_34(Re,Ue,0,Xe,pt,0)}for(let vt=0;vt<2;++vt){let Ht=0===vt?1:-1,hn=vt,gn=1-vt;for(let mn=0;mn<E;++mn)De.addFace3(0,0,Ht*we.fDZ,H[mn+hn],me[mn+hn],Ht*we.fDZ,H[mn+gn],me[mn+gn],Ht*we.fDZ),De.setNormal(0,0,Ht)}return De.create()}(we,N);case Qe:return function Ur(we,N){let E=we.fR,H=Math.max(6,Math.round(360/m.GradPerSegm)),me=Math.max(8,Math.round(we.fDphi/m.GradPerSegm)),De=(we.fRmin>0?4:2)*H*(me+(360!==we.fDphi?1:0));if(N<0)return De;N>0&&De>N&&(H=Math.floor(H/Math.sqrt(De/N)),me=Math.floor(me/Math.sqrt(De/N)),De=(we.fRmin>0?4:2)*H*(me+(360!==we.fDphi?1:0)));let Re=new Float32Array(H+1),Ue=new Float32Array(H+1),Xe=new Float32Array(me+1),pt=new Float32Array(me+1);for(let Ui=0;Ui<=H;++Ui)Re[Ui]=Math.sin(Ui/H*2*Math.PI),Ue[Ui]=Math.cos(Ui/H*2*Math.PI);for(let Ui=0;Ui<=me;++Ui){let Bi=(we.fPhi1+we.fDphi*Ui/me)/180*Math.PI;Xe[Ui]=Math.sin(Bi),pt[Ui]=Math.cos(Bi)}let vt=N?new Gt:new rn(De),Ht=new L.Pa4,hn=new L.Pa4,gn=new L.Pa4,mn=new L.Pa4,An=new L.Pa4,fi=new L.Pa4,ti=new L.Pa4,_i=new L.Pa4,Mn=new L.Pa4,Nr=new L.Pa4;for(let Ui=0;Ui<2&&!(Ui>0&&we.fRmin<=0);++Ui){let Bi=Ui>0?we.fRmin:we.fRmax,Ms=1-Ui,os=1-Ms,Cs=Ui>0?-1:1;for(let Co=0;Co<me;++Co){let ua=Co+Ms,Qs=Co+os;Mn.x=E*pt[ua],Mn.y=E*Xe[ua],Nr.x=E*pt[Qs],Nr.y=E*Xe[Qs];for(let Ra=0;Ra<H;++Ra)Ht.x=(E+Bi*Ue[Ra])*pt[ua],Ht.y=(E+Bi*Ue[Ra])*Xe[ua],Ht.z=Bi*Re[Ra],hn.x=(E+Bi*Ue[Ra+1])*pt[ua],hn.y=(E+Bi*Ue[Ra+1])*Xe[ua],hn.z=Bi*Re[Ra+1],gn.x=(E+Bi*Ue[Ra+1])*pt[Qs],gn.y=(E+Bi*Ue[Ra+1])*Xe[Qs],gn.z=Bi*Re[Ra+1],mn.x=(E+Bi*Ue[Ra])*pt[Qs],mn.y=(E+Bi*Ue[Ra])*Xe[Qs],mn.z=Bi*Re[Ra],vt.addFace4(Ht.x,Ht.y,Ht.z,hn.x,hn.y,hn.z,gn.x,gn.y,gn.z,mn.x,mn.y,mn.z),An.subVectors(Ht,Mn).normalize(),fi.subVectors(hn,Mn).normalize(),ti.subVectors(gn,Nr).normalize(),_i.subVectors(mn,Nr).normalize(),vt.setNormal4(Cs*An.x,Cs*An.y,Cs*An.z,Cs*fi.x,Cs*fi.y,Cs*fi.z,Cs*ti.x,Cs*ti.y,Cs*ti.z,Cs*_i.x,Cs*_i.y,Cs*_i.z)}}if(360!==we.fDphi)for(let Ui=0;Ui<=me;Ui+=me){let Bi=we.fRmax,Ms=we.fRmin,os=Ui>0?0:1,Cs=1-os,Co=we.fRmin>0?0:1,ua=Ui>0?1:-1;for(let Qs=0;Qs<H;++Qs)vt.addFace4((E+Bi*Ue[Qs+os])*pt[Ui],(E+Bi*Ue[Qs+os])*Xe[Ui],Bi*Re[Qs+os],(E+Ms*Ue[Qs+os])*pt[Ui],(E+Ms*Ue[Qs+os])*Xe[Ui],Ms*Re[Qs+os],(E+Ms*Ue[Qs+Cs])*pt[Ui],(E+Ms*Ue[Qs+Cs])*Xe[Ui],Ms*Re[Qs+Cs],(E+Bi*Ue[Qs+Cs])*pt[Ui],(E+Bi*Ue[Qs+Cs])*Xe[Ui],Bi*Re[Qs+Cs],Co),vt.setNormal(-ua*Xe[Ui],ua*pt[Ui],0)}return vt.create()}(we,N);case oe:case _e:return function Ar(we,N){let me,De,E=we.fPhi1,H=we.fDphi;we._typename==_e?(me=we.fNedges,De=1/Math.cos(Math.PI/180*H/me/2)):(me=Math.max(5,Math.round(H/m.GradPerSegm)),De=1);let Re=new Int16Array(2*we.fNz),Ue=0,Xe=!1;for(let ti=0;ti<we.fNz;++ti)we.fRmin[ti]>0&&(Xe=!0);if(N<0)return(Xe?4:2)*me*(we.fNz-1);let pt=360===H?null:[];for(let ti=0;ti<2;++ti){let _i=0===ti?"fRmax":"fRmin";for(let Mn=0;Mn<we.fNz;++Mn){let Nr=we.fZ[Mn],Ui=we[_i][Mn];Re[2*Mn+ti]=0,!(Mn>0&&Mn<we.fNz-1&&(we.fZ[Mn-1]===Nr&&we[_i][Mn-1]===Ui||we[_i][Mn+1]===Ui&&we[_i][Mn-1]===Ui))&&(Mn>0&&(0===ti||Xe)&&(Re[2*Mn+ti]=1,Ue++),null!==pt&&(0===ti?pt.push(new L.FM8(De*Ui,Nr)):Ui<we.fRmax[Mn]&&pt.unshift(new L.FM8(De*Ui,Nr))))}}let vt=Ue*me*2;we.fRmin[0]!==we.fRmax[0]&&(vt+=me*(Xe?2:1)),we.fRmin[we.fNz-1]!==we.fRmax[we.fNz-1]&&(vt+=me*(Xe?2:1));let Ht=null;if(null!==pt){if(pt.length===2*we.fNz){Ht=[];for(let ti=we.fNz-1;ti>0;--ti){if(we.fZ[ti]===we.fZ[ti-1])continue;let _i=2*we.fNz-1-ti;Ht.push([_i,ti-1,ti]),Ht.push([_i,_i+1,ti-1])}}else Ht=L.iDF.triangulateShape(pt,[]);vt+=2*Ht.length}let hn=E*Math.PI/180,gn=H/me*Math.PI/180,mn=new Float32Array(me+1),An=new Float32Array(me+1);for(let ti=0;ti<=me;++ti)An[ti]=Math.cos(hn+ti*gn),mn[ti]=Math.sin(hn+ti*gn);let fi=N?new Gt:new rn(vt);for(let ti=0;ti<2;++ti){let _i=0===ti?"fRmax":"fRmin",Mn=we.fZ[0],Nr=De*we[_i][0],Ui=1-ti,Bi=ti;for(let Ms=0;Ms<we.fNz;++Ms){if(0===Re[2*Ms+ti])continue;let os=we.fZ[Ms],Cs=De*we[_i][Ms],Co=1,ua=0;if(Cs!==Nr){let Qs=Math.atan2(Cs-Nr,os-Mn);Co=Math.cos(Qs),ua=Math.sin(Qs)}ti>0&&(Co*=-1,ua*=-1);for(let Qs=0;Qs<me;++Qs)fi.addFace4(Nr*An[Qs+Ui],Nr*mn[Qs+Ui],Mn,Cs*An[Qs+Ui],Cs*mn[Qs+Ui],os,Cs*An[Qs+Bi],Cs*mn[Qs+Bi],os,Nr*An[Qs+Bi],Nr*mn[Qs+Bi],Mn),fi.setNormal_12_34(Co*An[Qs+Ui],Co*mn[Qs+Ui],ua,Co*An[Qs+Bi],Co*mn[Qs+Bi],ua);Mn=os,Nr=Cs}}for(let ti=0;ti<we.fNz;ti+=we.fNz-1){let _i=De*we.fRmin[ti],Mn=De*we.fRmax[ti];if(_i===Mn)continue;let Nr=we.fZ[ti],Ui=0===ti?1:0,Bi=1-Ui,Ms=0===ti?-1:1;!Xe&&!Ht&&fi.startPolygon(ti>0);for(let os=0;os<me;++os)fi.addFace4(_i*An[os+Ui],_i*mn[os+Ui],Nr,Mn*An[os+Ui],Mn*mn[os+Ui],Nr,Mn*An[os+Bi],Mn*mn[os+Bi],Nr,_i*An[os+Bi],_i*mn[os+Bi],Nr,Xe?0:2),fi.setNormal(0,0,Ms);fi.stopPolygon()}if(Ht)for(let ti=0;ti<=me;ti+=me){let _i=0===ti?1:2,Mn=3-_i;for(let Nr=0;Nr<Ht.length;++Nr){let Ui=pt[Ht[Nr][0]],Bi=pt[Ht[Nr][_i]],Ms=pt[Ht[Nr][Mn]];fi.addFace3(Ui.x*An[ti],Ui.x*mn[ti],Ui.y,Bi.x*An[ti],Bi.x*mn[ti],Bi.y,Ms.x*An[ti],Ms.x*mn[ti],Ms.y),fi.calcNormal()}}return fi.create()}(we,N);case et:return function cs(we,N){let E=(we.fNz-1)*we.fNvert*2;if(N<0)return E+3*we.fNvert;let H=[];for(let Re=0;Re<we.fNvert;++Re)H.push(new L.FM8(we.fX[Re],we.fY[Re]));let me=L.iDF.triangulateShape(H,[]);me.length<H.length-2?(sn(`Problem with XTRU shape ${we.fName} with ${H.length} vertices`),me=[]):E+=2*me.length;let De=N?new Gt:new rn(E);for(let Re=0;Re<we.fNz-1;++Re){let Ue=we.fZ[Re],Xe=we.fScale[Re],pt=we.fZ[Re+1],vt=we.fScale[Re+1],Ht=we.fX0[Re],hn=we.fX0[Re+1],gn=we.fY0[Re],mn=we.fY0[Re+1];for(let An=0;An<we.fNvert;++An){let fi=(An+1)%we.fNvert;De.addFace4(Xe*we.fX[An]+Ht,Xe*we.fY[An]+gn,Ue,vt*we.fX[An]+hn,vt*we.fY[An]+mn,pt,vt*we.fX[fi]+hn,vt*we.fY[fi]+mn,pt,Xe*we.fX[fi]+Ht,Xe*we.fY[fi]+gn,Ue),De.calcNormal()}}for(let Re=0;Re<=we.fNz-1;Re+=we.fNz-1){let Ue=we.fZ[Re],Xe=we.fScale[Re],pt=we.fX0[Re],vt=we.fY0[Re];for(let Ht=0;Ht<me.length;++Ht){let hn=me[Ht],gn=H[hn[0]],mn=H[hn[0===Re?2:1]],An=H[hn[0===Re?1:2]];De.addFace3(Xe*gn.x+pt,Xe*gn.y+vt,Ue,Xe*mn.x+pt,Xe*mn.y+vt,Ue,Xe*An.x+pt,Xe*An.y+vt,Ue),De.setNormal(0,0,0===Re?-1:1)}}return De.create()}(we,N);case D:return function Rs(we,N){let E=Math.max(4,Math.round(360/m.GradPerSegm)),H=30;if(N>0){let _i=2*E*(H+1)/N;_i>1&&(E=Math.max(5,Math.floor(E/Math.sqrt(_i))),H=Math.max(5,Math.floor(H/Math.sqrt(_i))))}let me=-we.fDZ,De=we.fDZ,Re=we.fRlo,Ue=we.fRhi;we.fA>=0?we.fB>me&&(me=we.fB):we.fB<De&&(De=we.fB);let Xe=Math.atan2(me,Re),pt=Math.atan2(De,Ue),vt=(H+1)*E*2;if(0===Re&&(vt-=2*E),0===Ue&&(vt-=2*E),N<0)return vt;let Ht=new Float32Array(E+1),hn=new Float32Array(E+1);for(let _i=0;_i<=E;++_i)hn[_i]=Math.cos(_i/E*2*Math.PI),Ht[_i]=Math.sin(_i/E*2*Math.PI);let gn=N?new Gt:new rn(vt),mn=me,An=0,fi=0,ti=-1;for(let _i=0;_i<=H+1;++_i){let Mn=0,Nr=0,Ui=0,Bi=-1;if(0===_i&&0===Re)continue;if(_i===H+1&&0===An)break;switch(_i){case 0:Mn=me,Nr=Re;break;case H:Mn=De,Nr=Ue;break;case H+1:Mn=De,Nr=0;break;default:{let os=Math.tan(Xe+(pt-Xe)*_i/H);Nr=.5*(os+Math.sqrt(os**2-4*we.fA*we.fB))/we.fA,Nr<1e-6&&(Nr=0),Mn=Nr*os}}Ui=we.fA*Nr,Bi=we.fA>0?-1:1;let Ms=0===An?1:0===Nr?2:0;for(let os=0;os<E;++os)gn.addFace4(Nr*hn[os],Nr*Ht[os],Mn,An*hn[os],An*Ht[os],mn,An*hn[os+1],An*Ht[os+1],mn,Nr*hn[os+1],Nr*Ht[os+1],Mn,Ms),0===Ms||1===_i&&0===Re||_i===H+1&&0===Ue?gn.setNormal4(Ui*hn[os],Ui*Ht[os],Bi,fi*hn[os],fi*Ht[os],ti,fi*hn[os+1],fi*Ht[os+1],ti,Ui*hn[os+1],Ui*Ht[os+1],Bi,Ms):gn.setNormal(0,0,_i<H?-1:1);mn=Mn,An=Nr,fi=Ui,ti=Bi}return gn.create()}(we,N);case Je:return function es(we,N){if(0===we.fTin&&0===we.fTout)return Vi(we,N);let E=Math.max(4,Math.round(360/m.GradPerSegm)),H=30,me=E*(H+1)*(we.fRmin>0?4:2);if(N<0)return me;N>0&&N>me&&(E=Math.max(4,Math.floor(E/Math.sqrt(me/N))),H=Math.max(4,Math.floor(H/Math.sqrt(me/N))),me=E*(H+1)*(we.fRmin>0?4:2));let De=new Float32Array(E+1),Re=new Float32Array(E+1);for(let Xe=0;Xe<=E;++Xe)Re[Xe]=Math.cos(Xe/E*2*Math.PI),De[Xe]=Math.sin(Xe/E*2*Math.PI);let Ue=N?new Gt:new rn(me);for(let Xe=0;Xe<2&&!(Xe>0&&we.fRmin<=0);++Xe){let pt=Xe>0?we.fRmin:we.fRmax,vt=Xe>0?we.fTinsq:we.fToutsq,Ht=1-Xe,hn=1-Ht;for(let gn=0;gn<H;++gn){let mn=gn/H*2*we.fDz-we.fDz,An=(gn+1)/H*2*we.fDz-we.fDz,fi=Math.sqrt(pt**2+vt*mn**2),ti=Math.sqrt(pt**2+vt*An**2);for(let _i=0;_i<E;++_i)Ue.addFace4(fi*Re[_i+Ht],fi*De[_i+Ht],mn,ti*Re[_i+Ht],ti*De[_i+Ht],An,ti*Re[_i+hn],ti*De[_i+hn],An,fi*Re[_i+hn],fi*De[_i+hn],mn),Ue.calcNormal()}}for(let Xe=0;Xe<2;++Xe){let pt=0===Xe?we.fDz:-we.fDz,vt=Math.sqrt(we.fRmax**2+we.fToutsq*pt**2),Ht=we.fRmin>0?Math.sqrt(we.fRmin**2+we.fTinsq*pt**2):0,hn=we.fRmin>0?0:1,gn=1-Xe,mn=1-gn;for(let An=0;An<E;++An)Ue.addFace4(vt*Re[An+gn],vt*De[An+gn],pt,Ht*Re[An+gn],Ht*De[An+gn],pt,Ht*Re[An+mn],Ht*De[An+mn],pt,vt*Re[An+mn],vt*De[An+mn],pt,hn),Ue.setNormal(0,0,0===Xe?1:-1)}return Ue.create()}(we,N);case"TGeoTessellated":return function ho(we,N){let E=0;for(let me=0;me<we.fFacets.length;++me)E+=4==we.fFacets[me].fNvert?2:1;if(N<0)return E;let H=N?new Gt:new rn(E);for(let me=0;me<we.fFacets.length;++me){let De=we.fFacets[me],Re=we.fVertices[De.fIvert[0]].fVec,Ue=we.fVertices[De.fIvert[1]].fVec,Xe=we.fVertices[De.fIvert[2]].fVec;if(4==De.fNvert){let pt=we.fVertices[De.fIvert[3]].fVec;H.addFace4(Re[0],Re[1],Re[2],Ue[0],Ue[1],Ue[2],Xe[0],Xe[1],Xe[2],pt[0],pt[1],pt[2]),H.calcNormal()}else H.addFace3(Re[0],Re[1],Re[2],Ue[0],Ue[1],Ue[2],Xe[0],Xe[1],Xe[2]),H.calcNormal()}return H.create()}(we,N);case ct:return function al(we,N){if(N<0)return _o(we.fNode.fLeft,-10)+_o(we.fNode.fRight,-10);let E,H,me,De,Re=!1,Ue=ro(we.fNode.fLeftMat),Xe=ro(we.fNode.fRightMat);if(0===N?N=4e3:Re=!0,Ue&&Ue.determinant()<-.9&&sn("Axis reflection in left composite shape - not supported"),Xe&&Xe.determinant()<-.9&&sn("Axis reflections in right composite shape - not supported"),E=we.fNode.fLeft._typename==We?fo(we.fNode.fLeft):_o(we.fNode.fLeft,N),!E)return null;let pt=eo(E),vt=0;if(E._exceed_limit&&(pt+=N),pt<N&&(H=we.fNode.fRight._typename==We?fo(we.fNode.fRight,E):_o(we.fNode.fRight,N),vt=eo(H)),pt+vt>=N||!H)return E.polygons&&(E=x(E.polygons)),Ue&&E.applyMatrix4(Ue),E._exceed_limit=!0,E;switch(me=new p(E,Ue,m.CompressComp?0:void 0),De=new p(H,Xe,me.maxid),me.maxid=De.maxid,we.fNode._typename){case"TGeoIntersection":me.direct_intersect(De);break;case"TGeoUnion":me.direct_union(De);break;case"TGeoSubtraction":me.direct_subtract(De);break;default:sn("unsupported bool operation "+we.fNode._typename+", use first geom")}return 0===eo(me)&&(sn(`Zero faces in comp shape left: ${we.fNode.fLeft._typename} ${eo(E)} faces right: ${we.fNode.fRight._typename} ${eo(H)} faces  use first`),me=new p(E,Ue)),Re?{polygons:me.toPolygons()}:me.toBufferGeometry()}(we,N);case Ee:break;case Ke:{let E=_o(we.fShape,N);return we.fScale&&N>=0&&(0,M.isFunc)(E?.scale)&&E.scale(we.fScale.fScale[0],we.fScale.fScale[1],we.fScale.fScale[2]),E}case We:if(N<0)return 1;default:sn(`unsupported shape type ${we._typename}`)}}catch(E){let H="";void 0!==E.stack&&(H=E.stack.split("\n")[0],H=H.indexOf(E.message)>=0?E.stack.split("\n")[1]:"at: "+H),sn(`${we._typename} err: ${E.message} ${H}`)}return N<0?0:null}function Yi(we,N){if(we.server_shape&&(we.nsegm===N||!we.shape))return we.server_shape;we.nsegm=N;let E=null;if(we.shape)E=_o(we.shape);else{if(!we.raw?.buffer)return console.error("No raw data at all"),null;E=we.sz?function el(we){let N=0;if(we.sz[0]&&(we.vtxBuff=new Float32Array(we.raw.buffer,N,we.sz[0]),N+=4*we.sz[0]),we.sz[1]&&(N+=4*we.sz[1]),we.sz[2]&&(we.prefixBuf=new Uint32Array(we.raw.buffer,N,2),N+=8,we.idxBuff=new Uint32Array(we.raw.buffer,N,we.sz[2]-2),N+=4*(we.sz[2]-2)),4!=we.prefixBuf[0])throw"Expect triangles first.";if(we.idxBuff.length!=3*we.prefixBuf[1])throw"Expect single list of triangles in index buffer.";let me=new L.u9r;return me.setAttribute("position",new L.TlE(we.vtxBuff,3)),me.setIndex(new L.TlE(we.idxBuff,1)),me.computeVertexNormals(),me}(we):function lo(we){let N=new Float32Array(we.raw.buffer,0,we.raw.buffer.byteLength/4),E=new L.u9r;return E.setAttribute("position",new L.TlE(N,3)),E.setIndex(new L.TlE(new Uint32Array(we.idx),1)),E.computeVertexNormals(),E}(we)}return{_typename:"$$Shape$$",ready:!0,geom:E,nfaces:Es(E)}}function ga(we){let N=[],E=null;if(void 0!==we.fVolume?E=we.fVolume.fShape:void 0!==we.fShape?E=we.fShape:void 0!==we.fShapeBits&&void 0!==we.fShapeId&&(E=we),!E)return N.push(we._typename),N;let H=Math.max(E.fDX,E.fDY,E.fDZ),me=H>1e7||H<1e-7,De=Re=>void 0===Re?"???":Re==Math.round(Re)&&Re<1e7?Math.round(Re):me?Re.toExponential(4):Re.toPrecision(7);switch(N.push(E._typename),N.push(`DX=${De(E.fDX)} DY=${De(E.fDY)} DZ=${De(E.fDZ)}`),E._typename){case $:break;case le:N.push(`Alpha=${E.fAlpha} Phi=${E.fPhi} Theta=${E.fTheta}`);break;case z:N.push(`Dy1=${De(E.fDy1)} Dy2=${De(E.fDy1)}`);case U:N.push(`Dx1=${De(E.fDx1)} Dx2=${De(E.fDx1)}`);break;case J:case Tt:case Bt:break;case Ve:N.push(`Rmin=${De(E.fRmin)} Rmax=${De(E.fRmax)}`,`Phi1=${E.fPhi1} Phi2=${E.fPhi2}`,`Theta1=${E.fTheta1} Theta2=${E.fTheta2}`);break;case Me:N.push(`Phi1=${E.fPhi1} Phi2=${E.fPhi2}`);case ie:N.push(`Rmin1=${De(E.fRmin1)} Rmax1=${De(E.fRmax1)}`,`Rmin2=${De(E.fRmin2)} Rmax2=${De(E.fRmax2)}`);break;case I:case fe:N.push(`Phi1=${E.fPhi1} Phi2=${E.fPhi2}`);case ve:case de:N.push(`Rmin=${De(E.fRmin)} Rmax=${De(E.fRmax)}`);break;case Qe:N.push(`Rmin=${De(E.fRmin)} Rmax=${De(E.fRmax)}`,`Phi1=${E.fPhi1} Dphi=${E.fDphi}`);break;case oe:case _e:case et:break;case D:N.push(`Rlo=${De(E.fRlo)} Rhi=${De(E.fRhi)}`,`A=${De(E.fA)} B=${De(E.fB)}`);break;case Je:N.push(`Rmin=${De(E.fRmin)} Rmax=${De(E.fRmax)}`,`StIn=${De(E.fStIn)} StOut=${De(E.fStOut)}`);break;case ct:case Ee:break;case Ke:N=ga(E.fShape),E.fScale&&N.unshift(`Scale X=${E.fScale.fScale[0]} Y=${E.fScale.fScale[1]} Z=${E.fScale.fScale[2]}`)}return N}function xa(we){let N=new L.yGw;return we.updateMatrixWorld(),we.matrixWorldInverse.copy(we.matrixWorld).invert(),N.multiplyMatrices(we.projectionMatrix,we.matrixWorldInverse),N}function Ta(we){if(!we)return null;we instanceof L.cPb&&(we=xa(we));let N=new L.iWj;return N.setFromProjectionMatrix(we),N.corners=new Float32Array([1,1,1,1,1,-1,1,-1,1,1,-1,-1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,-1,0,0,0]),N.test=new L.Pa4(0,0,0),N.CheckShape=function(E,H){let Ue,me=this.test,De=this.corners.length,Re=this.corners;for(Ue=0;Ue<De;Ue+=3)if(me.x=Re[Ue]*H.fDX,me.y=Re[Ue+1]*H.fDY,me.z=Re[Ue+2]*H.fDZ,this.containsPoint(me.applyMatrix4(E)))return!0;return!1},N.CheckBox=function(E){let H=this.test,me=0;return H.set(E.min.x,E.min.y,E.min.z),this.containsPoint(H)&&me++,H.set(E.min.x,E.min.y,E.max.z),this.containsPoint(H)&&me++,H.set(E.min.x,E.max.y,E.min.z),this.containsPoint(H)&&me++,H.set(E.min.x,E.max.y,E.max.z),this.containsPoint(H)&&me++,H.set(E.max.x,E.max.y,E.max.z),this.containsPoint(H)&&me++,H.set(E.max.x,E.min.y,E.max.z),this.containsPoint(H)&&me++,H.set(E.max.x,E.max.y,E.min.z),this.containsPoint(H)&&me++,H.set(E.max.x,E.max.y,E.max.z),this.containsPoint(H)&&me++,me>5},N}class Ae{constructor(N,E){this.toplevel=!0,this.name_prefix="",this.maxdepth=1,this.vislevel=4,this.maxnodes=1e4,N?(N.$geoh&&(this.toplevel=!1),this.createClones(N)):E&&(this.nodes=E)}setVisLevel(N){this.vislevel=N&&Number.isInteger(N)?N:4}getVisLevel(){return this.vislevel}setMaxVisNodes(N){this.maxnodes=Number.isFinite(N)?N:1e4}getMaxVisNodes(){return this.maxnodes}updateNode(N){N&&Number.isInteger(N.id)&&N.id<this.nodes.length&&(this.nodes[N.id]=N)}getNodeShape(N){if(!this.origin||!this.nodes)return null;let E=this.origin[N],H=this.nodes[N];return E&&H?H.kind!==F?E.fShape:E.fVolume?E.fVolume.fShape:null:null}cleanup(N,E){if(N)for(let H=0;H<N.length;++H)delete N[H].stack,N[H]=void 0;if(E)for(let H=0;H<E.length;++H)delete E[H].geom,E[H]=void 0;if(this.nodes)for(let H=0;H<this.nodes.length;++H)this.nodes[H]&&delete this.nodes[H].chlds;delete this.nodes,delete this.origin,delete this.sortmap}createClones(N,E,H){if(!E){if(N&&"$$Shape$$"==N._typename)return this.createClonesForShape(N);this.origin=[],E=1,H=wn(N)}if(H<0||!N||"_refid"in N)return;N._refid=this.origin.length,this.origin.push(N),E>this.maxdepth&&(this.maxdepth=E);let me=null;if(me=H===F?N.fVolume&&N.fVolume.fNodes?N.fVolume.fNodes.arr:null:N.fElements?N.fElements.arr:null,null!==me){$n(N,me);for(let Re=0;Re<me.length;++Re)this.createClones(me[Re],E+1,H)}if(E>1)return;this.nodes=[];let De=[];for(let Re=0;Re<this.origin.length;++Re){let Ue={id:Re,kind:H,vol:0,nfaces:0};this.nodes.push(Ue),De.push(Ue)}for(let Re=0;Re<this.origin.length;++Re){let Ue=this.origin[Re],Xe=this.nodes[Re],pt=null,vt=null;H===R?(vt=Ue.fShape,Ue.fElements&&(pt=Ue.fElements.arr)):Ue.fVolume&&(vt=Ue.fVolume.fShape,Ue.fVolume.fNodes&&(pt=Ue.fVolume.fNodes.arr));let Ht=ws(H,Ue);if(Ht){if(Xe.matrix=Ht.elements,1===Xe.matrix[0]){let hn=!0;for(let gn=1;gn<Xe.matrix.length&&hn;++gn)hn=Xe.matrix[gn]===(5===gn||10===gn||15===gn?1:0);hn&&delete Xe.matrix}Xe.matrix&&H==R&&(Xe.abs_matrix=!0)}if(vt&&(Xe.fDX=vt.fDX,Xe.fDY=vt.fDY,Xe.fDZ=vt.fDZ,Xe.vol=vt.fDX*vt.fDY*vt.fDZ,void 0===vt.$nfaces&&(vt.$nfaces=_o(vt,-1)),Xe.nfaces=vt.$nfaces,Xe.nfaces<=0&&(Xe.vol=0)),pt){Xe.chlds=new Array(pt.length);for(let hn=0;hn<pt.length;++hn)Xe.chlds[hn]=pt[hn]._refid}}for(let Re=0;Re<this.origin.length;++Re)delete this.origin[Re]._refid;De.sort((Re,Ue)=>Ue.vol-Re.vol),this.sortmap=new Array(this.nodes.length);for(let Re=0;Re<this.nodes.length;++Re)this.sortmap[Re]=De[Re].id,De[Re].sortid=Re}createClonesForShape(N){this.origin=[],this.plain_shape=N,this.nodes=[{id:0,sortid:0,kind:2,name:"Shape",nfaces:N.nfaces,fDX:1,fDY:1,fDZ:1,vol:1,vis:!0}]}countVisibles(){let N=0,E=this.nodes?.length||0;for(let H=0;H<E;++H)this.nodes[H].vis&&N++;return N}markVisibles(N,E,H){if(this.plain_shape)return 1;if(!this.origin||!this.nodes)return 0;let me=0;for(let De=0;De<this.nodes.length;++De){let Re=this.nodes[De],Ue=this.origin[De];Re.vis=0,delete Re.nochlds,Re.kind===F?Ue.fVolume&&(N?(Re.vis=ft(Ue.fVolume,T.kVisOnScreen)?99:0,0==De&&Re.vis&&H&&(Re.vis=0),E&&(zt(Ue.fVolume,T.kVisNone,!1),zt(Ue.fVolume,T.kVisThis,Re.vis>0),zt(Ue.fVolume,T.kVisDaughters,!0),zt(Ue,T.kVisDaughters,!0))):(Re.vis=!ft(Ue.fVolume,T.kVisNone)&&ft(Ue.fVolume,T.kVisThis)?99:0,(!ft(Ue,T.kVisDaughters)||!ft(Ue.fVolume,T.kVisDaughters))&&(Re.nochlds=!0),Re.vis>0&&Re.chlds&&!Re.nochlds&&(Re.vis=1),0===De&&(H&&(Re.vis=0),delete Re.nochlds))):(Re.vis=Ue.fRnrSelf?99:0,0===De&&1===this.nodes.length&&(Re.vis=99),this.vislevel=9999),(Re.vol<=0||Re.nfaces<=0)&&(Re.vis=0),Re.vis&&me++}return me}produceIdShifts(){for(let E=0;E<this.nodes.length;++E)this.nodes[E].idshift=-1;!function N(E,H){if(H.idshift<0&&(H.idshift=0,H.chlds))for(let me=0;me<H.chlds.length;++me)H.idshift+=N(E,E[H.chlds[me]]);return H.idshift+1}(this.nodes,this.nodes[0])}getVisibleFlags(){let N=new Array(this.nodes.length);for(let E=0;E<this.nodes.length;++E)N[E]={vis:this.nodes[E].vis,nochlds:this.nodes[E].nochlds};return N}setVisibleFlags(N){if(!this.nodes||!N||!N.length!=this.nodes.length)return 0;let E=0;for(let H=0;H<this.nodes.length;++H){let me=this.nodes[H];me.vis=N[H].vis,me.nochlds=N[H].nochlds,me.vis&&E++}return E}scanVisible(N,E){if(!this.nodes)return 0;void 0===E&&(N||(N={}),(E=N.vislvl||this.vislevel||4)>88&&(E=88),N.stack=new Array(100),N.nodeid=0,N.counter=0,N.last=0,N.CopyStack=function(De){let Re={nodeid:this.nodeid,seqid:this.counter,stack:new Array(this.last)};De&&(Re.factor=De);for(let Ue=0;Ue<this.last;++Ue)Re.stack[Ue]=this.stack[Ue+1];return Re},N.domatrix&&(N.matrices=[],N.mpool=[new L.yGw],N.getmatrix=function(){return this.matrices[this.last]}));let H=0,me=this.nodes[N.nodeid];if(N.domatrix){N.mpool[N.last+1]||(N.mpool[N.last+1]=new L.yGw);let De=N.last>0?N.matrices[N.last-1]:new L.yGw;me.matrix?(N.matrices[N.last]=N.mpool[N.last].fromArray(De.elements),N.matrices[N.last].multiply(N.mpool[N.last+1].fromArray(me.matrix))):N.matrices[N.last]=De}if(me.nochlds&&(E=0),me.vis>E&&(!N.func||N.func(me))&&H++,N.counter++,E>0&&me.chlds){N.last++;for(let De=0;De<me.chlds.length;++De)N.nodeid=me.chlds[De],N.stack[N.last]=De,H+=this.scanVisible(N,E-1);N.last--}else N.counter+=me.idshift||0;return 0===N.last&&(delete N.last,delete N.stack,delete N.CopyStack,delete N.counter,delete N.matrices,delete N.mpool,delete N.getmatrix),H}getNodeName(N){if(this.origin){let H=this.origin[N];return H?En(H):""}let E=this.nodes[N];return E?E.name:""}resolveStack(N,E){let H={id:0,obj:null,node:this.nodes[0],name:this.name_prefix};if(E&&(H.matrix=new L.yGw,H.node.matrix&&H.matrix.fromArray(H.node.matrix)),this.origin&&(H.obj=this.origin[0]),N)for(let me=0;me<N.length;++me){H.id=H.node.chlds[N[me]],H.node=this.nodes[H.id],this.origin&&(H.obj=this.origin[H.id]);let De=this.getNodeName(H.id);De&&(H.name&&(H.name+="/"),H.name+=De),E&&H.node.matrix&&H.matrix.multiply((new L.yGw).fromArray(H.node.matrix))}return H}buildStackByIds(N){if(!N)return null;if(0!==N[0])return console.error("wrong ids - first should be 0"),null;let E=this.nodes[0],H=[];for(let me=1;me<N.length;++me){let De=N[me];if(!E)return null;let Re=E.chlds.indexOf(De);if(Re<0)return console.error(`wrong nodes ids ${N[me]} is not child of ${N[me-1]}`),null;H.push(Re),E=this.nodes[De]}return H}buildIdsByStack(N){if(!N)return null;let E=this.nodes[0],H=[0];for(let me=0;me<N.length;++me){let De=E.chlds[N[me]];H.push(De),E=this.nodes[De]}return H}isIdInStack(N,E){if(!N)return!0;let H=this.nodes[0],me=0;for(let De=0;De<E.length;++De){if(me=H.chlds[E[De]],me==N)return!0;H=this.nodes[me]}return!1}findStackByName(N){let E=N.split("/"),H=0,me=[];if(this.getNodeName(H)!==E[0])return null;for(let De=1;De<E.length;++De){let Re=this.nodes[H];if(!Re.chlds)return null;for(let Ue=0;Ue<Re.chlds.length;++Ue){let Xe=Re.chlds[Ue];if(this.getNodeName(Xe)===E[De]){me.push(Ue),H=Xe;break}}if(me.length===De-1)return null}return me}setDefaultColors(N){if(this.use_dflt_colors=N,this.use_dflt_colors&&!this.dflt_table){let E={kWhite:0,kBlack:1,kGray:920,kRed:632,kGreen:416,kBlue:600,kYellow:400,kMagenta:616,kCyan:432,kOrange:800,kSpring:820,kTeal:840,kAzure:860,kViolet:880,kPink:900},H=110,me=[];for(let De=0;De<H;De++)me.push(E.kGray);me[3]=E.kYellow-10,me[4]=me[5]=E.kGreen-10,me[6]=me[7]=E.kBlue-7,me[8]=me[9]=E.kMagenta-3,me[10]=me[11]=E.kRed-10,me[12]=E.kGray+1,me[13]=E.kBlue-10,me[14]=E.kOrange+7,me[16]=E.kYellow+1,me[20]=E.kYellow-10,me[24]=me[25]=me[26]=E.kBlue-8,me[29]=E.kOrange+9,me[79]=E.kOrange-2,this.dflt_table=me}}getDrawEntryProperties(N,E){let H=this.nodes[N.nodeid];if(2===H.kind){let Xe={name:H.name,nname:H.name,shape:null,material:null,chlds:null},pt=N.opacity||1;return Xe.fillcolor=new L.Ilk(N.color?`rgb(${N.color})`:"blue"),Xe.material=new L.YBo({transparent:pt<1,opacity:pt,wireframe:!1,color:Xe.fillcolor,side:L.Wl3,vertexColors:!1,depthWrite:1==pt}),Xe.material.inherentOpacity=pt,Xe}if(!this.origin)return console.error("origin not there - kind",H.kind,N.nodeid,H),null;let De=this.origin[N.nodeid];if(H.kind===R){let Xe={name:En(De),nname:En(De),shape:De.fShape,material:null,chlds:null};null!==De.fElements&&(Xe.chlds=De.fElements.arr);{let pt=Math.min(1,De.fRGBA[3]);Xe.fillcolor=new L.Ilk(De.fRGBA[0],De.fRGBA[1],De.fRGBA[2]),Xe.material=new L.YBo({transparent:pt<1,opacity:pt,wireframe:!1,color:Xe.fillcolor,side:L.Wl3,vertexColors:!1,depthWrite:1==pt}),Xe.material.inherentOpacity=pt}return Xe}let Re=De.fVolume,Ue={name:En(Re),nname:En(De),volume:De.fVolume,shape:Re.fShape,material:null,chlds:null};null!==De.fVolume.fNodes&&(Ue.chlds=De.fVolume.fNodes.arr),Re&&(Ue.linewidth=Re.fLineWidth);{let Xe=1;E||(E=["white","black","red","green","blue","yellow","magenta","cyan"]),N.custom_color?Ue.fillcolor=N.custom_color:Re.fFillColor>1&&1==Re.fLineColor?Ue.fillcolor=E[Re.fFillColor]:Re.fLineColor>=0&&(Ue.fillcolor=E[Re.fLineColor]);let pt=Re?.fMedium?.fMaterial;if(pt){let vt=pt.fFillStyle,Ht=vt>=3e3&&vt<=3100?vt-3e3:0;if(this.use_dflt_colors){let hn=Math.round(pt.fZ);Ue.fillcolor=E[this.dflt_table[hn]],pt.fDensity<.1&&(Ht=60)}Ht>0&&(Xe=(100-Ht)/100),void 0===Ue.fillcolor&&(Ue.fillcolor=E[pt.fFillColor])}void 0===Ue.fillcolor&&(Ue.fillcolor="lightgrey"),Ue.material=new L.YBo({transparent:Xe<1,opacity:Xe,wireframe:!1,color:Ue.fillcolor,side:L.Wl3,vertexColors:!1,depthWrite:1==Xe}),Ue.material.inherentOpacity=Xe}return Ue}createObject3D(N,E,H){let me=this.nodes[0],De=E,Re=0,Ue=(0,M.isObject)(H)||"force"===H;for(let Xe=0;Xe<=N.length;++Xe){let vt,pt=Xe>0?N[Xe-1]:0;if(Xe>0&&(me=this.nodes[me.chlds[pt]]),De.children)for(let Ht=0;Ht<De.children.length;++Ht)if(De.children[Ht].nchld===pt){vt=De.children[Ht];break}if(vt)De=vt,vt.$jsroot_drawable&&Re++;else{if(!Ue)return null;vt=new L.Tme,me.abs_matrix?(vt.absMatrix=new L.yGw,vt.absMatrix.fromArray(me.matrix)):me.matrix&&(vt.matrix.fromArray(me.matrix),vt.matrix.decompose(vt.position,vt.quaternion,vt.scale)),vt.nchld=pt,De.add(vt),0==Xe&&(0,M.isObject)(H)&&H.scale&&(H.scale.x<0||H.scale.y<0||H.scale.z<0)&&(vt.scale.copy(H.scale),vt.updateMatrix()),vt.updateMatrixWorld(),De=vt}}if("mesh"===H||"delete_mesh"===H){let Xe=null;if(De)for(let vt=0;vt<De.children.length&&!Xe;++vt){let Ht=De.children[vt];"Mesh"===Ht.type&&void 0===Ht.nchld&&(Xe=Ht)}if("mesh"===H||!Xe)return Xe;let pt=De;for(;Xe&&Xe!==E;)De=Xe.parent,De.remove(Xe),Xe=0==De.children.length?De:null;return pt}return De&&(De.$jsroot_drawable=!0,De.$jsroot_depth=Re),De}getVolumeBoundary(N,E,H){let me={min:0,max:1,sortidcut:0};if(!this.sortmap)return console.error("sorting map do not exist"),me;let De,Re,Ue=0,Xe=0;for(let pt=0;pt<this.sortmap.length&&Ue<H&&Xe<E;++pt){let vt=this.sortmap[pt];0!==N[vt]&&(Re=this.nodes[vt],De||(De=Re),Ue+=N[vt],Xe+=N[vt]*Re.nfaces)}return Re?(me.max=De.vol,me.min=Re.vol,me.sortidcut=Re.sortid,me):(console.error("no volumes selected"),me)}collectVisibles(N,E){if(this.plain_shape)return{lst:[{nodeid:0,seqid:0,stack:[],factor:1,shapeid:0,server_shape:this.plain_shape}],complete:!0};let H={facecnt:0,viscnt:new Array(this.nodes.length),vislvl:this.getVisLevel(),reset(){this.total=0,this.facecnt=0,this.viscnt.fill(0)},func(Ht){return this.total++,this.facecnt+=Ht.nfaces,this.viscnt[Ht.id]++,!0}};H.reset();let me=this.scanVisible(H),De=this.getMaxVisNodes();if(De>0)for(;me>De&&H.vislvl>1;)H.vislvl--,H.reset(),me=this.scanVisible(H);this.actual_level=H.vislvl;let Re=0,Ue=0,Xe=-1,pt=10,vt=this.nodes.length+1;if(console.log(`Total visible nodes ${me} numfaces ${H.facecnt}`),H.facecnt>N){let gn=this.getVolumeBoundary(H.viscnt,N*(E?.8:1),De*(E?.8:1));if(Re=gn.min,Ue=gn.max,vt=gn.sortidcut,E){H.domatrix=!0,H.frustum=E,H.totalcam=0,H.func=function(mn){return mn.vol<=Re&&this.frustum.CheckShape(this.getmatrix(),mn)&&(this.viscnt[mn.id]++,this.totalcam+=mn.nfaces),!0};for(let mn=0;mn<H.viscnt.length;++mn)H.viscnt[mn]=0;this.scanVisible(H),Xe=H.totalcam>.2*N?this.getVolumeBoundary(H.viscnt,.2*N,.2*De).min:0,pt=Ue/(Xe>0?Xe>0:Re)}}return H.items=[],H.func=function(Ht){return Ht.sortid<vt?this.items.push(this.CopyStack()):Xe>=0&&Ht.vol>Xe&&this.frustum.CheckShape(this.getmatrix(),Ht)&&this.items.push(this.CopyStack(pt)),!0},this.scanVisible(H),{lst:H.items,complete:0===Re}}mergeVisibles(N,E){let H=0,me=[];for(let De=0;De<N.length&&H<E.length;++De){for(;H<E.length&&E[H].seqid<N[De].seqid;)me.push(E[H++]);H<E.length&&E[H].seqid===N[De].seqid&&(E[H].done&&(N[De].done=!0),H++)}for(;H<E.length;)me.push(E[H++]);return me}collectShapes(N){if(this.plain_shape)return[this.plain_shape];let E=[];for(let H=0;H<N.length;++H){let me=N[H],De=this.getNodeShape(me.nodeid);De&&(void 0===De._id?(De._id=E.length,E.push({id:De._id,shape:De,vol:this.nodes[me.nodeid].vol,refcnt:1,factor:1,ready:!1})):E[De._id].refcnt++,me.shape=E[De._id],me.factor&&me.factor>me.shape.factor&&(me.shape.factor=me.factor))}E.sort((H,me)=>me.vol*me.factor-H.vol*H.factor);for(let H=0;H<E.length;++H){let me=E[H];me.id=H,delete me.shape._id}for(let H=0;H<N.length;++H){let me=N[H];me.shape&&(me.shapeid=me.shape.id,delete me.shape)}return E}mergeShapesLists(N,E){if(!N)return E;for(let H=0;H<N.length;++H){let me=N[H];me.shape._geom=me.geom,delete me.geom,void 0!==me.geomZ&&(me.shape._geomZ=me.geomZ,delete me.geomZ)}for(let H=0;H<E.length;++H){let me=E[H];void 0!==me.shape._geom&&(me.geom=me.shape._geom,delete me.shape._geom),void 0!==me.shape._geomZ&&(me.geomZ=me.shape._geomZ,delete me.shape._geomZ)}for(let H=0;H<N.length;++H){let me=N[H];delete me.shape._geom,delete me.shape._geomZ}return E}buildShapes(N,E,H){let me=0,De=(new Date).getTime(),Re={done:!1,shapes:0,faces:0,notusedshapes:0};for(let Ue=0;Ue<N.length;++Ue){let Xe=N[Ue];if(Re.done)Xe.ready=!0;else if(Xe.ready||(Xe._typename="$$Shape$$",Xe.ready=!0,void 0===Xe.geom&&(Xe.geom=_o(Xe.shape),Xe.geom&&me++),Xe.nfaces=eo(Xe.geom)),Re.shapes++,Xe.used||Re.notusedshapes++,Re.faces+=Xe.nfaces*Xe.refcnt,Re.faces>=E)Re.done=!0;else if(me>.01*N.length&&void 0!==H&&(new Date).getTime()-De>H)return Re}return Re.done=!0,Re}static formatServerElement(N){N.kind=2,N.vis=2;let E=N.matr;if(delete N.matr,!E?.length)return N;if(16==E.length)N.matrix=E;else{let H=N.matrix=new Array(16);H.fill(0),H[0]=H[5]=H[10]=H[15]=1,3==E.length?(H[12]=E[0],H[13]=E[1],H[14]=E[2]):4==E.length?(H[0]=E[0],H[5]=E[1],H[10]=E[2],H[15]=E[3]):9==E.length?(H[0]=E[0],H[4]=E[1],H[8]=E[2],H[1]=E[3],H[5]=E[4],H[9]=E[5],H[2]=E[6],H[6]=E[7],H[10]=E[8]):console.error(`wrong number of elements ${E.length} in the matrix`)}return N}}function rt(we,N){let E=new L.Pa4(1,1,-1);if(void 0===we.geomZ){let me=we.geom.getAttribute("position").array,De=we.geom.getAttribute("normal").array,Re=we.geom.getIndex();if(Re){let hn=Re.array,gn=we.geom.drawRange.start,mn=we.geom.drawRange.count;gn+mn>hn.length&&(mn=hn.length-gn);let An=new Float32Array(3*mn),fi=new Float32Array(3*mn);for(let ti=0;ti<mn;++ti){let _i=hn[gn+ti];(_i<0||3*_i>=me.length)&&console.log(`strange index ${3*_i} totallen = ${me.length}`),An[3*ti]=me[3*_i],An[3*ti+1]=me[3*_i+1],An[3*ti+2]=me[3*_i+2],fi[3*ti]=De[3*_i],fi[3*ti+1]=De[3*_i+1],fi[3*ti+2]=De[3*_i+2]}me=An,De=fi}let Xe,Ue=me.length,pt=0,vt=new Float32Array(Ue),Ht=new Float32Array(Ue);for(Xe=0;Xe<Ue;Xe+=3)vt[Xe]=me[Xe+pt],vt[Xe+1]=me[Xe+1+pt],vt[Xe+2]=-me[Xe+2+pt],Ht[Xe]=De[Xe+pt],Ht[Xe+1]=De[Xe+1+pt],Ht[Xe+2]=-De[Xe+2+pt],pt+=3,6===pt&&(pt=-3);we.geomZ=new L.u9r,we.geomZ.setAttribute("position",new L.TlE(vt,3)),we.geomZ.setAttribute("normal",new L.TlE(Ht,3))}let H=new L.Kj0(we.geomZ,N);return H.scale.copy(E),H.updateMatrix(),H._flippedMesh=!0,H}function ot(we,N,E){if(!we?.geometry)return N;N||(N=(new L.ZzF).makeEmpty()),E||we.updateWorldMatrix(!1,!1);let H=new L.Pa4,me=we.geometry.attributes?.position;if(void 0!==me)for(let De=0,Re=me.count;De<Re;De++)H.fromBufferAttribute(me,De),E||H.applyMatrix4(we.matrixWorld),N.expandByPoint(H);return N}function fn(we,N,E,H){let me=new L.iMs;function De(pt){pt&&pt.traverse(vt=>{vt.renderOrder=vt.defaultOrder||0,vt.material&&(vt.material.depthWrite=!0)})}function Re(pt,vt,Ht){if(pt.children)for(let hn=0;hn<pt.children.length;++hn){let gn=pt.children[hn];gn.$jsroot_order===vt?gn.material&&(gn.material.transparent?(gn.material.depthWrite=!1,Ht.push(gn)):De(gn)):(void 0===pt.$jsroot_depth||pt.$jsroot_depth<vt)&&Re(gn,vt,Ht)}}E&&"dflt"!=E?function Xe(pt,vt,Ht,hn){let gn=[],mn=!1;if(Re(pt,vt,gn),gn.length){if(Ht===hn)for(let An=0;An<gn.length;++An)gn[An].renderOrder=Ht;else mn=function Ue(pt,vt,Ht){if(pt.length>1e3){for(let mn=0;mn<pt.length;++mn)pt[mn].renderOrder=(vt+Ht)/2;return!1}let hn=new L.Pa4;for(let mn=0;mn<pt.length;++mn){let An=pt[mn],fi=An.$jsroot_box3;if(fi||(An.$jsroot_box3=fi=ot(An)),"size"===E){let Mn=fi.getSize(new L.Pa4);An.$jsroot_distance=Mn.x*Mn.y*Mn.z;continue}if("pnt"===E){An.$jsroot_distance=N.distanceTo(fi.getCenter(hn));continue}let ti=Math.min(N.distanceTo(fi.min),N.distanceTo(fi.max)),_i=new L.Pa4(fi.min.x,fi.min.y,fi.max.z);ti=Math.min(ti,N.distanceTo(_i)),_i.set(fi.min.x,fi.max.y,fi.min.z),ti=Math.min(ti,N.distanceTo(_i)),_i.set(fi.max.x,fi.min.y,fi.min.z),ti=Math.min(ti,N.distanceTo(_i)),_i.set(fi.max.x,fi.max.y,fi.min.z),ti=Math.min(ti,N.distanceTo(_i)),_i.set(fi.max.x,fi.min.y,fi.max.z),ti=Math.min(ti,N.distanceTo(_i)),_i.set(fi.min.x,fi.max.y,fi.max.z),ti=Math.min(ti,N.distanceTo(_i)),An.$jsroot_distance=ti}pt.sort((mn,An)=>mn.$jsroot_distance-An.$jsroot_distance);let gn=new Array(pt.length);for(let mn=0;mn<pt.length;++mn)pt[mn].$jsroot_index=mn,gn[mn]=pt[mn];if("ray"===E)for(let mn=pt.length-1;mn>=0;--mn){let fi,An=pt[mn],_i=An.$jsroot_box3.getCenter(hn);for(let Mn=0;Mn<2;++Mn){_i.sub(N).normalize(),me.set(N,_i),fi=me.intersectObjects(pt,!1)||[];let Nr=[];for(let Bi=0;Bi<fi.length;++Bi)Nr.indexOf(fi[Bi].object)<0&&Nr.push(fi[Bi].object);if(fi=Nr,fi.indexOf(An)<0&&Mn>0&&console.log(`MISS ${H?.resolveStack(An.stack)?.name}`),fi.indexOf(An)>=0||Mn>0)break;let Ui=An.geometry.attributes.position.array;_i=new L.Pa4((Ui[0]+Ui[3]+Ui[6])/3,(Ui[1]+Ui[4]+Ui[7])/3,(Ui[2]+Ui[5]+Ui[8])/3),_i.applyMatrix4(An.matrixWorld)}for(let Mn=0;Mn<fi.length-1;++Mn){let Ui=fi[Mn+1],Bi=fi[Mn].$jsroot_index,Ms=Ui.$jsroot_index;if(!(Bi<Ms)){for(let os=Ms;os<Bi;++os)gn[os]=gn[os+1],gn[os].$jsroot_index=os;gn[Bi]=Ui,Ui.$jsroot_index=Bi}}}for(let mn=0;mn<gn.length;++mn)gn[mn].renderOrder=Math.round(Ht-(mn+1)/(gn.length+1)*(Ht-vt)),delete gn[mn].$jsroot_index,delete gn[mn].$jsroot_distance;return!0}(gn,Ht,hn),mn||(Ht=hn=(Ht+hn)/2);for(let An=0;An<gn.length;++An){let ti=Ht,_i=hn;mn&&(_i=gn[An].renderOrder,ti=_i-(hn-Ht)/(gn.length+2)),Xe(gn[An].parent,vt+1,ti,_i)}}}(we,0,1,1e6):De(we)}const lt="TGeoManager",mt="TEveGeoShapeExtract",Lt="TGeoOverlap",$e="TGeoVolumeAssembly",Nt="TEveTrack",it="TEvePointSet",un="ROOT::Experimental::REveGeoShapeExtract";let Pt=0;function Sn(we,N,E){void 0===N&&(N=1),E||(Pt=0,E="");let H=(0,M.create)(M.clTGeoVolume);if(zt(H,T.kVisThis,!0),zt(H,T.kVisDaughters,!0),E&&we._typename!==ct||N<=0)return H.fName=E,H.fLineColor=Pt++%8+2,H.fShape=we,H;E&&(E+="/"),H.$geoh=!0,H.fName="";let me=(0,M.create)(M.clTGeoNodeMatrix);zt(me,T.kVisThis,!0),zt(me,T.kVisDaughters,!0),me.fName="Left",me.fMatrix=we.fNode.fLeftMat,me.fVolume=Sn(we.fNode.fLeft,N-1,E+"Left");let De=(0,M.create)(M.clTGeoNodeMatrix);return zt(De,T.kVisThis,!0),zt(De,T.kVisDaughters,!0),De.fName="Right",De.fMatrix=we.fNode.fRightMat,De.fVolume=Sn(we.fNode.fRight,N-1,E+"Right"),H.fNodes=(0,M.create)(M.clTList),H.fNodes.Add(me),H.fNodes.Add(De),E||(Pt=0),H}function Fn(we,N,E,H){if(!N?.arr?.length)return;let me={_name:E,_kind:"ROOT."+M.clTList,_title:H,_more:!0,_geoobj:N,_parent:we,_get:De=>Promise.resolve(De._geoobj||null),_expand(De,Re){if(Re.fVolume&&(Re=Re.fVolume.fNodes),!Re.arr)return!1;De._childs=[],$n(null,Re.arr);for(let Ue in Re.arr)Ol(De,Re.arr[Ue]);return!0}};we._childs||(we._childs=[]),we._childs.push(me)}function Gi(we,N){if(Of(),!we||!N)return!1;let Ue,Xe,pt,E=0===N._typename.indexOf(M.clTGeoNode),H=0===N._typename.indexOf(M.clTGeoVolume),me=N._typename===lt,De=N._typename===mt||N._typename===un,Re=N._typename===Lt;if(!(E||H||me||De||Re))return!1;if(we._childs)return!0;if(me)return Fn(we,N.fMaterials,"Materials","list of materials"),Fn(we,N.fMedia,"Media","list of media"),Fn(we,N.fTracks,"Tracks","list of tracks"),Fn(we,N.fOverlaps,"Overlaps","list of detected overlaps"),Ol(we,N.fMasterVolume),!0;if(Re)return Ol(we,N.fVolume1),Ol(we,N.fVolume2),Ol(we,N.fMarker,"Marker"),!0;if(De?(Xe=N.fElements?.arr,pt=N.fShape):(Ue=E?N.fVolume:N,Xe=Ue?.fNodes?.arr,pt=Ue?.fShape),!Xe&&pt?._typename===ct&&pt?.fNode)return we._childs||(Ol(we,pt.fNode.fLeft,"Left"),Ol(we,pt.fNode.fRight,"Right")),!0;if(!Xe)return!1;$n(N,Xe);for(let vt=0;vt<Xe.length;++vt)Ol(we,Xe[vt]);return!0}function In(we,N){for(;we;){if(we._painter?._camera)return N&&(0,M.isFunc)(we._painter[N])&&we._painter[N](),we;we=we._parent}return null}function ii(we){if(we._typename===mt||we._typename===un)return we.fRnrSelf?" geovis_this":"";let N=!ft(we,T.kVisNone)&&ft(we,T.kVisThis),E=ft(we,T.kVisDaughters);return E&&(!we.fNodes||0===we.fNodes.arr.length)&&(E=!1),N&&E?" geovis_all":N?" geovis_this":E?" geovis_daughters":""}function lr(we,N){!we||!N||N.forEachItem(E=>{(we===E._volume||we===E._geoobj)&&(E._icon=E._icon.split(" ")[0]+ii(we),N.updateTreeNode(E))})}class cr{constructor(N,E){this.bright=E,this.element=N.append("div").attr("class","geo_toolbar_group"),(0,ye.DW)(".geo_toolbar_group { float: left; box-sizing: border-box; position: relative; bottom: 23px; vertical-align: middle; white-space: nowrap; }\n          .geo_toolbar_group:first-child { margin-left: 2px; }\n          .geo_toolbar_group a { position: relative; font-size: 16px; padding: 3px 1px; cursor: pointer; line-height: normal; box-sizing: border-box; }\n          .geo_toolbar_group a svg { position: relative; top: 2px; }\n          .geo_toolbar_btn path { fill: rgba(0, 31, 95, 0.2); }\n          .geo_toolbar_btn path .active,\n          .geo_toolbar_btn path:hover { fill: rgba(0, 22, 72, 0.5); }\n          .geo_toolbar_btn_bright path { fill: rgba(255, 224, 160, 0.2); }\n          .geo_toolbar_btn_bright path .active,\n          .geo_toolbar_btn_bright path:hover { fill: rgba(255, 233, 183, 0.5); }",this.element.node())}addButtons(N){this.buttonsNames=[],N.forEach(E=>{let H=E.name;if(!H)throw new Error("must provide button name in button config");if(-1!==this.buttonsNames.indexOf(H))throw new Error(`button name ${H} is taken`);this.buttonsNames.push(H);let me=E.title||E.name;if(!(0,M.isFunc)(E.click))throw new Error("must provide button click() function in button config");let De=this.element.append("a").attr("class",this.bright?"geo_toolbar_btn_bright":"geo_toolbar_btn").attr("rel","tooltip").attr("data-title",me).on("click",E.click);ye.KL.createSVG(De,ye.KL[E.icon],16,me)})}changeBrightness(N){this.bright=N,this.element&&this.element.selectAll(N?".geo_toolbar_btn":".geo_toolbar_btn_bright").attr("class",N?"geo_toolbar_btn_bright":"geo_toolbar_btn")}cleanup(){this.element&&(this.element.remove(),delete this.element)}}class Qi extends Be.vm{constructor(N,E){super(),this.mesh=N&&N.material?N:null,this.bloom=E}setHighlight(N,E){return this.drawSpecial(N,E)}drawSpecial(N){let E=this.mesh;if(E&&E.material){if(N)return E.origin||(E.origin={color:E.material.color,emissive:E.material.emissive,opacity:E.material.opacity,width:E.material.linewidth,size:E.material.size}),this.bloom?(E.layers.enable(1),E.material.emissive=new L.Ilk(65280)):(E.material.color=new L.Ilk(N),E.material.opacity=1),E.hightlightWidthScale&&!M.browser.isWin&&(E.material.linewidth=E.origin.width*E.hightlightWidthScale),E.highlightScale&&(E.material.size=E.origin.size*E.highlightScale),!0;if(E.origin)return this.bloom?(E.material.emissive=E.origin.emissive,E.layers.enable(0)):(E.material.color=E.origin.color,E.material.opacity=E.origin.opacity),E.hightlightWidthScale&&(E.material.linewidth=E.origin.width),E.highlightScale&&(E.material.size=E.origin.size),!0}}}class tl extends Ie.tK{constructor(N,E){let H;E?._typename===lt&&(H=E,E=E.fMasterVolume),E?._typename&&0===E._typename.indexOf(M.clTGeoVolume)&&(E={_typename:M.clTGeoNode,fVolume:E,fName:E.fName,$geoh:E.$geoh,_proxy:!0}),super(N,E),H&&(this.geo_manager=H),this.no_default_title=!0,this.mode3d=!0,this.drawing_stage=0,this.drawing_log="Init",this.ctrl={clipIntersect:!0,clip:[{name:"x",enabled:!1,value:0,min:-100,max:100},{name:"y",enabled:!1,value:0,min:-100,max:100},{name:"z",enabled:!1,value:0,min:-100,max:100}],ssao:{enabled:!1,output:L.GaR.OUTPUT.Default,kernelRadius:0,minDistance:.001,maxDistance:.1},bloom:{enabled:!0,strength:1.5},info:{num_meshes:0,num_faces:0,num_shapes:0},highlight:!1,highlight_scene:!1,depthTest:!0,depthMethod:"dflt",select_in_view:!1,update_browser:!0,light:{kind:"points",top:!1,bottom:!1,left:!1,right:!1,front:!1,specular:!0,power:1},trans_radial:0,trans_z:0},this.ctrl.depthMethodItems=[{name:"Default",value:"dflt"},{name:"Raytraicing",value:"ray"},{name:"Boundary box",value:"box"},{name:"Mesh size",value:"size"},{name:"Central point",value:"pnt"}],this.ctrl.ssao.outputItems=[{name:"Default",value:L.GaR.OUTPUT.Default},{name:"SSAO Only",value:L.GaR.OUTPUT.SSAO},{name:"SSAO Only + Blur",value:L.GaR.OUTPUT.Blur},{name:"Beauty",value:L.GaR.OUTPUT.Beauty},{name:"Depth",value:L.GaR.OUTPUT.Depth},{name:"Normal",value:L.GaR.OUTPUT.Normal}],this.cleanup(!0)}changeStage(N,E){if(this.drawing_stage=N,!E)switch(N){case 0:E="Building done";break;case 1:E="collect visibles";break;case 2:E="worker collect visibles";break;case 3:E="Analyse visibles";break;case 4:E="collect shapes for building";break;case 5:E="Start build shapes";break;case 6:E="Worker build shapes";break;case 7:E="Build shapes";break;case 8:E="Build ready";break;case 9:E="Wait for main painter";break;case 10:E="Build projection";break;default:E=`stage ${N}`}this.drawing_log=E}isStage(N){return N===this.drawing_stage}createToolbar(){if(this._toolbar||!this._webgl||this.ctrl.notoolbar||(0,M.isBatchMode)())return;let N=[{name:"toImage",title:"Save as PNG",icon:"camera",click:()=>this.createSnapshot()},{name:"control",title:"Toggle control UI",icon:"rect",click:()=>this.showControlOptions("toggle")},{name:"enlarge",title:"Enlarge geometry drawing",icon:"circle",click:()=>this.toggleEnlarge()}];navigator.getVRDisplays&&(N.push({name:"entervr",title:"Enter VR (It requires a VR Headset connected)",icon:"vrgoggles",click:()=>this.toggleVRMode()}),this.initVRMode()),M.settings.ContextMenu&&N.push({name:"menu",title:"Show context menu",icon:"question",click:H=>{H.preventDefault(),H.stopPropagation(),!(0,He.W)()&&(0,He.Z)(H,this).then(me=>{me.painter.fillContextMenu(me),me.show()})}});let E=new L.Ilk(this.ctrl.background);this._toolbar=new cr(this.selectDom(),E.r+E.g+E.b<1),this._toolbar.addButtons(N)}initVRMode(){this._dolly=new L.ZAu,this._scene.add(this._dolly),this._standingMatrix=new L.yGw,this._raycasterEnd=new L.Pa4,this._raycasterOrigin=new L.Pa4,navigator.getVRDisplays().then(N=>{let E=N[0];E&&(this._renderer.vr.setDevice(E),this._vrDisplay=E,E.stageParameters&&this._standingMatrix.fromArray(E.stageParameters.sittingToStandingTransform),this.initVRControllersGeometry())})}initVRControllersGeometry(){let N=new L.xo$(.025,18,36),E=new L.vBJ({color:"grey",vertexColors:!1}),H=new L.vBJ({color:"fuchsia",vertexColors:!1}),me=new L.DvJ(.001,.001,2),De=new L.Kj0(me,H),Re=new L.Kj0(me,H),Ue=new L.Kj0(N,E),Xe=new L.Kj0(N,E);this._controllersMeshes=[],this._controllersMeshes.push(Ue),this._controllersMeshes.push(Xe),De.position.z-=1,Re.position.z-=1,Ue.add(De),Xe.add(Re),this._dolly.add(Ue),this._dolly.add(Xe),Ue.visible=!1,Xe.visible=!1}updateVRControllersList(){let N=navigator.getGamepads&&navigator.getGamepads();if(!this.vrControllers||N.length!==this.vrControllers.length){this._controllersMeshes.forEach(E=>{E.visible=!1}),this._vrControllers=[];for(let E=0;E<N.length;++E)!N[E]||!N[E].pose||(this._vrControllers.push({gamepad:N[E],mesh:this._controllersMeshes[E]}),this._controllersMeshes[E].visible=!0)}}processVRControllerIntersections(){let N=[];for(let E=0;E<this._vrControllers.length;++E){let H=this._vrControllers[E].mesh,me=H.localToWorld(this._raycasterEnd.set(0,0,-1)),De=H.localToWorld(this._raycasterOrigin.set(0,0,0));me.sub(De).normalize(),N=N.concat(this._controls.getOriginDirectionIntersects(De,me))}N=N.filter(function(E,H){return N.indexOf(E)===H}),this._controls.processMouseMove(N)}updateVRControllers(){this.updateVRControllersList();for(let N=0;N<this._vrControllers.length;++N){let E=this._vrControllers[N],H=E.gamepad.pose.orientation,me=E.gamepad.pose.position,De=E.mesh;H&&De.quaternion.fromArray(H),me&&De.position.fromArray(me),De.updateMatrix(),De.applyMatrix4(this._standingMatrix),De.matrixWorldNeedsUpdate=!0}this.processVRControllerIntersections()}toggleVRMode(){if(this._vrDisplay){if(this._vrDisplay.isPresenting)return void this.exitVRMode();this._previousCameraPosition=this._camera.position.clone(),this._previousCameraRotation=this._camera.rotation.clone(),this._vrDisplay.requestPresent([{source:this._renderer.domElement}]).then(()=>{this._previousCameraNear=this._camera.near,this._dolly.position.set(this._camera.position.x/4,-this._camera.position.y/8,-this._camera.position.z/4),this._camera.position.set(0,0,0),this._dolly.add(this._camera),this._camera.near=.1,this._camera.updateProjectionMatrix(),this._renderer.vr.enabled=!0,this._renderer.setAnimationLoop(()=>{this.updateVRControllers(),this.render3D(0)})}),this._renderer.vr.enabled=!0,window.addEventListener("keydown",N=>{"Escape"==N.code&&this.exitVRMode()})}}exitVRMode(){this._vrDisplay.isPresenting&&(this._renderer.vr.enabled=!1,this._dolly.remove(this._camera),this._scene.add(this._camera),this._camera.position.copy(this._previousCameraPosition),this._previousCameraPosition=void 0,this._camera.rotation.copy(this._previousCameraRotation),this._previousCameraRotation=void 0,this._camera.near=this._previousCameraNear,this._camera.updateProjectionMatrix(),this._vrDisplay.exitPresent())}getGeometry(){return this.getObject()}modifyVisisbility(N,E){if(0!==wn(this.getGeometry()))return;if(!N)return zt(this.getGeometry().fVolume,T.kVisThis,"+"===E);let H,me=!1;N.indexOf("*")<0?(H=new RegExp("^"+N+"$"),me=!0):(H=new RegExp("^"+N.split("*").join(".*")+"$"),me=!1),this.findNodeWithVolume(H,function(De){return Mt(De.node.fVolume,"+"!==E),me?De:null})}decodeOptions(N){(0,M.isStr)(N)||(N="");let E={_grid:!1,_bound:!1,_debug:!1,_full:!1,_axis:0,_count:!1,wireframe:!1,scale:new L.Pa4(1,1,1),zoom:1,rotatey:0,rotatez:0,more:1,maxlimit:1e5,vislevel:void 0,maxnodes:void 0,dflt_colors:!1,use_worker:!1,show_controls:!1,highlight:!1,highlight_scene:!1,no_screen:!1,project:"",is_main:!1,tracks:!1,showtop:!1,can_rotate:!0,ortho_camera:!1,clipx:!1,clipy:!1,clipz:!1,usessao:!1,usebloom:!0,outline:!1,script_name:"",transparency:0,rotate:!1,background:"#FFFFFF",depthMethod:"dflt",mouse_tmout:50,trans_radial:0,trans_z:0},H=(0,M.decodeUrl)();"true"==H.get("_grid")&&(E._grid=!0);let me=H.get("_debug");"true"==me&&(E._debug=!0,E._grid=!0),"bound"==me&&(E._debug=!0,E._grid=!0,E._bound=!0),"full"==me&&(E._debug=!0,E._grid=!0,E._full=!0,E._bound=!0);let De=N.indexOf("macro:");if(De>=0){let Ue=N.indexOf(";",De+6);Ue<0&&(Ue=N.length),E.script_name=N.slice(De+6,Ue),N=N.slice(0,De)+N.slice(Ue+1),console.log(`script ${E.script_name} rest ${N}`)}for(;;){let Ue=N.indexOf("+"),Xe=N.indexOf("-");if(Ue<0&&Xe<0)break;let pt=Ue,vt="+";(pt<0||Xe>=0&&Xe<Ue)&&(pt=Xe,vt="-");let Ht=pt+1,hn=new RegExp("[,; .]");for(;Ht<N.length&&!hn.test(N[Ht])&&"+"!=N[Ht]&&"-"!=N[Ht];)Ht++;let gn=N.substring(pt+1,Ht);N=N.slice(0,pt)+N.slice(Ht),this.modifyVisisbility(gn,vt)}let Re=new Ze.pc(N);if(Re.check("MAIN")&&(E.is_main=!0),Re.check("TRACKS")&&(E.tracks=!0),Re.check("SHOWTOP")&&(E.showtop=!0),Re.check("NO_SCREEN")&&(E.no_screen=!0),Re.check("ORTHO_CAMERA_ROTATE")&&(E.ortho_camera=!0,E.can_rotate=!0),Re.check("ORTHO_CAMERA")&&(E.ortho_camera=!0,E.can_rotate=!1),Re.check("MOUSE_CLICK")&&(E.mouse_click=!0),(Re.check("DEPTHRAY")||Re.check("DRAY"))&&(E.depthMethod="ray"),(Re.check("DEPTHBOX")||Re.check("DBOX"))&&(E.depthMethod="box"),(Re.check("DEPTHPNT")||Re.check("DPNT"))&&(E.depthMethod="pnt"),(Re.check("DEPTHSIZE")||Re.check("DSIZE"))&&(E.depthMethod="size"),(Re.check("DEPTHDFLT")||Re.check("DDFLT"))&&(E.depthMethod="dflt"),Re.check("ZOOM",!0)&&(E.zoom=Re.partAsFloat(0,100)/100),Re.check("ROTY",!0)&&(E.rotatey=Re.partAsFloat()),Re.check("ROTZ",!0)&&(E.rotatez=Re.partAsFloat()),Re.check("VISLVL",!0)&&(E.vislevel=Re.partAsInt()),Re.check("BLACK")&&(E.background="#000000"),Re.check("WHITE")&&(E.background="#FFFFFF"),Re.check("BKGR_",!0)){let Ue=null;if(Re.partAsInt(1)>0)Ue=(0,je.Lq)(Re.partAsInt());else for(let Xe=0;Xe<8;++Xe)(0,je.Lq)(Xe).toUpperCase()===Re.part&&(Ue=(0,je.Lq)(Xe));Ue&&(E.background="#"+new L.Ilk(Ue).getHexString())}return Re.check("R3D_",!0)&&(E.Render3D=M.constants.Render3D.fromString(Re.part.toLowerCase())),Re.check("MORE3")&&(E.more=3),Re.check("MORE")&&(E.more=2),Re.check("ALL")&&(E.more=10,E.vislevel=9),(Re.check("CONTROLS")||Re.check("CTRL"))&&(E.show_controls=!0),Re.check("CLIPXYZ")&&(E.clipx=E.clipy=E.clipz=!0),Re.check("CLIPX")&&(E.clipx=!0),Re.check("CLIPY")&&(E.clipy=!0),Re.check("CLIPZ")&&(E.clipz=!0),Re.check("CLIP")&&(E.clipx=E.clipy=E.clipz=!0),Re.check("PROJX",!0)&&(E.project="x",Re.partAsInt(1)>0&&(E.projectPos=Re.partAsInt()),E.can_rotate=!1),Re.check("PROJY",!0)&&(E.project="y",Re.partAsInt(1)>0&&(E.projectPos=Re.partAsInt()),E.can_rotate=!1),Re.check("PROJZ",!0)&&(E.project="z",Re.partAsInt(1)>0&&(E.projectPos=Re.partAsInt()),E.can_rotate=!1),(Re.check("DFLT_COLORS")||Re.check("DFLT"))&&(E.dflt_colors=!0),Re.check("SSAO")&&(E.usessao=!0),Re.check("NOBLOOM")&&(E.usebloom=!1),Re.check("BLOOM")&&(E.usebloom=!0),Re.check("OUTLINE")&&(E.outline=!0),Re.check("NOWORKER")&&(E.use_worker=-1),Re.check("WORKER")&&(E.use_worker=1),(Re.check("NOHIGHLIGHT")||Re.check("NOHIGH"))&&(E.highlight_scene=E.highlight=0),Re.check("HIGHLIGHT")&&(E.highlight_scene=E.highlight=!0),Re.check("HSCENEONLY")&&(E.highlight_scene=!0,E.highlight=0),Re.check("NOHSCENE")&&(E.highlight_scene=0),Re.check("HSCENE")&&(E.highlight_scene=!0),(Re.check("WIREFRAME")||Re.check("WIRE"))&&(E.wireframe=!0),Re.check("ROTATE")&&(E.rotate=!0),(Re.check("INVX")||Re.check("INVERTX"))&&(E.scale.x=-1),(Re.check("INVY")||Re.check("INVERTY"))&&(E.scale.y=-1),(Re.check("INVZ")||Re.check("INVERTZ"))&&(E.scale.z=-1),Re.check("COUNT")&&(E._count=!0),Re.check("TRANSP",!0)&&(E.transparency=Re.partAsInt(0,100)/100),Re.check("OPACITY",!0)&&(E.transparency=1-Re.partAsInt(0,100)/100),(Re.check("AXISCENTER")||Re.check("AC"))&&(E._axis=2),Re.check("TRR",!0)&&(E.trans_radial=Re.partAsInt()/100),Re.check("TRZ",!0)&&(E.trans_z=Re.partAsInt()/100),(Re.check("AXIS")||Re.check("A"))&&(E._axis=!0),Re.check("D")&&(E._debug=!0),Re.check("G")&&(E._grid=!0),Re.check("B")&&(E._bound=!0),Re.check("W")&&(E.wireframe=!0),Re.check("F")&&(E._full=!0),Re.check("Y")&&(E._yup=!0),Re.check("Z")&&(E._yup=!1),void 0===E._yup&&(E._yup=this.getCanvSvg().empty()),E}activateInBrowser(N,E){(0,M.isStr)(N)&&(N=[N]),this._hpainter&&(this._hpainter.activateItems(N,E),this.ctrl.update_browser||setTimeout(()=>this._hpainter.activateItems([]),2e3))}testMatrixes(){let N=0,E=0,H=0,me={domatrix:!0,func:()=>{let Ue=this.getmatrix(),Xe=this.CopyStack(),pt=this._clones.createObject3D(Xe.stack,this._toplevel,"mesh");if(!pt)return!0;E++;let Ht,vt=pt.matrixWorld;if(vt.equals(Ue)||vt.determinant()>0&&Ue.determinant()<-.9&&(Ht=new L.Pa4(1,1,-1),Ue=Ue.clone().scale(Ht),vt.equals(Ue)))return!0;let hn=0;for(let gn=0;gn<16;++gn)hn=Math.max(hn,Math.abs(vt.elements[gn]-Ue.elements[gn]));return H=Math.max(hn,H),hn<1e-4||(console.log(`${this._clones.resolveStack(Xe.stack).name} maxdiff ${hn} determ ${vt.determinant()} ${Ue.determinant()}`),N++,!1)}},De=(new Date).getTime();this._clones.scanVisible(me);let Re=(new Date).getTime();console.log(`Compare matrixes total ${E} errors ${N} takes ${Re-De} maxdiff ${H}`)}fillContextMenu(N){N.add("header: Draw options"),N.addchk(this.ctrl.update_browser,"Browser update",()=>{this.ctrl.update_browser=!this.ctrl.update_browser,this.ctrl.update_browser||this.activateInBrowser([])}),N.addchk(this.ctrl.show_controls,"Show Controls",()=>this.showControlOptions("toggle")),N.addchk(this.ctrl._axis,"Show axes",()=>this.setAxesDraw("toggle")),this.geo_manager&&N.addchk(this.ctrl.showtop,"Show top volume",()=>this.setShowTop(!this.ctrl.showtop)),N.addchk(this.ctrl.wireframe,"Wire frame",()=>this.toggleWireFrame()),N.addchk(this.ctrl.highlight,"Highlight volumes",()=>{this.ctrl.highlight=!this.ctrl.highlight}),N.addchk(this.ctrl.highlight_scene,"Highlight scene",()=>{this.ctrl.highlight_scene=!this.ctrl.highlight_scene}),N.add("Reset camera position",()=>this.focusCamera()),this._geom_viewer||N.add("Get camera position",()=>N.info("Position (as url)","&opt="+this.produceCameraUrl())),this.ctrl.project||N.addchk(this.ctrl.rotate,"Autorotate",()=>this.setAutoRotate(!this.ctrl.rotate)),N.addchk(this.ctrl.select_in_view,"Select in view",()=>{this.ctrl.select_in_view=!this.ctrl.select_in_view,this.ctrl.select_in_view&&this.startDrawGeometry()})}changedGlobalTransparency(N,E){let H=(0,M.isFunc)(N)?N:null;(H||void 0===N)&&(N=this.ctrl.transparency),this._toplevel.traverse(me=>{if(void 0!==me?.material?.inherentOpacity){let De=H?H(me):void 0;me.material.opacity=void 0!==De?1-De:Math.min(1-(N||0),me.material.inherentOpacity),me.material.transparent=me.material.opacity<1}}),E||this.render3D(-1)}resetTransformation(){this.changedTransformation("reset")}changedTransformation(N){if(!this._toplevel)return;let E=this.ctrl,H=new L.yGw,me=new L.Pa4;"reset"==N&&(E.trans_z=E.trans_radial=0),this._toplevel.traverse(De=>{if(void 0===De.stack)return;let Re=De.parent;if("reset"==N)return Re.matrix0&&(Re.matrix.copy(Re.matrix0),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.matrixWorldNeedsUpdate=!0),delete Re.matrix0,delete Re.vect0,delete Re.vect1,void delete Re.minvert;if(void 0===Re.vect0){Re.matrix0=Re.matrix.clone(),Re.minvert=(new L.yGw).copy(Re.matrixWorld).invert();let Ue=ot(De,null,!0);Re.vect0=new L.Pa4((Ue.max.x+Ue.min.x)/2,(Ue.max.y+Ue.min.y)/2,(De._flippedMesh?-1:1)*(Ue.max.z+Ue.min.z)/2).applyMatrix4(Re.matrixWorld),Re.vect1=new L.Pa4(0,0,0).applyMatrix4(Re.minvert)}me.set(E.trans_radial*Re.vect0.x,E.trans_radial*Re.vect0.y,E.trans_z*Re.vect0.z).applyMatrix4(Re.minvert).sub(Re.vect1),Re.matrix.multiplyMatrices(Re.matrix0,H.makeTranslation(me.x,me.y,me.z)),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.matrixWorldNeedsUpdate=!0}),this._toplevel.updateMatrixWorld(),"norender"!=N&&this.drawSimpleAxis()}changedAutoRotate(){this.autorotate(2.5)}changedAxes(){(0,M.isStr)(this.ctrl._axis)&&(this.ctrl._axis=parseInt(this.ctrl._axis)),this.drawSimpleAxis()}changedBackground(N){if(void 0!==N&&(this.ctrl.background=N),this._scene.background=new L.Ilk(this.ctrl.background),this._renderer.setClearColor(this._scene.background,1),this.render3D(0),this._toolbar){let E=new L.Ilk(this.ctrl.background);this._toolbar.changeBrightness(E.r+E.g+E.b<1)}}changedSSAO(){this.ctrl.ssao.enabled?(this.createSSAO(),this._ssaoPass.output=parseInt(this.ctrl.ssao.output),this._ssaoPass.kernelRadius=this.ctrl.ssao.kernelRadius,this._ssaoPass.minDistance=this.ctrl.ssao.minDistance,this._ssaoPass.maxDistance=this.ctrl.ssao.maxDistance):this.removeSSAO(),this.updateClipping(),this._slave_painters&&this._slave_painters.forEach(N=>{Object.assign(N.ctrl.ssao,this.ctrl.ssao),N.changedSSAO()})}showControlOptions(N){if(this.ctrl){if("toggle"===N?N=!this._datgui:void 0===N&&(N=this.ctrl.show_controls),this.ctrl.show_controls=N,this._datgui)return void(N||(this._datgui.domElement.remove(),this._datgui.destroy(),delete this._datgui));N&&Ce.e(267).then(Ce.bind(Ce,8267)).then(E=>this.buildDatGui(E))}}buildDatGui(N){if(!this._renderer)return;if(!N)throw Error("Fail to load dat.gui");this._datgui=new N.GUI({autoPlace:!1,width:Math.min(650,this._renderer.domElement.width/2)});let E=this.selectDom();"static"==E.style("position")&&E.style("position","relative");let H=this._datgui.domElement;if(H.style.position="absolute",H.style.top=0,H.style.right=0,E.node().appendChild(H),this._datgui.painter=this,this.ctrl.project){let vt=this.getGeomBoundingBox(this.getProjectionSource(),.01),Ht=this.ctrl.project;void 0===this.ctrl.projectPos&&(this.ctrl.projectPos=(vt.min[Ht]+vt.max[Ht])/2),this._datgui.add(this.ctrl,"projectPos",vt.min[Ht],vt.max[Ht]).name(Ht.toUpperCase()+" projection").onChange(()=>this.startDrawGeometry())}else{let vt=this._datgui.addFolder("Clipping"),Ht=()=>this.changedClipping(-1);for(let hn=0;hn<3;++hn){let gn=this.ctrl.clip[hn],mn=gn.name.toUpperCase();vt.add(gn,"enabled").name("Enable "+mn).listen().onChange(Ht),vt.add(gn,"value",gn.min,gn.max).name(mn+" position").onChange(this.changedClipping.bind(this,hn))}vt.add(this.ctrl,"clipIntersect").name("Clip intersection").listen().onChange(Ht)}let me=this._datgui.addFolder("Appearance");if(me.add(this.ctrl,"highlight").name("Highlight Selection").listen().onChange(()=>this.changedHighlight()),me.add(this.ctrl,"transparency",0,1,.001).listen().onChange(vt=>this.changedGlobalTransparency(vt)),me.addColor(this.ctrl,"background").name("Background").onChange(vt=>this.changedBackground(vt)),me.add(this.ctrl,"wireframe").name("Wireframe").listen().onChange(()=>this.changedWireFrame()),this.ctrl._axis_cfg=0,me.add(this.ctrl,"_axis",{none:0,show:1,center:2}).name("Axes").onChange(()=>this.changedAxes()),this.ctrl.project||me.add(this.ctrl,"rotate").name("Autorotate").listen().onChange(()=>this.changedAutoRotate()),me.add(this,"focusCamera").name("Reset camera position"),this._webgl){let vt=this._datgui.addFolder("Advanced"),Ht={};this.ctrl.depthMethodItems.forEach(hn=>{Ht[hn.name]=hn.value}),vt.add(this.ctrl,"depthTest").name("Depth test").listen().onChange(()=>this.changedDepthTest()),vt.add(this.ctrl,"depthMethod",Ht).name("Rendering order").onChange(hn=>this.changedDepthMethod(hn)),vt.add(this.ctrl,"ortho_camera").name("Orhographic camera").listen().onChange(()=>this.changeCamera()),vt.add(this,"resetAdvanced").name("Reset")}if(!this.ctrl.project){let vt=this._datgui.addFolder("Transform");vt.add(this.ctrl,"trans_z",0,3,.01).name("Z axis").listen().onChange(()=>this.changedTransformation()),vt.add(this.ctrl,"trans_radial",0,3,.01).name("Radial").listen().onChange(()=>this.changedTransformation()),vt.add(this,"resetTransformation").name("Reset"),(this.ctrl.trans_z||this.ctrl.trans_radial)&&vt.open()}if(this.ctrl.outline)return;let De=this._datgui.addFolder("Smooth Lighting (SSAO)"),Re=()=>this.changedSSAO(),Ue={};this.ctrl.ssao.outputItems.forEach(vt=>{Ue[vt.name]=vt.value}),De.add(this.ctrl.ssao,"enabled").name("Enable SSAO").listen().onChange(Re),De.add(this.ctrl.ssao,"output",Ue).listen().onChange(Re),De.add(this.ctrl.ssao,"kernelRadius",0,32).listen().onChange(Re),De.add(this.ctrl.ssao,"minDistance",.001,.02).listen().onChange(Re),De.add(this.ctrl.ssao,"maxDistance",.01,.3).listen().onChange(Re);let Xe=this._datgui.addFolder("Unreal Bloom"),pt=()=>this.changedBloomSettings();Xe.add(this.ctrl.bloom,"enabled").name("Enable Blooming").listen().onChange(pt),Xe.add(this.ctrl.bloom,"strength",0,3).name("Strength").listen().onChange(pt)}changedBloomSettings(){this.ctrl.bloom.enabled?(this.createBloom(),this._bloomPass.strength=this.ctrl.bloom.strength):this.removeBloom(),this._slave_painters&&this._slave_painters.forEach(N=>{Object.assign(N.ctrl.bloom,this.ctrl.bloom),N.changedBloomSettings()})}changeCamera(){this._controls&&(this._controls.cleanup(),delete this._controls),this.removeBloom(),this.removeSSAO(),this.createCamera(),this.createSpecialEffects(),this._first_drawing=!0,this.startDrawGeometry(!0)}createBloom(){this._bloomPass||(this._camera.layers.enable(1),this._bloomComposer=new L.xCo(this._renderer),this._bloomComposer.addPass(new L.CDd(this._scene,this._camera)),this._bloomPass=new L.mih(new L.FM8(window.innerWidth,window.innerHeight),1.5,.4,.85),this._bloomPass.threshold=0,this._bloomPass.strength=this.ctrl.bloom.strength,this._bloomPass.radius=0,this._bloomPass.renderToScreen=!0,this._bloomComposer.addPass(this._bloomPass),this._renderer.autoClear=!1)}removeBloom(){this._bloomPass&&(delete this._bloomPass,delete this._bloomComposer,this._renderer.autoClear=!0,this._camera.layers.disable(1))}removeSSAO(){delete this._ssaoPass,delete this._effectComposer}createSSAO(){this._webgl&&(this._ssaoPass||(this._effectComposer||(this._effectComposer=new L.xCo(this._renderer),this._effectComposer.addPass(new L.CDd(this._scene,this._camera))),this._ssaoPass=new L.GaR(this._scene,this._camera,this._scene_width,this._scene_height),this._ssaoPass.kernelRadius=16,this._ssaoPass.renderToScreen=!0,this._effectComposer.addPass(this._ssaoPass)))}orbitContext(N,E){(0,He.Z)(N,this).then(H=>{let me=0,De=0,Re=0;if(E)for(let Ue=0;Ue<E.length;++Ue)E[Ue].object.stack&&De++,E[Ue].object.geo_name&&me++;if(De+me===0)this.fillContextMenu(H);else{let Ue=De+me>1;Ue&&H.add("header:"+(me>0?"Items":"Nodes"));for(let Xe=0;Xe<E.length;++Xe){let vt,Ht,hn,pt=E[Xe].object;if(pt.geo_name)Ht=pt.geo_name,0==Ht.indexOf("<prnt>")&&(Ht=(this.getItemName()||"top")+Ht.slice(6)),vt=Ht.slice(Ht.lastIndexOf("/")+1),vt||(vt=Ht),hn=vt;else{if(!pt.stack)continue;vt=this._clones.resolveStack(pt.stack).name,Ht=this.getStackFullName(pt.stack),hn=this.getItemName(),0===vt.indexOf("Nodes/")?hn=vt.slice(6):vt?hn=vt:hn||(hn="header")}if(H.add((Ue?"sub:":"header:")+hn,Ht,mn=>this.activateInBrowser([mn],!0)),H.add("Browse",Ht,mn=>this.activateInBrowser([mn],!0)),this._hpainter&&H.add("Inspect",Ht,mn=>this._hpainter.display(mn,"inspect")),pt.geo_name){H.add("Hide",Xe,mn=>{let An=E[mn].object;An.visible=!1,An.geo_object&&(An.geo_object.$hidden_via_menu=!0),H.painter.render3D()}),Ue&&H.add("endsub:");continue}let gn=this.accessObjectWireFrame(pt);void 0!==gn&&H.addchk(gn,"Wireframe",Xe,function(mn){let An=E[mn].object.material;An.wireframe=!An.wireframe,this.render3D()}),++Re>1&&H.add("Manifest",Xe,function(mn){this._last_manifest&&(this._last_manifest.wireframe=!this._last_manifest.wireframe),this._last_hidden&&this._last_hidden.forEach(An=>{An.visible=!0}),this._last_hidden=[];for(let An=0;An<mn;++An)this._last_hidden.push(E[An].object);this._last_hidden.forEach(An=>{An.visible=!1}),this._last_manifest=E[mn].object.material,this._last_manifest.wireframe=!this._last_manifest.wireframe,this.render3D()}),H.add("Focus",Xe,function(mn){this.focusCamera(E[mn].object)}),this._geom_viewer||H.add("Hide",Xe,function(mn){let An=H.painter._clones.resolveStack(E[mn].object.stack);An.obj&&An.node.kind===F&&An.obj.fVolume?(zt(An.obj.fVolume,T.kVisThis,!1),lr(An.obj.fVolume,this._hpainter)):An.obj&&An.node.kind===R&&(An.obj.fRnrSelf=!1,lr(An.obj,this._hpainter)),this.testGeomChanges()}),Ue&&H.add("endsub:")}}H.show()})}filterIntersects(N){if(!N.length)return N;for(let H=0;H<N.length;++H)N[H].object.geo_highlight&&(N[H].object=N[H].object.geo_highlight);for(let H=N.length-1;H>=0;--H){let me=N[H].object,De=void 0!==me.stack||void 0!==me.geo_name;De&&me.material&&void 0!==me.material.opacity&&(De=me.material.opacity>=.1),me.jsroot_special&&(De=!1);for(let Re=0;Re<H&&De;++Re)N[Re].object===me&&(De=!1);De||N.splice(H,1)}let E=this.ctrl.clip;if(E[0].enabled||E[1].enabled||E[2].enabled){let H=[];for(let me=0;me<N.length;++me){let De=N[me].point,Re="Points"==N[me].object.type,Ue=!0;E[0].enabled&&this._clipPlanes[0].normal.dot(De)>this._clipPlanes[0].constant^Re&&(Ue=!1),E[1].enabled&&this._clipPlanes[1].normal.dot(De)>this._clipPlanes[1].constant^Re&&(Ue=!1),E[2].enabled&&this._clipPlanes[2].normal.dot(De)>this._clipPlanes[2].constant&&(Ue=!1),Ue||H.push(N[me])}N=H}return N}testCameraPositionChange(){this.ctrl.select_in_view&&!this._draw_all_nodes&&(Ta(xa(this._camera)).CheckBox(this.getGeomBoundingBox(this._toplevel))||this.startDrawGeometry())}resolveStack(N){return this._clones&&N?this._clones.resolveStack(N):null}getStackFullName(N){let E=this.getItemName(),H=this.resolveStack(N);return H&&H.name?E?E+"/"+H.name:H.name:E}addHighlightHandler(N){(0,M.isFunc)(N?.highlightMesh)&&(this._highlight_handlers||(this._highlight_handlers=[]),this._highlight_handlers.push(N))}highlightMesh(N,E,H,me,De,Re){if(H){N=N?[N]:[];let vt=this.getExtrasContainer();vt&&vt.traverse(Ht=>{Ht.geo_object===H&&N.indexOf(Ht)<0&&N.push(Ht)})}else De&&this._toplevel?(N=[],this._toplevel.traverse(vt=>{vt instanceof L.Kj0&&function st(we,N){if(!we||!N)return!1;if(we===N)return!0;if(we.length!==N.length)return!1;for(let E=0;E<we.length;++E)if(we[E]!==N[E])return!1;return!0}(vt.stack,De)&&N.push(vt)})):N=N?[N]:[];if(N.length||(N=null),N&&(N[0].geo_object?this.ctrl.highlight_scene||(N=null):this.ctrl.highlight||(N=null)),!Re){N&&(H||(H=N[0].geo_object),De||(De=N[0].stack));let vt=this._highlight_handlers||(this._main_painter?this._main_painter._slave_painters.concat([this._main_painter]):this._slave_painters);for(let Ht=0;Ht<vt.length;++Ht)vt[Ht]!==this&&vt[Ht].highlightMesh(null,E,H,me,De,!0)}let Ue=this._selected_mesh,Xe=!1;if(!Ue&&!N)return!1;const pt=vt=>vt.get_ctrl?vt.get_ctrl():new Qi(vt,this.ctrl.bloom.enabled);if(Ue&&N&&Ue.length==N.length){Xe=!0;for(let vt=0;vt<Ue.length&&Xe;++vt)(Ue[vt]!==N[vt]||pt(Ue[vt]).checkHighlightIndex(me))&&(Xe=!1)}if(Xe)return!!Ue;if(Ue)for(let vt=0;vt<Ue.length;++vt)pt(Ue[vt]).setHighlight();if(this._selected_mesh=N,N)for(let vt=0;vt<N.length;++vt)pt(N[vt]).setHighlight(E||65280,me);return this.render3D(0),!!N}processMouseClick(N,E,H){if(!E.length)return;let me=E[0].object;if(!me.get_ctrl)return;let De=me.get_ctrl(),Re=De.extractIndex(E[0]);De.evnt=H,De.setSelected("blue",Re)&&this.render3D(),De.evnt=null}setMouseTmout(N){this.ctrl&&(this.ctrl.mouse_tmout=N),this._controls&&(this._controls.mouse_tmout=N)}setDepthMethod(N){this.ctrl&&(this.ctrl.depthMethod=N)}addOrbitControls(){this._controls||!this._webgl||(0,M.isBatchMode)()||(this.setTooltipAllowed(M.settings.Tooltip),this._controls=(0,Be.JV)(this,this._camera,this._scene,this._renderer,this._lookat),this._controls.mouse_tmout=this.ctrl.mouse_tmout,this.ctrl.can_rotate||(this._controls.enableRotate=!1),this._controls.contextMenu=this.orbitContext.bind(this),this._controls.processMouseMove=N=>{if(!this.ctrl||!this._controls)return;let Re,Ue,E=null,H=null,me=null,De=[];for(let pt=0;pt<N.length;++pt){let vt=N[pt].object,Ht=null;vt&&(vt.geo_object?Ht=vt.geo_name:vt.stack&&(Ht=this.getStackFullName(vt.stack)),Ht&&(0==Ht.indexOf("<prnt>")&&(Ht=this.getItemName()+Ht.slice(6)),De.push(Ht),E||(E=vt,H=Ht,Re=vt.geo_object,vt.get_ctrl&&(Ue=vt.get_ctrl().extractIndex(N[pt]),void 0!==Ue&&(0,M.isStr)(H)&&(H+=" indx:"+JSON.stringify(Ue))),E.stack&&(me=this.resolveStack(E.stack)))))}if(this.highlightMesh(E,void 0,Re,Ue),this.ctrl.update_browser&&(this.ctrl.highlight&&H&&(De=[H]),this.activateInBrowser(De)),!me||!me.obj)return H;let Xe=ga(me.obj);return Xe.unshift(H),{name:me.obj.fName,title:me.obj.fTitle||me.obj._typename,lines:Xe}},this._controls.processMouseLeave=function(){this.processMouseMove([])},this._controls.processDblClick=()=>{!this.ctrl||!this._controls||(this._last_manifest?(this._last_manifest.wireframe=!this._last_manifest.wireframe,this._last_hidden&&this._last_hidden.forEach(N=>{N.visible=!0}),delete this._last_hidden,delete this._last_manifest,this.render3D()):this.adjustCameraPosition())})}addTransformControl(){this._tcontrols||!this.ctrl._debug&&!this.ctrl._grid||(this._tcontrols=new L.Ys8(this._camera,this._renderer.domElement),this._scene.add(this._tcontrols),this._tcontrols.attach(this._toplevel),window.addEventListener("keydown",N=>{switch(N.key){case"q":this._tcontrols.setSpace("local"===this._tcontrols.space?"world":"local");break;case"Control":this._tcontrols.setTranslationSnap(Math.ceil(this._overall_size)/50),this._tcontrols.setRotationSnap(L.M8C.degToRad(15));break;case"t":this._tcontrols.setMode("translate");break;case"r":this._tcontrols.setMode("rotate");break;case"s":this._tcontrols.setMode("scale");break;case"+":this._tcontrols.setSize(this._tcontrols.size+.1);break;case"-":this._tcontrols.setSize(Math.max(this._tcontrols.size-.1,.1))}}),window.addEventListener("keyup",N=>{"Control"==N.key&&(this._tcontrols.setTranslationSnap(null),this._tcontrols.setRotationSnap(null))}),this._tcontrols.addEventListener("change",()=>this.render3D(0)))}nextDrawAction(){if(!this._clones||this.isStage(0))return!1;if(this.isStage(1)){if(this._geom_viewer)return this._draw_all_nodes=!1,this.changeStage(3),!0;if(this.ctrl.use_worker>0){if(!this._worker)return this.startWorker(),1;if(!this._worker_ready)return 1}let N=this._first_drawing?this._clones.countVisibles():0,E=null,H=null;N||(N=this._clones.markVisibles(!1,!1,!!this.geo_manager&&!this.ctrl.showtop)),this.ctrl.select_in_view&&!this._first_drawing&&(E=xa(this._camera),H=Ta(E),H.CheckBox(this.getGeomBoundingBox(this._toplevel))&&(E=null,H=null)),this._current_face_limit=this.ctrl.maxlimit,E&&(this._current_face_limit*=1.25);let me=!(0,M.isBatchMode)()&&M.browser.isChrome&&(N>1e4||E&&this._clones.scanVisible()>1e5);if(me&&0==M.source_dir.indexOf("file://")&&(console.log("disable worker for jsroot from file system"),me=!1),me&&!this._worker&&this.ctrl.use_worker>=0&&this.startWorker(),!me||!this._worker_ready){let Re=this._clones.collectVisibles(this._current_face_limit,H);return this._new_draw_nodes=Re.lst,this._draw_all_nodes=Re.complete,this.changeStage(3),!0}let De={collect:this._current_face_limit,flags:this._clones.getVisibleFlags(),matrix:E?E.elements:null};return this.submitToWorker(De),this.changeStage(2),2}if(this.isStage(2))return 2;if(this.isStage(3)){if(this._new_append_nodes)this._new_draw_nodes=this._draw_nodes.concat(this._new_append_nodes),delete this._new_append_nodes;else if(this._draw_nodes){let N;N=this._geom_viewer?this._draw_nodes:this._clones.mergeVisibles(this._new_draw_nodes,this._draw_nodes);for(let E=0;E<N.length;++E)this._clones.createObject3D(N[E].stack,this._toplevel,"delete_mesh");N.length>0&&(this.drawing_log=`Delete ${N.length} nodes`)}return this._draw_nodes=this._new_draw_nodes,delete this._new_draw_nodes,this.changeStage(4),!0}if(this.isStage(4)){let N=this._clones.collectShapes(this._draw_nodes);return this._build_shapes=this._clones.mergeShapesLists(this._build_shapes,N),this.changeStage(5),!0}if(this.isStage(5)){if(this.canSubmitToWorker()){let N={limit:this._current_face_limit,shapes:[]},E=0;for(let H=0;H<this._build_shapes.length;++H){let me=null,De=this._build_shapes[H];De.ready||De.geom?me={id:De.id,ready:!0,nfaces:eo(De.geom),refcnt:De.refcnt}:(me=(0,M.clone)(De,null,!0),E++),N.shapes.push(me)}if(E>0)return this.submitToWorker(N),this.changeStage(6),2}this.changeStage(7)}if(this.isStage(6))return 2;if(this.isStage(7)||this.isStage(8)){if(this.isStage(7)){let me=this._clones.buildShapes(this._build_shapes,this._current_face_limit,500);if(me.done)this.ctrl.info.num_shapes=this._build_shapes.length,this.changeStage(8);else if(this.ctrl.info.num_shapes=me.shapes,this.drawing_log=`Creating: ${me.shapes} / ${this._build_shapes.length} shapes,  ${me.faces} faces`,me.notusedshapes<30)return!0}let N=(new Date).getTime(),E=!0,H=this.ctrl.project?this._full_geom:this._toplevel;for(let me=0;me<this._draw_nodes.length;++me){let De=this._draw_nodes[me];if(De.done)continue;let Re=De.server_shape||this._build_shapes[De.shapeid];if(Re.ready){if(De.done=!0,Re.used=!0,this.createEntryMesh(De,Re,H)&&(this.ctrl.info.num_meshes++,this.ctrl.info.num_faces+=Re.nfaces),(new Date).getTime()-N>500){E=!1;break}}else this.isStage(8)&&console.warn("shape marked as not ready when should"),E=!1}return E?this.ctrl.project?(this.changeStage(10),!0):(this.changeStage(0),!1):(this.isStage(7)||(this.drawing_log=`Building meshes ${this.ctrl.info.num_meshes} / ${this.ctrl.info.num_faces}`),!0)}if(this.isStage(9)){if(!this._main_painter)return this.changeStage(0,"Lost main painter"),!1;if(!this._main_painter._drawing_ready)return 1;this.changeStage(10)}return this.isStage(10)?(this.doProjection(),this.changeStage(0),!1):(console.error(`never come here, stage ${this.drawing_stage}`),!1)}createEntryMesh(N,E,H){if(!E.geom||0===E.nfaces)return this._clones.createObject3D(N.stack,H,"delete_mesh"),!1;this._splitColors&&N.stack&&(0===N.stack[0]?N.custom_color="green":1===N.stack[0]&&(N.custom_color="blue"));let Ue,me=this._clones.getDrawEntryProperties(N,(0,je._V)()),De=this._clones.createObject3D(N.stack,H,this.ctrl),Re=De.absMatrix||De.matrixWorld;if(me.material.wireframe=this.ctrl.wireframe,me.material.side=this.ctrl.bothSides?L.ehD:L.Wl3,Ue=Re.determinant()>-.9?new L.Kj0(E.geom,me.material):rt(E,me.material),De.add(Ue),De.absMatrix&&(Ue.matrix.copy(De.absMatrix),Ue.matrix.decompose(Ue.position,Ue.quaternion,Ue.scale),Ue.updateMatrixWorld()),Ue.stack=N.stack,Ue.renderOrder=this._clones.maxdepth-N.stack.length,Ue.$jsroot_order=De.$jsroot_depth,this.ctrl._debug||this.ctrl._full){let Xe=new L.Uk6(Ue.geometry),pt=new L.nls({color:me.fillcolor,linewidth:me.linewidth||1}),vt=new L.ejS(Xe,pt);De.add(vt)}if(this.ctrl._bound||this.ctrl._full){let Xe=new L.fQA(Ue);De.add(Xe)}return!0}appendMoreNodes(N,E){if(!this.isStage(0)&&!E)return void(this._provided_more_nodes=N);if(this._more_nodes)for(let me=0;me<this._more_nodes.length;++me){let De=this._more_nodes[me],Re=this._clones.createObject3D(De.stack,this._toplevel,"delete_mesh");(0,Be.mF)(Re),(we=De.server_shape)&&((0,M.isFunc)(we.geom?.dispose)&&we.geom.dispose(),(0,M.isFunc)(we.geomZ?.dispose)&&we.geomZ.dispose(),delete we.geom,delete we.geomZ),delete De.server_shape}var we;if(delete this._more_nodes,!N)return;let H=[];for(let me=0;me<N.length;++me){let De=N[me],Re=De.server_shape;Re?.ready&&(De.done=!0,Re.used=!0,this.createEntryMesh(De,Re,this._toplevel)&&H.push(De))}H.length>0&&(this._more_nodes=H),E||this.render3D()}getProjectionSource(){return this._clones_owner?this._full_geom:this._main_painter?this._main_painter._drawing_ready?this._main_painter._toplevel:(console.warn("MAIN PAINTER NOT READY WHEN DO PROJECTION"),null):(console.warn("MAIN PAINTER DISAPPER"),null)}getGeomBoundingBox(N,E){let H=new L.ZzF,me=!this._clones;return N?(H.makeEmpty(),N.traverse(De=>{(me||De.stack&&De instanceof L.Kj0||De.main_track&&De instanceof L.ejS)&&ot(De,H)}),void 0!==E&&H.expandByVector(H.getSize(new L.Pa4).multiplyScalar(E)),H):(H.min.x=H.min.y=H.min.z=-1,H.max.x=H.max.y=H.max.z=1,H)}doProjection(){let N=this.getProjectionSource();if(!N)return!1;if((0,Be.mF)(this._toplevel,!0),void 0===this.ctrl.projectPos){let E=this.getGeomBoundingBox(N),H=E.min[this.ctrl.project],me=E.max[this.ctrl.project],De=(H+me)/2;H<0&&me>0&&Math.abs(De)<.2*Math.max(-H,me)&&(De=0),this.ctrl.projectPos=De}return N.traverse(E=>{if(!(E instanceof L.Kj0&&E.stack))return;let H=function xr(we,N,E,H,me){we.boundingBox||we.computeBoundingBox();let De=we.boundingBox.clone();if(De.applyMatrix4(N),H||(H=0),De.min[E]>=H&&De.max[E]>=H||De.min[E]<=H&&De.max[E]<=H)return null;let Re=new p(we,N,0,me),Ue=2*Math.max(Math.abs(De.min.x),Math.abs(De.max.x)),Xe=2*Math.max(Math.abs(De.min.y),Math.abs(De.max.y)),pt=2*Math.max(Math.abs(De.min.z),Math.abs(De.max.z)),vt=1e4;switch(E){case"x":vt=Math.max(Xe,pt);break;case"y":vt=Math.max(Ue,pt);break;case"z":vt=Math.max(Ue,Xe)}let Ht=function w(we,N,E){let H;switch((!E||E<1e4)&&(E=1e4),we){case"x":H=[new Z(N,-3*E,E,1,0,0),new Z(N,E,-3*E,1,0,0),new Z(N,E,E,1,0,0)];break;case"y":H=[new Z(-3*E,N,E,0,1,0),new Z(E,N,E,0,1,0),new Z(E,N,-3*E,0,1,0)];break;default:H=[new Z(-3*E,E,N,0,0,1),new Z(E,-3*E,N,0,0,1),new Z(E,E,N,0,0,1)]}let me=new P([new O(H)]);return new p(me)}(E,H,vt);return Re.cut_from_plane(Ht),Ht.toBufferGeometry()}(E.geometry,E.parent.absMatrix||E.parent.matrixWorld,this.ctrl.project,this.ctrl.projectPos,E._flippedMesh);if(!H)return;let me=new L.Kj0(H,E.material.clone());this._toplevel.add(me),me.stack=E.stack}),!0}changedLight(N){if(!this._camera)return;let E=!N;N||(N=this.getGeomBoundingBox(this._toplevel));let H=N.max.x-N.min.x,me=N.max.y-N.min.y,De=N.max.z-N.min.z,Re=[],Ue=this.ctrl.light.power;if(void 0===Ue&&(Ue=1),this._camera._lights!=this.ctrl.light.kind)switch((0,Be.mF)(this._camera,!0),this._camera._lights=this.ctrl.light.kind,this._camera._lights){case"ambient":this._camera.add(new L.Mig(15724527,Ue));break;case"hemisphere":this._camera.add(new L.vmT(16777147,526368,Ue));break;default:for(let Xe=0;Xe<6;++Xe)this._camera.add(new L.cek(15724527,Ue))}for(let Xe=0;Xe<this._camera.children.length;++Xe){let pt=this._camera.children[Xe],vt=!1;if(pt.isAmbientLight||pt.isHemisphereLight)pt.intensity=Ue;else if(pt.isPointLight){switch(Xe){case 0:pt.position.set(H/5,me/5,De/5),vt=this.ctrl.light.specular;break;case 1:pt.position.set(0,0,De/2),vt=this.ctrl.light.front;break;case 2:pt.position.set(0,2*me,0),vt=this.ctrl.light.top;break;case 3:pt.position.set(0,-2*me,0),vt=this.ctrl.light.bottom;break;case 4:pt.position.set(-2*H,0,0),vt=this.ctrl.light.left;break;case 5:pt.position.set(2*H,0,0),vt=this.ctrl.light.right}pt.power=vt?Ue*Math.PI*4:0,vt&&Re.push(pt)}}Re.forEach(Xe=>{Xe.power=4*Ue*Math.PI/Re.length}),E&&this.render3D()}createCamera(){this._camera&&(this._scene.remove(this._camera),(0,Be.mF)(this._camera),delete this._camera),this.ctrl.ortho_camera?this._camera=new L.iKG(-this._scene_width/2,this._scene_width/2,this._scene_height/2,-this._scene_height/2,1,1e4):(this._camera=new L.cPb(25,this._scene_width/this._scene_height,1,1e4),this._camera.up=this.ctrl._yup?new L.Pa4(0,1,0):new L.Pa4(0,0,1));let N=new L.cek(15724527,1);N.position.set(10,10,10),this._camera.add(N),this._scene.add(this._camera)}createSpecialEffects(){this._webgl&&(this.ctrl.ssao.enabled||this.ctrl.outline)&&(this.ctrl.outline&&(0,M.isFunc)(this.createOutline)?(this._effectComposer=new L.xCo(this._renderer),this._effectComposer.addPass(new L.CDd(this._scene,this._camera)),this.createOutline(this._scene_width,this._scene_height)):this.ctrl.ssao.enabled&&this.createSSAO()),this._webgl&&this.ctrl.bloom.enabled&&this.createBloom()}createScene(N,E){var H=this;return(0,ze.Z)(function*(){return H._scene=new L.xsS,H._scene.fog=new L.ybr(16777215,1,1e4),H._scene.overrideMaterial=new L.YBo({color:7340287,vertexColors:!1,transparent:!0,opacity:.2,depthTest:!1}),H._scene_width=N,H._scene_height=E,H.createCamera(),H._selected_mesh=null,H._overall_size=10,H._toplevel=new L.Tme,H._scene.add(H._toplevel),H._scene.background=new L.Ilk(H.ctrl.background),(0,Be.iq)(N,E,H.options.Render3D,{antialias:!0,logarithmicDepthBuffer:!1,preserveDrawingBuffer:!0}).then(me=>{if(H._renderer=me,H._webgl=H._renderer.jsroot_render3d===M.constants.Render3D.WebGL,H._renderer.setPixelRatio&&!(0,M.isNodeJs)()&&H._renderer.setPixelRatio(window.devicePixelRatio),H._renderer.setSize(N,E,!H._fit_main_area),H._renderer.localClippingEnabled=!0,H._renderer.setClearColor(H._scene.background,1),H._fit_main_area&&H._webgl){H._renderer.domElement.style.width="100%",H._renderer.domElement.style.height="100%";let De=H.selectDom();"static"==De.style("position")&&De.style("position","relative")}if(H._animating=!1,H.ctrl.bothSides=!1,H.createSpecialEffects(),H._fit_main_area&&!H._webgl){let Re=(0,M.getDocument)().createElementNS("http://www.w3.org/2000/svg","svg");return Re.setAttribute("width",N),Re.setAttribute("height",E),Re.appendChild(H._renderer.jsroot_dom),Re}return H._renderer.jsroot_dom})})()}startDrawGeometry(N){N||this.isStage(0)?(this._clones_owner&&this._clones&&this._clones.setDefaultColors(this.ctrl.dflt_colors),this._startm=(new Date).getTime(),this._last_render_tm=this._startm,this._last_render_meshes=0,this.changeStage(1),this._drawing_ready=!1,this.ctrl.info.num_meshes=0,this.ctrl.info.num_faces=0,this.ctrl.info.num_shapes=0,this._selected_mesh=null,this.ctrl.project&&(this._clones_owner?this._full_geom?this.changeStage(10):this._full_geom=new L.Tme:this.changeStage(9)),delete this._last_manifest,delete this._last_hidden,delete this._draw_nodes_again,this.continueDraw()):this._draw_nodes_again=!0}resetAdvanced(){this.ctrl.ssao.kernelRadius=16,this.ctrl.ssao.output=L.GaR.OUTPUT.Default,this.ctrl.depthTest=!0,this.ctrl.clipIntersect=!0,this.ctrl.depthMethod="ray",this.changedDepthMethod("norender"),this.changedDepthTest()}getOverallSize(N){if(!this._overall_size||N){let E=this.getGeomBoundingBox(this._toplevel);if(!Number.isFinite(E.min.x))return 1e3;this._overall_size=2*Math.max(E.max.x-E.min.x,E.max.y-E.min.y,E.max.z-E.min.z)}return this._overall_size}createSnapshot(N){if(!this._renderer)return;this.render3D(0);let E=this._renderer.domElement.toDataURL("image/png");if("asis"===N)return E;E.replace("image/png","image/octet-stream");let H=(0,M.getDocument)(),me=H.createElement("a");(0,M.isStr)(me.download)&&(H.body.appendChild(me),me.download=N||"geometry.png",me.href=E,me.click(),H.body.removeChild(me))}produceCameraUrl(N){if(!(this._lookat&&this._camera0pos&&this._camera&&this.ctrl))return;let E=(new L.Pa4).add(this._camera0pos).sub(this._lookat),H=(new L.Pa4).add(this._camera.position).sub(this._lookat),me=Math.min(1e4,Math.max(1,this.ctrl.zoom*H.length()/E.length()*100));E.normalize(),H.normalize();let De=new L._fP,Re=new L.USm;De.setFromUnitVectors(E,H),Re.setFromQuaternion(De,"YZX");let Ue=Re.y/Math.PI*180,Xe=Re.z/Math.PI*180;return Ue<0&&(Ue+=360),Xe<0&&(Xe+=360),`roty${Ue.toFixed(N=N||0)},rotz${Xe.toFixed(N)},zoom${me.toFixed(N)}`}calculateZoom(){if(this._camera0pos&&this._camera&&this._lookat){let N=(new L.Pa4).add(this._camera0pos).sub(this._lookat);return(new L.Pa4).add(this._camera.position).sub(this._lookat).length()/N.length()}return 0}adjustCameraPosition(N,E){if(!this._toplevel)return;let H=this.getGeomBoundingBox(this._toplevel);if(!Number.isFinite(H.min.x))return;let me=H.max.x-H.min.x,De=H.max.y-H.min.y,Re=H.max.z-H.min.z,Ue=(H.max.x+H.min.x)/2,Xe=(H.max.y+H.min.y)/2,pt=(H.max.z+H.min.z)/2;if(this._overall_size=2*Math.max(me,De,Re),this._camera.near=this._overall_size/350,this._camera.far=12*this._overall_size,this._scene.fog.near=2*this._overall_size,this._scene.fog.far=12*this._overall_size,N)for(let hn=0;hn<3;++hn){let gn=this.ctrl.clip[hn];gn.min=H.min[gn.name],gn.max=H.max[gn.name];let mn=gn.max-gn.min;gn.max+=.01*mn,gn.min-=.01*mn,gn.value?gn.value<gn.min?gn.value=gn.min:gn.value>gn.max&&(gn.value=gn.max):gn.value=(gn.min+gn.max)/2}this.ctrl.ortho_camera&&(this._camera.left=H.min.x,this._camera.right=H.max.x,this._camera.top=H.max.y,this._camera.bottom=H.min.y),this._camera.updateProjectionMatrix();let vt=2*this.ctrl.zoom,Ht=Math.max(me,De,Re);if((this.ctrl.rotatey||this.ctrl.rotatez)&&this.ctrl.can_rotate){let hn=this.calculateZoom();E&&hn&&(vt=2*hn);let gn=new L.USm(0,this.ctrl.rotatey/180*Math.PI,this.ctrl.rotatez/180*Math.PI,"YZX");this._camera.position.set(-vt*Ht,0,0),this._camera.position.applyEuler(gn),this._camera.position.add(new L.Pa4(Ue,Xe,pt)),E&&hn&&(vt*=hn/this.calculateZoom(),this._camera.position.set(-vt*Ht,0,0),this._camera.position.applyEuler(gn),this._camera.position.add(new L.Pa4(Ue,Xe,pt)))}else if(this.ctrl.ortho_camera)this._camera.position.set(Ue,Xe,Math.max(me,De));else if(this.ctrl.project)switch(this.ctrl.project){case"x":this._camera.position.set(1.5*vt*Math.max(De,Re),0,0);break;case"y":this._camera.position.set(0,1.5*vt*Math.max(me,Re),0);break;case"z":this._camera.position.set(0,0,1.5*vt*Math.max(me,De))}else this.ctrl._yup?this._camera.position.set(Ue-vt*Math.max(me,Re),Xe+vt*De,pt-vt*Math.max(me,Re)):this._camera.position.set(Ue-vt*Math.max(me,De),Xe-vt*Math.max(me,De),pt+vt*Re);this._lookat=new L.Pa4(Ue,Xe,pt),this._camera0pos=new L.Pa4(-2*Ht,0,0),this._camera.lookAt(this._lookat),this.changedLight(H),this._controls&&(this._controls.target.copy(this._lookat),this._controls.update()),this.ctrl.select_in_view&&this.startDrawGeometry()}setCameraPosition(N,E,H){if(!this.ctrl)return;this.ctrl.rotatey=N||0,this.ctrl.rotatez=E||0;let me=!1;H&&Number.isFinite(H)?this.ctrl.zoom=H:me=!0,this.adjustCameraPosition(!1,me)}focusOnItem(N){if(!N||!this._clones)return;let E=this._clones.findStackByName(N);E&&this.focusCamera(this._clones.resolveStack(E,!0),!1)}focusCamera(N,E){if(this.ctrl.project||this.ctrl.ortho_camera)return this.adjustCameraPosition();let H=new L.ZzF;if(void 0===N)H=this.getGeomBoundingBox(this._toplevel);else if(N instanceof L.Kj0)H.setFromObject(N);else{let _i=(new L.Pa4).setFromMatrixPosition(N.matrix),Mn=N.node,Nr=new L.Pa4(Mn.fDX,Mn.fDY,Mn.fDZ).multiplyScalar(.5);H.min=_i.clone().sub(Nr),H.max=_i.clone().add(Nr)}let vt,me=H.max.x-H.min.x,De=H.max.y-H.min.y,Re=H.max.z-H.min.z,Ue=(H.max.x+H.min.x)/2,Xe=(H.max.y+H.min.y)/2,pt=(H.max.z+H.min.z)/2;vt=this.ctrl._yup?new L.Pa4(Ue-2*Math.max(me,Re),Xe+2*De,pt-2*Math.max(me,Re)):new L.Pa4(Ue-2*Math.max(me,De),Xe-2*Math.max(me,De),pt+2*Re);let Ht=new L.Pa4(Ue,Xe,pt),hn=this._controls.target,gn=50,mn=0,An=vt.sub(this._camera.position).divideScalar(gn),fi=Ht.sub(hn).divideScalar(gn);if(E=E&&this._webgl){for(let _i=0;_i<3;++_i){let Mn=this.ctrl.clip[_i];Mn.enabled||(Mn.value=Mn.min,Mn.enabled=!0),Mn.inc=((Mn.min+Mn.max)/2-Mn.value)/gn}this.updateClipping()}this._animating=!0;const ti=()=>{if(void 0===this._animating)return;this._animating?requestAnimationFrame(ti):this._geom_viewer||this.startDrawGeometry();let _i=1-Math.cos(2*Math.PI*mn/gn);this._camera.position.add(An.clone().multiplyScalar(_i)),hn.add(fi.clone().multiplyScalar(_i)),this._lookat=hn,this._camera.lookAt(this._lookat),this._camera.updateProjectionMatrix();let Mn=(new Date).getTime();if(E){for(let Ui=0;Ui<3;++Ui)this.ctrl.clip[Ui].value+=this.ctrl.clip[Ui].inc*_i;this.updateClipping()}else this.render3D(0);let Nr=(new Date).getTime();0==mn&&Nr-Mn>200&&(gn=20),mn++,this._animating=mn<gn};ti()}autorotate(N){let E=void 0===N?2:N,H=new Date;const me=()=>{if(!this._renderer||!this.ctrl)return;let De=new Date;this.ctrl.rotate&&requestAnimationFrame(me),this._controls&&(this._controls.autoRotate=this.ctrl.rotate,this._controls.autoRotateSpeed=E*(De.getTime()-H.getTime())/16.6666,this._controls.update()),H=new Date,this.render3D(0)};this._webgl&&me()}completeScene(){if(this.ctrl._debug||this.ctrl._grid){if(this.ctrl._full){let N=new L.fQA(this._toplevel);this._scene.add(N)}this._scene.add(new L.y8_(2*this._overall_size)),this._scene.add(new L.VLJ(Math.ceil(this._overall_size),Math.ceil(this._overall_size)/50)),this.helpText("<font face='verdana' size='1' color='red'><center>Transform Controls<br>'T' translate | 'R' rotate | 'S' scale<br>'+' increase size | '-' decrease size<br>'W' toggle wireframe/solid display<br>keep 'Ctrl' down to snap to grid</center></font>")}}drawCount(N,E){var H=this;return(0,ze.Z)(function*(){const me=hn=>((0,M.isBatchMode)()?"anytime":hn.toString())+" ms";let De=["Unique nodes: "+H._clones.nodes.length,"Unique visible: "+N,"Time to clone: "+me(E)];H._clones.scanVisible();let Re=0,Ue={clones:H._clones,cnt:[],func(hn){return void 0===this.cnt[this.last]?this.cnt[this.last]=1:this.cnt[this.last]++,Re+=Ln(this.clones.getNodeShape(hn.id)),!0}},Xe=(new Date).getTime(),pt=H._clones.scanVisible(Ue),vt=(new Date).getTime();De.push(`Total visible nodes: ${pt}`,`Total shapes: ${Re}`);for(let hn=0;hn<Ue.cnt.length;++hn)void 0!==Ue.cnt[hn]&&De.push(`  lvl${hn}: ${Ue.cnt[hn]}`);De.push(`Time to scan: ${me(vt-Xe)}`,"","Check timing for matrix calculations ...");let Ht=H.selectDom().style("overflow","auto");return(0,M.isBatchMode)()?Ht.property("_json_object_",De):De.forEach(hn=>Ht.append("p").text(hn)),new Promise(hn=>{setTimeout(()=>{Ue.domatrix=!0,Xe=(new Date).getTime(),pt=H._clones.scanVisible(Ue),vt=(new Date).getTime();let gn=`Time to scan with matrix: ${me(vt-Xe)}`;(0,M.isBatchMode)()?De.push(gn):Ht.append("p").text(gn),hn(H)},100)})})()}performDrop(N,E,H,me){var De=this;return(0,ze.Z)(function*(){if("TTree"===N?.$kind){let Re="extract_geo_tracks";me&&me.indexOf("$")>0&&(Re=me.slice(0,me.indexOf("$")),me=me.slice(me.indexOf("$")+1));let Ue=(0,M.findFunction)(Re);return Ue?Ue(N,me).then(Xe=>Xe?De.drawExtras(Xe,"",!1).then(()=>(De.updateClipping(!0),De.render3D(100))):De):Promise.reject(Error(`Function ${Re} not found`))}return De.drawExtras(N,E).then(Re=>Re?(H&&(H._painter=De),De.render3D(100)):De)})()}mouseOverHierarchy(N,E,H){if(!this.ctrl)return;let me=H._obj;this.ctrl._debug&&console.log(`Mouse over ${N} ${E} ${me?._typename}`),me&&(me._typename===Nt||me._typename===it||me._typename===M.clTPolyMarker3D)&&this.highlightMesh(null,65280,N?me:null)}clearExtras(){this.getExtrasContainer("delete"),delete this._extraObjects,this.render3D()}addExtra(N,E){return void 0===this._extraObjects&&(this._extraObjects=(0,M.create)(M.clTList)),!(this._extraObjects.arr.indexOf(N)>=0||(this._extraObjects.Add(N,E),delete N.$hidden_via_menu,0))}extraObjectVisible(N,E,H){if(!this._extraObjects)return;let me=N.itemFullName(E),De=this._extraObjects.opt.indexOf(me);if(De<0&&E._obj&&(De=this._extraObjects.arr.indexOf(E._obj),De>=0&&(this._extraObjects.opt[De]=me)),De<0)return;let Re=this._extraObjects.arr[De],Ue=!Re.$hidden_via_menu;if(H){Re.$hidden_via_menu=Ue,Ue=!Ue;let Xe=null;this._toplevel.traverse(pt=>{pt.geo_object===Re&&(Xe=pt)}),Xe?(Xe.visible=Ue,this.render3D()):Ue&&this.drawExtras(Re,"",!1).then(()=>{this.updateClipping(!0),this.render3D()})}return Ue}drawExtras(N,E,H){var me=this;return(0,ze.Z)(function*(){if(!N?._typename||!H&&N.$hidden_via_menu)return!1;let De=!1;void 0===H&&(H=!0,De=!0);let Re=!1;if(N._typename===M.clTList||N._typename===M.clTObjArray){if(!N.arr)return!1;let Ue=[];for(let Xe=0;Xe<N.arr.length;++Xe){let vt=N.opt?N.opt[Xe]:"";vt||(vt=(E||"<prnt>")+`/[${Xe}]`),Ue.push(me.drawExtras(N.arr[Xe],vt,H))}Re=Promise.all(Ue).then(Xe=>Xe.indexOf(!0)>=0)}else"Mesh"===N._typename?(me.addToExtrasContainer(N),Re=Promise.resolve(!0)):"TGeoTrack"===N._typename?(!H||me.addExtra(N,E))&&(Re=me.drawGeoTrack(N,E)):N._typename===M.clTPolyLine3D?(!H||me.addExtra(N,E))&&(Re=me.drawPolyLine(N,E)):N._typename===Nt||"ROOT::Experimental::REveTrack"===N._typename?(!H||me.addExtra(N,E))&&(Re=me.drawEveTrack(N,E)):N._typename===it||"ROOT::Experimental::REvePointSet"===N._typename||N._typename===M.clTPolyMarker3D?(!H||me.addExtra(N,E))&&(Re=me.drawHit(N,E)):(N._typename===mt||N._typename===un)&&(!H||me.addExtra(N,E))&&(Re=me.drawExtraShape(N,E));return(0,M.getPromise)(Re).then(Ue=>Ue&&De?(me.updateClipping(!0),me.render3D(100)):Ue)})()}getExtrasContainer(N,E){if(!this._toplevel)return null;E||(E="tracks");let H=null,me=[];for(let De=0;De<this._toplevel.children.length;++De){let Re=this._toplevel.children[De];if(Re._extras){if("collect"==N){me.push(Re);continue}if(Re._extras===E){H=Re;break}}}if("collect"==N){for(let De=0;De<me.length;++De)this._toplevel.remove(me[De]);return me}return"delete"==N?(H&&this._toplevel.remove(H),(0,Be.mF)(H),null):("get"!==N&&!H&&(H=new L.Tme,H._extras=E,this._toplevel.add(H)),H)}addToExtrasContainer(N,E){let H=this.getExtrasContainer("",E);H?H.add(N):(console.warn("Fail to add object to extras"),(0,Be.mF)(N))}drawGeoTrack(N,E){if(!N?.fNpoints)return!1;let H=M.browser.isWin?1:N.fLineWidth||1,me=(0,je.Lq)(N.fLineColor)||"#ff00ff",De=Math.round(N.fNpoints/4),Re=new Float32Array(6*(De-1)),Ue=0,Xe=this.ctrl.projectPos,pt="x"===this.ctrl.project,vt="y"===this.ctrl.project,Ht="z"===this.ctrl.project;for(let mn=0;mn<De-1;++mn)Re[Ue]=pt?Xe:N.fPoints[4*mn],Re[Ue+1]=vt?Xe:N.fPoints[4*mn+1],Re[Ue+2]=Ht?Xe:N.fPoints[4*mn+2],Re[Ue+3]=pt?Xe:N.fPoints[4*mn+4],Re[Ue+4]=vt?Xe:N.fPoints[4*mn+5],Re[Ue+5]=Ht?Xe:N.fPoints[4*mn+6],Ue+=6;let hn=new L.nls({color:me,linewidth:H}),gn=(0,Be.Qy)(Re,hn);return gn.defaultOrder=gn.renderOrder=1e6,gn.geo_name=E,gn.geo_object=N,gn.hightlightWidthScale=2,E&&0==E.indexOf("<prnt>/Tracks")&&(gn.main_track=!0),this.addToExtrasContainer(gn),!0}drawPolyLine(N,E){if(!N)return!1;let H=M.browser.isWin?1:N.fLineWidth||1,me=(0,je.Lq)(N.fLineColor)||"#ff00ff",De=N.fN,Re=N.fP,Ue=new Float32Array(6*(De-1)),Xe=0,pt=this.ctrl.projectPos,vt="x"===this.ctrl.project,Ht="y"===this.ctrl.project,hn="z"===this.ctrl.project;for(let An=0;An<De-1;++An)Ue[Xe]=vt?pt:Re[3*An],Ue[Xe+1]=Ht?pt:Re[3*An+1],Ue[Xe+2]=hn?pt:Re[3*An+2],Ue[Xe+3]=vt?pt:Re[3*An+3],Ue[Xe+4]=Ht?pt:Re[3*An+4],Ue[Xe+5]=hn?pt:Re[3*An+5],Xe+=6;let gn=new L.nls({color:me,linewidth:H}),mn=(0,Be.Qy)(Ue,gn);return mn.defaultOrder=mn.renderOrder=1e6,mn.geo_name=E,mn.geo_object=N,mn.hightlightWidthScale=2,this.addToExtrasContainer(mn),!0}drawEveTrack(N,E){if(!N||N.fN<=0)return!1;let H=M.browser.isWin?1:N.fLineWidth||1,me=(0,je.Lq)(N.fLineColor)||"#ff00ff",De=new Float32Array(6*(N.fN-1)),Re=0,Ue=this.ctrl.projectPos,Xe="x"===this.ctrl.project,pt="y"===this.ctrl.project,vt="z"===this.ctrl.project;for(let gn=0;gn<N.fN-1;++gn)De[Re]=Xe?Ue:N.fP[3*gn],De[Re+1]=pt?Ue:N.fP[3*gn+1],De[Re+2]=vt?Ue:N.fP[3*gn+2],De[Re+3]=Xe?Ue:N.fP[3*gn+3],De[Re+4]=pt?Ue:N.fP[3*gn+4],De[Re+5]=vt?Ue:N.fP[3*gn+5],Re+=6;let Ht=new L.nls({color:me,linewidth:H}),hn=(0,Be.Qy)(De,Ht);return hn.defaultOrder=hn.renderOrder=1e6,hn.geo_name=E,hn.geo_object=N,hn.hightlightWidthScale=2,this.addToExtrasContainer(hn),!0}drawHit(N,E){var H=this;return(0,ze.Z)(function*(){if(!N||!N.fN||N.fN<0)return!1;let me=Math.max(N.fMarkerSize*H.getOverallSize()*.005,.2),De=N.fN,Re=H.ctrl.projectPos,Ue="x"===H.ctrl.project,Xe="y"===H.ctrl.project,pt="z"===H.ctrl.project,vt=N.fMarkerStyle;(4==vt||2==vt)&&(vt=7,me*=1.5);let Ht=new Be.B_(De,H._webgl,me);for(let hn=0;hn<De;hn++)Ht.addPoint(Ue?Re:N.fP[3*hn],Xe?Re:N.fP[3*hn+1],pt?Re:N.fP[3*hn+2]);return Ht.createPoints({color:(0,je.Lq)(N.fMarkerColor)||"#0000ff",style:vt}).then(hn=>(hn.defaultOrder=hn.renderOrder=1e6,hn.highlightScale=2,hn.geo_name=E,hn.geo_object=N,H.addToExtrasContainer(hn),!0))})()}drawExtraShape(N,E){let H=nu(N);return!!H&&(H.geo_name=E,H.geo_object=N,this.addToExtrasContainer(H),!0)}findNodeWithVolume(N,E,H,me,De){let Re=!1,Ue=null;if(H)me&&(me+="/"),me+=H.fName;else{if(!(H=this.getGeometry())&&0!==wn(H))return null;me=this.geo_manager?H.fName:"",Re=!0,De=[]}if(!H.fVolume||H.fVolume._searched)return null;if(N.test(H.fVolume.fName)&&(Ue=E({node:H,item:me}),Ue))return Ue;if(H.fVolume._searched=!0,De.push(H.fVolume),H.fVolume.fNodes)for(let Xe=0,pt=H.fVolume.fNodes.arr.length;Xe<pt&&(Ue=this.findNodeWithVolume(N,E,H.fVolume.fNodes.arr[Xe],me,De),!Ue);++Xe);if(Re)for(let Xe=0,pt=De.length;Xe<pt;++Xe)delete De[Xe]._searched;return Ue}loadMacro(N){var E=this;return(0,ze.Z)(function*(){let H={obj:E.getGeometry(),prefix:""};if(E.geo_manager&&(H.prefix=H.obj.fName),!N||N.length<3||0!==wn(H.obj))return H;let me={GetVolume:De=>{let Re=new RegExp("^"+De+"$"),Ue=E.findNodeWithVolume(Re,Xe=>Xe);return Ue||console.log(`Did not found ${De} volume`),{found:Ue,fVolume:Ue?.node?.fVolume,InvisibleAll(Xe){Mt(this.fVolume,Xe)},Draw(){!this.found||!this.fVolume||(H.obj=this.found.node,H.prefix=this.found.item,console.log(`Select volume for drawing ${this.fVolume.fName} ${H.prefix}`))},SetTransparency(Xe){this.fVolume?.fMedium?.fMaterial&&(this.fVolume.fMedium.fMaterial.fFillStyle=3e3+Xe)},SetLineColor(Xe){this.fVolume&&(this.fVolume.fLineColor=Xe)}}},DefaultColors:()=>{E.ctrl.dflt_colors=!0},SetMaxVisNodes:De=>{E.ctrl.maxnodes||(E.ctrl.maxnodes=pasrseInt(De)||0)},SetVisLevel:De=>{E.ctrl.vislevel||(E.ctrl.vislevel=parseInt(De)||0)}};return(0,ye.Ae)("Loading macro "+N),(0,M.httpRequest)(N,"text").then(De=>{let Re=De.split("\n"),Ue=0;for(;Ue<Re.length;){let Xe=Re[Ue++].trim();if(!(0==Xe.indexOf("//")||Xe.indexOf("gGeoManager")<0||(Xe=Xe.replace("->GetVolume",".GetVolume"),Xe=Xe.replace("->InvisibleAll",".InvisibleAll"),Xe=Xe.replace("->SetMaxVisNodes",".SetMaxVisNodes"),Xe=Xe.replace("->DefaultColors",".DefaultColors"),Xe=Xe.replace("->Draw",".Draw"),Xe=Xe.replace("->SetTransparency",".SetTransparency"),Xe=Xe.replace("->SetLineColor",".SetLineColor"),Xe=Xe.replace("->SetVisLevel",".SetVisLevel"),Xe.indexOf("->")>=0)))try{new Function("gGeoManager",Xe)(me)}catch{console.error(`Problem by processing ${Xe}`)}}return H}).catch(()=>(console.error(`Fail to load ${N}`),H))})()}assignClones(N){this._clones_owner=!0,this._clones=N}extractRawShapes(N,E){let H=null,me=0;E&&(H=N.numnodes>1e6?{length:N.numnodes}:new Array(N.numnodes)),N.nodes.forEach(Re=>{Re=Ae.formatServerElement(Re),H?H[Re.id]=Re:this._clones.updateNode(Re)}),E&&(this._clones_owner=!0,this._clones=new Ae(null,H),this._clones.name_prefix=this._clones.getNodeName(0),this._clones.maxdepth=20);let De=0;N.cfg&&(De=N.cfg.nsegm),De&&(me=_("GradPerSegm"),_("GradPerSegm",360/Math.max(De,6)));for(let Re=0;Re<N.visibles.length;++Re){let Ue=N.visibles[Re],Xe=Ue.ri;Xe&&(Ue.server_shape=Xe.server_shape=Yi(Xe,De))}return me&&_("GradPerSegm",me),!0}prepareObjectDraw(N,E){var H=this;return(0,ze.Z)(function*(){if(H.did_cleanup)return null;if("__geom_viewer_append__"==E)H._new_append_nodes=N,H.ctrl.use_worker=0,H._geom_viewer=!0;else if("__geom_viewer_selection__"==E&&H._clones)H._new_draw_nodes=N,H.ctrl.use_worker=0,H._geom_viewer=!0;else if(H._main_painter)H._clones_owner=!1,H._clones=H._main_painter._clones,console.log(`Reuse clones ${H._clones.nodes.length} from main painter`);else if(N){H._start_drawing_time=(new Date).getTime(),H._clones_owner=!0,H._clones=new Ae(N);let De=H.ctrl.vislevel,Re=H.ctrl.maxnodes;H.geo_manager&&(!De&&H.geo_manager.fVisLevel&&(De=H.geo_manager.fVisLevel),Re||(Re=H.geo_manager.fMaxVisNodes)),H._clones.setVisLevel(De),H._clones.setMaxVisNodes(Re),H._clones.name_prefix=E;let Ue=!!H.geo_manager&&!H.ctrl.showtop,Xe=H.ctrl.no_screen?0:H._clones.markVisibles(!0,!1,Ue);Xe=Xe<=0?H._clones.markVisibles(!1,!1,Ue):H._clones.markVisibles(!0,!0,Ue),H._clones.produceIdShifts();let pt=(new Date).getTime()-H._start_drawing_time;if(H._scene||console.log(`Creating clones ${H._clones.nodes.length} takes ${pt} ms uniquevis ${Xe}`),H.options._count)return H.drawCount(Xe,pt)}else H._clones_owner=!1,H._clones=null;let me=Promise.resolve(!0);if(!H._scene){H._first_drawing=!0;let De=H.getPadPainter();if(H._on_pad=!!De,H._on_pad){let Re,Ue,Xe;me=(0,Oe.ensureTCanvas)(H,"3d").then(()=>(De.fillatt?.color&&(H.ctrl.background=De.fillatt.color),Xe=H.getFramePainter(),Ue=(0,Be.oc)(),(0,Be.Sh)(Xe),Xe.mode3d=!0,Re=Xe.getSizeFor3d(void 0,Ue),H._fit_main_area=-1===Re.can3d,H.createScene(Re.width,Re.height).then(pt=>Xe.add3dCanvas(Re,pt,Ue===M.constants.Render3D.WebGL))))}else{H.ctrl.use_worker>0&&H.startWorker(),(0,Be.Sh)(H);let Re=H.getSizeFor3d(void 0,(0,Be.oc)(H.options.Render3D));H._fit_main_area=-1===Re.can3d,me=H.createScene(Re.width,Re.height).then(Ue=>H.add3dCanvas(Re,Ue,H._webgl))}}return me.then(()=>(H._first_drawing&&(H.ctrl.maxlimit=(H._webgl?2e5:1e5)*H.ctrl.more),H.setAsMainPainter(),H.createToolbar(),H._clones?new Promise(De=>{H._resolveFunc=De,H.showDrawInfo("Drawing geometry"),H.startDrawGeometry(!0)}):H.completeDraw()))})()}showDrawInfo(N){if((0,M.isBatchMode)()||!this._first_drawing||!this._start_drawing_time)return;let E=this._renderer.domElement.parentNode,H=E.querySelector(".geo_info");if(N){let me=.001*((new Date).getTime()-this._start_drawing_time);H||(H=document.createElement("p"),H.setAttribute("class","geo_info"),H.setAttribute("style","position: absolute; text-align: center; vertical-align: middle; top: 45%; left: 40%; color: red; font-size: 150%;"),E.append(H)),H.innerHTML=`${N}, ${me.toFixed(1)}s`}else H.remove()}continueDraw(){if(this.isStage(0))return;let N=(new Date).getTime(),E=this._first_drawing?1e3:200,H=N;for(;;){let De=this.nextDrawAction();if(!De)break;if(H=(new Date).getTime(),H-this._startm>1e5){this.changeStage(0,"Abort build after 100s");break}if(!(!0===De&&H-N<E)&&(H-N>E||1===De||2===De))return(0,ye.Ae)(this.drawing_log),this.showDrawInfo(this.drawing_log),this._first_drawing&&this._webgl&&this._num_meshes-this._last_render_meshes>100&&H-this._last_render_tm>2.5*E&&(this.adjustCameraPosition(),this.render3D(-1),this._last_render_meshes=this.ctrl.info.num_meshes),void(2!==De&&setTimeout(()=>this.continueDraw(),1===De?100:1))}let me=H-this._startm;if((this._first_drawing||this._full_redrawing)&&console.log(`Create tm = ${me} meshes ${this.ctrl.info.num_meshes} faces ${this.ctrl.info.num_faces}`),me>300)return(0,ye.Ae)("Rendering geometry"),this.showDrawInfo("Rendering"),setTimeout(()=>this.completeDraw(!0),10);this.completeDraw(!0)}testCameraPosition(N){this._camera.updateMatrixWorld();let E=this._camera.position.clone();!N&&this._last_camera_position&&this._last_camera_position.distanceTo(E)<1e-4*(this._overall_size||1e3)||(this._last_camera_position=E,this.ctrl.project||fn(this._toplevel,E,this.ctrl.depthMethod,this._clones))}render3D(N,E){if(!this._renderer)return this.did_cleanup?console.warn("try to render after cleanup"):console.warn("renderer object not exists - check code"),this;let H=void 0!==N&&N>0;if(void 0===N&&(N=5),N>0&&this._webgl)return(0,M.isBatchMode)()&&(N=1),H?new Promise(Re=>{this._render_resolveFuncs||(this._render_resolveFuncs=[]),this._render_resolveFuncs.push(Re),this.render_tmout||(this.render_tmout=setTimeout(()=>this.render3D(0,E),N))}):(this.render_tmout||(this.render_tmout=setTimeout(()=>this.render3D(0,E),N)),this);this.render_tmout&&(clearTimeout(this.render_tmout),delete this.render_tmout),(0,Be.v2)(this._renderer);let me=new Date;this.testCameraPosition(-1===N),this._webgl&&this._effectComposer&&this._effectComposer.passes.length>0?this._effectComposer.render():this._webgl&&this._bloomComposer&&this._bloomComposer.passes.length>0?(this._renderer.clear(),this._camera.layers.set(1),this._bloomComposer.render(),this._renderer.clearDepth(),this._camera.layers.set(0),this._renderer.render(this._scene,this._camera)):this._renderer.render(this._scene,this._camera);let De=new Date;this.last_render_tm=De.getTime(),0===this.first_render_tm&&E&&(this.first_render_tm=De.getTime()-me.getTime(),console.log(`three.js r${L.UZH}, first render tm = ${this.first_render_tm}`)),(0,Be.wu)(this._renderer),this._render_resolveFuncs&&(this._render_resolveFuncs.forEach(Re=>Re(this)),delete this._render_resolveFuncs)}startWorker(){this._worker||(this._worker_ready=!1,this._worker_jobs=0,this._worker=new Worker(M.source_dir+"scripts/geoworker.js"),this._worker.onmessage=N=>{if((0,M.isObject)(N.data)){if("log"in N.data)return console.log(`geo: ${N.data.log}`);if("progress"in N.data)return(0,ye.Ae)(N.data.progress);N.data.tm3=(new Date).getTime(),"init"in N.data?(this._worker_ready=!0,console.log("Worker ready: "+(N.data.tm3-N.data.tm0))):this.processWorkerReply(N.data)}},this._worker.postMessage({init:!0,browser:M.browser,tm0:(new Date).getTime(),vislevel:this._clones.getVisLevel(),maxvisnodes:this._clones.getMaxVisNodes(),clones:this._clones.nodes,sortmap:this._clones.sortmap}))}canSubmitToWorker(N){return!!this._worker&&this._worker_ready&&(0==this._worker_jobs||N)}submitToWorker(N){if(!this._worker)return!1;this._worker_jobs++,N.tm0=(new Date).getTime(),this._worker.postMessage(N)}processWorkerReply(N){if(this._worker_jobs--,"collect"in N)return this._new_draw_nodes=N.new_nodes,this._draw_all_nodes=N.complete,this.changeStage(3),this.continueDraw();if("shapes"in N){for(let E=0;E<N.shapes.length;++E){let H=N.shapes[E],me=this._build_shapes[E];H.buf_pos&&H.buf_norm&&(0===H.buf_pos.length?me.geom=null:H.buf_pos.length!==H.buf_norm.length?(console.error(`item.buf_pos.length ${H.buf_pos.length} != item.buf_norm.length ${H.buf_norm.length}`),me.geom=null):(me.geom=new L.u9r,me.geom.setAttribute("position",new L.TlE(H.buf_pos,3)),me.geom.setAttribute("normal",new L.TlE(H.buf_norm,3))),me.ready=!0,me.nfaces=H.nfaces)}return N.tm4=(new Date).getTime(),this.changeStage(7),this.continueDraw()}}testGeomChanges(){if(this._main_painter)return console.warn("Get testGeomChanges call for slave painter"),this._main_painter.testGeomChanges();this.startDrawGeometry();for(let N=0;N<this._slave_painters.length;++N)this._slave_painters[N].startDrawGeometry()}drawSimpleAxis(N){if(this.getExtrasContainer("delete","axis"),!this.ctrl._axis)return N?null:this.render3D();let E=this.getGeomBoundingBox(this._toplevel),H=this.getExtrasContainer("create","axis"),me=.02*Math.max(E.max.x-E.min.x,E.max.y-E.min.y,E.max.z-E.min.z),De=[0,0,0],Re=["x","y","z"],Ue=["X","Y","Z"],Xe=["red","green","blue"],pt=this.ctrl.ortho_camera,vt=[this.ctrl._yup,this.ctrl._yup,this.ctrl._yup],Ht=3;if(2==this.ctrl._axis)for(let hn=0;hn<3;++hn){let gn=Re[hn];E.min[gn]<=0&&E.max[gn]>=0||(De[hn]=(E.min[gn]+E.max[gn])/2)}this.ctrl.ortho_camera&&(Ht=2,Ue[0]=Ue[2],Xe[0]=Xe[2],vt[0]=vt[2],pt=!0);for(let hn=0;hn<Ht;++hn){let gn=new Float32Array(6),mn=Xe[hn],An=Re[hn];const fi=Ms=>E.max[An]-E.min[An]<2?Ms.toFixed(3):Math.abs(Ms)>1e5?Ms.toExponential(3):Math.round(Ms).toString();let ti=fi(E.max[An]);switch(gn[0]=E.min.x,gn[1]=E.min.y,gn[2]=E.min.z,gn[3]=E.min.x,gn[4]=E.min.y,gn[5]=E.min.z,hn){case 0:gn[3]=E.max.x,vt[0]&&!pt?ti=Ue[0]+" "+ti:ti+=" "+Ue[0];break;case 1:gn[4]=E.max.y,vt[1]?ti+=" "+Ue[1]:ti=Ue[1]+" "+ti;break;case 2:gn[5]=E.max.z,ti+=" "+Ue[2]}if(2==this.ctrl._axis)for(let Ms=0;Ms<6;++Ms)Ms%3!==hn&&(gn[Ms]=De[Ms%3]);let _i=new L.nls({color:mn}),Mn=(0,Be.Qy)(gn,_i);Mn._axis_draw=!0,H.add(Mn);let Nr=new L.vBJ({color:mn,vertexColors:!1});if(0===De[hn]&&De[hn]>=E.min[An]&&De[hn]<=E.max[An]&&(2!=this.ctrl._axis||0===hn)){let Ms=pt?new L.zf8(.25*me):new L.xo$(.25*me);Mn=new L.Kj0(Ms,Nr),Mn.translateX(0===hn?De[0]:gn[0]),Mn.translateY(1===hn?De[1]:gn[1]),Mn.translateZ(2===hn?De[2]:gn[2]),H.add(Mn)}let Ui=new L.MP$(ti,{font:Be.sU,size:me,height:0,curveSegments:5});Mn=new L.Kj0(Ui,Nr),Mn._axis_draw=!0;let Bi=(new L.ZzF).setFromObject(Mn);if(Mn.translateX(gn[3]),Mn.translateY(gn[4]),Mn.translateZ(gn[5]),vt[hn])switch(hn){case 0:pt?Mn.translateX(.5*me):(Mn.rotateY(Math.PI),Mn.translateX(-Bi.max.x-.5*me)),Mn.translateY(-Bi.max.y/2);break;case 1:pt?Mn.rotateZ(Math.PI/2):(Mn.rotateX(-Math.PI/2),Mn.rotateY(-Math.PI/2)),Mn.translateX(.5*me),Mn.translateY(-Bi.max.y/2);break;case 2:Mn.rotateY(-Math.PI/2),Mn.translateX(.5*me),Mn.translateY(-Bi.max.y/2)}else switch(hn){case 0:Mn.rotateX(Math.PI/2),Mn.translateY(-Bi.max.y/2),Mn.translateX(.5*me);break;case 1:Mn.rotateX(Math.PI/2),Mn.rotateY(-Math.PI/2),Mn.translateX(-Bi.max.x-.5*me),Mn.translateY(-Bi.max.y/2);break;case 2:Mn.rotateX(Math.PI/2),Mn.rotateZ(Math.PI/2),Mn.translateX(.5*me),Mn.translateY(-Bi.max.y/2)}if(H.add(Mn),Ui=new L.MP$(fi(E.min[An]),{font:Be.sU,size:me,height:0,curveSegments:5}),Mn=new L.Kj0(Ui,Nr),Mn._axis_draw=!0,Bi=(new L.ZzF).setFromObject(Mn),Mn.translateX(gn[0]),Mn.translateY(gn[1]),Mn.translateZ(gn[2]),vt[hn])switch(hn){case 0:pt?Mn.translateX(-Bi.max.x-.5*me):(Mn.rotateY(Math.PI),Mn.translateX(.5*me)),Mn.translateY(-Bi.max.y/2);break;case 1:pt?Mn.rotateZ(Math.PI/2):(Mn.rotateX(-Math.PI/2),Mn.rotateY(-Math.PI/2)),Mn.translateY(-Bi.max.y/2),Mn.translateX(-Bi.max.x-.5*me);break;case 2:Mn.rotateY(-Math.PI/2),Mn.translateX(-Bi.max.x-.5*me),Mn.translateY(-Bi.max.y/2)}else switch(hn){case 0:Mn.rotateX(Math.PI/2),Mn.translateX(-Bi.max.x-.5*me),Mn.translateY(-Bi.max.y/2);break;case 1:Mn.rotateX(Math.PI/2),Mn.rotateY(-Math.PI/2),Mn.translateY(-Bi.max.y/2),Mn.translateX(.5*me);break;case 2:Mn.rotateX(Math.PI/2),Mn.rotateZ(Math.PI/2),Mn.translateX(-Bi.max.x-.5*me),Mn.translateY(-Bi.max.y/2)}H.add(Mn)}return this.changedDepthMethod(N?"norender":void 0)}setAxesDraw(N){return this.ctrl._axis="toggle"===N?this.ctrl._axis?0:1:"number"==typeof N?N:N?1:0,this.drawSimpleAxis()}setAutoRotate(N){this.ctrl.project||(void 0!==N&&(this.ctrl.rotate=N),this.autorotate(2.5))}toggleWireFrame(){this.ctrl.wireframe=!this.ctrl.wireframe,this.changedWireFrame()}setWireFrame(N){this.ctrl.wireframe=!!N,this.changedWireFrame()}setShowTop(N){this.ctrl.showtop=!!N,this.redrawObject("same")}changedClipping(N){let E=this.ctrl.clip;void 0!==N&&N>=0&&!E[N].enabled||((E[0].enabled||E[1].enabled||E[2].enabled)&&(this.ctrl.ssao.enabled=!1,this.removeSSAO()),this.updateClipping(!1,!0))}changedDepthTest(){if(!this._toplevel)return;let N=this.ctrl.depthTest;this._toplevel.traverse(E=>{E instanceof L.Kj0&&(E.material.depthTest=N)}),this.render3D(0)}changedDepthMethod(N){if(delete this._last_camera_position,"norender"!==N)return this.render3D()}changedHighlight(){this.ctrl.highlight||this.highlightMesh(null)}updateClipping(N,E){if(this._renderer?.jsroot_render3d===M.constants.Render3D.SVG)return;this._clipPlanes||(this._clipPlanes=[new L.JOQ(new L.Pa4(1,0,0),0),new L.JOQ(new L.Pa4(0,this.ctrl._yup?-1:1,0),0),new L.JOQ(new L.Pa4(0,0,this.ctrl._yup?1:-1),0)]);let H=this.ctrl.clip,me=[],De=!1,Re=[-1*H[0].value,H[1].value,(this.ctrl._yup?-1:1)*H[2].value],Ue=this.ctrl.clipIntersect?16:0;for(let Ht=0;Ht<3;++Ht)H[Ht].enabled&&(Ue+=2<<Ht),this._clipPlanes[Ht].constant!==Re[Ht]&&(H[Ht].enabled&&(De=!0),this._clipPlanes[Ht].constant=Re[Ht]);this.ctrl.ssao.enabled||(H[0].enabled&&me.push(this._clipPlanes[0]),H[1].enabled&&me.push(this._clipPlanes[1]),H[2].enabled&&me.push(this._clipPlanes[2]),Ue+=1e3*me.length),0==me.length&&(me=null),this._clipCfg!==Ue&&(De=!0),this._clipCfg=Ue;let Xe=!!me,pt=this.ctrl.clipIntersect,vt=Xe?L.ehD:L.Wl3;return(E||De)&&this._scene.traverse(Ht=>{!Ht._axis_draw&&Ht.hasOwnProperty("material")&&void 0!==Ht.material?.clippingPlanes&&(Ht.material.clippingPlanes!==me&&(Ht.material.clipIntersection=pt,Ht.material.clippingPlanes=me,Ht.material.needsUpdate=!0),void 0!==Ht.material.emissive&&Ht.material.side!=vt&&(Ht.material.side=vt,Ht.material.needsUpdate=!0))}),this.ctrl.bothSides=Xe,N||this.render3D(0),De}setCompleteHandler(N){this._complete_handler=N}completeDraw(N){var E=this;return(0,ze.Z)(function*(){let H=!1,me=!1,De=!0;if(!E.ctrl)return console.warn("ctrl object does not exist in completeDraw - something went wrong"),E;let Re=Promise.resolve(!0);return E._clones?(E._first_drawing||E._full_redrawing)&&E.ctrl.tracks&&E.geo_manager&&(Re=E.drawExtras(E.geo_manager.fTracks,"<prnt>/Tracks")):(De=!1,E.getExtrasContainer("delete"),Re=E.drawExtras((E._main_painter?E._main_painter._extraObjects:null)||E._extraObjects,"",!1)),Re.then(()=>{if(E._full_redrawing&&(E.adjustCameraPosition(!0),E._full_redrawing=!1,me=!0,E.changedDepthMethod("norender")),E._first_drawing&&(E.adjustCameraPosition(!0),E.showDrawInfo(),E._first_drawing=!1,H=!0,me=!0),0!==E.ctrl.transparency&&E.changedGlobalTransparency(E.ctrl.transparency,!0),H&&E.completeScene(),me&&(E.ctrl.trans_radial||E.ctrl.trans_z)&&E.changedTransformation("norender"),me&&E.ctrl._axis&&E.drawSimpleAxis(!0),E._scene.overrideMaterial=null,void 0!==E._provided_more_nodes&&(E.appendMoreNodes(E._provided_more_nodes,!0),delete E._provided_more_nodes),De)return E.getExtrasContainer("delete"),E.drawExtras((E._main_painter?E._main_painter._extraObjects:null)||E._extraObjects,"",!1)}).then(()=>(E.updateClipping(!0),E.render3D(0,!0),N&&(0,ye.Ae)(),E.addOrbitControls(),E.addTransformControl(),H&&(!1===E.ctrl.highlight&&(E.ctrl.highlight=E.first_render_tm<1e3),!1===E.ctrl.highlight_scene&&(E.ctrl.highlight_scene=E.ctrl.highlight),E._webgl&&E.ctrl.rotate&&!E.ctrl.project&&E.autorotate(2.5),E._webgl&&E.ctrl.show_controls&&!(0,M.isBatchMode)()&&E.showControlOptions(!0)),E.setAsMainPainter(),(0,M.isFunc)(E._resolveFunc)&&(E._resolveFunc(E),delete E._resolveFunc),(0,M.isFunc)(E._complete_handler)&&E._complete_handler(E),E._draw_nodes_again?E.startDrawGeometry():E._drawing_ready=!0,E))})()}isDrawingReady(){return this._drawing_ready||!1}removeDrawnNode(N){if(!this._draw_nodes)return;let E=[];for(let H=0;H<this._draw_nodes.length;++H){let me=this._draw_nodes[H];me.nodeid===N||this._clones.isIdInStack(N,me.stack)?this._clones.createObject3D(me.stack,this._toplevel,"delete_mesh"):E.push(me)}E.length<this._draw_nodes.length&&(this._draw_nodes=E,this.render3D())}cleanup(N){if(!N){this.removeSSAO(),this.clearTopPainter();let E=0;if(this._on_pad){let me=this.getFramePainter();me?.mode3d&&(me.clear3dCanvas(),me.mode3d=!1)}else E=this.clear3dCanvas();this._toolbar&&this._toolbar.cleanup(),this.helpText(),(0,Be.mF)(this._scene),(0,Be.mF)(this._full_geom),this._tcontrols&&this._tcontrols.dispose(),this._controls&&this._controls.cleanup(),this._context_menu&&this._renderer.domElement.removeEventListener("contextmenu",this._context_menu,!1),this._datgui&&this._datgui.destroy(),this._worker&&this._worker.terminate(),delete this._animating;let H=this.getGeometry();if(H&&this.ctrl.is_main&&(H.$geo_painter===this?delete H.$geo_painter:H.fVolume&&H.fVolume.$geo_painter===this&&delete H.fVolume.$geo_painter),this._main_painter){let me=this._main_painter._slave_painters.indexOf(this);me>=0&&this._main_painter._slave_painters.splice(me,1)}for(let me=0;me<this._slave_painters.length;++me){let De=this._slave_painters[me];De&&De._main_painter===this&&(De._main_painter=null)}delete this.geo_manager,delete this._highlight_handlers,super.cleanup(),delete this.ctrl,delete this.options,this.did_cleanup=!0,E<0&&this.selectDom().html("")}if(this._slave_painters)for(let E in this._slave_painters){let H=this._slave_painters[E];H._main_painter=null,H._clones===this._clones&&(H._clones=null)}this._main_painter=null,this._slave_painters=[],this._render_resolveFuncs&&(this._render_resolveFuncs.forEach(E=>E(this)),delete this._render_resolveFuncs),(0,Be.cM)(this._renderer),delete this._scene,this._scene_width=0,this._scene_height=0,this._renderer=null,this._toplevel=null,delete this._full_geom,delete this._camera,delete this._camera0pos,delete this._lookat,delete this._selected_mesh,this._clones&&this._clones_owner&&this._clones.cleanup(this._draw_nodes,this._build_shapes),delete this._clones,delete this._clones_owner,delete this._draw_nodes,delete this._drawing_ready,delete this._build_shapes,delete this._new_draw_nodes,delete this._new_append_nodes,delete this._last_camera_position,this.first_render_tm=0,this.last_render_tm=0,this.changeStage(0,"cleanup"),delete this.drawing_log,delete this._datgui,delete this._controls,delete this._context_menu,delete this._tcontrols,delete this._toolbar,delete this._worker}helpText(N){(0,ye.Ae)(N)}performResize(N,E){return!(this._scene_width===N&&this._scene_height===E||N<10||E<10||(this._scene_width=N,this._scene_height=E,this._camera&&this._renderer&&("PerspectiveCamera"==this._camera.type&&(this._camera.aspect=this._scene_width/this._scene_height),this._camera.updateProjectionMatrix(),this._renderer.setSize(this._scene_width,this._scene_height,!this._fit_main_area),this._effectComposer&&this._effectComposer.setSize(this._scene_width,this._scene_height),this._bloomComposer&&this._bloomComposer.setSize(this._scene_width,this._scene_height),this.isStage(0)&&this.render3D()),0))}checkResize(N){let E=this.getCanvPainter();if(E&&!E.checkCanvasResize(N))return!1;let H=this.getSizeFor3d();return this.performResize(H.width,H.height)}toggleEnlarge(){this.enlargeMain("toggle")&&this.checkResize()}ownedByTransformControls(N){let E=N.parent;for(;E&&!(E instanceof L.Ys8);)E=E.parent;return E&&E instanceof L.Ys8}accessObjectWireFrame(N,E){if(N.hasOwnProperty("material")&&!(N instanceof L.VLJ)&&!this.ownedByTransformControls(N))return void 0!==E&&N.stack&&(N.material.wireframe=E),N.material.wireframe}changedWireFrame(){if(!this._scene)return;let N=this.ctrl.wireframe;this._scene.traverse(E=>this.accessObjectWireFrame(E,N)),this.render3D()}updateObject(N){if("same"===N||!N?._typename)return!1;if(N===this.getObject())return!0;let E;return N._typename===lt&&(E=N,N=N.fMasterVolume),0===N._typename.indexOf(M.clTGeoVolume)&&(N={_typename:M.clTGeoNode,fVolume:N,fName:N.fName,$geoh:N.$geoh,_proxy:!0}),this.geo_manager&&E?(this.geo_manager=E,this.assignObject(N),this._did_update=!0,!0):!!this.matchObjectType(N._typename)&&(this.assignObject(N),this._did_update=!0,!0)}clearDrawings(){this._clones&&this._clones_owner&&this._clones.cleanup(this._draw_nodes,this._build_shapes),delete this._clones,delete this._clones_owner,delete this._draw_nodes,delete this._drawing_ready,delete this._build_shapes,delete this._extraObjects,delete this._clipCfg,(0,Be.mF)(this._toplevel,!0),this._full_redrawing=!0}redraw(){if(this._did_update)return this.startRedraw();let N=this._on_pad?this.getFramePainter():null;if(!N)return Promise.resolve(!1);let E=N.getSizeFor3d(N.access3dKind());return N.apply3dSize(E),this.performResize(E.width,E.height)}redrawObject(N,E){return!!this.updateObject(N,E)&&this.startRedraw()}startRedraw(){delete this._did_update,this.clearDrawings();let N=this.getGeometry(),E="";return this.geo_manager&&(E=N.fName),this.prepareObjectDraw(N,E)}static draw(N,E,H){return(0,ze.Z)(function*(){if(!E)return null;let me=null,De=null,Re="",Ue=!1;if("fShapeBits"in E&&"fShapeId"in E?(me=E,E=null):E._typename===$e||E._typename===M.clTGeoVolume?me=E.fShape:E._typename===mt||E._typename===un?(me=E.fShape,Ue=!0):E._typename===lt?me=E.fMasterVolume.fShape:E._typename===Lt?(De=E.fMarker,Re="<prnt>/Marker",E=function It(we){let N=(0,M.create)(M.clTGeoVolume);zt(N,T.kVisDaughters,!0),N.$geoh=!0,N.fName="";let E=(0,M.create)(M.clTGeoNodeMatrix);E.fName=we.fVolume1.fName||"Overlap1",E.fMatrix=we.fMatrix1,E.fVolume=we.fVolume1;let H=(0,M.create)(M.clTGeoNodeMatrix);return H.fName=we.fVolume2.fName||"Overlap2",H.fMatrix=we.fMatrix2,H.fVolume=we.fVolume2,N.fNodes=(0,M.create)(M.clTList),N.fNodes.Add(E),N.fNodes.Add(H),N}(E),H||(H="wire")):"fVolume"in E?E.fVolume&&(me=E.fVolume.fShape):E=null,(0,M.isStr)(H)&&0==H.indexOf("comp")&&me&&me._typename==ct&&me.fNode){let pt=1;"x"==(H=H.slice(4))[0]&&(pt=999,H=H.slice(1)+"_vislvl999"),E=Sn(me,pt)}if(!E&&me&&(E=Object.assign((0,M.create)(M.clTNamed),{_typename:mt,fTrans:null,fShape:me,fRGBA:[0,1,0,1],fElements:null,fRnrSelf:!0})),!E)return null;let Xe=nl(N,E,H);return Xe.ctrl.is_main&&!E.$geo_painter&&(E.$geo_painter=Xe),!Xe.ctrl.is_main&&Xe.ctrl.project&&E.$geo_painter&&(Xe._main_painter=E.$geo_painter,Xe._main_painter._slave_painters.push(Xe)),(Ue&&!Xe.ctrl.vislevel||Xe.ctrl.vislevel<9)&&(Xe.ctrl.vislevel=9),De&&(Xe._splitColors=!0,Xe.addExtra(De,Re)),Xe.loadMacro(Xe.ctrl.script_name).then(pt=>Xe.prepareObjectDraw(pt.obj,pt.prefix))})()}}let ll=!1;function Of(){function we(N,E){return`.jsroot .img_${N} { display: inline-block; height: 16px; width: 16px; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQ${E}'); }`}!ll&&(0,M.isFunc)(M.internals.addDrawFunc)&&(ll=!0,M.internals.addDrawFunc({name:it,icon_get:Gh,icon_click:Mo}),M.internals.addDrawFunc({name:Nt,icon_get:Gh,icon_click:Mo})),(0,ye.DW)(`\n${we("geoarb8","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAB1SURBVBjTdY6rEYAwEETTy6lzK8/Fo+Jj18dTAjUgaQGfGiggtRDE8RtY93Zu514If2nzk2ux9c5TZkwXbiWTUavzws69oBfpYBrMT4r0Jhsw+QfRgQSw+CaKRsKsnV+SaF8MN49RBSgPUxO85PMl5n4tfGUH2gghs2uPAeQAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMTItMDJUMTQ6MjY6MjkrMDE6MDDARtd2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTExLTEyVDA4OjM5OjE5KzAxOjAwO3ydwwAAAABJRU5ErkJggg==")}\n${we("geocombi","CAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAABIAAAASABGyWs+AAAAlUlEQVQoz5VQMQ4CMQyzEUNnBqT7Bo+4nZUH8gj+welWJsQDkHoCEYakTXMHSFiq2jqu4xRAEl2A7w4myWzpzCSZRZ658ldKu1hPnFsequBIc/hcLli3l52MAIANtpWrDsv8waGTW6BPuFtsdZArXyFuj33TQpazGEQF38phipnLgItxRcAoOeNpzv4PTXnC42fb//AGI5YqfQAU8dkAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMTItMDJUMTQ6MjY6MjkrMDE6MDDARtd2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTExLTEyVDA4OjM5OjE5KzAxOjAwO3ydwwAAAABJRU5ErkJggg==")}\n${we("geocone","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAACRSURBVBjTdY+xDcNACEVvEm/ggo6Olva37IB0C3iEzJABvAHFTXBDeJRwthMnUvylk44vPjxK+afeokX0flQhJO7L4pafSOMxzaxIKc/Tc7SIjNLyieyZSjBzc4DqMZI0HTMonWPBNlogOLeuewbg9c0hOiIqH7DKmTCuFykjHe4XOzQ58XVMGxzt575tKzd6AX9yMkcWyPlsAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTEyLTAyVDE0OjI2OjI5KzAxOjAwwEbXdgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOSswMTowMDt8ncMAAAAASUVORK5CYII=")}\n${we("geogtra","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAACCSURBVBjTVc+hDQMxDAVQD1FyqCQk0MwsCwQEG3+eCW6B0FvheDboFMGepTlVitPP/Cz5y0S/mNkw8pySU9INJDDH4vM4Usm5OrQXasXtkA+tQF+zxfcDY8EVwgNeiwmA37TEccK5oLOwQtuCj7BM2Fq7iGrxVqJbSsH+GzXs+798AThwKMh3/6jDAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTEyLTAyVDE0OjI2OjI5KzAxOjAwwEbXdgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOSswMTowMDt8ncMAAAAASUVORK5CYII=")}\n${we("geomedium","BAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAABVQTFRFAAAAAAAAMDAww8PDWKj/////gICAG0/C4AAAAAF0Uk5TAEDm2GYAAAABYktHRAX4b+nHAAAACXBIWXMAAABIAAAASABGyWs+AAAAXElEQVQI102MwRGAMAgEuQ6IDwvQCjQdhAl/H7ED038JHhkd3dcOLAgESFARaAqnEB3yrj6QSEym1RbbOKinN+8q2Esui1GaX7VXSi4RUbxHRbER8X6O5Pg/fLgBBzMN8HfXD3AAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMTItMDJUMTQ6MjY6MjkrMDE6MDDARtd2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTExLTEyVDA4OjM5OjE5KzAxOjAwO3ydwwAAAABJRU5ErkJggg==")}\n${we("geopara","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAABtSURBVBjTY2DADq5MT7+CzD9kaKjp+QhJYIWqublhMbKAgpOnZxWSQJdsVJTndCSBKoWoAM/VSALpqlEBAYeQBKJAAsi2BGgCBZDdEWUYFZCOLFBlGOWJ7AyGFeaotjIccopageK3R12PGHABACTYHWd0tGw6AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTEyLTAyVDE0OjI2OjI5KzAxOjAwwEbXdgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOSswMTowMDt8ncMAAAAASUVORK5CYII=")}\n${we("georotation","CAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAABIAAAASABGyWs+AAAAiklEQVQoz2NgYGBgYGDg+A/BmIAFIvyDEbs0AwMTAwHACLPiB5QVBTdpGSOSCZjScDcgc4z+32BgYGBgEGIQw3QDLkdCTZD8/xJFeBfDVxQT/j9n/MeIrMCNIRBJwX8GRuzGM/yHKMAljeILNFOuMTyEisEUMKIqucrwB2oyIhyQpH8y/MZrLWkAAHFzIHIc0Q5yAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTEyLTAyVDE0OjI2OjI5KzAxOjAwwEbXdgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOSswMTowMDt8ncMAAAAASUVORK5CYII=")}\n${we("geotranslation","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAABESURBVBjTY2DgYGAAYzjgAAIQgSLAgSwAAcrWUUCAJBAVhSpgBAQumALGCJPAAsriHIS0IAQ4UAU4cGphQBWwZSAOAADGJBKdZk/rHQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0xMi0wMlQxNDoyNjoyOSswMTowMMBG13YAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTJUMDg6Mzk6MTkrMDE6MDA7fJ3DAAAAAElFTkSuQmCC")}\n${we("geotrd2","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAABsSURBVBjTbY+xDcAwCARZx6UraiaAmpoRvIIb75PWI2QITxIiRQKk0CCO/xcA/NZ9LRs7RkJEYg3QxczUwoGsXiMAoe8lAelqRWFNKpiNXZLAalRDd0f3TMgeMckABKsCDmu+442RddeHz9cf9jUkW8smGn8AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMTItMDJUMTQ6MjY6MjkrMDE6MDDARtd2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTExLTEyVDA4OjM5OjE5KzAxOjAwO3ydwwAAAABJRU5ErkJggg==")}\n${we("geovolume","BAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAB5QTFRFAAAAMDAw///Ay8uc/7+Q/4BgmJh4gIDgAAD/////CZb2ugAAAAF0Uk5TAEDm2GYAAAABYktHRAnx2aXsAAAACXBIWXMAAABIAAAASABGyWs+AAAAR0lEQVQI12NggAEBIBAEQgYGQUYQAyIGIhgwAZMSGCgwMJuEKimFOhswsKWAGG4JDGxJIBk1EEO9o6NIDVkEpgauC24ODAAASQ8Pkj/retYAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMTItMDJUMTQ6MjY6MjkrMDE6MDDARtd2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTExLTEyVDA4OjM5OjE5KzAxOjAwO3ydwwAAAABJRU5ErkJggg==")}\n${we("geoassembly","BAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAA9QTFRFAAAAMDAw/wAAAAD/////jEo0BQAAAAF0Uk5TAEDm2GYAAAABYktHRASPaNlRAAAACXBIWXMAAABIAAAASABGyWs+AAAAOklEQVQI12NggAFGRgEgEBRgEBSAMhgYGQQEgAR+oARGDIwCIAYjUL0A2DQQg9nY2ABVBKoGrgsDAADxzgNboMz8zQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0xMi0wMlQxNDoyNjoyOSswMTowMMBG13YAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTJUMDg6Mzk6MTkrMDE6MDA7fJ3DAAAAAElFTkSuQmCC")}\n${we("geocomposite","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAABuSURBVBjTY2AgF2hqgQCCr+0V4O7hFmgCF7CJyKysKkmxhfGNLaw9SppqAi2gfMuY5Agrl+ZaC6iAUXRJZX6Ic0klTMA5urapPFY5NRcmYKFqWl8S5RobBRNg0PbNT3a1dDGH8RlM3LysTRjIBwAG6xrzJt11BAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0xMi0wMlQxNDoyNjoyOSswMTowMMBG13YAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTJUMDg6Mzk6MTkrMDE6MDA7fJ3DAAAAAElFTkSuQmCC")}\n${we("geoctub","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAACESURBVBjTdc+xDcMwDARA7cKKHTuWX37LHaw+vQbQAJomA7j2DB7FhCMFCZB8pxPwJEv5kQcZW+3HencRBekak4aaMQIi8YJdAQ1CMeE0UBkuaLMETklQ9Alhka0JzzXWqLVBuQYPpWcVuBbZjZafNRYcDk9o/b07bvhINz+/zxu1/M0FSRcmAk/HaIcAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMTItMDJUMTQ6MjY6MjkrMDE6MDDARtd2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTExLTEyVDA4OjM5OjE5KzAxOjAwO3ydwwAAAABJRU5ErkJggg==")}\n${we("geohype","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAACKSURBVBjTbU+rFQQhDKQSDDISEYuMREfHx6eHKMpYuf5qoIQt5bgDblfcuJk3nySEhSvceDV3c/ejT66lspopE9pXyIlkCrHMBACpu1DClekQAREi/loviCnF/NhRwJLaQ6hVhPjB8bOCsjlnNnNl0FWJVWxAqGzHONRHpu5Ml+nQ+8GzNW9n+Is3eg80Nk0iiwoAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMTItMDJUMTQ6MjY6MjkrMDE6MDDARtd2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTExLTEyVDA4OjM5OjE5KzAxOjAwO3ydwwAAAABJRU5ErkJggg==")}\n${we("geomixture","BAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAACFQTFRFAAAAAAAAKysrVVUA//8B//8AgICAqqpV398gv79A////VYJtlwAAAAF0Uk5TAEDm2GYAAAABYktHRApo0PRWAAAACXBIWXMAAABIAAAASABGyWs+AAAAXklEQVQI12NgwASCQsJCgoZAhoADq1tKIJAhEpDGxpYIZKgxsLElgBhibAkOCY4gKTaGkPRGIEPUIYEBrEaAIY0tDawmgYWNgREkkjCVjRWkWCUhLY0FJCIIBljsBgCZTAykgaRiRwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0xMi0wMlQxNDoyNjoyOSswMTowMMBG13YAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTJUMDg6Mzk6MTkrMDE6MDA7fJ3DAAAAAElFTkSuQmCC")}\n${we("geopcon","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAACJSURBVBjTdc+hGcQwCIZhhjl/rkgWiECj8XgGyAbZoD5LdIRMkEnKkV575n75Pp8AgLU54dmh6mauelyAL2Qzxfe2sklioq6FacFAcRFXYhwJHdU5rDD2hEYB/CmoJVRMiIJqgtENuoqA8ltAlYAqRH4d1tGkwzTqN2gA7Nv+fUwkgZ/3mg34txM+szzATJS1HQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0xMi0wMlQxNDoyNjoyOSswMTowMMBG13YAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTJUMDg6Mzk6MTkrMDE6MDA7fJ3DAAAAAElFTkSuQmCC")}\n${we("geosphere","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAACFSURBVBjTdY+xEcQwCAQp5QNFjpQ5vZACFBFTADFFfKYCXINzlUAJruXll2ekxDAEt9zcANFbXb2mqm56dxsymAH0yccAJaeNi0h5QGyfxGJmivMPjj0nmLsbRmyFCss3rlbpcUjfS8wLUNRcJyCF6uqg2IvYCnoKC7f1kSbA6riTz7evfwj3Ml+H3KBqAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTEyLTAyVDE0OjI2OjI5KzAxOjAwwEbXdgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOSswMTowMDt8ncMAAAAASUVORK5CYII=")}\n${we("geotrap","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAB5SURBVBjTbY+hFYAwDETZB1OJi4yNPp0JqjtAZ2AELL5DdABmIS2PtLxHXH7u7l2W5W+uHMHpGiCHLYR1yw4SCZMIXBOJWVSjK7QDDAu4g8OBmAKK4sAEDdR3rw8YmcUcrEijKKhl7lN1IQPn9ExlgU6/WEyc75+5AYK0KY5oHBDfAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTEyLTAyVDE0OjI2OjI5KzAxOjAwwEbXdgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOSswMTowMDt8ncMAAAAASUVORK5CYII=")}\n${we("geotubeseg","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAACBSURBVBjTdc+hEcQwDARA12P6QFBQ9LDwcXEVkA7SQTr4BlJBakgpsWdsh/wfux3NSCrlV86Mlrxmz1pBWq3bAHwETohxABVmDZADQp1BE+wDNnGywzHgmHDOreJNTDH3Xn3CVX0dpu2MHcIFBkYp/gKsQ8SCQ72V+36/+2aWf3kAQfgshnpXF0wAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMTItMDJUMTQ6MjY6MjkrMDE6MDDARtd2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTExLTEyVDA4OjM5OjE5KzAxOjAwO3ydwwAAAABJRU5ErkJggg==")}\n${we("geoxtru","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAABcSURBVBjTY2AgEmhpeZV56vmWwQW00QUYwAJlSAI6XmVqukh8PT1bT03PchhXX09Pr9wQIQDiJ+ZowgWAXD3bck+QQDlCQTkDQgCoxA/ERBKwhbDglgA1lDMQDwCc/Rvq8nYsWgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0xMi0wMlQxNDoyNjoyOSswMTowMMBG13YAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTJUMDg6Mzk6MTkrMDE6MDA7fJ3DAAAAAElFTkSuQmCC")}\n${we("geobbox","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAB/SURBVBjTVc+hEYAwDAXQLlNRF1tVGxn9NRswQiSSCdgDyQBM0FlIIb2WuL77uf6E8E0N02wKYRwDciTKREVvB04GuZSyOMCABRB1WGzF3uDNQTvs/RcDtJXT4fSEXA5XoiQt0ttVSm8Co2psIOvoimjAOqBmFtH5wEP2373TPIvTK1nrpULXAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTEyLTAyVDE0OjI2OjI5KzAxOjAwwEbXdgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOSswMTowMDt8ncMAAAAASUVORK5CYII=")}\n${we("geoconeseg","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAB4SURBVBjTdc6hEcAgDAXQbFNZXHQkFlkd/30myAIMwAws0gmYpVzvoFyv/S5P/B+izzQ387ZA2pkDnvsU1SQLVIFrOM4JFmEaYp2gCQbmPEGODhJ8jt7Am47hwgrzInGAifa/elUZnQLY00iU30BZAV+BWi2VfnIBv1osbHH8jX0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMTItMDJUMTQ6MjY6MjkrMDE6MDDARtd2AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTExLTEyVDA4OjM5OjE5KzAxOjAwO3ydwwAAAABJRU5ErkJggg==")}\n${we("geoeltu","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAACGSURBVBjTdY+hFYUwDEU7xq9CIXC4uNjY6KczQXeoYgVMR2ABRmCGjvIp/6dgiEruueedvBDuOR57LQnKyc8CJmKO+N8bieIUPtmBWjIIx8XDBHYCipsnql1g2D0UP2OoDqwBncf+RdZmzFMHizRjog7KZYzawd4Ay93lEAPWR7WAvNbwMl/XwSxBV8qCjgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0xMi0wMlQxNDoyNjoyOSswMTowMMBG13YAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTJUMDg6Mzk6MTkrMDE6MDA7fJ3DAAAAAElFTkSuQmCC")}\n${we("geomaterial","CAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAABIAAAASABGyWs+AAAAbElEQVQoz62QMRbAIAhDP319Xon7j54qHSyCtaMZFCUkRjgDIdRU9yZUCfg8ut5aAHdcxtoNurmgA3ABNKIR9KimhSukPe2qxcCYC0pfFXx/aFWo7i42KKItOpopqvvnLzJmtlZTS7EfGAfwAM4EQbLIGV0sAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTEyLTAyVDE0OjI2OjI5KzAxOjAwwEbXdgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOSswMTowMDt8ncMAAAAASUVORK5CYII=")}\n${we("geoparab","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAB/SURBVBjTbY+xDYAwDAQ9UAp3X7p0m9o9dUZgA9oMwAjpMwMzMAnYBAQSX9mn9+tN9KOtzsWsLOvYCziUGNX3nnCLJRzKPgeYrhPW7FJNLUB3YJazYKQKTnBaxgXRzNmJcrt7XCHQp9kEB1wfELEir/KGj4Foh8A+/zW1nf51AFabKZuWK+mNAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTEyLTAyVDE0OjI2OjI5KzAxOjAwwEbXdgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOSswMTowMDt8ncMAAAAASUVORK5CYII=")}\n${we("geopgon","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAABwSURBVBjTY2AgDlwAAzh3sX1sPRDEeuwDc+8V2dsHgQQ8LCzq74HkLSzs7Yva2tLt7S3sN4MNiDUGKQmysCi6BzWkzcI+PdY+aDPCljZlj1iFOUjW1tvHLjYuQhJIt5/DcAFZYLH9YnSn7iPST9gAACbsJth21haFAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTEyLTAyVDE0OjI2OjI5KzAxOjAwwEbXdgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOSswMTowMDt8ncMAAAAASUVORK5CYII=")}\n${we("geotorus","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAACGSURBVBjTjY+hFcMwDEQ9SkFggXGIoejhw+LiGkBDlHoAr+AhgjNL5byChuXeE7gvPelUyjOds/f5Zw0ggfj5KVCPMBWeyx+SbQ1XUriAC2XfpWWxjQQEZasRtRHiCUAj3qN4JaolUJppzh4q7dUTdHFXW/tH9OuswWm3nI7tc08+/eGLl758ey9KpKrNOQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0xMi0wMlQxNDoyNjoyOSswMTowMMBG13YAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTJUMDg6Mzk6MTkrMDE6MDA7fJ3DAAAAAElFTkSuQmCC")}\n${we("geotrd1","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAB/SURBVBjTbc6xDQMhDAVQ9qH6lUtal65/zQ5IDMAMmYAZrmKGm4FJzlEQQUo+bvwkG4fwm9lbodV7w40Y4WGfSxQiXiJlQfZOjWRb8Ioi3tKuBQMCo7+9N72BzPsfAuoTdUP9QN8wgOQwvsfWmHzpeT5BKydMNW0nhJGvGf7mAc5WKO9e5N2dAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE1LTEyLTAyVDE0OjI2OjI5KzAxOjAwwEbXdgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOSswMTowMDt8ncMAAAAASUVORK5CYII=")}\n${we("geotube","CAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAACGSURBVBjTRc+tEcAwCAXgLFNbWeSzSDQazw5doWNUZIOM0BEyS/NHy10E30HyklKvWnJ+0le3sJoKn3X2z7GRuvG++YRyMMDt0IIKUXMzxbnugJi5m9K1gNnGBOUFElAWGMaKIKI4xoQggl00gT+A9hXWgDwnfqgsHRAx2m+8bfjfdyrx5AtsSjpwu+M2RgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNS0xMi0wMlQxNDoyNjoyOSswMTowMMBG13YAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTJUMDg6Mzk6MTkrMDE6MDA7fJ3DAAAAAElFTkSuQmCC")}\n${we("evepoints","BAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAABJQTFRF////n4mJcEdKRDMzcEdH////lLE/CwAAAAF0Uk5TAEDm2GYAAAABYktHRACIBR1IAAAACXBIWXMAAABIAAAASABGyWs+AAAAI0lEQVQI12NgIAowIpgKEJIZLiAgAKWZGQzQ9UGlWIizBQgAN4IAvGtVrTcAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTYtMDktMDJUMTU6MDQ6MzgrMDI6MDDPyc7hAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE2LTA5LTAyVDE1OjA0OjM4KzAyOjAwvpR2XQAAAABJRU5ErkJggg==")}\n${we("evetrack","CAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAABIAAAASABGyWs+AAAAqElEQVQoz32RMQrCQBBFf4IgSMB0IpGkMpVHCFh7BbHIGTyVhU0K8QYewEKsbVJZaCUiPAsXV8Puzhaz7H8zs5+JUDjikLilQr5zpCRl5xMXZNScQE5gSMGaz70jjUAJcw5c3UBMTsUe+9Kzf065SbropeLXimWfDIgoab/tOyPGzOhz53+oSWcSGh7UdB2ZNKXBZdgAuUdEKJYmrEILyVgG6pE2tEHgDfe42rbjYzSHAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE2LTA5LTAyVDE1OjA0OjQ3KzAyOjAwM0S3EQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNi0wOS0wMlQxNTowNDo0NyswMjowMEIZD60AAAAASUVORK5CYII=")}\n.jsroot .geovis_this { background-color: lightgreen; }\n.jsroot .geovis_daughters { background-color: lightblue; }\n.jsroot .geovis_all { background-color: yellow; }`)}function nl(we,N,E){Of(),_("GradPerSegm",M.settings.GeoGradPerSegm),_("CompressComp",M.settings.GeoCompressComp);let H=new tl(we,N);return H.options=H.decodeOptions(E),Object.assign(H.ctrl,H.options),H.ctrl.ssao.enabled=H.options.usessao,H.ctrl.bloom.enabled=H.options.usebloom,H.ctrl.clip[0].enabled=H.options.clipx,H.ctrl.clip[1].enabled=H.options.clipy,H.ctrl.clip[2].enabled=H.options.clipz,H}function Qa(we,N,E){if(!N._geoobj)return!1;let H=N._geoobj,me=N._volume,De=H._typename===mt||H._typename===un;if(!me&&!De)return!1;we.add("separator");const Re=(pt,vt,Ht)=>{if(vt||(vt={visible:0,hidden:0}),Ht||(void 0!==vt.assign?pt.fRnrSelf=vt.assign:pt.fRnrSelf?vt.vis++:vt.hidden++),pt.fElements)for(let hn=0;hn<pt.fElements.arr.length;++hn)Re(pt.fElements.arr[hn],vt,!1);return vt},Ue=pt=>{"self"===pt?(H.fRnrSelf=!H.fRnrSelf,N._icon=N._icon.split(" ")[0]+ii(H),E.updateTreeNode(N)):(Re(H,{assign:"true"===pt},!0),E.forEachItem(vt=>{vt._geoobj&&vt._icon&&(vt._icon=N._icon.split(" ")[0]+ii(vt._geoobj),E.updateTreeNode(vt))},N)),In(N,"testGeomChanges")},Xe=pt=>{Zt(me,pt);let vt=N._icon.split(" ")[0]+ii(me);E.forEachItem(Ht=>{N._volume===Ht._volume&&(Ht._icon=vt,E.updateTreeNode(Ht))}),E.updateTreeNode(N),In(N,"testGeomChanges")};if(0===N._geoobj._typename.indexOf(M.clTGeoNode)&&In(N)&&we.add("Focus",function(){let pt=In(N);if(!pt)return;let vt=E.itemFullName(N,pt);(0,M.isFunc)(pt._painter?.focusOnItem)&&pt._painter.focusOnItem(vt)}),De){we.addchk(H.fRnrSelf,"Visible","self",Ue);let pt=Re(H,void 0,!0);pt.hidden+pt.visible>0&&we.addchk(0==pt.hidden,"Daughters",0!==pt.hidden?"true":"false",Ue)}else we.addchk(ft(me,T.kVisNone),"Invisible",T.kVisNone,Xe),we.addchk(ft(me,T.kVisThis),"Visible",T.kVisThis,Xe),we.addchk(ft(me,T.kVisDaughters),"Daughters",T.kVisDaughters,Xe);return!0}function Mo(we,N){if(we._volume)return Zt(we._volume,we._more&&we._volume.fNodes&&we._volume.fNodes.arr.length>0?T.kVisDaughters:T.kVisThis),lr(we._volume,N),In(we,"testGeomChanges"),!1;if(we._geoobj&&(we._geoobj._typename==mt||we._geoobj._typename==un))return we._geoobj.fRnrSelf=!we._geoobj.fRnrSelf,lr(we._geoobj,N),In(we,"testGeomChanges"),!1;let E=In(we);return!!E&&void 0!==E._painter.extraObjectVisible(N,we,!0)}function Gh(we,N){let E="";switch(we._kind){case"ROOT."+Nt:E="img_evetrack";break;case"ROOT."+it:case"ROOT."+M.clTPolyMarker3D:E="img_evepoints"}if(E){let H=In(we);H?._painter&&H._painter.extraObjectVisible(N,we)&&(E+=" geovis_this")}return E}function Ol(we,N,E){let me,De,Re,H={_kind:"ROOT."+N._typename,_name:E||En(N),_title:N.fTitle,_parent:we,_geoobj:N,_get:Xe=>(Xe._geoobj&&(Xe._geoobj.$geoh=!0),Promise.resolve(Xe._geoobj))},Ue=!1;return"TGeoMaterial"==N._typename?H._icon="img_geomaterial":"TGeoMedium"==N._typename?H._icon="img_geomedium":"TGeoMixture"==N._typename?H._icon="img_geomixture":0===N._typename.indexOf(M.clTGeoNode)&&N.fVolume?(H._title="node:"+N._typename,N.fTitle&&(H._title+=" "+N.fTitle),me=N.fVolume):0===N._typename.indexOf(M.clTGeoVolume)?me=N:N._typename==mt||N._typename==un?(Ue=!0,De=N.fShape,Re=N.fElements?N.fElements.arr:null):void 0!==N.fShapeBits&&void 0!==N.fShapeId&&(De=N),me&&(De=me.fShape,Re=me.fNodes?me.fNodes.arr:null),(me||De||Re)&&(me&&(H._volume=me),Re?(H._more=!0,H._expand=Gi):De&&De._typename===ct&&De.fNode&&(H._more=!0,H._shape=De,H._expand=function(Xe){return Ol(Xe,Xe._shape.fNode.fLeft,"Left"),Ol(Xe,Xe._shape.fNode.fRight,"Right"),!0}),!H._title&&N._typename!=M.clTGeoVolume&&(H._title=N._typename),De?(""==H._title&&(H._title=De._typename),H._icon=function pn(we){switch(we._typename){case J:return"img_geoarb8";case ie:return"img_geocone";case Me:return"img_geoconeseg";case ct:return"img_geocomposite";case de:return"img_geotube";case fe:return"img_geotubeseg";case le:return"img_geopara";case D:return"img_geoparab";case oe:return"img_geopcon";case _e:return"img_geopgon";case Ee:return"img_geoassembly";case Ve:return"img_geosphere";case Qe:return"img_geotorus";case U:return"img_geotrd1";case z:return"img_geotrd2";case et:return"img_geoxtru";case Tt:return"img_geotrap";case Bt:return"img_geogtra";case ve:return"img_geoeltu";case Je:return"img_geohype";case I:return"img_geoctub"}return"img_geotube"}(De)):H._icon=H._more?"img_geocombi":"img_geobbox",me?H._icon+=ii(me):Ue&&(H._icon+=ii(N)),H._menu=Qa,H._icon_click=Mo),we._childs||(we._childs=[]),H._name||((0,M.isStr)(we._name)?(H._name=we._name,H._name.lastIndexOf("s")===H._name.length-1&&(H._name=H._name.slice(0,H._name.length-1)),H._name+="_"+we._childs.length):H._name="item_"+we._childs.length),we._childs.push(H),H}function Cl(we){return _c.apply(this,arguments)}function _c(){return(_c=(0,ze.Z)(function*(we){let N=we.getObject(),E=[-1,-1,-1],H=[1,1,1];if(N.fP?.length)for(let Xe=0;Xe<N.fP.length;Xe+=3)for(let pt=0;pt<3;++pt)E[pt]=Math.min(E[pt],N.fP[Xe+pt]),H[pt]=Math.max(H[pt],N.fP[Xe+pt]);let me=(0,M.create)(M.clTNamed);me._typename=$,me.fDX=H[0]-E[0],me.fDY=H[1]-E[1],me.fDZ=H[2]-E[2],me.fShapeId=1,me.fShapeBits=0,me.fOrigin=[0,0,0];let De=Object.assign((0,M.create)(M.clTNamed),{_typename:mt,fTrans:[1,0,0,0,0,1,0,0,0,0,1,0,(E[0]+H[0])/2,(E[1]+H[1])/2,(E[2]+H[2])/2,0],fShape:me,fRGBA:[0,0,0,0],fElements:null,fRnrSelf:!1}),Re="",Ue=we.getPadPainter();return Ue?.pad?.fFillColor&&Ue?.pad?.fFillStyle>1e3&&(Re="bkgr_"+Ue.pad.fFillColor),tl.draw(we.getDom(),De,Re).then(Xe=>Xe.drawExtras(N))})).apply(this,arguments)}function Jp(){let we=this.getMainPainter();if((0,M.isFunc)(we?.setAxesDraw))return we.setAxesDraw(!0);console.error("no geometry painter found to toggle TAxis3D drawing")}function nu(we,N){if(!we)return null;N||(N={}),N.numfaces||(N.numfaces=1e5),N.numnodes||(N.numnodes=1e3),N.frustum||(N.frustum=null),N.res_mesh=N.res_faces=0;let E=null,H=null;if(we.visibles&&we.nodes&&we.numnodes){let Re=we.numnodes>1e6?{length:we.numnodes}:new Array(we.numnodes);we.nodes.forEach(Xe=>{Re[Xe.id]=Ae.formatServerElement(Xe)}),E=new Ae(null,Re),E.name_prefix=E.getNodeName(0),E.maxdepth=20;let Ue=we.cfg?.nsegm||30;for(let Xe=0;Xe<we.visibles.length;++Xe){let pt=we.visibles[Xe],vt=pt.ri;vt&&(pt.server_shape=vt.server_shape=Yi(vt,Ue))}H=we.visibles}else{let Re=null,Ue=!1;if("fShapeBits"in we&&"fShapeId"in we?(Re=we,we=null):we._typename===$e||we._typename===M.clTGeoVolume||we._typename===mt||we._typename===un?Re=we.fShape:we._typename===lt?(Ue=!N.showtop,Re=(we=we.fMasterVolume).fShape):we.fVolume?Re=we.fVolume.fShape:we=null,N.composite&&Re&&Re._typename==ct&&Re.fNode&&(we=Sn(Re)),!we&&Re&&(we=Object.assign((0,M.create)(M.clTNamed),{_typename:mt,fTrans:null,fShape:Re,fRGBA:[0,1,0,1],fElements:null,fRnrSelf:!0})),!we)return null;0===we._typename.indexOf(M.clTGeoVolume)&&(we={_typename:M.clTGeoNode,fVolume:we,fName:we.fName,$geoh:we.$geoh,_proxy:!0}),E=new Ae(we),E.setVisLevel(N.vislevel),E.setMaxVisNodes(N.numnodes),N.dflt_colors&&E.setDefaultColors(!0),(N.no_screen?0:E.markVisibles(!0))<=0?E.markVisibles(!1,!1,Ue):E.markVisibles(!0,!0,Ue),E.produceIdShifts(),H=E.collectVisibles(N.numfaces,N.frustum).lst}let me=E.collectShapes(H);E.buildShapes(me,N.numfaces);let De=new L.Tme;for(let Re=0;Re<H.length;++Re){let Ue=H[Re];if(Ue.done)continue;let Xe=Ue.server_shape||me[Ue.shapeid];if(!Xe.ready){console.warn("shape marked as not ready when should");break}if(Ue.done=!0,Xe.used=!0,!Xe.geom||0===Xe.nfaces){E.createObject3D(Ue.stack,De,"delete_mesh");continue}let pt=E.getDrawEntryProperties(Ue,(0,je._V)());N.res_mesh++,N.res_faces+=Xe.nfaces;let vt=E.createObject3D(Ue.stack,De,N);pt.material.wireframe=N.wireframe,pt.material.side=N.doubleside?L.ehD:L.Wl3;let Ht=null;Ht=(vt.absMatrix||vt.matrixWorld).determinant()>-.9?new L.Kj0(Xe.geom,pt.material):rt(Xe,pt.material),Ht.name=E.getNodeName(Ue.nodeid),vt.add(Ht),vt.absMatrix&&(Ht.matrix.copy(vt.absMatrix),Ht.matrix.decompose(vt.position,vt.quaternion,vt.scale),Ht.updateMatrixWorld())}return De}},6030:($r,At,Ce)=>{"use strict";Ce.d(At,{KB:()=>He,ai:()=>Ie,z4:()=>Oe});var ze=Ce(5835),M=Ce(9542),L=Ce(2253),ye=Ce(3675),Be=Ce(6458),je=Ce(4953);function Ie(ce,Y){return ce<.5?Y?"%S.%L":"%H:%M:%S.%L":ce<30?Y?"%Mm%S":"%H:%M:%S":(ce/=60)<30?Y?"%Hh%M":"%d/%m %H:%M":(ce/=60)<12?Y?"%d-%Hh":"%d/%m/%y %Hh":(ce/=24)<15.218425?Y?"%d/%m":"%d/%m/%y":(ce/=30.43685)<6?"%d/%m/%y":(ce/=12)<2?Y?"%m/%y":"%d/%m/%y":"%Y"}const He={initAxisPainter(){this.name="yaxis",this.kind="normal",this.func=null,this.order=0,this.full_min=0,this.full_max=1,this.scale_min=0,this.scale_max=1,this.ticks=[]},cleanupAxisPainter(){this.ticks=[],delete this.format,delete this.func,delete this.tfunc1,delete this.tfunc2,delete this.gr},assignFrameMembers(ce,Y){ce["gr"+Y]=this.gr,ce["log"+Y]=this.log,ce[`scale_${Y}min`]=this.scale_min,ce[`scale_${Y}max`]=this.scale_max},convertDate(ce){return new Date(this.timeoffset+1e3*ce)},revertPoint(ce){let Y=this.func.invert(ce);return"time"==this.kind?(Y-this.timeoffset)/1e3:Y},formatTime(ce,Y){return Y?this.tfunc1(ce):this.tfunc2(ce)},formatLog(ce,Y,K){let ue=parseFloat(ce),X=Math.round(ue);if(!Y)return X===ue&&Math.abs(X)<1e9?X.toString():(0,ye.Ee)(ue,K||M.gStyle.fStatFormat);if(ue<=0)return null;let Z=Math.log10(ue),O=this.logbase;return 10!==O&&(Z/=Math.log10(O)),this.moreloglabels||Math.abs(Z-Math.round(Z))<.001?this.noexp||2==Y?ue.toFixed(Z<0?Math.round(.5-Z):0):this.formatExp(O,Math.floor(Z+.01),ue):null},formatNormal(ce,Y,K){let ue=parseFloat(ce);return Y&&this.order&&(ue/=Math.pow(10,this.order)),ue===Math.round(ue)?Math.abs(ue)<1e9?ue.toFixed(0):ue.toExponential(4):Y?this.ndig>10?ue.toExponential(this.ndig-11):ue.toFixed(this.ndig):(0,ye.Ee)(ue,K||M.gStyle.fStatFormat)},formatExp(ce,Y,K){let ue="";if(K&&0!=(K=Math.round(K/Math.pow(ce,Y)))&&1!=K&&(ue=K.toString()+(M.settings.Latex?"#times":"x")),Math.abs(ce-Math.exp(1))<.001?ue+="e":ue+=ce.toString(),M.settings.Latex>M.constants.Latex.Symbols)return ue+`^{${Y}}`;const X={0:"\u2070",1:"\xb9",2:"\xb2",3:"\xb3",4:"\u2074",5:"\u2075",6:"\u2076",7:"\u2077",8:"\u2078",9:"\u2079","-":"\u207b"};let Z=Y.toString();for(let O=0;O<Z.length;++O)ue+=X[Z[O]];return ue},axisAsText(ce,Y){return"time"==this.kind&&(ce=this.convertDate(ce)),this.format?this.format(ce,!1,Y):ce.toPrecision(4)},poduceLogTicks(ce,Y){const K=X=>{let Z=0,O=0;for(let p=1;p<X.length;++p){let w=X[p]-X[p-1];Z+=w,O+=w**2}let P=Z/(X.length-1),x=O/(X.length-1)-P**2;return x<=0||!(Math.abs(P)<1e-100)&&Math.sqrt(x)/P<1e-6};let ue=ce.ticks(Y);for(;Y>4&&K(ue);)Y=Math.round(.8*Y),ue=ce.ticks(Y);if(Y<5&&K(ue)&&this.logbase&&10!=this.logbase){let X=[];ue.forEach(Z=>{let O=Math.log10(Z)/Math.log10(this.logbase);Math.abs(Math.round(O)-O)<.01&&X.push(Z)}),X.length>0&&(ue=X)}return ue},produceTicks(ce,Y){if(!this.noticksopt){let X=ce*(Y||1);if(this.log)return this.poduceLogTicks(this.func,X);let Z=this.func.domain();const O=p=>p.length<=X||!(p.length>X+1)&&(p[0]===Z[0]||p[X]===Z[1]);let P=this.func.ticks(X);if(Y||O(P))return P;let x=this.func.ticks(Math.round(.7*X));return x.length>2&&O(x)?x:P}let K=this.func.domain(),ue=[];Y&&(ce=(ce-1)*Y);for(let X=0;X<=ce;++X)ue.push((K[0]*(ce-X)+K[1]*X)/ce);return ue},analyzeWheelEvent(ce,Y,K,ue){K||(K={});let X=0,Z=1,O=1;if("dleft"in K&&(Z=K.dleft,X=1),"dright"in K&&(O=K.dright,X=1),K.delta?X=K.delta:ce&&(X=ce.wheelDelta?-ce.wheelDelta:ce.deltaY||ce.detail),!X||ue&&K.ignore)return;X=X<0?-.2:.2,Z*=X,O*=X;let P=K.min=this.scale_min,x=K.max=this.scale_max,p=this.full_min,w=this.full_max;if(K.min===K.max&&X<0&&(K.min=p,K.max=w),!(K.min>=K.max)){if(K.reverse&&(Y=1-Y),Y>0&&Y<1){if(this.log){let m=K.min>0?Math.log10(K.max/K.min):2;m>10?m=10:m<.01&&(m=.01),K.min=K.min/Math.pow(10,m*Z*Y),K.max=K.max*Math.pow(10,m*O*(1-Y))}else if(Z!==-O||K.reverse){let m=K.max-K.min,_=m;Z>0&&(m=1.001*m/(1-Z)),K.min+=-Z*Y*m,O>0&&(_=1.001*_/(1-O)),K.max-=-O*(1-Y)*_}else{let m=(K.max-K.min)*O*Y;Math.round(K.max)===K.max&&Math.round(K.min)===K.min&&Math.abs(m)>1&&(m=Math.round(m)),K.min+m<p?m=p-K.min:K.max+m>w&&(m=w-K.max),0!=m?(K.min+=m,K.max+=m):(delete K.min,delete K.max)}K.min>=K.max?K.min=K.max=void 0:Z!==O?(K.min<p&&P===p||K.max>w&&x===w)&&(K.min=K.max=void 0):(K.min<p&&(K.min=p),K.max>w&&(K.max=w))}else K.min=K.max=void 0;return K.changed=void 0!==K.min&&void 0!==K.max,K}}};class Oe extends Be.tK{constructor(Y,K,ue){super(Y,K),Object.assign(this,He),this.initAxisPainter(),this.embedded=ue,this.invert_side=!1,this.lbls_both_sides=!1}cleanup(){this.cleanupAxisPainter(),super.cleanup()}getAxisType(){return M.clTAxis}configureAxis(Y,K,ue,X,Z,O,P,x){this.name=Y,this.full_min=K,this.full_max=ue,this.kind="normal",this.vertical=O,this.log=x.log||0,this.symlog=x.symlog||!1,this.reverse=x.reverse||!1,this.swap_side=x.swap_side||!1,this.fixed_ticks=x.fixed_ticks||null,this.maxTickSize=x.maxTickSize||0;let p=this.getObject();if(x.time_scale||p.fTimeDisplay?(this.kind="time",this.timeoffset=function Ze(ce){let Y=7889184e5;if(!ce)return Y;let K=ce.fTimeFormat.indexOf("%F");if(K<0)return 1e3*M.gStyle.fTimeOffset;let ue=ce.fTimeFormat.slice(K+2);if(0==ue.indexOf("1995-01-01 00:00:00s0"))return Y;if("0"==ue||""==ue)return 0;const X=(R,q,T)=>{let $=ue.indexOf(R);if($<0)return q;let J=parseInt(ue.slice(0,$));return ue=ue.slice($+1),!Number.isInteger(J)||J<q||J>T?q:J},Z=X("-",1970,2300),O=X("-",1,12)-1,P=X(" ",1,31),x=X(":",0,23),p=X(":",0,59),w=X("s",0,59),m=X(" ",0,999),_=new Date(Date.UTC(Z,O,P,x,p,w,m));let F=_.getTime();if(ue=ue.toUpperCase(),0==ue.indexOf("GMT")&&(F+=6e4*_.getTimezoneOffset(),ue=ue.slice(4).trim(),ue.length>3)){let R=0,q=1e3;"-"==ue[0]&&(R=1,q=-1e3),F-=q*(3600*parseInt(ue.slice(R,R+2))+60*parseInt(ue.slice(R+2,R+4)))}return F}(p)):this.kind=p.fLabels?"labels":"normal","time"==this.kind)this.func=(0,L.Xf)().domain([this.convertDate(X),this.convertDate(Z)]);else if(this.log){if(this.logbase=2===this.log?2:10,Z<=0&&(Z=1),X<=0&&p&&!x.logcheckmin)for(let F=0;F<p.fNbins&&!((X=Math.max(X,p.GetBinLowEdge(F+1)))>0);++F);X<=0&&x.log_min_nz&&(X=x.log_min_nz),(X<=0||X>=Z)&&(X=Z*(x.logminfactor||1e-4)),this.func=(0,L.p2)().base(2==this.log?2:10).domain([X,Z])}else if(this.symlog){let F=Math.max(Math.abs(X),Math.abs(Z));Number.isInteger(this.symlog)&&this.symlog>0?F*=Math.pow(10,-1*this.symlog):F*=.01,this.func=(0,L.eh)().constant(F).domain([X,Z])}else this.func=(0,L.BY)().domain([X,Z]);if(this.vertical^this.reverse){let F=P[0];P[0]=P[1],P[1]=F}this.func.range(P),this.scale_min=X,this.scale_max=Z,this.gr="time"==this.kind?F=>this.func(this.convertDate(F)):this.log?F=>F<this.scale_min?this.vertical?this.func.range()[0]+5:-5:this.func(F):this.func;let w=p?._typename===M.clTGaxis;delete this.format;let m=508;w?m=p.fNdiv:p&&(m=Math.max(p.fNdivisions,4)),this.nticks=m%100,this.nticks2=(m%1e4-this.nticks)/100,this.nticks3=Math.floor(m/1e4),p&&!w&&this.nticks>20&&(this.nticks=20);let _=Math.abs(this.func.range()[1]-this.func.range()[0]);if(_<=0&&(_=100),"time"==this.kind){this.nticks>8&&(this.nticks=8);let F=this.scale_max-this.scale_min,R=p.fTimeFormat.indexOf("%F"),q=R>=0?p.fTimeFormat.slice(0,R):p.fTimeFormat,T=Ie(F/_,!1);(!q||F<.1*(this.full_max-this.full_min))&&(q=Ie(F/this.nticks,!0)),this.tfunc1=this.tfunc2=(0,L.i$)(q),T!==q&&(this.tfunc2=(0,L.i$)(T)),this.format=this.formatTime}else if(this.log)this.nticks2>1&&(this.nticks*=this.nticks2,this.nticks2=1),this.noexp=!!p&&p.TestBit(Be.VO.kNoExponent),this.scale_max<300&&this.scale_min>.3&&(this.noexp=!0),this.moreloglabels=!!p&&p.TestBit(Be.VO.kMoreLogLabels),this.format=this.formatLog;else if("labels"==this.kind){this.nticks=50;let F=this.scale_max-this.scale_min;this.nticks>F&&(this.nticks=Math.round(F)),this.regular_labels=!0,p&&p.fNbins&&p.fLabels&&(p.fNbins!=Math.round(p.fXmax-p.fXmin)||0!=p.fXmin||p.fXmax!=p.fNbins)&&(this.regular_labels=!1),this.nticks2=1,this.format=this.formatLabels}else this.order=0,this.ndig=0,this.format=this.formatNormal}getScaleMin(){return this.func?this.func.domain()[0]:0}getScaleMax(){return this.func?this.func.domain()[1]:0}formatLabels(Y){let K=parseFloat(Y),ue=this.getObject();if(K=this.regular_labels?Math.floor(K):Math.round((K-ue.fXmin)/(ue.fXmax-ue.fXmin)*ue.fNbins),K<0||K>=ue.fNbins)return null;for(let X=0;X<ue.fLabels.arr.length;++X){let Z=ue.fLabels.arr[X];if(Z.fUniqueID===K+1)return Z.fString}return null}createTicks(Y,K,ue,X){ue&&this.nticks&&"normal"==this.kind&&(this.noticksopt=!0);let O,Z={nminor:0,nmiddle:0,nmajor:0,func:this.func};if(this.fixed_ticks)O=[],this.fixed_ticks.forEach(P=>{P>=this.scale_min&&P<=this.scale_max&&O.push(P)});else if("labels"!=this.kind||this.regular_labels)O=this.produceTicks(this.nticks);else{O=[],Z.lbl_pos=[];let P=this.getObject();for(let x=0;x<P.fNbins;++x){let p=P.fXmin+x/P.fNbins*(P.fXmax-P.fXmin);p>=this.scale_min&&p<this.scale_max&&(Z.lbl_pos.push(p),p>this.scale_min&&O.push(p))}}if(Z.minor=Z.middle=Z.major=O,Y){let P=Z.major,x=1e-5*(this.scale_max-this.scale_min);return P[0]>this.scale_min+x&&P.unshift(this.scale_min),P[P.length-1]<this.scale_max-x&&P.push(this.scale_max),P}if(this.nticks2>1&&(!this.log||10===this.logbase)&&!this.fixed_ticks){Z.minor=Z.middle=this.produceTicks(Z.major.length,this.nticks2);let P=Math.abs(this.func.range()[1]-this.func.range()[0]);Z.middle.length<=Z.major.length||Z.middle.length>P/3.5?Z.minor=Z.middle=Z.major:this.nticks3>1&&!this.log&&(Z.minor=this.produceTicks(Z.middle.length,this.nticks3),(Z.minor.length<=Z.middle.length||Z.minor.length>P/1.7)&&(Z.minor=Z.middle))}if(Z.reset=function(){this.nminor=this.nmiddle=this.nmajor=0},Z.next=function(P){return!(this.nminor>=this.minor.length||(this.tick=this.minor[this.nminor++],this.grpos=this.func(this.tick),P&&(this.grpos=Math.round(this.grpos)),this.kind=3,this.nmiddle<this.middle.length&&Math.abs(this.grpos-this.func(this.middle[this.nmiddle]))<1&&(this.nmiddle++,this.kind=2),this.nmajor<this.major.length&&Math.abs(this.grpos-this.func(this.major[this.nmajor]))<1&&(this.nmajor++,this.kind=1),0))},Z.last_major=function(){return 1===this.kind&&this.nmajor==this.major.length},Z.next_major_grpos=function(){return this.nmajor>=this.major.length?null:this.func(this.major[this.nmajor])},this.order=0,this.ndig=0,"normal"==this.kind&&!this.log&&Z.major.length>0){let P=0,x=0,p=!1;if(!K){let F=Math.max(Math.abs(Z.major[0]),Math.abs(Z.major[Z.major.length-1])),R=Math.min(Math.abs(Z.major[0]),Math.abs(Z.major[Z.major.length-1])),q=F>0?3*Math.round(Math.log10(F)/3):0,T=R>0?3*Math.round(Math.log10(R)/3):0;p=F<2e4,(F||R)&&(P=Math.max(q,T)+3,x=Math.min(q,T)-3)}let w=0,m=this.ndig,_=1e10;for(let F=x;F<=P;F+=3){if(p&&3===F)continue;this.order=F,this.ndig=0;let R=[],q=0,T=0;for(;q<Z.major.length;){let $=this.format(Z.major[q],!0);if(R.indexOf($)<0)R.push($),T+=$.length,q++;else{if(++this.ndig>15)break;R=[],q=0,T=0}}!F&&this.ndig<4&&(T-=2*Z.major.length+3),T<_&&(_=T,w=this.order,m=this.ndig)}this.order=w,this.ndig=m,X&&(this.order&&console.warn(`Axis painter - integer labels are configured, but axis order ${this.order} is preferable`),this.ndig&&console.warn(`Axis painter - integer labels are configured, but ${this.ndig} decimal digits are required`),this.ndig=0,this.order=0)}return Z}isCenteredLabels(){if("labels"===this.kind)return!0;if(this.log)return!1;let Y=this.getObject();return Y&&Y.TestBit(Be.VO.kCenterLabels)}addTitleDrag(Y,K,ue,X,Z){if(!M.settings.MoveResize||(0,M.isBatchMode)())return;let P,x,p,w,m,_,F,O=null,R=(0,L.oh)().subject(Object);R.on("start",q=>{q.sourceEvent.preventDefault(),q.sourceEvent.stopPropagation();let T=Y.node().getBBox(),$=K?T.height:T.width;p=P=Y.property("shift_x"),w=x=Y.property("shift_y"),m=K?P>0:x>0,_=K?[Z,Z/2,0]:[0,Z/2,Z];let J=K?-$/2:$/2;"middle"==this.title_align?(_[0]+=J,_[2]-=J):"begin"==this.title_align?(_[1]-=J,_[2]-=2*J):(_[0]+=2*J,_[1]+=J),F=this.titleCenter?1:X^this.titleOpposite?0:2,_[F]=K?x:P,O=Y.append("rect").classed("zoom",!0).attr("x",T.x).attr("y",T.y).attr("width",T.width).attr("height",T.height).style("cursor","move")}).on("drag",q=>{if(!O)return;q.sourceEvent.preventDefault(),q.sourceEvent.stopPropagation(),P+=q.dx,x+=q.dy;let T,$,J=0,ie=K?x:P;for(let Me=1;Me<3;++Me)Math.abs(ie-_[Me])<Math.abs(ie-_[J])&&(J=Me);K?(T=P,$=_[J]):($=x,T=_[J]),m===(K?T>0:$>0)&&(p=T,w=$,F=J,Y.attr("transform",`translate(${p},${w})`))}).on("end",q=>{if(!O)return;q.sourceEvent.preventDefault(),q.sourceEvent.stopPropagation(),Y.property("shift_x",p).property("shift_y",w);const T=this.getObject(),$=Be.VO,J=(ie,Me)=>{T.TestBit(ie)!=Me&&T.InvertBit(ie)};this.titleOffset=(K?p:w)/ue,T.fTitleOffset=this.titleOffset/this.titleSize,1==F?(J($.kCenterTitle,!0),this.titleCenter=!0,J($.kOppositeTitle,!1),this.titleOpposite=!1):0==F?(J($.kCenterTitle,!1),this.titleCenter=!1,J($.kOppositeTitle,!0),this.titleOpposite=!0):(J($.kCenterTitle,!1),this.titleCenter=!1,J($.kOppositeTitle,!1),this.titleOpposite=!1),this.submitAxisExec(`SetTitleOffset(${T.fTitleOffset});;SetBit(${$.kCenterTitle},${this.titleCenter?1:0})`),O.remove(),O=null}),Y.style("cursor","move").call(R)}setHistPainter(Y,K){this.hist_painter=Y,this.hist_axis=K}submitAxisExec(Y){let K=this.hist_painter?.snapid;K&&this.hist_axis&&this.submitCanvExec(Y,K+"#"+this.hist_axis)}produceTicksPath(Y,K,ue,X,Z,O){let P="",x="";for(this.ticks=[];Y.next(!0);){let p=Math.round(ue/4),w=0;Y.kind<3&&(p=Math.round(ue/2)),1==Y.kind&&(null!==this.format(Y.tick,!0)&&(p=ue),this.ticks.push(Y.grpos)),X>0?w=-p:K<0&&(w=-p,p=0),P+=this.vertical?`M${p},${Y.grpos}H${w}`:`M${Y.grpos},${-p}V${-w}`,Z&&(x+=this.vertical?`M${Z-p},${Y.grpos}H${Z-w}`:`M${Y.grpos},${Z+p}V${Z+w}`)}return O?P+x:""}findLabelModifier(Y,K,ue){if(!Y.fModLabs)return null;for(let X=0;X<Y.fModLabs.arr.length;++X){let Z=Y.fModLabs.arr[X];if(Z.fLabNum===K+1||Z.fLabNum<0&&K===ue+Z.fLabNum)return Z}return null}drawLabels(Y,K,ue,X,Z,O,P,x,p,w,m){var _=this;return(0,ze.Z)(function*(){let F=_.isCenteredLabels(),R=K.TestBit(Be.VO.kLabelsVert),q=1,T=0,$=0,J=[Y.append("svg:g").attr("class","axis_labels")],ie=Z.lbl_pos||Z.major,Me=!1,de=0;function fe(I){let U=this.result_width;if(de=Math.max(de,U),U&&(!I.vertical&&!R||I.vertical&&R)&&!I.log){let le=.45*this.gap_before+.45*this.gap_after;this.gap_before?this.gap_after||(le=.9*this.gap_before):le=.9*this.gap_after,q=Math.min(q,le/U)}else I.vertical&&m&&this.normal_side&&m-x>20&&U>m-x&&(q=Math.min(q,(m-x)/U));q>1e-4&&q<.7&&!I.vertical&&!R&&T>5&&1==J.length&&(Me=!0);let z=q*(Me?3:1);z>1e-4&&z<1&&($=1/z,I.scaleTextDrawing($,J[0]))}_.lbls_both_sides&&J.push(Y.append("svg:g").attr("class","axis_labels").attr("transform",_.vertical?`translate(${ue})`:`translate(0,${-X})`));for(let I=0;I<J.length;++I){I>0&&(O=-O);let U=0,z=_.vertical?-x*O:(x+2)*O+w*p;_.startTextDrawing(P,"font",J[I]);for(let le=0;le<ie.length;++le){let D=_.format(ie[le],!0);if(null===D)continue;let oe=_.findLabelModifier(K,le,ie.length);if(0===oe?.fTextSize)continue;oe?.fLabText&&(D=oe.fLabText);let _e={text:D,color:P.color,latex:1,draw_g:J[I],normal_side:0==I},Ee=Math.round(_.func(ie[le]));if(oe&&oe.fTextColor>0&&(_e.color=_.getColor(oe.fTextColor)),_e.gap_before=le>0?Math.abs(Math.round(Ee-_.func(ie[le-1]))):0,_e.gap_after=le<ie.length-1?Math.abs(Math.round(_.func(ie[le+1])-Ee)):0,F){let Ve=_e.gap_after||_e.gap_before;if(Ee=Math.round(Ee-(_.vertical!=_.reverse?.5*Ve:-.5*Ve)),Ee<-5||Ee>(_.vertical?X:ue)+5)continue}if(T=Math.max(T,D.length),_.vertical?(_e.x=z,_e.y=Ee,_e.align=R?O<0?23:20:O<0?12:32):(_e.x=Ee,_e.y=z,_e.align=R?O<0?12:32:O<0?20:23),R&&(_e.rotate=270),0==I&&(_e.post_process=fe),_.drawText(_e),U&&Ee!=U&&(_.vertical&&!R||!_.vertical&&R)){let Ve=Math.abs(Ee-U);q=Math.min(q,.9*Ve/P.size)}U=Ee}_.order&&_.drawText({color:P.color,x:_.vertical?5*O:ue+5,y:_.has_obstacle?z:_.vertical?-3:-3*O,align:_.vertical?O<0?30:10:_.has_obstacle^O<0?13:10,latex:1,text:"#times"+_.formatExp(10,_.order),draw_g:J[I]})}return _.finishTextDrawing(J[0],!0).then(()=>{if(J.length>1)return $&&_.scaleTextDrawing($,J[1]),_.finishTextDrawing(J[1],!0)}).then(()=>(Me&&J[0].selectAll("text").each(function(){let I=(0,L.Ys)(this),U=I.attr("transform");I.attr("transform",U+" rotate(25)").style("text-anchor","start")}),de))})()}extractDrawAttributes(Y,K,ue){let _,X=this.getObject(),Z=X?._typename===M.clTGaxis,P=this.getPadPainter()?.getFrameRect(),x=Math.round((P?.width||8)/.8),p=Math.round((P?.height||8)/.8),w=0,m=0;if(this.scalingSize=Y||Math.max(Math.min(x,p),10),Z){let F=X.fChopt.indexOf("S")>=0;this.optionUnlab=X.fChopt.indexOf("U")>=0,this.optionMinus=X.fChopt.indexOf("-")>=0||X.TestBit(Be.VO.kTickMinus),this.optionPlus=X.fChopt.indexOf("+")>=0||X.TestBit(Be.VO.kTickPlus),this.optionNoopt=X.fChopt.indexOf("N")>=0,this.optionInt=X.fChopt.indexOf("I")>=0,this.createAttLine({attr:X}),m=Y||(this.vertical?1.7*ue:.6*K),w=F?X.fTickSize:.03,_=this.getColor(X.fTextColor)}else this.optionUnlab=!1,this.optionMinus=this.vertical^this.invert_side,this.optionPlus=!this.optionMinus,this.optionNoopt=!1,this.optionInt=!1,this.createAttLine({color:X.fAxisColor,width:1,style:1}),m=Y||(this.vertical?x:p),w=X.fTickLength,_=this.getColor(X.fTitleColor);this.optionNoexp=X.TestBit(Be.VO.kNoExponent),this.ticksSize=Math.round(w*m),Y&&this.ticksSize<0&&(this.ticksSize=-this.ticksSize),this.maxTickSize&&this.ticksSize>this.maxTickSize&&(this.ticksSize=this.maxTickSize),this.ticksColor=this.lineatt.color,this.ticksWidth=this.lineatt.width,this.labelSize=Math.round(X.fLabelSize<1?X.fLabelSize*this.scalingSize:X.fLabelSize),this.labelsOffset=Math.round(Math.abs(X.fLabelOffset)*this.scalingSize),this.labelsFont=new je.G(X.fLabelFont,this.labelSize,Y),(this.labelSize<=0||Math.abs(X.fLabelOffset)>1.1)&&(this.optionUnlab=!0),this.labelsFont.setColor(this.getColor(X.fLabelColor)),this.fTitle=X.fTitle,this.fTitle?(this.titleSize=X.fTitleSize>=1?X.fTitleSize:Math.round(X.fTitleSize*this.scalingSize),this.titleFont=new je.G(X.fTitleFont,this.titleSize,Y),this.titleFont.setColor(_),this.titleOffset=X.fTitleOffset*this.titleSize,this.titleCenter=X.TestBit(Be.VO.kCenterTitle),this.titleOpposite=X.TestBit(Be.VO.kOppositeTitle)):(delete this.titleSize,delete this.titleFont,delete this.titleOffset,delete this.titleCenter,delete this.titleOpposite)}drawAxis(Y,K,ue,X,Z,O,P,x){var p=this;return(0,ze.Z)(function*(){let w=p.getObject(),m=w?._typename===M.clTGaxis,_=Y,F=!0,R=p.getPadPainter(),q=R?.getPadWidth()||10,T=R?.getPadHeight()||10,$=p.swap_side||!1;Z?p.invert_side&&(Z=-Z):Z=0,p.extractDrawAttributes(void 0,K,ue),m&&(F=0!=w.fLineColor),p.lineatt.not_standard=!0,(!m||"zaxis"===p.name)&&(_=Y.select("."+p.name+"_container"),_.empty()?_=Y.append("svg:g").attr("class",p.name+"_container"):_.selectAll("*").remove());let J="";F&&(J="M0,0"+(p.vertical?`v${ue}`:`h${K}`),Z&&(J+=p.vertical?`M${Z},0v${ue}`:`M0,${Z}h${K}`)),_.attr("transform",X||null);let ie=1,Me=0;p.optionPlus&&p.optionMinus?(ie=1,Me=1):p.optionMinus?ie=$^p.vertical?1:-1:p.optionPlus&&(ie=$^p.vertical?-1:1);const de=p.createTicks(!1,p.optionNoexp,p.optionNoopt,p.optionInt);J+=p.produceTicksPath(de,ie,p.ticksSize,Me,Z,F&&!O&&!p.disable_ticks),!O&&J&&!p.lineatt.empty()&&_.append("svg:path").attr("d",J).call(p.lineatt.func);let fe=0,I=0,U=null,z=null,le=0;return(O||p.optionUnlab?Promise.resolve(0):p.drawLabels(_,w,K,ue,de,ie,p.labelsFont,p.labelsOffset,p.ticksSize,Me,P)).then(oe=>{if(le=oe,M.settings.Zooming&&!p.disable_zooming&&!(0,M.isBatchMode)()){let et=Math.max(p.labelsFont.size,5),Tt=_.append("svg:rect").attr("class","axis_zoom").style("opacity","0").style("cursor","crosshair");if(p.vertical){let Bt=(le||2*et)+3;Tt.attr("x",ie>0?-Bt:0).attr("y",0).attr("width",Bt).attr("height",ue)}else Tt.attr("x",0).attr("y",ie>0?0:-et-3).attr("width",K).attr("height",et+3)}if(p.position=0,x){let et=_.node(),Tt=p.getPadSvg().node();if(et&&Tt&&et.getBoundingClientRect&&Tt.getBoundingClientRect){let Bt=et.getBoundingClientRect(),ve=Tt.getBoundingClientRect();p.position=Bt.left-ve.left}et&&!Tt&&console.warn("Why PAD element missing when search for position")}if(!p.fTitle||O)return!0;U=_.append("svg:g").attr("class","axis_title");let _e=1.6/p.scalingSize,Ee=w.TestBit(Be.VO.kRotateTitle)?-1:1;p.startTextDrawing(p.titleFont,"font",U);let Ve=$^p.titleOpposite;if(p.title_align=p.titleCenter?"middle":Ee<0^Ve?"begin":"end",p.vertical){if(_e*=-ie*q,fe=Math.round(_e*p.titleOffset),"zaxis"==p.name&&m&&"getBoundingClientRect"in _.node()){let et=_.node().getBoundingClientRect();fe<et.width-p.ticksSize&&(fe=Math.round(et.width-p.ticksSize))}I=Math.round(p.titleCenter?ue/2:Ve?ue:0),p.drawText({align:p.title_align+";middle",rotate:Ee<0?90:270,text:p.fTitle,color:p.titleFont.color,draw_g:U})}else _e*=ie*T,fe=Math.round(p.titleCenter?K/2:Ve?0:K),I=Math.round(_e*p.titleOffset),p.drawText({align:p.title_align+";middle",rotate:Ee<0?180:0,text:p.fTitle,color:p.titleFont.color,draw_g:U});return p.vertical&&!p.titleOffset&&"getBoundingClientRect"in _.node()&&(z=_.node().getBoundingClientRect()),p.addTitleDrag(U,p.vertical,_e,$,p.vertical?ue:K),p.finishTextDrawing(U)}).then(()=>{if(U){if(z){let oe=U.node().getBoundingClientRect();fe=z.left!=z.right&&oe.left!=oe.right?ie>0?Math.round(z.left-oe.right-.3*p.titleFont.size):Math.round(z.right-oe.left+.3*p.titleFont.size):-1*Math.round((ie>0?p.labelsOffset+le:0)+.7*p.titleFont.size)}U.attr("transform",`translate(${fe},${I})`).property("shift_x",fe).property("shift_y",I)}return p})})()}convertTo(Y){let K=this.getObject(),ue=this.axisToSvg("x",K.fX1),X=this.axisToSvg("y",K.fY1),Z=this.axisToSvg("x",K.fX2),O=this.axisToSvg("y",K.fY2);if("ndc"==Y){let P=this.getPadPainter().getPadWidth(),x=this.getPadPainter().getPadHeight();K.fX1=ue/P,K.fX2=Z/P,K.fY1=(x-X)/x,K.fY2=(x-O)/x,this.use_ndc=!0}else if("frame"==Y){let P=this.getFramePainter().getFrameRect();K.fX1=(ue-P.x)/P.width,K.fX2=(Z-P.x)/P.width,K.fY1=(X-P.y)/P.height,K.fY2=(O-P.y)/P.height,this.bind_frame=!0}}redraw(){let K,ue,X,Z,Y=this.getObject();if(this.bind_frame){let F=this.getFramePainter().getFrameRect();K=Math.round(F.x+Y.fX1*F.width),X=Math.round(F.x+Y.fX2*F.width),ue=Math.round(F.y+Y.fY1*F.height),Z=Math.round(F.y+Y.fY2*F.height)}else K=this.axisToSvg("x",Y.fX1,this.use_ndc),ue=this.axisToSvg("y",Y.fY1,this.use_ndc),X=this.axisToSvg("x",Y.fX2,this.use_ndc),Z=this.axisToSvg("y",Y.fY2,this.use_ndc);let O=X-K,P=ue-Z,x=Math.abs(O)<Math.abs(P),p=x?P:O,w=!1,m=Y.fWmin,_=Y.fWmax;return p<0&&(w=!0,p=-p,x?Z=ue:K=X),this.configureAxis(x?"yaxis":"xaxis",m,_,m,_,x,[0,p],{time_scale:Y.fChopt.indexOf("t")>=0,log:Y.fChopt.indexOf("G")>=0?1:0,reverse:w,swap_side:w}),this.createG(),this.drawAxis(this.getG(),Math.abs(O),Math.abs(P),`translate(${K},${Z})`)}}},49:($r,At,Ce)=>{"use strict";Ce.r(At),Ce.d(At,{TCanvasPainter:()=>Y,TPadPainter:()=>He.TPadPainter,drawTFrame:()=>P,drawTGaxis:()=>O,drawTPadSnapshot:()=>X,ensureTCanvas:()=>K});var ze=Ce(5835),M=Ce(9542),L=Ce(2253),ye=Ce(9622),Be=Ce(2487),je=Ce(6458),Ze=Ce(6030),Ie=Ce(6116),He=Ce(3834);function Oe(x,p,w){let m=new Ie.nF(x,p);return m.addToPadPrimitives(),"3d"==w&&(m.mode3d=!0),m.redraw()}const ce={kShowEventStatus:(0,M.BIT)(15),kAutoExec:(0,M.BIT)(16),kMenuBar:(0,M.BIT)(17),kShowToolBar:(0,M.BIT)(18),kShowEditor:(0,M.BIT)(19),kMoveOpaque:(0,M.BIT)(20),kResizeOpaque:(0,M.BIT)(21),kIsGrayscale:(0,M.BIT)(22),kShowToolTips:(0,M.BIT)(23)};class Y extends He.TPadPainter{constructor(p,w){super(p,w,!0),this._websocket=null,this.tooltip_allowed=M.settings.Tooltip}cleanup(){this._changed_layout&&this.setLayoutKind("simple"),delete this._changed_layout,super.cleanup()}getLayoutKind(){let p=this.selectDom("origin");return(p.empty()?"":p.property("layout"))||"simple"}setLayoutKind(p,w){let m=this.selectDom("origin");m.empty()||(p||(p="simple"),m.property("layout",p),m.property("layout_selector","simple"!=p&&w?w:null),this._changed_layout="simple"!==p)}changeLayout(p,w){var m=this;return(0,ze.Z)(function*(){if(m.getLayoutKind()==p)return!0;let F=m.selectDom("origin"),R=F.select(".side_panel"),q=m.selectDom(),T=[];for(;q.node().firstChild;)T.push(q.node().removeChild(q.node().firstChild));if(R.empty()||(0,je.Eq)(R.node()),m.setLayoutKind("simple"),F.html(""),"simple"==p){q=F;for(let $=0;$<T.length;++$)q.node().appendChild(T[$]);m.setLayoutKind(p)}else{let $=new Be.VU(F.node(),p);null==w&&(w=0==p.indexOf("vert")?0:1),q=(0,L.Ys)($.getGridFrame(w)),R=(0,L.Ys)($.getGridFrame(1-w)),q.classed("central_panel",!0).style("position","relative"),R.classed("side_panel",!0).style("position","relative");for(let J=0;J<T.length;++J)q.node().appendChild(T[J]);m.setLayoutKind(p,".central_panel"),F.property("mdi",null)}return(0,je.SI)(q.node()),!0})()}toggleProjection(p){var w=this;return(0,ze.Z)(function*(){if(delete w.proj_painter,p&&(w.proj_painter=1),(0,M.isFunc)(w.showUI5ProjectionArea))return w.showUI5ProjectionArea(p);let _,m="simple";switch(p){case"X":case"bottom":m="vert2_31",_=0;break;case"Y":case"left":m="horiz2_13",_=1;break;case"top":m="vert2_13",_=1;break;case"right":m="horiz2_31",_=0}return w.changeLayout(m,_)})()}drawProjection(p,w,m){var _=this;return(0,ze.Z)(function*(){if(!_.proj_painter)return!1;if(void 0===m&&(m="hist"),1===_.proj_painter){let T,F=(0,M.create)(M.clTCanvas),R=_.pad,q=_.getFramePainter();return"X"==p?(F.fLeftMargin=R.fLeftMargin,F.fRightMargin=R.fRightMargin,F.fLogx=q.logx,F.fUxmin=q.logx?Math.log10(q.scale_xmin):q.scale_xmin,F.fUxmax=q.logx?Math.log10(q.scale_xmax):q.scale_xmax,T="fixframe"):"Y"==p&&(F.fBottomMargin=R.fBottomMargin,F.fTopMargin=R.fTopMargin,F.fLogx=q.logy,F.fUxmin=q.logy?Math.log10(q.scale_ymin):q.scale_ymin,F.fUxmax=q.logy?Math.log10(q.scale_ymax):q.scale_ymax,T="rotate"),F.fPrimitives.Add(w,m),(_.drawInUI5ProjectionArea?_.drawInUI5ProjectionArea(F,T):_.drawInSidePanel(F,T)).then(J=>(_.proj_painter=J,J))}return _.proj_painter.getMainPainter()?.updateObject(w,m),_.proj_painter.redrawPad()})()}testUI5(){return!!this.use_openui&&(console.warn("full ui5 should be used - not loaded yet? Please check!!"),!0)}drawInSidePanel(p,w){var m=this;return(0,ze.Z)(function*(){let _=m.selectDom("origin").select(".side_panel");return _.empty()?null:m.drawObject(_.node(),p,w)})()}showMessage(p){this.testUI5()||(0,ye.Ae)(p,7e3)}saveCanvasAsFile(p){let w=p.indexOf(".");this.createImage(p.slice(w+1)).then(m=>this.sendWebsocket("SAVE:"+p+":"+m))}sendSaveCommand(p){this.sendWebsocket("PRODUCE:"+p)}submitMenuRequest(p,w,m){var _=this;return(0,ze.Z)(function*(){return new Promise(F=>{_._getmenu_callback=F,_.sendWebsocket("GETMENU:"+m)})})()}submitExec(p,w,m){if(!this._readonly&&p&&(m||(m=p.snapid),m&&(0,M.isStr)(m)))return this.sendWebsocket(`OBJEXEC:${m}:${w}`)}sendWebsocket(p){return this._websocket?.canSend()?(this._websocket.send(p),!0):(console.warn(`DROP SEND: ${p}`),!1)}closeWebsocket(p){this._websocket&&(this._websocket.close(p),this._websocket.cleanup(),delete this._websocket)}useWebsocket(p){this.closeWebsocket(),this._websocket=p,this._websocket.setReceiver(this),this._websocket.connect()}onWebsocketOpened(){}onWebsocketClosed(){this.embed_canvas||(0,ye.Hw)()}onWebsocketMsg(p,w){if(console.log(`GET MSG len:${w.length} ${w.slice(0,60)}`),"CLOSE"==w)this.onWebsocketClosed(),this.closeWebsocket(!0);else if("SNAP6:"==w.slice(0,6)){let m=w.indexOf(":",6),_=w.slice(6,m),F=(0,M.parse)(w.slice(m+1));this.syncDraw(!0).then(()=>this.redrawPadSnap(F)).then(()=>{this.completeCanvasSnapDrawing();let R=this.getWebPadOptions();R&&(R=":"+R),p.send("READY6:"+_+R),this.confirmDraw()})}else if("MENU:"==w.slice(0,5)){let m=(0,M.parse)(w.slice(5));(0,M.isFunc)(this._getmenu_callback)&&(this._getmenu_callback(m),delete this._getmenu_callback)}else if("CMD:"==w.slice(0,4)){let m=(w=w.slice(4)).indexOf(":"),_=w.slice(0,m),F=w.slice(m+1),R="REPLY:"+_+":";"SVG"==F||"PNG"==F||"JPEG"==F?this.createImage(F.toLowerCase()).then(q=>p.send(R+q)):(console.log(`Unrecognized command ${F}`),p.send(R))}else if("DXPROJ:"==w.slice(0,7)||"DYPROJ:"==w.slice(0,7)){let m=w[1],_=(0,M.parse)(w.slice(7));this.drawProjection(m,_)}else if("SHOW:"==w.slice(0,5)){let m=w.slice(5),_="1"==m[m.length-1];this.showSection(m.slice(0,m.length-2),_)}else if("EDIT:"==w.slice(0,5)){let m=this.findSnap(w.slice(5));console.log(`GET EDIT ${w.slice(5)} found ${!!m}`),m&&this.showSection("Editor",!0).then(()=>this.producePadEvent("select",m.getPadPainter(),m))}else console.log(`unrecognized msg ${w}`)}clickPadButton(p,w){return"ToggleGed"==p?this.activateGed(this,null,"toggle"):"ToggleStatus"==p?this.activateStatusBar("toggle"):void super.clickPadButton(p,w)}hasEventStatus(){return!this.testUI5()&&(this.brlayout?this.brlayout.hasStatus():(0,Be.nh)()?.hasStatusLine()??!1)}activateStatusBar(p){this.testUI5()||(this.brlayout?this.brlayout.createStatusLine(23,p):(0,Be.nh)()?.createStatusLine(23,p),this.processChanges("sbits",this))}showCanvasStatus(...p){this.testUI5()||(this.brlayout||(0,Be.nh)()?.brlayout)?.showStatus(...p)}hasGed(){return!this.testUI5()&&(this.brlayout?.hasContent()??!1)}removeGed(){this.testUI5()||(this.registerForPadEvents(null),this.ged_view&&(this.ged_view.getController().cleanupGed(),this.ged_view.destroy(),delete this.ged_view),this.brlayout?.deleteContent(!0),this.processChanges("sbits",this))}getUi5PanelData(){return{jsroot:{settings:M.settings,create:M.create,parse:M.parse,toJSON:M.toJSON,loadScript:M.loadScript,EAxisBits:je.VO,getColorExec:ye.Aq}}}activateGed(p,w,m){var _=this;return(0,ze.Z)(function*(){if(_.testUI5()||!_.brlayout)return!1;if(_.brlayout.hasContent())return"toggle"===m||!1===m?_.removeGed():p?.getPadPainter()?.selectObjectPainter(p),!0;if(!1===m)return!1;let F=_.brlayout.createBrowserBtns();return ye.KL.createSVG(F,ye.KL.diamand,15,"toggle fix-pos mode").style("margin","3px").on("click",()=>_.brlayout.toggleKind("fix")),ye.KL.createSVG(F,ye.KL.circle,15,"toggle float mode").style("margin","3px").on("click",()=>_.brlayout.toggleKind("float")),ye.KL.createSVG(F,ye.KL.cross,15,"delete GED").style("margin","3px").on("click",()=>_.removeGed()),_.brlayout.setBrowserContent("<div class='jsroot_browser_hierarchy' id='ged_placeholder'>Loading GED ...</div>"),_.brlayout.setBrowserTitle("GED"),_.brlayout.toggleBrowserKind(w||"float"),new Promise(R=>{(0,ye.OA)().then(q=>{(0,L.Ys)("#ged_placeholder").text(""),q.ui.define(["sap/ui/model/json/JSONModel","sap/ui/core/mvc/XMLView"],(T,$)=>{let J=new T({handle:null});$.create({viewName:"rootui5.canv.view.Ged",viewData:_.getUi5PanelData("Ged")}).then(ie=>{ie.setModel(J),ie.placeAt("ged_placeholder"),_.ged_view=ie,_.registerForPadEvents(ie.getController().padEventsReceiver.bind(ie.getController())),p?.getPadPainter()?.selectObjectPainter(p),console.log("activate GED"),_.processChanges("sbits",_),R(!0)})})})})})()}showSection(p,w){var m=this;return(0,ze.Z)(function*(){if(m.testUI5())return!1;switch(p){case"Menu":case"ToolBar":break;case"StatusBar":m.activateStatusBar(w);break;case"Editor":return m.activateGed(m,null,!!w);case"ToolTips":m.setTooltipAllowed(w)}return!0})()}completeCanvasSnapDrawing(){this.pad&&(document&&!this.embed_canvas&&this._websocket&&(document.title=this.pad.fTitle),!this._all_sections_showed&&(this._all_sections_showed=!0,this.showSection("Menu",this.pad.TestBit(ce.kMenuBar)),this.showSection("StatusBar",this.pad.TestBit(ce.kShowEventStatus)),this.showSection("ToolBar",this.pad.TestBit(ce.kShowToolBar)),this.showSection("Editor",this.pad.TestBit(ce.kShowEditor)),this.showSection("ToolTips",this.pad.TestBit(ce.kShowToolTips)||this._highlight_connect)))}processHighlightConnect(p){if(!p||0==p.length||!this._highlight_connect||!this._websocket||this.doingDraw()||!this._websocket.canSend(2))return;let w=p[0]||p[1];if(!(w&&w.painter&&w.painter.snapid&&w.user_info))return;let m=w.painter.getPadPainter()||this;if(!m.snapid)return;let _=[m.snapid,w.painter.snapid,"0","0"];void 0!==w.user_info.binx&&void 0!==w.user_info.biny?(_[2]=w.user_info.binx.toString(),_[3]=w.user_info.biny.toString()):void 0!==w.user_info.bin&&(_[2]=w.user_info.bin.toString());let F=JSON.stringify(_);this._last_highlight_msg!=F&&(this._last_highlight_msg=F,this.sendWebsocket(`HIGHLIGHT:${F}`))}processChanges(p,w,m){if(!this._websocket||this._readonly||!this._websocket.canSend(2)||!(0,M.isStr)(p))return;let _="";switch(w||(w=this),p){case"sbits":_="STATUSBITS:"+this.getStatusBits();break;case"frame":case"zoom":(0,M.isFunc)(w.getWebPadOptions)||(w=w.getPadPainter()),(0,M.isFunc)(w.getWebPadOptions)&&(_="OPTIONS6:"+w.getWebPadOptions("only_this"));break;case"drawopt":w.snapid&&(_="DRAWOPT:"+JSON.stringify([w.snapid.toString(),w.getDrawOpt()||""]));break;case"pave_moved":if((0,M.isFunc)(w.fillWebObjectOptions)){let F=w.fillWebObjectOptions();F&&(_="PRIMIT6:"+(0,M.toJSON)(F))}break;case"logx":case"logy":case"logz":{let F=w.getPadPainter();F?.snapid&&F?.pad&&(w=F,p=`exec:${"SetLog"+p[3]}(${F.pad["fLog"+p[3]]})`);break}}!_&&w?.snapid&&"exec:"==p.slice(0,5)&&(_="PRIMIT6:"+(0,M.toJSON)({_typename:"TWebObjectOptions",snapid:w.snapid.toString()+(m?"#"+m:""),opt:p.slice(5),fcust:"exec",fopt:[]})),_?(console.log(`Sending ${_.length} ${_.slice(0,40)}`),this._websocket.send(_)):console.log(`Unprocessed changes ${p} for painter of ${w?.getObject()?._typename} subelem ${m}`)}selectActivePad(p,w,m){if(!this.snapid||!p)return;let _=null,F=!1,R=p.matchObjectType(He.clTButton);p.snapid&&this._websocket&&(_={_typename:"TWebPadClick",padid:p.snapid.toString(),objid:"",x:-1,y:-1,dbl:!1}),!p.is_active_pad&&!R&&(F=!0,this.forEachPainterInPad(q=>q.drawActiveBorder(null,q===p),"pads")),void 0!==w?.snapid&&_&&(F=!0,_.objid=w.snapid.toString()),m&&_&&(F=!0,_.x=Math.round(m.x||0),_.y=Math.round(m.y||0),m.dbl&&(_.dbl=!0)),_&&(F||R)&&this.sendWebsocket("PADCLICKED:"+(0,M.toJSON)(_))}getStatusBits(){let p=0;return this.hasEventStatus()&&(p|=ce.kShowEventStatus),this.hasGed()&&(p|=ce.kShowEditor),this.isTooltipAllowed()&&(p|=ce.kShowToolTips),this.use_openui&&(p|=ce.kMenuBar),p}produceJSON(){let p=this.getObject(),w=0==p.fFillStyle;w&&(p.fFillStyle=1001),this.normal_canvas||this.forEachPainterInPad(_=>{if(_.$secondary)return;let F=_.getObject();F?._typename&&p.fPrimitives.Add(F,_.getDrawOpt())},"objects");let m=(0,M.toJSON)(p);return w&&(p.fFillStyle=0),this.normal_canvas||p.fPrimitives.Clear(),m}static draw(p,w,m){return(0,ze.Z)(function*(){let _=!w;_&&(w=(0,M.create)(M.clTCanvas));let F=new Y(p,w);if(F.checkSpecialsInPrimitives(w),!_&&w.fCw&&w.fCh&&!(0,M.isBatchMode)()){let R=F.selectDom().node().getBoundingClientRect();!R.height&&R.width>.1*w.fCw&&(F.selectDom().style("width",w.fCw+"px").style("height",w.fCh+"px"),F._fixed_size=!0)}return F.decodeOptions(m),F.normal_canvas=!_,F.createCanvasSvg(0),F.addPadButtons(),_&&m.indexOf("noframe")<0&&Oe(p,null),(0,je.O5)({pp:F,active:!0}),F.drawPrimitives().then(()=>(F.showPadButtons(),F))})()}}function K(x,p){return ue.apply(this,arguments)}function ue(){return(ue=(0,ze.Z)(function*(x,p){if(!x)return Promise.reject(Error("Painter not provided in ensureTCanvas"));let w=!1===p||"3d"==p?"noframe":"";return(x.getCanvSvg().empty()?Y.draw(x.getDom(),null,w):Promise.resolve(!0)).then(()=>(!1!==p&&x.getFrameSvg().select(".main_layer").empty()&&!x.getFramePainter()&&Oe(x.getDom(),null,p),x.addToPadPrimitives(),x))})).apply(this,arguments)}function X(x,p){return Z.apply(this,arguments)}function Z(){return(Z=(0,ze.Z)(function*(x,p){let w=(0,M.create)(M.clTCanvas),m=new Y(x,w);return m.normal_canvas=!1,m.addPadButtons(),m.syncDraw(!0).then(()=>m.redrawPadSnap(p)).then(()=>(m.confirmDraw(),m.showPadButtons(),m))})).apply(this,arguments)}function O(x,p,w){let m=new Ze.z4(x,p,!1);return m.disable_zooming=!0,K(m,!1).then(()=>(w&&m.convertTo(w),m.redraw())).then(()=>m)}function P(x,p,w){let m=new Ie.nF(x,p);return K(m,!1).then(()=>("3d"==w&&(m.mode3d=!0),m.redraw()))}},6116:($r,At,Ce)=>{"use strict";Ce.d(At,{J9:()=>x,a4:()=>O,nF:()=>p,uI:()=>Z});var ze=Ce(5835),M=Ce(9542),L=Ce(2253),ye=Ce(6458),Be=Ce(6367),je=Ce(6030),Ze=Ce(3675),Ie=Ce(4953),He=Ce(4383),Oe=Ce(9622);function ce(w,m){if(!w)return;let _=w.getFramePainter();(0,M.isFunc)(_?.setTooltipEnabled)&&(_.setTooltipEnabled(m),_.processFrameTooltipEvent(null)),(0,M.isFunc)(w.control?.setTooltipEnabled)&&w.control.setTooltipEnabled(m)}let Y=null,K="",ue=null;function X(w,m){return Y&&ue===w&&K===m}function Z(w,m){if(!M.settings.MoveResize||(0,M.isBatchMode)())return;let _=w,F=_.getPadPainter();if(F?._fast_drawing)return;function R(J,ie){function Me(de,fe){let I="js_"+de.replace(/[-]/g,"_"),U=J.select("."+I);U.empty()&&(U=J.append("path").classed(I,!0)),U.style("opacity",0).style("cursor",de).attr("d",fe),ie&&U.call(ie)}Me("nw-resize","M2,2h15v-5h-20v20h5Z"),Me("ne-resize",`M${m.width-2},2h-15v-5h20v20h-5 Z`),Me("sw-resize",`M2,${m.height-2}h15v5h-20v-20h5Z`),Me("se-resize",`M${m.width-2},${m.height-2}h-15v5h20v-20h-5Z`),m.no_change_x||(Me("w-resize",`M-3,18h5v${Math.max(0,m.height-36)}h-5Z`),Me("e-resize",`M${m.width+3},18h-5v${Math.max(0,m.height-36)}h5Z`)),m.no_change_y||(Me("n-resize",`M18,-3v5h${Math.max(0,m.width-36)}v-5Z`),Me("s-resize",`M18,${m.height+3}v-5h${Math.max(0,m.width-36)}v5Z`))}const q=(J,ie,Me,de)=>{if(ue=null,K="",Y&&(Y.remove(),Y=null),!_.draw_g)return!1;let fe=m.x,I=m.y;m.minwidth&&Me<m.minwidth&&(Me=m.minwidth),m.minheight&&de<m.minheight&&(de=m.minheight);let U=Me!==m.width||de!==m.height,z=J!==fe||ie!==I;if(m.x=J,m.y=ie,m.width=Me,m.height=de,_.draw_g.attr("transform",`translate(${J},${ie})`),ce(_,!0),R(_.draw_g),(U||z)&&(U&&"resize"in m&&m.resize(Me,de),z&&"move"in m&&m.move(J,ie,J-fe,ie-I),U||z)){if("obj"in m){let le=F.getPadRect();m.obj.fX1NDC=J/le.width,m.obj.fX2NDC=(J+Me)/le.width,m.obj.fY1NDC=1-(ie+de)/le.height,m.obj.fY2NDC=1-ie/le.height,m.obj.modified_NDC=!0}"redraw"in m&&m.redraw(m)}return U||z};if(w){let J=w.getFramePainter();(!J||J.mode3d)&&P(w.draw_g)}let T=(0,L.oh)().subject(Object);T.on("start",function(J){if((0,Oe.hj)(J.sourceEvent)||K)return;(0,He.W)(),ce(_,!1),J.sourceEvent.preventDefault(),J.sourceEvent.stopPropagation();let ie=F.getPadRect(),Me={x:m.x,y:m.y,width:m.width,height:m.height,acc_x1:m.x,acc_y1:m.y,pad_w:ie.width-m.width,pad_h:ie.height-m.height,drag_tm:new Date,path:`v${m.height}h${m.width}v${-m.height}z`};ue=_,K="move",Y=(0,L.Ys)(_.draw_g.node().parentNode).append("path").classed("zoom",!0).attr("d",`M${Me.acc_x1},${Me.acc_y1}${Me.path}`).style("cursor","move").style("pointer-events","none").property("drag_handle",Me)}).on("drag",function(J){if(!X(_,"move"))return;J.sourceEvent.preventDefault(),J.sourceEvent.stopPropagation();let ie=Y.property("drag_handle");m.no_change_x||(ie.acc_x1+=J.dx),m.no_change_y||(ie.acc_y1+=J.dy),ie.x=Math.min(Math.max(ie.acc_x1,0),ie.pad_w),ie.y=Math.min(Math.max(ie.acc_y1,0),ie.pad_h),Y.attr("d",`M${ie.x},${ie.y}${ie.path}`)}).on("end",function(J){if(!X(_,"move"))return;J.sourceEvent.preventDefault();let ie=Y.property("drag_handle");if(!1===q(ie.x,ie.y,m.width,m.height)){let Me=(new Date).getTime()-ie.drag_tm.getTime();if(m.ctxmenu&&Me>600&&_.showContextMenu){let de=resize_se.node().getBoundingClientRect();_.showContextMenu("main",{clientX:de.left,clientY:de.top})}else m.canselect&&Me<=600&&_.getPadPainter()?.selectObjectPainter(_)}});let $=(0,L.oh)().subject(Object);$.on("start",function(J){if((0,Oe.hj)(J.sourceEvent)||K)return;J.sourceEvent.stopPropagation(),J.sourceEvent.preventDefault(),ce(_,!1);let ie=F.getPadRect(),Me={x:m.x,y:m.y,width:m.width,height:m.height,acc_x1:m.x,acc_y1:m.y,acc_x2:m.x+m.width,acc_y2:m.y+m.height,pad_w:ie.width,pad_h:ie.height};ue=_,K="resize",Y=(0,L.Ys)(_.draw_g.node().parentNode).append("rect").classed("zoom",!0).style("cursor",(0,L.Ys)(this).style("cursor")).attr("x",Me.acc_x1).attr("y",Me.acc_y1).attr("width",Me.acc_x2-Me.acc_x1).attr("height",Me.acc_y2-Me.acc_y1).property("drag_handle",Me)}).on("drag",function(J){if(!X(_,"resize"))return;J.sourceEvent.preventDefault(),J.sourceEvent.stopPropagation();let ie=Y.property("drag_handle"),Me=J.dx,de=J.dy,fe=(0,L.Ys)(this);m.no_change_x&&(Me=0),m.no_change_y&&(de=0),fe.classed("js_nw_resize")?(ie.acc_x1+=Me,ie.acc_y1+=de):fe.classed("js_ne_resize")?(ie.acc_x2+=Me,ie.acc_y1+=de):fe.classed("js_sw_resize")?(ie.acc_x1+=Me,ie.acc_y2+=de):fe.classed("js_se_resize")?(ie.acc_x2+=Me,ie.acc_y2+=de):fe.classed("js_w_resize")?ie.acc_x1+=Me:fe.classed("js_n_resize")?ie.acc_y1+=de:fe.classed("js_e_resize")?ie.acc_x2+=Me:fe.classed("js_s_resize")&&(ie.acc_y2+=de);let I=Math.max(0,ie.acc_x1),U=Math.min(ie.acc_x2,ie.pad_w),z=Math.max(0,ie.acc_y1),le=Math.min(ie.acc_y2,ie.pad_h);ie.x=Math.min(I,U),ie.y=Math.min(z,le),ie.width=Math.abs(U-I),ie.height=Math.abs(le-z),Y.attr("x",ie.x).attr("y",ie.y).attr("width",ie.width).attr("height",ie.height)}).on("end",function(J){if(!X(_,"resize"))return;J.sourceEvent.preventDefault();let ie=Y.property("drag_handle");q(ie.x,ie.y,ie.width,ie.height)}),m.only_resize||_.draw_g.style("cursor","move").call(T),m.only_move||R(_.draw_g,$)}const O={hints_layer(){let w=this.getCanvPainter();return w?w.getLayerSvg("info_layer"):(0,L.Ys)(null)},isTooltipShown(){if(!this.tooltip_enabled||!this.isTooltipAllowed())return!1;let w=this.hints_layer().select(".objects_hints");return!w.empty()&&w.property("hints_pad")==this.getPadName()},setTooltipEnabled(w){void 0!==w&&(this.tooltip_enabled=w)},processFrameTooltipEvent(w,m){if(w?.handler){let vn=this.draw_g?this.draw_g.select(".main_layer"):null;if(!vn||vn.empty())w=null;else if(w.touch&&m){let rn=(0,L.d)(m,vn.node());w=rn&&1==rn.length?{touch:!0,x:rn[0][0],y:rn[0][1]}:null}else if(m){let rn=(0,L.cx)(m,vn.node());w={touch:!1,x:rn[0],y:rn[1]}}}let _=[],F=0,R=0,q=0,T=0,$=!1,J=11,fe=this.getFrameRect(),I=this.getPadPainter(),U=I.getPadWidth(),z=new Ie.G(160,J),le=!this.isTooltipAllowed()||!this.tooltip_enabled;w&&le&&(w.disabled=!0),w&&(w.painters=!0),I&&(_=I.processPadTooltipEvent(w)),I?._deliver_webcanvas_events&&I?.is_active_pad&&w&&(0,M.isFunc)(I?.deliverWebCanvasEvent)&&I.deliverWebCanvasEvent("move",fe.x+w.x,fe.y+w.y,_),w?.touch&&(J=15);for(let vn=0;vn<_.length;++vn){let rn=_[vn];if(rn){if(rn.painter&&void 0!==rn.user_info&&rn.painter.provideUserTooltip(rn.user_info),!rn.lines||0===rn.lines.length){_[vn]=null;continue}for(let Gt=0;Gt<vn;++Gt){let qt=_[Gt],Qt=!1;if(qt&&qt.lines.length===rn.lines.length){for(let _n=0;_n<rn.lines.length&&!Qt;++_n)qt.lines[_n]!==rn.lines[_n]&&(Qt=!0);if(!Qt){_[vn]=null;break}}}_[vn]&&(F++,rn.exact&&R++,rn.lines.forEach(Gt=>{q=Math.max(q,Gt.length)}),rn.height=Math.round(rn.lines.length*J*1.2+6-J*(1.2-1)),void 0!==rn.color1&&"none"!==rn.color1&&(0!==T&&T!==rn.color1&&($=!0),T=rn.color1))}}let D=this.hints_layer(),oe=D.select(".objects_hints"),_e="",Ee="",Ve="",Qe=null,et=1e10,Tt=null,Bt=F>15,ve=w?Math.round(w.x)+","+Math.round(w.y):"";for(let vn=0;vn<(_?.length||0);++vn){if(!_[vn])continue;if(Qe||(Qe=_[vn]),_[vn].exact&&R<2&&(!Qe||!Qe.exact)){Qe=_[vn];break}if(!w||void 0===_[vn].x||void 0===_[vn].y)continue;let rn=(w.x-_[vn].x)**2+(w.y-_[vn].y)**2;rn<et&&(et=rn,Tt=_[vn])}if((!Qe||!Qe.exact)&&et<400&&(Qe=Tt),Qe&&(Ee=Qe.lines&&Qe.lines.length>1?Qe.lines[0]:Qe.name,_e=Qe.title||"",Ve=Qe.line,!Ve&&Qe.lines&&(Ve=Qe.lines.slice(1).join(" "))),this.showObjectStatus(Ee,_e,Ve,ve),!w||le||0===_.length||0===q||Bt&&!Tt)return void oe.remove();oe.empty()&&(oe=D.append("svg:g").attr("class","objects_hints").style("pointer-events","none"));let Je={x:0,y:0},ct=fe.transform||"";I.iscan||(Je=(0,Ze.Yi)(this.getPadSvg(),Je),ct=`translate(${Je.x},${Je.y}) ${ct}`),oe.attr("transform",ct).property("last_point",w).property("hints_pad",this.getPadName());let We=oe.property("viewmode")||"",Ke=0,ft=w.x+fe.hint_delta_x;if(Bt||1==F)We="single",ft+=15;else{let vn=.5,rn=.5;"left"==We?rn=.7:"right"==We&&(vn=.3),ft<=vn*fe.width?(We="left",ft=20):ft>=rn*fe.width?(We="right",ft=fe.width-60):ft=oe.property("startx")}We!==oe.property("viewmode")&&(oe.property("viewmode",We),oe.selectAll("*").remove());let zt=10,Zt=10,Mt=-1111,Ot=-1111,sn=-Je.y,wn=this.getCanvPainter(),Ln=wn.getPadHeight()-fe.y-Je.y;const En=vn=>{for(let rn=0;rn<_.length&&vn<Ln;++rn){let Gt=_[rn];Gt&&Gt.y>=vn-5&&Gt.y<=vn+Gt.height+5&&(vn=Gt.y+10,rn=-1)}return vn};for(let vn=0;vn<_.length;++vn){let _n=function(){return function(){return function(dn){return dn<.8?"0":5*(dn-.8)}}},rn=_[vn],Gt=oe.select(".painter_hint_"+vn);if(Bt&&rn!==Tt&&(rn=null),null===rn){Gt.remove();continue}let qt=Gt.empty();qt&&(Gt=oe.append("svg:svg").attr("class","painter_hint_"+vn).attr("opacity",0).style("overflow","hidden").style("pointer-events","none")),"single"==We?zt=w.touch?w.y-rn.height-5:Math.min(w.y+15,Ln-rn.height-3)+fe.hint_delta_y:(Zt=En(Zt),-1111===Mt&&-1111===Ot&&(Mt=Ot=rn.x),Mt=Math.min(Mt,rn.x),Ot=Math.min(Ot,rn.x)),Gt.attr("x",ft).attr("y",zt).property("curry",zt).property("gapy",Zt),zt+=rn.height+5,Zt+=rn.height+5,qt||Gt.selectAll("*").remove(),Gt.attr("width",60).attr("height",rn.height);let Qt=Gt.append("rect").attr("x",0).attr("y",0).attr("width",60).attr("height",rn.height).style("fill","lightgrey").style("pointer-events","none");if(F>1){let dn=$?rn.color1:rn.color2;dn&&"none"!==dn&&Qt.style("stroke",dn)}Qt.attr("stroke-width",rn.exact?3:1);for(let dn=0;dn<(rn.lines?rn.lines.length:0);dn++)if(null!==rn.lines[dn]){let ci=Gt.append("svg:text").attr("text-anchor","start").attr("x",3).attr("y",3+dn*J*1.2).attr("dy",".8em").style("fill","black").style("pointer-events","none").call(z.func).text(rn.lines[dn]),ir=(0,Ze.Yo)(ci,"bbox");Ke=Math.max(Ke,ir.width)}qt&&(M.settings.TooltipAnimation>0?Gt.transition().duration(M.settings.TooltipAnimation).attrTween("opacity",_n()):Gt.attr("opacity",1))}Ke+=6;let $n=oe.selectAll("svg");if("right"==We&&ft+Ke>fe.width-20&&(ft=fe.width-Ke-20,$n.attr("x",ft)),"single"==We&&ft+Ke>U-fe.x&&ft>Ke+20&&(ft-=Ke+20,$n.attr("x",ft)),"single"!==We&&Zt<Ln&&Zt!==zt)Mt<=ft+Ke+5&&Ot>=ft-5&&$n.attr("y",function(){return(0,L.Ys)(this).property("gapy")});else if("single"!==We&&zt>Ln){let vn=Math.max(Ln-zt-10,sn);vn<0&&$n.attr("y",function(){return(0,L.Ys)(this).property("curry")+vn})}Ke>10&&$n.attr("width",Ke).select("rect").attr("width",Ke),oe.property("startx",ft),wn._highlight_connect&&(0,M.isFunc)(wn.processHighlightConnect)&&wn.processHighlightConnect(_)},assign(w){Object.assign(w,this,{tooltip_enabled:!0})}};function P(w){(0,Oe.DW)("\n.jsroot rect.h1bin { stroke: #4572A7; fill: #4572A7; opacity: 0; }\n.jsroot rect.zoom { stroke: steelblue; fill-opacity: 0.1; }\n.jsroot path.zoom { stroke: steelblue; fill-opacity: 0.1; }\n.jsroot svg:not(:root) { overflow: hidden; }",w.node())}const x={addBasicInteractivity(){O.assign(this),!this._frame_rotate&&!this._frame_fixpos&&Z(this,{obj:this,x:this._frame_x,y:this._frame_y,width:this.getFrameWidth(),height:this.getFrameHeight(),only_resize:!0,minwidth:20,minheight:20,redraw:()=>this.sizeChanged()}),P(this.draw_g);let w=this.draw_g.select(".main_layer");w.style("pointer-events","visibleFill").property("handlers_set",0);let _=this.getPadPainter()?._fast_drawing?0:1;if(w.property("handlers_set")!=_){let R=_?this.processFrameTooltipEvent.bind(this,null):null,q=_?this.processFrameTooltipEvent.bind(this,{handler:!0,touch:!1}):null;if(w.property("handlers_set",_).on("mouseenter",q).on("mousemove",q).on("mouseleave",R),M.browser.touches){let T=_?this.processFrameTooltipEvent.bind(this,{handler:!0,touch:!0}):null;w.on("touchstart",T).on("touchmove",T).on("touchend",R).on("touchcancel",R)}}w.attr("x",0).attr("y",0).attr("width",this.getFrameWidth()).attr("height",this.getFrameHeight());let F=this.hints_layer().select(".objects_hints");!F.empty()&&this.isTooltipAllowed()&&F.property("hints_pad")==this.getPadName()&&setTimeout(this.processFrameTooltipEvent.bind(this,F.property("last_point"),null),10)},addFrameInteractivity(w){var m=this;return(0,ze.Z)(function*(){let _=m.getPadPainter(),F=m.getFrameSvg();if(_?._fast_drawing||F.empty())return m;if(w){let T=F.selectAll(".x2axis_container"),$=F.selectAll(".y2axis_container");return M.settings.ContextMenu&&(T.on("contextmenu",J=>m.showContextMenu("x2",J)),$.on("contextmenu",J=>m.showContextMenu("y2",J))),T.on("mousemove",J=>m.showAxisStatus("x2",J)),$.on("mousemove",J=>m.showAxisStatus("y2",J)),m}let R=F.selectAll(".xaxis_container"),q=F.selectAll(".yaxis_container");return m.can_zoom_x=m.can_zoom_y=M.settings.Zooming,_?.options&&(_.options.NoZoomX&&(m.can_zoom_x=!1),_.options.NoZoomY&&(m.can_zoom_y=!1)),F.property("interactive_set")||(m.addFrameKeysHandler(),m.last_touch=new Date(0),m.zoom_kind=0,m.zoom_rect=null,m.zoom_origin=null,m.zoom_curr=null,m.touch_cnt=0),M.settings.Zooming&&!m.projection&&(M.settings.ZoomMouse&&(F.on("mousedown",m.startRectSel.bind(m)),F.on("dblclick",m.mouseDoubleClick.bind(m))),M.settings.ZoomWheel&&F.on("wheel",m.mouseWheel.bind(m))),M.browser.touches&&(M.settings.Zooming&&M.settings.ZoomTouch&&!m.projection||M.settings.ContextMenu)&&F.on("touchstart",m.startTouchZoom.bind(m)),M.settings.ContextMenu&&(M.browser.touches&&(R.on("touchstart",m.startTouchMenu.bind(m,"x")),q.on("touchstart",m.startTouchMenu.bind(m,"y"))),F.on("contextmenu",T=>m.showContextMenu("",T)),R.on("contextmenu",T=>m.showContextMenu("x",T)),q.on("contextmenu",T=>m.showContextMenu("y",T))),R.on("mousemove",T=>m.showAxisStatus("x",T)),q.on("mousemove",T=>m.showAxisStatus("y",T)),F.property("interactive_set",!0),m})()},addFrameKeysHandler(){this.keys_handler||typeof window>"u"||(this.keys_handler=w=>this.processKeyPress(w),window.addEventListener("keydown",this.keys_handler,!1))},processKeyPress(w){let _=this.selectDom(),F=w.key,R=this.getPadPainter();if(!M.settings.HandleKeys||_.empty()||!1===this.enabledKeys||(0,ye.X8)()!==R||["PageUp","PageDown","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","PrintScreen","*"].indexOf(F)<0)return!1;w.shiftKey&&(F="Shift "+F),w.altKey&&(F="Alt "+F),w.ctrlKey&&(F="Ctrl "+F);let q={name:"x",dleft:0,dright:0};switch(F){case"ArrowLeft":q.dleft=-1,q.dright=1;break;case"ArrowRight":q.dleft=1,q.dright=-1;break;case"Ctrl ArrowLeft":q.dleft=q.dright=-1;break;case"Ctrl ArrowRight":q.dleft=q.dright=1;break;case"ArrowUp":q.name="y",q.dleft=1,q.dright=-1;break;case"ArrowDown":q.name="y",q.dleft=-1,q.dright=1;break;case"Ctrl ArrowUp":q.name="y",q.dleft=q.dright=1;break;case"Ctrl ArrowDown":q.name="y",q.dleft=q.dright=-1}if(q.dleft||q.dright){if(!M.settings.Zooming||this.mode3d&&0!==F.indexOf("Ctrl"))return!1;this.analyzeMouseWheelEvent(null,q,.5),this.zoom(q.name,q.min,q.max),q.changed&&this.zoomChangedInteractive(q.name,!0),w.stopPropagation(),w.preventDefault()}else{let T=R?.findPadButton(F);T&&(R.clickPadButton(T),w.stopPropagation(),w.preventDefault())}return!0},processFrameClick(w,m){let _=this.getPadPainter();if(!_)return;w.painters=!0,w.disabled=!0;let q,F=_.processPadTooltipEvent(w),R=null;for(let T=0;T<F.length&&!R;++T)F[T]&&F[T].exact&&(R=F[T]);if(R){let T=m?this._dblclick_handler:this._click_handler;T&&(q=T(R.user_info,w))}return m||_.selectObjectPainter(R?R.painter:this,{x:w.x+(this._frame_x||0),y:w.y+(this._frame_y||0)}),q},startRectSel(w){if(this.zoom_kind>100||1!==(w.which||w.button))return;w.preventDefault();let m=this.getFrameSvg(),_=(0,L.cx)(w,m.node());this.clearInteractiveElements();let F=this.getFrameWidth(),R=this.getFrameHeight();this.zoom_lastpos=_,this.zoom_curr=[Math.max(0,Math.min(F,_[0])),Math.max(0,Math.min(R,_[1]))],this.zoom_origin=[0,0],this.zoom_second=!1,_[0]<0||_[0]>F?(this.zoom_second=_[0]>F&&this.y2_handle,this.zoom_kind=3,this.zoom_origin[1]=this.zoom_curr[1],this.zoom_curr[0]=F,this.zoom_curr[1]+=1):_[1]<0||_[1]>R?(this.zoom_second=_[1]<0&&this.x2_handle,this.zoom_kind=2,this.zoom_origin[0]=this.zoom_curr[0],this.zoom_curr[0]+=1,this.zoom_curr[1]=R):(this.zoom_kind=1,this.zoom_origin[0]=this.zoom_curr[0],this.zoom_origin[1]=this.zoom_curr[1]),(0,L.Ys)(window).on("mousemove.zoomRect",this.moveRectSel.bind(this)).on("mouseup.zoomRect",this.endRectSel.bind(this),!0),this.zoom_rect=null,ce(this,!1),w.stopPropagation(),1!=this.zoom_kind&&setTimeout(()=>this.startLabelsMove(),500)},startLabelsMove(){if(this.zoom_rect)return;let w=2==this.zoom_kind?this.x_handle:this.y_handle;!w||!(0,M.isFunc)(w.processLabelsMove)||!this.zoom_lastpos||w.processLabelsMove("start",this.zoom_lastpos)&&(this.zoom_labels=w)},moveRectSel(w){if(0==this.zoom_kind||this.zoom_kind>100)return;w.preventDefault();let m=(0,L.cx)(w,this.getFrameSvg().node());if(this.zoom_labels)return this.zoom_labels.processLabelsMove("move",m);switch(this.zoom_lastpos[0]=m[0],this.zoom_lastpos[1]=m[1],m[0]=Math.max(0,Math.min(this.getFrameWidth(),m[0])),m[1]=Math.max(0,Math.min(this.getFrameHeight(),m[1])),this.zoom_kind){case 1:this.zoom_curr[0]=m[0],this.zoom_curr[1]=m[1];break;case 2:this.zoom_curr[0]=m[0];break;case 3:this.zoom_curr[1]=m[1]}let _=Math.min(this.zoom_origin[0],this.zoom_curr[0]),F=Math.min(this.zoom_origin[1],this.zoom_curr[1]),R=Math.abs(this.zoom_curr[0]-this.zoom_origin[0]),q=Math.abs(this.zoom_curr[1]-this.zoom_origin[1]);if(!this.zoom_rect){if(1!=this.zoom_kind&&(R<2||q<2))return;this.zoom_rect=this.getFrameSvg().append("rect").attr("class","zoom").style("pointer-events","none")}this.zoom_rect.attr("x",_).attr("y",F).attr("width",R).attr("height",q)},endRectSel(w){if(0==this.zoom_kind||this.zoom_kind>100)return;w.preventDefault(),(0,L.Ys)(window).on("mousemove.zoomRect",null).on("mouseup.zoomRect",null);let m=(0,L.cx)(w,this.getFrameSvg().node()),_=this.zoom_kind;if(this.zoom_labels)this.zoom_labels.processLabelsMove("stop",m);else{let R=[this.can_zoom_x,this.can_zoom_y];switch(m[0]=Math.max(0,Math.min(this.getFrameWidth(),m[0])),m[1]=Math.max(0,Math.min(this.getFrameHeight(),m[1])),this.zoom_kind){case 1:this.zoom_curr[0]=m[0],this.zoom_curr[1]=m[1];break;case 2:this.zoom_curr[0]=m[0],R[1]=!1;break;case 3:this.zoom_curr[1]=m[1],R[0]=!1}let q,T,$,J,ie=!1,Me=this.swap_xy?1:0,de=1-Me,fe="x",I="y";R[Me]&&Math.abs(this.zoom_curr[Me]-this.zoom_origin[Me])>10&&(this.zoom_second&&2==this.zoom_kind&&(fe="x2"),q=Math.min(this.revertAxis(fe,this.zoom_origin[Me]),this.revertAxis(fe,this.zoom_curr[Me])),T=Math.max(this.revertAxis(fe,this.zoom_origin[Me]),this.revertAxis(fe,this.zoom_curr[Me])),ie=!0),R[de]&&Math.abs(this.zoom_curr[de]-this.zoom_origin[de])>10&&(this.zoom_second&&3==this.zoom_kind&&(I="y2"),$=Math.min(this.revertAxis(I,this.zoom_origin[de]),this.revertAxis(I,this.zoom_curr[de])),J=Math.max(this.revertAxis(I,this.zoom_origin[de]),this.revertAxis(I,this.zoom_curr[de])),ie=!0),"x2"==fe?(this.zoomChangedInteractive(fe,!0),this.zoomSingle(fe,q,T),_=0):"y2"==I?(this.zoomChangedInteractive(I,!0),this.zoomSingle(I,$,J),_=0):ie&&(this.zoomChangedInteractive("x",!0),this.zoomChangedInteractive("y",!0),this.zoom(q,T,$,J),_=0)}let F=1===_?{x:this.zoom_origin[0],y:this.zoom_origin[1]}:null;switch(this.clearInteractiveElements(),_){case 1:this.processFrameClick(F);break;case 2:this.getPadPainter()?.selectObjectPainter(this,null,"xaxis");break;case 3:this.getPadPainter()?.selectObjectPainter(this,null,"yaxis")}},mouseDoubleClick(w){w.preventDefault();let m=(0,L.cx)(w,this.getFrameSvg().node()),_=this.getFrameWidth(),F=this.getFrameHeight();this.clearInteractiveElements();let R=m[0]>=0&&m[0]<=_,q=m[1]>=0&&m[1]<=F;if(R&&q&&this._dblclick_handler&&this.processFrameClick({x:m[0],y:m[1]},!0))return;let T=(this.can_zoom_x?"x":"")+(this.can_zoom_y?"y":"")+"z";if(R){if(!q){if(!this.can_zoom_x)return;T=this.swap_xy?"y":"x",m[1]<0&&this[T+"2_handle"]&&(T+="2")}}else{if(!this.can_zoom_y)return;T=this.swap_xy?"x":"y",m[0]>_&&this[T+"2_handle"]&&(T+="2")}this.unzoom(T).then($=>{if($)return;let J=this.getPadPainter(),ie=this.getFrameRect();J&&J.selectObjectPainter(J,{x:m[0]+ie.x,y:m[1]+ie.y,dbl:!0})})},startTouchZoom(w){if(0!=this.zoom_kind||K)return w.preventDefault(),void w.stopPropagation();let m=(0,L.d)(w,this.getFrameSvg().node());if(this.touch_cnt+=1,1==m.length){let T=new Date,$=T.getTime()-this.last_touch.getTime();this.last_touch=T,$<300&&this.zoom_curr&&Math.abs(this.zoom_curr[0]-m[0][0])<30&&Math.abs(this.zoom_curr[1]-m[0][1])<30?(w.preventDefault(),w.stopPropagation(),this.clearInteractiveElements(),this.unzoom("xyz"),this.last_touch=new Date(0),this.getFrameSvg().on("touchcancel",null).on("touchend",null,!0)):M.settings.ContextMenu&&(this.zoom_curr=m[0],this.getFrameSvg().on("touchcancel",this.endTouchSel.bind(this)).on("touchend",this.endTouchSel.bind(this)),w.preventDefault(),w.stopPropagation())}if(2!=m.length||!M.settings.Zooming||!M.settings.ZoomTouch)return;w.preventDefault(),w.stopPropagation(),this.clearInteractiveElements(),this.getFrameSvg().on("touchcancel",null).on("touchend",null);let _=m[0],F=m[1],R=this.getFrameWidth(),q=this.getFrameHeight();this.zoom_curr=[Math.min(_[0],F[0]),Math.min(_[1],F[1])],this.zoom_origin=[Math.max(_[0],F[0]),Math.max(_[1],F[1])],this.zoom_second=!1,this.zoom_curr[0]<0||this.zoom_curr[0]>R?(this.zoom_second=this.zoom_curr[0]>R&&this.y2_handle,this.zoom_kind=103,this.zoom_curr[0]=0,this.zoom_origin[0]=R):this.zoom_origin[1]>q||this.zoom_origin[1]<0?(this.zoom_second=this.zoom_origin[1]<0&&this.x2_handle,this.zoom_kind=102,this.zoom_curr[1]=0,this.zoom_origin[1]=q):this.zoom_kind=101,K="zoom",ce(this,!1),this.zoom_rect=this.getFrameSvg().append("rect").attr("class","zoom").attr("id","zoomRect").attr("x",this.zoom_curr[0]).attr("y",this.zoom_curr[1]).attr("width",this.zoom_origin[0]-this.zoom_curr[0]).attr("height",this.zoom_origin[1]-this.zoom_curr[1]),(0,L.Ys)(window).on("touchmove.zoomRect",this.moveTouchZoom.bind(this)).on("touchcancel.zoomRect",this.endTouchZoom.bind(this)).on("touchend.zoomRect",this.endTouchZoom.bind(this))},moveTouchZoom(w){if(this.zoom_kind<100)return;w.preventDefault();let m=(0,L.d)(w,this.getFrameSvg().node());if(2!=m.length)return this.clearInteractiveElements();let _=m[0],F=m[1];103!=this.zoom_kind&&(this.zoom_curr[0]=Math.min(_[0],F[0]),this.zoom_origin[0]=Math.max(_[0],F[0])),102!=this.zoom_kind&&(this.zoom_curr[1]=Math.min(_[1],F[1]),this.zoom_origin[1]=Math.max(_[1],F[1])),this.zoom_rect.attr("x",this.zoom_curr[0]).attr("y",this.zoom_curr[1]).attr("width",this.zoom_origin[0]-this.zoom_curr[0]).attr("height",this.zoom_origin[1]-this.zoom_curr[1]),(this.zoom_origin[0]-this.zoom_curr[0]>10||this.zoom_origin[1]-this.zoom_curr[1]>10)&&ce(this,!1),w.stopPropagation()},endTouchZoom(w){if(this.getFrameSvg().on("touchcancel",null).on("touchend",null),0===this.zoom_kind){w.preventDefault();let fe=(new Date).getTime()-this.last_touch.getTime();fe>500&&fe<2e3&&!this.isTooltipShown()?(this.showContextMenu("main",{clientX:this.zoom_curr[0],clientY:this.zoom_curr[1]}),this.last_touch=new Date(0)):this.clearInteractiveElements()}if(this.zoom_kind<100)return;K="",w.preventDefault(),(0,L.Ys)(window).on("touchmove.zoomRect",null).on("touchend.zoomRect",null).on("touchcancel.zoomRect",null);let m,_,F,R,q=!1,T=this.swap_xy?1:0,$=1-T,J=[!0,!0],ie="x",Me="y";102===this.zoom_kind&&(J[1]=!1),103===this.zoom_kind&&(J[0]=!1),J[T]&&Math.abs(this.zoom_curr[T]-this.zoom_origin[T])>10&&(this.zoom_second&&102==this.zoom_kind&&(ie="x2"),m=Math.min(this.revertAxis(ie,this.zoom_origin[T]),this.revertAxis(ie,this.zoom_curr[T])),_=Math.max(this.revertAxis(ie,this.zoom_origin[T]),this.revertAxis(ie,this.zoom_curr[T])),q=!0),J[$]&&Math.abs(this.zoom_curr[$]-this.zoom_origin[$])>10&&(this.zoom_second&&103==this.zoom_kind&&(Me="y2"),F=Math.min(this.revertAxis(Me,this.zoom_origin[$]),this.revertAxis(Me,this.zoom_curr[$])),R=Math.max(this.revertAxis(Me,this.zoom_origin[$]),this.revertAxis(Me,this.zoom_curr[$])),q=!0),this.clearInteractiveElements(),this.last_touch=new Date(0),"x2"==ie?(this.zoomChangedInteractive(ie,!0),this.zoomSingle(ie,m,_)):"y2"==Me?(this.zoomChangedInteractive(Me,!0),this.zoomSingle(Me,F,R)):q&&(this.zoomChangedInteractive("x",!0),this.zoomChangedInteractive("y",!0),this.zoom(m,_,F,R)),w.stopPropagation()},analyzeMouseWheelEvent(w,m,_,F,R){let q=R?this[m.name+"2_handle"]:null;if(q)return m.second=Object.assign({},m),q.analyzeWheelEvent(w,_,m.second,F);let T=this[m.name+"_handle"];if(T)return T.analyzeWheelEvent(w,_,m,F);console.error(`Fail to analyze zooming event for ${m.name}`)},isAllowedDefaultYZooming(){if(this.self_drawaxes)return!0;let w=this.getPadPainter();if(w?.painters)for(let m=0;m<w.painters.length;++m){let _=w.painters[m];if(void 0!==_?.wheel_zoomy)return _.wheel_zoomy}return!1},mouseWheel(w){w.stopPropagation(),w.preventDefault(),this.clearInteractiveElements();let m={name:"x",reverse:this.reverse_x},_={name:"y",reverse:this.reverse_y,ignore:!this.isAllowedDefaultYZooming()},F=(0,L.cx)(w,this.getFrameSvg().node()),R=this.getFrameWidth(),q=this.getFrameHeight();this.can_zoom_x&&this.analyzeMouseWheelEvent(w,this.swap_xy?_:m,F[0]/R,F[1]>=0&&F[1]<=q,F[1]<0),this.can_zoom_y&&this.analyzeMouseWheelEvent(w,this.swap_xy?m:_,1-F[1]/q,F[0]>=0&&F[0]<=R,F[0]>R),this.zoom(m.min,m.max,_.min,_.max),m.changed&&this.zoomChangedInteractive("x",!0),_.changed&&this.zoomChangedInteractive("y",!0),m.second&&(this.zoomSingle("x2",m.second.min,m.second.max),m.second.changed&&this.zoomChangedInteractive("x2",!0)),_.second&&(this.zoomSingle("y2",_.second.min,_.second.max),_.second.changed&&this.zoomChangedInteractive("y2",!0))},showContextMenu(w,m,_){if("zoom_kind"in this&&this.zoom_kind>100)return;let F=this,R=null,q=!1,T=null;if(m.stopPropagation)if(m.preventDefault(),m.stopPropagation(),"painter"==w&&_)F=_,w="";else if(w)("x"==w||"y"==w||"z"==w)&&(R=this.getMainPainter(!0),this.v7_frame&&(0,M.isFunc)(R?.v7EvalAttr)&&(R=null));else{let $=(0,L.cx)(m,this.getFrameSvg().node()),J=(0,L.d)(m,this.getFrameSvg().node()),ie=this.getPadPainter(),Me=null,de=null;if(T=this,1===J.length?Me={x:J[0][0],y:J[0][1],touch:!0}:2===$.length&&(Me={x:$[0],y:$[1],touch:!1}),Me&&ie){Me.painters=!0;let fe=ie.processPadTooltipEvent(Me),I=1e3;for(let U=0;U<fe.length;++U)if(fe[U]&&fe[U].menu){let z="menu_dist"in fe[U]?fe[U].menu_dist:7;z<I&&(de=fe[U].painter,I=z)}}de?F=de:w="frame",Me&&(q=Me.x>0&&Me.x<20&&Me.y>0&&Me.y<20),T.setLastEventPos(Me)}else"painter"==w&&_&&(F=_,w="");R||(R=F),(0,M.isFunc)(F?.fillContextMenu)&&(this.clearInteractiveElements(),(0,He.Z)(m,F).then($=>{let J=$.painter.fillContextMenu($,w,_);T&&(!J||q&&"frame"!==w)&&(J=T.fillContextMenu($)),J&&R.fillObjectExecMenu($,w).then(ie=>{ce(ie.painter,!1),ie.show().then(()=>ce(ie.painter,!0))})}))},startTouchMenu(w,m){let _=(0,L.d)(m,this.getFrameSvg().node());if(1!=_.length)return;w||(w="main");let F="touch_"+w;m.sourceEvent.preventDefault(),m.sourceEvent.stopPropagation(),this[F]={dt:new Date,pos:_[0]};let R=this.endTouchMenu.bind(this,w);this.getFrameSvg().on("touchcancel",R).on("touchend",R)},endTouchMenu(w,m){let _="touch_"+w;if(!(_ in this))return;m.sourceEvent.preventDefault(),m.sourceEvent.stopPropagation();let F=(new Date).getTime()-this[_].dt.getTime();if(this.getFrameSvg().on("touchcancel",null).on("touchend",null),F>500){let R=this.getFrameSvg().node().getBoundingClientRect();this.showContextMenu(w,{clientX:R.left+this[_].pos[0],clientY:R.top+this[_].pos[1]})}delete this[_]},clearInteractiveElements(){(0,He.W)(),this.zoom_kind=0,this.zoom_rect&&(this.zoom_rect.remove(),delete this.zoom_rect),delete this.zoom_curr,delete this.zoom_origin,delete this.zoom_lastpos,delete this.zoom_labels,ce(this,!0)},assign(w){Object.assign(w,this)}};class p extends ye.tK{constructor(m,_){super(m,_&&_.$dummy?null:_),this.zoom_kind=0,this.mode3d=!1,this.shrink_frame_left=0,this.xmin=this.xmax=0,this.ymin=this.ymax=0,this.ranges_set=!1,this.axes_drawn=!1,this.keys_handler=null,this.projection=0}getFramePainter(){return this}is_root6(){return!0}getObject(m){return"xaxis"===m?this.xaxis:"yaxis"===m?this.yaxis:super.getObject()}setFrameActive(m){this.enabledKeys=!(!m||!M.settings.HandleKeys),this.control&&(this.control.enableKeys=this.enabledKeys)}shrinkFrame(m,_){this.fX1NDC+=m,this.fX2NDC-=_}setLastEventPos(m){this.fLastEventPnt=m}getLastEventPos(){return this.fLastEventPnt}getProjectionFunc(){switch(this.projection){case 1:return(m,_)=>{const F=Math.PI/180,R=m/2*F,q=_*F,T=Math.sqrt(2),$=2*T/Math.PI,J=Math.cos(q),ie=Math.sqrt(1+J*Math.cos(R));return{x:J*Math.sin(R)*2*T/ie/$/F,y:Math.sin(q)*T/ie/$/F}};case 2:return(m,_)=>({x:m,y:Math.log(Math.tan((Math.PI/2+_/180*Math.PI)/2))});case 3:return(m,_)=>({x:m*Math.cos(_/180*Math.PI),y:_});case 4:return(m,_)=>({x:m*(2*Math.cos(2*_/180*Math.PI/3)-1),y:180*Math.sin(_/180*Math.PI/3)})}}recalculateRange(m){this.projection=m||0,2==this.projection&&(this.scale_ymin<=-90||this.scale_ymax>=90)&&(console.warn(`Mercator Projection: Latitude out of range ${this.scale_ymin} ${this.scale_ymax}`),this.projection=0);let _=this.getProjectionFunc();if(!_)return;let F=[_(this.scale_xmin,this.scale_ymin),_(this.scale_xmin,this.scale_ymax),_(this.scale_xmax,this.scale_ymax),_(this.scale_xmax,this.scale_ymin)];this.scale_xmin<0&&this.scale_xmax>0&&(F.push(_(0,this.scale_ymin)),F.push(_(0,this.scale_ymax))),this.scale_ymin<0&&this.scale_ymax>0&&(F.push(_(this.scale_xmin,0)),F.push(_(this.scale_xmax,0))),this.original_xmin=this.scale_xmin,this.original_xmax=this.scale_xmax,this.original_ymin=this.scale_ymin,this.original_ymax=this.scale_ymax,this.scale_xmin=this.scale_xmax=F[0].x,this.scale_ymin=this.scale_ymax=F[0].y;for(let R=1;R<F.length;++R)this.scale_xmin=Math.min(this.scale_xmin,F[R].x),this.scale_xmax=Math.max(this.scale_xmax,F[R].x),this.scale_ymin=Math.min(this.scale_ymin,F[R].y),this.scale_ymax=Math.max(this.scale_ymax,F[R].y)}setAxesRanges(m,_,F,R,q,T,$,J,ie,Me){if(this.ranges_set=!0,this.xaxis=m,this.xmin=_,this.xmax=F,this.yaxis=R,this.ymin=q,this.ymax=T,this.zaxis=$,this.zmin=J,this.zmax=ie,Me?.check_pad_range){delete Me.check_pad_range;let de=Me.getDimension();this.applyAxisZoom("x"),de>1&&this.applyAxisZoom("y"),de>2&&this.applyAxisZoom("z")}Me&&!Me._checked_zooming&&(Me._checked_zooming=!0,Me.options.minimum!==M.kNoZoom&&(this.zoom_zmin=Me.options.minimum,this.zoom_zmax=this.zmax),Me.options.maximum!==M.kNoZoom&&(this.zoom_zmax=Me.options.maximum,void 0===this.zoom_zmin&&(this.zoom_zmin=this.zmin)))}setAxes2Ranges(m,_,F,R,q,T,$,J){m&&(this.x2axis=_,this.x2min=F,this.x2max=R),q&&(this.y2axis=T,this.y2min=$,this.y2max=J)}getAxis(m){switch(m){case"x":return this.xaxis;case"y":return this.yaxis;case"z":return this.zaxis;case"x2":return this.x2axis;case"y2":return this.y2axis}return null}applyPadUserRange(m,_){if(!m)return;let F=m[`fU${_}min`],R=m[`fU${_}max`],q=1e-7;if("x"==_){if(Math.abs(m.fX1)>q||Math.abs(m.fX2-1)>q){let ie=m.fX2-m.fX1;F=m.fX1+ie*m.fLeftMargin,R=m.fX2-ie*m.fRightMargin}}else if(Math.abs(m.fY1)>q||Math.abs(m.fY2-1)>q){let ie=m.fY2-m.fY1;F=m.fY1+ie*m.fBottomMargin,R=m.fY2-ie*m.fTopMargin}if(F>=R||Math.abs(F)<q&&Math.abs(R-1)<q)return;m[`fLog${_}`]>0&&(F=Math.exp(F*Math.log(10)),R=Math.exp(R*Math.log(10)));let T=_;this.swap_xy&&(T="x"==_?"y":"x");let $=`scale_${T}min`,J=`scale_${T}max`;q=1e-7*(this[J]-this[$]),(Math.abs(F-this[$])>q||Math.abs(R-this[J])>q)&&(this[`zoom_${T}min`]=F,this[`zoom_${T}max`]=R)}applyAxisZoom(m){if(this.zoomChangedInteractive(m))return;this[`zoom_${m}min`]=this[`zoom_${m}max`]=0;const _=this.getAxis(m);_?.TestBit(ye.VO.kAxisRange)&&_.fFirst!==_.fLast&&(_.fFirst>1||_.fLast<_.fNbins)&&(this[`zoom_${m}min`]=_.fFirst>1?_.GetBinLowEdge(_.fFirst):_.fXmin,this[`zoom_${m}max`]=_.fLast<_.fNbins?_.GetBinLowEdge(_.fLast+1):_.fXmax,_.InvertBit(ye.VO.kAxisRange),_.fFirst=1,_.fLast=_.fNbins)}createXY(m){this.cleanXY(),m||(m={ndim:1}),this.swap_xy=m.swap_xy||!1,this.reverse_x=m.reverse_x||!1,this.reverse_y=m.reverse_y||!1,this.logx=this.logy=0;let _=this.getFrameWidth(),F=this.getFrameHeight(),q=this.getPadPainter().getRootPad();if(this.scale_xmin=this.xmin,this.scale_xmax=this.xmax,this.scale_ymin=this.ymin,this.scale_ymax=this.ymax,m.extra_y_space&&((this.swap_xy?q.fLogx:q.fLogy)&&this.scale_ymax>0?this.scale_ymax=Math.exp(1.1*Math.log(this.scale_ymax)):this.scale_ymax+=.1*(this.scale_ymax-this.scale_ymin)),m.check_pad_range&&(this.applyAxisZoom("x"),m.ndim>1&&this.applyAxisZoom("y"),m.ndim>2&&this.applyAxisZoom("z"),"pad_range"===m.check_pad_range)){let T=this.getCanvPainter();(!T||!T.online_canvas)&&(this.applyPadUserRange(q,"x"),this.applyPadUserRange(q,"y"))}m.zoom_ymin!=m.zoom_ymax&&this.zoom_ymin==this.zoom_ymax&&!this.zoomChangedInteractive("y")&&(this.zoom_ymin=m.zoom_ymin,this.zoom_ymax=m.zoom_ymax),this.zoom_xmin!=this.zoom_xmax&&(this.scale_xmin=this.zoom_xmin,this.scale_xmax=this.zoom_xmax),this.zoom_ymin!=this.zoom_ymax&&(this.scale_ymin=this.zoom_ymin,this.scale_ymax=this.zoom_ymax),this.recalculateRange(m.Proj),this.x_handle=new je.z4(this.getDom(),this.xaxis,!0),this.x_handle.setPadName(this.getPadName()),this.x_handle.setHistPainter(m.hist_painter,"x"),this.x_handle.configureAxis("xaxis",this.xmin,this.xmax,this.scale_xmin,this.scale_xmax,this.swap_xy,this.swap_xy?[0,F]:[0,_],{reverse:this.reverse_x,log:this.swap_xy?q.fLogy:q.fLogx,symlog:this.swap_xy?m.symlog_y:m.symlog_x,logcheckmin:this.swap_xy,logminfactor:1e-4}),this.x_handle.assignFrameMembers(this,"x"),this.y_handle=new je.z4(this.getDom(),this.yaxis,!0),this.y_handle.setPadName(this.getPadName()),this.y_handle.setHistPainter(m.hist_painter,"y"),this.y_handle.configureAxis("yaxis",this.ymin,this.ymax,this.scale_ymin,this.scale_ymax,!this.swap_xy,this.swap_xy?[0,_]:[0,F],{reverse:this.reverse_y,log:this.swap_xy?q.fLogx:q.fLogy,symlog:this.swap_xy?m.symlog_x:m.symlog_y,logcheckmin:m.ndim<2||this.swap_xy,log_min_nz:m.ymin_nz&&m.ymin_nz<.01*this.ymax?.3*m.ymin_nz:0,logminfactor:3e-4}),this.y_handle.assignFrameMembers(this,"y"),this.setRootPadRange(q)}createXY2(m){m||(m={}),this.reverse_x2=m.reverse_x||!1,this.reverse_y2=m.reverse_y||!1,this.logx2=this.logy2=0;let _=this.getFrameWidth(),F=this.getFrameHeight(),q=this.getPadPainter().getRootPad();m.second_x&&(this.scale_x2min=this.x2min,this.scale_x2max=this.x2max),m.second_y&&(this.scale_y2min=this.y2min,this.scale_y2max=this.y2max),m.extra_y_space&&m.second_y&&((this.swap_xy?q.fLogx:q.fLogy)&&this.scale_y2max>0?this.scale_y2max=Math.exp(1.1*Math.log(this.scale_y2max)):this.scale_y2max+=.1*(this.scale_y2max-this.scale_y2min)),this.zoom_x2min!=this.zoom_x2max&&m.second_x&&(this.scale_x2min=this.zoom_x2min,this.scale_x2max=this.zoom_x2max),this.zoom_y2min!=this.zoom_y2max&&m.second_y&&(this.scale_y2min=this.zoom_y2min,this.scale_y2max=this.zoom_y2max),m.second_x&&(this.x2_handle=new je.z4(this.getDom(),this.x2axis,!0),this.x2_handle.setPadName(this.getPadName()),this.x2_handle.setHistPainter(m.hist_painter,"x"),this.x2_handle.configureAxis("x2axis",this.x2min,this.x2max,this.scale_x2min,this.scale_x2max,this.swap_xy,this.swap_xy?[0,F]:[0,_],{reverse:this.reverse_x2,log:this.swap_xy?q.fLogy:q.fLogx,logcheckmin:this.swap_xy,logminfactor:1e-4}),this.x2_handle.assignFrameMembers(this,"x2")),m.second_y&&(this.y2_handle=new je.z4(this.getDom(),this.y2axis,!0),this.y2_handle.setPadName(this.getPadName()),this.y2_handle.setHistPainter(m.hist_painter,"y"),this.y2_handle.configureAxis("y2axis",this.y2min,this.y2max,this.scale_y2min,this.scale_y2max,!this.swap_xy,this.swap_xy?[0,_]:[0,F],{reverse:this.reverse_y2,log:this.swap_xy?q.fLogx:q.fLogy,logcheckmin:m.ndim<2||this.swap_xy,log_min_nz:m.ymin_nz&&m.ymin_nz<.01*this.y2max?.3*m.ymin_nz:0,logminfactor:3e-4}),this.y2_handle.assignFrameMembers(this,"y2"))}getGrFuncs(m,_){let F=m&&this.grx2,R=_&&this.gry2;return F||R?{use_x2:F,grx:F?this.grx2:this.grx,logx:this.logx,x_handle:F?this.x2_handle:this.x_handle,scale_xmin:F?this.scale_x2min:this.scale_xmin,scale_xmax:F?this.scale_x2max:this.scale_xmax,use_y2:R,gry:R?this.gry2:this.gry,logy:this.logy,y_handle:R?this.y2_handle:this.y_handle,scale_ymin:R?this.scale_y2min:this.scale_ymin,scale_ymax:R?this.scale_y2max:this.scale_ymax,swap_xy:this.swap_xy,fp:this,revertAxis(q,T){return"x"==q&&this.use_x2&&(q="x2"),"y"==q&&this.use_y2&&(q="y2"),this.fp.revertAxis(q,T)},axisAsText(q,T){return"x"==q&&this.use_x2&&(q="x2"),"y"==q&&this.use_y2&&(q="y2"),this.fp.axisAsText(q,T)}}:this}setRootPadRange(m,_){if(!m||!this.ranges_set)return;_?(m.fUxmin=m.fUymin=-.9,m.fUxmax=m.fUymax=.9):(m.fLogx=this.swap_xy?this.logy:this.logx,m.fUxmin=m.fLogx?Math.log10(this.scale_xmin):this.scale_xmin,m.fUxmax=m.fLogx?Math.log10(this.scale_xmax):this.scale_xmax,m.fLogy=this.swap_xy?this.logx:this.logy,m.fUymin=m.fLogy?Math.log10(this.scale_ymin):this.scale_ymin,m.fUymax=m.fLogy?Math.log10(this.scale_ymax):this.scale_ymax);let F=m.fUxmax-m.fUxmin,R=1-m.fLeftMargin-m.fRightMargin,q=m.fUymax-m.fUymin,T=1-m.fBottomMargin-m.fTopMargin;R<=0&&(R=.01),T<=0&&(T=.01),m.fX1=m.fUxmin-F/R*m.fLeftMargin,m.fX2=m.fUxmax+F/R*m.fRightMargin,m.fY1=m.fUymin-q/T*m.fBottomMargin,m.fY2=m.fUymax+q/T*m.fTopMargin}drawGrids(){let m=this.getFrameSvg().select(".grid_layer");m.selectAll(".xgrid").remove(),m.selectAll(".ygrid").remove();let F=this.getPadPainter()?.getRootPad(!0),R=this.getFrameHeight(),q=this.getFrameWidth(),T=M.gStyle.fGridStyle;if(F?.fGridx&&this.x_handle){let $="";for(let Me=0;Me<this.x_handle.ticks.length;++Me)$+=this.swap_xy?`M0,${this.x_handle.ticks[Me]}h${q}`:`M${this.x_handle.ticks[Me]},0v${R}`;let J=M.gStyle.fGridColor>0?M.gStyle.fGridColor:this.getAxis("x")?this.getAxis("x").fAxisColor:1,ie=this.getColor(J)||"black";$&&m.append("svg:path").attr("class","xgrid").attr("d",$).style("stroke",ie).style("stroke-width",M.gStyle.fGridWidth).style("stroke-dasharray",(0,Be.p)(T))}if(F?.fGridy&&this.y_handle){let $="";for(let Me=0;Me<this.y_handle.ticks.length;++Me)$+=this.swap_xy?`M${this.y_handle.ticks[Me]},0v${R}`:`M0,${this.y_handle.ticks[Me]}h${q}`;let J=M.gStyle.fGridColor>0?M.gStyle.fGridColor:this.getAxis("y")?this.getAxis("y").fAxisColor:1,ie=this.getColor(J)||"black";$&&m.append("svg:path").attr("class","ygrid").attr("d",$).style("stroke",ie).style("stroke-width",M.gStyle.fGridWidth).style("stroke-dasharray",(0,Be.p)(T))}}axisAsText(m,_){let F=this[m+"_handle"];return F?F.axisAsText(_,M.settings[m.toUpperCase()+"ValuesFormat"]):_.toPrecision(4)}hasDrawnAxes(m,_){return!m&&!_&&this.axes_drawn}drawAxes(m,_,F,R,q,T){var $=this;return(0,ze.Z)(function*(){if($.cleanAxesDrawings(),$.xmin==$.xmax||$.ymin==$.ymax)return!1;void 0===R&&(R=0);let J=$.getFrameSvg().select(".axis_layer"),ie=$.getFrameWidth(),Me=$.getFrameHeight(),de=$.getPadPainter(),fe=de.getRootPad(!0);$.x_handle.invert_side=R>=10,$.x_handle.lbls_both_sides=!$.x_handle.invert_side&&fe&&fe.fTickx>1,$.x_handle.has_obstacle=q,$.y_handle.invert_side=R%10==1,$.y_handle.lbls_both_sides=!$.y_handle.invert_side&&fe&&fe.fTicky>1,$.y_handle.has_obstacle=T;let I=$.swap_xy?$.y_handle:$.x_handle,U=$.swap_xy?$.x_handle:$.y_handle;(!_||!F)&&de._fast_drawing&&(_=F=!0);let z=Promise.resolve(!0);if(!_||!F){let le=!m&&M.settings.CanAdjustFrame,D=I.drawAxis(J,ie,Me,I.invert_side?void 0:`translate(0,${Me})`,fe?.fTickx?-Me:0,_,void 0,!1),oe=U.drawAxis(J,ie,Me,U.invert_side?`translate(${ie})`:void 0,fe?.fTicky?ie:0,F,U.invert_side?0:$._frame_x,le);z=Promise.all([D,oe]).then(()=>{if($.drawGrids(),!le)return;let _e=0,Ee=U.position;return-.2*ie<Ee&&Ee<0?(_e=-Ee/ie+.001,$.shrink_frame_left+=_e):Ee>0&&Ee<.3*ie&&$.shrink_frame_left>0&&Ee/ie>$.shrink_frame_left&&(_e=-$.shrink_frame_left,$.shrink_frame_left=0),_e?($.shrinkFrame(_e,0),$.redraw().then(()=>$.drawAxes(!0))):void 0})}return z.then(()=>(m||($.axes_drawn=!0),!0))})()}drawAxes2(m,_){let F=this.getFrameSvg().select(".axis_layer"),R=this.getFrameWidth(),q=this.getFrameHeight(),T=this.getPadPainter(),$=T.getRootPad(!0);m&&(this.x2_handle.invert_side=!0,this.x2_handle.lbls_both_sides=!1,this.x2_handle.has_obstacle=!1),_&&(this.y2_handle.invert_side=!0,this.y2_handle.lbls_both_sides=!1);let Me,de,J=this.swap_xy?this.y2_handle:this.x2_handle,ie=this.swap_xy?this.x2_handle:this.y2_handle;return(J||ie)&&T._fast_drawing&&(J=ie=null),J&&(Me=J.drawAxis(F,R,q,J.invert_side?void 0:`translate(0,${q})`,$?.fTickx?-q:0,!1,void 0,!1)),ie&&(de=ie.drawAxis(F,R,q,ie.invert_side?`translate(${R})`:void 0,$?.fTicky?R:0,!1,ie.invert_side?0:this._frame_x,!1)),Promise.all([Me,de])}updateAttributes(m){let _=this.getPadPainter(),F=_?.getRootPad(!0),R=this.getObject();(void 0===this.fX1NDC||m&&!this.modified_NDC)&&Object.assign(this,F?{fX1NDC:F.fLeftMargin,fX2NDC:1-F.fRightMargin,fY1NDC:F.fBottomMargin,fY2NDC:1-F.fTopMargin}:M.settings.FrameNDC),void 0===this.fillatt&&(this.createAttFill(R?{attr:R}:F&&F.fFrameFillColor?{pattern:F.fFrameFillStyle,color:F.fFrameFillColor}:F?{attr:F}:{pattern:1001,color:0}),!R&&this.fillatt.empty()&&_?.iscan?this.fillatt.setSolidColor("white"):4e3===F?.fFillStyle&&!this.fillatt.empty()&&this.fillatt.setOpacity(0)),this.createAttLine(R||void 0===F?.fFrameLineColor?{attr:R,color:"black"}:{color:F.fFrameLineColor,width:F.fFrameLineWidth,style:F.fFrameLineStyle})}sizeChanged(){let m=this.getPadPainter()?.getRootPad(!0);m&&(m.fLeftMargin=this.fX1NDC,m.fRightMargin=1-this.fX2NDC,m.fBottomMargin=this.fY1NDC,m.fTopMargin=1-this.fY2NDC,this.setRootPadRange(m)),this.interactiveRedraw("pad","frame")}cleanXY(){delete this.grx,delete this.gry,delete this.grz,this.x_handle&&(this.x_handle.cleanup(),delete this.x_handle),this.y_handle&&(this.y_handle.cleanup(),delete this.y_handle),this.z_handle&&(this.z_handle.cleanup(),delete this.z_handle),delete this.grx2,delete this.gry2,this.x2_handle&&(this.x2_handle.cleanup(),delete this.x2_handle),this.y2_handle&&(this.y2_handle.cleanup(),delete this.y2_handle)}cleanAxesDrawings(){this.x_handle&&this.x_handle.removeG(),this.y_handle&&this.y_handle.removeG(),this.z_handle&&this.z_handle.removeG(),this.x2_handle&&this.x2_handle.removeG(),this.y2_handle&&this.y2_handle.removeG();let m=this.getG();m&&(m.select(".grid_layer").selectAll("*").remove(),m.select(".axis_layer").selectAll("*").remove()),this.axes_drawn=!1}cleanFrameDrawings(){(0,M.isFunc)(this.create3DScene)&&this.create3DScene(-1),this.cleanAxesDrawings(),this.cleanXY(),this.ranges_set=!1,this.xmin=this.xmax=0,this.ymin=this.ymax=0,this.zmin=this.zmax=0,this.zoom_xmin=this.zoom_xmax=0,this.zoom_ymin=this.zoom_ymax=0,this.zoom_zmin=this.zoom_zmax=0,this.scale_xmin=this.scale_xmax=0,this.scale_ymin=this.scale_ymax=0,this.scale_zmin=this.scale_zmax=0,this.draw_g&&(this.draw_g.select(".main_layer").selectAll("*").remove(),this.draw_g.select(".upper_layer").selectAll("*").remove()),this.xaxis=null,this.yaxis=null,this.zaxis=null,this.draw_g&&(this.draw_g.selectAll("*").remove(),this.draw_g.on("mousedown",null).on("dblclick",null).on("wheel",null).on("contextmenu",null).property("interactive_set",null),this.draw_g.remove()),delete this.draw_g,this.keys_handler&&(window.removeEventListener("keydown",this.keys_handler,!1),this.keys_handler=null)}cleanup(){this.cleanFrameDrawings(),delete this._click_handler,delete this._dblclick_handler,delete this.enabledKeys;let m=this.getPadPainter();m?.frame_painter_ref===this&&delete m.frame_painter_ref,super.cleanup()}redraw(){let m=this.getPadPainter();m&&(m.frame_painter_ref=this),this.updateAttributes();let ie,Me,de,_=m?.getPadRect()??{width:10,height:10},F=Math.round(_.width*this.fX1NDC),R=Math.round(_.width*(this.fX2NDC-this.fX1NDC)),q=Math.round(_.height*(1-this.fY2NDC)),T=Math.round(_.height*(this.fY2NDC-this.fY1NDC)),$=!1,J=!1;return m?.options&&(m.options.RotateFrame&&($=!0),m.options.FixFrame&&(J=!0)),$?(ie=`rotate(-90,${F},${q}) translate(${F-T},${q})`,[R,T]=[T,R]):ie=`translate(${F},${q})`,this._frame_x=F,this._frame_y=q,this._frame_width=R,this._frame_height=T,this._frame_rotate=$,this._frame_fixpos=J,this.mode3d||(this.draw_g=this.getFrameSvg(),this.draw_g.empty()?(this.draw_g=this.getLayerSvg("primitives_layer").append("svg:g").attr("class","root_frame"),(0,M.isBatchMode)()||this.draw_g.append("svg:title").text(""),Me=this.draw_g.append("svg:path"),this.draw_g.append("svg:g").attr("class","grid_layer"),de=this.draw_g.append("svg:svg").attr("class","main_layer").attr("x",0).attr("y",0).attr("overflow","hidden"),this.draw_g.append("svg:g").attr("class","axis_layer"),this.draw_g.append("svg:g").attr("class","upper_layer")):(Me=this.draw_g.select("path"),de=this.draw_g.select(".main_layer")),this.axes_drawn=!1,this.draw_g.attr("transform",ie),Me.attr("d",`M0,0H${R}V${T}H0Z`).call(this.fillatt.func).call(this.lineatt.func),de.attr("width",R).attr("height",T).attr("viewBox",`0 0 ${R} ${T}`),(0,M.isBatchMode)()||(Me.style("pointer-events","visibleFill"),x.assign(this),this.addBasicInteractivity())),this}changeAxisLog(m,_){let F=this.getPadPainter(),R=F?.getRootPad(!0);if(!R)return;F._interactively_changed=!0;let q="fLog"+m;!R[q]&&(this.swap_xy&&"x"===m?m="y":this.swap_xy&&"y"===m&&(m="x"),"labels"===this[m+"_handle"]?.kind)||(("toggle"==_||void 0===_)&&(_=R[q]?0:1),R[q]=_,this.interactiveRedraw("pad","log"+m))}toggleAxisLog(m){this.changeAxisLog(m,"toggle")}fillContextMenu(m,_,F){let R=this.getMainPainter(!0),q=this.getPadPainter(),T=q?.getRootPad(!0);if("x"==_||"y"==_||"z"==_||"x2"==_||"y2"==_){let J=F||this[_+"axis"];if(m.add("header: "+_.toUpperCase()+" axis"),m.add("Unzoom",()=>this.unzoom(_)),T&&(m.add("sub:SetLog "+_[0]),m.addchk(0==T["fLog"+_[0]],"linear",()=>this.changeAxisLog(_[0],0)),m.addchk(1==T["fLog"+_[0]],"log",()=>this.changeAxisLog(_[0],1)),m.addchk(2==T["fLog"+_[0]],"log2",()=>this.changeAxisLog(_[0],2)),m.add("endsub:")),m.addchk(J.TestBit(ye.VO.kMoreLogLabels),"More log",ie=>{J.InvertBit(ye.VO.kMoreLogLabels),R?.snapid&&1==_.length?R.interactiveRedraw("pad",`exec:SetMoreLogLabels(${ie})`,_):this.interactiveRedraw("pad")}),m.addchk(J.TestBit(ye.VO.kNoExponent),"No exponent",ie=>{J.InvertBit(ye.VO.kNoExponent),R?.snapid&&1==_.length?R.interactiveRedraw("pad",`exec:SetNoExponent(${ie})`,_):this.interactiveRedraw("pad")}),"z"===_&&R?.options?.Zscale&&(0,M.isFunc)(R?.fillPaletteMenu)&&R.fillPaletteMenu(m),J){let ie=this[_+"_handle"];"labels"==ie?.kind&&J.fNbins>20&&m.add("Find label",()=>m.input("Label id").then(Me=>{if(Me)for(let de=0;de<J.fNbins;++de)if(ie.formatLabels(de)==Me)return this.zoom(_,Math.max(0,de-4),Math.min(J.fNbins,de+5))})),m.addTAxisMenu(ye.VO,R||this,J,_)}return!0}const $=0==m.size();return m.add($?"header:Frame":"separator"),this.zoom_xmin!==this.zoom_xmax&&m.add("Unzoom X",()=>this.unzoom("x")),this.zoom_ymin!==this.zoom_ymax&&m.add("Unzoom Y",()=>this.unzoom("y")),this.zoom_zmin!==this.zoom_zmax&&m.add("Unzoom Z",()=>this.unzoom("z")),this.zoom_x2min!==this.zoom_x2max&&m.add("Unzoom X2",()=>this.unzoom("x2")),this.zoom_y2min!==this.zoom_y2max&&m.add("Unzoom Y2",()=>this.unzoom("y2")),m.add("Unzoom all",()=>this.unzoom("all")),T&&(m.addchk(T.fLogx,"SetLogx",()=>this.toggleAxisLog("x")),m.addchk(T.fLogy,"SetLogy",()=>this.toggleAxisLog("y")),(0,M.isFunc)(R?.getDimension)&&R.getDimension()>1&&m.addchk(T.fLogz,"SetLogz",()=>this.toggleAxisLog("z")),m.add("separator")),m.addchk(this.isTooltipAllowed(),"Show tooltips",()=>this.setTooltipAllowed("toggle")),m.addAttributesMenu(this,$?"":"Frame "),m.add("Save to gStyle",function(){M.gStyle.fPadBottomMargin=this.fY1NDC,M.gStyle.fPadTopMargin=1-this.fY2NDC,M.gStyle.fPadLeftMargin=this.fX1NDC,M.gStyle.fPadRightMargin=1-this.fX2NDC,this.fillatt&&this.fillatt.saveToStyle("fFrameFillColor","fFrameFillStyle"),this.lineatt&&this.lineatt.saveToStyle("fFrameLineColor","fFrameLineWidth","fFrameLineStyle")},"Store frame position and graphical attributes to gStyle"),m.add("separator"),m.add("Save as frame.png",()=>q.saveAs("png","frame","frame.png")),m.add("Save as frame.svg",()=>q.saveAs("svg","frame","frame.svg")),!0}fillWebObjectOptions(m){if(!m){if(!this.snapid)return null;m={_typename:"TWebObjectOptions",snapid:this.snapid.toString(),opt:this.getDrawOpt(),fcust:"",fopt:[]}}return m.fcust="frame",m.fopt=[this.scale_xmin||0,this.scale_ymin||0,this.scale_xmax||0,this.scale_ymax||0],m}getFrameWidth(){return this._frame_width||0}getFrameHeight(){return this._frame_height||0}getFrameRect(){return{x:this._frame_x||0,y:this._frame_y||0,width:this.getFrameWidth(),height:this.getFrameHeight(),transform:this.draw_g?this.draw_g.attr("transform"):"",hint_delta_x:0,hint_delta_y:0}}configureUserClickHandler(m){this._click_handler=(0,M.isFunc)(m)?m:null}configureUserDblclickHandler(m){this._dblclick_handler=(0,M.isFunc)(m)?m:null}zoom(m,_,F,R,q,T){var $=this;return(0,ze.Z)(function*(){if($.projection)return!1;"x"===m?(m=_,_=F,F=void 0):"y"===m?(R=F,F=_,m=_=void 0):"z"===m&&(q=_,T=F,m=_=F=void 0);let J=m!==_,ie=F!==R,Me=q!==T,de=!1,fe=!1,I=!1;if(J){let z=0;m<=$.xmin&&(m=$.xmin,z++),_>=$.xmax&&(_=$.xmax,z++),2===z&&(J=!1,de=!0)}else de=m===_&&0===m;if(ie){let z=0;F<=$.ymin&&(F=$.ymin,z++),R>=$.ymax&&(R=$.ymax,z++),2===z&&(ie=!1,fe=!0)}else fe=F===R&&0===F;if(Me){let z=0;q<=$.zmin&&(q=$.zmin,z++),T>=$.zmax&&(T=$.zmax,z++),2===z&&(Me=!1,I=!0)}else I=q===T&&0===q;let U=!1;return(J||ie||Me)&&$.forEachPainter(z=>{(0,M.isFunc)(z.canZoomInside)&&(J&&z.canZoomInside("x",m,_)&&($.zoom_xmin=m,$.zoom_xmax=_,U=!0,J=!1),ie&&z.canZoomInside("y",F,R)&&($.zoom_ymin=F,$.zoom_ymax=R,U=!0,ie=!1),Me&&z.canZoomInside("z",q,T)&&($.zoom_zmin=q,$.zoom_zmax=T,U=!0,Me=!1))}),(de||fe||I)&&(de&&($.zoom_xmin!==$.zoom_xmax&&(U=!0),$.zoom_xmin=$.zoom_xmax=0),fe&&($.zoom_ymin!==$.zoom_ymax&&(U=!0),$.zoom_ymin=$.zoom_ymax=0),I&&($.zoom_zmin!==$.zoom_zmax&&(U=!0),$.zoom_zmin=$.zoom_zmax=0),U||$.getPadPainter()?.painters?.forEach(z=>{(0,M.isFunc)(z?.unzoomUserRange)&&z.unzoomUserRange(de,fe,I)&&(U=!0)})),!!U&&$.interactiveRedraw("pad","zoom").then(()=>!0)})()}zoomSingle(m,_,F){var R=this;return(0,ze.Z)(function*(){if(R.projection||!R[m+"_handle"])return!1;let q=_!==F,T=!1;if(q){let J=0;_<=R[m+"min"]&&(_=R[m+"min"],J++),F>=R[m+"max"]&&(F=R[m+"max"],J++),2===J&&(q=!1,T=!0)}else T=_===F&&0===_;let $=!1;return q&&R.forEachPainter(J=>{(0,M.isFunc)(J.canZoomInside)&&q&&J.canZoomInside(m[0],_,F)&&(R["zoom_"+m+"min"]=_,R["zoom_"+m+"max"]=F,$=!0,q=!1)}),T&&(R["zoom_"+m+"min"]!==R["zoom_"+m+"max"]&&($=!0),R["zoom_"+m+"min"]=R["zoom_"+m+"max"]=0),!!$&&R.interactiveRedraw("pad","zoom").then(()=>!0)})()}isAxisZoomed(m){return this["zoom_"+m+"min"]!==this["zoom_"+m+"max"]}unzoom(m,_,F){var R=this;return(0,ze.Z)(function*(){return"all"==m?R.unzoom("x2").then(()=>R.unzoom("y2")).then(()=>R.unzoom("xyz")):"x2"==m||"y2"==m?R.zoomSingle(m,0,0).then(q=>(q&&R.zoomChangedInteractive(m,"unzoom"),q)):(typeof m>"u"?m=_=F=!0:(0,M.isStr)(m)&&(F=m.indexOf("z")>=0,_=m.indexOf("y")>=0,m=m.indexOf("x")>=0),R.zoom(m?0:void 0,m?0:void 0,_?0:void 0,_?0:void 0,F?0:void 0,F?0:void 0).then(q=>(q&&m&&R.zoomChangedInteractive("x","unzoom"),q&&_&&R.zoomChangedInteractive("y","unzoom"),q&&F&&R.zoomChangedInteractive("z","unzoom"),q)))})()}zoomChangedInteractive(m,_){if("reset"==m)return void(this.zoom_changed_x=this.zoom_changed_y=this.zoom_changed_z=void 0);if(!m||"any"==m)return this.zoom_changed_x||this.zoom_changed_y||this.zoom_changed_z;if("x"!==m&&"y"!==m&&"z"!==m)return;let F="zoom_changed_"+m;if(void 0===_)return!!this[F];"unzoom"!==_?_&&(this[F]=!0):this[F]=void 0===this[F]}revertAxis(m,_){let F=this[m+"_handle"];return F?F.revertPoint(_):0}showAxisStatus(m,_){let F=this.getAxis(m),R=m,q=M.clTAxis,T=(0,L.cx)(_,this.getFrameSvg().node()),$="x"==m?0:1;F&&(R=F.fName,q=F.fTitle||`TAxis object for ${m}`),this.swap_xy&&($=1-$);let J=this.revertAxis(m,T[$]);this.showObjectStatus(R,q,m+" : "+this.axisAsText(m,J),T[0]+","+T[1])}addKeysHandler(){(0,M.isBatchMode)()||(x.assign(this),this.addFrameKeysHandler())}addInteractivity(m){return!((0,M.isBatchMode)()||!M.settings.Zooming&&!M.settings.ContextMenu)&&(x.assign(this),this.addFrameInteractivity(m))}}},3834:($r,At,Ce)=>{"use strict";Ce.r(At),Ce.d(At,{PadButtonsHandler:()=>ue,TPadPainter:()=>Z,clTButton:()=>ce});var ze=Ce(5835),M=Ce(9542),L=Ce(2253),ye=Ce(3038),Be=Ce(3675),je=Ce(6458),Ze=Ce(6367),Ie=Ce(4383),He=Ce(9622),Oe=Ce(2487);const ce="TButton";function Y(O,P){return Math.round((P||1)*(O.iscan||!O.has_canvas?16:12))}function K(O,P){let x=O.getLayerSvg("btns_layer",O.this_pad_name),p=x.select("[name='Toggle']");if(p.empty())return;let w=p.property("buttons_state");p.property("timout_handler")&&("timeout"!==P&&clearTimeout(p.property("timout_handler")),p.property("timout_handler",null));let m=!1;switch(P){case"enable":m=!0;break;case"enterbtn":return;case"timeout":m=!1;break;case"toggle":w=!w,p.property("buttons_state",w),m=w;break;case"disable":case"leavebtn":return void(w||p.property("timout_handler",setTimeout(()=>K(O,"timeout"),1200)))}x.selectAll("svg").each(function(){this!==p.node()&&(0,L.Ys)(this).style("display",m?"":"none")})}let ue={alignButtons(O,P,x){let m,_,p=Y(this,1.25),w=(O.property("nextx")||0)+p;O.property("vertical")?(m=O.property("leftside")?2:P-p,_=x-w):(m=O.property("leftside")?2:P-w,_=x-p),O.attr("transform",`translate(${m},${_})`)},findPadButton(O){let P=this.getLayerSvg("btns_layer",this.this_pad_name),x="";return P.empty()||P.selectAll("svg").each(function(){(0,L.Ys)(this).attr("key")===O&&(x=(0,L.Ys)(this).attr("name"))}),x},removePadButtons(){let O=this.getLayerSvg("btns_layer",this.this_pad_name);O.empty()||(O.selectAll("*").remove(),O.property("nextx",null))},showPadButtons(){let O=this.getLayerSvg("btns_layer",this.this_pad_name);if(O.empty()||(O.selectAll("*").remove(),!this._buttons))return;let x,P=this.iscan||!this.has_canvas,p=O.property("leftside")?Y(this,1.25):0;if(this._fast_drawing)x=He.KL.createSVG(O,He.KL.circle,Y(this),"enlargePad"),x.attr("name","Enlarge").attr("x",0).attr("y",0).on("click",m=>this.clickPadButton("enlargePad",m));else{x=He.KL.createSVG(O,He.KL.rect,Y(this),"Toggle tool buttons"),x.attr("name","Toggle").attr("x",0).attr("y",0).property("buttons_state","popup"!==M.settings.ToolBar).on("click",()=>K(this,"toggle")).on("mouseenter",()=>K(this,"enable")).on("mouseleave",()=>K(this,"disable"));for(let m=0;m<this._buttons.length;++m){let _=this._buttons[m],F=_.btn;(0,M.isStr)(F)&&(F=He.KL[F]),F||(F=He.KL.circle);let R=He.KL.createSVG(O,F,Y(this),_.tooltip+(P?"":" on pad "+this.this_pad_name)+(_.keyname?" (keyshortcut "+_.keyname+")":""));O.property("vertical")?R.attr("x",0).attr("y",p):R.attr("x",p).attr("y",0),R.attr("name",_.funcname).style("display",x.property("buttons_state")?"":"none").on("mouseenter",()=>K(this,"enterbtn")).on("mouseleave",()=>K(this,"leavebtn")),_.keyname&&R.attr("key",_.keyname),R.on("click",q=>this.clickPadButton(_.funcname,q)),p+=Y(this,1.25)}}O.property("nextx",p),this.alignButtons(O,this.getPadWidth(),this.getPadHeight()),O.property("vertical")?x.attr("y",p):O.property("leftside")||x.attr("x",p)},assign(O){Object.assign(O,this)}};class Z extends je.tK{constructor(P,x,p){super(P,x),this.pad=x,this.iscan=p,this.this_pad_name="",!this.iscan&&x?.fName&&(this.this_pad_name=x.fName.replace(" ","_"),(!new RegExp("^[A-Za-z][A-Za-z0-9_]*$").test(this.this_pad_name)||"button"==this.this_pad_name&&x._typename==ce)&&(this.this_pad_name="jsroot_pad_"+M.internals.id_counter++)),this.painters=[],this.has_canvas=!0,this.forEachPainter=this.forEachPainterInPad}isRoot6(){return!0}svg_this_pad(){return this.getPadSvg(this.this_pad_name)}getMainPainter(){return this.main_painter_ref||null}setMainPainter(P,x){(!this.main_painter_ref||x)&&(this.main_painter_ref=P)}cleanup(){this._doing_draw&&console.error("pad drawing is not completed when cleanup is called"),this.painters.forEach(x=>x.cleanup());let P=this.svg_this_pad();P.empty()||(P.property("pad_painter",null),this.iscan||P.remove()),delete this.main_painter_ref,delete this.frame_painter_ref,delete this.pads_cache,delete this.custom_palette,delete this._pad_x,delete this._pad_y,delete this._pad_width,delete this._pad_height,delete this._doing_draw,delete this._interactively_changed,this.painters=[],this.pad=null,this.this_pad_name=void 0,this.has_canvas=!1,(0,je.O5)({pp:this,active:!1}),super.cleanup()}getFramePainter(){return this.frame_painter_ref}getPadWidth(){return this._pad_width||0}getPadHeight(){return this._pad_height||0}getPadRect(){return{x:this._pad_x||0,y:this._pad_y||0,width:this.getPadWidth(),height:this.getPadHeight()}}getFrameRect(){let P=this.getFramePainter();if(P)return P.getFrameRect();let x=this.getPadWidth(),p=this.getPadHeight(),w={};return this.pad?(w.szx=Math.round(Math.max(0,.5-Math.max(this.pad.fLeftMargin,this.pad.fRightMargin))*x),w.szy=Math.round(Math.max(0,.5-Math.max(this.pad.fBottomMargin,this.pad.fTopMargin))*p)):(w.szx=Math.round(.5*x),w.szy=Math.round(.5*p)),w.width=2*w.szx,w.height=2*w.szy,w.x=Math.round(x/2-w.szx),w.y=Math.round(p/2-w.szy),w.hint_delta_x=w.szx,w.hint_delta_y=w.szy,w.transform=`translate(${w.x},${w.y})`,w}getRootPad(P){return void 0===P||P?this.pad:null}cleanPrimitives(P){if((0,M.isFunc)(P))for(let x=this.painters.length-1;x>=0;--x)P(this.painters[x])&&(this.painters[x].cleanup(),this.painters.splice(x,1))}getCustomPalette(){return this.custom_palette||this.getCanvPainter()?.custom_palette}getNumPainters(){return this.painters.length}forEachPainterInPad(P,x){x||(x="all"),"objects"!=x&&P(this);for(let p=0;p<this.painters.length;++p){let w=this.painters[p];(0,M.isFunc)(w.forEachPainterInPad)?"objects"!=x&&w.forEachPainterInPad(P,x):"pads"!=x&&P(w)}}registerForPadEvents(P){this.pad_events_receiver=P}producePadEvent(P,x,p,w,m){"select"==P&&(0,M.isFunc)(this.selectActivePad)&&this.selectActivePad(x,p,w),(0,M.isFunc)(this.pad_events_receiver)&&this.pad_events_receiver({what:P,padpainter:x,painter:p,position:w,place:m})}selectObjectPainter(P,x,p){let w=this.iscan||!this.has_canvas,m=w?this:this.getCanvPainter();void 0===P&&(P=this),x&&!w&&(x=(0,Be.Yi)(this.svg_this_pad(),x)),(0,je.O5)({pp:this,active:!0}),m?.producePadEvent("select",this,P,x,p)}drawActiveBorder(P,x){if(void 0!==x){if(this.is_active_pad===x)return;this.is_active_pad=x}if(void 0===this.is_active_pad)return;P||(P=this.iscan?this.getCanvSvg().select(".canvas_fillrect"):this.svg_this_pad().select(".root_pad_border"));let p=this.is_active_pad?new Ze.rE({style:1,width:1,color:"red"}):this.lineatt;p||(p=new Ze.rE({color:"none"})),P.call(p.func)}createCanvasSvg(P,x){let F,R,q,p=null,w=null,_=null;if(P>0){if(this._fixed_size)return P>1;if(w=this.getCanvSvg(),w.empty()||(p=w.property("height_factor"),_=this.testMainResize(P,null,p),!_.changed))return!1;(0,M.isBatchMode)()||(F=this.getLayerSvg("btns_layer",this.this_pad_name)),R=this.getLayerSvg("info_layer",this.this_pad_name),q=w.select(".canvas_fillrect")}else{let $=this.selectDom();"static"==$.style("position")&&$.style("position","relative"),w=$.append("svg").attr("class","jsroot root_canvas").property("pad_painter",this).property("current_pad","").property("redraw_by_resize",!1),this.setTopPainter(),(0,M.isBatchMode)()?(w.attr("xmlns","http://www.w3.org/2000/svg"),w.attr("xmlns:xlink","http://www.w3.org/1999/xlink")):this.online_canvas||w.append("svg:title").text("ROOT canvas"),(!(0,M.isBatchMode)()||this.pad.fFillStyle>0)&&(q=w.append("svg:path").attr("class","canvas_fillrect")),(0,M.isBatchMode)()||q.style("pointer-events","visibleFill").on("dblclick",J=>this.enlargePad(J)).on("click",()=>this.selectObjectPainter()).on("mouseenter",()=>this.showObjectStatus()).on("contextmenu",M.settings.ContextMenu?J=>this.padContextMenu(J):null),w.append("svg:g").attr("class","primitives_layer"),R=w.append("svg:g").attr("class","info_layer"),(0,M.isBatchMode)()||(F=w.append("svg:g").attr("class","btns_layer").property("leftside","left"==M.settings.ToolBarSide).property("vertical",M.settings.ToolBarVert)),p=.66,this.pad?.fCw&&this.pad?.fCh&&this.pad?.fCw>0&&(p=this.pad.fCh/this.pad.fCw,(p<.1||p>10)&&(p=.66)),this._fixed_size?($.style("overflow","auto"),_={width:this.pad.fCw,height:this.pad.fCh},(!_.width||!_.height)&&(_=(0,Be.Yo)($))):_=this.testMainResize(2,x,p)}this.createAttFill({attr:this.pad}),_.width<=5||_.height<=5?(w.style("display","none"),console.warn(`Hide canvas while geometry too small w=${_.width} h=${_.height}`),_.width=200,_.height=100):w.style("display",null),w.attr("x",0).attr("y",0).style("position","absolute"),this._fixed_size?w.attr("width",_.width).attr("height",_.height):w.style("width","100%").style("height","100%").style("left",0).style("top",0).style("right",0).style("bottom",0),w.style("filter",M.settings.DarkMode||this.pad?.$dark?"invert(100%)":null),w.attr("viewBox",`0 0 ${_.width} ${_.height}`).attr("preserveAspectRatio","none").property("height_factor",p).property("draw_x",0).property("draw_y",0).property("draw_width",_.width).property("draw_height",_.height),this._pad_x=0,this._pad_y=0,this._pad_width=_.width,this._pad_height=_.height,q&&(q.attr("d",`M0,0H${_.width}V${_.height}H0Z`).call(this.fillatt.func),this.drawActiveBorder(q)),this._fast_drawing=M.settings.SmallPad&&(_.width<M.settings.SmallPad.width||_.height<M.settings.SmallPad.height),this.alignButtons&&F&&this.alignButtons(F,_.width,_.height);let T=R.select(".canvas_date");if(M.gStyle.fOptDate){T.empty()&&(T=R.append("text").attr("class","canvas_date"));let $=new Date,J=Math.round(_.width*M.gStyle.fDateX),ie=Math.round(_.height*(1-M.gStyle.fDateY));!(0,M.isBatchMode)()&&J<25&&(J=25),M.gStyle.fOptDate>1&&$.setTime(1e3*M.gStyle.fOptDate),T.attr("transform",`translate(${J}, ${ie})`).style("text-anchor","start").text($.toLocaleString("en-GB"))}else T.remove();return M.gStyle.fOptFile&&this.getItemName()?this.drawItemNameOnCanvas(this.getItemName()):R.select(".canvas_item").remove(),!0}drawItemNameOnCanvas(P){let x=this.getLayerSvg("info_layer",this.this_pad_name),p=x.select(".canvas_item");if(M.gStyle.fOptFile&&P){p.empty()&&(p=x.append("text").attr("class","canvas_item"));let w=this.getPadRect(),m=Math.round(w.width*(1-M.gStyle.fDateX)),_=Math.round(w.height*(1-M.gStyle.fDateY));p.attr("transform",`translate(${m}, ${_})`).style("text-anchor","end").text(P)}else p.remove()}enlargePad(P){P&&(P.preventDefault(),P.stopPropagation());let x=this.getCanvSvg(),p=x.property("pad_enlarged");if(!this.iscan&&this.has_canvas&&(p||this.hasObjectsToDraw()||this.painters))p?p===this.pad?(this.enlargeMain(!1),x.property("pad_enlarged",null)):console.error("missmatch with pad double click events"):(this.enlargeMain(!0,!0),x.property("pad_enlarged",this.pad));else{if(this._fixed_size||!this.enlargeMain("toggle"))return;"off"==this.enlargeMain("state")&&x.property("pad_enlarged",null)}let w=this._fast_drawing;this.checkResize(!0),this._fast_drawing!=w&&this.showPadButtons()}createPadSvg(P){if(!this.has_canvas)return this.createCanvasSvg(P?2:0),!0;let x=this.getCanvSvg(),p=x.property("draw_width"),w=x.property("draw_height"),m=x.property("pad_enlarged"),_=!(this.pad_draw_disabled||m&&m!==this.pad),F=Math.round(this.pad.fAbsWNDC*p),R=Math.round(this.pad.fAbsHNDC*w),q=Math.round(this.pad.fAbsXlowNDC*p),T=Math.round(w*(1-this.pad.fAbsYlowNDC))-R,$=null,J=null,ie=null;return m===this.pad&&(F=p,R=w,q=T=0),P?($=this.svg_this_pad(),J=$.select(".root_pad_border"),(0,M.isBatchMode)()||(ie=this.getLayerSvg("btns_layer",this.this_pad_name))):($=x.select(".primitives_layer").append("svg:svg").classed("__root_pad_"+this.this_pad_name,!0).attr("pad",this.this_pad_name).property("pad_painter",this),(0,M.isBatchMode)()||$.append("svg:title").text("subpad "+this.this_pad_name),(!(0,M.isBatchMode)()||this.pad.fFillStyle>0||this.pad.fLineStyle>0&&this.pad.fLineColor>0)&&(J=$.append("svg:path").attr("class","root_pad_border")),(0,M.isBatchMode)()||J.style("pointer-events","visibleFill").on("dblclick",Me=>this.enlargePad(Me)).on("click",()=>this.selectObjectPainter()).on("mouseenter",()=>this.showObjectStatus()).on("contextmenu",M.settings.ContextMenu?Me=>this.padContextMenu(Me):null),$.append("svg:g").attr("class","primitives_layer"),(0,M.isBatchMode)()||(ie=$.append("svg:g").attr("class","btns_layer").property("leftside","left"!=M.settings.ToolBarSide).property("vertical",M.settings.ToolBarVert))),this.createAttFill({attr:this.pad}),this.createAttLine({attr:this.pad,color0:0==this.pad.fBorderMode?"none":""}),$.style("display",_?null:"none").attr("viewBox",`0 0 ${F} ${R}`).attr("preserveAspectRatio","none").attr("x",q).attr("y",T).attr("width",F).attr("height",R).property("draw_x",q).property("draw_y",T).property("draw_width",F).property("draw_height",R),this._pad_x=q,this._pad_y=T,this._pad_width=F,this._pad_height=R,J&&(J.attr("d",`M0,0H${F}V${R}H0Z`).call(this.fillatt.func).call(this.lineatt.func),this.drawActiveBorder(J)),this._fast_drawing=M.settings.SmallPad&&(F<M.settings.SmallPad.width||R<M.settings.SmallPad.height),$.property("can3d")===M.constants.Embed3D.Overlay&&this.selectDom().select(".draw3d_"+this.this_pad_name).style("display",_?"":"none"),this.alignButtons&&ie&&this.alignButtons(ie,F,R),_}disablePadDrawing(){!this.pad_draw_disabled&&this.has_canvas&&!this.iscan&&(this.pad_draw_disabled=!0,this.createPadSvg(!0))}checkSpecial(P){if(!P)return!1;if(P._typename==M.clTStyle)return Object.assign(M.gStyle,P),!0;if(P._typename==M.clTObjArray&&"ListOfColors"==P.name){if(this.options&&this.options.CreatePalette){let x=[];for(let p=P.arr.length-this.options.CreatePalette;p<P.arr.length;++p){let w=(0,ye.tF)(P.arr[p]);if(!w){console.log("Fail to create color for palette"),x=null;break}x.push(w)}x&&(this.custom_palette=new ye.VZ(x))}return(!this.options||this.options.GlobalColors)&&(0,ye.ow)(P),this.options&&this.options.LocalColors&&(this.root_colors=(0,ye.$8)(null,P)),!0}if(P._typename==M.clTObjArray&&"CurrentColorPalette"==P.name){let x=[],p=!1;for(let w=0;w<P.arr.length;++w){let m=P.arr[w];m?._typename==M.clTColor?x[w]=(0,ye.tF)(m):(console.log(`Missing color with index ${w}`),p=!0)}return(!this.options||!p&&!this.options.IgnorePalette)&&(this.custom_palette=new ye.VZ(x)),!0}return!1}checkSpecialsInPrimitives(P){let x=P?.fPrimitives;if(x)for(let p=0;p<x.arr.length;++p)this.checkSpecial(x.arr[p])&&(x.arr.splice(p,1),x.opt.splice(p,1),p--)}findInPrimitives(P,x){let p=this.pad?.fPrimitives?.arr;return p?p.find(w=>w.fName==P&&(!x||w.typename==x)):null}findPainterFor(P,x,p){return this.painters.find(w=>{let m=w.getObject();if(m){if(P&&m===P)return!0;if((x||p)&&(!x||m.fName===x)&&(!p||m._typename===p))return!0}})}hasObjectsToDraw(){let P=this.pad?.fPrimitives?.arr;return!(!P||!P.find(x=>x._typename!=M.clTPad))}syncDraw(P){let x={kind:P||"redraw"};return void 0===this._doing_draw?(this._doing_draw=[x],Promise.resolve(!0)):!(!0!==x.kind&&this._doing_draw.findIndex((p,w)=>w>0&&p.kind==x.kind)>0)&&(this._doing_draw.push(x),new Promise(p=>{x.func=p}))}doingDraw(){return void 0!==this._doing_draw}confirmDraw(){if(void 0===this._doing_draw)return console.warn("failure, should not happen");if(this._doing_draw.shift(),0==this._doing_draw.length)delete this._doing_draw;else{let P=this._doing_draw[0];P.func&&(P.func(),delete P.func)}}drawObject(){return(0,ze.Z)(function*(){return console.log("Not possible to draw object without loading of draw.mjs"),null})()}drawPrimitives(P){var x=this;return(0,ze.Z)(function*(){if(void 0===P)return x.iscan&&(x._start_tm=(new Date).getTime()),x._num_primitives=x.pad?.fPrimitives?.arr?.length||0,x.syncDraw(!0).then(()=>x.drawPrimitives(0));if(!(P>=x._num_primitives))return x.drawObject(x.getDom(),x.pad.fPrimitives.arr[P],x.pad.fPrimitives.opt[P]).then(p=>((0,M.isObject)(p)&&(p._primitive=!0),x.drawPrimitives(P+1)));if(x._start_tm){let p=(new Date).getTime()-x._start_tm;p>1e3&&console.log(`Canvas ${x.pad?.fName||"---"} drawing took ${(.001*p).toFixed(2)}s`),delete x._start_tm}x.confirmDraw()})()}divide(P,x){var p=this;return(0,ze.Z)(function*(){if(!x){let $=P;if($<2)return p;(P=x=Math.round(Math.sqrt($)))*x<$&&(P+=1)}if(P*x<2)return p;let _=1/x,F=1/P,R=0,q=[];for(let $=0;$<x;$++){let J=1-$*_-.01,ie=J-_+.02;if(ie<0&&(ie=0),!(ie>J))for(let Me=0;Me<P;Me++){let de=Me*F+.01,fe=de+F-.02;if(de>fe)continue;R++;let I=(0,M.create)(M.clTPad);I.fName=I.fTitle=`${p.pad.fName}_${R}`,I.fNumber=R,p.iscan?(I.fAbsWNDC=fe-de,I.fAbsHNDC=J-ie,I.fAbsXlowNDC=de,I.fAbsYlowNDC=ie):(I.fAbsWNDC=(fe-de)*p.pad.fAbsWNDC,I.fAbsHNDC=(J-ie)*p.pad.fAbsHNDC,I.fAbsXlowNDC=p.pad.fAbsXlowNDC+de*p.pad.fAbsWNDC,I.fAbsYlowNDC=p.pad.fAbsYlowNDC+ie*p.pad.fAbsWNDC),q.push(I)}}const T=()=>0==q.length?p:p.drawObject(p.getDom(),q.shift()).then(T);return T()})()}getSubPadPainter(P){for(let x=0;x<this.painters.length;++x){let p=this.painters[x];if(p.pad&&(0,M.isFunc)(p.forEachPainterInPad)&&p.pad.fNumber===P)return p}return null}processPadTooltipEvent(P){let x=[],p=[];return null!==this.painters&&this.painters.forEach(w=>{(0,M.isFunc)(w.processTooltipEvent)&&x.push(w)}),P&&(P.nproc=x.length),x.forEach(w=>{let m=w.processTooltipEvent(P);m||(m={user_info:null}),p.push(m),P&&P.painters&&(m.painter=w)}),p}changeDarkMode(P){this.getCanvSvg().style("filter",P??M.settings.DarkMode?"invert(100%)":null)}fillContextMenu(P){if(P.add(this.pad?`header:${this.pad._typename}::${this.pad.fName}`:"header:Canvas"),P.addchk(this.isTooltipAllowed(),"Show tooltips",()=>this.setTooltipAllowed("toggle")),!this._websocket){let p=function(w){this.pad[w.slice(1)]=parseInt(w[0]),this.interactiveRedraw("pad",w.slice(1))};P.addchk(this.pad.fGridx,"Grid x",(this.pad.fGridx?"0":"1")+"fGridx",p),P.addchk(this.pad.fGridy,"Grid y",(this.pad.fGridy?"0":"1")+"fGridy",p),P.add("sub:Ticks x"),P.addchk(0==this.pad.fTickx,"normal","0fTickx",p),P.addchk(1==this.pad.fTickx,"ticks on both sides","1fTickx",p),P.addchk(2==this.pad.fTickx,"labels on both sides","2fTickx",p),P.add("endsub:"),P.add("sub:Ticks y"),P.addchk(0==this.pad.fTicky,"normal","0fTicky",p),P.addchk(1==this.pad.fTicky,"ticks on both sides","1fTicky",p),P.addchk(2==this.pad.fTicky,"labels on both sides","2fTicky",p),P.add("endsub:"),P.addAttributesMenu(this),P.add("Save to gStyle",function(){this.fillatt&&this.fillatt.saveToStyle(this.iscan?"fCanvasColor":"fPadColor"),M.gStyle.fPadGridX=this.pad.fGridX,M.gStyle.fPadGridY=this.pad.fGridX,M.gStyle.fPadTickX=this.pad.fTickx,M.gStyle.fPadTickY=this.pad.fTicky,M.gStyle.fOptLogx=this.pad.fLogx,M.gStyle.fOptLogy=this.pad.fLogy,M.gStyle.fOptLogz=this.pad.fLogz},"Store pad fill attributes, grid, tick and log scale settings to gStyle"),this.iscan&&P.addSettingsMenu(!1,!1,w=>{"dark"==w&&this.changeDarkMode()})}P.add("separator"),(0,M.isFunc)(this.hasMenuBar)&&(0,M.isFunc)(this.actiavteMenuBar)&&P.addchk(this.hasMenuBar(),"Menu bar",p=>this.actiavteMenuBar(p)),(0,M.isFunc)(this.hasEventStatus)&&(0,M.isFunc)(this.activateStatusBar)&&P.addchk(this.hasEventStatus(),"Event status",()=>this.activateStatusBar("toggle")),(this.enlargeMain()||this.has_canvas&&this.hasObjectsToDraw())&&P.addchk("on"==this.enlargeMain("state"),"Enlarge "+(this.iscan?"canvas":"pad"),()=>this.enlargePad());let x=this.this_pad_name||(this.iscan?"canvas":"pad");return P.add(`Save as ${x}.png`,x+".png",p=>this.saveAs("png",this.iscan,p)),P.add(`Save as ${x}.svg`,x+".svg",p=>this.saveAs("svg",this.iscan,p)),!0}padContextMenu(P){if(P.stopPropagation){let x=(0,L.cx)(P,this.svg_this_pad().node());if(2==x.length&&x[0]>=0&&x[0]<10&&x[1]>=0&&x[1]<10)return;P.stopPropagation(),P.preventDefault(),this.getFramePainter()?.setLastEventPos()}(0,Ie.Z)(P,this).then(x=>(this.fillContextMenu(x),this.fillObjectExecMenu(x,""))).then(x=>x.show())}redrawPad(P){var x=this;return(0,ze.Z)(function*(){let p=x.syncDraw(P);if(!1===p)return console.log(`Prevent redrawing of ${x.pad.fName}`),!1;let w=!0;const m=_=>{for(;_<x.painters.length;){let F=x.painters[_++],R=0;if((w||F.this_pad_name)&&(R=F.redraw(P)),(0,M.isPromise)(R))return R.then(()=>m(_))}return!0};return p.then(()=>(x.iscan?x.createCanvasSvg(2):w=x.createPadSvg(!0),m(0))).then(()=>(x.confirmDraw(),(0,je.X8)()===x&&x.getCanvPainter()?.producePadEvent("padredraw",x),!0))})()}redraw(P){this.redrawPad(P)}needRedrawByResize(){let P=this.svg_this_pad();return!P.empty()&&P.property("can3d")===M.constants.Embed3D.Overlay||this.painters.findIndex(x=>{if((0,M.isFunc)(x.needRedrawByResize))return x.needRedrawByResize()})>=0}checkCanvasResize(P,x){if(!this.iscan&&this.has_canvas)return!1;let p=this.syncDraw("canvas_resize");if(!1===p)return!1;(!0===P||!1===P)&&(x=P,P=null),(0,M.isObject)(P)&&P.force&&(x=!0),x||(x=this.needRedrawByResize());let w=!1,m=_=>!w||_>=this.painters.length?(this.confirmDraw(),w):(0,M.getPromise)(this.painters[_].redraw(x?"redraw":"resize")).then(()=>m(_+1));return p.then(()=>(w=this.createCanvasSvg(x?2:1,P),m(0)))}updateObject(P){if(!P)return!1;this.pad.fBits=P.fBits,this.pad.fTitle=P.fTitle,this.pad.fGridx=P.fGridx,this.pad.fGridy=P.fGridy,this.pad.fTickx=P.fTickx,this.pad.fTicky=P.fTicky,this.pad.fLogx=P.fLogx,this.pad.fLogy=P.fLogy,this.pad.fLogz=P.fLogz,this.pad.fUxmin=P.fUxmin,this.pad.fUxmax=P.fUxmax,this.pad.fUymin=P.fUymin,this.pad.fUymax=P.fUymax,this.pad.fX1=P.fX1,this.pad.fX2=P.fX2,this.pad.fY1=P.fY1,this.pad.fY2=P.fY2,this.pad.fLeftMargin=P.fLeftMargin,this.pad.fRightMargin=P.fRightMargin,this.pad.fBottomMargin=P.fBottomMargin,this.pad.fTopMargin=P.fTopMargin,this.pad.fFillColor=P.fFillColor,this.pad.fFillStyle=P.fFillStyle,this.pad.fLineColor=P.fLineColor,this.pad.fLineStyle=P.fLineStyle,this.pad.fLineWidth=P.fLineWidth,this.pad.fPhi=P.fPhi,this.pad.fTheta=P.fTheta,this.iscan&&this.checkSpecialsInPrimitives(P);let x=this.getFramePainter();if(x&&x.updateAttributes(!x.modified_NDC),!P.fPrimitives)return!1;let p=!1,w=0;for(let m=0;m<P.fPrimitives.arr.length;++m)for(;w<this.painters.length;){let _=this.painters[w++];if(_._primitive){_.updateObject(P.fPrimitives.arr[m])&&(p=!0);break}}return p}addObjectPainter(P,x,p){P&&x&&x[p]&&void 0===P.snapid&&(this.painters.indexOf(P)<0&&this.painters.push(P),(0,M.isFunc)(P.setSnapId)?P.setSnapId(x[p].fObjectID):P.snapid=x[p].fObjectID,P.$primary&&this.painters.forEach(w=>{w!==P&&"hist"===w.$secondary&&(w.snapid=P.snapid+"#hist",console.log(`ASSIGN SECONDARY HIST ID ${w.snapid}`))}))}drawNextSnap(P,x){var p=this;return(0,ze.Z)(function*(){if(void 0===x&&(x=-1,p._snaps_map={},p._num_primitives=P?P.length:0),++x,!P||x>=P.length)return delete p._snaps_map,p;let w=P[x];if(5===w.fKind)return Object.assign(M.gStyle,w.fSnapshot),p.drawNextSnap(P,x);if(4===w.fKind){let R=[],q=w.fSnapshot.fOper.split(";");for(let T=0;T<q.length;++T){let $=q[T],J=$.indexOf(":");J>0?R[parseInt($.slice(0,J))]=(0,L.$_)(`rgb(${$.slice(J+1)})`).formatHex():(J=$.indexOf("="),R[parseInt($.slice(0,J))]=(0,L.$_)(`rgba(${$.slice(J+1)})`).formatHex8())}if((!p.options||p.options.GlobalColors)&&(0,ye.ow)(R),p.options&&p.options.LocalColors&&(p.root_colors=(0,ye.$8)(null,R)),w.fSnapshot.fBuf&&(!p.options||!p.options.IgnorePalette)){let T=[];for(let $=0;$<w.fSnapshot.fBuf.length;++$)T[$]=R[Math.round(w.fSnapshot.fBuf[$])];p.custom_palette=new ye.VZ(T)}return p.drawNextSnap(P,x)}let m=w.fObjectID,_=(p._snaps_map[m]||0)+1,F=null;p._snaps_map[m]=_;for(let R=0;R<p.painters.length;++R)if(p.painters[R].snapid===m&&0==--_){F=p.painters[R];break}if(F){if(3===w.fKind)return F.redrawPadSnap(w).then(()=>p.drawNextSnap(P,x));let R;return 1===w.fKind?F.updateObject(w.fSnapshot,w.fOption,!0)&&(R=F.redraw()):2===w.fKind&&F.updateObject(w.fSnapshot)&&(R=F.redraw()),(0,M.getPromise)(R).then(()=>p.drawNextSnap(P,x))}if(3===w.fKind){let R=w.fSnapshot;R.fPrimitives=null;let q=new Z(p.getDom(),R,!1);q.decodeOptions(w.fOption),q.addToPadPrimitives(p.this_pad_name),q.snapid=w.fObjectID,q.is_active_pad=!!w.fActive,q._readonly=w.fReadOnly??!1,q.createPadSvg(),q.matchObjectType(M.clTPad)&&w.fPrimitives.length>0&&q.addPadButtons(!0);let T=q.selectCurrentPad(q.this_pad_name);return q.drawNextSnap(w.fPrimitives).then(()=>(q.selectCurrentPad(T),p.drawNextSnap(P,x)))}return 1===w.fKind||2===w.fKind?p.drawObject(p.getDom(),w.fSnapshot,w.fOption).then(R=>(p.addObjectPainter(R,P,x),p.drawNextSnap(P,x))):p.drawNextSnap(P,x)})()}findSnap(P){if(this.snapid===P)return this;if(!this.painters)return null;for(let x=0;x<this.painters.length;++x){let p=this.painters[x];if((0,M.isFunc)(p.findSnap)?p=p.findSnap(P):p.snapid!==P&&(p=null),p)return p}return null}redrawPadSnap(P){var x=this;return(0,ze.Z)(function*(){if(!P||!P.fPrimitives)return x;x.is_active_pad=!!P.fActive,x._readonly=P.fReadOnly??!1;let p=P.fSnapshot;if(p.fPrimitives=null,x._deliver_webcanvas_events=!!p.fExecs?.arr?.length,void 0===x.snapid){x.snapid=P.fObjectID,x.draw_object=p,x.pad=p,x.batch_mode&&(!p.fCw||!p.fCh)&&(p.fCw=900,p.fCh=700),(!p.fCw||!p.fCh)&&(x._fixed_size=!1);let R=x.selectDom().attr("id");!x.batch_mode&&!x.use_openui&&!x.brlayout&&R&&(0,M.isStr)(R)&&(x.brlayout=new Oe.$B(R,null,x),x.brlayout.create(R,!0),x.setDom(x.brlayout.drawing_divid()),(0,He.MG)(x.brlayout)),x.createCanvasSvg(0),x.batch_mode||x.addPadButtons(!0),typeof P.fHighlightConnect<"u"&&(x._highlight_connect=P.fHighlightConnect);let q=Promise.resolve(!0);if((0,M.isStr)(P.fScripts)&&P.fScripts){let T="";0==P.fScripts.indexOf("load:")?T=P.fScripts.slice(5).split(";"):0==P.fScripts.indexOf("assert:")&&(T=P.fScripts.slice(7)),q=T?(0,M.loadScript)(T):(0,M.injectCode)(P.fScripts)}return q.then(()=>x.drawNextSnap(P.fPrimitives))}x.updateObject(p),x.iscan?x.createCanvasSvg(2):x.createPadSvg(!0);const w=(R,q,T,$)=>{let J=R.find(Me=>{if(void 0!==Me.snapid&&Me.matchObjectType(T)&&(!$||Me.getObject()&&Me.getObject().fName===$))return!0});if(!J)return;let ie=q.find(Me=>{if(1===Me.fKind&&Me.fSnapshot&&Me.fSnapshot._typename===T&&(!$||Me.fSnapshot.fName===$))return!0});ie&&J.snapid!==ie.fObjectID&&(J.snapid=ie.fObjectID)};P.fWithoutPrimitives||(w(x.painters,P.fPrimitives,"TFrame"),w(x.painters,P.fPrimitives,M.clTPaveText,"title"));let m=!1,_=!1;if(!P.fWithoutPrimitives)for(let R=0;R<x.painters.length;++R){let q=x.painters[R];if(!(0,M.isStr)(q.snapid))continue;let T=q.snapid,$=T.indexOf("#");$>0&&(T=T.slice(0,$));for(let J=0;J<P.fPrimitives.length;++J)if(P.fPrimitives[J].fObjectID===T){q=null,m=!0;break}q&&(x.painters.splice(R--,1),q.cleanup(),_=!0,x.main_painter_ref===q&&delete x.main_painter_ref)}if(_&&delete x.pads_cache,!m&&!P.fWithoutPrimitives){let R=x.getFramePainter();x.painters.forEach(q=>{R!==q&&q.cleanup()}),delete x.main_painter_ref,x.painters=[],R&&(x.painters.push(R),R.cleanFrameDrawings(),R.redraw()),x.removePadButtons&&x.removePadButtons(),x.addPadButtons(!0)}let F=x.selectCurrentPad(x.this_pad_name);return x.drawNextSnap(P.fPrimitives).then(()=>{let R=[];return P.fWithoutPrimitives||x.painters.forEach(q=>{(void 0===q.snapid||q.$secondary)&&R.push(q.redraw())}),Promise.all(R)}).then(()=>(x.selectCurrentPad(F),(0,je.X8)()===x&&x.getCanvPainter()?.producePadEvent("padredraw",x),x))})()}deliverWebCanvasEvent(P,x,p,w){if(!this._deliver_webcanvas_events||!this.is_active_pad||this.doingDraw()||void 0===x||void 0===p)return;let m=this.getCanvPainter();if(!m||!m._websocket||!m._websocket.canSend(2)||m._readonly)return;let _="";w&&w[0]&&w[0].painter?.snapid&&(_=w[0].painter.snapid.toString());let F=JSON.stringify([this.snapid,P,x.toString(),p.toString(),_]);m.sendWebsocket(`EVENT:${F}`)}createImage(P){var x=this;return(0,ze.Z)(function*(){return"pdf"==P?(0,M.btoa_func)("dummy PDF file"):"png"==P||"jpeg"==P||"svg"==P?x.produceImage(!0,P).then(p=>{if(!p||"svg"==P)return p;let w=p.indexOf("base64,");return w>0?p.slice(w+7):""}):""})()}getWebPadOptions(P,x){let p=void 0===P,w=null,m=!0;if(p&&this._readonly)return"";if("only_this"===P&&(p=!0,m=!1),p&&(P=[]),x||(x=this.iscan?this:this.getCanvPainter()),this.snapid){if(w={_typename:"TWebPadOptions",snapid:this.snapid.toString(),active:!!this.is_active_pad,cw:0,ch:0,bits:0,primitives:[],logx:this.pad.fLogx,logy:this.pad.fLogy,logz:this.pad.fLogz,gridx:this.pad.fGridx,gridy:this.pad.fGridy,tickx:this.pad.fTickx,ticky:this.pad.fTicky,mleft:this.pad.fLeftMargin,mright:this.pad.fRightMargin,mtop:this.pad.fTopMargin,mbottom:this.pad.fBottomMargin,xlow:0,ylow:0,xup:1,yup:1,zx1:0,zx2:0,zy1:0,zy2:0,zz1:0,zz2:0},this.iscan)w.bits=this.getStatusBits(),w.cw=this.getPadWidth(),w.ch=this.getPadHeight();else if(x){let _=x.getPadWidth(),F=x.getPadHeight(),R=this.getPadRect();w.cw=_,w.ch=F,w.xlow=R.x/_,w.ylow=1-(R.y+R.height)/F,w.xup=w.xlow+R.width/_,w.yup=w.ylow+R.height/F}this.getPadRanges(w)?P.push(w):console.log(`fail to get ranges for pad ${this.pad.fName}`)}return this.painters.forEach(_=>{if((0,M.isFunc)(_.getWebPadOptions))m&&_.getWebPadOptions(P,x);else if(_.snapid){let F={_typename:"TWebObjectOptions",snapid:_.snapid.toString(),opt:_.getDrawOpt(),fcust:"",fopt:[]};(0,M.isFunc)(_.fillWebObjectOptions)&&(F=_.fillWebObjectOptions(F)),w.primitives.push(F)}}),p?(0,M.toJSON)(P):void 0}getPadRanges(P){if(!P)return!1;let x=this.getFramePainter(),p=this.svg_this_pad();if(P.ranges=!!x?.ranges_set,P.ux1=P.px1=P.ranges?x.scale_xmin:0,P.uy1=P.py1=P.ranges?x.scale_ymin:0,P.ux2=P.px2=P.ranges?x.scale_xmax:0,P.uy2=P.py2=P.ranges?x.scale_ymax:0,P.uz1=P.ranges?x.scale_zmin??0:0,P.uz2=P.ranges?x.scale_zmax??0:0,x&&(x.zoom_xmin!==x.zoom_xmax&&(P.zx1=x.zoom_xmin,P.zx2=x.zoom_xmax),x.zoom_ymin!==x.zoom_ymax&&(P.zy1=x.zoom_ymin,P.zy2=x.zoom_ymax),x.zoom_zmin!==x.zoom_zmax&&(P.zz1=x.zoom_zmin,P.zz2=x.zoom_zmax)),!P.ranges||p.empty())return!0;const w=(F,R,q)=>F?R<=0?q:(R=Math.log10(R),F>1&&(R/=Math.log10(F)),R):R,m=x.getFrameRect();P.ux1=w(x.logx,P.ux1,0),P.ux2=w(x.logx,P.ux2,1);let _=(P.ux2-P.ux1)/(m.width||10);return P.px1=P.ux1-_*m.x,P.px2=P.px1+_*this.getPadWidth(),P.uy1=w(x.logy,P.uy1,0),P.uy2=w(x.logy,P.uy2,1),_=(P.uy2-P.uy1)/(m.height||10),P.py1=P.uy1-_*m.y,P.py2=P.py1+_*this.getPadHeight(),!0}itemContextMenu(P){let x=this.svg_this_pad().node().getBoundingClientRect(),p={clientX:x.left+10,clientY:x.top+10};if("pad"==P)return setTimeout(()=>this.padContextMenu(p),50);let m,w=null;switch(P){case"xaxis":case"yaxis":case"zaxis":w=this.getFramePainter(),m=P[0];break;case"frame":w=this.getFramePainter();break;default:{let _=parseInt(P);Number.isInteger(_)&&(w=this.painters[_])}}(0,M.isFunc)(w?.fillContextMenu)&&(0,Ie.Z)(p,w).then(_=>{w.fillContextMenu(_,m)&&w.fillObjectExecMenu(_,m).then(()=>setTimeout(()=>_.show(),50))})}saveAs(P,x,p){p||(p=(this.this_pad_name||(this.iscan?"canvas":"pad"))+"."+P),this.produceImage(x,P).then(w=>{if(!w)return console.error(`Fail to produce image ${p}`);(0,He.yH)(p,"svg"!=P?w:"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(w))})}findActivePad(){let P;return this.forEachPainterInPad(x=>{x.is_active_pad&&!P&&(P=x)},"pads"),P}produceImage(P,x){var p=this;return(0,ze.Z)(function*(){let w="frame"===P,m=w?p.getFrameSvg(p.this_pad_name):P?p.getCanvSvg():p.svg_this_pad(),_=P&&!w?p.getCanvPainter():p,F=[],R=null;if(m.empty())return"";_.forEachPainterInPad(fe=>{if(fe.is_active_pad&&!R&&(R=fe,R.drawActiveBorder(null,!1)),w)return;let I={prnt:fe.svg_this_pad()};F.push(I);let U=fe.getLayerSvg("btns_layer",fe.this_pad_name);I.btns_node=U.node(),I.btns_node&&(I.btns_prnt=I.btns_node.parentNode,I.btns_next=I.btns_node.nextSibling,U.remove());let z=fe.getFramePainter();if(!(0,M.isFunc)(z?.render3D)||!(0,M.isFunc)(z?.access3dKind))return;let le=z.access3dKind();if(le!==M.constants.Embed3D.Overlay&&le!==M.constants.Embed3D.Embed)return;let D=z.getSizeFor3d(M.constants.Embed3D.Embed),oe=z.renderer.domElement;z.render3D(0);let _e=oe.toDataURL("image/png");le===M.constants.Embed3D.Embed&&(I.foreign=I.prnt.select("."+D.clname),I.foreign.remove());let Ee=z.getFrameSvg();I.frame_node=Ee.node(),I.frame_node&&(I.frame_next=I.frame_node.nextSibling,Ee.remove()),I.img=I.prnt.insert("image",".primitives_layer").attr("x",D.x).attr("y",D.y).attr("width",oe.width).attr("height",oe.height).attr("href",_e)},"pads");const T=()=>{R&&R.drawActiveBorder(null,!0);for(let fe=0;fe<F.length;++fe){let I=F[fe];I.img&&I.img.remove();let U=I.prnt.select(".primitives_layer");I.foreign&&I.prnt.node().insertBefore(I.foreign.node(),U.node()),I.frame_node&&U.node().insertBefore(I.frame_node,I.frame_next),I.btns_node&&I.btns_prnt.insertBefore(I.btns_node,I.btns_next)}};let $=m.property("draw_width"),J=m.property("draw_height");if(w){let fe=p.getFramePainter();$=fe.getFrameWidth(),J=fe.getFrameHeight()}let ie=`<svg width="${$}" height="${J}" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">${m.node().innerHTML}</svg>`;if(M.internals.processSvgWorkarounds&&(ie=M.internals.processSvgWorkarounds(ie)),ie=(0,Be.ln)(ie),"svg"==x)return T(),ie;let de=new Image;return new Promise(fe=>{de.onload=function(){let I=document.createElement("canvas");I.width=de.width,I.height=de.height,I.getContext("2d").drawImage(de,0,0),T(),fe(I.toDataURL("image/"+x))},de.onerror=function(I){console.log(`IMAGE ERROR ${I}`),T(),fe(null)},de.src="data:image/svg+xml;base64,"+(0,M.btoa_func)((fe=>(fe=(fe=encodeURIComponent(fe)).replace(/%([0-9A-F]{2})/g,(I,U)=>{let z=String.fromCharCode("0x"+U);return"%"===z?"%25":z}),decodeURIComponent(fe)))('<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">'+ie))})})()}clickPadButton(P,x){if("CanvasSnapShot"==P)return this.saveAs("png",!0);if("enlargePad"==P)return this.enlargePad();if("PadSnapShot"==P)return this.saveAs("png",!1);if("PadContextMenus"==P){if(x&&(x.preventDefault(),x.stopPropagation()),(0,Ie.W)())return;return void(0,Ie.Z)(x,this).then(w=>{w.add("header:Menus"),w.add(this.iscan?"Canvas":"Pad","pad",this.itemContextMenu),this.getFramePainter()&&w.add("Frame","frame",this.itemContextMenu);let m=this.getMainPainter();if(m&&(w.add("X axis","xaxis",this.itemContextMenu),w.add("Y axis","yaxis",this.itemContextMenu),(0,M.isFunc)(m.getDimension)&&m.getDimension()>1&&w.add("Z axis","zaxis",this.itemContextMenu)),this.painters&&this.painters.length>0){w.add("separator");let _=[];this.painters.forEach((F,R)=>{let q=F?F.getObject():null;if(!q||_.indexOf(q)>=0||F.$secondary)return;let T="_typename"in q?q._typename+"::":"";"fName"in q&&(T+=q.fName),T.length||(T="item"+R),w.add(T,R,this.itemContextMenu)})}w.show()})}let p=!1;this.painters.forEach(w=>{(0,M.isFunc)(w.clickPadButton)&&w.clickPadButton(P),!p&&(0,M.isFunc)(w.clickButton)&&(p=w.clickButton(P))})}addPadButton(P,x,p,w){if(M.settings.ToolBar&&!(0,M.isBatchMode)()&&!this.batch_mode){this._buttons||(this._buttons=[]);for(let _=0;_<this._buttons.length;++_)if(this._buttons[_].funcname==p)return;if(this._buttons.push({btn:P,tooltip:x,funcname:p,keyname:w}),!this.iscan&&this.has_canvas&&0!=p.indexOf("Pad")&&"enlargePad"!==p){let _=this.getCanvPainter();_&&_!==this&&_.addPadButton(P,x,p)}}}showPadButtons(){this._buttons&&(ue.assign(this),this.showPadButtons())}addPadButtons(P){this.addPadButton("camera","Create PNG",this.iscan?"CanvasSnapShot":"PadSnapShot","Ctrl PrintScreen"),M.settings.ContextMenu&&this.addPadButton("question","Access context menus","PadContextMenus"),(!this.iscan&&this.has_canvas&&this.hasObjectsToDraw()||this.enlargeMain("verify"))&&this.addPadButton("circle","Enlarge canvas","enlargePad"),P&&this.brlayout&&(this.addPadButton("diamand","Toggle Ged","ToggleGed"),this.addPadButton("three_circles","Toggle Status","ToggleStatus"))}decodeOptions(P){let x=this.getObject();if(!x)return;let p=new Be.pc(P);this.options||(this.options={}),Object.assign(this.options,{GlobalColors:!0,LocalColors:!1,CreatePalette:0,IgnorePalette:!1,RotateFrame:!1,FixFrame:!1}),(p.check("NOCOLORS")||p.check("NOCOL"))&&(this.options.GlobalColors=this.options.LocalColors=!1),(p.check("LCOLORS")||p.check("LCOL"))&&(this.options.GlobalColors=!1,this.options.LocalColors=!0),(p.check("NOPALETTE")||p.check("NOPAL"))&&(this.options.IgnorePalette=!0),p.check("ROTATE")&&(this.options.RotateFrame=!0),p.check("FIXFRAME")&&(this.options.FixFrame=!0),p.check("CP",!0)&&(this.options.CreatePalette=p.partAsInt(0,0)),p.check("NOZOOMX")&&(this.options.NoZoomX=!0),p.check("NOZOOMY")&&(this.options.NoZoomY=!0),p.check("NOMARGINS")&&(x.fLeftMargin=x.fRightMargin=x.fBottomMargin=x.fTopMargin=0),p.check("WHITE")&&(x.fFillColor=0),p.check("LOG2X")&&(x.fLogx=2,x.fUxmin=0,x.fUxmax=1,x.fX1=0,x.fX2=1),p.check("LOGX")&&(x.fLogx=1,x.fUxmin=0,x.fUxmax=1,x.fX1=0,x.fX2=1),p.check("LOG2Y")&&(x.fLogy=2,x.fUymin=0,x.fUymax=1,x.fY1=0,x.fY2=1),p.check("LOGY")&&(x.fLogy=1,x.fUymin=0,x.fUymax=1,x.fY1=0,x.fY2=1),p.check("LOG2Z")&&(x.fLogz=2),p.check("LOGZ")&&(x.fLogz=1),p.check("LOG2")&&(x.fLogx=x.fLogy=x.fLogz=2),p.check("LOG")&&(x.fLogx=x.fLogy=x.fLogz=1),p.check("GRIDX")&&(x.fGridx=1),p.check("GRIDY")&&(x.fGridy=1),p.check("GRID")&&(x.fGridx=x.fGridy=1),p.check("TICKX")&&(x.fTickx=1),p.check("TICKY")&&(x.fTicky=1),p.check("TICK")&&(x.fTickx=x.fTicky=1),p.check("OTX")&&(x.$OTX=!0),p.check("OTY")&&(x.$OTY=!0),p.check("CTX")&&(x.$CTX=!0),p.check("CTY")&&(x.$CTY=!0),p.check("RX")&&(x.$RX=!0),p.check("RY")&&(x.$RY=!0),this.storeDrawOpt(P)}static draw(P,x,p){return(0,ze.Z)(function*(){let w=new Z(P,x,!1);w.decodeOptions(p),w.getCanvSvg().empty()?(w.has_canvas=!1,w.this_pad_name="",w.setTopPainter()):w.addToPadPrimitives(w.pad_name),w.createPadSvg(),w.matchObjectType(M.clTPad)&&(!w.has_canvas||w.hasObjectsToDraw())&&w.addPadButtons();let m=w.has_canvas?w.selectCurrentPad(w.this_pad_name):void 0;return(0,je.O5)({pp:w,active:!0}),w.drawPrimitives().then(()=>(w.showPadButtons(),w.selectCurrentPad(m),w))})()}}},4074:($r,At,Ce)=>{"use strict";Ce.r(At),Ce.d(At,{HierarchyPainter:()=>$,drawInspector:()=>Me,drawList:()=>ue,drawStreamerInfo:()=>J,folderHierarchy:()=>Z,getHPainter:()=>ce.nh,keysHierarchy:()=>x,listHierarchy:()=>P,markAsStreamerInfo:()=>m,objectHierarchy:()=>p,taskHierarchy:()=>O});var ze=Ce(5835),M=Ce(9542),L=Ce(2253),ye=Ce(8538),Be=Ce(3038),je=Ce(3675),Ze=Ce(6458),Ie=Ce(4383),He=Ce(4585),Oe=Ce(7825),ce=Ce(2487),Y=Ce(9622);function ue(fe,I,U){return X.apply(this,arguments)}function X(){return(X=(0,ze.Z)(function*(fe,I,U){return I&&I.arr?{dom:fe,lst:I,opt:U,indx:-1,painter:null,draw_next(){for(;++this.indx<this.lst.arr.length;){let le=this.lst.arr[this.indx];if(le)return(0,Oe.ii)(this.dom,le,this.lst.opt&&this.lst.opt[this.indx]?this.lst.opt[this.indx]:this.opt).then(oe=>(oe&&!this.painter&&(this.painter=oe),this.draw_next()))}return this.painter}}.draw_next():null})).apply(this,arguments)}function Z(fe,I){if(!I?.fFolders)return!1;if(0===I.fFolders.arr.length)return fe._more=!1,!0;fe._childs=[];for(let U=0;U<I.fFolders.arr.length;++U){let z=I.fFolders.arr[U];fe._childs.push({_name:z.fName,_kind:"ROOT."+z._typename,_obj:z})}return!0}function O(fe,I){if(!I?.fTasks)return!1;if(p(fe,I,{exclude:["fTasks","fName"]}),0===I.fTasks.arr.length&&0==fe._childs.length)return fe._more=!1,!0;for(let U=0;U<I.fTasks.arr.length;++U){let z=I.fTasks.arr[U];fe._childs.push({_name:z.fName,_kind:"ROOT."+z._typename,_obj:z})}return!0}function P(fe,I){if(!(0,M.isRootCollection)(I))return!1;if(void 0===I.arr||0===I.arr.length)return fe._more=!1,!0;let U=!1,z=fe;for(;z;)z._do_context&&(U=!0),z=z._parent;let le=I._typename==M.clTMap,D=[],oe=[],_e=[];for(let Ee=0;Ee<I.arr.length;++Ee){let Ve=le?I.arr[Ee].first:I.arr[Ee];if(!Ve)continue;let Qe=Ve.fName||Ve.name;if(!Qe)continue;let et=D.indexOf(Qe);et>=0?oe[et]++:(oe[D.length]=_e[D.length]=1,D.push(Qe))}fe._childs=[];for(let Ee=0;Ee<I.arr.length;++Ee){let Ve=le?I.arr[Ee].first:I.arr[Ee],Qe=Ve?._typename?{_name:Ve.fName||Ve.name,_kind:"ROOT."+Ve._typename,_title:(Ve.fTitle||"")+" type:"+Ve._typename,_obj:Ve}:{_name:Ee.toString(),_kind:"ROOT.NULL",_title:"NULL",_value:"null",_obj:null};switch(Ve._typename){case M.clTColor:Qe._value=(0,Be.tF)(Ve);break;case M.clTText:case M.clTLatex:Qe._value=Ve.fTitle;break;case M.clTObjString:Qe._value=Ve.fString;break;default:I.opt&&I.opt[Ee]&&I.opt[Ee].length&&(Qe._value=I.opt[Ee])}if(U&&(0,Oe.JO)(Ve._typename)&&(Qe._direct_context=!0),!Qe._name||Number.isInteger(parseInt(Qe._name))&&parseInt(Qe._name)!==Ee||I.arr.indexOf(Ve)<Ee)Qe._name=Ee.toString();else{let et=D.indexOf(Ve.fName);et>=0&&oe[et]>1&&(Qe._cycle=_e[et]++,Qe._keyname=Qe._name,Qe._name=Qe._keyname+";"+Qe._cycle)}fe._childs.push(Qe)}return!0}function x(fe,I,U,z){if(void 0===I)return!1;fe._childs=[];for(let le=0;le<I.length;++le){let D=I[le];if(M.settings.OnlyLastCycle&&le>0&&D.fName==I[le-1].fName&&D.fCycle<I[le-1].fCycle)continue;let oe={_name:D.fName+";"+D.fCycle,_cycle:D.fCycle,_kind:"ROOT."+D.fClassName,_title:D.fTitle,_keyname:D.fName,_readobj:null,_parent:fe};if(D.fObjlen>1e5&&(oe._title+=" (size: "+(D.fObjlen/1e6).toFixed(1)+"MB)"),D.fRealName&&(oe._realname=D.fRealName+";"+D.fCycle),D.fClassName==ye.$Q||D.fClassName==ye.jH){let _e=z&&U?U.getDir(z+D.fName):null;_e?(oe._name=D.fName,x(oe,_e.fKeys,U,z+D.fName+"/")):(oe._more=!0,oe._expand=function(Ee,Ve){return x(Ee,Ve.fKeys)})}else if(D.fClassName==M.clTList&&D.fName==ye.S7){if(M.settings.SkipStreamerInfos)continue;oe._name=ye.S7,oe._kind="ROOT."+ye.I8,oe._title="List of streamer infos for binary I/O",oe._readobj=U.fStreamerInfos}fe._childs.push(oe)}return!0}function p(fe,I,U){if(!fe||null===I)return!1;fe._childs=[];let z=Object.prototype.toString.apply(I);if("[object DataView]"===z){let ve={_parent:fe,_name:"size",_value:I.byteLength.toString(),_vclass:"h_value_num"};fe._childs.push(ve);let Je=I.byteLength<10?1:Math.log10(I.byteLength);for(let ct=0;ct<I.byteLength;++ct){if(ct%16==0){for(ve={_parent:fe,_name:ct.toString(),_value:"",_vclass:"h_value_num"};ve._name.length<Je;)ve._name="0"+ve._name;fe._childs.push(ve)}let We=I.getUint8(ct).toString(16);for(;We.length<2;)We="0"+We;ve._value&&(ve._value+=ct%4==0?" | ":" "),ve._value+=We}return!0}let le=!0,D=!1,oe=fe;for(;oe;){if(oe._do_context&&(D=!0),"_nosimple"in oe){le=oe._nosimple;break}oe=oe._parent}let Qe,et,Tt,Bt,_e=(0,M.isArrayProto)(z)>0&&I.length,Ee=_e&&I.length>M.settings.HierarchyLimit,Ve=!1;if(_e&&"Object"===fe._name&&!fe._parent&&(fe._name="Array"),Ee){Ve=!0;for(let ve=0;ve<I.length;++ve){let Je=typeof I[ve];if(!("number"===Je||"boolean"===Je||"string"==Je&&I[ve].length<16)){Ve=!1;break}}}if("_obj"in fe?fe._obj!==I&&alert("object missmatch"):fe._obj=I,fe._title||(I._typename?fe._title="ROOT."+I._typename:_e&&(fe._title="Array len: "+I.length)),Ve){for(let ve=0;ve<I.length;){let Je=Math.min(ve+10,I.length),ct=!0,We=ve;for(;ct;){ct=!0;for(let ft=We;ft<Je;++ft)I[ve]!==I[ft]&&(ct=!1);if(ct){if(Je===I.length)break;We=Je,Je=Math.min(Je+10,I.length)}else if(We!==ve){Je=We,ct=!0;break}}let Ke={_parent:fe,_name:ve+".."+(Je-1),_vclass:"h_value_num"};if(ct)Ke._value=I[ve].toString();else{Ke._value="";for(let ft=ve;ft<Je;++ft)Ke._value+=(ft===ve?"[ ":", ")+I[ft].toString();Ke._value+=" ]"}fe._childs.push(Ke),ve=Je}return!0}for(let ve in I){if("_typename"==ve||"$"==ve[0])continue;let Je=I[ve];if((0,M.isFunc)(Je)||U?.exclude&&U.exclude.indexOf(ve)>=0)continue;if(Ee&&Qe){if(Tt===Je){++Bt,et=ve;continue}Bt>0&&(Qe._name+=".."+et)}let ct={_parent:fe,_name:ve};if(Ee&&(Qe=ct,et=ve,Tt=Je,Bt=0),null===Je){ct._value=ct._title="null",le||fe._childs.push(ct);continue}let We=!1;if((0,M.isObject)(Je))if(z=Object.prototype.toString.apply(Je),(0,M.isArrayProto)(z)>0)ct._title="array len="+Je.length,We="[object Array]"!=z,0===Je.length?(ct._value="[ ]",ct._more=!1):(ct._value="[...]",ct._more=!0,ct._expand=p,ct._obj=Je);else if("[object DataView]"===z)ct._title="DataView len="+Je.byteLength,ct._value="[...]",ct._more=!0,ct._expand=p,ct._obj=Je;else if("[object Date]"===z)ct._more=!1,ct._title="Date",ct._value=Je.toString(),ct._vclass="h_value_num";else{(Je.$kind||Je._typename)&&(ct._kind=ct._title="ROOT."+(Je.$kind||Je._typename)),Je._typename&&(ct._title=Je._typename,D&&(0,Oe.JO)(Je._typename)&&(ct._direct_context=!0));let Ke=fe,ft=!1;for(;Ke&&!ft;)ft=Ke._obj===Je,Ke=Ke._parent;if(ft)ct._value="{ prnt }",ct._vclass="h_value_num",ct._more=!1,We=!0;else switch(ct._obj=Je,ct._more=!1,Je._typename){case M.clTColor:ct._value=(0,Be.tF)(Je);break;case M.clTText:case M.clTLatex:ct._value=Je.fTitle;break;case M.clTObjString:ct._value=Je.fString;break;default:(0,M.isRootCollection)(Je)&&(0,M.isObject)(Je.arr)?(ct._value=Je.arr.length?"[...]":"[]",ct._title+=", size:"+Je.arr.length,Je.arr.length>0&&(ct._more=!0)):(ct._more=!0,ct._value="{ }")}}else"number"==typeof Je||"boolean"==typeof Je?(We=!0,ct._value="fBits"==ve?"0x"+Je.toString(16):Je.toString(),ct._vclass="h_value_num"):(0,M.isStr)(Je)?(We=!0,ct._value="&quot;"+Je.replace(/\&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"&quot;",ct._vclass="h_value_str"):typeof Je>"u"?(We=!0,ct._value="undefined",ct._vclass="h_value_num"):(We=!0,alert(`miss ${ve} type ${typeof Je}`));(!We||!le)&&fe._childs.push(ct)}return Ee&&Qe&&Bt>0&&(Qe._name+=".."+et),!0}function w(fe){let I={_name:ye.S7,_childs:[]};for(let U=0;U<fe.arr.length;++U){let z=fe.arr[U];if(z._typename==M.clTList)continue;if(typeof z.fName>"u"){console.warn(`strange element in StreamerInfo with type ${z._typename}`);continue}let le={_name:`${z.fName};${z.fClassVersion}`,_kind:`class ${z.fName}`,_title:`class:${z.fName} version:${z.fClassVersion} checksum:${z.fCheckSum}`,_icon:"img_class",_childs:[]};if(z.fTitle&&(le._title+="  "+z.fTitle),I._childs.push(le),!(typeof z.fElements>"u")){for(let D=0;D<z.fElements.arr.length;++D){let oe=z.fElements.arr[D];if(!oe||!oe.fName)continue;let _e=oe.fTypeName+" "+oe.fName,Ee=oe.fTypeName+" type:"+oe.fType;if(1===oe.fArrayDim)_e+="["+oe.fArrayLength+"]";else for(let Ve=0;Ve<oe.fArrayDim;++Ve)_e+="["+oe.fMaxIndex[Ve]+"]";4294967295===oe.fBaseVersion?_e+=":-1":void 0!==oe.fBaseVersion&&(_e+=":"+oe.fBaseVersion),_e+=";",oe.fTitle&&(_e+=" // "+oe.fTitle),le._childs.push({_name:_e,_title:Ee,_kind:oe.fTypeName,_icon:"BASE"==oe.fTypeName?"img_class":"img_member"})}le._childs.length||delete le._childs}}return I}function m(fe,I,U){U?._typename==M.clTList&&(U._typename=ye.I8)}function _(fe){let I={_name:"Object",_title:"",_click_action:"expand",_nosimple:!1,_do_context:!0};return(0,M.isStr)(fe.fName)&&fe.fName&&(I._name=fe.fName),(0,M.isStr)(fe.fTitle)&&fe.fTitle&&(I._title=fe.fTitle),fe._typename&&(I._title+="  type:"+fe._typename),(0,M.isRootCollection)(fe)?(I._name=fe.name||fe._typename,P(I,fe)):p(I,fe),I}function F(fe){let I=[];if(!(0,M.isStr)(fe)||!(fe=fe.trim()))return I;if(fe.length<2||"["!=fe[0]||"]"!=fe[fe.length-1])return I.push(fe),I;let U=0,z=0,le=0,D=1;for(let oe=1;oe<fe.length;++oe)if(z>0)"'"===fe[oe]&&z--;else if(le>0)'"'===fe[oe]&&le--;else switch(fe[oe]){case"'":z++;break;case'"':le++;break;case"[":U++;break;case"]":if(oe<fe.length-1){U--;break}case",":if(0===U){let _e=fe.substring(D,oe).trim();_e.length>1&&_e[0]==_e[_e.length-1]&&('"'==_e[0]||"'"==_e[0])&&(_e=_e.slice(1,_e.length-1)),I.push(_e),D=oe+1}}return 0===I.length&&I.push(fe.slice(1,fe.length-1).trim()),I}function R(fe,I){if(I&&fe&&"_childs"in I){for(let U=0;U<I._childs.length;++U)(I._childs[U]._more||I._childs[U]._childs)&&(I._childs[U]._expand=R);return fe._childs=I._childs,I._childs=null,!0}return!1}function q(fe){return fe?.expand||fe?.get_expand||fe?.expand_item}const T="ROOT.TFile";class $ extends je.be{constructor(I,U,z){super(U),this.name=I,this.h=null,this.with_icons=!0,"__as_dark_mode__"==z?(this.background=M.settings.DarkMode?"black":"white",this.textcolor=M.settings.DarkMode?"#eee":"#111"):this.background=z,this.files_monitoring=!U,this.nobrowser=null===U,(0,ce.nh)()||(0,ce.Qk)(this)}cleanup(){this.clearHierarchy(!0),super.cleanup(),(0,ce.nh)()===this&&(0,ce.Qk)(null)}fileHierarchy(I){let U=this,z={_name:I.fFileName,_title:(I.fTitle?I.fTitle+", path ":"")+I.fFullURL,_kind:T,_file:I,_fullurl:I.fFullURL,_localfile:I.fLocalFile,_had_direct_read:!1,_get(le,D){if(le&&le._readobj)return Promise.resolve(le._readobj);le&&(D=U.itemFullName(le,this));const oe=_e=>(this._file||(this._file=_e),_e?_e.readObject(D).then(Ee=>{if(!le&&Ee){let Ve=U.findItem({name:D,top:this,last_exists:!0,check_keys:!0});if(void 0!==Ve?.last&&Ve.last!==this){let Qe=_e.getDir(U.itemFullName(Ve.last,this));if(Qe){Ve.last._name=Ve.last._keyname;let et=U.itemFullName(Ve.last,this);x(Ve.last,Qe.fKeys,_e,et+"/")}}else x(this,_e.fKeys,_e,"");le=U.findItem({name:D,top:this})}return le&&(le._readobj=Ee,"_expand"in le&&(le._name=le._keyname)),Ee}):Promise.resolve(null));return this._file?oe(this._file):this._localfile?(0,ye.ZB)(this._localfile).then(_e=>oe(_e)):this._fullurl?(0,ye.ZB)(this._fullurl).then(_e=>oe(_e)):Promise.resolve(null)}};return x(z,I.fKeys,I,""),z}forEachItem(I,U){(0,M.isFunc)(I)&&function z(le,D){if(le&&(D&&(le._parent=D),I(le),"_childs"in le))for(let oe=0;oe<le._childs.length;++oe)z(le._childs[oe],le)}(U||this.h)}findItem(I){let z=this.h,le="";if((0,M.isStr)(I))le=I,I={};else{if(!(0,M.isObject)(I))return null;le=I.name,"top"in I&&(z=I.top)}return"__top_folder__"===le?z:(0,M.isStr)(le)&&0==le.indexOf("img:")?null:function U(D,oe){if(!oe||!D)return D;let _e=oe.length;if(!D._parent&&"TopFolder"!==D._kind&&0===oe.indexOf(D._name)){if(oe===D._name)return D;let Ve=D._name.length;"/"==oe[Ve]&&(oe=oe.slice(Ve+1),_e=oe.length)}function Ee(Ve,Qe){return Qe||(Ve._parent=D),_e>=oe.length-1||_e<0?Ve:U(Ve,oe.slice(_e+1))}for(;_e>0;){let Ve=_e>=oe.length?oe:oe.slice(0,_e);if(D._childs){for(let et=0;et<D._childs.length;++et)if(D._childs[et]._name==Ve)return Ee(D._childs[et]);if("TopFolder"===D._kind&&void 0!==D._childs[0]._online)for(let et=0;et<D._childs[0]._childs.length;++et)if(D._childs[0]._childs[et]._name==Ve)return Ee(D._childs[0]._childs[et],!0);if(I.check_keys){let et=null;for(let Tt=0;Tt<D._childs.length;++Tt)D._childs[Tt]._keyname===Ve&&(!et||et._cycle<D._childs[Tt]._cycle)&&(et=D._childs[Tt]);if(et)return Ee(et)}let Qe=I.allow_index;if("["===Ve[0]&&"]"===Ve[Ve.length-1]&&/^\d+$/.test(Ve.slice(1,Ve.length-1))&&(Qe=!0,Ve=Ve.slice(1,Ve.length-1)),Qe&&/^\d+$/.test(Ve)){let et=parseInt(Ve);if(Number.isInteger(et)&&et>=0&&et<D._childs.length)return Ee(D._childs[et])}}_e=oe.lastIndexOf("/",_e-1)}if(I.force){void 0===D._childs&&(D._childs=[]),_e=oe.indexOf("/");let Ve={_name:_e<0?oe:oe.slice(0,_e)};return D._childs.push(Ve),Ee(Ve)}return I.last_exists&&D?{last:D,rest:oe}:null}(z,le)}itemFullName(I,U,z){if(I&&"TopFolder"===I._kind)return"__top_folder__";let le="";for(;I;){if(void 0!==I._online&&!U)return le;if(I===U||"TopFolder"===I._kind||z&&!I._parent)break;le&&(le="/"+le),le=I._name+le,I=I._parent}return le}executeCommand(I,U){var z=arguments,le=this;return(0,ze.Z)(function*(){let D=le.findItem(I),oe=le.getOnlineItemUrl(D)+"/cmd.json",_e=(0,L.Ys)(U),Ee=[];if("_numargs"in D)for(let Qe=0;Qe<D._numargs;++Qe)Ee.push(Qe+2<z.length?z[Qe+2]:"");return(0!=Ee.length&&U?(0,Ie.Z)().then(Qe=>Qe.showCommandArgsDialog(D._name,Ee)):Promise.resolve(Ee)).then(Qe=>{if(null===Qe)return!1;let et="";for(let Tt=0;Tt<Qe.length;++Tt)et+=`${Tt>0?"&":"?"}arg${Tt+1}=${Qe[Tt]}`;return _e.empty()||(_e.style("background","yellow"),D._title&&_e.attr("title","Executing "+D._title)),(0,M.httpRequest)(oe+et,"text").then(Tt=>{if(_e.empty())return Tt;let Bt=Tt&&"false"!=Tt?"green":"red";return _e.style("background",Bt),D._title&&_e.attr("title",D._title+" lastres="+Tt),setTimeout(()=>{_e.style("background",null),D._icon&&_e.classed("jsroot_fastcmd_btn")&&_e.style("background-image",`url('${D._icon}')`)},2e3),"green"==Bt&&"_hreload"in D&&le.reload(),"green"==Bt&&"_update_item"in D&&le.updateItems(D._update_item.split(";")),Tt})})})()}getObject(I,U){var z=this;return(0,ze.Z)(function*(){let le,D,oe={item:null,obj:null};if(null===I)return oe;if((0,M.isStr)(I)?le=I:(0,M.isObject)(I)&&(void 0!==I._parent&&void 0!==I._name&&void 0!==I._kind?D=I:void 0!==I.name?le=I.name:void 0!==I.arg?le=I.arg:void 0!==I.item&&(D=I.item)),(0,M.isStr)(le)&&0==le.indexOf("img:"))return oe.obj={_typename:"TJSImage",fName:le.slice(4)},oe;D?le=z.itemFullName(D):D=z.findItem({name:le,allow_index:!0,check_keys:!0});let _e=D?null:z.findItem({name:le,last_exists:!0,check_keys:!0,allow_index:!0});if(null!==_e&&"last"in _e&&null!==_e.last){let Ve=z.itemFullName(_e.last);return(0,M.isObject)(I)&&"rest"in I&&(I.rest==_e.rest||I.rest.length<=_e.rest.length)?oe:z.expandItem(Ve,void 0,"hierarchy_expand_verbose"!=U).then(Qe=>{if(!Qe)return oe;let et=z.itemFullName(_e.last);return et&&(et+="/"),z.getObject({name:et+_e.rest,rest:_e.rest},U)})}if(oe.item=D,null!==D&&(0,M.isObject)(D._obj))return oe.obj=D._obj,oe;let Ee=D;for(;Ee;){if((0,M.isFunc)(Ee._get))return Ee._get(D,null,U).then(Ve=>(oe.obj=Ve,oe));Ee="_parent"in Ee?Ee._parent:null}return oe})()}isLastSibling(I){if(!I||!I._parent||!I._parent._childs)return!1;let U=I._parent._childs,z=U.indexOf(I);if(z<0)return!1;for(;++z<U.length;)if(!("_hidden"in U[z]))return!1;return!0}addItemHtml(I,U,z){if(!I||"_hidden"in I)return!0;let et,le=I===this.h,D="_childs"in I,oe=(0,Oe.St)(I._kind),_e="",Ee="",Ve=!1,Qe=!1,Tt=this.itemFullName(I);oe&&("icon"in oe&&(_e=oe.icon),"icon2"in oe&&(Ee=oe.icon2),!_e&&(0,M.isFunc)(oe.icon_get)&&(_e=oe.icon_get(I,this)),((0,Oe.JO)(oe)||"execute"in oe||"aslink"in oe||q(oe)&&!1!==I._more)&&(Ve=!0)),"_icon"in I&&(_e=I._icon),"_icon2"in I&&(Ee=I._icon2),!_e&&"_online"in I&&(I._icon=_e="img_globe"),!_e&&le&&(I._icon=_e="img_base"),(I._more||I._expand||I._player||I._can_draw)&&(Ve=!0);let Bt=Ve;!Bt&&(0,M.isStr)(I._kind)&&0==I._kind.indexOf("ROOT.")&&(Bt=Ve=!0),Ee||(Ee=_e),_e||(_e=D||I._more?"img_folder":"img_page"),Ee||(Ee=D||I._more?"img_folderopen":"img_page"),"update"===z?(U.selectAll("*").remove(),et=U):(et=U.append("div"),z&&z>=(I._parent._show_limit||M.settings.HierarchyLimit)&&(Qe=!0)),I._d3cont=et.node(),et.attr("item",Tt);let ve=et.append("div").attr("class","h_line"),Je=le?null:I._parent;for(;Je&&Je!==this.h;)ve.insert("div",":first-child").attr("class",this.isLastSibling(Je)?"img_empty":"img_line"),Je=Je._parent;let ct="",We=!1;le||(D&&!Qe?(ct=I._isopen?"img_minus":"img_plus",We=!0):ct="img_join");let Ke=this;if(ct){(Qe||this.isLastSibling(I))&&(ct+="bottom");let Mt=ve.append("div").attr("class",ct);We&&Mt.style("cursor","pointer").on("click",function(Ot){Ke.tree_click(Ot,this,"plusminus")})}if(this.with_icons&&!Qe){let Ot,Mt=I._isopen?Ee:_e;Ot=0==Mt.indexOf("img_")?ve.append("div").attr("class",Mt).attr("title",I._kind):ve.append("img").attr("src",Mt).attr("alt","").attr("title",I._kind).style("vertical-align","top").style("width","18px").style("height","18px"),("_icon_click"in I||oe&&"icon_click"in oe)&&Ot.on("click",function(sn){Ke.tree_click(sn,this,"icon")})}let ft=ve.append("a");if((Ve||D||Qe)&&ft.attr("class","h_item").on("click",function(Mt){Ke.tree_click(Mt,this)}),Qe)return I._break_point=!0,ft.attr("title","there are "+(I._parent._childs.length-z)+" more items").text("...more..."),!1;"disp_kind"in Ke?(M.settings.DragAndDrop&&Ve&&this.enableDrag(ft,Tt),M.settings.ContextMenu&&Bt&&ft.on("contextmenu",function(Mt){Ke.tree_contextmenu(Mt,this)}),ft.on("mouseover",function(){Ke.tree_mouseover(!0,this)}).on("mouseleave",function(){Ke.tree_mouseover(!1,this)})):I._direct_context&&M.settings.ContextMenu&&ft.on("contextmenu",function(Mt){Ke.direct_contextmenu(Mt,this)});let zt=I._name,Zt="";if("_realname"in I&&(zt=I._realname),"_title"in I&&(Zt=I._title),"_fullname"in I&&(Zt+="  fullname: "+I._fullname),Zt||(Zt=zt),ft.attr("title",Zt).text(zt+("_value"in I?":":"")).style("background",I._background?I._background:null),"_value"in I){let Mt=ve.append("p");"_vclass"in I&&Mt.attr("class",I._vclass),I._isopen||Mt.html(I._value)}if(D&&(le||I._isopen)){let Mt=et.append("div").attr("class","h_childs");this.show_overflow&&Mt.style("overflow","initial");for(let Ot=0;Ot<I._childs.length;++Ot){let sn=I._childs[Ot];if(sn._parent=I,!this.addItemHtml(sn,Mt,Ot))break}}return!0}toggleOpenState(I,U){let z=U||this.h;if(void 0===z._childs)return!(!I||this.with_icons&&!z._more&&!z._expand&&!this.canExpandItem(z))&&(this.expandItem(this.itemFullName(z)),void 0!==z._childs&&(z._isopen=!0),z._isopen);if(z!==this.h&&I&&!z._isopen)return z._isopen=!0,!0;let le=!1;for(let D=0;D<z._childs.length;++D)this.toggleOpenState(I,z._childs[D])&&(le=!0);return z===this.h||I||!z._isopen||le?(U||this.refreshHtml(),!1):(delete z._isopen,!0)}refreshHtml(){var I=this;return(0,ze.Z)(function*(){let U=I.selectDom();if(U.empty())return I;U.html("").style("overflow",I.show_overflow?"auto":"hidden").style("display","flex").style("flex-direction","column"),function K(fe){function I(D,oe,_e,Ee){return`.jsroot .img_${D} { display: inline-block; height: ${oe}px; width: ${oe}px; background-image: url("data:image/${_e};base64,${Ee}"); }`}(0,Y.DW)(`\n.jsroot .h_tree { display: block; white-space: nowrap; }\n.jsroot .h_tree * { padding: 0; margin: 0; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; box-sizing: content-box; line-height: 14px }\n.jsroot .h_tree img { border: 0px; vertical-align: middle; }\n.jsroot .h_tree a { text-decoration: none; vertical-align: top; white-space: nowrap; padding: 1px 2px 0px 2px; display: inline-block; margin: 0; }\n.jsroot .h_tree p { font-weight: bold; white-space: nowrap; text-decoration: none; vertical-align: top; white-space: nowrap; padding: 1px 2px 0px 2px; display: inline-block; margin: 0; }\n.jsroot .h_value_str { color: green; }\n.jsroot .h_value_num { color: blue; }\n.jsroot .h_line { height: 18px; display: block; }\n.jsroot .h_button { cursor: pointer; color: blue; text-decoration: underline; }\n.jsroot .h_item { cursor: pointer; }\n.jsroot .h_item:hover { text-decoration: underline; }\n.jsroot .h_childs { overflow: hidden; display: block; }\n.jsroot_fastcmd_btn { height: 32px; width: 32px; display: inline-block; margin: 2px; padding: 2px; background-position: left 2px top 2px;\n                      background-repeat: no-repeat; background-size: 24px 24px; border-color: inherit; }\n.jsroot_inspector { border: 1px solid ${M.settings.DarkMode?"green":"black"}; box-shadow: 1px 1px 2px 2px ${M.settings.DarkMode?"#555":"#aaa"}; opacity: 0.95; background-color: ${M.settings.DarkMode?"black":"#E6E6FA"}; }\n.jsroot_drag_area { background-color: #007fff; }\n${I("minus",18,"gif","R0lGODlhEgASAJEDAIKCgoCAgAAAAP///yH5BAEAAAMALAAAAAASABIAAAInnD+By+2rnpyhWvsizE0zf4CIIpRlgiqaiDosa7zZdU22A9y6u98FADs=")}\n${I("minusbottom",18,"gif","R0lGODlhEgASAJECAICAgAAAAP///wAAACH5BAEAAAIALAAAAAASABIAAAImlC+Ay+2rnpygWvsizE0zf4CIEpRlgiqaiDosa7zZdU32jed6XgAAOw==")}\n${I("plus",18,"gif","R0lGODlhEgASAJECAICAgAAAAP///wAAACH5BAEAAAIALAAAAAASABIAAAIqlC+Ay+2rnpygWvsizCcczWieAW7BeSaqookfZ4yqU5LZdU06vfe8rysAADs=")}\n${I("plusbottom",18,"gif","R0lGODlhEgASAJECAICAgAAAAP///wAAACH5BAEAAAIALAAAAAASABIAAAIplC+Ay+2rnpygWvsizCcczWieAW7BeSaqookfZ4yqU5LZdU36zvd+XwAAOw==")}\n${I("empty",18,"gif","R0lGODlhEgASAJEAAAAAAP///4CAgP///yH5BAEAAAMALAAAAAASABIAAAIPnI+py+0Po5y02ouz3pwXADs=")}\n${I("line",18,"gif","R0lGODlhEgASAIABAICAgP///yH5BAEAAAEALAAAAAASABIAAAIZjB+Ay+2rnpwo0uss3kfz7X1XKE5k+ZxoAQA7")}\n${I("join",18,"gif","R0lGODlhEgASAIABAICAgP///yH5BAEAAAEALAAAAAASABIAAAIcjB+Ay+2rnpwo0uss3kf5BGocNJZiSZ2opK5BAQA7")}\n${I("joinbottom",18,"gif","R0lGODlhEgASAIABAICAgP///yH5BAEAAAEALAAAAAASABIAAAIZjB+Ay+2rnpwo0uss3kf5BGrcSJbmiaZGAQA7")}\n${I("base",18,"gif","R0lGODlhEwASAPcAAPv6/Pn4+mnN/4zf/764x2vO//Dv84HZ/5jl/0ZGmfTz9vLy8lHB/+zr70u+/7S03IODtd7d6c/P0ndqiq/w/4Pb/5SKo/Py9fPy9tTU121kjd/f4MzM062tx5+zy5rO67GwxNDM14d8mJzn/7awwry713zX/9bW27u71lFRmW5uoZ+fxjOy/zm1/9HQ2o3g/2xfgZeMplav7sn9/6Cgv37X/6Dp/3jU/2uJ2M7J1JC63vn5+v38/d7e38PD0Z7o/9LR4LS01cPDzPb1+Nzb5IJ2lHCEv5bk/53C3MrJ3X56t+np6YF7o3JsndTU5Wtgh5GHoKaesuLi4mrO/19RdnnV/4WBqF5QdWPK/4+PvW5uu4+PuuHh4q7w/97e68C9z63w/9PT0+zs7FtbmWVXerS0yaqitpuSqWVlpcL6/8jD0H/C9mVajqWu3nFwpYqHtFfE/42DnaWl0bTz/5OPt+7u7tra5Y+Yz+Tk56fM6Gek5pG50LGpvOHh72LJ/9XU5lbD/6GnwHpujfDu8mxpntzb45qav7PH41+n6JeXyUZGopyYsWeGyDu2/6LQ44re/1yV41TD/8LC1zix/sS/zdTU4Y+gsd/c5L7z+a6uzE+3+XG89L6+087O1sTD3K2twoGBtWVbgomo4P///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAKMALAAAAAATABIAAAjtAEcJFLgDTyE7SVCsAAJgoMNRYTII8fEpkAckOpiEaPhwlARLexxhmpEGzJEmBAJ0HMXhw6MfXeZQsDHADZ8hK13kMTEAwQgEL2oYiaJgJZFDU24cqHCgSgFGFgysBJAJkB8BBQRggQNJxKCVo0rIcMAgEgMHmnBMaADWEyIWLRptEqWETRG2K//ombSmjRZFoaCo4djRyZ0HchIlSECIRNGVXur0WcAlCJoUoOhcAltpyQIxPSRtGQPhjRkMKyN0krLhBCcaKrJoOCO1I48vi0CU6WDIyhNBKcEGyBEDBpUrZOJQugC2ufPnDwMCADs=")}\n${I("folder",18,"gif","R0lGODlhEgASANUAAPv7++/v79u3UsyZNOTk5MHBwaNxC8KPKre3t55sBrqHIpxqBMmWMb2KJbOBG5lnAdu3cbWCHaBuCMuYM///urB+GMWSLad1D8eUL6ampqVzDbeEH6t5E8iVMMCNKMbGxq58FppoAqh2EKx6FP/Ub//4k+vr6///nP/bdf/kf//viba2tv//////mQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAC4ALAAAAAASABIAAAaRQJdwSCwaj8ik0jUYTBidAEA5YFkplANhehxABGAwpKHYRByVwHBibbvbo8+Q0TrZ7/jWBTHEtP6AgX8GK0MWLSWJiostEoVCBy0qk5SVLQmPLh4tKZ2eny0LmQ0tKKanqC0hmQotJK+wsS0PfEIBZxUgHCIaBhIJCw8ZBUMABAUrycrLBQREAAEm0tPUUktKQQA7")}\n${I("folderopen",18,"gif","R0lGODlhEgASANUAAO/v76VzDfv7+8yZNMHBweTk5JpoAqBuCMuYM8mWMZ5sBpxqBPr7/Le3t///pcaaGvDker2KJc+iJqd1D7B+GOKzQ8KPKqJwCrOBG7WCHbeEH9e4QNq/bP/rhJlnAffwiaampuLBUMmgIf3VcKRyDP/XhLqHIqNxC8iVMMbGxqx6FP/kf//bdf/vievr67a2tv/4k8aaGf//nP//mf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAADUALAAAAAASABIAAAaVwJpwSCwaj8ikUjgYIBIogEA5oFkZDEtheqzKvl9axKTJYCiAIYIGblutqtQwQYPZ73jZpCGM+f+AfiEdJy99M21tMxwxJQeGNTGIeHcyHzEjCpAAki2en54OIhULkAKSMiuqqysOGxIGkDWcMyy2t7YQDx58QqcBwMAkFwcKCwYgBEQFBC/Oz9AEBUUALtbX2FJLSUEAOw==")}\n${I("page",18,"gif","R0lGODlhEgASAOYAAPv7++/v7/j7/+32/8HBweTk5P39/djr/8Df//7///P5/8Ph//T09fn5+YGVw2t0pc7n/15hkFWn7ZOq0nqDsMDA/9nh7YSbyoqo2eTx/5G46pK873N+sPX6//f395Cjy83m/7rd/9jl9m13qGVqmoeh0n+OvI+z5Yyu387T//b6/2dtnvz9/32JtpS/8sbGxv7+/tvn92lwom96rHJ8rnSAsoep3NHp/8nk/7e3t+vr67a2tun1/3V4o+Hw/9vt/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAEEALAAAAAASABIAAAejgEGCg4SFhoeILjaLjDY1AQCHG0AGAA0eDBY1E5CGGjBAoQkCMTUSHwGGJwaiAh0iNbEvhiihAgIDPDwpFRw5hhgsuLk8Pz8HNL+FJSoKuT4+xzczyoQXzjzQxjcgI9WDDrraPzc4OA/fgibZ0eTmCzLpQS0Z7TflCwgr8hT2EOYIQpCQ16OgwYMRCBgqQGCHw4cOCRQwBCCAjosYL3ZCxNFQIAA7")}\n${I("question",18,"gif","R0lGODlhEgASAPelAOP0//7//9bs//n///j//9Ls/8Pn//r//6rB1t3f5crO2N7g5k1livT4+7PW9dXt/+v4/+Xl5LHW9Ov6/+j1/6CyxrfCz9rd5Nzj6un1/Z6ouwcvj8HBzO7+/+3//+Ln7BUuXNHv/6K4y+/9/wEBZvX08snn/19qhufs8fP7/87n/+/t7czr/5q1yk55q97v/3Cfztnu//z//+X6/ypIdMHY7rPc/7fX9cbl/9/h52WHr2yKrd/0/9fw/4KTs9rm75Svzb2+ya690pu92mWJrcT3//H//+Dv/Xym35S216Ouwsvt/3N/mMnZ5gEBcMnq/wEBXs/o/wEBetzw/zdYpTdZpsvP2ClGml2N3b3H0Nzu/2Z2lF1ricrl/93w/97h6JqluktojM/u/+/z9g8pVff4+ebu9q+1xa6/zzdFaIiXr5Wyz0xslrTK4uL//2uIp11rh8Xj/NXn+Oz2/9bf6bG2xAEBePP//1xwkK/K5Nbr/8fp/2OBtG53kai3ykVCYwEBde/6/7O4xabI+fD//+by/x8+jDhZpM/q/6jK58nO19ny/7jV7ZO42NHr/9H4/2ZwimSV6VBxwMDX7Nvf5hYwX5m20sfb6Ieqyk9Yjr/k/cPM2NDp/+/098Tl9yQ9jLfW+Mne8sjU30JklP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAKUALAAAAAASABIAAAjxAEsJHEiwoMEyGMaQWthg0xeDAlGUWKjoz5mFAegY/LBiIalMUK54JCWEoJkIpA6kSDmoAykKgRaqGSiq04A5A5r4AKOEAAAtE2S0USAwSwYIhUb8METiUwAvemLMCMVEoIUjAF5MIYXAThUCDzgVWDQJjkA0cngIEHAHCCAqRqJ0QeQoDxeBFS71KKDCwxonhwiZwPEkzo4+AimJqBFCjBs+UjZ4WmLgxhAQVgb6acGIBShJkbAgMSAhCQ1IBTW8sZRI055HDhoRqXQCYo4tDMJgsqGDTJo6EAlyYFNkVJDgBgXBcJEAucEFeC44n04wIAA7")}\n${I("histo1d",16,"gif","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAADAFBMVEW9vb2np6empqanpqenpqivr6//AAD3+fn09vb19vf3+Pv8+v//+//29/v3+fr19vbZ3Nza3d7X0+Lb3t7b3N3AwMP2+PimpqXe4+Th6uvQ0dTi6uzg5ebFx8nt6vb////r5/T2+fnl4e3a3uDN0NT7/P6lpqX3+vvn9vhcVVHu+//W1uH48//29P///f+mpqelpqb4/v/t/f9oY2H6///59v/x8fXw9fny9/78/v+lpqf7//9iXl12dHPW2t/R1tdtaGbT2dpoZmT6/v9ycnKCgoJpZGJ6dnT3///2///0//95entpa2t+gIKLjI55d3aDgYBvcXL1+/z9/v6lpaWGiIt7fH6Ji42SlJeEhIZubGyMjI17fYD+//+kpKSmpaaRk5WIioyRk5aYmp2OkJJ+f4KTlZilpKWcnqGVl5qcnqCfoaOYmp6PkZOdn6GsrrGoqq6qrK+rrbGpq66lp6uqrbCoqq20tLSsrKzc3NzMzMzPz88AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB6enrU4/9iYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmLU4/9KSkoAAAAAAAAAAAB6enrU4//m5uZiYmLm5uZiYmLm5uZiYmLm5uZiYmLm5ubU4/9KSkoAAAAAAAAAAAB6enrU4/9KSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkrU4/9KSkoAAAAAAAAAAABubm7U4//U4//U4//U4//U4//U4//U4//U4//U4//U4//U4/9KSkoAAAAAAAAAAABubm5KSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkpKSkoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt6dBwBYjWHVG2AAAAB3RSTlP///////8AGksDRgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAOxJREFUeNpjYGBkggBmFmYmRlY2BkZ2DhDg5OLm4eblY2RjYOIXEBQSFhEFkgKCYkxsDOKcEpJS0jKycvJS8gpcIAFFJWUVGFIFCqipa8hrymtpy+sI6crr6bMxGBgayRvLm8iamkmZW1gCBayslWxs7ewd7OwdlZStrYC2ODm7uLrJu3t4usl7mRiwMeh7+/j6+VsHBMr7+wQFhwAFQsPCIyKjomOiIsOiYuPYGOITEpOSU1LTElNTElPlgQLpGZlZ2Tm5eZm5OZm5IAGm/ILCouKS0rKS4oISeaDDypniEICpgo2hsgoZVLMBAHIaNxuoIXy2AAAAAElFTkSuQmCC")}\n${I("histo2d",16,"gif","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsSAAALEgHS3X78AAABUUlEQVR42o1R0U7CQBDkU/w/v8qk1/OhCS+88miMiQYMBMNRTqiisQiRhF6h13adsuVKDEYvm81kdmdv9q7V7XallP65I30UrpErLGW73SaiFtDF5dXWmNNITJrubJ4RWUI2qU33GTorAdSJMeMwhOxpEE20noRTYISaajBcMrsdOlkgME+/vILtPw6j+BPg5vZuFRuUgZGX71tc2AjALuYrpWcP/WE1+ADAADMAY/OyFghfpJnlSTCAvLb1YDbJmArC5izwQa0K4g5EdgSbTQKTX8keOC8bgXSWAEbqmbs5BmPF3iyR8I+vdNrhIj3ewzdnlaBeWroCDHBZxWtm9DzaEyU2L8pSCNEI+N76+fVs8rE8fbeRUiWR53kHgWgs6cXbD2OOIScQnji7g7OE2UVZNILflnbrulx/XKfTAfL+OugJgqAShGF4/7/T6/Ug+AYZrx7y3UV8agAAAABJRU5ErkJggg==")}\n${I("histo3d",16,"gif","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAADAFBMVEX////48OjIgTrHfjjKgTr78+yixH9HiQBHiACiw37jvJXfpVP6wzT7zTn7yj3lp1qOhyJzvgCa3wCa3gB2ugBinQ6Pt2D4+vfOjEr96p3986z83mT99rD99a3WhEvC0kaU3gCV3ADG71zo/KORzw1gowBonS3Z5snHfTb6uyD6tzD+/Nb7z0/70D3KdTXI1l3h+qTi+KXD7luU3ACY3gCc4QCi3g1QjwXHfjr710T6xi/+9sn70UH73E/MdDqhvQCi1BKkug2XxACU1wCS2ADD51rr9aJXkw/MpYDgpkb71U7+9MP7007hnEO3niOj0hGq3SCZtQCbtQCjtwj//+7F4Vui0wBDhgDk5eTMxcGxfi3TfTq+fyPPz4ak3xux5TG87kmZuwCZvACWtgDf8a+c0gCy3yNLiwD7/Ps1iwCiyAPF3F7j7bG67EW77kmq5yWYzwCZwwCTugDc8KTE51ve9YZCigCgwgCVuQDa5p7U9YSq4yWT2gCV2wCT2wCp2h/y+9HC6lW87DlChQBGigCixgCYvgDK3nyXvgC72UjG7mSj3xXL7XDK7W7b9J+36TrG9lBDhQBHigClywCbxQDJ33SXvwCYvQCcwADq+8S77Ei460Hd+KDD9VHU/2VEhgBdlR1rowCXwwDK4W6bxgCaxQCVvQDp/L+/8k7F91fn/6zC9V18tiNbkx/U1dSyv6RglihnoQCYwwChyQDs/7/P/2fE92F5tCBdkib19vXW1taoupVLiwNooQCWwADo/7h5tSBFhgaouZXx8vHOz86ftYVJiQBNjQKetIXt7u3Nzs0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBfAAAAAAAAAA2tmA2tmAAACQAAAAAAAAAAAAAAAAAAAAAATgAABNBfMAAAAAAAAA2tpQ2tpQAACQAAAAAAAAAAAAAAAAAAAAAAdQAABNBfMAAAAAAAAA2tsg2tsgAACQAAAAAAAAAAAAAAAAAAAAAAggAABNBfMCaVmCSAAAAAXRSTlMAQObYZgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAQVJREFUeNpjYGBkYmZhZWBj5+BkAAMubh5ePn4BQSFhEVExcaCAhKSUtIysnLyCopKyiqqaOoOGppa2jq6evoGhkbGJqZk5g4WllbWNrZ29g6OTs4urmzuDh6eXt4+vn39AYFBwSGhYOENEZFR0TGxcfEJiUnJKalo6A0NGZlZ2Tm5efkFhUXFJqTnQnrLyisqq6prauvqGxqZmoEBLa1t7R2dXd09vX/+EiUCBSZOnTJ02fcbMWbPnzJ03HyiwYOGixUuWLlu+YuWq1WvWAgXWrd+wcdPmTVu2btu+Y/06kHd27tq9Z+++/QcOHtq1E+JBhsNHjh47fuLIYQYEOHnq1EkwAwCuO1brXBOTOwAAAABJRU5ErkJggg==")}\n${I("graph",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AEFCgohaz8VogAAAT9JREFUOMulkz1LQlEYx39XmrIhcLa5i4mD4JBQrtHieDbb+gx3dbl9hca7tLi4VOsRMkKQVO7LLAQNNdSQgyJPg903tDT8w4HzPDznd56Xc1BKCVsokzTGjhPBXDcQAAEZDgPZCHDQaESH5/PYXyqZxp8A349vGHkjOXo3uXtp035sy79KABi8DQCwshb7x3U6gIYU6KNej+1kEwUEjbQeWtIb9mTsOCIgN1eXgiYd96OdcKNBOoCuQc47pFgoGmHw7skZTK9X16CUku5zV9BIkhz4vgSuG/nsWzvKIhmXAah+VpfJsxnGZMKkUln05NwykqOORq6UWkn+TRokXFEG/Vx/45c3fbrnFKjpRVkZgHKxbAC8NptrAfm9PAD2l42VtdJjDDwv2CSLpSaGMgsFc91hpdRFKtNtf6OxLeAbVYSb7ipFh3AAAAAASUVORK5CYII=")}\n${I("mgraph",16,"gif","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAADAFBMVEW9vb2np6empqanpqenpqivr68AAAD3+fn09vb19vf3+Pv8+v//+//29/v3+fr19vbZ3Nza3d6/wcLb3t7b3N3AwMPi4et2oz0yfwDh3+n2+PimpqXe4+Th6uvD0NHi6uzg5ebFx8nt6vY2ggDs/881gQDr5/T2+fnFz9DDZVrAIhDEZVvJ0tTN0NTX0+IvZAA4hAAuYgDT0N77/P6lpqX3+vvn9vi/JRL81cHBJhTu+//W1uEkXgD48//29P8fWwD//f+mpqelpqb4/v/t/f+yCwDBKBi3CgD6//8kYAD59v/x8fXQ0dTw9fny9/78/v+lpqf7//+wAADV5ezZ5e7g6PQjZQDf4+/W2t/R1tfT2drT3+OvAAD9///6/v/////k4vIiXwC1AAD3///2///X6Oz0//9+rUgzfwAwdADa6u6xCwDAJxb5///1+/z9/v6lpaUwfADo/8vl4e3a3uDb6eu+IxL808C+IhDZ5+nW2tr+//+kpKSmpaaArUgvewB1oj39/v/e5ebVd227HgvJa2H8///6/PylpKXn4+ze4eLg5+j9/v20tLSsrKzc3NzMzMzPz88AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAPAAAAAAEAAAEAAABzL1z/CSMAAAAAAAAAAAAAAAMAAAAmCTsAAAAAAAAAAAAAAAAAAAQAAQEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7op0gAAAAB3RSTlP///////8AGksDRgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAOhJREFUeNpjYGBkggBmFmYmRlY2BkZ2DhDg5OLm4eblY2RjYOIXEBQSFhEVE5cQl5RiYmOQ5pSRlZNXUFRSVlFV4wIJqGtoamnr6OrpGxgaGQMFTEzNzC0sraxtbPXs7B0c2RicnF1c3dw9PL28fXz9/IECAYFBwSGhYeERkVHRMYEBQFti4+ITEuOTklNSg9I8nNgYHOPTMzLjA7Oyc7Jz8/ILQAKFRRnFJaVl5RWVVdU1bAy18XX1DfGNTc0trW3t8UCBjvj4+M746q74+O7qHpAAUzwyADqsl6kGAZj62Bj6JyCDiWwAyPNF46u5fYIAAAAASUVORK5CYII=")}\n${I("tree",16,"gif","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAAAQAAAAEABcxq3DAAACjklEQVQ4y4WTy49LcRzFP+2tzmVUr9dIDJOWGGVBicgEyTQTCzIetUFssDKJSFhY2SARCYvBbGrj8QcIkYglk8xCmEQ9xqNexbQVY2Zub3un9/W7PwstHZH4Jie/7+Kc8/suzgnwr+kjBqSBbm2lkm6bHyH3XM9SZQ8Z8s3UQJPo0IJVof5EZ7v2faxMrKONlhmQWN5GSFEwLbhybjBPhDwVsmQ4AaA09Mou+k8d702EAzXiS6KEgzahoIthGOi6DtKlN71GS+/cEPs0WewaX2R9ZphssP776UhESY0WSpQNg7Jh4Anx+zgJVKpV3uZyvHjzir27NwGs/XVBH8c7N2nnjx7eSqlYxPM8JCCkxBU+rhA4dVhCYJgmyc4Ej96/7rLi8nNAPc/k2ZNp7cnTpziuiy8lvpSI+tvYhS/xpY8vJXMiEbZv3MzFq3cJqaqiPX72jnKt9kfQRPZ9f5qZ70sMawyAas1GseIy1rNtVXK8Mkm1VsP2PBzhYQuB5Qns+t6AJQSqqlIcrTAy+ONGENBWLF3MN71MxXGo1mE6DqbrYLou8z/a7L3uMKvgUnU8xk2T3u71ADGFDdgvCx/3TwkLEfKxhWDHbY+eYZ+Obz6tJcmRApRsuJ8Ex4Po7Jl8/TDBl7flm4Gm5F1vSZKaFQUh4cB9OLgaDB3UVrjwA+6tBnKAis4El8lwujmJSVQeoKAxFzqDcG0KWhZC6R30tUJRQD3Odxqy4G+DDFks4pisY5RLgRx5pZ5T4cKy95yhSrxZDBCaVqIMOpAd2EIeSEW7wLQh3Ar7RtCHbk0v0vQy1WdgCymgf147Sa0dhAOVMZgoALDu2BDZ/xloQAzQgIOhMCnPYQ+gHRvi4d/8n00kYDRVLifLAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDEwLTAyLTExVDE0OjUxOjE3LTA2OjAwHh/NoQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAwNC0wOS0yMFQxNzoxMDoyNi0wNTowMCcJijsAAAAASUVORK5CYII=")}\n${I("branch",16,"gif","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAADAFBMVEX///99plFAfADL27hpmyfP8YxyoilSiRiv0XGGygK02VtRiBmVwjh8xQCcziFZkhLz9+9BfQB2rwaCyACRygFQigXw9Ox0mkpXkQCJzwBblgBmkzP8/fxEgQBCfwBEgQejwITe3t5hkC1CfgBfjynZ2tmSq3eArDu72oNvoDJajyTY2dhFgQDCzLqhvn9EgAazx55XkwCVzC2824GMs1J0oUTY48xajiK72YR9qj2Tq3dhkix+th99xAB3uADA3oQ+fABEgABIgwW82oOUyi5VkgCf0CaEygB+wwCbzjN1mkrA3YZ1tAB7wAB+uB1vl0JdmgCJwwCKzwBoqAB4nVBikiuayzZ8wQCFywCg0Sjd3t1lkjFBfABLgwhKgwlmpgCK0QCJxQBclwDMzMzPz89GggCDpFxDfgCIpmPl5eUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABhAABQEABuZQBjYQBvcgAIZABiYQBlZAAABQDU/wCx/wCO/wBr/wBI/wAl/wAA/wAA3AAAuQAAlgAAcwAAUADU/wCx/wCO/wBr/wBI/wAl/wAA/gAA3AAAuQAAlgAAcwAAUADj/wDH/wCr/wCP/wBz/wBX/wBV/wBJ3AA9uQAxlgAlcwAZUADw/wDi/wDU/wDG/wC4/wCq/wCq/wCS3AB6uQBilgBKcwAyUAD//wD//wD//wD//wD//wD//wD+/gDc3AC5uQCWlgBzcwBQUAD/8AD/4gD/1AD/xgD/uAD/qgD/qgDckgC5egCWYgBzSgBQMgD/4wD/xwD/qwD/jwD/cwD/VwD/VQDcSQC5PQCWMQBzJQBQGQD/1AD/sQD/jgD/awD/SAD/JQD+AADcAAC5AACWAABzAABQAAD/1AD/sQD/jgD/awD/SAD/JQD/AADcAACwULzWAAAAAXRSTlMAQObYZgAAAAlwSFlzAAALEgAACxIB0t1+/AAAALZJREFUeNpjYAADRiZGBmTAzMLKxowswM7BycWNLMDEw8vHL4AkICgkLCIqhiQgLiEpJS0D5cjKySsoKimrqMJk1dQ1NLW0dXQZ9PTlZEECBoZGxiamOmbmmhaWViABaxtbO3sHRycTZxdXA7ANbu4enkxeDt4+vn7WIAH/gMCg4JBQprDwiEhBkEBUtGBMrI5OXHxCYpI/2BrV5OSU5NS09BjB6CiE01JTM5KTVZHcmpycCWEAANfrHJleKislAAAAAElFTkSuQmCC")}\n${I("leaf",16,"gif","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAADAFBMVEX////M27mQs2tilDA9eQA7egBbkhVTjAxJgwWBqVdGgQBrnySdxViu0WrE4oaYv2PC35NtoCqxvaSevX5FgAB7qje73nDK6neu109vpyVupCGo2kJ9xwBQhBtilC9pnx7G63PM6olgnAB/vQBDigCVv0yb1CaDzAB8uBJwmkNnnBnB52ui2Ca94WZopAE/hgCtz2ue2CmDywCByACKujtdjyqdvHpdlhLV9YdkowCFxwCw1lFXmAJvpC5jng1coABlpwBprAB8sitAfABDfgKx31Gr3TuCsi5sqABtqgBUkxTV85zL7I213mef0j+OxyKk00k/ewCp3TCSyhCw0mRRjQC23HmU0h55wQB5vQB4uQB1tgCIwBeJxgCBvQDC3ndCjACYx1204Fx6wwB7vQB1tABzsQBBfQBpkzdtpQB9tQA/iQCMu1SMukNUlQBYmQBsqAd4rh11rwZyrQBvqgBDfwCqvZVWkQBUnACp0Hq/43K733C+4X+w12eZyT2IvSN5sgpZkwBxmUSDqFlbnACJzQy742p/wwB2ugBysgBwrwBvqwBwqQBhmgBCfwDV2NN8pk1foACO1QBZmABRkABpqwB3uQB0sgB0rgBnogBUjgC7w7NymkFdnQBUhxmis41okjdCfgBGgQWHpWPMzMzb3NtumD5NhQzT09Pv8O/a2trOz87l5eXc3NzPz88AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABtHAA4HXQAAEgAAB9CTigAAABCfCQ4HTxy6Kw4HXRy+8xy+8wAAMwAAAAAAAAAAAAAAAAAAAAAAAgAAAgAABgYAAG7AAAAACgAAAgAAAgYAAEAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4Hnw4HnwAAFRpRiYmO2V0aWRtSSY7ZWdsZVNpdGNBO251amRGO3R0bCYmO3J3ZWlvVCY7c2xuaVc7d28ABCwBG8q3AAAAAXRSTlMAQObYZgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAOtJREFUeNpjYIACRiZmFlY2dg4ol5OLm4eXj19AUAjMFRYRFROXkJSSlpEF8+XkFRSVlFVU1dQ1NMF8LW0dXT19A0MjYxNTIN/M3MLSytrG1s7ewdHJGSjg4urm7uHp5e3j6+cfABIIDAoOCVUJC4+IjIqOAQk4x8bFJyQmJadEpaalpQMFMjKzsnNy8/ILCouKS0qBAmXlFZVV1TW1dfUNJY1NQIHmlta29o7ozq7unt6+fgaGCRMnTZ4ydVrU9BkzZ5XOBiqYM3HuvPkL0tPTFy5avATkzqXLlq9YuWoJEKxeA/Ho2nUMyAAA9OtDOfv2TiUAAAAASUVORK5CYII=")}\n${I("leaf_method",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAKlBMVEUAAAAAgADzExMAgIAAAADAwMCAgADxGRnuFxLnHhHuIyPKJQ/rLi7////aW8ZOAAAAAXRSTlMAQObYZgAAAAFiS0dEDfa0YfUAAAAHdElNRQfgCxIPFR/msbP7AAAAaUlEQVQI12NggANBBiYFMMNQxAjCYA4UUoZIBRpBGMyiQorGIIaxWRCEwSYo3igiCNJlaLkwGSwkJn1QGMhgNDQ0TDU2dACqERYTDksGG5SkmGoApBnFhBRTBUAiaYJpDIJgs10cGBgdACxbDamu76Z5AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE3LTAxLTE3VDA5OjMwOjM1KzAxOjAwyGHxKQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNi0xMS0xOFQxNToyMTozMSswMTowMJgvuUkAAAAASUVORK5CYII=")}\n${I("globe",18,"gif","R0lGODlhEwASAPcAAPr7/AFyAQFCpwGD6jy3/wE9on7N0AE+pAFjyMLI0AE2mwF94wGP9QFpzgU3nISSopWgrmJsfTNLfgFHqAFuBilNiTp4sLnGzwWb/0xYb/P09mRygGl0hRlnMgR12V2Pr6e4xF9peS2Cyh5FpBdSfgF84YmisdPa30hjvw+foQFYvlWj4HWIlkWb5gk5n/b4+gw+kgFMscXb6ylmieDj5ju2pylTsniElgqd/u/x8wGW/O7v8SVMsUq+JSSJXQFiwfv+/AFqvB9ntobZeKbc/9vt+B+YmW2rvKruzQGPkm3PPrjmxQFIklrFLVbD4QGMYaXkoIPD13LC+nGw5AGFQHG66gF2eBaJxket9sLf84HI+wF7axBdbg2c0CR+1QFsEIfJ7yqoUIbH41tldgF+KzVTjn3QfitZgTJZkaDR8gKDsXeWrE+zogE3nCeKzQFtJ0tknjdnbQGB6EJgxQFqAcLJ0WC//yKm/wE+o7vI0ARozEOz/4/g/4KToyaX4/D09pCpuNHV24HA6gw7oAF/AXWKnEVSb5TI6VzDTrPprxBQts7e6FNdcBA9oySd9RRjPAhnD2NvgIydrF+6wdLo9v7//2K+twKSdDmKyeD56wGCyHq12VnF+ZXXsARdTjZWthShoo7gtilDlAFw1RCXvF+z6p/R8kqZzAF0Oj5jjFuJqgFoAkRgxtzr9YmcrJKsugFlylfBgxJGhjJIeFnFuhmi/+bo65ipt8Hn+UhVco7B5SZowAGBKoaZqAGGAVHBUwF8Qq7Y819qe4DEoVyYwrnb8QGN9GCy6QFTuHB9jgGY/gFRtuTu9ZOhr150iwFbwTFiwFus4h9mYt/y+kWZ35vM7hGfccz43Xy/6m3BuS1GiYveqDRfwnbUV4rdu////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAN8ALAAAAAATABIAAAj/AL8JHEiwVTVspar8ITiwiJhswyaBibJJUq9Trxh+S2OAVihvSzqRcoTpmy5ADIPFqrHtGpBETbrIuXJEBgiGbHoogTItExJOoAbw8rHmAkFTC8KYwTWkGx8COp4AozAjD8Epo4wQQfTLCQEcxqigoiONBUFqerRYspYCgzIGmgi98cRlA8EVLaR4UJPk0oASVgKs6kAiBMFDdrzAarDFF5kgCJA9ilNBGMFjWAQse/YjwBcVMfCcgTMr2UBKe0QIaHNgAiQmBRS4+CSKEYSBWe44E6JoEAxZDhrxmDPCEAcaA4vVinTCwi5uKFhBs6EtQ4QEOQYy8+NGUDRiqdCUJJGQa8yNQDsADHyxSNUHE4Vc3erzoFkdWxoAVNLIv7///98EBAA7")}\n${I("canvas",16,"gif","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAADAFBMVEX/AAC1t7etsLCsrq6rrq6rrq2tr6+0tratsK/////p6enIysrl5OTn5uXo5+ajpaXo5+dhhKdliKlmialgg6elp6f6+/vIycnr7Ozw7u7x7u7x7u3t6+vLzMvp7vbs7/bz8PD17+3z7u2rrq/6xS76xy13zv9+z/+EwLF4zP/38/NfgqWAoL36uCj6vCmR2f+TxamSrBmNvoj++fz8+Pf69/WZ3f+g4P+n4/+Cnw2Dox16nQ3//f9hg6eBob6x5/+46f+77P+p2NKSZhOi1s////7//fusrq98sB6CsyWDtSmFuC9+dBl/tilfgqasr6+sr7DbAADcAABcgqWAoLyusLC4urqssLCssLGrsLCrr7Ctr67c3NzMzMwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABoAAAKAgJldmV0dU8GB3JvTnZDBWVyb2xsYwdjYWxhUBB0bmVrY2F1b3IICGRPYmFyZWQAAAXj1P/Hsf+rjv+Pa/9zSP9XJf9VAP9JANw9ALkxAJYlAHMZAFDU1P+xsf+Ojv9ra/9ISP8lJf8AAP4AANwAALkAAJYAAHMAAFDU4/+xx/+Oq/9rj/9Ic/8lV/8AVf8ASdwAPbkAMZYAJXMAGVDU8P+x4v+O1P9rxv9IuP8lqv8Aqv8AktwAerkAYpYASnMAMlDU//+x//+O//9r//9I//8l//8A/v4A3NwAubkAlpYAc3MAUFDU//Cx/+KO/9Rr/8ZI/7gl/6oA/6oA3JIAuXoAlmIAc0oAUDLU/+Ox/8eO/6tr/49I/3Ml/1cA/1UA3EkAuT0AljEAcyUAUBnU/9Sx/7GO/45r/2tI/0gl/yUA/gAA3AAAuQAAlgAAcwAAUADj/9TH/7Gr/46P/2tz/0hX/yVV/wBJ3AAQ+AFLAAAAAXRSTlMAQObYZgAAAAlwSFlzAAALEgAACxIB0t1+/AAAALpJREFUeNpjYGBkYmZhYWFlYWNngAAOTijg4oYIMHPy8PLx8nDycwpwQwUEhYSFRDhFxTi5xCECEpJS0jKcsqL8nGwgARZOOXkFRSWwMcwgAWVOFVU1dQ1NLW0dmICunr6BoZGxiSlEgJnTzNzC0sraxtYOJmDv4Ojk7MLp6gYRcOf08PTy9vHl9IOa4c+JAGCBAM7AoEDOwEDO4BCIABOSilCQQBhTeERkVGS4f3R0aBhIICYWAWIYGAClIBsa7hXG7gAAAABJRU5ErkJggg==")}\n${I("profile",16,"gif","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAACXBIWXMAAAsSAAALEgHS3X78AAABZElEQVR42o1R22rCQBD1U/p//apCNtsHwRdfBaFIKbRoUVKMMTWBWIxVCq2b+07POrn4UKjDMpw9O2fm7G5vNBpJKe2/Qto4uEc2WMrBYEBEPaAky36UulwnlSRpUeZEBSGrpEiyHJVGAPVJqZvbO3ftv83Dle+vvPV4/LD0PGYAcKrSFJUsEOgHKoj3s9dFGH9uou3k8ekQKxyDQcYpBnYC7Hm9zBZmlL8BiIJDC0AWpa4FwhZJXoDCBgYAjgU5ToBt+k1tL14ssFNNvIEBAFwVljJlSDBfpwyg1ISnYoEsiHju5XLcd+T50q0tEQm7eaWKKNfUWgKApUsbPFY0lzY6DraEZm585Do/CLMzqLQWQnSC9k34lVa7PTsBs/zYOa4LB5ZlnQXCbif40Ra50jUwE6JtCcMlUiMQlugEQYisG8CWtGlRdQL+jmui/rjhcAhk/Reo6ff7RuB53vN1MZ1OIfgFQC1cuR3Y6lIAAAAASUVORK5CYII=")}\n${I("execute",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAABlBMVEXAwMAAxwCvbOAvAAAAAXRSTlMAQObYZgAAAAlwSFlzAAALEgAACxIB0t1+/AAAACBJREFUCFtjYIABHgYGfiA6wMD/gYH/B5g8ABLhYUAGAHniBNrUPuoHAAAAAElFTkSuQmCC")}\n${I("file",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQEAYAAABPYyMiAAAABmJLR0T///////8JWPfcAAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAAAQAAAAEABcxq3DAAAA2klEQVRIx61VURbDIAgTX+9ljg4n2z5sNouj1ml+LE9rQkSU5PA6kTZBToTznj5aqKqq+py4lFJKScnMzCwlAAB6IbnNuyXycd1g3oHrf32CmR9mZqpVOdDHs2DmI+c+AiJixu1RAN9xFUcdWCjVIr8xCX8Jubc8Ao9CJF8nRFgNJBxZSCEkjmrIxxSS0yIAoBU4OkpfU8sCPEbEvqaOXcR31zWORbYJ8EI8rsK+DWm7gMVb8F/GK7eg6818jNjJZjMn0agY7x6oxqL5sWbIbhLHoQN78PQ5F3kDgX8u9tphBfoAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMDItMDZUMTA6Mjc6MzErMDE6MDChLu/mAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE0LTExLTEyVDA4OjM5OjIwKzAxOjAwIGvf8wAAAABJRU5ErkJggg==")}\n${I("text",16,"gif","R0lGODlhEgASALMAAP/////MzP+Zmf9mZv8zM/8AAMzM/8zMzJmZ/5mZmWZm/2ZmZjMz/zMzMwAA/////yH5BAUUAA8ALAAAAAASABIAAARo8MlJq73SKGSwdSDjUQoIjhNYOujDnGAnFXRBZKoBIpMw1ICHaaigBAq/AUK1CVEIhcfPNFlRbAEBEvWr0VDYQLYgkCQWh8XiAfgRymPyoTFRa2uPO009maP8ZmsjAHxnBygLDQ1zihEAOw==")}\n${I("task",18,"png","iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAAAAACMfPpKAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAABIAAAASABGyWs+AAAATklEQVQY05XQUQoAIAgD0N3JY3fIChWttKR9xYvBCj0J0FsI3VVKQflwV22J0oyo3LOCc6pHW4dqi56v2CebbpMLtcmr+uTizz6UYpBnADSS8gvhaL5WAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE2LTA0LTA3VDA5OjQyOjQ4KzAyOjAwMgzRmQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMlQwODozOToxOCswMTowMJ0LlncAAAAASUVORK5CYII=")}\n${I("pavetext",18,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAAsSURBVBjTY2CgCuBAAt1gASS5KKgARBpJACSEooIsARRbkABYoDsKCRDhEQBA2Am/6OrPewAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNi0wMS0wNFQxMDoxODoyNyswMTowMHsz6UQAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTJUMDg6Mzk6MjArMDE6MDAga9/zAAAAAElFTkSuQmCC")}\n${I("pavelabel",18,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJ0Uk5TAAB2k804AAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAAAEgAAABIAEbJaz4AAAApSURBVBjTY2CgCuBAAt1gASS5KJgABzUEgABFANUWJAAWYIhCAkR4BAAHoAkEyi2U3wAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNi0wMS0wNFQxMDoxODoyNyswMTowMHsz6UQAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTJUMDg6Mzk6MjArMDE6MDAga9/zAAAAAElFTkSuQmCC")}\n${I("list",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AEECTc01vBgywAAAE9JREFUOMu1k8ERwDAMwqRc9l/Z/eeRpKZlABkOLFD0JQGgAAah5kp8Y30F2HEwDhGTCG6tX5yqtAV/acEdwHQHl0Y8RbA7pLIxRPziGyM9xLEOKSpp/5AAAAAASUVORK5CYII=")}\n${I("color",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAM1BMVEUAAAAA4xcavGZGS1xZT79lW+9wdvFz/3N6fo3RISTZwXbyniXz80v/AAD/zAD/66v//6vGWiYeAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADswAAA7MAbGhBn4AAAAHdElNRQfgAQQLLBhOmhPcAAAAIklEQVQY02NgRgEMDAzMnLzcfDwC7IxMbKwsQ10A3XMEAQA3JQVNowlkTAAAAABJRU5ErkJggg==")}\n${I("colz",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAMFBMVEV6fo0A4xcavGZGS1xZT79lW+9wdvFz/3PRISTZwXbyniXz80v/AAD/zAD/66v//6t1AkcGAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADswAAA7MAbGhBn4AAAAHdElNRQfgAQQLNwdqpNWzAAAAT0lEQVQI12NgYGAwNjZmAAOLjmY0hs2ZwxCG1arFEIbt3csQhvXuzRCG/f/PEIZ5eTGEYSgoDGEYKSlDGGZpyRCGaWgwhGHi4gxhwG0HAwCr3BFWzqCkcAAAAABJRU5ErkJggg==")}\n${I("frame",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAAAmJLR0QA/4ePzL8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfgAQQLOwq4oOYCAAAAcUlEQVQoz7WQMQqAMAxFX0Uk4OLgIbp4oZ7BA/cOXR0KDnGpRbGayT+EQF74nw+GHIBo+5hdWdqAaFDoLIsegCSeWE0VcMxXYM6xvmiZSYDTooSR4WlxzzBZwGYBuwWs4mWUpVHJe1H9F1J7yC4ov+kAkTYXFCNzDrEAAAAASUVORK5CYII=")}\n${I("class",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QAvQC9AL1pQtWoAAAAjUlEQVR42p2T2wnAIAxFM0g/O6jDdBBHcAyHKKQYjfiI0UY4P8I9BG4CID8smB4+8SUsohpO3CFzKqmBFrhCO4kqQnCR6MJF4BEJTVQFhBAmASNIZkH6a0OMc8oUDAu8z7RhTTBVyIIEhxeCdYWjQApvK2TBrgGpwpP1livsBXC0ROMO/LqDKjKEzaf8AZWbJP6pTT9BAAAATHpUWHRTb2Z0d2FyZQAAeNpz0FDW9MxNTE/1TUzPTM5WMNEz0jNQsLTUNzDWNzBUSC7KLC6pdMitLC7JTNZLLdZLKS3IzyvRS87PBQDzvxJ8u4pLSgAAADN6VFh0U2lnbmF0dXJlAAB42ktKs0hLMkk2MzJKNEuzMLKwtEizSElMMbNITUw0NUtNAQCc7Qma0Goe1QAAAABJRU5ErkJggg==")}\n${I("member",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QAvQC9AL1pQtWoAAAAX0lEQVR42mNgAAIVBob/+DADPgBS8GCPBV6M1xCKDcDnBRcoZhgW4D8DBV75v2bLATAmxyC4ZmRMrCFYNfeU9BBvwJwpS8AYWTNZBoAwTDPFBpAciDCDyNFMtXSAFwAAUyq0GRPbbz4AAABMelRYdFNvZnR3YXJlAAB42nPQUNb0zE1MT/VNTM9MzlYw0TPSM1CwtNQ3MNY3MFRILsosLql0yK0sLslM1kst1kspLcjPK9FLzs8FAPO/Eny7iktKAAAAM3pUWHRTaWduYXR1cmUAAHjaS01JNrE0S00zSbU0NEsxMbMwM0xOSjYwNzY3NLRIMjUCAJcdCJ2BHe6SAAAAAElFTkSuQmCC")}\n${I("tf1",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADFBMVEX/////AP8/SMz///+Cf5VqAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfgCw4QHgSCla+2AAAAL0lEQVQI12MQYAACrAQXiFBoABINCgwMQgwcDAwSDEwMDKmhodMYJjAwaKDrAAEAoRAEjHDJ/uQAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTYtMTEtMTRUMTc6Mjk6MjErMDE6MDDxcSccAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE2LTExLTE0VDE3OjI5OjA1KzAxOjAwNka8zgAAAABJRU5ErkJggg==")}\n${I("tf2",16,"png","iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAgMAAABinRfyAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAADFBMVEX/////AP8A/wD////pL6WoAAAAAXRSTlMAQObYZgAAAAFiS0dEAIgFHUgAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfgCw4PNgzGaW1jAAAARUlEQVQI12NgEGDQZAASKkBigQKQ6GhgYBDiYgASIiAigIGBS8iBgUFhEpCnoAEkUkNDQxkagUIMrUDMMAVETAARQI0MAD5GCJ7tAr1aAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE2LTExLTE0VDE2OjUxOjUzKzAxOjAwi1Gz3gAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNi0xMS0xNFQxNjo1MTozNiswMTowMG5bLUIAAAAASUVORK5CYII=")}\n`,fe)}(U.node());let z=I,le=[],D=null;if(I.forEachItem(Ee=>{delete Ee._d3cont,"_fastcmd"in Ee&&"Command"==Ee._kind&&le.push(Ee),"_status"in Ee&&!D&&(D=Ee)}),!I.h||U.empty())return I;if(le.length){let Ee=U.append("div").attr("style","display: inline; vertical-align: middle; white-space: nowrap;");for(let Ve=0;Ve<le.length;++Ve){let Qe=Ee.append("button").text("").attr("class","jsroot_fastcmd_btn").attr("item",I.itemFullName(le[Ve])).attr("title",le[Ve]._title).on("click",function(){z.executeCommand((0,L.Ys)(this).attr("item"),this)});le[Ve]._icon&&Qe.style("background-image",`url('${le[Ve]._icon}')`)}}let oe=U.append("p").attr("class","jsroot").style("margin-bottom","3px").style("margin-top",0);oe.append("a").attr("class","h_button").text("open all").attr("title","open all items in the browser").on("click",()=>I.toggleOpenState(!0)),oe.append("text").text(" | "),oe.append("a").attr("class","h_button").text("close all").attr("title","close all items in the browser").on("click",()=>I.toggleOpenState(!1)),(0,M.isFunc)(I.removeInspector)&&(oe.append("text").text(" | "),oe.append("a").attr("class","h_button").text("remove").attr("title","remove inspector").on("click",()=>I.removeInspector())),"_online"in I.h&&(oe.append("text").text(" | "),oe.append("a").attr("class","h_button").text("reload").attr("title","reload object list from the server").on("click",()=>I.reload())),"disp_kind"in I&&(oe.append("text").text(" | "),oe.append("a").attr("class","h_button").text("clear").attr("title","clear all drawn objects").on("click",()=>I.clearHierarchy(!1)));let _e=U.append("div").attr("class","jsroot").style("font-size",I.with_icons?"12px":"15px").style("flex","1");if(I.show_overflow||_e.style("overflow","auto"),I.background&&_e.style("background-color",I.background).style("margin","2px").style("padding","2px"),I.textcolor&&_e.style("color",I.textcolor),I.addItemHtml(I.h,_e.append("div").attr("class","h_tree")),I.setTopPainter(),D&&!I.status_disabled&&!(0,M.decodeUrl)().has("nostatus")){let Ee=(0,M.findFunction)(D._status);if((0,M.isFunc)(Ee))return I.createStatusLine().then(Ve=>{Ve&&Ee(Ve,I.itemFullName(D))})}return I})()}updateTreeNode(I,U){if(void 0===U||U.empty()){U=(0,L.Ys)(I._d3cont?I._d3cont:null);let z=this.itemFullName(I);if(U.empty()&&(U=this.selectDom().select(`[item='${z}']`)),U.empty()&&"_cycle"in I&&(U=this.selectDom().select(`[item='${z};${I._cycle}']`)),U.empty())return}this.addItemHtml(I,U,"update"),this.brlayout?.adjustBrowserSize(!0)}updateBackground(I,U){if(!I||!I._d3cont)return;let z=(0,L.Ys)(I._d3cont);if(z.empty())return;let le=z.select(".h_item");le.style("background",I._background?I._background:null),U&&I._background&&le.node().scrollIntoView(!1)}focusOnItem(I){var U=this;return(0,ze.Z)(function*(){(0,M.isStr)(I)&&(I=U.findItem(I));let z=I?U.itemFullName(I):"";if(!z)return!1;let le=I,D=!1;for(;le;)void 0!==le._childs&&!le._isopen&&(le._isopen=!0,D=!0),le=le._parent;return(D?U.refreshHtml():Promise.resolve(!0)).then(()=>{let _e=U.selectDom().select(`[item='${z}']`);return!_e.empty()&&(_e.node().scrollIntoView(),!0)})})()}tree_click(I,U,z){if(!U)return;let le=(0,L.Ys)(U.parentNode.parentNode),D=le.attr("item"),oe=D?this.findItem(D):null;if(!oe)return;if(oe._break_point){delete oe._break_point,this.addItemHtml(oe,le,"update");let Tt=oe._parent,Bt=Tt._childs.indexOf(oe),ve=(0,L.Ys)(le.node().parentNode);if(Bt<0)return console.error("internal error");Tt._show_limit=2*(Tt._show_limit||M.settings.HierarchyLimit);for(let Je=Bt+1;Je<Tt._childs.length;++Je){let ct=Tt._childs[Je];if(ct._parent=Tt,!this.addItemHtml(ct,ve,Je))break}return}let Ee,_e=oe;for(;_e&&void 0===(Ee=_e._click_action);)_e=_e._parent;z||(z="item");let Qe=(0,Oe.wu)(oe._kind,"ROOT.TKey"==oe._kind&&oe._more?"noinspect":""),et=Qe.handle;if("icon"==z){let Tt=null;return(0,M.isFunc)(oe._icon_click)?Tt=oe._icon_click:(0,M.isFunc)(et?.icon_click)&&(Tt=et.icon_click),void(Tt&&Tt(oe,this)&&this.updateTreeNode(oe,le))}if("item"==z&&"_expand"in oe&&!I.ctrlKey&&!I.shiftKey&&(z="plusminus"),"plusminus"==z&&!("_childs"in oe)&&oe._more||"item"==z&&"expand"===Ee)return this.expandItem(D,le);if("item"==z){if(oe._player)return this.player(D);if(et?.aslink)return window.open(D+"/");if(et?.execute)return this.executeCommand(D,U.parentNode);if(et?.ignore_online&&this.isOnlineItem(oe))return;let Tt=oe._can_draw,Bt=oe._more,ve="expand"===this.default_by_click,Je="";if(I.shiftKey&&(Je=et?.shift||"inspect","inspect"==Je&&et?.noinspect&&(Je="")),I.ctrlKey&&et?.ctrl&&(Je=et.ctrl),!Je&&!et?.always_draw)for(let ct=oe._parent;ct;ct=ct._parent)if(ct._painter){Tt=!1,void 0===Bt&&(Bt=!1);break}if(oe._childs&&(Bt=!1),void 0===Tt&&(Tt=Qe.draw),void 0===Bt&&(Bt=Qe.expand||Qe.get_expand),Tt&&Bt&&!Je&&(ve||"expand"===et?.dflt||this.isItemDisplayed(D))&&(Tt=!1),Tt&&!Je&&(Je="__default_draw_option__"),Tt)return this.display(D,Je,!0);if(Bt||ve)return this.expandItem(D,le);if((0,M.isStr)(oe._kind)&&0===oe._kind.indexOf("ROOT.")&&Qe.inspect&&!1!==Tt)return this.display(D,"inspect",!0);if(!oe._childs||oe===this.h)return}oe._isopen?delete oe._isopen:oe._isopen=!0,this.updateTreeNode(oe,le)}tree_mouseover(I,U){let z=(0,L.Ys)(U.parentNode.parentNode).attr("item"),le=this.findItem(z);if(!le)return;let D,oe=le;for(;oe&&!D;)D=oe._painter,oe=oe._parent;(0,M.isFunc)(D?.mouseOverHierarchy)&&D.mouseOverHierarchy(I,z,le)}direct_contextmenu(I,U){I.preventDefault();let z=(0,L.Ys)(U.parentNode.parentNode).attr("item"),le=this.findItem(z);le&&(0,M.isFunc)(this.fill_context)&&(0,Ie.Z)(I,this).then(D=>{this.fill_context(D,le),D.size()>0&&(D.tree_node=U.parentNode,D.show())})}fillSettingsMenu(I,U){I.addSettingsMenu(!0,U,z=>{"refresh"==z?(this.forEachRootFile(le=>x(le,le._file.fKeys,le._file,"")),this.refreshHtml()):"dark"==z&&(this.brlayout?.createStyle(),this.disp&&this.disp.forEachFrame(le=>{let D=(0,Ze.FG)(le);(0,M.isFunc)(D?.changeDarkMode)&&D.changeDarkMode()}))})}toggleDarkMode(){M.settings.DarkMode=!M.settings.DarkMode}tree_contextmenu(I,U){I.preventDefault();let z=(0,L.Ys)(U.parentNode.parentNode).attr("item"),le=this.findItem(z);if(!le)return;let D=this.getOnlineProp(z),oe=this.getFileProp(z);return(0,Ie.Z)(I,this).then(Ee=>{if(z&&le._parent||"_jsonfile"in le)if(D)this.fillOnlineMenu(Ee,D,z);else{let Ve=(0,Oe.wu)(le._kind,"nosame");if(le._can_draw&&(Ve.opts||(Ve.opts=[""]),Ve.opts.indexOf("")<0&&Ve.opts.unshift("")),Ve.opts&&Ee.addDrawMenu("Draw",Ve.opts,Qe=>this.display(z,Qe)),oe&&Ve.opts&&!oe.localfile){let Qe=function _e(Ee){const Qe=document.createElement("div");return Qe.innerHTML=`<a href="${et=Ee,et.split("&").join("&amp;").split("<").join("&lt;").split('"').join("&quot;")}">x</a>`,Qe.firstChild.href;var et}(oe.fileurl);if(0==Qe.indexOf(M.source_dir)&&(Qe=Qe.slice(M.source_dir.length)),Qe=oe.kind+"="+Qe,oe.itemname){let et=oe.itemname;et.search(/\+| |\,/)>=0&&(et=`'${et}'`),Qe+="&item="+et}Ee.addDrawMenu("Draw in new tab",Ve.opts,et=>window.open(`${M.source_dir}index.htm?nobrowser&${Qe}&opt=${et}`))}(Ve.expand||Ve.get_expand)&&!("_childs"in le)&&(le._more||!("_more"in le))&&Ee.add("Expand",()=>this.expandItem(z)),le._kind==="ROOT."+M.clTStyle&&Ee.add("Apply",()=>this.applyStyle(z))}else{let Ve=[],Qe="",et=0,Tt=()=>et++>0?"&":"?";this.forEachRootFile(Je=>Ve.push(Je._file.fFullURL)),this.getTopOnlineItem()||(Qe=M.source_dir+"index.htm"),this.isMonitoring()&&(Qe+=Tt()+"monitoring="+this.getMonitoringInterval()),1==Ve.length?Qe+=Tt()+"file="+Ve[0]:Ve.length>1&&(Qe+=Tt()+"files="+JSON.stringify(Ve)),this.disp_kind&&(Qe+=Tt()+"layout="+this.disp_kind.replace(/ /g,""));let Bt=[],ve=[];this.disp&&this.disp.forEachFrame(Je=>{let ft,ct=new Ze.tK(Je),We=ct.getTopPainter(),Ke=We?We.getItemName():null;Ke?ft=We.getDrawOpt()||We.getItemDrawOpt():(We=null,ct.forEachPainter(zt=>{let Zt=zt.getItemName();if(!Zt)return;let Mt=zt.getDrawOpt()||zt.getItemDrawOpt()||"";We?We.getPadPainter()===zt.getPadPainter()&&(0==Mt.indexOf("same ")&&(Mt=Mt.slice(5)),Ke+="+"+Zt,ft+="+"+Mt):(We=zt,Ke=Zt,ft=Mt)})),Ke&&(Bt.push(Ke),ve.push(ft||""))}),1==Bt.length?Qe+=Tt()+"item="+Bt[0]+Tt()+"opt="+ve[0]:Bt.length>1&&(Qe+=Tt()+"items="+JSON.stringify(Bt)+Tt()+"opts="+JSON.stringify(ve)),Ee.add("Direct link",()=>window.open(Qe)),Ee.add("Only items",()=>window.open(Qe+"&nobrowser")),this.fillSettingsMenu(Ee)}(0,M.isFunc)(le._menu)&&le._menu(Ee,le,this),Ee.size()>0&&(Ee.tree_node=U.parentNode,Ee.separ&&Ee.add("separator"),Ee.add("Close"),Ee.show())}),!1}player(I,U){var z=this;return(0,ze.Z)(function*(){let le=z.findItem(I);if(!le||!le._player||!(0,M.isStr)(le._player))return null;let D=null;if(le._module){let oe=yield z.importModule(le._module);D=oe?oe[le._player]:null}else(le._prereq||le._player.indexOf("JSROOT.")>=0)&&(yield z.loadScripts("",le._prereq)),D=(0,M.findFunction)(le._player);return(0,M.isFunc)(D)?(yield z.createDisplay(),D(z,I,U)):null})()}canDisplay(I,U){if(!I)return!1;if(I._player)return!0;if(void 0!==I._can_draw)return I._can_draw;if("inspect"==U)return!0;const z=(0,Oe.St)(I._kind,U);return(0,Oe.JO)(z)}isItemDisplayed(I){let U=this.getDisplay();return!!U&&null!==U.findFrame(I)}display(I,U,z){var le=this;return(0,ze.Z)(function*(){let D=null,oe=!1,_e=null,Ee=I,Ve=I,Qe="::_display_on_frame_::",et=U?U.indexOf(Qe):-1;et>=0&&(Ve=U.slice(et+Qe.length),U=U.slice(0,et));const Tt=(Bt,ve)=>(ve&&console.log("When display ",I,"got",ve),oe&&_e&&delete _e._doing_update,oe||(0,Y.Ae)(),(0,M.isFunc)(Bt?.setItemName)&&(Bt.setItemName(Ee,oe?null:U,le),_e&&!_e._painter&&(_e._painter=Bt)),Bt||D);return le.createDisplay().then(Bt=>{if(!Bt)return Tt();if(_e=le.findItem(Ee),_e&&"_player"in _e)return le.player(Ee,U).then(ct=>Tt(ct));if(oe=(0,M.isStr)(U)&&0==U.indexOf("update:"),oe){if(U=U.slice(7),!_e||_e._doing_update)return Tt();_e._doing_update=!0}if(_e&&!le.canDisplay(_e,U))return Tt();let ve="",Je=!1;if((0,M.isStr)(U)&&U.indexOf("divid:")>=0){let ct=U.indexOf("divid:");ve=U.slice(ct+6),U=U.slice(0,ct)}return"__default_draw_option__"==U&&(Je=!0,U=""),oe||(0,Y.Ae)("Loading "+Ee),le.getObject(Ee,U).then(ct=>{oe||(0,Y.Ae)(),_e||(_e=ct.item);let We=ct.obj;if(!We)return Tt();oe||(0,Y.Ae)("Drawing "+Ee);let Ke=We._typename?(0,Oe.St)("ROOT."+We._typename):null;if(Ke?.draw_field&&We[Ke.draw_field]&&(We=We[Ke.draw_field],U||(U=Ke.draw_field_opt||""),Ke=We._typename?(0,Oe.St)("ROOT."+We._typename):null),Je&&!U&&Ke?.dflt&&"expand"!=Ke.dflt&&(U=Ke.dflt),ve)return(oe?Oe.pz:Oe.ii)(ve,We,U).then(Mt=>Tt(Mt)).catch(Mt=>Tt(null,Mt));let ft=!1;if(Bt.forEachPainter((Zt,Mt)=>{if(Zt.getItemName()!=Ee)return;let Ot=Zt.getItemDrawOpt();Je&&z&&(U=Ot),(oe||!U||Ot==U)&&(z&&!ft&&(ft=!0,Bt.activateFrame(Mt)),(0,M.isFunc)(Zt.redrawObject)&&Zt.redrawObject(We,U)&&(D=Zt))}),D)return Tt();if(oe)return console.warn(`something went wrong - did not found painter when doing update of ${Ee}`),Tt();let zt=Bt.findFrame(Ve,!0);return(0,Ze.Eq)(zt),Bt.activateFrame(zt),(0,Oe.ii)(zt,We,U).then(Zt=>Tt(Zt)).catch(Zt=>Tt(null,Zt))})})})()}enableDrag(I){I.attr("draggable","true").on("dragstart",function(U){let z=this.parentNode.parentNode.getAttribute("item");U.dataTransfer.setData("item",z)})}enableDrop(I){let U=this;(0,L.Ys)(I).on("dragover",function(z){let le=z.dataTransfer.getData("item"),D=U.findItem(le);(0,M.isStr)(D?._kind)&&0==D._kind.indexOf("ROOT.")&&z.preventDefault()}).on("dragenter",function(){(0,L.Ys)(this).classed("jsroot_drag_area",!0)}).on("dragleave",function(){(0,L.Ys)(this).classed("jsroot_drag_area",!1)}).on("drop",function(z){(0,L.Ys)(this).classed("jsroot_drag_area",!1);let le=z.dataTransfer.getData("item");le&&U.dropItem(le,this.getAttribute("id"))})}clearDrop(I){(0,L.Ys)(I).on("dragover",null).on("dragenter",null).on("dragleave",null).on("drop",null)}dropItem(I,U,z){var le=this;return(0,ze.Z)(function*(){(!z||!(0,M.isStr)(z))&&(z="");let D=(oe,_e)=>(!_e&&(0,M.isFunc)(oe?.setItemName)&&oe.setItemName(I,null,le),oe);return"$legend"==I?(0,He.produceLegend)(U,z).then(oe=>D(oe)):le.getObject(I).then(oe=>{if(!oe.obj)return null;let _e=(0,Ze.SO)(U);return(0,M.isFunc)(_e?.performDrop)?_e.performDrop(oe.obj,I,oe.item,z).then(Ee=>D(Ee,_e===Ee)):_e?.accept_drops?(0,Oe.ii)(U,oe.obj,"same "+z).then(Ee=>D(Ee,_e===Ee)):(le.cleanupFrame(U),(0,Oe.ii)(U,oe.obj,z).then(Ee=>D(Ee)))})})()}updateItems(I){var U=this;return(0,ze.Z)(function*(){if(!U.disp)return!1;let z=[],le=[],D=!1,oe=!1;return(0,M.isStr)(I)?I=[I]:(0,M.isObject)(I)||(void 0===I&&(I=!U.isMonitoring()),oe=!0,D=!!I),U.disp.forEachPainter(_e=>{let Ee=_e.getItemName();if((0,M.isStr)(Ee)&&!(z.indexOf(Ee)>=0)){if(oe){let Ve=U.findItem(Ee);if(!Ve||"_not_monitor"in Ve||"_player"in Ve)return;if(!("_always_monitor"in Ve)){let Qe=!1,et=(0,Oe.St)(Ve._kind);if(void 0!==et?.monitor){if(!1===et.monitor||"never"==et.monitor)return;"always"==et.monitor&&(Qe=!0)}if(!Qe&&D)return}}else if(I.indexOf(Ee)<0)return;z.push(Ee),le.push("update:"+_e.getItemDrawOpt())}},!0),U.files_monitoring&&!D&&oe&&U.forEachRootFile(_e=>{U.forEachItem(Ee=>{delete Ee._readobj},_e),delete _e._file}),U.displayItems(z,le)})()}displayItems(I,U){var z=this;return(0,ze.Z)(function*(){if(!I||0==I.length)return!0;let le=z;for(U||(U=[]);U.length<I.length;)U.push("__default_draw_option__");if(1==U.length&&"iotest"==U[0]){z.clearHierarchy(),(0,L.Ys)("#"+z.disp_frameid).html("<h2>Start I/O test</h2>");let Qe=new Date;return z.getObject(I[0]).then(()=>{let et=new Date;return(0,L.Ys)("#"+z.disp_frameid).append("h2").html("Item "+I[0]+" reading time = "+(et.getTime()-Qe.getTime())+"ms"),!0})}let D=new Array(I.length),oe=new Array(I.length),_e=new Array(I.length);for(let Qe=0;Qe<I.length;++Qe){D[Qe]=oe[Qe]=null;let et=I[Qe],Tt=!0;if(et&&0==et.indexOf("img:")){_e[Qe]=!0;continue}et&&et.length>1&&"'"==et[0]&&"'"==et[et.length-1]&&(I[Qe]=et.slice(1,et.length-1),Tt=!1);let Bt=le.findItem({name:I[Qe],check_keys:!0});if(Bt){I[Qe]=le.itemFullName(Bt);continue}if(Tt&&"["==I[Qe][0]&&"]"==I[Qe][I[Qe].length-1]?(D[Qe]=F(I[Qe]),I[Qe]=D[Qe].shift()):Tt&&I[Qe].indexOf("+")>0&&(D[Qe]=I[Qe].split("+"),I[Qe]=D[Qe].shift()),D[Qe]&&D[Qe].length>0){for(let Je=0;Je<D[Qe].length;++Je){let ct=D[Qe][Je].indexOf("_same_");ct>0&&null===le.findItem(D[Qe][Je])&&(D[Qe][Je]=D[Qe][Je].slice(0,ct)+I[Qe].slice(ct)),Bt=le.findItem({name:D[Qe][Je],check_keys:!0}),Bt&&(D[Qe][Je]=le.itemFullName(Bt))}for("["==U[Qe][0]&&"]"==U[Qe][U[Qe].length-1]?(oe[Qe]=F(U[Qe]),U[Qe]=oe[Qe].shift()):U[Qe].indexOf("+")>0?(oe[Qe]=U[Qe].split("+"),U[Qe]=oe[Qe].shift()):oe[Qe]=[];oe[Qe].length<D[Qe].length;)oe[Qe].push("")}let ve=I[Qe].indexOf("_same_");ve>0&&!le.findItem(I[Qe])&&Qe>0&&(I[Qe]=I[Qe].slice(0,ve)+I[0].slice(ve)),Bt=le.findItem({name:I[Qe],check_keys:!0}),Bt&&(I[Qe]=le.itemFullName(Bt))}for(let Qe=I.length-1;Qe>=0;--Qe){if(_e[Qe])continue;let et=le.findItem(I[Qe]);!et||le.canDisplay(et,U[Qe])||(le.expandItem(I[Qe],null,!0),I.splice(Qe,1),U.splice(Qe,1),D.splice(Qe,1))}if(0==I.length)return!0;let Ee=new Array(I.length),Ve=new Array(I.length);for(let Qe=0;Qe<I.length;++Qe){Ve[Qe]=0;let et=I[Qe],Tt=0;I.indexOf(et)<Qe&&(Ve[Qe]=!0);let Bt=U[Qe].indexOf("frameid:");if(Bt>=0)et=U[Qe].slice(Bt+8),U[Qe]=U[Qe].slice(0,Bt);else for(;Ee.indexOf(et)>=0;)et=I[Qe]+"_"+Tt++;Ee[Qe]=et}for(let Qe=0;Qe<I.length;++Qe){if(0!==Ve[Qe])continue;let et=Qe;for(let Tt=0;Tt<I.length;++Tt)I[Qe]===I[Tt]&&U[Tt].indexOf("main")>=0&&(et=Tt);for(let Tt=0;Tt<I.length;++Tt)I[Qe]===I[Tt]&&(Ve[Tt]=et!=Tt)}return z.createDisplay().then(Qe=>{if(!Qe)return!1;for(let Bt=0;Bt<I.length;++Bt)0!==U[Bt].indexOf("update:")&&(Qe.createFrame(Ee[Bt]),U[Bt]+="::_display_on_frame_::"+Ee[Bt]);function et(Bt,ve){if(ve&&D[Bt]&&D[Bt].length>0)return le.dropItem(D[Bt].shift(),ve.getDom(),oe[Bt].shift()).then(()=>et(Bt,ve));D[Bt]=null,I[Bt]=null;for(let Je=0;Je<I.length;++Je)if(null!==I[Je]&&Ve[Je]&&I.indexOf(I[Je])===Je)return Ve[Je]=!1,le.display(I[Je],U[Je]).then(ct=>et(Je,ct))}let Tt=[];for(let Bt=0;Bt<I.length;++Bt)Ve[Bt]||Tt.push(le.display(I[Bt],U[Bt]).then(ve=>et(Bt,ve)));return Promise.all(Tt)})})()}reload(){var I=this;return(0,ze.Z)(function*(){return"_online"in I.h&&I.openOnline(I.h._online).then(()=>I.refreshHtml())})()}activateItems(I,U){(0,M.isStr)(I)&&(I=[I]);let z=[],le=[];this.forEachItem(_e=>{_e._background&&(z.push(_e),delete _e._background)});let D=()=>{for(let _e=le.length-1;_e>=0;--_e)this.updateTreeNode(le[_e]);for(let _e=0;_e<z.length;++_e)this.updateBackground(z[_e],U)},oe=(_e,Ee)=>{if(void 0===_e){if(0==I.length)return D();_e=I.shift()}let Ve=this.findItem(_e);if(!Ve){let Qe=this.findItem({name:_e,last_exists:!0,check_keys:!0,allow_index:!0});if(!Qe||!Qe.last)return oe();if(Qe.now_found=this.itemFullName(Qe.last),U)return void 0!==Ee&&Qe.now_found===Ee?oe():this.expandItem(Qe.now_found).then(et=>{if(!et)return oe();let Tt=this.itemFullName(Qe.last);Tt&&(Tt+="/"),oe(Tt+Qe.rest,Qe.now_found)});Ve=Qe.last}if(Ve){let Qe=Ve._parent;for(;Qe;){if(!Qe._isopen){if(!U){Ve=Qe;break}Qe._isopen=!0,le.indexOf(Qe)<0&&le.push(Qe)}Qe=Qe._parent}Ve._background="LightSteelBlue",z.indexOf(Ve)<0&&z.push(Ve)}oe()};if(U&&this.brlayout){if(!this.brlayout.browser_kind)return this.createBrowser("float",!0).then(()=>oe());this.brlayout.browser_visible||this.brlayout.toggleBrowserVisisbility()}oe()}canExpandItem(I){if(!I)return!1;if(I._expand)return!0;let U=(0,Oe.St)(I._kind,"::expand");return U&&q(U)}expandItem(I,U,z){var le=this;return(0,ze.Z)(function*(){let D=le.findItem(I),oe=le;if(!D&&U)return;function _e(Qe,et){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,ze.Z)(function*(Qe,et){if((0,M.isStr)(Qe._expand)&&(Qe._expand=(0,M.findFunction)(item._expand)),!(0,M.isFunc)(Qe._expand)){let Tt=(0,Oe.St)(Qe._kind,"::expand");if(Tt?.expand_item&&(Tt=(et=et[Tt.expand_item])&&et._typename?(0,Oe.St)("ROOT."+et._typename,"::expand"):null),Tt?.expand||Tt?.get_expand)if((0,M.isFunc)(Tt.expand))Qe._expand=Tt.expand;else if((0,M.isStr)(Tt.expand)){if(!M.internals.ignore_v6){let Bt=yield(0,M._ensureJSROOT)();yield Bt.require(Tt.prereq),yield Bt._complete_loading()}Qe._expand=Tt.expand=(0,M.findFunction)(Tt.expand)}else(0,M.isFunc)(Tt.get_expand)&&(Qe._expand=Tt.expand=yield Tt.get_expand())}return et&&(0,M.isFunc)(Qe?._expand)&&Qe._expand(Qe,et)||et&&p(Qe,et)?(Qe._isopen=!0,Qe._parent&&!Qe._parent._isopen?(Qe._parent._isopen=!0,z||oe.updateTreeNode(Qe._parent)):z||oe.updateTreeNode(Qe,U),Qe):-1})).apply(this,arguments)}let Ve=Promise.resolve(-1);if(D){if(!1===D._more||!D._parent&&D._childs)return;if(D._childs&&D._isopen)return D._isopen=!1,void(z||le.updateTreeNode(D,U));D._obj&&(Ve=_e(D,D._obj))}return Ve.then(Qe=>-1!==Qe?Qe:((0,Y.Ae)("Loading "+I),le.getObject(I,z?"hierarchy_expand":"hierarchy_expand_verbose").then(et=>{if((0,Y.Ae)(),et.obj)return _e(et.item,et.obj).then(Tt=>-1!==Tt?Tt:void 0)})))})()}getTopOnlineItem(I){if(I){for(;I&&!("_online"in I);)I=I._parent;return I}return this.h?"_online"in this.h?this.h:this.h._childs&&"_online"in this.h._childs[0]?this.h._childs[0]:null:null}forEachJsonFile(I){if(this.h){if("_jsonfile"in this.h)return I(this.h);if(this.h._childs)for(let U=0;U<this.h._childs.length;++U){let z=this.h._childs[U];"_jsonfile"in z&&I(z)}}}openJsonFile(I){var U=this;return(0,ze.Z)(function*(){let z=!1;if(U.forEachJsonFile(le=>{le._jsonfile==I&&(z=!0)}),!z)return(0,M.httpRequest)(I,"object").then(le=>{let D={_jsonfile:I,_kind:"ROOT."+le._typename,_jsontmp:le,_name:I.split("/").pop()};if(le.fTitle&&(D._title=le.fTitle),D._get=function(oe){return oe._jsontmp?Promise.resolve(oe._jsontmp):(0,M.httpRequest)(oe._jsonfile,"object").then(_e=>(oe._jsontmp=_e,_e))},U.h)if("TopFolder"==U.h._kind)U.h._childs.push(D);else{let oe=U.h;U.h={_name:"_jsonfile"in oe?"Files":"Items",_kind:"TopFolder",_childs:[oe,D]}}else U.h=D;return U.refreshHtml()})})()}forEachRootFile(I){if(this.h){if(this.h._kind==T&&this.h._file)return I(this.h);if(this.h._childs)for(let U=0;U<this.h._childs.length;++U){let z=this.h._childs[U];z._kind==T&&"_fullurl"in z&&I(z)}}}openRootFile(I){var U=this;return(0,ze.Z)(function*(){let z=!1;if(U.forEachRootFile(D=>{D._fullurl===I&&(z=!0)}),z)return;let le=(0,M.isStr)(I)?I:"file";return(0,Y.Ae)(`Opening ${le} ...`),(0,ye.ZB)(I).then(D=>{let oe=U.fileHierarchy(D);if(oe._isopen=!0,U.h)if("TopFolder"==U.h._kind)U.h._childs.push(oe);else{let _e=U.h;U.h={_name:_e._kind==T?"Files":"Items",_kind:"TopFolder",_childs:[_e,oe],_isopen:!0}}else U.h=oe,U._topname&&(oe._name=U._topname);return U.refreshHtml()}).catch(()=>((0,M.isBatchMode)()?console.error(`Fail to open ${le} - check CORS headers`):(0,L.Ys)("#gui_fileCORS").style("background","red").empty()||setTimeout(()=>(0,L.Ys)("#gui_fileCORS").style("background",""),5e3),!1)).finally(()=>(0,Y.Ae)())})()}applyStyle(I){var U=this;return(0,ze.Z)(function*(){if(!I)return!0;let z=Promise.resolve(I);if((0,M.isStr)(I)){let le=U.findItem({name:I,allow_index:!0,check_keys:!0});null!==le?z=U.getObject(le).then(D=>D.obj):I.indexOf(".json")>0&&(z=(0,M.httpRequest)(I,"object"))}return z.then(le=>{le?._typename===M.clTStyle&&Object.assign(M.gStyle,le)})})()}getFileProp(I){let U=this.findItem(I);if(!U)return null;let z=U._name;for(;U._parent;){if(U=U._parent,"_file"in U)return{kind:"file",fileurl:U._file.fURL,itemname:z,localfile:!!U._file.fLocalFile};if("_jsonfile"in U)return{kind:"json",fileurl:U._jsonfile,itemname:z};z=U._name+"/"+z}return null}getOnlineItemUrl(I){(0,M.isStr)(I)&&(I=this.findItem(I));let U=I;for(;U&&void 0===U._online;)U=U._parent;return U?U._online+this.itemFullName(I,U):null}isOnlineItem(I){return null!==this.getOnlineItemUrl(I)}importModule(I){return(0,ze.Z)(function*(){switch(I){case"core":return Promise.resolve().then(Ce.bind(Ce,9542));case"draw_tree":return Promise.all([Ce.e(241),Ce.e(592),Ce.e(580)]).then(Ce.bind(Ce,2580));case"hierarchy":return{HierarchyPainter:$,markAsStreamerInfo:m}}return import(I)})()}getOnlineItem(I,U,z){var le=this;return(0,ze.Z)(function*(){let D=U,oe=!1,_e="",Ee="object",Ve=null;if((0,M.isStr)(z)&&0==z.indexOf("hierarchy_expand")&&(oe=!0,z=void 0),I){D=le.getOnlineItemUrl(I);let Qe=null;if("_kind"in I&&(Ve=(0,Oe.St)(I._kind)),oe?(_e="h.json?compact=3",I._expand=R):I._make_request?Qe=I._module?(yield le.importModule(I._module))[I._make_request]:(0,M.findFunction)(I._make_request):Ve?.make_request&&(Qe=Ve.make_request),(0,M.isFunc)(Qe)){let et=Qe(le,I,D,z);et&&((0,M.isStr)(et)?_e=et:("req"in et&&(_e=et.req),"kind"in et&&(Ee=et.kind)))}!_e&&0!=I._kind.indexOf("ROOT.")&&(_e="item.json.gz?compact=3")}if(!U&&I&&"_cached_draw_object"in le&&!_e){let Qe=le._cached_draw_object;return delete le._cached_draw_object,Qe}return _e||(_e="root.json.gz?compact=23"),D&&(D+="/"),D+=_e,new Promise(Qe=>{let et=null;(0,M.createHttpRequest)(D,Ee,Tt=>{let Bt=ve=>{if((0,M.isFunc)(ve)){let Je=ve(le,I,Tt,z,et);(0,M.isObject)(Je)&&(Tt=Je)}Qe(Tt)};!oe&&I?._after_request?I._module?le.importModule(I._module).then(ve=>Bt(ve[I._after_request])):Bt((0,M.findFunction)(I._after_request)):Bt(Ve?.after_request)},void 0,!0).then(Tt=>{et=Tt,Tt.send(null)})})})()}openOnline(I){var U=this;return(0,ze.Z)(function*(){let z=le=>{if(U.h=le,!le)return Promise.resolve(null);"_title"in U.h&&""!=U.h._title&&(document.title=U.h._title),le._isopen=!0,U.h._online=I,U.h._get=(Ve,Qe,et)=>U.getOnlineItem(Ve,Qe,et),U.h._expand=R;let D=[],oe=[],_e=[],Ee=[];return U.forEachItem(Ve=>{void 0!==Ve._childs&&(Ve._expand=R),Ve._autoload&&Ve._autoload.split(";").forEach(et=>{et.length>4&&et.lastIndexOf(".mjs")==et.length-4?Ee.push(U.importModule(et)):et.length>3&&et.lastIndexOf(".js")==et.length-3?oe.find(Tt=>Tt==et)||oe.push(et):et.length>4&&et.lastIndexOf(".css")==et.length-4?D.find(Tt=>Tt==et)||D.push(et):et&&!_e.find(Tt=>Tt==et)&&_e.push(et)})}),U.loadScripts(oe,_e).then(()=>(0,M.loadScript)(D)).then(()=>Promise.all(Ee)).then(()=>(U.forEachItem(Ve=>{if(!("_drawfunc"in Ve)||!("_kind"in Ve))return;let Qe="kind:"+Ve._kind;0==Ve._kind.indexOf("ROOT.")&&(Qe=Ve._kind.slice(5));let et=Ve._drawopt;(!(0,Oe.JO)(Qe)||et)&&(0,Oe.Rw)({name:Qe,func:Ve._drawfunc,script:Ve._drawscript,opt:et})}),U))};if(I||(I=""),(0,M.isObject)(I)){let le=I;return I="",z(le)}return(0,M.httpRequest)(I+"h.json?compact=3","object").then(le=>z(le))})()}getOnlineProp(I){let U=this.findItem(I);if(!U)return null;let z=U._name;for(;U._parent;){if(U=U._parent,"_online"in U)return{server:U._online,itemname:z};z=U._name+"/"+z}return null}fillOnlineMenu(I,U,z){let le=this.findItem(z),D=(0,Oe.wu)(le._kind,"nosame;noinspect"),oe=(0,Oe.St)(le._kind),_e=!!(0,M.isStr)(le._kind)&&0==le._kind.indexOf("ROOT.");D.opts&&!1!==le._can_draw&&(D.opts.push("inspect"),I.addDrawMenu("Draw",D.opts,Ee=>this.display(z,Ee))),!le._childs&&!1!==le._more&&(le._more||_e||D.expand||D.get_expand)&&I.add("Expand",()=>this.expandItem(z)),oe?.execute&&I.add("Execute",()=>this.executeCommand(z,I.tree_node)),D.opts&&!1!==le._can_draw&&I.addDrawMenu("Draw in new window",D.opts,Ee=>window.open(U.server+"?nobrowser&item="+U.itemname+(this.isMonitoring()?"&monitoring="+this.getMonitoringInterval():"")+(Ee?"&opt="+Ee:""))),D.opts&&D.opts.length>0&&_e&&!1!==le._can_draw&&I.addDrawMenu("Draw as png",D.opts,Ee=>window.open(U.server+U.itemname+"/root.png?w=600&h=400"+(Ee?"&opt="+Ee:""))),"_player"in le&&I.add("Player",()=>this.player(z))}setHierarchy(I){this.h=I,this.refreshHtml()}setMonitoring(I,U){this._runMonitoring("cleanup"),I&&(I=parseInt(I),Number.isInteger(I)&&I>0?(this._monitoring_interval=Math.max(100,I),U=!0):this._monitoring_interval=3e3),this._monitoring_on=U,this.isMonitoring()&&this._runMonitoring()}_runMonitoring(I){return"cleanup"!=I&&this.isMonitoring()?"frame"==I?(delete this._monitoring_handle,void(this._monitoring_frame=requestAnimationFrame(this._runMonitoring.bind(this,"draw")))):("draw"==I&&(delete this._monitoring_frame,this.updateItems()),void(this._monitoring_handle=setTimeout(this._runMonitoring.bind(this,"frame"),this.getMonitoringInterval()))):(this._monitoring_handle&&(clearTimeout(this._monitoring_handle),delete this._monitoring_handle),void(this._monitoring_frame&&(cancelAnimationFrame(this._monitoring_frame),delete this._monitoring_frame)))}getMonitoringInterval(){return this._monitoring_interval||3e3}isMonitoring(){return this._monitoring_on}setDisplay(I,U){!U&&(0,M.isObject)(I)?(this.disp=I,this.disp_kind="custom",this.disp_frameid=null):(this.disp_kind=I,this.disp_frameid=U),!this.register_resize&&"batch"!=this.disp_kind&&(this.register_resize=!0,(0,Y.MG)(this))}getLayout(){return this.disp_kind}removePainter(I){this.forEachItem(U=>{U._painter===I&&(delete U._painter,(0,M.isFunc)(U.clear)&&U.clear())})}clearHierarchy(I){this.disp&&(this.disp.cleanup(),delete this.disp);let U=[];this.forEachItem(z=>{delete z._painter,!I&&(0,M.isFunc)(z.clear)&&z.clear(),I&&U.push(z)}),I&&(this.enableMonitoring(!1),this.selectDom().html(""),U.forEach(z=>{delete z._parent,delete z._childs,delete z._obj,delete z._d3cont}),delete this.h)}getDisplay(){return this.disp}cleanupFrame(I){(0,L.Ys)(I).attr("frame_title",null),this.clearDrop(I);let U=(0,Ze.Eq)(I);U.length>0&&this.forEachItem(z=>{z._painter&&U.indexOf(z._painter)>=0&&delete z._painter})}createDisplay(){var I=this;return(0,ze.Z)(function*(){if("disp"in I){if(I.disp.numDraw()>0||"custom"==I.disp_kind)return I.disp;I.disp.cleanup(),delete I.disp}return"batch"==I.disp_kind?((0,M.isNodeJs)()?(0,je.Bu)():Promise.resolve(null)).then(z=>(I.disp=new ce.DX(1200,800,z?.body),I.disp)):document.getElementById(I.disp_frameid)?(I.disp=0==I.disp_kind.indexOf("flex")||0==I.disp_kind.indexOf("coll")?new ce.oz(I.disp_frameid):"tabs"==I.disp_kind?new ce.Qq(I.disp_frameid):new ce.VU(I.disp_frameid,I.disp_kind),I.disp.cleanupFrame=I.cleanupFrame.bind(I),M.settings.DragAndDrop&&I.disp.setInitFrame(I.enableDrop.bind(I)),I.disp):null})()}createCustomDisplay(I,U){var z=this;return(0,ze.Z)(function*(){if("simple"!=z.disp_kind)return z.createDisplay();if(z.disp_kind=U,z.disp){let le=z.disp.numDraw();if(le>1||1==le&&!z.disp.findFrame(I))return z.createDisplay();z.disp.cleanup(),delete z.disp}return z.createDisplay()})()}updateOnOtherFrames(I,U){let z=this.disp,le=!1;if(!z)return!1;let D=U._typename?(0,Oe.St)("ROOT."+U._typename):null;return D?.draw_field&&U[D?.draw_field]&&(U=U[D?.draw_field]),z.forEachPainter(oe=>{oe===I||oe.getItemName()!=I.getItemName()||(0,M.isFunc)(oe.redrawObject)&&oe.redrawObject(U)&&(le=!0)}),le}checkResize(I){this.disp&&this.disp.checkMDIResize(null,I)}loadScripts(I,U){return(0,ze.Z)(function*(){return!I?.length&&!U?.length||(M.internals.ignore_v6?(0,M.loadScript)(I):(0,M._ensureJSROOT)().then(z=>z.require(U).then(()=>(0,M.loadScript)(I)).then(()=>z._complete_loading())))})()}startGUI(I,U){var z=this;return(0,ze.Z)(function*(){let le=(0,M.decodeUrl)(U),D=En=>{let $n=le.get(En,null);return null===$n&&I&&!I.empty()&&I.node().hasAttribute(En)&&($n=I.attr(En)),$n},_e=En=>{let $n=(En=>{let $n=[];for(;En;){let vn=En.indexOf(";"),rn=vn>0?En.slice(0,vn):En;En=vn>0?En.slice(vn+1):"";let Gt=!0;"#"==rn[0]&&(rn=rn.slice(1),Gt=!1);let qt=le.get(rn,null);Gt?$n=$n.concat(F(qt)):null!==qt&&$n.push(qt)}return $n})(En);if($n.length>0||!I||I.empty())return $n;for(;En;){let vn=En.indexOf(";"),rn=vn>0?En.slice(0,vn):En;En=vn>0?En.slice(vn+1):"";let Gt=!0;if("#"==rn[0]&&(rn=rn.slice(1),Gt=!1),"files"===rn||!I.node().hasAttribute(rn))continue;let qt=I.attr(rn);Gt?$n=$n.concat(F(qt)):null!==qt&&$n.push(qt)}return $n},Ee=D("prereq")||"",Ve=le.get("path")||"",Qe=_e("#file;files"),et=_e("#json;jsons"),Tt=_e("expand"),Bt=D("focus"),ve=_e("#item;items"),Je=_e("#opt;opts"),ct=D("monitoring"),We=D("layout"),Ke=_e("#style"),ft=0,zt=D("status"),Zt=D("browser"),Mt=!!Zt,Ot=D("title");ct=null===ct?0:""===ct?3e3:parseInt(ct),null!==D("float")?(Zt="float",Mt=!0):null!==D("fix")&&(Zt="fix",Mt=!0),z.no_select=D("noselect"),null!==D("files_monitoring")&&(z.files_monitoring=!0),Ot&&(document.title=Ot);let sn=D("load");if(0==Tt.length&&""===D("expand")&&Tt.push(""),Ve){for(let En=0;En<Qe.length;++En)Qe[En]=Ve+Qe[En];for(let En=0;En<et.length;++En)et[En]=Ve+et[En]}if(0==ve.length&&""===D("item")&&ve.push(""),1==et.length&&0==ve.length&&0==Tt.length&&ve.push(""),!z.disp_kind)if((0,M.isStr)(We)&&We)z.disp_kind=We;else switch(ve.length){case 0:case 1:z.disp_kind="simple";break;case 2:z.disp_kind="vert2";break;case 3:z.disp_kind="vert21";break;case 4:z.disp_kind="vert22";break;case 5:z.disp_kind="vert32";break;case 6:z.disp_kind="vert222";break;case 7:z.disp_kind="vert322";break;case 8:z.disp_kind="vert332";break;case 9:z.disp_kind="vert333";break;default:z.disp_kind="flex"}"no"===zt?zt=null:"off"===zt?(z.status_disabled=!0,zt=null):"on"===zt?zt=!0:null!==zt&&(ft=parseInt(zt),(!Number.isInteger(ft)||ft<5)&&(ft=0),zt=!0),""===z.no_select&&(z.no_select=!0),Zt?"no"===Zt?Zt="":"off"===Zt&&(Zt="",zt=null,z.exclude_browser=!0):Zt="fix",null!==D("nofloat")&&(z.float_browser_disabled=!0),z.start_without_browser&&(Zt=""),z._topname=D("topname");let wn=()=>{let En;if(sn||Ee)En=z.loadScripts(sn,Ee),sn="",Ee="";else if(Zt)En=z.createBrowser(Zt),Zt="";else if(null!==zt)En=z.createStatusLine(ft,zt),zt=null;else if(et.length>0)En=z.openJsonFile(et.shift());else if(Qe.length>0)En=z.openRootFile(Qe.shift());else if(Tt.length>0)En=z.expandItem(Tt.shift());else{if(!(Ke.length>0))return z.refreshHtml().then(()=>z.displayItems(ve,Je)).then(()=>Bt?z.focusOnItem(Bt):z).then(()=>(z.setMonitoring(ct),ve?z.refreshHtml():z));En=z.applyStyle(Ke.shift())}return En.then(wn)},Ln=null;if(z.is_online){let En=M.internals.getCachedHierarchy||(0,M.findFunction)("GetCachedHierarchy");(0,M.isFunc)(En)&&(Ln=En()),(0,M.isObject)(Ln)||(Ln=""),"draw"==z.is_online&&!ve.length&&ve.push("")}return null!==Ln?z.openOnline(Ln).then(()=>(!z.exclude_browser&&!Mt&&"_browser"in z.h&&(Zt=z.h._browser,"no"===Zt?Zt="":"off"===Zt&&(Zt="",zt=null,z.exclude_browser=!0)),"_monitoring"in z.h&&!ct&&(ct=z.h._monitoring),"_loadfile"in z.h&&0==Qe.length&&(Qe=F(z.h._loadfile)),"_drawitem"in z.h&&0==ve.length&&(ve=F(z.h._drawitem),Je=F(z.h._drawopt)),"_layout"in z.h&&!We&&("draw"!=z.is_online||ve.length>1)&&(z.disp_kind=z.h._layout),"_toptitle"in z.h&&z.exclude_browser&&document&&(document.title=z.h._toptitle),I&&z.prepareGuiDiv(I.attr("id"),z.disp_kind),wn())):(I&&z.prepareGuiDiv(I.attr("id"),z.disp_kind),wn())})()}prepareGuiDiv(I,U){if(this.gui_div=(0,M.isStr)(I)?I:I.attr("id"),this.brlayout=new ce.$B(this.gui_div,this),this.brlayout.create(!this.exclude_browser),!this.exclude_browser){let z=this.brlayout.createBrowserBtns();Y.KL.createSVG(z,Y.KL.diamand,15,"toggle fix-pos browser").style("margin","3px").on("click",()=>this.createBrowser("fix",!0)),this.float_browser_disabled||Y.KL.createSVG(z,Y.KL.circle,15,"toggle float browser").style("margin","3px").on("click",()=>this.createBrowser("float",!0)),this.status_disabled||Y.KL.createSVG(z,Y.KL.three_circles,15,"toggle status line").style("margin","3px").on("click",()=>this.createStatusLine(0,"toggle"))}this.setDisplay(U,this.brlayout.drawing_divid())}hasStatusLine(){return!(this.status_disabled||!this.gui_div||!this.brlayout)&&this.brlayout.hasStatus()}createStatusLine(I,U){var z=this;return(0,ze.Z)(function*(){return!z.status_disabled&&z.gui_div&&z.brlayout?z.brlayout.createStatusLine(I,U):""})()}redrawObject(I){return!(!this._inspector&&!this._streamer_info)&&(this.h=this._streamer_info?w(I):_(I),this.refreshHtml().then(()=>{this.setTopPainter()}))}createBrowser(I,U){var z=this;return(0,ze.Z)(function*(){if(!z.gui_div||z.exclude_browser||!z.brlayout)return!1;let le=(0,L.Ys)(`#${z.gui_div} .jsroot_browser`);if(le.empty())return!1;if("float"==I&&z.float_browser_disabled&&(I="fix"),!le.select(".jsroot_browser_area").empty())return U&&z.brlayout.toggleKind(I),!0;let D=`<p class="jsroot_browser_version"><a href="https://root.cern/js/">JSROOT</a> version <span style="color:green"><b>${M.version}</b></span></p>`;if(z.is_online)D+='<p> Hierarchy in <a href="h.json">json</a> and <a href="h.xml">xml</a> format</p><div style="display:inline; vertical-align:middle; white-space: nowrap;"><label style="margin-right:5px"><input type="checkbox" name="monitoring" class="gui_monitoring"/>Monitoring</label>';else if(z.no_select)"file"==z.no_select&&(D+='<div style="display:flex;flex-direction:row">');else{let Ee=(0,L.Ys)("#"+z.gui_div),Ve=Ee.attr("files")||"../files/hsimple.root",Qe=(0,M.decodeUrl)().get("path")||Ee.attr("path")||"",et=Ve.split(";");D+='<input type="text" value="" style="width:95%; margin:5px;border:2px;" class="gui_urlToLoad" title="input file name"/><div style="display:flex;flex-direction:row;padding-top:5px"><select class="gui_selectFileName" style="flex:1;padding:2px;" title="select file name"<option value="" selected="selected"></option>',et.forEach(Tt=>{D+=`<option value="${Qe+Tt}">${Tt}</option>`}),D+='</select><input type="file" class="gui_localFile" accept=".root" style="display:none"/><output id="list" style="display:none"></output><input type="button" value="..." class="gui_fileBtn" style="min-width:3em;padding:3px;margin-left:5px;margin-right:5px;" title="select local file for reading"/><br/></div><p id="gui_fileCORS"><small><a href="https://github.com/root-project/jsroot/blob/master/docs/JSROOT.md#reading-root-files-from-other-servers">Read docu</a> how to open files from other servers.</small></p><div style="display:flex;flex-direction:row"><input style="padding:3px;margin-right:5px" class="gui_ReadFileBtn" type="button" title="Read the Selected File" value="Load"/><input style="padding:3px;margin-right:5px" class="gui_ResetUIBtn" type="button" title="Close all opened files and clear drawings" value="Reset"/>'}(z.is_online||!z.no_select||"file"==z.no_select)&&(D+='<select style="padding:2px;margin-right:5px;" title="layout kind" class="gui_layout"></select></div>'),D+=`<div id="${z.gui_div}_browser_hierarchy" class="jsroot_browser_hierarchy"></div>`,z.brlayout.setBrowserContent(D);let oe=z.brlayout.setBrowserTitle(z.is_online?"ROOT online server":"Read a ROOT file");oe&&oe.on("contextmenu",Ee=>{Ee.preventDefault(),(0,Ie.Z)(Ee).then(Ve=>{z.fillSettingsMenu(Ve,!0),Ve.show()})}),!z.is_online&&!z.no_select&&(z.readSelectedFile=function(){let Ee=le.select(".gui_urlToLoad").property("value").trim();Ee&&(Ee.toLowerCase().lastIndexOf(".json")==Ee.length-5?this.openJsonFile(Ee):this.openRootFile(Ee))},le.select(".gui_selectFileName").property("value","").on("change",Ee=>le.select(".gui_urlToLoad").property("value",Ee.target.value)),le.select(".gui_fileBtn").on("click",()=>le.select(".gui_localFile").node().click()),le.select(".gui_ReadFileBtn").on("click",()=>z.readSelectedFile()),le.select(".gui_ResetUIBtn").on("click",()=>z.clearHierarchy(!0)),le.select(".gui_urlToLoad").on("keyup",Ee=>{"Enter"==Ee.code&&z.readSelectedFile()}),le.select(".gui_localFile").on("change",Ee=>{let Ve=Ee.target.files;for(let Qe=0;Qe<Ve.length;++Qe){let et=Ve[Qe];le.select(".gui_urlToLoad").property("value",et.name),z.openRootFile(et)}}));let _e=le.select(".gui_layout");return _e.empty()||(["simple","vert2","vert3","vert231","horiz2","horiz32","flex","tabs","grid 2x2","grid 1x3","grid 2x3","grid 3x3","grid 4x4"].forEach(Ee=>_e.append("option").attr("value",Ee).html(Ee)),_e.on("change",Ee=>z.setDisplay(Ee.target.value||"flex",z.gui_div+"_drawing"))),z.setDom(z.gui_div+"_browser_hierarchy"),U&&(z.refreshHtml(),z.initializeBrowser()),z.brlayout.toggleBrowserKind(I||"fix")})()}initializeBrowser(){let I=(0,L.Ys)(`#${this.gui_div} .jsroot_browser`);if(I.empty()||!this.brlayout)return;this.brlayout.adjustBrowserSize();let U=I.select(".gui_layout").node();if(U){let z=!1;for(let le in U.options){let D=U.options[le].text;if((0,M.isStr)(D)&&(D==this.getLayout()||D.replace(/ /g,"")==this.getLayout())){U.selectedIndex=le,z=!0;break}}if(!z){let le=document.createElement("option");le.innerHTML=le.value=this.getLayout(),U.appendChild(le),U.selectedIndex=U.options.length-1}}if(this.is_online)this.h?._toptitle&&this.brlayout.setBrowserTitle(this.h._toptitle),I.select(".gui_monitoring").property("checked",this.isMonitoring()).on("click",z=>{this.enableMonitoring(z.target.checked),this.updateItems()});else if(!this.no_select){let z="";this.forEachRootFile(le=>{z||(z=le._fullurl)}),I.select(".gui_urlToLoad").property("value",z)}}enableMonitoring(I){this.setMonitoring(void 0,I);let U=(0,L.Ys)(`#${this.gui_div} .jsroot_browser .gui_monitoring`);!U.empty()&&U.property("checked")!==I&&U.property("checked",I)}}function J(fe,I){return ie.apply(this,arguments)}function ie(){return(ie=(0,ze.Z)(function*(fe,I){let U=new $("sinfo",fe,"__as_dark_mode__");return(0,M.isBatchMode)()?(U.selectDom().property("_json_object_",I),U):(U._streamer_info=!0,U.h=w(I),U.refreshHtml().then(()=>(U.setTopPainter(),U)))})).apply(this,arguments)}function Me(fe,I){return de.apply(this,arguments)}function de(){return(de=(0,ze.Z)(function*(fe,I){(0,Ze.Eq)(fe);let U=new $("inspector",fe,"__as_dark_mode__");return(0,M.isBatchMode)()?(U.selectDom().property("_json_object_",I),U):(U.default_by_click="expand",U.with_icons=!1,U._inspector=!0,U.selectDom().classed("jsroot_inspector")&&(U.removeInspector=function(){this.selectDom().remove()}),U.fill_context=function(z,le){let D=(0,Oe.wu)(le._kind,"nosame");D.opts&&z.addDrawMenu("nosub:Draw",D.opts,function(oe){if(!le||!le._obj)return;let _e=le._obj,Ee=this.selectDom().node();if(this.removeInspector&&(Ee=Ee.parentNode,this.removeInspector(),"inspect"==oe))return this.showInspector(_e);(0,Ze.Eq)(Ee),(0,Oe.ii)(Ee,_e,oe)})},U.h=_(I),U.refreshHtml().then(()=>(U.setTopPainter(),U)))})).apply(this,arguments)}Ze.tK.prototype.showInspector=function(fe){if("check"===fe)return!0;let I=this.selectDom(),U=(0,je.Yo)(I),z=Math.round(.05*U.width)+"px",le=Math.round(.05*U.height)+"px",D="root_inspector_"+M.internals.id_counter++;return I.append("div").attr("id",D).attr("class","jsroot_inspector").style("position","absolute").style("top",le).style("bottom",le).style("left",z).style("right",z),fe?._typename||(fe=this.getObject()),Me(D,fe)},M.internals.drawInspector=Me},2487:($r,At,Ce)=>{"use strict";Ce.d(At,{$B:()=>O,DX:()=>Z,Qk:()=>Oe,Qq:()=>ue,VU:()=>K,nh:()=>He,oz:()=>X});var ze=Ce(5835),M=Ce(2253),L=Ce(9542),ye=Ce(3675),Be=Ce(6458),je=Ce(4383),Ze=Ce(9622);let Ie=null;function He(){return Ie}function Oe(P){Ie=P}class ce extends ye.be{constructor(x){super(),this.frameid=x,"$batch$"!=x&&(this.setDom(x),this.selectDom().property("mdi",this)),this.cleanupFrame=Be.Eq,this.active_frame_title=""}setInitFrame(x){this.initFrame=x,this.forEachFrame(p=>x(p))}beforeCreateFrame(x){this.active_frame_title=x}afterCreateFrame(x){return(0,L.isFunc)(this.initFrame)&&this.initFrame(x),x}forEachFrame(x,p){console.warn(`forEachFrame not implemented in MDIDisplay ${typeof x} ${p}`)}forEachPainter(x,p){this.forEachFrame(w=>{new Be.tK(w).forEachPainter(m=>x(m,w))},p)}numDraw(){let x=0;return this.forEachFrame(()=>++x),x}findFrame(x,p){let w=null;return this.forEachFrame(m=>{(0,M.Ys)(m).attr("frame_title")==x&&(w=m)}),!w&&p&&(w=this.createFrame(x)),w}activateFrame(x){this.active_frame_title=x?(0,M.Ys)(x).attr("frame_title"):""}getActiveFrame(){return this.findFrame(this.active_frame_title)}checkMDIResize(x,p){let w=null;this.forEachPainter((m,_)=>{if((!x||(0,M.Ys)(_).attr("id")==x)&&null!==m.getItemName()&&(0,L.isFunc)(m.checkResize)){if(w===_)return;m.checkResize(p),w=_}})}cleanup(){this.active_frame_title="",this.forEachFrame(this.cleanupFrame),this.selectDom().html("").property("mdi",null)}}class K extends ce{constructor(x,p,w){super(x),this.framecnt=0,this.getcnt=0,this.groups=[],this.vertical=p&&"v"==p[0],this.use_separarators=!p||p.indexOf("x")<0,this.simple_layout=!1;let m=this.selectDom();if(m.style("overflow","hidden"),"simple"===p)return this.simple_layout=!0,this.use_separarators=!1,void(this.framecnt=1);let F,R,_=2;if(0==p.indexOf("grid")||w){p=w?p+"x"+w:p.slice(4).trim(),this.use_separarators=!1,"i"===p[0]&&(this.use_separarators=!0,p=p.slice(1));let T,$,q=p.indexOf("x");if(q>0?($=parseInt(p.slice(q+1)),T=parseInt(p.slice(0,q))):T=$=parseInt(p),Number.isInteger(T)||(T=3),Number.isInteger($)||($=3),$>1)this.vertical=!0,_=$,T>1&&(F=new Array(_).fill(T));else{if(!(T>1))return this.simple_layout=!0,this.use_separarators=!1,void(this.framecnt=1);this.vertical=!1,_=T}p=""}if(p&&p.indexOf("_")>0){let q=parseInt(p.slice(p.indexOf("_")+1),10);if(Number.isInteger(q)&&q>10)for(p=p.slice(0,p.indexOf("_")),R=[];q>0;)R.unshift(Math.max(q%10,1)),q=Math.round((q-R[0])/10),0===R[0]&&(R[0]=1)}if(p=p?parseInt(p.replace(/^\D+/g,""),10):0,Number.isInteger(p)&&p>1)if(p<10)_=p;else{for(F=[];p>0;)F.unshift(p%10),p=Math.round((p-F[0])/10),0===F[0]&&(F[0]=1);_=F.length}R&&R.length!==_&&(R=void 0),this.simple_layout||((0,Ze.DW)('.jsroot_vline:after { content:""; position: absolute; top: 0; bottom: 0; left: 50%; border-left: 1px dotted #ff0000; }\n             .jsroot_hline:after { content:""; position: absolute; left: 0; right: 0; top: 50%; border-top: 1px dotted #ff0000; }\n             .jsroot_separator { pointer-events: all; border: 0; margin: 0; padding: 0; }',m.node(),"grid_style"),this.createGroup(this,m,_,F,R))}createGroup(x,p,w,m,_){_||(_=new Array(w));let F=0,R=0;for(let q=0;q<w;++q)F+=_[q]||1;for(let q=0;q<w;++q)_[q]=Math.round(100*(_[q]||1)/F),R+=_[q],q==w-1&&(_[q]+=100-R);for(let q=0;q<w;++q){let T={id:q,drawid:-1,position:0,size:_[q]};q>0&&(T.position=x.groups[q-1].position+x.groups[q-1].size),T.position0=T.position,(!m||!m[q]||m[q]<2)&&(T.drawid=this.framecnt++),x.groups.push(T);let $=p.append("div").attr("groupid",T.id);x.vertical?$.style("float","bottom").style("height",T.size+"%").style("width","100%"):$.style("float","left").style("width",T.size+"%").style("height","100%"),T.drawid>=0?($.classed("jsroot_newgrid",!0),(0,L.isStr)(this.frameid)&&$.attr("id",`${this.frameid}_${T.drawid}`)):$.style("display","flex").style("flex-direction",x.vertical?"row":"column"),m&&m[q]>1&&(T.vertical=!x.vertical,T.groups=[],$.style("overflow","hidden"),this.createGroup(T,$,m[q]))}if(this.use_separarators&&this.createSeparator)for(let q=1;q<w;++q)this.createSeparator(x,p,x.groups[q])}handleSeparator(x,p){let w=(0,M.Ys)(x),m=x.parentNode,_=w.property("handle"),F=w.property("separator_id"),R=_.groups[F];const q=Me=>{let de=m.firstChild;for(;de;){if(de.getAttribute("groupid")==Me)return(0,M.Ys)(de);de=de.nextSibling}return(0,M.Ys)(m).select(`[groupid='${Me}']`)},T=Me=>{let de=_.vertical?"height":"width",fe=_.groups[Me].size+"%";q(Me).style(de,fe).selectAll(".jsroot_separator").style(de,fe)},$=Me=>{let de=q(Me);de.classed("jsroot_newgrid")||(de=de.select(".jsroot_newgrid")),de.each(function(){(0,Be.SI)(this)})};if("start"==p)return R.startpos=R.position,void(R.acc_drag=0);if("end"==p)return void(Math.abs(R.startpos-R.position)>=.5&&($(F-1),$(F)));let J;"restore"==p?J=R.position0:_.vertical?(R.acc_drag+=p.dy,J=R.startpos+(R.acc_drag+2)/m.clientHeight*100):(R.acc_drag+=p.dx,J=R.startpos+(R.acc_drag+2)/m.clientWidth*100);let ie=R.position-J;Math.abs(ie)<.3||Math.min(_.groups[F-1].size-ie,R.size+ie)<3||(_.groups[F-1].size-=ie,R.size+=ie,R.position=J,w.style(_.vertical?"top":"left",`calc(${J}% - 2px)`),T(F-1),T(F),"restore"==p&&($(F-1),$(F)))}createSeparator(x,p,w){let m=p.append("div");m.classed("jsroot_separator",!0).classed(x.vertical?"jsroot_hline":"jsroot_vline",!0).property("handle",x).property("separator_id",w.id).style("position","absolute").style(x.vertical?"top":"left",`calc(${w.position}% - 2px)`).style(x.vertical?"width":"height",(x.size||100)+"%").style(x.vertical?"height":"width","5px").style("cursor",x.vertical?"ns-resize":"ew-resize");let _=this,F=(0,M.oh)().on("start",function(){_.handleSeparator(this,"start")}).on("drag",function(R){_.handleSeparator(this,R)}).on("end",function(){_.handleSeparator(this,"end")});m.call(F).on("dblclick",function(){_.handleSeparator(this,"restore")}),L.browser.touches&&!p.on("touchmove")&&p.on("touchmove",function(){})}forEachFrame(x){this.simple_layout?x(this.getGridFrame()):this.selectDom().selectAll(".jsroot_newgrid").each(function(){x(this)})}getActiveFrame(){if(this.simple_layout)return this.getGridFrame();let x=super.getActiveFrame();return x||(this.forEachFrame(p=>{x||(x=p)}),x)}numGridFrames(){return this.framecnt}getGridFrame(x){if(this.simple_layout)return this.selectDom("origin").node();let p=null;return this.selectDom().selectAll(".jsroot_newgrid").each(function(){0==x--&&(p=this)}),p}createFrame(x){this.beforeCreateFrame(x);let p=null,w=this.framecnt||2;for(;!p&&w--;)p=this.getGridFrame(this.getcnt),!this.simple_layout&&this.framecnt&&(this.getcnt=(this.getcnt+1)%this.framecnt),(0,M.Ys)(p).classed("jsroot_fixed_frame")&&(p=null);return p&&(this.cleanupFrame(p),(0,M.Ys)(p).attr("frame_title",x)),this.afterCreateFrame(p)}}class ue extends ce{constructor(x){super(x),this.cnt=0,this.selectDom().style("overflow","hidden")}cleanup(){this.selectDom().style("overflow",null),this.cnt=0,super.cleanup()}forEachFrame(x,p){if((0,L.isFunc)(x))if(p){let m=this.getActiveFrame();m&&x(m)}else this.selectDom().select(".jsroot_tabs_main").selectAll(".jsroot_tabs_draw").each(function(){x(this)})}modifyTabsFrame(x,p){let F,R,w=this.selectDom().select(".jsroot_tabs"),m=w.select(".jsroot_tabs_labels"),_=w.select(".jsroot_tabs_main");if(m.selectAll(".jsroot_tabs_label").each(function(){let T=(0,M.Ys)(this).property("frame_id")==x;"activate"==p?(0,M.Ys)(this).style("background",T?L.settings.DarkMode?"black":"white":null):"close"==p&&T&&this.parentNode.remove()}),_.selectAll(".jsroot_tabs_draw").each(function(){(0,M.Ys)(this).property("frame_id")===x?F=this:R=this}),F)if("activate"==p)F.parentNode.appendChild(F);else if("close"==p){let q=F===this.getActiveFrame();(0,Be.Eq)(F),F.remove(),q&&this.activateFrame(R)}}activateFrame(x){x&&this.modifyTabsFrame((0,M.Ys)(x).property("frame_id"),"activate"),super.activateFrame(x)}createFrame(x){this.beforeCreateFrame(x);let m,_,p=this.selectDom(),w=p.select(".jsroot_tabs");w.empty()?(w=p.append("div").classed("jsroot_tabs",!0),m=w.append("div").classed("jsroot_tabs_labels",!0),_=w.append("div").classed("jsroot_tabs_main",!0)):(m=w.select(".jsroot_tabs_labels"),_=w.select(".jsroot_tabs_main")),(0,Ze.DW)(`.jsroot_tabs { display: flex; flex-direction: column; position: absolute; overflow: hidden; inset: 0px 0px 0px 0px; }\n          .jsroot_tabs_labels { white-space: nowrap; position: relative; overflow-x: auto; }\n          .jsroot_tabs_labels .jsroot_tabs_label {\n             color: ${L.settings.DarkMode?"#ddd":"inherit"}; background: ${L.settings.DarkMode?"#111":"#eee"}; border: 1px solid ${L.settings.DarkMode?"#333":"#ccc"}; display: inline-block; font-size: 1rem; left: 1px;\n             margin-left: 3px; padding: 0px 5px 1px 5px; position: relative; vertical-align: bottom;\n          }\n          .jsroot_tabs_main { margin: 0; flex: 1 1 0%; position: relative; }\n          .jsroot_tabs_main .jsroot_tabs_draw { overflow: hidden; background: ${L.settings.DarkMode?"black":"white"}; position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; }`,p.node(),"tabs_style");let $=this.cnt++,J=this,ie=x;if((!ie||!(0,L.isStr)(ie))&&(ie=`frame_${$}`),ie.length>15){let de=ie.lastIndexOf("/");de==ie.length-1&&(de=ie.lastIndexOf("/",de-1)),ie=de>0&&ie.length-de<20&&ie.length-de>1?ie.slice(de+1):"..."+ie.slice(ie.length-17)}m.append("span").attr("tabindex",0).append("label").attr("class","jsroot_tabs_label").style("background","white").property("frame_id",$).text(ie).attr("title",x).on("click",function(de){de.preventDefault(),J.modifyTabsFrame((0,M.Ys)(this).property("frame_id"),"activate")}).append("button").attr("title","close").attr("style","margin-left: .5em; padding: 0; font-size: 0.5em; width: 1.8em; height: 1.8em; vertical-align: center;").html("&#x2715;").on("click",function(){J.modifyTabsFrame((0,M.Ys)(this.parentNode).property("frame_id"),"close")});let Me=_.append("div").attr("frame_title",x).attr("class","jsroot_tabs_draw").property("frame_id",$);return this.modifyTabsFrame($,"activate"),this.afterCreateFrame(Me.node())}}class X extends ce{constructor(x){super(x),this.cnt=0,this.selectDom().on("contextmenu",p=>this.showContextMenu(p)).style("overflow","auto")}cleanup(){this.selectDom().style("overflow",null).on("contextmenu",null),this.cnt=0,super.cleanup()}forEachFrame(x,p){if(!(0,L.isFunc)(x))return;let w=this;this.selectDom().select(".jsroot_flex_top").selectAll(".jsroot_flex_draw").each(function(){p&&"min"==w.getFrameState(this)||x(this)})}getActiveFrame(){let x=super.getActiveFrame();return x&&"min"!=(0,M.Ys)(x.parentNode).property("state")||(x=null,this.forEachFrame(p=>{x=p},!0)),x}activateFrame(x){if("first"===x||"last"===x){let w=null;this.forEachFrame(m=>{("last"==x||!w)&&(w=m)},!0),x=w}if(!x||"jsroot_flex_draw"!=x.getAttribute("class")||this.getActiveFrame()===x)return;super.activateFrame(x);let p=x.parentNode;p.parentNode.append(p),"min"!=this.getFrameState(x)&&((0,Be.O5)({pp:(0,Be.FG)(x),active:!0}),(0,Be.SI)(x))}getFrameState(x){return(0,M.Ys)(x.parentNode).property("state")}getFrameRect(x){if("max"==this.getFrameState(x)){let _=this.selectDom().select(".jsroot_flex_top");return{x:0,y:0,w:_.node().clientWidth,h:_.node().clientHeight}}let p=(0,M.Ys)(x.parentNode),w=p.style("left"),m=p.style("top");return{x:parseInt(w.slice(0,w.length-2)),y:parseInt(m.slice(0,m.length-2)),w:p.node().clientWidth,h:p.node().clientHeight}}changeFrameState(x,p,w){let m=(0,M.Ys)(x.parentNode),_=m.property("state"),F=this.selectDom().select(".jsroot_flex_top");if(_==p)return!1;switch("normal"==_&&m.property("original_style",m.attr("style")),F.style("overflow",null),p){case"min":m.style("height","auto").style("width","auto"),m.select(".jsroot_flex_draw").style("display","none");break;case"max":m.style("height","100%").style("width","100%").style("left","").style("top",""),m.select(".jsroot_flex_draw").style("display",null),F.style("overflow","hidden");break;default:m.select(".jsroot_flex_draw").style("display",null),m.attr("style",m.property("original_style"))}if(m.select(".jsroot_flex_header").selectAll("button").each(function(R){let q=(0,M.Ys)(this);"minimize"==R.t&&"min"==p||"maximize"==R.t&&"max"==p?q.html("&#x259E;").attr("title","restore"):q.html(R.n).attr("title",R.t)}),m.property("state",p),m.select(".jsroot_flex_resize").style("display","normal"==p?null:"none"),"min"==p){const R=this.getFrameRect(x),q=this.selectDom().select(".jsroot_flex_top"),T=q.node().clientWidth,$=q.node().clientHeight,J=[],ie=4,Me=(fe,I)=>fe.x<=I.x&&fe.x+fe.w>=I.x||I.x<=fe.x&&I.x+I.w>=fe.x,de=(fe,I)=>fe.y<=I.y&&fe.y+fe.h>=I.y||I.y<=fe.y&&I.y+I.h>=fe.y;this.forEachFrame(fe=>{fe!==x&&"min"==this.getFrameState(fe)&&J.push(this.getFrameRect(fe))}),R.y=$;do{R.x=ie,R.y-=R.h+ie;let fe=ie,I=!1;J.forEach(U=>{de(U,R)&&(fe=Math.max(fe,U.x+U.w+ie),Me(U,R)&&(I=!0))}),I&&(R.x=fe)}while(R.x+R.w>T-ie&&R.y>0);R.y<0&&(R.x=ie,R.y=$-R.h-ie),m.style("left",R.x+"px").style("top",R.y+"px")}else w||(0,Be.SI)(x);return!0}_clickButton(x){let p=(0,M.Ys)(x).datum(),w=(0,M.Ys)(x.parentNode.parentNode),m=w.select(".jsroot_flex_draw").node();if("close"==p.t)return this.cleanupFrame(m),w.remove(),void this.activateFrame("last");let F,_=w.property("state");F="maximize"==p.t?"max"==_?"normal":"max":"min"==_?"normal":"min",this.changeFrameState(m,F)&&this.activateFrame("min"!=F?m:"last")}createFrame(x){this.beforeCreateFrame(x);let p=this,w=this.selectDom(),m=w.select(".jsroot_flex_top");(0,Ze.DW)(".jsroot_flex_top { overflow: auto; position: relative; height: 100%; width: 100%; }\n          .jsroot_flex_btn { float: right; padding: 0; width: 1.4em; text-align: center; font-size: 10px; margin-top: 2px; margin-right: 4px; }\n          .jsroot_flex_header { height: 23px; overflow: hidden; background-color: lightblue; }\n          .jsroot_flex_header p { margin: 1px; float: left; font-size: 14px; padding-left: 5px; }\n          .jsroot_flex_draw { overflow: hidden; width: 100%; height: calc(100% - 24px); }\n          .jsroot_flex_frame { border: 1px solid black; box-shadow: 1px 1px 2px 2px #aaa; background: white; }\n          .jsroot_flex_resize { position: absolute; right: 2px; bottom: 2px; overflow: hidden; cursor: nwse-resize; }\n          .jsroot_flex_resizable_helper { border: 2px dotted #00F; }",w.node(),"flex_style"),m.empty()&&(m=w.append("div").classed("jsroot_flex_top",!0));let _=m.node().clientWidth,F=m.node().clientHeight,R=m.append("div");R.html(`<div class='jsroot_flex_header'><p>${x}</p></div><div id='${this.frameid}_cont${this.cnt}' class='jsroot_flex_draw'></div><div class='jsroot_flex_resize'>&#x25FF;</div>`),R.attr("class","jsroot_flex_frame").style("position","absolute").style("left",Math.round(_*(this.cnt%5)/10)+"px").style("top",Math.round(F*(this.cnt%5)/10)+"px").style("width",Math.round(.58*_)+"px").style("height",Math.round(.58*F)+"px").property("state","normal").select(".jsroot_flex_header").on("click",function(){p.activateFrame((0,M.Ys)(this.parentNode).select(".jsroot_flex_draw").node())}).selectAll("button").data([{n:"&#x2715;",t:"close"},{n:"&#x2594;",t:"maximize"},{n:"&#x2581;",t:"minimize"}]).enter().append("button").attr("type","button").attr("class","jsroot_flex_btn").attr("title",de=>de.t).html(de=>de.n).on("click",function(){p._clickButton(this)});let q=null,T=null,$=!1,J=(0,M.oh)().subject(Object),ie=[];J.on("start",function(de){if("button"==de.sourceEvent.target.type)return p._clickButton(de.sourceEvent.target);if((0,Ze.hj)(de.sourceEvent))return;let fe=(0,M.Ys)(this.parentNode);!fe.classed("jsroot_flex_frame")||"max"==fe.property("state")||($=!(0,M.Ys)(this).classed("jsroot_flex_resize"),($||"min"!=fe.property("state"))&&(p.activateFrame(fe.select(".jsroot_flex_draw").node()),T=m.append("div").classed("jsroot_flex_resizable_helper",!0),T.attr("style",fe.attr("style")),"min"==fe.property("state")&&T.style("width",fe.node().clientWidth+"px").style("height",fe.node().clientHeight+"px"),de.sourceEvent.preventDefault(),de.sourceEvent.stopPropagation(),q=fe,ie=[]))}).on("drag",function(de){if(!T)return;de.sourceEvent.preventDefault(),de.sourceEvent.stopPropagation();let fe=(I,U,z)=>{if(I>=ie.length){let le=T.style(U);ie[I]=parseInt(le.slice(0,le.length-2))}ie[I]+=z,T.style(U,Math.max(0,ie[I])+"px")};$?(fe(0,"left",de.dx),fe(1,"top",de.dy)):(fe(0,"width",de.dx),fe(1,"height",de.dy))}).on("end",function(de){T&&(de.sourceEvent.preventDefault(),de.sourceEvent.stopPropagation(),$?(q.style("left",T.style("left")),q.style("top",T.style("top"))):(q.style("width",T.style("width")),q.style("height",T.style("height"))),T.remove(),T=null,$||(0,Be.SI)(q.select(".jsroot_flex_draw").node()))}),R.select(".jsroot_flex_header").call(J),R.select(".jsroot_flex_resize").call(J);let Me=R.select(".jsroot_flex_draw").attr("frame_title",x).property("frame_cnt",this.cnt++).node();return this.afterCreateFrame(Me)}minimizeAll(){this.forEachFrame(x=>this.changeFrameState(x,"min"))}showAll(){this.forEachFrame(x=>{"min"==this.getFrameState(x)&&this.changeFrameState(x,"normal")})}closeAllFrames(){let x=[];this.forEachFrame(p=>x.push(p)),x.forEach(p=>{this.cleanupFrame(p),(0,M.Ys)(p.parentNode).remove()})}sortFrames(x){let p=[];if(this.forEachFrame($=>{let J=this.getFrameState($);"min"!=J&&("max"==J&&this.changeFrameState($,"normal",!0),p.push($))}),0==p.length)return;let w=this.selectDom(),m=w.node().clientWidth,_=w.node().clientHeight,F=Math.min(40,Math.round(.4*m/p.length)),R=Math.min(40,Math.round(.4*_/p.length)),q=Math.ceil(Math.sqrt(p.length)),T=q;q>1&&q*(q-1)>=p.length&&(m>_?T--:q--),p.forEach(($,J)=>{let ie=(0,M.Ys)($.parentNode);"cascade"==x?ie.style("left",J*F+"px").style("top",J*R+"px").style("width",Math.round(.58*m)+"px").style("height",Math.round(.58*_)+"px"):ie.style("left",Math.round(m/q*(J%q))+"px").style("top",Math.round(_/T*((J-J%q)/q))+"px").style("width",Math.round(m/q-4)+"px").style("height",Math.round(_/T-4)+"px"),(0,Be.SI)($)})}showContextMenu(x){if("jsroot_flex_top"!=x.target.getAttribute("class")||0==this.numDraw())return;x.preventDefault();let p=[],w=0;this.forEachFrame(_=>{p.push(_),"min"==this.getFrameState(_)&&w++});let m=this.getActiveFrame();p.sort((_,F)=>(0,M.Ys)(_).property("frame_cnt")<(0,M.Ys)(F).property("frame_cnt")?-1:1),(0,je.Z)(x,this).then(_=>{_.add("header:Flex"),_.add("Cascade",()=>this.sortFrames("cascade"),"Cascade frames"),_.add("Tile",()=>this.sortFrames("tile"),"Tile all frames"),w<p.length&&_.add("Minimize all",()=>this.minimizeAll(),"Minimize all frames"),w>0&&_.add("Show all",()=>this.showAll(),"Restore minimized frames"),_.add("Close all",()=>this.closeAllFrames()),_.add("separator"),p.forEach((F,R)=>_.addchk(F===m,("min"==this.getFrameState(F)?"[min] ":"")+(0,M.Ys)(F).attr("frame_title"),R,q=>{let T=p[q];"min"==this.getFrameState(T)&&this.changeFrameState(T,"normal"),this.activateFrame(T)})),_.show()})}}class Z extends ce{constructor(x,p,w){super("$batch$"),this.frames=[],this.width=x||1200,this.height=p||800,this.jsdom_body=w||(0,M.Ys)("body")}forEachFrame(x){this.frames.forEach(x)}createFrame(x){this.beforeCreateFrame(x);let p=this.jsdom_body.append("div").style("visible","hidden").attr("width",this.width).attr("height",this.height).style("width",this.width+"px").style("height",this.height+"px").attr("id","jsroot_batch_"+this.frames.length).attr("frame_title",x);return 0==this.frames.length&&(L.internals.svg_3ds=void 0),this.frames.push(p.node()),this.afterCreateFrame(p.node())}numFrames(){return this.frames.length}makeJSON(x,p){let w=this.frames[x];if(!w)return;let m=(0,M.Ys)(w).property("_json_object_");return m?((0,M.Ys)(w).property("_json_object_",null),(0,L.toJSON)(m,p)):void 0}makeSVG(x){let p=this.frames[x];if(!p)return;let w=(0,M.Ys)(p),m=L.internals.svg_3ds&&L.internals.processSvgWorkarounds;w.select("svg").attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xlink","http://www.w3.org/1999/xlink").attr("width",this.width).attr("height",this.height).attr("title",null).attr("style",null).attr("class",null).attr("x",null).attr("y",null);let _=w.html();return m&&(_=L.internals.processSvgWorkarounds(_,x!=this.frames.length-1)),_=(0,ye.ln)(_),w.remove(),_}}class O{constructor(x,p,w){this.gui_div=x,this.hpainter=p,this.objpainter=w,this.browser_kind=null}main(){return(0,M.Ys)("#"+this.gui_div)}browser(){return this.main().select(".jsroot_browser")}drawing(){return(0,M.Ys)(`#${this.gui_div}_drawing`)}status(){return(0,M.Ys)(`#${this.gui_div}_status`)}drawing_divid(){return this.gui_div+"_drawing"}checkResize(){(0,L.isFunc)(this.hpainter?.checkResize)?this.hpainter.checkResize():(0,L.isFunc)(this.objpainter?.checkResize)&&this.objpainter.checkResize(!0)}createStyle(){let x=L.settings.DarkMode?"black":"#E6E6FA",w=L.settings.DarkMode?"#ddd":"inherit",m=L.settings.DarkMode?`background-color: #222; color: ${w}`:"";(0,Ze.DW)(`.jsroot_browser { pointer-events: none; position: absolute; left: 0; top: 0; bottom: 0; right:0; margin: 0; border: 0; overflow: hidden; }\n          .jsroot_draw_area { background-color: ${x}; overflow: hidden; margin: 0; border: 0; }\n          .jsroot_browser_area { color: ${w}; background-color: ${x}; font-size: 12px; font-family: Verdana; pointer-events: all; box-sizing: initial; }\n          .jsroot_browser_area input { ${m} }\n          .jsroot_browser_area select { ${m} }\n          .jsroot_browser_title { font-family: Verdana; font-size: 20px; color: ${L.settings.DarkMode?"#ccc":"inherit"}; }\n          .jsroot_browser_btns { pointer-events: all; opacity: 0; display:flex; flex-direction: column; }\n          .jsroot_browser_btns:hover { opacity: 0.3; }\n          .jsroot_browser_area p { margin-top: 5px; margin-bottom: 5px; white-space: nowrap; }\n          .jsroot_browser_hierarchy { flex: 1; margin-top: 2px; }\n          .jsroot_status_area { background-color: ${x}; overflow: hidden; font-size: 12px; font-family: Verdana; pointer-events: all; }\n          .jsroot_float_browser { border: solid 3px white; }\n          .jsroot_browser_resize { position: absolute; right: 3px; bottom: 3px; margin-bottom: 0px; margin-right: 0px; opacity: 0.5; cursor: se-resize; z-index: 1; }\n          .jsroot_status_label { margin: 3px; margin-left: 5px; font-size: 14px; vertical-align: middle; white-space: nowrap; }\n          .jsroot_separator { pointer-events: all; border: 0; margin: 0; padding: 0; }\n          .jsroot_h_separator { cursor: ns-resize; background-color: azure; }\n          .jsroot_v_separator { cursor: ew-resize; background-color: azure; }`,this.main().node(),"browser_layout_style")}create(x){let p=this.main();p.append("div").attr("id",this.drawing_divid()).classed("jsroot_draw_area",!0).style("position","absolute").style("left",0).style("top",0).style("bottom",0).style("right",0),x&&p.append("div").classed("jsroot_browser",!0),this.createStyle()}createBrowserBtns(){let x=this.browser();if(x.empty())return;let p=x.append("div").classed("jsroot_browser_btns",!0).classed("jsroot",!0);return p.style("position","absolute").style("left","7px").style("top","7px"),L.browser.touches&&p.style("opacity","0.2"),p}removeBrowserBtns(){this.browser().select(".jsroot_browser_btns").remove()}setBrowserContent(x){let p=this.browser();p.empty()||p.insert("div",".jsroot_browser_btns").classed("jsroot_browser_area",!0).style("position","absolute").style("left",0).style("top",0).style("bottom",0).style("width","250px").style("overflow","hidden").style("padding-left","5px").style("display","flex").style("flex-direction","column").html(`<p class='jsroot_browser_title'>title</p><div class='jsroot_browser_resize' style='display:none'>&#9727</div>${x}`)}hasContent(){let x=this.browser();return!x.empty()&&!x.select(".jsroot_browser_area").empty()}deleteContent(x){let p=this.browser();p.empty()||(x||this.createStatusLine(0,"delete"),this.toggleBrowserVisisbility(!0),x?(p.select(".jsroot_browser_area").remove(),p.select(".jsroot_browser_btns").remove(),p.select(".jsroot_v_separator").remove()):p.selectAll("*").remove(),delete this.browser_visible,delete this.browser_kind,this.checkResize())}hasStatus(){return!this.browser().empty()&&!this.status().empty()}setBrowserTitle(x){let p=this.browser(),w=p.empty()?null:p.select(".jsroot_browser_title");return w&&w.text(x).style("cursor","flex"==this.browser_kind?"move":null),w}toggleKind(x){"changing"!==this.browser_visible&&(x===this.browser_kind?this.toggleBrowserVisisbility():this.toggleBrowserKind(x))}createStatusLine(x,p){var w=this;return(0,ze.Z)(function*(){let m=w.browser();if(m.empty())return"";let _=w.gui_div+"_status",F=(0,M.Ys)("#"+_),R=!F.empty();if("toggle"===p?p=!R:"delete"===p?(p=!1,x=0,delete w.status_layout):void 0===p&&(p=!0,w.status_layout="app"),R)return!0===p?_:(m.select(".jsroot_h_separator").remove(),F.remove(),"app"!==w.status_layout&&delete w.status_layout,w.status_handler&&L.internals.showStatus===w.status_handler&&(delete L.internals.showStatus,delete w.status_handler),w.adjustSeparators(null,0,!0),"");if(!1===p)return"";let q=w.drawing().style("left");m.insert("div",".jsroot_browser_area").attr("id",_).classed("jsroot_status_area",!0).style("position","absolute").style("left",q).style("height","20px").style("bottom",0).style("right",0).style("margin",0).style("border",0);let T=m.insert("div",".jsroot_browser_area").classed("jsroot_separator",!0).classed("jsroot_h_separator",!0).style("position","absolute").style("left",q).style("right",0).style("bottom","20px").style("height","5px"),$=(0,M.oh)().on("start",()=>{w._hsepar_move=w._hsepar_position,T.style("background-color","grey")}).on("drag",ie=>{w._hsepar_move-=ie.dy,w.adjustSeparators(null,Math.max(5,Math.round(w._hsepar_move)))}).on("end",()=>{delete w._hsepar_move,T.style("background-color",null),w.checkResize()});if(T.call($),L.browser.touches&&!m.on("touchmove")&&m.on("touchmove",function(){}),(!x||(0,L.isStr)(x))&&(x=w.last_hsepar_height||20),w.adjustSeparators(null,x,!0),"app"==w.status_layout)return _;w.status_layout=new K(_,"horizx4_1213");let J=["object name","object title","mouse coordinates","object info"];for(let ie=0;ie<4;++ie)(0,M.Ys)(w.status_layout.getGridFrame(ie)).attr("title",J[ie]).style("overflow","hidden").append("label").attr("class","jsroot_status_label");return L.internals.showStatus=w.status_handler=w.showStatus.bind(w),_})()}adjustSeparators(x,p,w,m){if(!this.gui_div)return;let _=this.browser();if(null===p&&m&&!_.select(".jsroot_h_separator").empty()&&(p=_.select(".jsroot_h_separator").style("bottom"),p=(0,L.isStr)(p)&&p.length>2&&p.indexOf("px")==p.length-2?p.slice(0,p.length-2):null),null!==p){p=parseInt(p);let R=_.select(".jsroot_h_separator"),q=0;if(!R.empty()){p<5&&(p=5);let T=_.node().clientHeight-5;T>0&&(p<0&&(p+=T),p>T&&(p=T)),this.last_hsepar_height=p,R.style("bottom",p+"px").style("height","5px"),this.status().style("height",p+"px"),q=p+5+"px"}this._hsepar_position=p,this.drawing().style("bottom",q)}null!==x&&((x=parseInt(x))<50&&(x=50),this._vsepar_position=x,_.select(".jsroot_browser_area").style("width",x-5+"px"),this.drawing().style("left",x+5+"px"),_.select(".jsroot_h_separator").style("left",x+5+"px"),this.status().style("left",x+5+"px"),_.select(".jsroot_v_separator").style("left",x+"px").style("width","5px")),w&&this.checkResize()}showStatus(...x){if(!this.status_layout)return;let p=0;for(let w=0;w<4;++w){let m=this.status_layout.getGridFrame(w).querySelector("label");p=Math.max(p,m.clientHeight),m.innerHTML=x[w]||""}this.status_layout.first_check||(this.status_layout.first_check=!0,p>5&&(p>this.last_hsepar_height||p<this.last_hsepar_height+5)&&this.adjustSeparators(null,p,!0))}toggleBrowserVisisbility(x){if(!this.gui_div||(0,L.isStr)(this.browser_visible))return;let p=this.browser(),w=p.select(".jsroot_browser_area");if(w.empty())return;let m=p.select(".jsroot_v_separator"),_=(0,M.Ys)(`#${this.gui_div}_drawing`),F=w.property("last_left"),R=w.property("last_vsepar"),q=w.property("last_drawing");if(this.browser_visible){w.property("last_left",w.style("left")),m.empty()||(w.property("last_vsepar",m.style("left")),w.property("last_drawing",_.style("left"))),F=-w.node().clientWidth-10+"px";let J=p.node().clientWidth;m.empty()&&w.node().offsetLeft>J/2&&(F=J+10+"px"),R="-10px",q="0px"}else{if(x)return;w.property("last_left",null).property("last_vsepar",null).property("last_drawing",null)}let T=!this.browser_visible,$=x?0:700;this.browser_visible="changing",w.transition().style("left",F).duration($).on("end",()=>{x||(this.browser_visible=T,T&&this.setButtonsPosition())}),T||p.select(".jsroot_browser_btns").transition().style("left","7px").style("top","7px").duration($),m.empty()||(m.transition().style("left",R).duration($),_.transition().style("left",q).duration($).on("end",this.checkResize.bind(this))),this.status_layout&&"fix"==this.browser_kind&&(p.select(".jsroot_h_separator").transition().style("left",q).duration($),p.select(".jsroot_status_area").transition().style("left",q).duration($))}adjustBrowserSize(x){if(!this.gui_div||"float"!==this.browser_kind)return;let p=this.browser();if(p.empty())return;let w=p.select(".jsroot_browser_area"),m=p.select(".jsroot_browser_hierarchy"),_=(0,M.Ys)(m.node().firstChild);if(x)return void(w.node().parentNode.clientHeight-10<w.node().clientHeight&&w.style("bottom","0px").style("top","0px"));if(_.empty())return;let F=m.node().clientHeight,R=_.node().clientHeight;void 0!==R&&R<.7*F&&w.style("bottom","")}setButtonsPosition(){if(!this.gui_div)return;let x=this.browser(),p=x.select(".jsroot_browser_btns"),w=7,m=7;if(!p.empty()){if(this.browser_visible){let _=x.select(".jsroot_browser_area");w=_.node().offsetTop+7,m=_.node().offsetLeft-x.node().offsetLeft+_.node().clientWidth-27}p.style("left",m+"px").style("top",w+"px")}}toggleBrowserKind(x){var p=this;return(0,ze.Z)(function*(){if(!p.gui_div)return null;if(!x){if(!p.browser_kind)return null;x="float"===p.browser_kind?"fix":"float"}let w=p.browser(),m=w.select(".jsroot_browser_area");if("float"===p.browser_kind?m.style("bottom","0px").style("top","0px").style("width","").style("height","").classed("jsroot_float_browser",!1):"fix"===p.browser_kind&&(w.select(".jsroot_v_separator").remove(),m.style("left","0px"),p.drawing().style("left","0px"),w.select(".jsroot_h_separator").style("left","0px"),p.status().style("left","0px"),p.checkResize()),p.browser_kind=x,p.browser_visible=!0,w.select(".jsroot_browser_resize").style("display","float"===x?null:"none"),w.select(".jsroot_browser_title").style("cursor","float"===x?"move":null),"float"===x){m.style("bottom","40px").classed("jsroot_float_browser",!0);let _=(0,M.oh)().on("start",()=>{let R=m.style("left"),q=m.style("top");p._float_left=parseInt(R.slice(0,R.length-2)),p._float_top=parseInt(q.slice(0,q.length-2)),p._max_left=w.node().clientWidth-m.node().offsetWidth-1,p._max_top=w.node().clientHeight-m.node().offsetHeight-1}).filter(R=>w.select(".jsroot_browser_title").node()===R.target).on("drag",R=>{p._float_left+=R.dx,p._float_top+=R.dy,m.style("left",Math.min(Math.max(0,p._float_left),p._max_left)+"px").style("top",Math.min(Math.max(0,p._float_top),p._max_top)+"px"),p.setButtonsPosition()}),F=(0,M.oh)().on("start",()=>{let R=m.style("width");p._float_width=parseInt(R.slice(0,R.length-2)),p._float_height=m.node().clientHeight,p._max_width=w.node().clientWidth-m.node().offsetLeft-1,p._max_height=w.node().clientHeight-m.node().offsetTop-1}).on("drag",R=>{p._float_width+=R.dx,p._float_height+=R.dy,m.style("width",Math.min(Math.max(100,p._float_width),p._max_width)+"px").style("height",Math.min(Math.max(100,p._float_height),p._max_height)+"px"),p.setButtonsPosition()});w.call(_),w.select(".jsroot_browser_resize").call(F),p.adjustBrowserSize()}else{m.style("left",0).style("top",0).style("bottom",0).style("height",null);let _=w.append("div").classed("jsroot_separator",!0).classed("jsroot_v_separator",!0).style("position","absolute").style("top",0).style("bottom",0),F=(0,M.oh)().on("start",()=>{p._vsepar_move=p._vsepar_position,_.style("background-color","grey")}).on("drag",R=>{p._vsepar_move+=R.dx,p.setButtonsPosition(),p.adjustSeparators(Math.round(p._vsepar_move),null)}).on("end",()=>{delete p._vsepar_move,_.style("background-color",null),p.checkResize()});_.call(F),L.browser.touches&&!w.on("touchmove")&&w.on("touchmove",function(){}),p.adjustSeparators(250,null,!0,!0)}return p.setButtonsPosition(),p})()}}},4383:($r,At,Ce)=>{"use strict";Ce.d(At,{W:()=>K,Z:()=>Y});var ze=Ce(5835),M=Ce(9542),L=Ce(2253),ye=Ce(9622),Be=Ce(3038),je=Ce(6417),Ze=Ce(6367),Ie=Ce(4953);class He{constructor(X,Z,O){this.painter=X,this.menuname=Z,(0,M.isObject)(O)&&void 0!==O.clientX&&void 0!==O.clientY&&(this.show_evnt={clientX:O.clientX,clientY:O.clientY}),this.remove_handler=()=>this.remove(),this.element=null,this.cnt=0}native(){return!1}load(){var X=this;return(0,ze.Z)(function*(){return X})()}getEventPosition(){return this.show_evnt}add(){throw Error("add() method has to be implemented in the menu")}size(){return this.cnt}remove(){null!==this.element&&(this.element.remove(),this.resolveFunc&&(this.resolveFunc(),delete this.resolveFunc),document.body.removeEventListener("click",this.remove_handler)),this.element=null}show(){throw Error("show() method has to be implemented in the menu class")}addchk(X,Z,O,P,x){let p=P;(0,M.isFunc)(O)&&(x=P,P=O,p=w=>P("1"==w),O=X?"0":"1"),this.add((X?"chk:":"unk:")+Z,O,p,x)}addDrawMenu(X,Z,O){if(!Z||!Z.length)return;let P=!1;if(0==X.indexOf("nosub:")&&(P=!0,X=X.slice(6)),1===Z.length)return"inspect"===Z[0]&&(X=X.replace("Draw","Inspect")),void this.add(X,Z[0],O);P||this.add("sub:"+X,Z[0],O);for(let x=0;x<Z.length;++x){let p=Z[x]||(this._use_plain_text?"<dflt>":"&lt;dflt&gt;"),w=x+1;if(Z.length>5&&p)for(;w<Z.length&&0==Z[w].indexOf(p);)w++;if(P&&(p=X+" "+p),w<x+2)this.add(p,Z[x],O);else{this.add("sub:"+p,Z[x],O);for(let m=x+1;m<w;++m)this.add(Z[m],Z[m],O);this.add("endsub:"),x=w-1}}P||this.add("endsub:")}addColorMenu(X,Z,O,P){if(void 0===Z)return;let x=!(0,M.isStr)(Z);this.add("sub:"+X,()=>{this.input("Enter color "+(x?"(only id number)":"(name or id)"),Z,x?"int":"text",x?0:void 0,x?9999:void 0).then(p=>{let w=parseInt(p);if(Number.isInteger(w)&&(0,Be.Lq)(w))p=(0,Be.Lq)(w);else if(x)return;O(x?w:p)})});for(let p=0;p<5;++p){this.add("column:");for(let w=0;w<10;w++){let m=10*p+w;x||--m;let _=m<0?"none":(0,Be.Lq)(m);0==m&&1==P&&(_="none"),this.add(`<svg width="50" height="18" style="margin:0px;background-color:${_}">${Z==(x?m:_)?`<rect width="50" height="18" style="fill:none;stroke-width:3px;stroke:${1==m?"red":"black"}"></rect>`:""}<text x="4" y="12" style='font-size:12px' fill="${1==m?"white":"black"}">${m<=0||"#"!=_[0]?_:`col ${m}`}</text></svg>`,x?m:_,J=>O(x?parseInt(J):J),"Select color "+_)}if(this.add("endcolumn:"),!this.native())break}this.add("endsub:")}addSizeMenu(X,Z,O,P,x,p,w){if(void 0===x)return;let m=[],_=!1;if((0,M.isObject)(P))m=P,P=1;else for(let q=Z;q<=O;q+=P)m.push(q);const F=q=>Math.abs(q-x)<1e-5*(O-Z),R=(q,T)=>(q===x&&_&&(T=!0),q.toFixed(P>=1?0:P>=.1?T?2:1:T?4:2));m.findIndex(F)<0&&(_=!0,m.push(x),m=m.sort((q,T)=>q>T)),this.add("sub:"+X,()=>this.input("Enter value of "+X,R(x,!0),P>=1?"int":"float").then(p),w),m.forEach(q=>this.addchk(F(q),R(q),q,T=>p(P>=1?parseInt(T):parseFloat(T)))),this.add("endsub:")}addPaletteMenu(X,Z){const O=(P,x,p,w)=>{x?p||(p=x):x=`pal ${P}`,p&&(p+=`, code ${P}`),this.addchk(P===X||w,"<nobr>"+x+"</nobr>",P,Z,p||x)};if(this.add("sub:Palette",()=>this.input("Enter palette code [1..113]",X,"int",1,113).then(Z)),this.add("column:"),O(57,"Bird","Default color palette",X>113),O(55,"Rainbow"),O(51,"Deep Sea"),O(52,"Grayscale","New gray scale"),O(1,"","Old gray scale",X>0&&X<10),O(50,"ROOT 5","Default color palette in ROOT 5",X>=10&&X<51),O(53,"","Dark body radiator"),O(54,"","Two-color hue"),O(56,"","Inverted dark body radiator"),O(58,"Cubehelix"),O(59,"","Green Red Violet"),O(60,"","Blue Red Yellow"),O(61,"Ocean"),this.add("endcolumn:"),!this.native())return this.add("endsub:");this.add("column:"),O(62,"","Color Printable On Grey"),O(63,"Alpine"),O(64,"Aquamarine"),O(65,"Army"),O(66,"Atlantic"),O(67,"Aurora"),O(68,"Avocado"),O(69,"Beach"),O(70,"Black Body"),O(71,"","Blue Green Yellow"),O(72,"Brown Cyan"),O(73,"CMYK"),O(74,"Candy"),this.add("endcolumn:"),this.add("column:"),O(75,"Cherry"),O(76,"Coffee"),O(77,"","Dark Rain Bow"),O(78,"","Dark Terrain"),O(79,"Fall"),O(80,"Fruit Punch"),O(81,"Fuchsia"),O(82,"Grey Yellow"),O(83,"","Green Brown Terrain"),O(84,"Green Pink"),O(85,"Island"),O(86,"Lake"),O(87,"","Light Temperature"),this.add("endcolumn:"),this.add("column:"),O(88,"","Light Terrain"),O(89,"Mint"),O(90,"Neon"),O(91,"Pastel"),O(92,"Pearl"),O(93,"Pigeon"),O(94,"Plum"),O(95,"Red Blue"),O(96,"Rose"),O(97,"Rust"),O(98,"","Sandy Terrain"),O(99,"Sienna"),O(100,"Solar"),this.add("endcolumn:"),this.add("column:"),O(101,"","South West"),O(102,"","Starry Night"),O(103,"","Sunset"),O(104,"","Temperature Map"),O(105,"","Thermometer"),O(106,"Valentine"),O(107,"","Visible Spectrum"),O(108,"","Water Melon"),O(109,"Cool"),O(110,"Copper"),O(111,"","Gist Earth"),O(112,"Viridis"),O(113,"Cividis"),this.add("endcolumn:"),this.add("endsub:")}addRebinMenu(X){this.add("sub:Rebin",()=>this.input("Enter rebin value",2,"int",2).then(X));for(let Z=2;Z<=7;Z++)this.add(Z.toString(),Z,O=>X(parseInt(O)));this.add("endsub:")}addSelectMenu(X,Z,O,P){let x="number"==typeof O;this.add("sub:"+X);for(let p=0;p<Z.length;++p)this.addchk(x?p==O:Z[p]==O,Z[p],x?p:Z[p],w=>P(x?Number.parseInt(w):w));this.add("endsub:")}addRColorMenu(X,Z,O){let P=["default","black","white","red","green","blue","yellow","magenta","cyan"];this.add("sub:"+X,()=>{this.input("Enter color name - empty string will reset color",Z).then(O)});let x="black";for(let p=0;p<P.length;++p){let w=P[p],m=!1,_="";p>0?(_="background-color:"+w,x="white"==w?"black":"white",(0,M.isStr)(Z)&&Z&&"auto"!=Z&&"["!=Z[0]&&(m=(0,L.B8)(Z).toString()==(0,L.B8)(w).toString())):m=!Z,this.addchk(m,`<svg width='100' height='18' style='margin:0px;${_}'><text x='4' y='12' style='font-size:12px' fill='${x}'>${w}</text></svg>`,w,R=>O("default"==R?null:R))}this.add("endsub:")}addRAttrTextItems(X,Z,O){Z||(Z={}),this.addRColorMenu("color",X.color,P=>O({name:"color",value:P})),X.scaled?this.addSizeMenu("size",.01,.1,.01,X.size/X.scale,P=>O({name:"size",value:P})):this.addSizeMenu("size",6,20,2,X.size,P=>O({name:"size",value:P})),this.addSelectMenu("family",["Arial","Times New Roman","Courier New","Symbol"],X.name,P=>O({name:"font_family",value:P})),this.addSelectMenu("style",["normal","italic","oblique"],X.style||"normal",P=>O({name:"font_style",value:"normal"==P?null:P})),this.addSelectMenu("weight",["normal","lighter","bold","bolder"],X.weight||"normal",P=>O({name:"font_weight",value:"normal"==P?null:P})),Z.noalign||this.add("align"),Z.noangle||this.add("angle")}addTextAttributesMenu(X,Z){let O=X.getObject();if(void 0===O?.fTextColor||null==O?.fTextAlign)return;this.add("sub:"+(Z||"Text")),this.addColorMenu("color",O.fTextColor,x=>{O.fTextColor=x,X.interactiveRedraw(!0,(0,ye.Aq)(x,"SetTextColor"))});let P=[11,12,13,21,22,23,31,32,33];this.add("sub:align");for(let x=0;x<P.length;++x)this.addchk(P[x]==O.fTextAlign,P[x],P[x],function(p){this.getObject().fTextAlign=parseInt(p),this.interactiveRedraw("pad",`exec:SetTextAlign(${p})`)}.bind(X));this.add("endsub:"),this.addFontMenu("font",O.fTextFont,function(x){this.getObject().fTextFont=x,this.interactiveRedraw(!0,`exec:SetTextFont(${x})`)}.bind(X)),this.add("endsub:")}addLineStyleMenu(X,Z,O){this.add("sub:"+X,()=>this.input("Enter line style id (1-solid)",Z,"int",1,11).then(P=>{(0,Ze.p)(P)&&O(P)}));for(let P=1;P<11;++P){let x=(0,Ze.p)(P);this.addchk(Z==P,`<svg width='100' height='18'><text x='1' y='12' style='font-size:12px'>${P}</text><line x1='30' y1='8' x2='100' y2='8' stroke='black' stroke-width='3' stroke-dasharray='${x}'></line></svg>`,P,w=>O(parseInt(w)))}this.add("endsub:")}addFillStyleMenu(X,Z,O,P,x){this.add("sub:"+X,()=>{this.input("Enter fill style id (1001-solid, 3000..3010)",Z,"int",0,4e3).then(w=>{w>=0&&w<=4e3&&x(w)})});let p=[1,1001,3001,3002,3003,3004,3005,3006,3007,3010,3021,3022];for(let w=0;w<p.length;++w){let m=p[w];if(P){let _=P.createAttFill({std:!1,pattern:p[w],color:O||1});m=`<svg width='100' height='18'><text x='1' y='12' style='font-size:12px'>${p[w].toString()}</text><rect x='40' y='0' width='60' height='18' stroke='none' fill='${_.getFillColor()}'></rect></svg>`}this.addchk(Z==p[w],m,p[w],_=>x(parseInt(_)))}this.add("endsub:")}addFontMenu(X,Z,O){this.add("sub:"+X,()=>{this.input("Enter font id from [0..20]",Math.floor(Z/10),"int",0,20).then(P=>{P>=0&&P<=20&&O(10*P+2)})}),this.add("column:");for(let P=1;P<20;++P){let x=new Ie.G(10*P+2,14),p=(0,L.Ys)(document.createElementNS("http://www.w3.org/2000/svg","text")),w=x.getFontName(),m=" "+w.split(" ")[0]+" ";x.weight&&(m="b"+m,w+=" "+x.weight),x.style&&(m=x.style[0]+m,w+=" "+x.style),p.attr("x",1).attr("y",15).text(m),x.setFont(p);let _=Z!=10*P+2?"":"<rect width='90' height='18' style='fill:none;stroke:black'></rect>",F=`<svg width='90' height='18'>${p.node().outerHTML}${_}</svg>`;this.add(F,P,R=>O(10*parseInt(R)+2),w),10==P&&(this.add("endcolumn:"),this.add("column:"))}this.add("endcolumn:"),this.add("endsub:")}addAttributesMenu(X,Z){if(Z||(Z=""),X.lineatt?.used&&(this.add("sub:"+Z+"Line att"),this.addSizeMenu("width",1,10,1,X.lineatt.width,O=>{X.lineatt.change(void 0,O),X.interactiveRedraw(!0,`exec:SetLineWidth(${O})`)}),this.addColorMenu("color",X.lineatt.color,O=>{X.lineatt.change(O),X.interactiveRedraw(!0,(0,ye.Aq)(O,"SetLineColor"))}),this.addLineStyleMenu("style",X.lineatt.style,O=>{X.lineatt.change(void 0,void 0,O),X.interactiveRedraw(!0,`exec:SetLineStyle(${O})`)}),this.add("endsub:"),X.lineatt?.excl_side)){this.add("sub:Exclusion"),this.add("sub:side");for(let O=-1;O<=1;++O)this.addchk(X.lineatt.excl_side==O,O,O,function(P){this.lineatt.changeExcl(parseInt(P)),this.interactiveRedraw()}.bind(X));this.add("endsub:"),this.addSizeMenu("width",10,100,10,X.lineatt.excl_width,O=>{X.lineatt.changeExcl(void 0,O),X.interactiveRedraw()}),this.add("endsub:")}if(X.fillatt?.used&&(this.add("sub:"+Z+"Fill att"),this.addColorMenu("color",X.fillatt.colorindx,O=>{X.fillatt.change(O,void 0,X.getCanvSvg()),X.interactiveRedraw(!0,(0,ye.Aq)(O,"SetFillColor"))},X.fillatt.kind),this.addFillStyleMenu("style",X.fillatt.pattern,X.fillatt.colorindx,X,O=>{X.fillatt.change(void 0,O,X.getCanvSvg()),X.interactiveRedraw(!0,`exec:SetFillStyle(${O})`)}),this.add("endsub:")),X.markeratt?.used){this.add("sub:"+Z+"Marker att"),this.addColorMenu("color",X.markeratt.color,P=>{X.markeratt.change(P),X.interactiveRedraw(!0,(0,ye.Aq)(P,"SetMarkerColor"))}),this.addSizeMenu("size",.5,6,.5,X.markeratt.size,P=>{X.markeratt.change(void 0,void 0,P),X.interactiveRedraw(!0,`exec:SetMarkerSize(${P})`)}),this.add("sub:style");let O=[1,2,3,4,5,6,7,8,21,22,23,24,25,26,27,28,29,30,31,32,33,34];for(let P=0;P<O.length;++P){let x=new je.M({style:O[P],color:X.markeratt.color,size:1.7}),p=`<svg width='60' height='18'><text x='1' y='12' style='font-size:12px'>${O[P].toString()}</text><path stroke='black' fill='${x.fill?"black":"none"}' d='${x.create(40,8)}'></path></svg>`;this.addchk(X.markeratt.style==O[P],p,O[P],function(w){this.markeratt.change(void 0,parseInt(w)),this.interactiveRedraw(!0,`exec:SetMarkerStyle(${w})`)}.bind(X))}this.add("endsub:"),this.add("endsub:")}}addTAxisMenu(X,Z,O,P){this.add("Divisions",()=>this.input("Set Ndivisions",O.fNdivisions,"int",0).then(p=>{O.fNdivisions=p,Z.interactiveRedraw("pad",`exec:SetNdivisions(${p})`,P)})),this.add("sub:Labels"),this.addchk(O.TestBit(X.kCenterLabels),"Center",p=>{O.InvertBit(X.kCenterLabels),Z.interactiveRedraw("pad",`exec:CenterLabels(${p})`,P)}),this.addchk(O.TestBit(X.kLabelsVert),"Rotate",p=>{O.InvertBit(X.kLabelsVert),Z.interactiveRedraw("pad",`exec:SetBit(TAxis::kLabelsVert,${p})`,P)}),this.addColorMenu("Color",O.fLabelColor,p=>{O.fLabelColor=p,Z.interactiveRedraw("pad",(0,ye.Aq)(p,"SetLabelColor"),P)}),this.addSizeMenu("Offset",0,.1,.01,O.fLabelOffset,p=>{O.fLabelOffset=p,Z.interactiveRedraw("pad",`exec:SetLabelOffset(${p})`,P)});let x=O.fLabelSize>=1;this.addSizeMenu("Size",x?2:.02,x?30:.11,x?2:.01,O.fLabelSize,p=>{O.fLabelSize=p,Z.interactiveRedraw("pad",`exec:SetLabelSize(${p})`,P)}),this.add("endsub:"),this.add("sub:Title"),this.add("SetTitle",()=>{this.input("Enter axis title",O.fTitle).then(p=>{O.fTitle=p,Z.interactiveRedraw("pad",`exec:SetTitle("${p}")`,P)})}),this.addchk(O.TestBit(X.kCenterTitle),"Center",p=>{O.InvertBit(X.kCenterTitle),Z.interactiveRedraw("pad",`exec:CenterTitle(${p})`,P)}),this.addchk(O.TestBit(X.kOppositeTitle),"Opposite",()=>{O.InvertBit(X.kOppositeTitle),Z.redrawPad()}),this.addchk(O.TestBit(X.kRotateTitle),"Rotate",p=>{O.InvertBit(X.kRotateTitle),Z.interactiveRedraw("pad",`exec:RotateTitle(${p})`,P)}),this.addColorMenu("Color",O.fTitleColor,p=>{O.fTitleColor=p,Z.interactiveRedraw("pad",(0,ye.Aq)(p,"SetTitleColor"),P)}),this.addSizeMenu("Offset",0,3,.2,O.fTitleOffset,p=>{O.fTitleOffset=p,Z.interactiveRedraw("pad",`exec:SetTitleOffset(${p})`,P)}),x=O.fTitleSize>=1,this.addSizeMenu("Size",x?2:.02,x?30:.11,x?2:.01,O.fTitleSize,p=>{O.fTitleSize=p,Z.interactiveRedraw("pad",`exec:SetTitleSize(${p})`,P)}),this.add("endsub:"),this.add("sub:Ticks"),O._typename==M.clTGaxis?(this.addColorMenu("Color",O.fLineColor,p=>{O.fLineColor=p,Z.interactiveRedraw("pad")}),this.addSizeMenu("Size",-.05,.055,.01,O.fTickSize,p=>{O.fTickSize=p,Z.interactiveRedraw("pad")})):(this.addColorMenu("Color",O.fAxisColor,p=>{O.fAxisColor=p,Z.interactiveRedraw("pad",(0,ye.Aq)(p,"SetAxisColor"),P)}),this.addSizeMenu("Size",-.05,.055,.01,O.fTickLength,p=>{O.fTickLength=p,Z.interactiveRedraw("pad",`exec:SetTickLength(${p})`,P)})),this.add("endsub:")}addSettingsMenu(X,Z,O){this.add(Z?"header:Settings":"sub:Settings"),this.add("sub:Files"),X&&(this.addchk(M.settings.OnlyLastCycle,"Last cycle",p=>{M.settings.OnlyLastCycle=p,O&&O("refresh")}),this.addchk(!M.settings.SkipStreamerInfos,"Streamer infos",p=>{M.settings.SkipStreamerInfos=!p,O&&O("refresh")})),this.addchk(M.settings.UseStamp,"Use stamp arg",p=>{M.settings.UseStamp=p}),this.addSizeMenu("Max ranges",1,1e3,[1,10,20,50,200,1e3],M.settings.MaxRanges,p=>{M.settings.MaxRanges=p},"Maximal number of ranges in single http request"),this.addchk(M.settings.HandleWrongHttpResponse,"Handle wrong http response",p=>{M.settings.HandleWrongHttpResponse=p}),this.add("endsub:"),this.add("sub:Toolbar"),this.addchk(!1===M.settings.ToolBar,"Off",p=>{M.settings.ToolBar=!p}),this.addchk(!0===M.settings.ToolBar,"On",p=>{M.settings.ToolBar=p}),this.addchk("popup"===M.settings.ToolBar,"Popup",p=>{M.settings.ToolBar=!!p&&"popup"}),this.add("separator"),this.addchk("left"==M.settings.ToolBarSide,"Left side",p=>{M.settings.ToolBarSide=p?"left":"right"}),this.addchk(M.settings.ToolBarVert,"Vertical",p=>{M.settings.ToolBarVert=p}),this.add("endsub:"),this.add("sub:Interactive"),this.addchk(M.settings.Tooltip,"Tooltip",p=>{M.settings.Tooltip=p}),this.addchk(M.settings.ContextMenu,"Context menus",p=>{M.settings.ContextMenu=p}),this.add("sub:Zooming"),this.addchk(M.settings.Zooming,"Global",p=>{M.settings.Zooming=p}),this.addchk(M.settings.ZoomMouse,"Mouse",p=>{M.settings.ZoomMouse=p}),this.addchk(M.settings.ZoomWheel,"Wheel",p=>{M.settings.ZoomWheel=p}),this.addchk(M.settings.ZoomTouch,"Touch",p=>{M.settings.ZoomTouch=p}),this.add("endsub:"),this.addchk(M.settings.HandleKeys,"Keypress handling",p=>{M.settings.HandleKeys=p}),this.addchk(M.settings.MoveResize,"Move and resize",p=>{M.settings.MoveResize=p}),this.addchk(M.settings.DragAndDrop,"Drag and drop",p=>{M.settings.DragAndDrop=p}),this.addchk(M.settings.DragGraphs,"Drag graph points",p=>{M.settings.DragGraphs=p}),this.addchk(M.settings.ProgressBox,"Progress box",p=>{M.settings.ProgressBox=p}),this.add("endsub:"),this.add("sub:Drawing"),this.addSelectMenu("Optimize",["None","Smart","Always"],M.settings.OptimizeDraw,p=>{M.settings.OptimizeDraw=p}),this.addPaletteMenu(M.settings.Palette,p=>{M.settings.Palette=p}),this.addchk(M.settings.AutoStat,"Auto stat box",p=>{M.settings.AutoStat=p}),this.addSelectMenu("Latex",["Off","Symbols","Normal","MathJax","Force MathJax"],M.settings.Latex,p=>{M.settings.Latex=p}),this.addSelectMenu("3D rendering",["Default","WebGL","Image"],M.settings.Render3D,p=>{M.settings.Render3D=p}),this.addSelectMenu("WebGL embeding",["Default","Overlay","Embed"],M.settings.Embed3D,p=>{M.settings.Embed3D=p}),this.add("endsub:"),this.add("sub:Geometry"),this.add("Grad per segment:  "+M.settings.GeoGradPerSegm,()=>this.input("Grad per segment in geometry",M.settings.GeoGradPerSegm,"int",1,60).then(p=>{M.settings.GeoGradPerSegm=p})),this.addchk(M.settings.GeoCompressComp,"Compress composites",p=>{M.settings.GeoCompressComp=p}),this.add("endsub:"),X&&this.add("Hierarchy limit:  "+M.settings.HierarchyLimit,()=>this.input("Max number of items in hierarchy",M.settings.HierarchyLimit,"int",10,1e5).then(p=>{M.settings.HierarchyLimit=p,O&&O("refresh")})),this.add("Dark mode: "+(M.settings.DarkMode?"On":"Off"),()=>{M.settings.DarkMode=!M.settings.DarkMode,O&&O("dark")});const P=p=>{M.gStyle[p.slice(1)]=parseInt(p[0])},x=(p,w,m)=>{this.add("sub:"+p);for(let _=0;_<m.length;++_)this.addchk(M.gStyle[w]==_,m[_],`${_}${w}`,P);this.add("endsub:")};this.add("sub:gStyle"),this.add("sub:Canvas"),this.addColorMenu("Color",M.gStyle.fCanvasColor,p=>{M.gStyle.fCanvasColor=p}),this.addchk(M.gStyle.fOptDate,"Draw date",p=>{M.gStyle.fOptDate=p?1:0}),this.addchk(M.gStyle.fOptFile,"Draw item",p=>{M.gStyle.fOptFile=p?1:0}),this.addSizeMenu("Date X",.01,.1,.01,M.gStyle.fDateX,p=>{M.gStyle.fDateX=p},"configure gStyle.fDateX for date/item name drawings"),this.addSizeMenu("Date Y",.01,.1,.01,M.gStyle.fDateY,p=>{M.gStyle.fDateY=p},"configure gStyle.fDateY for date/item name drawings"),this.add("endsub:"),this.add("sub:Pad"),this.addColorMenu("Color",M.gStyle.fPadColor,p=>{M.gStyle.fPadColor=p}),this.add("sub:Grid"),this.addchk(M.gStyle.fPadGridX,"X",p=>{M.gStyle.fPadGridX=p}),this.addchk(M.gStyle.fPadGridY,"Y",p=>{M.gStyle.fPadGridY=p}),this.addColorMenu("Color",M.gStyle.fGridColor,p=>{M.gStyle.fGridColor=p}),this.addSizeMenu("Width",1,10,1,M.gStyle.fGridWidth,p=>{M.gStyle.fGridWidth=p}),this.addLineStyleMenu("Style",M.gStyle.fGridStyle,p=>{M.gStyle.fGridStyle=p}),this.add("endsub:"),x("Ticks X","fPadTickX",["normal","ticks on both sides","labels on both sides"]),x("Ticks Y","fPadTickY",["normal","ticks on both sides","labels on both sides"]),x("Log X","fOptLogx",["off","on","log 2"]),x("Log Y","fOptLogy",["off","on","log 2"]),x("Log Z","fOptLogz",["off","on","log 2"]),this.addchk(1==M.gStyle.fOptTitle,"Hist title",p=>{M.gStyle.fOptTitle=p?1:0}),this.add("endsub:"),this.add("sub:Frame"),this.addColorMenu("Fill color",M.gStyle.fFrameFillColor,p=>{M.gStyle.fFrameFillColor=p}),this.addFillStyleMenu("Fill style",M.gStyle.fFrameFillStyle,M.gStyle.fFrameFillColor,null,p=>{M.gStyle.fFrameFillStyle=p}),this.addColorMenu("Line color",M.gStyle.fFrameLineColor,p=>{M.gStyle.fFrameLineColor=p}),this.addSizeMenu("Line width",1,10,1,M.gStyle.fFrameLineWidth,p=>{M.gStyle.fFrameLineWidth=p}),this.addLineStyleMenu("Line style",M.gStyle.fFrameLineStyle,p=>{M.gStyle.fFrameLineStyle=p}),this.addSizeMenu("Border size",0,10,1,M.gStyle.fFrameBorderSize,p=>{M.gStyle.fFrameBorderSize=p}),this.add("sub:Margins"),this.addSizeMenu("Bottom",0,.5,.05,M.gStyle.fPadBottomMargin,p=>{M.gStyle.fPadBottomMargin=p}),this.addSizeMenu("Top",0,.5,.05,M.gStyle.fPadTopMargin,p=>{M.gStyle.fPadTopMargin=p}),this.addSizeMenu("Left",0,.5,.05,M.gStyle.fPadLeftMargin,p=>{M.gStyle.fPadLeftMargin=p}),this.addSizeMenu("Right",0,.5,.05,M.gStyle.fPadRightMargin,p=>{M.gStyle.fPadRightMargin=p}),this.add("endsub:"),this.add("endsub:"),this.add("sub:Title"),this.addColorMenu("Fill color",M.gStyle.fTitleColor,p=>{M.gStyle.fTitleColor=p}),this.addFillStyleMenu("Fill style",M.gStyle.fTitleStyle,M.gStyle.fTitleColor,null,p=>{M.gStyle.fTitleStyle=p}),this.addColorMenu("Text color",M.gStyle.fTitleTextColor,p=>{M.gStyle.fTitleTextColor=p}),this.addSizeMenu("Border size",0,10,1,M.gStyle.fTitleBorderSize,p=>{M.gStyle.fTitleBorderSize=p}),this.addSizeMenu("Font size",.01,.1,.01,M.gStyle.fTitleFontSize,p=>{M.gStyle.fTitleFontSize=p}),this.addFontMenu("Font",M.gStyle.fTitleFont,p=>{M.gStyle.fTitleFont=p}),this.addSizeMenu("X: "+M.gStyle.fTitleX.toFixed(2),0,1,.1,M.gStyle.fTitleX,p=>{M.gStyle.fTitleX=p}),this.addSizeMenu("Y: "+M.gStyle.fTitleY.toFixed(2),0,1,.1,M.gStyle.fTitleY,p=>{M.gStyle.fTitleY=p}),this.addSizeMenu("W: "+M.gStyle.fTitleW.toFixed(2),0,1,.1,M.gStyle.fTitleW,p=>{M.gStyle.fTitleW=p}),this.addSizeMenu("H: "+M.gStyle.fTitleH.toFixed(2),0,1,.1,M.gStyle.fTitleH,p=>{M.gStyle.fTitleH=p}),this.add("endsub:"),this.add("sub:Stat box"),this.addColorMenu("Fill color",M.gStyle.fStatColor,p=>{M.gStyle.fStatColor=p}),this.addFillStyleMenu("Fill style",M.gStyle.fStatStyle,M.gStyle.fStatColor,null,p=>{M.gStyle.fStatStyle=p}),this.addColorMenu("Text color",M.gStyle.fStatTextColor,p=>{M.gStyle.fStatTextColor=p}),this.addSizeMenu("Border size",0,10,1,M.gStyle.fStatBorderSize,p=>{M.gStyle.fStatBorderSize=p}),this.addSizeMenu("Font size",0,30,5,M.gStyle.fStatFontSize,p=>{M.gStyle.fStatFontSize=p}),this.addFontMenu("Font",M.gStyle.fStatFont,p=>{M.gStyle.fStatFont=p}),this.add("Stat format",()=>this.input("Stat format",M.gStyle.fStatFormat).then(p=>{M.gStyle.fStatFormat=p})),this.addSizeMenu("X: "+M.gStyle.fStatX.toFixed(2),.2,1,.1,M.gStyle.fStatX,p=>{M.gStyle.fStatX=p}),this.addSizeMenu("Y: "+M.gStyle.fStatY.toFixed(2),.2,1,.1,M.gStyle.fStatY,p=>{M.gStyle.fStatY=p}),this.addSizeMenu("Width: "+M.gStyle.fStatW.toFixed(2),.1,1,.1,M.gStyle.fStatW,p=>{M.gStyle.fStatW=p}),this.addSizeMenu("Height: "+M.gStyle.fStatH.toFixed(2),.1,1,.1,M.gStyle.fStatH,p=>{M.gStyle.fStatH=p}),this.add("endsub:"),this.add("sub:Legend"),this.addColorMenu("Fill color",M.gStyle.fLegendFillColor,p=>{M.gStyle.fLegendFillColor=p}),this.addSizeMenu("Border size",0,10,1,M.gStyle.fLegendBorderSize,p=>{M.gStyle.fLegendBorderSize=p}),this.addFontMenu("Font",M.gStyle.fLegendFont,p=>{M.gStyle.fLegendFont=p}),this.addSizeMenu("Text size",0,.1,.01,M.gStyle.fLegendTextSize,p=>{M.gStyle.fLegendTextSize=p},"legend text size, when 0 - auto adjustment is used"),this.add("endsub:"),this.add("sub:Histogram"),this.addchk(M.gStyle.fHistMinimumZero,"Base0",p=>{M.gStyle.fHistMinimumZero=p},"when true, BAR and LEGO drawing using base = 0"),this.add("Text format",()=>this.input("Paint text format",M.gStyle.fPaintTextFormat).then(p=>{M.gStyle.fPaintTextFormat=p})),this.add("Time offset",()=>this.input("Time offset in seconds, default is 788918400 for 1/1/1995",M.gStyle.fTimeOffset,"int").then(p=>{M.gStyle.fTimeOffset=p})),this.addSizeMenu("ErrorX: "+M.gStyle.fErrorX.toFixed(2),0,1,.1,M.gStyle.fErrorX,p=>{M.gStyle.fErrorX=p}),this.addSizeMenu("End error",0,12,1,M.gStyle.fEndErrorSize,p=>{M.gStyle.fEndErrorSize=p},"size in pixels of end error for E1 draw options, gStyle.fEndErrorSize"),this.addSizeMenu("Top margin",0,.5,.05,M.gStyle.fHistTopMargin,p=>{M.gStyle.fHistTopMargin=p},"Margin between histogram top and frame top"),this.addColorMenu("Fill color",M.gStyle.fHistFillColor,p=>{M.gStyle.fHistFillColor=p}),this.addFillStyleMenu("Fill style",M.gStyle.fHistFillStyle,M.gStyle.fHistFillColor,null,p=>{M.gStyle.fHistFillStyle=p}),this.addColorMenu("Line color",M.gStyle.fHistLineColor,p=>{M.gStyle.fHistLineColor=p}),this.addSizeMenu("Line width",1,10,1,M.gStyle.fHistLineWidth,p=>{M.gStyle.fHistLineWidth=p}),this.addLineStyleMenu("Line style",M.gStyle.fHistLineStyle,p=>{M.gStyle.fHistLineStyle=p}),this.add("endsub:"),this.add("separator"),this.add("sub:Predefined"),["Modern","Plain","Bold"].forEach(p=>this.addchk(M.gStyle.fName==p,p,p,ye.Lf)),this.add("endsub:"),this.add("endsub:"),this.add("separator"),this.add("Save settings",()=>{((0,ye.JH)(!0)?Promise.resolve(!0):this.confirm("Save settings","Pressing OK one agreess that JSROOT will store settings as browser cookies")).then(w=>{w&&((0,ye.zQ)(),(0,ye.Bm)())})},"Store settings and gStyle as cookies"),this.add("Delete settings",()=>{(0,ye.zQ)(-1),(0,ye.Bm)(-1)},"Delete settings and gStyle from cookies"),Z||this.add("endsub:")}runModal(){return(0,ze.Z)(function*(){throw Error("runModal() must be reimplemented")})()}info(X,Z){return this.runModal(X,`<p>${Z}</p>`,{height:120,width:400,resizable:!0})}confirm(X,Z){var O=this;return(0,ze.Z)(function*(){return O.runModal(X,Z,{btns:!0,height:120,width:400}).then(P=>!!P)})()}input(X,Z,O,P,x){var p=this;return(0,ze.Z)(function*(){O||(O="text");let m="";null==Z&&(Z=""),"int"==O&&(void 0!==P&&(m+=` min="${P}"`),void 0!==x&&(m+=` max="${x}"`));let _=`<form><fieldset style="padding:0; border:0"><input type="${"int"==O?"number":"text"}" value="${Z}" ${m} style="width:98%;display:block" class="jsroot_dlginp"/></fieldset></form>`;return new Promise(F=>{p.runModal(X,_,{btns:!0,height:150,width:400}).then(R=>{if(!R)return;let q=R.querySelector(".jsroot_dlginp").value;"float"==O?(q=parseFloat(q),Number.isFinite(q)&&F(q)):"int"==O?(q=parseInt(q),Number.isInteger(q)&&F(q)):F(q)})})})()}showMethodArgsDialog(X){var Z=this;return(0,ze.Z)(function*(){let O=Z.menuname+"_dialog",P='<form> <fieldset style="padding:0; border:0">';for(let x=0;x<X.fArgs.length;++x){let p=X.fArgs[x];p.fValue=p.fDefault,'""'==p.fValue&&(p.fValue=""),P+=`<label for="${O}_inp${x}">${p.fName}</label>\n                          <input type='text' tabindex="${x+1}" id="${O}_inp${x}" value="${p.fValue}" style="width:100%;display:block"/>`}return P+="</fieldset></form>",new Promise(x=>{Z.runModal(X.fClassName+"::"+X.fName,P,{btns:!0,height:100+60*X.fArgs.length,width:400,resizable:!0}).then(p=>{if(!p)return;let w="";for(let m=0;m<X.fArgs.length;++m){let _=X.fArgs[m],F=p.querySelector(`#${O}_inp${m}`).value;""===F&&(F=_.fDefault),("Option_t*"==_.fTitle||"const char*"==_.fTitle)&&(F||(F='""'),'"'!=F[0]&&(F='"'+F),'"'!=F[F.length-1]&&(F+='"')),w+=(m>0?",":"")+F}x(w)})})})()}showCommandArgsDialog(X,Z){var O=this;return(0,ze.Z)(function*(){let P=O.menuname+"_dialog",x='<form> <fieldset style="padding:0; border:0">';for(let p=0;p<Z.length;++p)x+=`<label for="${P}_inp${p}">arg${p+1}</label><input type='text' id="${P}_inp${p}" value="${Z[p]}" style="width:100%;display:block"/>`;return x+="</fieldset></form>",new Promise(p=>{O.runModal("Arguments for command "+X,x,{btns:!0,height:110+60*Z.length,width:400,resizable:!0}).then(w=>{if(!w)return p(null);let m=[];for(let _=0;_<Z.length;++_)m.push(w.querySelector(`#${P}_inp${_}`).value);p(m)})})})()}}class Oe extends He{constructor(X,Z,O){super(X,Z,O),this.code=[],this._use_plain_text=!0,this.stack=[this.code]}native(){return!0}load(){var X=this;return(0,ze.Z)(function*(){return X})()}add(X,Z,O,P){let x=this.stack[this.stack.length-1];if("separator"==X)return x.push({divider:!0});if(0==X.indexOf("header:"))return x.push({text:X.slice(7),header:!0});if("endsub:"==X||"endcolumn:"==X)return this.stack.pop();(0,M.isFunc)(Z)&&(P=O,O=Z,Z=X);let p={};if(x.push(p),"column:"==X)return p.column=!0,p.sub=[],void this.stack.push(p.sub);0==X.indexOf("sub:")&&(X=X.slice(4),p.sub=[],this.stack.push(p.sub)),0==X.indexOf("chk:")?(p.checked=!0,X=X.slice(4)):0==X.indexOf("unk:")&&(p.checked=!1,X=X.slice(4)),p.text=X,p.title=P,p.arg=Z,p.func=O}size(){return this.code.length}_buildContextmenu(X,Z,O,P){let x=document.createElement("div");if(x.className="jsroot_ctxt_container",P===document.body){let F=document.getElementsByClassName("jsroot_ctxt_container");for(;F.length>0;)F[0].parentNode.removeChild(F[0]);x.style.position="fixed",x.style.left=Z+"px",x.style.top=O+"px",(0,ye.DW)(".jsroot_ctxt_container {\n                position: absolute; top: 0; user-select: none; z-index: 100000; background-color: rgb(250, 250, 250); margin: 0; padding: 0px; width: auto;\n                min-width: 100px; box-shadow: 0px 0px 10px rgb(0, 0, 0, 0.2); border: 3px solid rgb(215, 215, 215); font-family: Arial, helvetica, sans-serif, serif;\n                font-size: 13px; color: rgb(0, 0, 0, 0.8);\n             }\n             .jsroot_ctxt_column { float: left; }\n             .jsroot_ctxt_divider { width: 85%; margin: 3px auto; border: 1px solid rgb(0, 0, 0, 0.15); }\n             .jsroot_ctxt_header { background-color: lightblue; padding: 3px 7px; font-weight: bold; border-bottom: 1px; }\n             .jsroot_ctxt_text { margin: 0; padding: 3px 7px; pointer-events: none; white-space: nowrap; }\n             .jsroot_ctxt_extraText { margin: 0; padding: 3px 7px; color: rgb(0, 0, 0, 0.6); }\n             .jsroot_ctxt_focus { background-color: rgb(220, 220, 220); }\n             .jsroot_ctxt_item:hover { background-color: rgb(235, 235, 235); }",this.element)}else Z<0&&O==Z?(x.className="jsroot_ctxt_column",x.style.width=(100/-Z).toFixed(1)+"%"):x.style.left=-P.offsetLeft+P.offsetWidth+"px";let p=!1,w=0;X.forEach(F=>{F.checked&&(p=!0),F.column&&w++}),X.forEach(F=>{if(w>0)return x.style.display="flex",void(F.column&&this._buildContextmenu(F.sub,-w,-w,x));if(F.divider){let $=document.createElement("hr");return $.className="jsroot_ctxt_divider",void x.appendChild($)}let R=document.createElement("div");if(R.style.position="relative",x.appendChild(R),F.header)return R.className="jsroot_ctxt_header",void(R.innerHTML=F.text);let q=document.createElement("div");q.style.width="100%",q.style.height="100%",q.className="jsroot_ctxt_item",q.style.display="flex",q.style.justifyContent="space-between",q.style.cursor="pointer",F.title&&q.setAttribute("title",F.title),R.appendChild(q),F.text||(F.text="item");let T=document.createElement("div");if(T.className="jsroot_ctxt_text",F.text.indexOf("<svg")>=0)if(p){T.style.display="flex";let $=document.createElement("span");$.innerHTML=F.checked?"\u2713":"",$.style.display="inline-block",$.style.width="1em",T.appendChild($);let J=document.createElement("div");J.innerHTML=F.text,T.appendChild(J)}else T.innerHTML=F.text;else{if(p){let J=document.createElement("span");J.innerHTML=F.checked?"\u2713":"",J.style.display="inline-block",J.style.width="1em",T.appendChild(J)}let $=document.createElement("span");$.textContent=0==F.text.indexOf("<nobr>")?F.text.slice(6,F.text.length-7):F.text,T.appendChild($)}if(q.appendChild(T),F.hasOwnProperty("extraText")||F.sub){let $=document.createElement("span");$.className="jsroot_ctxt_extraText jsroot_ctxt_text",$.textContent=F.sub?"\u25b6":F.extraText,q.appendChild($)}q.addEventListener("mouseenter",()=>{x.childNodes.forEach(J=>{J.classList.contains("jsroot_ctxt_focus")&&(J.removeChild(J.getElementsByClassName("jsroot_ctxt_container")[0]),J.classList.remove("jsroot_ctxt_focus"))})}),F.sub&&q.addEventListener("mouseenter",()=>{R.classList.add("jsroot_ctxt_focus"),this._buildContextmenu(F.sub,0,0,R)}),F.func&&R.addEventListener("click",$=>{(this.painter?F.func.bind(this.painter):F.func)(F.arg),$.stopPropagation(),this.remove()})}),P.appendChild(x);let m=document.documentElement.clientWidth,_=document.documentElement.clientHeight;if(P===document.body)Z+x.offsetWidth>m&&(x.style.left=m-x.offsetWidth+"px"),x.offsetHeight>_?(x.style.top=0,x.style.overflowY="scroll",x.style.overflowX="hidden",x.style.height=_+"px"):O+x.offsetHeight>_&&(x.style.top=_-x.offsetHeight+"px");else if("jsroot_ctxt_column"!=x.className){let F=P.getBoundingClientRect(),R=x.getBoundingClientRect();R.left+R.width>m&&(x.style.left=-P.offsetLeft-R.width+"px"),R.height>_?(x.style.top=-R.top+"px",x.style.overflowY="scroll",x.style.overflowX="hidden",x.style.height=_+"px"):R.height<_&&R.height>_/2?x.style.top=R.top-_/2>=0?-R.top-R.height+_+"px":-R.top+"px":R.top+R.height>_&&(x.style.top=-R.height+F.height+"px")}return x}show(X){var Z=this;return(0,ze.Z)(function*(){Z.remove(),!X&&Z.show_evnt&&(X=Z.show_evnt),document.body.addEventListener("click",Z.remove_handler);let O=document.getElementById(Z.menuname);return O&&O.remove(),Z.element=Z._buildContextmenu(Z.code,(X?.clientX||0)+window.pageXOffset,(X?.clientY||0)+window.pageYOffset,document.body),Z.element.setAttribute("id",Z.menuname),Z})()}runModal(X,Z,O){var P=this;return(0,ze.Z)(function*(){O||(O={});let x=P.menuname+"_dialog";(0,L.Ys)(`#${x}`).remove(),(0,L.Ys)(`#${x}_block`).remove();let p=(0,L.Ys)("body").append("div").attr("id",x+"_block").attr("class","jsroot_dialog_block"),w=(0,L.Ys)("body").append("div").attr("id",x).attr("class","jsroot_dialog").style("width",(O.width||450)+"px").attr("tabindex","0").html(`<div class="jsroot_dialog_body">\n            <div class="jsroot_dialog_header">${X}</div>\n            <div class="jsroot_dialog_content">${Z}</div>\n            <div class="jsroot_dialog_footer">\n               <button class="jsroot_dialog_button">Ok</button>\n               ${O.btns?'<button class="jsroot_dialog_button">Cancel</button>':""}\n           </div>\n          </div>`);return(0,ye.DW)(".jsroot_dialog_block { z-index: 100000; position: absolute; top: 0; left: 0; right: 0; bottom: 0; opacity: 0.2; background-color: white; }\n          .jsroot_dialog { z-index: 100001; position: absolute; left: 50%; top: 50%; }\n          .jsroot_dialog_body { position: relative; left: -50%; top: -50%; border: solid green 3px; padding: 5px; display: flex; flex-flow: column; background-color: white; }\n          .jsroot_dialog_header { flex: 0 1 auto; padding: 5px; }\n          .jsroot_dialog_content { flex: 1 1 auto; padding: 5px; }\n          .jsroot_dialog_footer { flex: 0 1 auto; padding: 5px; }\n          .jsroot_dialog_button { float: right; margin-right: 1em; }",w.node()),new Promise(m=>{w.on("keyup",F=>{("Enter"==F.code||"Escape"==F.code)&&(F.preventDefault(),F.stopPropagation(),m("Enter"==F.code?w.node():null),w.remove(),p.remove())}),w.on("keydown",F=>{("Enter"==F.code||"Escape"==F.code)&&(F.preventDefault(),F.stopPropagation())}),w.selectAll(".jsroot_dialog_button").on("click",F=>{m(O.btns&&"Ok"==(0,L.Ys)(F.target).text()?w.node():null),w.remove(),p.remove()});let _=w.select(".jsroot_dialog_content").select("input");_.empty()&&(_=w.select(".jsroot_dialog_footer").select("button")),_.empty()||_.node().focus()})})()}}class ce extends He{constructor(X,Z,O){super(X,Z,O),this.code="",this.funcs={},this.lvl=0}loadBS(X){let Z="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.0.2/";return(M.internals.bs_path?Promise.resolve(!0):(0,M.loadScript)(M.source_dir+"style/bootstrap.min.css").then(()=>{M.internals.bs_path=M.source_dir+"scripts/"}).catch(()=>(M.internals.bs_path=Z+"js/",(0,M.loadScript)(Z+"css/bootstrap.min.css")))).then(()=>!X||typeof bootstrap<"u"||(0,M.loadScript)(M.internals.bs_path+"bootstrap.bundle.min.js"))}load(){return this.loadBS().then(()=>this)}add(X,Z,O,P){if("separator"==X)return void(this.code+='<hr class="dropdown-divider">');if("column:"==X||"endcolumn:"==X)return;if(0==X.indexOf("header:"))return void(this.code+=`<h6 class="dropdown-header">${X.slice(7)}</h6>`);let x=!1,p="",w="dropdown-item btn-sm",m="";if("endsub:"==X)return this.lvl--,this.code+="</li>",void(this.code+="</ul>");0==X.indexOf("sub:")&&(X=X.slice(4),x=!0),(0,M.isFunc)(Z)&&(O=Z,Z=X),0==X.indexOf("chk:")?(m="\u2713",X=X.slice(4)):0==X.indexOf("unk:")&&(X=X.slice(4)),P&&(p+=` title="${P}"`),void 0!==Z&&(p+=` arg="${Z}"`),x&&(p+=' data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded=\'false\'',w+=" dropdown-toggle");let _=`<button id="${this.menuname}${this.cnt}" ${p} class="${w}" type="button"><span style="width:1em;display:inline-block">${m}</span>${X}</button>`;_=x?`<li class="dropend">${_}`:`<li>${_}</li>`,this.code+=_,x&&(this.code+=`<ul class="dropdown-menu" aria-labelledby="${this.menuname}${this.cnt}">`,this.lvl++),(0,M.isFunc)(O)&&(this.funcs[this.cnt]=O),this.cnt++}show(X){var Z=this;return(0,ze.Z)(function*(){Z.remove(),!X&&Z.show_evnt&&(X=Z.show_evnt),document.body.addEventListener("click",Z.remove_handler);let O=document.getElementById(Z.menuname);return O&&O.parentNode.removeChild(O),Z.loadBS().then(()=>{let P=window.innerWidth,x=window.innerHeight;Z.element=document.createElement("div"),Z.element.id=Z.menuname,Z.element.setAttribute("class","dropdown"),Z.element.innerHTML=`<ul class="dropdown-menu dropend" style="display:block">${Z.code}</ul>`,document.body.appendChild(Z.element),Z.element.style.position="absolute",Z.element.style.background="white",Z.element.style.display="block",Z.element.style.left=X.clientX+window.pageXOffset+"px",Z.element.style.top=X.clientY+window.pageYOffset+"px";let p=Z,w=Z.element.getElementsByClassName("dropdown-item");for(let T=0;T<w.length;T++)w[T].addEventListener("click",function(){let $=this.getAttribute("arg"),J=this.getAttribute("id").slice(p.menuname.length),ie=J?p.funcs[J]:null;p.remove(),(0,M.isFunc)(ie)&&(p.painter?ie.bind(p.painter)($):ie($))});let m=Z.element.getElementsByClassName("dropdown-toggle");for(let T=0;T<m.length;T++)m[T].addEventListener("mouseenter",function(){let $=this.nextElementSibling;$.style.display="block"==$.style.display?"none":"block",$.style.left=this.scrollWidth+"px";let J=$.getBoundingClientRect();J.bottom>x&&($.style.top=x-J.bottom-5+"px"),J.right>P&&($.style.left=-J.width+"px")}),m[T].addEventListener("mouseleave",function(){let $=this.nextElementSibling;$.was_entered=!1,setTimeout(function(){$.was_entered||($.style.display="none")},200)});let _=Z.element.getElementsByClassName("dropdown-menu");for(let T=0;T<_.length;T++)_[T].addEventListener("mouseenter",function(){this.was_entered=!0});let F=null,R=null,q=Z.element.firstChild.getBoundingClientRect();return X.clientX+q.width>P&&(F=P-q.width-10),X.clientY+q.height>x&&(R=x-q.height-10),null!==F&&(Z.element.style.left=(F>0?F:0)+window.pageXOffset+"px"),null!==R&&(Z.element.style.top=(R>0?R:0)+window.pageYOffset+"px"),new Promise(T=>{Z.resolveFunc=T})})})()}runModal(X,Z,O){var P=this;return(0,ze.Z)(function*(){O||(O={});let x=P.menuname+"_dialog",p=document.getElementById(x);return p&&p.remove(),P.loadBS(!0).then(()=>{let w=document.createElement("div");return w.setAttribute("id",x),w.setAttribute("class","modal fade"),w.setAttribute("role","dialog"),w.setAttribute("tabindex","-1"),w.setAttribute("aria-hidden","true"),w.innerHTML=`<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title">${X}</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body">${Z}</div><div class="modal-footer">${O.btns?'<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>':""}<button type="button" class="btn btn-primary jsroot_okbtn" data-bs-dismiss="modal">Ok</button></div></div></div>`,document.body.appendChild(w),new bootstrap.Modal(w,{keyboard:!0,backdrop:"static"}).show(),new Promise(F=>{let R=!1;w.querySelector(".jsroot_okbtn").addEventListener("click",()=>{R=!0}),w.addEventListener("hidden.bs.modal",()=>{R&&F(w),w.remove()})})})})()}}function Y(ue,X,Z){return(M.settings.Bootstrap?new ce(X,Z||"root_ctx_menu",ue):new Oe(X,Z||"root_ctx_menu",ue)).load()}function K(ue){let X=document.getElementById(ue||"root_ctx_menu");return!!X&&(X.parentNode.removeChild(X),!0)}},9622:($r,At,Ce)=>{"use strict";Ce.d(At,{Ae:()=>Ze,Aq:()=>J,Bm:()=>m,DW:()=>Z,Hw:()=>Ie,JH:()=>w,KL:()=>Y,Lf:()=>O,MG:()=>K,OA:()=>Oe,Z:()=>X,hj:()=>ue,yH:()=>q,zQ:()=>p});var ze=Ce(5835),M=Ce(9542),L=Ce(2253),ye=Ce(3675),Be=Ce(6458),je=Ce(3038);function Ze(ie,Me){if((0,M.isBatchMode)()||typeof document>"u")return;let de="jsroot_progressbox",fe=(0,L.Ys)("#"+de);if(!M.settings.ProgressBox)return fe.remove();0!=arguments.length&&ie?(fe.empty()&&(fe=(0,L.Ys)(document.body).append("div").attr("id",de).attr("style","position: fixed; min-width: 100px; height: auto; overflow: visible; z-index: 101; border: 1px solid #999; background: #F8F8F8; left: 10px; bottom: 10px;"),fe.append("p")),fe.property("with_timeout",!1),(0,M.isStr)(ie)?fe.select("p").html(ie):(fe.html(""),fe.node().appendChild(ie)),Z("#jsroot_progressbox p { font-size: 10px; margin-left: 10px; margin-right: 10px; margin-top: 3px; margin-bottom: 3px; }",fe.node()),Number.isFinite(Me)&&Me>0&&(fe.property("with_timeout",!0),setTimeout(()=>Ze("",-1),Me))):(-1!==Me||!fe.empty()&&fe.property("with_timeout"))&&fe.remove()}function Ie(){window&&(window.close(),window.open("","_self").close())}function He(ie,Me){if(!ie||0==ie.length)return void(Me.rejectFunc&&(Me.rejectFunc(Error("openui5 was not possible to load")),Me.rejectFunc=null));let de=ie.shift();0==de.indexOf("roothandler")&&de.indexOf("://")<0&&(de=de.replace(/\:\//g,"://"));let fe=document.createElement("script");fe.setAttribute("type","text/javascript"),fe.setAttribute("id","sap-ui-bootstrap"),fe.setAttribute("src",de+"resources/sap-ui-core.js"),fe.setAttribute("data-sap-ui-libs",Me.openui5libs??"sap.m, sap.ui.layout, sap.ui.unified, sap.ui.commons"),fe.setAttribute("data-sap-ui-theme",Me.openui5theme||"sap_belize"),fe.setAttribute("data-sap-ui-compatVersion","edge"),fe.setAttribute("data-sap-ui-preload","async"),fe.setAttribute("data-sap-ui-evt-oninit","completeUI5Loading()"),fe.onerror=function(){fe.parentNode.removeChild(fe),He(ie,Me)},fe.onload=function(){console.log(`Load openui5 from ${de}`)},document.head.appendChild(fe)}function Oe(ie){return ce.apply(this,arguments)}function ce(){return(ce=(0,ze.Z)(function*(ie){if("object"==typeof sap)return sap;ie||(ie={});let Me=M.source_dir.replace(/jsrootsys/g,"rootui5sys");Me==M.source_dir&&(Me=window.location.port&&window.location.pathname.indexOf("/win")>=0&&(!ie.openui5src||"nojsroot"==ie.openui5src||"jsroot"==ie.openui5src)?window.location.origin+window.location.pathname+"../rootui5sys/":void 0);let de=[],fe="https://openui5.hana.ondemand.com/1.98.0/",I=Me?Me+"distribution/":"";if((0,M.isStr)(ie.openui5src))switch(ie.openui5src){case"nodefault":fe="";break;case"default":de.push(fe),fe="";break;case"nojsroot":break;case"jsroot":de.push(I),I="";break;default:de.push(ie.openui5src)}return I&&de.indexOf(I)<0&&de.push(I),fe&&de.indexOf(fe)<0&&de.push(fe),new Promise((U,z)=>{ie.resolveFunc=U,ie.rejectFunc=z,globalThis.completeUI5Loading=function(){sap.ui.loader.config({paths:{jsroot:M.source_dir,rootui5:Me}}),ie.resolveFunc&&(ie.resolveFunc(sap),ie.resolveFunc=null)},He(de,ie)})})).apply(this,arguments)}const Y={camera:{path:"M 152.00,304.00c0.00,57.438, 46.562,104.00, 104.00,104.00s 104.00-46.562, 104.00-104.00s-46.562-104.00-104.00-104.00S 152.00,246.562, 152.00,304.00z M 480.00,128.00L 368.00,128.00 c-8.00-32.00-16.00-64.00-48.00-64.00L 192.00,64.00 c-32.00,0.00-40.00,32.00-48.00,64.00L 32.00,128.00 c-17.60,0.00-32.00,14.40-32.00,32.00l0.00,288.00 c0.00,17.60, 14.40,32.00, 32.00,32.00l 448.00,0.00 c 17.60,0.00, 32.00-14.40, 32.00-32.00L 512.00,160.00 C 512.00,142.40, 497.60,128.00, 480.00,128.00z M 256.00,446.00c-78.425,0.00-142.00-63.574-142.00-142.00c0.00-78.425, 63.575-142.00, 142.00-142.00c 78.426,0.00, 142.00,63.575, 142.00,142.00 C 398.00,382.426, 334.427,446.00, 256.00,446.00z M 480.00,224.00l-64.00,0.00 l0.00-32.00 l 64.00,0.00 L 480.00,224.00 z"},disk:{path:"M384,0H128H32C14.336,0,0,14.336,0,32v448c0,17.656,14.336,32,32,32h448c17.656,0,32-14.344,32-32V96L416,0H384z M352,160   V32h32v128c0,17.664-14.344,32-32,32H160c-17.664,0-32-14.336-32-32V32h128v128H352z M96,288c0-17.656,14.336-32,32-32h256   c17.656,0,32,14.344,32,32v192H96V288z"},question:{path:"M256,512c141.375,0,256-114.625,256-256S397.375,0,256,0S0,114.625,0,256S114.625,512,256,512z M256,64   c63.719,0,128,36.484,128,118.016c0,47.453-23.531,84.516-69.891,110.016C300.672,299.422,288,314.047,288,320   c0,17.656-14.344,32-32,32c-17.664,0-32-14.344-32-32c0-40.609,37.25-71.938,59.266-84.031   C315.625,218.109,320,198.656,320,182.016C320,135.008,279.906,128,256,128c-30.812,0-64,20.227-64,64.672   c0,17.664-14.336,32-32,32s-32-14.336-32-32C128,109.086,193.953,64,256,64z M256,449.406c-18.211,0-32.961-14.75-32.961-32.969   c0-18.188,14.75-32.953,32.961-32.953c18.219,0,32.969,14.766,32.969,32.953C288.969,434.656,274.219,449.406,256,449.406z"},undo:{path:"M450.159,48.042c8.791,9.032,16.983,18.898,24.59,29.604c7.594,10.706,14.146,22.207,19.668,34.489  c5.509,12.296,9.82,25.269,12.92,38.938c3.113,13.669,4.663,27.834,4.663,42.499c0,14.256-1.511,28.863-4.532,43.822  c-3.009,14.952-7.997,30.217-14.953,45.795c-6.955,15.577-16.202,31.52-27.755,47.826s-25.88,32.9-42.942,49.807  c-5.51,5.444-11.787,11.67-18.834,18.651c-7.033,6.98-14.496,14.366-22.39,22.168c-7.88,7.802-15.955,15.825-24.187,24.069  c-8.258,8.231-16.333,16.203-24.252,23.888c-18.3,18.13-37.354,37.016-57.191,56.65l-56.84-57.445  c19.596-19.472,38.54-38.279,56.84-56.41c7.75-7.685,15.772-15.604,24.108-23.757s16.438-16.163,24.33-24.057  c7.894-7.893,15.356-15.33,22.402-22.312c7.034-6.98,13.312-13.193,18.821-18.651c22.351-22.402,39.165-44.648,50.471-66.738  c11.279-22.09,16.932-43.567,16.932-64.446c0-15.785-3.217-31.005-9.638-45.671c-6.422-14.665-16.229-28.504-29.437-41.529  c-3.282-3.282-7.358-6.395-12.217-9.325c-4.871-2.938-10.381-5.503-16.516-7.697c-6.121-2.201-12.815-3.992-20.058-5.373  c-7.242-1.374-14.9-2.064-23.002-2.064c-8.218,0-16.802,0.834-25.788,2.507c-8.961,1.674-18.053,4.429-27.222,8.271  c-9.189,3.842-18.456,8.869-27.808,15.089c-9.358,6.219-18.521,13.819-27.502,22.793l-59.92,60.271l93.797,94.058H0V40.91  l93.27,91.597l60.181-60.532c13.376-15.018,27.222-27.248,41.536-36.697c14.308-9.443,28.608-16.776,42.89-21.992  c14.288-5.223,28.505-8.74,42.623-10.557C294.645,0.905,308.189,0,321.162,0c13.429,0,26.389,1.185,38.84,3.562  c12.478,2.377,24.2,5.718,35.192,10.029c11.006,4.311,21.126,9.404,30.374,15.265C434.79,34.724,442.995,41.119,450.159,48.042z"},arrow_right:{path:"M30.796,226.318h377.533L294.938,339.682c-11.899,11.906-11.899,31.184,0,43.084c11.887,11.899,31.19,11.893,43.077,0  l165.393-165.386c5.725-5.712,8.924-13.453,8.924-21.539c0-8.092-3.213-15.84-8.924-21.551L338.016,8.925  C332.065,2.975,324.278,0,316.478,0c-7.802,0-15.603,2.968-21.539,8.918c-11.899,11.906-11.899,31.184,0,43.084l113.391,113.384  H30.796c-16.822,0-30.463,13.645-30.463,30.463C0.333,212.674,13.974,226.318,30.796,226.318z"},arrow_up:{path:"M295.505,629.446V135.957l148.193,148.206c15.555,15.559,40.753,15.559,56.308,0c15.555-15.538,15.546-40.767,0-56.304  L283.83,11.662C276.372,4.204,266.236,0,255.68,0c-10.568,0-20.705,4.204-28.172,11.662L11.333,227.859  c-7.777,7.777-11.666,17.965-11.666,28.158c0,10.192,3.88,20.385,11.657,28.158c15.563,15.555,40.762,15.555,56.317,0  l148.201-148.219v493.489c0,21.993,17.837,39.82,39.82,39.82C277.669,669.267,295.505,651.439,295.505,629.446z"},arrow_diag:{path:"M279.875,511.994c-1.292,0-2.607-0.102-3.924-0.312c-10.944-1.771-19.333-10.676-20.457-21.71L233.97,278.348  L22.345,256.823c-11.029-1.119-19.928-9.51-21.698-20.461c-1.776-10.944,4.031-21.716,14.145-26.262L477.792,2.149  c9.282-4.163,20.167-2.165,27.355,5.024c7.201,7.189,9.199,18.086,5.024,27.356L302.22,497.527  C298.224,506.426,289.397,511.994,279.875,511.994z M118.277,217.332l140.534,14.294c11.567,1.178,20.718,10.335,21.878,21.896  l14.294,140.519l144.09-320.792L118.277,217.332z"},auto_zoom:{path:"M505.441,242.47l-78.303-78.291c-9.18-9.177-24.048-9.171-33.216,0c-9.169,9.172-9.169,24.045,0.006,33.217l38.193,38.188  H280.088V80.194l38.188,38.199c4.587,4.584,10.596,6.881,16.605,6.881c6.003,0,12.018-2.297,16.605-6.875  c9.174-9.172,9.174-24.039,0.011-33.217L273.219,6.881C268.803,2.471,262.834,0,256.596,0c-6.229,0-12.202,2.471-16.605,6.881  l-78.296,78.302c-9.178,9.172-9.178,24.045,0,33.217c9.177,9.171,24.051,9.171,33.21,0l38.205-38.205v155.4H80.521l38.2-38.188  c9.177-9.171,9.177-24.039,0.005-33.216c-9.171-9.172-24.039-9.178-33.216,0L7.208,242.464c-4.404,4.403-6.881,10.381-6.881,16.611  c0,6.227,2.477,12.207,6.881,16.61l78.302,78.291c4.587,4.581,10.599,6.875,16.605,6.875c6.006,0,12.023-2.294,16.61-6.881  c9.172-9.174,9.172-24.036-0.005-33.211l-38.205-38.199h152.593v152.063l-38.199-38.211c-9.171-9.18-24.039-9.18-33.216-0.022  c-9.178,9.18-9.178,24.059-0.006,33.222l78.284,78.302c4.41,4.404,10.382,6.881,16.611,6.881c6.233,0,12.208-2.477,16.611-6.881  l78.302-78.296c9.181-9.18,9.181-24.048,0-33.205c-9.174-9.174-24.054-9.174-33.21,0l-38.199,38.188v-152.04h152.051l-38.205,38.199  c-9.18,9.175-9.18,24.037-0.005,33.211c4.587,4.587,10.596,6.881,16.604,6.881c6.01,0,12.024-2.294,16.605-6.875l78.303-78.285  c4.403-4.403,6.887-10.378,6.887-16.611C512.328,252.851,509.845,246.873,505.441,242.47z"},statbox:{path:"M28.782,56.902H483.88c15.707,0,28.451-12.74,28.451-28.451C512.331,12.741,499.599,0,483.885,0H28.782   C13.074,0,0.331,12.741,0.331,28.451C0.331,44.162,13.074,56.902,28.782,56.902zM483.885,136.845H28.782c-15.708,0-28.451,12.741-28.451,28.451c0,15.711,12.744,28.451,28.451,28.451H483.88   c15.707,0,28.451-12.74,28.451-28.451C512.331,149.586,499.599,136.845,483.885,136.845zM483.885,273.275H28.782c-15.708,0-28.451,12.731-28.451,28.452c0,15.707,12.744,28.451,28.451,28.451H483.88   c15.707,0,28.451-12.744,28.451-28.451C512.337,286.007,499.599,273.275,483.885,273.275zM256.065,409.704H30.492c-15.708,0-28.451,12.731-28.451,28.451c0,15.707,12.744,28.451,28.451,28.451h225.585   c15.707,0,28.451-12.744,28.451-28.451C284.516,422.436,271.785,409.704,256.065,409.704z"},circle:{path:"M256,256 m-150,0 a150,150 0 1,0 300,0 a150,150 0 1,0 -300,0"},three_circles:{path:"M256,85 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0  M256,255 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0  M256,425 m-70,0 a70,70 0 1,0 140,0 a70,70 0 1,0 -140,0 "},diamand:{path:"M256,0L384,256L256,511L128,256z"},rect:{path:"M80,80h352v352h-352z"},cross:{path:"M80,40l176,176l176,-176l40,40l-176,176l176,176l-40,40l-176,-176l-176,176l-40,-40l176,-176l-176,-176z"},vrgoggles:{size:"245.82 141.73",path:"M175.56,111.37c-22.52,0-40.77-18.84-40.77-42.07S153,27.24,175.56,27.24s40.77,18.84,40.77,42.07S198.08,111.37,175.56,111.37ZM26.84,69.31c0-23.23,18.25-42.07,40.77-42.07s40.77,18.84,40.77,42.07-18.26,42.07-40.77,42.07S26.84,92.54,26.84,69.31ZM27.27,0C11.54,0,0,12.34,0,28.58V110.9c0,16.24,11.54,30.83,27.27,30.83H99.57c2.17,0,4.19-1.83,5.4-3.7L116.47,118a8,8,0,0,1,12.52-.18l11.51,20.34c1.2,1.86,3.22,3.61,5.39,3.61h72.29c15.74,0,27.63-14.6,27.63-30.83V28.58C245.82,12.34,233.93,0,218.19,0H27.27Z"},th2colorz:{recs:[{x:128,y:486,w:256,h:26,f:"rgb(38,62,168)"},{y:461,f:"rgb(22,82,205)"},{y:435,f:"rgb(16,100,220)"},{y:410,f:"rgb(18,114,217)"},{y:384,f:"rgb(20,129,214)"},{y:358,f:"rgb(14,143,209)"},{y:333,f:"rgb(9,157,204)"},{y:307,f:"rgb(13,167,195)"},{y:282,f:"rgb(30,175,179)"},{y:256,f:"rgb(46,183,164)"},{y:230,f:"rgb(82,186,146)"},{y:205,f:"rgb(116,189,129)"},{y:179,f:"rgb(149,190,113)"},{y:154,f:"rgb(179,189,101)"},{y:128,f:"rgb(209,187,89)"},{y:102,f:"rgb(226,192,75)"},{y:77,f:"rgb(244,198,59)"},{y:51,f:"rgb(253,210,43)"},{y:26,f:"rgb(251,230,29)"},{y:0,f:"rgb(249,249,15)"}]},th2color:{recs:[{x:0,y:256,w:13,h:39,f:"rgb(38,62,168)"},{x:13,y:371,w:39,h:39},{y:294,h:39},{y:256,h:39},{y:218,h:39},{x:51,y:410,w:39,h:39},{y:371,h:39},{y:333,h:39},{y:294},{y:256,h:39},{y:218,h:39},{y:179,h:39},{y:141,h:39},{y:102,h:39},{y:64},{x:90,y:448,w:39,h:39},{y:410},{y:371,h:39},{y:333,h:39,f:"rgb(22,82,205)"},{y:294},{y:256,h:39,f:"rgb(16,100,220)"},{y:218,h:39},{y:179,h:39,f:"rgb(22,82,205)"},{y:141,h:39},{y:102,h:39,f:"rgb(38,62,168)"},{y:64},{y:0,h:27},{x:128,y:448,w:39,h:39},{y:410},{y:371,h:39},{y:333,h:39,f:"rgb(22,82,205)"},{y:294,f:"rgb(20,129,214)"},{y:256,h:39,f:"rgb(9,157,204)"},{y:218,h:39,f:"rgb(14,143,209)"},{y:179,h:39,f:"rgb(20,129,214)"},{y:141,h:39,f:"rgb(16,100,220)"},{y:102,h:39,f:"rgb(22,82,205)"},{y:64,f:"rgb(38,62,168)"},{y:26,h:39},{y:0,h:27},{x:166,y:486,h:14},{y:448,h:39},{y:410},{y:371,h:39,f:"rgb(22,82,205)"},{y:333,h:39,f:"rgb(20,129,214)"},{y:294,f:"rgb(82,186,146)"},{y:256,h:39,f:"rgb(179,189,101)"},{y:218,h:39,f:"rgb(116,189,129)"},{y:179,h:39,f:"rgb(82,186,146)"},{y:141,h:39,f:"rgb(14,143,209)"},{y:102,h:39,f:"rgb(16,100,220)"},{y:64,f:"rgb(38,62,168)"},{y:26,h:39},{x:205,y:486,w:39,h:14},{y:448,h:39},{y:410},{y:371,h:39,f:"rgb(16,100,220)"},{y:333,h:39,f:"rgb(9,157,204)"},{y:294,f:"rgb(149,190,113)"},{y:256,h:39,f:"rgb(244,198,59)"},{y:218,h:39},{y:179,h:39,f:"rgb(226,192,75)"},{y:141,h:39,f:"rgb(13,167,195)"},{y:102,h:39,f:"rgb(18,114,217)"},{y:64,f:"rgb(22,82,205)"},{y:26,h:39,f:"rgb(38,62,168)"},{x:243,y:448,w:39,h:39},{y:410},{y:371,h:39,f:"rgb(18,114,217)"},{y:333,h:39,f:"rgb(30,175,179)"},{y:294,f:"rgb(209,187,89)"},{y:256,h:39,f:"rgb(251,230,29)"},{y:218,h:39,f:"rgb(249,249,15)"},{y:179,h:39,f:"rgb(226,192,75)"},{y:141,h:39,f:"rgb(30,175,179)"},{y:102,h:39,f:"rgb(18,114,217)"},{y:64,f:"rgb(38,62,168)"},{y:26,h:39},{x:282,y:448,h:39},{y:410},{y:371,h:39,f:"rgb(18,114,217)"},{y:333,h:39,f:"rgb(14,143,209)"},{y:294,f:"rgb(149,190,113)"},{y:256,h:39,f:"rgb(226,192,75)"},{y:218,h:39,f:"rgb(244,198,59)"},{y:179,h:39,f:"rgb(149,190,113)"},{y:141,h:39,f:"rgb(9,157,204)"},{y:102,h:39,f:"rgb(18,114,217)"},{y:64,f:"rgb(38,62,168)"},{y:26,h:39},{x:320,y:448,w:39,h:39},{y:410},{y:371,h:39,f:"rgb(22,82,205)"},{y:333,h:39,f:"rgb(20,129,214)"},{y:294,f:"rgb(46,183,164)"},{y:256,h:39},{y:218,h:39,f:"rgb(82,186,146)"},{y:179,h:39,f:"rgb(9,157,204)"},{y:141,h:39,f:"rgb(20,129,214)"},{y:102,h:39,f:"rgb(16,100,220)"},{y:64,f:"rgb(38,62,168)"},{y:26,h:39},{x:358,y:448,h:39},{y:410},{y:371,h:39,f:"rgb(22,82,205)"},{y:333,h:39},{y:294,f:"rgb(16,100,220)"},{y:256,h:39,f:"rgb(20,129,214)"},{y:218,h:39,f:"rgb(14,143,209)"},{y:179,h:39,f:"rgb(18,114,217)"},{y:141,h:39,f:"rgb(22,82,205)"},{y:102,h:39,f:"rgb(38,62,168)"},{y:64},{y:26,h:39},{x:397,y:448,w:39,h:39},{y:371,h:39},{y:333,h:39},{y:294,f:"rgb(22,82,205)"},{y:256,h:39},{y:218,h:39},{y:179,h:39,f:"rgb(38,62,168)"},{y:141,h:39},{y:102,h:39},{y:64},{y:26,h:39},{x:435,y:410,h:39},{y:371,h:39},{y:333,h:39},{y:294},{y:256,h:39},{y:218,h:39},{y:179,h:39},{y:141,h:39},{y:102,h:39},{y:64},{x:474,y:256,h:39},{y:179,h:39}]},th2draw3d:{path:"M172.768,0H51.726C23.202,0,0.002,23.194,0.002,51.712v89.918c0,28.512,23.2,51.718,51.724,51.718h121.042   c28.518,0,51.724-23.2,51.724-51.718V51.712C224.486,23.194,201.286,0,172.768,0z M177.512,141.63c0,2.611-2.124,4.745-4.75,4.745   H51.726c-2.626,0-4.751-2.134-4.751-4.745V51.712c0-2.614,2.125-4.739,4.751-4.739h121.042c2.62,0,4.75,2.125,4.75,4.739 L177.512,141.63L177.512,141.63z M460.293,0H339.237c-28.521,0-51.721,23.194-51.721,51.712v89.918c0,28.512,23.2,51.718,51.721,51.718h121.045   c28.521,0,51.721-23.2,51.721-51.718V51.712C512.002,23.194,488.802,0,460.293,0z M465.03,141.63c0,2.611-2.122,4.745-4.748,4.745   H339.237c-2.614,0-4.747-2.128-4.747-4.745V51.712c0-2.614,2.133-4.739,4.747-4.739h121.045c2.626,0,4.748,2.125,4.748,4.739 V141.63z M172.768,256.149H51.726c-28.524,0-51.724,23.205-51.724,51.726v89.915c0,28.504,23.2,51.715,51.724,51.715h121.042   c28.518,0,51.724-23.199,51.724-51.715v-89.915C224.486,279.354,201.286,256.149,172.768,256.149z M177.512,397.784   c0,2.615-2.124,4.736-4.75,4.736H51.726c-2.626-0.006-4.751-2.121-4.751-4.736v-89.909c0-2.626,2.125-4.753,4.751-4.753h121.042 c2.62,0,4.75,2.116,4.75,4.753L177.512,397.784L177.512,397.784z M460.293,256.149H339.237c-28.521,0-51.721,23.199-51.721,51.726v89.915c0,28.504,23.2,51.715,51.721,51.715h121.045   c28.521,0,51.721-23.199,51.721-51.715v-89.915C512.002,279.354,488.802,256.149,460.293,256.149z M465.03,397.784   c0,2.615-2.122,4.736-4.748,4.736H339.237c-2.614,0-4.747-2.121-4.747-4.736v-89.909c0-2.626,2.121-4.753,4.747-4.753h121.045 c2.615,0,4.748,2.116,4.748,4.753V397.784z"},createSVG(ie,Me,de,fe){Z(".jsroot_svg_toolbar_btn { fill: steelblue; cursor: pointer; opacity: 0.3; } .jsroot_svg_toolbar_btn:hover { opacity: 1.0; }",ie.node());let I=ie.append("svg:svg").attr("class","jsroot_svg_toolbar_btn").attr("width",de+"px").attr("height",de+"px").attr("viewBox","0 0 512 512").style("overflow","hidden");if("recs"in Me){let U={};for(let z=0;z<Me.recs.length;++z)Object.assign(U,Me.recs[z]),I.append("rect").attr("x",U.x).attr("y",U.y).attr("width",U.w).attr("height",U.h).style("fill",U.f)}else I.append("svg:path").attr("d",Me.path);return I.append("svg:rect").attr("x",0).attr("y",0).attr("width",512).attr("height",512).style("opacity",0).style("fill","none").style("pointer-events","visibleFill").append("svg:title").text(fe),I}};function K(ie,Me){if(!ie||(0,M.isBatchMode)()||typeof window>"u")return;let de=null,fe=Me||300;function I(){if(de=null,document.body.style.cursor="wait",(0,M.isFunc)(ie))ie();else if((0,M.isFunc)(ie?.checkResize))ie.checkResize();else{let U=new ye.be(ie).selectDom();if(!U.empty()){let z=U.property("mdi");(0,M.isFunc)(z?.checkMDIResize)?z.checkMDIResize():(0,Be.SI)(U.node())}}document.body.style.cursor="auto"}fe<20&&(fe=20),window.addEventListener("resize",()=>{null!==de&&clearTimeout(de),de=setTimeout(I,fe)})}function ue(ie){return"buttons"in ie?2===ie.buttons:"which"in ie?3===ie.which:"button"in ie&&2===ie.button}function X(ie,Me){if(void 0===Me&&(Me=!0),!M.settings.MoveResize||(0,M.isBatchMode)()||!ie.draw_g)return;if(!Me){if(ie.draw_g.property("assigned_move")){let U=(0,L.oh)().subject(Object);U.on("start",null).on("drag",null).on("end",null),ie.draw_g.style("cursor",null).property("assigned_move",null).call(U)}return}if(ie.draw_g.property("assigned_move"))return;let de=(0,L.oh)().subject(Object),fe=!0,I=!1;de.on("start",function(U){if(I=!!this.moveEnabled&&!this.moveEnabled(),I||ue(U.sourceEvent))return;U.sourceEvent.preventDefault(),U.sourceEvent.stopPropagation();let z=(0,L.cx)(U,this.draw_g.node());fe=!0,this.moveStart&&this.moveStart(z[0],z[1])}.bind(ie)).on("drag",function(U){I||(U.sourceEvent.preventDefault(),U.sourceEvent.stopPropagation(),fe=!1,this.moveDrag&&this.moveDrag(U.dx,U.dy))}.bind(ie)).on("end",function(U){I||(U.sourceEvent.preventDefault(),U.sourceEvent.stopPropagation(),this.moveEnd&&this.moveEnd(fe),this.getPadPainter()?.selectObjectPainter(this))}.bind(ie)),ie.draw_g.style("cursor","move").property("assigned_move",!0).call(de)}function Z(ie,Me,de){if((0,M.isBatchMode)()||!ie||typeof document>"u")return!0;let fe=(Me||document).getElementsByTagName("style");for(let U=0;U<fe.length;++U){if(de&&fe[U].getAttribute("tag")==de)return fe[U].innerHTML=ie,!0;if(fe[U].innerHTML==ie)return!0}let I=document.createElement("style");return de&&I.setAttribute("tag",de),I.innerHTML=ie,(Me||document.head).appendChild(I),!0}function O(ie){switch(M.gStyle.fName=ie,ie){case"Modern":Object.assign(M.gStyle,{fFrameBorderMode:0,fFrameFillColor:0,fCanvasBorderMode:0,fCanvasColor:0,fPadBorderMode:0,fPadColor:0,fStatColor:0,fTitleAlign:23,fTitleX:.5,fTitleBorderSize:0,fTitleColor:0,fTitleStyle:0,fOptStat:1111,fStatY:.935,fLegendBorderSize:1,fLegendFont:42,fLegendTextSize:0,fLegendFillColor:0});break;case"Plain":Object.assign(M.gStyle,{fFrameBorderMode:0,fCanvasBorderMode:0,fPadBorderMode:0,fPadColor:0,fCanvasColor:0,fTitleColor:0,fTitleBorderSize:0,fStatColor:0,fStatBorderSize:1,fLegendBorderSize:1});break;case"Bold":Object.assign(M.gStyle,{fCanvasColor:10,fCanvasBorderMode:0,fFrameLineWidth:3,fFrameFillColor:10,fPadColor:10,fPadTickX:1,fPadTickY:1,fPadBottomMargin:.15,fPadLeftMargin:.15,fTitleColor:10,fTitleTextColor:600,fStatColor:10})}}function P(ie,Me,de){let fe=Me<=0?"":(0,M.btoa_func)(JSON.stringify(ie)),I=new Date;I.setTime(Me<=0?0:I.getTime()+24*Me*60*60*1e3),document.cookie=`${de}=${fe}; expires=${I.toUTCString()}; SameSite=None; Secure; path=/;`}function p(ie=365,Me="jsroot_settings"){P(M.settings,ie,Me)}function w(ie=!1,Me="jsroot_settings"){let de=function x(ie){if(typeof document>"u")return null;let de=decodeURIComponent(document.cookie).split(";");ie+="=";for(let fe=0;fe<de.length;fe++){let I=de[fe];for(;" "==I.charAt(0);)I=I.substring(1);if(0==I.indexOf(ie)){let U=JSON.parse((0,M.atob_func)(I.substring(ie.length,I.length)));return(0,M.isObject)(U)?U:null}}return null}(Me);return!!de&&(ie||Object.assign(M.settings,de),!0)}function m(ie=365,Me="jsroot_style"){P(M.gStyle,ie,Me)}let F=null;function R(ie){const Me="data:image/svg+xml;charset=utf-8,";if(0==ie.indexOf(Me))return decodeURIComponent(ie.slice(Me.length));if(0==ie.indexOf("data:image/")){let de=ie.indexOf("base64,");if(de>0){let fe=ie.slice(de+7);return(0,M.atob_func)(fe)}}return ie}function q(ie,Me){return T.apply(this,arguments)}function T(){return(T=(0,ze.Z)(function*(ie,Me){if((0,M.isFunc)(F))return F(ie,R(Me));if((0,M.isNodeJs)())return Ce.e(229).then(Ce.t.bind(Ce,229,19)).then(de=>(de.writeFileSync(ie,R(Me)),!0));if("object"==typeof document){let de=document.createElement("a");return de.download=ie,de.href=Me,document.body.appendChild(de),new Promise(fe=>{de.addEventListener("click",()=>{de.parentNode.removeChild(de),fe(!0)}),de.click()})}return!1})).apply(this,arguments)}function J(ie,Me){let de=-1,fe=(0,je._V)();if((0,M.isStr)(ie)){if(ie&&"none"!=ie){for(let I=1;I<fe.length;++I)if(fe[I]==ie){de=I;break}}else de=0;de<0&&0==ie.indexOf("rgb")&&(de=9999)}else Number.isInteger(ie)&&fe[ie]&&(de=ie,ie=fe[de]);if(de<0)return"";if(de>=50){let I=(0,L.$_)(ie);de=`TColor::GetColor(${I.r},${I.g},${I.b})`}return`exec:${Me}(${de})`}},629:($r,At,Ce)=>{"use strict";Ce.r(At),Ce.d(At,{TH1Painter:()=>Ze});var ze=Ce(5835),M=Ce(9542),L=Ce(7238),ye=Ce(6030),Be=Ce(9921),je=Ce(9670);class Ze extends je.f{draw3D(He){this.mode3d=!0;let Oe=this.getFramePainter(),ce=this.isMainPainter(),Y=this.getHisto(),K=Promise.resolve(!0),ue=1+2*M.gStyle.fHistTopMargin;return"resize"==He?ce&&Oe.resize3D()&&Oe.render3D():(this.deleteAttr(),this.scanContent(!0),ce&&((0,L.g_)(Oe),K=Oe.create3DScene(this.options.Render3D,this.options.x3dscale,this.options.y3dscale).then(()=>{Oe.setAxesRanges(Y.fXaxis,this.xmin,this.xmax,Y.fYaxis,this.ymin,this.ymax,Y.fZaxis,0,0,this),Oe.set3DOptions(this.options),Oe.drawXYZ(Oe.toplevel,ye.z4,{use_y_for_z:!0,zmult:ue,zoom:M.settings.Zooming,ndim:1,draw:-1!==this.options.Axis})})),Oe.mode3d&&(K=K.then(()=>{(0,L.UR)(this),Oe.render3D(),this.updateStatWebCanvas(),Oe.addKeysHandler()}))),ce&&(K=K.then(()=>this.drawColorPalette(this.options.Zscale&&(12===this.options.Lego||14===this.options.Lego))).then(()=>this.drawHistTitle())),K.then(()=>this)}static draw(He,Oe,ce){return(0,ze.Z)(function*(){return Be.M._drawHist(new Ze(He,Oe),ce)})()}}},8189:($r,At,Ce)=>{"use strict";Ce.r(At),Ce.d(At,{TH2Painter:()=>He});var ze=Ce(5835),M=Ce(9542),L=Ce(9900),ye=Ce(7238),Be=Ce(6030),je=Ce(9921),Ze=Ce(7823);class He extends Ze.S{draw3D(ce){var Y=this;return(0,ze.Z)(function*(){Y.mode3d=!0;let K=Y.getFramePainter(),ue=Y.isMainPainter(),X=Y.getHisto(),Z=Promise.resolve(!0);if("resize"==ce)ue&&K.resize3D()&&K.render3D();else{let O=Y.getPadPainter().getRootPad(!0),P=1+2*M.gStyle.fHistTopMargin;Y.draw_content||0!=Y.gmaxbin?(Y.zmin=O?.fLogz?.3*Y.gminposbin:Y.gminbin,Y.zmax=Y.gmaxbin):P=1,O?.fLogz&&Y.zmin<=0&&(Y.zmin=1e-5*Y.zmax),Y.deleteAttr(),ue&&((0,ye.g_)(K),Z=K.create3DScene(Y.options.Render3D,Y.options.x3dscale,Y.options.y3dscale).then(()=>{K.setAxesRanges(X.fXaxis,Y.xmin,Y.xmax,X.fYaxis,Y.ymin,Y.ymax,X.fZaxis,Y.zmin,Y.zmax,Y),K.set3DOptions(Y.options),K.drawXYZ(K.toplevel,Be.z4,{zmult:P,zoom:M.settings.Zooming,ndim:2,draw:-1!==Y.options.Axis})})),K.mode3d&&(Z=Z.then(()=>{Y.draw_content&&(Y.isTH2Poly()?function Ie(Oe){let X,Z,O,p,ce=Oe.getHisto(),Y=Oe.getFramePainter(),K=Y.z_handle.getScaleMin(),ue=Y.z_handle.getScaleMax(),P=ce.fBins.arr.length,x=Y.grz(K);Oe.maxbin=Oe.gmaxbin,Oe.minbin=Oe.gminbin,Oe.minposbin=Oe.gminposbin;let w=Oe.getContour(!0),m=Oe.getHistPalette();for(O=0;O<P;++O){if(Z=ce.fBins.arr[O],Z.fContent<K||(X=w.getPaletteIndex(m,Z.fContent),null===X)||Z.fXmin>Y.scale_xmax||Z.fXmax<Y.scale_xmin||Z.fYmin>Y.scale_ymax||Z.fYmax<Y.scale_ymin)continue;p=Y.grz(Z.fContent>ue?ue:Z.fContent);let _=[],F=[],R=1,q=Z.fPoly,T=0;q._typename==M.clTMultiGraph&&(R=Z.fPoly.fGraphs.arr.length,q=null);for(let I=0;I<R;++I){(!q||I>0)&&(q=Z.fPoly.fGraphs.arr[I]);let D,oe,U=q.fNpoints,z=q.fX,le=q.fY;for(;U>2&&z[0]===z[U-1]&&le[0]===le[U-1];)--U;for(let _e=0;_e<2;++_e){let Ee,Ve,Qe,et,Tt=Y.size_x3d*Y.size_z3d,Bt=_e>0?0:Tt/1e6;D=[],oe=null;for(let ve=0;ve<U;++ve)Qe=Y.grx(z[ve]),et=Y.gry(le[ve]),ve>0&&(Tt=(Qe-Ee)*(Qe-Ee)+(et-Ve)*(et-Ve)),Tt>Bt&&(D.push(new L.FM8(Qe,et)),Ee=Qe,Ve=et);try{D.length>2&&(oe=L.iDF.triangulateShape(D,[]))}catch{oe=null}if(oe&&oe.length>D.length-3)break}oe&&oe.length&&D&&(_.push(D),F.push(oe),T+=2*oe.length,p>x&&(T+=2*D.length))}let $=new Float32Array(9*T),J=0;for(let I=0;I<_.length;++I){let U=_[I],z=F[I];for(let le=0;le<2;++le)for(let D=0;D<z.length;++D){let oe=z[D],_e=U[oe[0]],Ee=U[oe[0===le?2:1]],Ve=U[oe[0===le?1:2]];$[J]=_e.x,$[J+1]=_e.y,$[J+2]=le?p:x,J+=3,$[J]=Ee.x,$[J+1]=Ee.y,$[J+2]=le?p:x,J+=3,$[J]=Ve.x,$[J+1]=Ve.y,$[J+2]=le?p:x,J+=3}if(p>x)for(let le=0;le<U.length;++le){let D=U[le],oe=U[le>0?le-1:U.length-1];$[J]=D.x,$[J+1]=D.y,$[J+2]=x,J+=3,$[J]=oe.x,$[J+1]=oe.y,$[J+2]=x,J+=3,$[J]=oe.x,$[J+1]=oe.y,$[J+2]=p,J+=3,$[J]=D.x,$[J+1]=D.y,$[J+2]=x,J+=3,$[J]=oe.x,$[J+1]=oe.y,$[J+2]=p,J+=3,$[J]=D.x,$[J+1]=D.y,$[J+2]=p,J+=3}}let ie=new L.u9r;ie.setAttribute("position",new L.TlE($,3)),ie.computeVertexNormals();let Me=Oe.fPalette.getColor(X),de=new L.vBJ({color:Me,vertexColors:!1}),fe=new L.Kj0(ie,de);Y.toplevel.add(fe),fe.painter=Oe,fe.bins_index=O,fe.draw_z0=x,fe.draw_z1=p,fe.tip_color=65280,fe.tooltip=function(){let I=this.painter,U=I.getFramePainter(),z=I.getObject().fBins.arr[this.bins_index];return{use_itself:!0,x1:U.grx(z.fXmin),x2:U.grx(z.fXmax),y1:U.gry(z.fYmin),y2:U.gry(z.fYmax),z1:this.draw_z0,z2:this.draw_z1,bin:this.bins_index,value:z.fContent,color:this.tip_color,lines:I.getPolyBinTooltips(this.bins_index)}}}}(Y):Y.options.Contour?(0,ye.ME)(Y,!0):Y.options.Surf?(0,ye.c5)(Y):Y.options.Error?(0,ye.me)(Y):(0,ye.UR)(Y)),K.render3D(),Y.updateStatWebCanvas(),K.addKeysHandler()}))}return ue&&(Z=Z.then(()=>Y.drawColorPalette(Y.options.Zscale&&(12==Y.options.Lego||14==Y.options.Lego||11==Y.options.Surf||12==Y.options.Surf))).then(()=>Y.drawHistTitle())),Z.then(()=>Y)})()}static draw(ce,Y,K){return(0,ze.Z)(function*(){return je.M._drawHist(new He(ce,Y),K)})()}}},5906:($r,At,Ce)=>{"use strict";Ce.r(At),Ce.d(At,{TH3Painter:()=>ce});var ze=Ce(5835),M=Ce(9542),L=Ce(9900),ye=Ce(3675),Be=Ce(49),je=Ce(6030),Ze=Ce(1968),Ie=Ce(4585),He=Ce(9921),Oe=Ce(7238);class ce extends He.M{scanContent(K){if(K&&this.nbinsx&&this.nbinsy&&this.nbinsz)return;let ue=this.getHisto();this.extractAxesProperties(3),this.gminbin=this.gmaxbin=ue.getBinContent(1,1,1);for(let X=0;X<this.nbinsx;++X)for(let Z=0;Z<this.nbinsy;++Z)for(let O=0;O<this.nbinsz;++O){let P=ue.getBinContent(X+1,Z+1,O+1);P<this.gminbin?this.gminbin=P:P>this.gmaxbin&&(this.gmaxbin=P)}this.draw_content=this.gmaxbin>0}countStat(){let de,fe,I,U,z,le,D,oe,_e,Ee,K=this.getHisto(),ue=K.fXaxis,X=K.fYaxis,Z=K.fZaxis,O=0,P=0,x=0,p=0,w=0,m=0,_=0,F=this.getSelectIndex("x","left"),R=this.getSelectIndex("x","right"),q=this.getSelectIndex("y","left"),T=this.getSelectIndex("y","right"),$=this.getSelectIndex("z","left"),J=this.getSelectIndex("z","right"),ie=this.getFramePainter(),Me={name:K.fName,entries:0,integral:0,meanx:0,meany:0,meanz:0,rmsx:0,rmsy:0,rmsz:0},Ve=Math.abs(K.fTsumw)>1e-300&&!ie.isAxisZoomed("x")&&!ie.isAxisZoomed("y")&&!ie.isAxisZoomed("z");for(de=0;de<this.nbinsx+2;++de)for(U=ue.GetBinCoord(de-.5),z=de<F?0:de>R?2:1,fe=0;fe<this.nbinsy+2;++fe)for(le=X.GetBinCoord(fe-.5),D=fe<q?0:fe>T?2:1,I=0;I<this.nbinsz+2;++I)oe=Z.GetBinCoord(I-.5),_e=I<$?0:I>J?2:1,Ee=K.getBinContent(de,fe,I),Me.entries+=Ee,!Ve&&1==z&&1==D&&1==_e&&(O+=Ee,P+=U*Ee,x+=le*Ee,p+=oe*Ee,w+=U**2*Ee,m+=le**2*Ee,_+=oe**2*Ee);return Ve&&(O=K.fTsumw,P=K.fTsumwx,w=K.fTsumwx2,x=K.fTsumwy,m=K.fTsumwy2,p=K.fTsumwz,_=K.fTsumwz2),Math.abs(O)>1e-300&&(Me.meanx=P/O,Me.meany=x/O,Me.meanz=p/O,Me.rmsx=Math.sqrt(Math.abs(w/O-Me.meanx*Me.meanx)),Me.rmsy=Math.sqrt(Math.abs(m/O-Me.meany*Me.meany)),Me.rmsz=Math.sqrt(Math.abs(_/O-Me.meanz*Me.meanz))),Me.integral=O,K.fEntries>1&&(Me.entries=K.fEntries),Me}fillStatistic(K,ue,X){if(this.isIgnoreStatsFill())return!1;let Z=this.countStat(),O=ue%10,P=Math.floor(ue/10)%10,x=Math.floor(ue/100)%10,p=Math.floor(ue/1e3)%10,w=Math.floor(ue/1e6)%10;return K.clearPave(),O>0&&K.addText(Z.name),P>0&&K.addText("Entries = "+K.format(Z.entries,"entries")),x>0&&(K.addText("Mean x = "+K.format(Z.meanx)),K.addText("Mean y = "+K.format(Z.meany)),K.addText("Mean z = "+K.format(Z.meanz))),p>0&&(K.addText("Std Dev x = "+K.format(Z.rmsx)),K.addText("Std Dev y = "+K.format(Z.rmsy)),K.addText("Std Dev z = "+K.format(Z.rmsz))),w>0&&K.addText("Integral = "+K.format(Z.integral,"entries")),X&&K.fillFunctionStat(this.findFunction("TF3"),X),!0}getBinTooltips(K,ue,X){let Z=[],O=this.getHisto();Z.push(this.getObjectHint()),Z.push(`x = ${this.getAxisBinTip("x",O.fXaxis,K)}  xbin=${K+1}`),Z.push(`y = ${this.getAxisBinTip("y",O.fYaxis,ue)}  ybin=${ue+1}`),Z.push(`z = ${this.getAxisBinTip("z",O.fZaxis,X)}  zbin=${X+1}`);let P=O.getBinContent(K+1,ue+1,X+1);return P===Math.round(P)?Z.push("entries = "+P):Z.push("entries = "+(0,ye.Ee)(P,M.gStyle.fStatFormat)),Z}draw3DScatter(){let w,m,_,F,K=this.getObject(),ue=this.getFramePainter(),X=this.getSelectIndex("x","left",.5),Z=this.getSelectIndex("x","right",0),O=this.getSelectIndex("y","left",.5),P=this.getSelectIndex("y","right",0),x=this.getSelectIndex("z","left",.5),p=this.getSelectIndex("z","right",0);if(Z<=X||P<=O||p<=x)return Promise.resolve(!0);let R=this.gmaxbin>1e3?1e3/this.gmaxbin:1,q=0,T=0,$=Math.max(0,this.gminbin);for(w=X;w<Z;++w)for(m=O;m<P;++m)for(_=x;_<p;++_)F=K.getBinContent(w+1,m+1,_+1),T+=F,!(F<=$)&&(q+=Math.round(F*R));if(q>(ue.webgl?1e5:3e4))return!1;let J=new Ze.B_(q,ue.webgl,ue.size_x3d/200),ie=new Int32Array(q),Me=0,de=new ye.q9(T);for(w=X;w<Z;++w)for(m=O;m<P;++m)for(_=x;_<p;++_){if(F=K.getBinContent(w+1,m+1,_+1),F<=$)continue;let fe=Math.round(F*R);for(let I=0;I<fe;++I){let U=K.fXaxis.GetBinCoord(w+de.random()),z=K.fYaxis.GetBinCoord(m+de.random()),le=K.fZaxis.GetBinCoord(_+de.random());ie[Me++]=K.getBin(w+1,m+1,_+1),J.addPoint(ue.grx(U),ue.gry(z),ue.grz(le))}}return J.createPoints({color:this.getColor(K.fMarkerColor)}).then(fe=>(ue.toplevel.add(fe),fe.bins=ie,fe.painter=this,fe.tip_color=3===K.fMarkerColor?16711680:65280,fe.tooltip=function(I){if(!Number.isInteger(I.index))return console.error(`intersect.index not provided, three.js version ${L.UZH}`),null;let U=Math.floor(I.index/this.nvertex);if(U<0||U>=this.bins.length)return null;let z=this.painter,le=z.getHisto(),D=z.getFramePainter(),oe=z.get3DToolTip(this.bins[U]);return oe.x1=D.grx(le.fXaxis.GetBinLowEdge(oe.ix)),oe.x2=D.grx(le.fXaxis.GetBinLowEdge(oe.ix+1)),oe.y1=D.gry(le.fYaxis.GetBinLowEdge(oe.iy)),oe.y2=D.gry(le.fYaxis.GetBinLowEdge(oe.iy+1)),oe.z1=D.grz(le.fZaxis.GetBinLowEdge(oe.iz)),oe.z2=D.grz(le.fZaxis.GetBinLowEdge(oe.iz+1)),oe.color=this.tip_color,oe.opacity=.3,oe},!0))}draw3DBins(){var K=this;return(0,ze.Z)(function*(){if(!K.draw_content)return!1;let ue=K.options.Box?K.options.BoxStyle:0;if(!(ue||K.options.GLBox||K.options.GLColor||K.options.Lego)){let En=K.draw3DScatter();if(!1!==En)return En;ue=12}let F,R,X=K.getHisto(),Z=K.getColor(X.fFillColor),O=K.getFramePainter(),P=0,x=!1,p=!1,w=!1,m=1,_=!0,q=.5;if(!ue&&K.options.Lego&&(ue=1===K.options.Lego?10:K.options.Lego),11===K.options.GLBox||12===K.options.GLBox){q=.4,x=!0,12===K.options.GLBox&&(w=!0);let En=O.webgl?new L.xo$(.5,16,12):new L.xo$(.5,8,6);En.applyMatrix4((new L.yGw).makeRotationX(Math.PI/2)),En.computeVertexNormals();let $n=En.getIndex().array,vn=En.getAttribute("position").array,rn=En.getAttribute("normal").array;P=3*$n.length,F=new Float32Array(P),R=new Float32Array(P);for(let Gt=0;Gt<$n.length;++Gt){let qt=3*$n[Gt];F[3*Gt]=vn[qt],F[3*Gt+1]=vn[qt+1],F[3*Gt+2]=vn[qt+2],R[3*Gt]=rn[qt],R[3*Gt+1]=rn[qt+1],R[3*Gt+2]=rn[qt+2]}}else{let En=Ze.XZ.Indexes,$n=Ze.XZ.Normals,vn=Ze.XZ.Vertices;P=3*En.length,F=new Float32Array(P),R=new Float32Array(P);for(let rn=0,Gt=-3;rn<En.length;++rn){let qt=vn[En[rn]];F[3*rn]=qt.x-.5,F[3*rn+1]=qt.y-.5,F[3*rn+2]=qt.z-.5,rn%6==0&&(Gt+=3),R[3*rn]=$n[Gt],R[3*rn+1]=$n[Gt+1],R[3*rn+2]=$n[Gt+2]}p=!0,12===ue?w=!0:13===ue?(w=!0,p=!1):K.options.GLColor&&(w=!0,m=.5,_=!1,p=!1,x=!0)}_&&(_=K.gminbin||K.gmaxbin?1/Math.max(Math.abs(K.gminbin),Math.abs(K.gmaxbin)):1);let T=K.getSelectIndex("x","left",.5),$=K.getSelectIndex("x","right",0),J=K.getSelectIndex("y","left",.5),ie=K.getSelectIndex("y","right",0),Me=K.getSelectIndex("z","left",.5),de=K.getSelectIndex("z","right",0);if($<=T||ie<=J||de<=Me)return!1;let le,D,oe,_e,Ee,fe=(O.grx(X.fXaxis.GetBinLowEdge($+1))-O.grx(X.fXaxis.GetBinLowEdge(T+1)))/($-T),I=(O.gry(X.fYaxis.GetBinLowEdge(ie+1))-O.gry(X.fYaxis.GetBinLowEdge(J+1)))/(ie-J),U=(O.grz(X.fZaxis.GetBinLowEdge(de+1))-O.grz(X.fZaxis.GetBinLowEdge(Me+1)))/(de-Me),z=0,Ve=[],Qe=0,et=[],Tt=w?K.getContour():null,Bt=w?K.getHistPalette():null;for(le=T;le<$;++le)for(D=J;D<ie;++D)for(oe=Me;oe<de;++oe){if(Ee=X.getBinContent(le+1,D+1,oe+1),!K.options.GLColor&&(0===Ee||Ee<K.gminbin)||(_e=_?Math.pow(Math.abs(Ee*_),.3333):1,_e<.001)||(z++,!w))continue;let En=Tt.getPaletteIndex(Bt,Ee);null!==En?(void 0===Ve[En]&&(Ve[En]=0,et[En]=Qe++),Ve[En]+=1):console.error(`not found color for value = ${Ee}`)}w||(Ve.push(z),Qe=1,et=[0]);const ve=new Array(Qe),Je=new Array(Qe),ct=new Array(Qe),We=new Array(Qe),Ke=new Array(Qe),ft=new Array(Qe),zt=new Array(Qe);for(let En=0;En<Ve.length;++En){if(!Ve[En])continue;z=Ve[En];let $n=et[En];ve[$n]=Ke[$n]=0,p&&(Ke[$n]=z*P/3>65520?2:1),Je[$n]=new Float32Array(z*P),ct[$n]=new Float32Array(z*P),We[$n]=new Int32Array(z),1===Ke[$n]&&(ft[$n]=new Uint16Array(z*Ze.XZ.MeshSegments.length)),2===Ke[$n]&&(zt[$n]=new Float32Array(z*Ze.XZ.Segments.length*3))}let Zt,Mt,Ot,sn,wn,Ln;for(le=T;le<$;++le)for(Zt=X.fXaxis.GetBinCenter(le+1),Mt=O.grx(Zt),D=J;D<ie;++D)for(Ot=X.fYaxis.GetBinCenter(D+1),sn=O.gry(Ot),oe=Me;oe<de;++oe){if(Ee=X.getBinContent(le+1,D+1,oe+1),!K.options.GLColor&&(0===Ee||Ee<K.gminbin)||(_e=_?Math.pow(Math.abs(Ee*_),.3333):1,_e<.001))continue;let En=0;if(w){let Gt=Tt.getPaletteIndex(Bt,Ee);if(null===Gt)continue;En=et[Gt]}z=ve[En],wn=X.fZaxis.GetBinCenter(oe+1),Ln=O.grz(wn),We[En][z]=X.getBin(le+1,D+1,oe+1);let $n=z*P,vn=Je[En],rn=ct[En];for(let Gt=0;Gt<P;Gt+=3,$n+=3)vn[$n]=Mt+F[Gt]*fe*_e,vn[$n+1]=sn+F[Gt+1]*I*_e,vn[$n+2]=Ln+F[Gt+2]*U*_e,rn[$n]=R[Gt],rn[$n+1]=R[Gt+1],rn[$n+2]=R[Gt+2];if(1===Ke[En]){let Gt=Ze.XZ.MeshSegments;$n=z*Gt.length;let qt=Math.round(z*P/3),Qt=ft[En];for(let _n=0;_n<Gt.length;++_n)Qt[$n+_n]=qt+Gt[_n]}if(2===Ke[En]){let Gt=Ze.XZ.Segments,qt=zt[En];$n=z*Gt.length*3;for(let Qt=0;Qt<Gt.length;++Qt,$n+=3){let _n=Ze.XZ.Vertices[Gt[Qt]];qt[$n]=Mt+(_n.x-.5)*fe*_e,qt[$n+1]=sn+(_n.y-.5)*I*_e,qt[$n+2]=Ln+(_n.z-.5)*U*_e}}ve[En]=z+1}for(let En=0;En<Ve.length;++En){if(!Ve[En])continue;let $n=et[En],vn=new L.u9r;vn.setAttribute("position",new L.TlE(Je[$n],3)),vn.setAttribute("normal",new L.TlE(ct[$n],3)),w&&(Z=K.fPalette.getColor(En));const rn=x?new L.YBo({color:Z,opacity:m,transparent:m<1,vertexColors:!1}):new L.vBJ({color:Z,opacity:m,vertexColors:!1}),Gt=new L.Kj0(vn,rn);if(Gt.bins=We[$n],Gt.bins_faces=P/9,Gt.painter=K,Gt.scalex=q*fe,Gt.scaley=q*I,Gt.scalez=q*U,Gt.tip_color=3===X.fFillColor?16711680:65280,Gt.use_scale=_,Gt.tooltip=function(qt){if(!Number.isInteger(qt.faceIndex))return console.error(`intersect.faceIndex not provided, three.js version ${L.UZH}`),null;let Qt=Math.floor(qt.faceIndex/this.bins_faces);if(Qt<0||Qt>=this.bins.length)return null;let _n=this.painter,dn=_n.getHisto(),ci=_n.getFramePainter(),ir=_n.get3DToolTip(this.bins[Qt]),Vi=ci.grx(dn.fXaxis.GetBinCoord(ir.ix-.5)),br=ci.gry(dn.fYaxis.GetBinCoord(ir.iy-.5)),Ur=ci.grz(dn.fZaxis.GetBinCoord(ir.iz-.5)),Ar=this.use_scale?Math.pow(Math.abs(ir.value*this.use_scale),.3333):1;return ir.x1=Vi-this.scalex*Ar,ir.x2=Vi+this.scalex*Ar,ir.y1=br-this.scaley*Ar,ir.y2=br+this.scaley*Ar,ir.z1=Ur-this.scalez*Ar,ir.z2=Ur+this.scalez*Ar,ir.color=this.tip_color,ir},O.toplevel.add(Gt),Ke[$n]>0){let qt=K.getColor(X.fLineColor),Qt=new L.nls({color:qt}),_n=null;_n=1===Ke[$n]?(0,Ze.Qy)(Je[$n],Qt,ft[$n]):(0,Ze.Qy)(zt[$n],Qt),O.toplevel.add(_n)}}return!0})()}redraw(K){var ue=this;return(0,ze.Z)(function*(){let X=ue.getFramePainter(),Z=ue.getHisto(),O=Promise.resolve(!0);return"resize"==K?X.resize3D()&&X.render3D():((0,Oe.g_)(X),O=X.create3DScene(ue.options.Render3D,ue.options.x3dscale,ue.options.y3dscale).then(()=>(X.setAxesRanges(Z.fXaxis,ue.xmin,ue.xmax,Z.fYaxis,ue.ymin,ue.ymax,Z.fZaxis,ue.zmin,ue.zmax,ue),X.set3DOptions(ue.options),X.drawXYZ(X.toplevel,je.z4,{zoom:M.settings.Zooming,ndim:3,draw:-1!==ue.options.Axis}),ue.draw3DBins())).then(()=>{X.render3D(),ue.updateStatWebCanvas(),X.addKeysHandler()})),O.then(()=>ue.drawHistTitle()).then(()=>ue)})()}fillToolbar(){let K=this.getPadPainter();K&&(K.addPadButton("auto_zoom","Unzoom all axes","ToggleZoom","Ctrl *"),this.draw_content&&K.addPadButton("statbox","Toggle stat box","ToggleStatBox"),K.showPadButtons())}canZoomInside(K,ue,X){let Z=this.getHisto();return Z&&(Z=Z["f"+K.toUpperCase()+"axis"]),!Z||Z.FindBin(X,.5)-Z.FindBin(ue,0)>1}autoZoom(){let x,p,w,K=this.getSelectIndex("x","left"),ue=this.getSelectIndex("x","right"),X=this.getSelectIndex("y","left"),Z=this.getSelectIndex("y","right"),O=this.getSelectIndex("z","left"),P=this.getSelectIndex("z","right"),m=this.getObject();if(K===ue||X===Z||O===P)return;let _=m.getBinContent(K+1,X+1,O+1);for(x=K;x<ue;++x)for(p=X;p<Z;++p)for(w=O;w<P;++w)_=Math.min(_,m.getBinContent(x+1,p+1,w+1));if(_>0)return;let F=ue,R=K,q=Z,T=X,$=P,J=O;for(x=K;x<ue;++x)for(p=X;p<Z;++p)for(w=O;w<P;++w)m.getBinContent(x+1,p+1,w+1)>_&&(x<F&&(F=x),x>=R&&(R=x+1),p<q&&(q=p),p>=T&&(T=p+1),w<$&&($=w),w>=J&&(J=w+1));let ie,Me,de,fe,I,U,z=!1;return F===R-1&&F>K+1&&R<ue-1&&(F--,R++),q===T-1&&q>X+1&&T<Z-1&&(q--,T++),$===J-1&&$>O+1&&J<P-1&&($--,J++),(F>K||R<ue)&&F<R-1&&(ie=m.fXaxis.GetBinLowEdge(F+1),Me=m.fXaxis.GetBinLowEdge(R+1),z=!0),(q>X||T<Z)&&q<T-1&&(de=m.fYaxis.GetBinLowEdge(q+1),fe=m.fYaxis.GetBinLowEdge(T+1),z=!0),($>O||J<P)&&$<J-1&&(I=m.fZaxis.GetBinLowEdge($+1),U=m.fZaxis.GetBinLowEdge(J+1),z=!0),z?this.getFramePainter().zoom(ie,Me,de,fe,I,U):void 0}fillHistContextMenu(K){let ue=this.getSupportedDrawOptions();K.addDrawMenu("Draw with",ue,X=>{if("inspect"===X)return this.showInspector();this.decodeOptions(X),this.interactiveRedraw(!0,"drawopt")})}static draw(K,ue,X){return(0,ze.Z)(function*(){let Z=new ce(K,ue);return Z.mode3d=!0,(0,Be.ensureTCanvas)(Z,"3d").then(()=>(Z.setAsMainPainter(),Z.decodeOptions(X),Z.checkPadRange(),Z.scanContent(),Z.redraw())).then(()=>{let O=Z.createStat();if(O)return Ie.TPavePainter.draw(K,O,"")}).then(()=>(Z.fillToolbar(),Z))})()}}},4585:($r,At,Ce)=>{"use strict";Ce.r(At),Ce.d(At,{TPavePainter:()=>Z,produceLegend:()=>O});var ze=Ce(5835),M=Ce(9542),L=Ce(2253),ye=Ce(6976),Be=Ce(3675),je=Ce(6458),Ze=Ce(6367),Ie=Ce(6417),He=Ce(4383),Oe=Ce(6030),ce=Ce(6116),Y=Ce(49);const K="TDiamond",ue="TPavesText",X="TPaveLabel";class Z extends je.tK{constructor(p,w){super(p,w),this.Enabled=!0,this.UseContextMenu=!0,this.UseTextColor=!1}drawPave(p){var w=this;return(0,ze.Z)(function*(){if(w.UseTextColor=!1,!w.Enabled)return w.removeG(),w;let m=w.getObject(),_=m.fOption.toUpperCase(),F=w.getFramePainter(),R=w.getPadPainter();if(0===m.fInit){w.stored=Object.assign({},m),m.fInit=1;let I=R.getRootPad(!0);if(m._typename!=M.clTPaletteAxis||m.fX1||m.fX2||m.fY1||m.fY2?_.indexOf("NDC")>=0?(m.fX1NDC=m.fX1,m.fX2NDC=m.fX2,m.fY1NDC=m.fY1,m.fY2NDC=m.fY2):I&&0==I.fX1&&1==I.fX2&&0==I.fY1&&1==I.fY2&&(0,M.isStr)(p)&&p.indexOf("postpone")>=0?(m.fInit=0,m.fX1NDC=m.fY1NDC=.99,m.fX2NDC=m.fY2NDC=1):I?(I.fLogx&&(m.fX1>0&&(m.fX1=Math.log10(m.fX1)),m.fX2>0&&(m.fX2=Math.log10(m.fX2))),I.fLogy&&(m.fY1>0&&(m.fY1=Math.log10(m.fY1)),m.fY2>0&&(m.fY2=Math.log10(m.fY2))),m.fX1NDC=(m.fX1-I.fX1)/(I.fX2-I.fX1),m.fY1NDC=(m.fY1-I.fY1)/(I.fY2-I.fY1),m.fX2NDC=(m.fX2-I.fX1)/(I.fX2-I.fX1),m.fY2NDC=(m.fY2-I.fY1)/(I.fY2-I.fY1)):(m.fX1NDC=m.fY1NDC=.1,m.fX2NDC=m.fY2NDC=.9):F?(m.fX1NDC=F.fX2NDC+.01,m.fX2NDC=Math.min(.96,F.fX2NDC+.06),m.fY1NDC=F.fY1NDC,m.fY2NDC=F.fY2NDC):(m.fX2NDC=.8,m.fX1NDC=.9,m.fY1NDC=.1,m.fY2NDC=.9),m.fX1NDC==m.fX2NDC&&m.fY1NDC==m.fY2NDC&&m._typename==M.clTLegend){m.fX1NDC=Math.max(I?I.fLeftMargin:0,m.fX2NDC-.3),m.fX2NDC=Math.min(m.fX1NDC+.3,I?1-I.fRightMargin:1);let U=Math.max(m.fPrimitives?.05*m.fPrimitives.arr.length:0,.2);m.fY2NDC=Math.min(I?1-I.fTopMargin:1,m.fY1NDC+U),m.fY1NDC=Math.max(m.fY2NDC-U,I?I.fBottomMargin:0)}}if(w.isStats()&&!w.NoFillStats&&!R?._fast_drawing){let I=m.$main_painter||w.getMainPainter();if((0,M.isFunc)(I?.fillStatistic)){let U=parseInt(m.fOptStat),z=parseInt(m.fOptFit);if(Number.isInteger(U)||(U=M.gStyle.fOptStat),Number.isInteger(z)||(z=M.gStyle.fOptFit),I.fillStatistic(w,U,z)){let le=m.fLines?.arr.length||0;le>0&&!w.moved_interactive&&(M.gStyle.fStatFontSize<=0||M.gStyle.fStatFont%10==3)&&(m.fY1NDC=m.fY2NDC-.25*le*M.gStyle.fStatH)}}}let q=R.getPadRect(),T=m.fBorderSize,$=_.indexOf("L")>=0?-1:_.indexOf("R")>=0?1:0,J=_.indexOf("T")>=0?-1:_.indexOf("B")>=0?1:0;w.createG(),w._pave_x=Math.round(m.fX1NDC*q.width),w._pave_y=Math.round((1-m.fY2NDC)*q.height);let de,ie=Math.round((m.fX2NDC-m.fX1NDC)*q.width),Me=Math.round((m.fY2NDC-m.fY1NDC)*q.height);if(w.draw_g.attr("transform",`translate(${w._pave_x},${w._pave_y})`),w.createAttLine({attr:m,width:T>0?m.fLineWidth:0}),w.createAttFill({attr:m}),m._typename==K){let I=Math.round(Me/2),U=Math.round(ie/2),z=`l${U},${-I}l${U},${I}l${-U},${I}z`;T>1&&m.fShadowColor>0&&($||J)&&!w.fillatt.empty()&&w.draw_g.append("svg:path").attr("d","M0,"+(I+T)+z).style("fill",w.getColor(m.fShadowColor)).style("stroke",w.getColor(m.fShadowColor)).style("stroke-width","1px"),w.draw_g.append("svg:path").attr("d","M0,"+I+z).call(w.fillatt.func).call(w.lineatt.func);let le=w.draw_g.append("svg:g").attr("transform",`translate(${Math.round(ie/4)},${Math.round(Me/4)})`);return w.drawPaveText(U,I,p,le)}if(T>1&&m.fShadowColor>0&&!m.fNpaves&&($||J)){let I="",U=w.getColor(m.fShadowColor);I=w.fillatt.empty()?$<0&&J<0?`M0,0v${Me-T}h${-T}v${-Me}h${ie}v${T}`:`M0,${Me}v${T-Me}h${-T}v${Me}h${ie}v${-T}`:`M${$*T},${J*T}v${Me}h${ie}v${-Me}`,w.draw_g.append("svg:path").attr("d",I+"z").style("fill",U).style("stroke",U).style("stroke-width","1px")}if(m.fNpaves)for(let I=m.fNpaves-1;I>0;--I)w.draw_g.append("svg:path").attr("d",`M${4*$*I},${4*J*I}h${ie}v${Me}h${-ie}z`).call(w.fillatt.func).call(w.lineatt.func);return(!(0,M.isBatchMode)()||!w.fillatt.empty()||!w.lineatt.empty())&&(de=w.draw_g.append("svg:path").attr("d",`M0,0H${ie}V${Me}H0Z`).call(w.fillatt.func).call(w.lineatt.func)),(w.paveDrawFunc?w.paveDrawFunc(ie,Me,p):Promise.resolve(!0)).then(()=>((0,M.isBatchMode)()||m._typename===M.clTPave||(de&&de.style("pointer-events","visibleFill").on("mouseenter",()=>w.showObjectStatus()),(0,ce.uI)(w,{obj:m,x:w._pave_x,y:w._pave_y,width:ie,height:Me,minwidth:10,minheight:20,canselect:!0,redraw:()=>{w.moved_interactive=!0,w.interactiveRedraw(!1,"pave_moved"),w.drawPave()},ctxmenu:M.browser.touches&&M.settings.ContextMenu&&w.UseContextMenu}),w.UseContextMenu&&M.settings.ContextMenu&&w.draw_g.on("contextmenu",I=>w.paveContextMenu(I)),m._typename==M.clTPaletteAxis&&w.interactivePaletteAxis(ie,Me)),w))})()}fillWebObjectOptions(p){let w=this.getObject();if(!p){let m=this.snapid;if(!m&&this._hist_painter?.snapid&&w?.fName&&(m=this._hist_painter.snapid+"#func_"+w.fName),!m)return null;p={_typename:"TWebObjectOptions",snapid:m.toString(),opt:this.getDrawOpt(),fcust:"",fopt:[]}}return w?.fInit&&(p.fcust="pave",p.fopt=[w.fX1NDC,w.fY1NDC,w.fX2NDC,w.fY2NDC]),p}drawPaveLabel(p,w){var m=this;return(0,ze.Z)(function*(){let _=m.getObject();return _.fLabel&&_.fLabel.trim()?(m.UseTextColor=!0,m.startTextDrawing(_.fTextFont,w/1.2),m.drawText({align:_.fTextAlign,width:p,height:w,text:_.fLabel,color:m.getColor(_.fTextColor)}),m.finishTextDrawing()):m})()}drawPaveStats(p,w){let m=this.getObject(),_=[],F=this.getColor(m.fTextColor),R=0,q=0,T=0;for(let fe=0;fe<m.fLines.arr.length;++fe){let I=m.fLines.arr[fe];(I._typename==M.clTText||I._typename==M.clTLatex)&&_.push(I.fTitle)}let $=_.length;for(let fe=0;fe<$;++fe){let I=_[fe];if(fe>0&&(T=Math.max(T,I.length)),0==fe||I.indexOf("|")<0)continue;0===R&&(R=fe);let U=I.split("|");U.length>q&&(q=U.length)}let J=w/$,ie=!1,Me=m.fMargin*p;if(this.startTextDrawing(m.fTextFont,w/(1.2*$)),this.UseTextColor=!0,1==$)this.drawText({align:m.fTextAlign,width:p,height:w,text:_[0],color:F,latex:1});else for(let fe=0;fe<$;++fe){let I=fe*J;if(this.UseTextColor=!0,R&&fe>=R){let U=_[fe].split("|");for(let z=0;z<U.length;++z)this.drawText({align:"middle",x:p*z/q,y:I,latex:0,width:p/q,height:J,text:U[z],color:F})}else if(_[fe].indexOf("=")<0){if(0==fe){ie=!0;let U=Math.max(T,Math.round((p-2*Me)/J/.65));_[fe].length>U+5&&(_[fe]=_[fe].slice(0,U+2)+"...")}this.drawText({align:0==fe?"middle":"start",x:Me,y:I,width:p-2*Me,height:J,text:_[fe],color:F})}else{let U=_[fe].split("="),z=[];for(let le=0;le<2;++le)z.push({align:0==le?"start":"end",x:Me,y:I,width:p-2*Me,height:J,text:U[le],color:F,_expected_width:p-2*Me,_args:z,post_process(oe){this._args[0].ready&&this._args[1].ready&&oe.scaleTextDrawing(1.05*(this._args[0].result_width+this._args[1].result_width)/this._expected_width,oe.draw_g)}});for(let le=0;le<2;++le)this.drawText(z[le])}}let de="";if(m.fBorderSize>0&&ie&&(de+=`M0,${Math.round(J)}h${p}`),R>0&&q>1){for(let fe=R;fe<$;++fe)de+=`M0,${Math.round(fe*J)}h${p}`;for(let fe=0;fe<q-1;++fe)de+=`M${Math.round(p/q*(fe+1))},${Math.round(R*J)}V${w}`}return de&&this.draw_g.append("svg:path").attr("d",de).call(this.lineatt.func),this.finishTextDrawing(void 0,$>1)}drawPaveText(p,w,m,_){let F=this.getObject(),R=this.getColor(F.fTextColor),q=F?.fLines?.arr||[],T=q.length,$=this.getPadPainter(),J=$.getPadHeight(),ie=F.fLabel.length>0,Me=[],de=w/(T||1),fe=F.fMargin*p,I=0;1==T&&F.fTextSize>0&&(I=Math.round(F.fTextSize*J),I<3&&(I=3)),_||(_=this.draw_g);let U=1==T&&$?._fast_drawing,z=0;for(let le=0;le<T;++le){let D=q[le],oe=le*de;switch(D._typename){case M.clTText:case M.clTLatex:if(!D.fTitle||!D.fTitle.trim())continue;if(D.fX||D.fY){let We=D.fX?D.fX*p:fe,Ke=D.fY?(1-D.fY)*w:oe,ft=D.fTextColor?this.getColor(D.fTextColor):"";ft||(ft=R,this.UseTextColor=!0);let zt=_.append("svg:g");this.startTextDrawing(F.fTextFont,(D.fTextSize||F.fTextSize)*J,zt),this.drawText({align:D.fTextAlign||F.fTextAlign,x:We,y:Ke,text:D.fTitle,color:ft,latex:D._typename==M.clTText?0:1,draw_g:zt,fast:U}),Me.push(this.finishTextDrawing(zt))}else{0==z++&&this.startTextDrawing(F.fTextFont,w/(1.2*T),_,I);let We=null;1==T?We={x:0,y:0,width:p,height:w}:(We={x:fe,y:oe,width:p-2*fe,height:de},D.fTextColor&&(We.color=this.getColor(D.fTextColor)),D.fTextSize&&(We.font_size=Math.round(D.fTextSize*J))),We.align=D.fTextAlign||F.fTextAlign,We.draw_g=_,We.latex=D._typename==M.clTText?0:1,We.text=D.fTitle,We.fast=U,We.color||(this.UseTextColor=!0,We.color=R),this.drawText(We)}break;case M.clTLine:let _e=D.fX1?Math.round(D.fX1*p):0,Ee=D.fX2?Math.round(D.fX2*p):p,Ve=D.fY1?Math.round((1-D.fY1)*w):Math.round(oe+.5*de),Qe=D.fY2?Math.round((1-D.fY2)*w):Math.round(oe+.5*de),et=new Ze.rE(D);_.append("svg:path").attr("d",`M${_e},${Ve}L${Ee},${Qe}`).call(et.func);break;case M.clTBox:let Tt=D.fX1?Math.round(D.fX1*p):0,Bt=D.fX2?Math.round(D.fX2*p):p,ve=D.fY1?Math.round((1-D.fY1)*w):Math.round(oe),Je=D.fY2?Math.round((1-D.fY2)*w):Math.round(oe+de),ct=this.createAttFill(D);_.append("svg:path").attr("d",`M${Tt},${ve}H${Bt}V${Je}H${Tt}Z`).call(ct.func)}}if(z>0&&Me.push(this.finishTextDrawing(_,z>1)),ie){let le=Math.round(.25*p),D=Math.round(.02*-w),oe=Math.round(.5*p),_e=Math.round(.04*w),Ee=_.append("svg:g");Ee.append("svg:path").attr("d",`M${le},${D}h${oe}v${_e}h${-oe}z`).call(this.fillatt.func).call(this.lineatt.func),this.startTextDrawing(F.fTextFont,_e/1.5,Ee),this.drawText({align:22,x:le,y:D,width:oe,height:_e,text:F.fLabel,color:R,draw_g:Ee}),Me.push(this.finishTextDrawing(Ee)),this.UseTextColor=!0}return Promise.all(Me).then(()=>this)}format(p,w){w||(w="stat");let m=this.getObject();switch(w){case"stat":w=m.fStatFormat||M.gStyle.fStatFormat;break;case"fit":w=m.fFitFormat||M.gStyle.fFitFormat;break;case"entries":if(Math.abs(p)<1e9&&Math.round(p)==p)return p.toFixed(0);w="14.7g";break;case"last":w=this.lastformat}let _=(0,Be.Ee)(p,w||"6.4g",!0);return this.lastformat=_[1],_[0]}drawLegend(p,w){let m=this.getObject(),_=m.fPrimitives.arr.length,F=m.fNColumns,R=_;if(F<2)F=1;else for(;(R-1)*F>=_;)R--;const q=D=>!(D.fObject||D.fOption||D.fLabel&&" "!=D.fLabel);if(1==F)for(let D=0;D<_;++D)q(m.fPrimitives.arr[D])&&R--;R<1&&(R=1);let T=this.getColor(m.fTextColor),$=Math.round(p/F),J=Math.round(.03*p/F),ie=Math.round(.03*w),Me=(w-2*ie)/R,de=.9*Me,fe=0,I=this.getPadPainter(),U=I.getPadHeight(),z=!1,le=-1;m.fTextSize&&U*m.fTextSize>2&&U*m.fTextSize<de&&(de=fe=Math.round(U*m.fTextSize)),this.startTextDrawing(m.fTextFont,de,this.draw_g,fe);for(let D=0;D<_;++D){let oe=m.fPrimitives.arr[D];if(q(oe))continue;1==F?++le:le=D;let _e=oe.fOption.toLowerCase(),Ee=le%F,Ve=(le-Ee)/F,Qe=Ee*$,et=Qe+Math.round(m.fMargin*$),Tt=Math.round((Qe+et)/2),Bt=Math.round(Ve*Me+ie),ve=Math.round((Ve+.5)*Me+ie),Je=oe,ct=oe,We=oe,Ke=oe.fObject,ft=null,zt=!1;const Zt=-1!=_e.indexOf("f"),Mt=-1!=_e.indexOf("l"),Ot=-1!=_e.indexOf("e"),sn=-1!=_e.indexOf("p");if((0,M.isObject)(Ke)&&("fLineColor"in Ke&&(We=Ke),"fFillColor"in Ke&&(Je=Ke),"fMarkerColor"in Ke&&(ct=Ke),ft=I.findPainterFor(Ke)),Zt){let Ln,En=ft?.fillatt||this.createAttFill(Je);if(_e.indexOf("l")<0&&_e.indexOf("e")<0&&_e.indexOf("p")<0&&(Ln=ft?.lineatt||new Ze.rE(We),Ln.empty()&&(Ln=null)),!En.empty()||Ln){zt=!0;let $n=this.draw_g.append("svg:path").attr("d",`M${Qe+J},${Math.round(Bt+.1*Me)}v${Math.round(.8*Me)}h${et-2*J-Qe}v${-Math.round(.8*Me)}z`).call(En.func);Ln&&$n.call(Ln.func)}}if(Mt||Ot){let Ln=ft?.lineatt||new Ze.rE(We);Ln.empty()||(zt=!0,this.draw_g.append("svg:path").attr("d",`M${Qe+J},${ve}H${et-J}`).call(Ln.func),Ot&&this.draw_g.append("svg:path").attr("d",`M${Tt},${Math.round(Bt+.1*Me)}V${Math.round(Bt+.9*Me)}`).call(Ln.func))}if(sn){let Ln=ft?.markeratt||new Ie.M(ct);Ln.empty()||(zt=!0,this.draw_g.append("svg:path").attr("d",Ln.create((Qe+et)/2,ve)).call(Ln.func))}!zt&&ft?.lineatt&&!ft.lineatt.empty()&&this.draw_g.append("svg:path").attr("d",`M${Qe+J},${Math.round(Bt+.1*Me)}v${Math.round(.8*Me)}h${et-2*J-Qe}v${-Math.round(.8*Me)}z`).style("fill","none").call(ft.lineatt.func);let wn=et;_e?z=!0:z||(wn=Qe+J),oe.fLabel&&this.drawText({align:m.fTextAlign,x:wn,y:Bt,width:Qe+$-wn-J,height:Me,text:oe.fLabel,color:T})}return this.finishTextDrawing()}drawPaletteAxis(p,w,m){let z,le,_=this.getObject(),F=_.fAxis,R=(0,M.isStr)(m)&&m.indexOf("can_move")>=0,q=(0,M.isStr)(m)&&m.indexOf("postpone")>=0,T=(0,M.isStr)(m)&&m.indexOf("cjust")>=0,$=this.getPadPainter(),J=$.getPadWidth(),ie=$.getPadHeight(),Me=$.getRootPad(!0),de=_.$main_painter||this.getMainPainter(),fe=this.getFramePainter(),I=0,U=100,D=de.fContour,oe=D?D.getLevels():null,_e=de.fPalette,Ee="";if(this._palette_vertical=_.fX2NDC-_.fX1NDC<_.fY2NDC-_.fY1NDC,F.fTickSize=.6*p/J,D&&fe?void 0!==fe.zmin&&void 0!==fe.zmax&&fe.zmin!==fe.zmax?(z=fe.zmin,le=fe.zmax,I=fe.zoom_zmin,U=fe.zoom_zmax,I===U&&(I=z,U=le)):(I=oe[0],U=oe[oe.length-1]):void 0!==de.gmaxbin&&void 0!==de.gminbin?(I=de.gminbin,U=de.gmaxbin):void 0!==de.hmin&&void 0!==de.hmax&&(I=de.hmin,U=de.hmax),this.draw_g.selectAll("rect").style("fill","white"),(void 0===z||void 0===le||z==le)&&(z=I,le=U),this._palette_vertical?(this._swap_side=_.fX2NDC<.5,this.z_handle.configureAxis("zaxis",z,le,I,U,!0,[0,w],{log:Me?Me.fLogz:0,fixed_ticks:T?oe:null,maxTickSize:Math.round(.7*p),swap_side:this._swap_side}),Ee=this._swap_side?"":`translate(${p})`):(this._swap_side=_.fY1NDC>.5,this.z_handle.configureAxis("zaxis",z,le,I,U,!1,[0,p],{log:Me?Me.fLogz:0,fixed_ticks:T?oe:null,maxTickSize:Math.round(.7*w),swap_side:this._swap_side}),Ee=this._swap_side?"":`translate(0,${w})`),D&&_e&&!q)for(let Ve=0;Ve<oe.length-1;++Ve){let Bt,Qe=Math.round(this.z_handle.gr(oe[Ve])),et=Math.round(this.z_handle.gr(oe[Ve+1])),Tt=(oe[Ve]+oe[Ve+1])/2;if(this._palette_vertical){if(et>=w||Qe<0)continue;Qe+=1,Qe>w?(Qe=w,Tt=.001*oe[Ve]+.999*oe[Ve+1]):et<0&&(et=0,Tt=.999*oe[Ve]+.001*oe[Ve+1]),Bt=`M0,${et}H${p}V${Qe}H0Z`}else{if(Qe>=p||et<0)continue;et+=1,et>p?(et=p,Tt=.999*oe[Ve]+.001*oe[Ve+1]):Qe<0&&(Qe=0,Tt=.001*oe[Ve]+.999*oe[Ve+1]),Bt=`M${Qe},0V${w}H${et}V0Z`}let ve=D.getPaletteColor(_e,Tt);if(!ve)continue;let Je=this.draw_g.append("svg:path").attr("d",Bt).style("fill",ve).property("fill0",ve).property("fill1",(0,L.B8)(ve).darker(.5).formatHex());this.isTooltipAllowed()&&Je.on("mouseover",function(){(0,L.Ys)(this).transition().duration(100).style("fill",(0,L.Ys)(this).property("fill1"))}).on("mouseout",function(){(0,L.Ys)(this).transition().duration(100).style("fill",(0,L.Ys)(this).property("fill0"))}).append("svg:title").text(oe[Ve].toFixed(2)+" - "+oe[Ve+1].toFixed(2)),M.settings.Zooming&&Je.on("dblclick",()=>this.getFramePainter().unzoom("z"))}else this.draw_g.append("svg:path").attr("d",`M0,0H${p}V${w}H0Z`).style("fill","white");return this.z_handle.drawAxis(this.draw_g,p,w,Ee).then(()=>{if(R&&"getBoundingClientRect"in this.draw_g.node()){let Ve=this.draw_g.node().getBoundingClientRect();if(this._palette_vertical){let Qe=this._pave_x+parseInt(Ve.width)-Math.round(.995*J)+3;Qe>0&&(this._pave_x-=Qe,this.draw_g.attr("transform",`translate(${this._pave_x},${this._pave_y})`),_.fX1NDC-=Qe/J,_.fX2NDC-=Qe/J)}else{let Qe=Math.round((1.05-M.gStyle.fTitleY)*ie)-Ve.y;Qe>0&&(this._pave_y+=Qe,this.draw_g.attr("transform",`translate(${this._pave_x},${this._pave_y})`),_.fY1NDC-=Qe/ie,_.fY2NDC-=Qe/ie)}}return this})}interactivePaletteAxis(p,w){let m=!1,_=0,F=0,R=null;const q=J=>{if(!m)return;J.preventDefault();let ie=(0,L.cx)(J,this.draw_g.node());this._palette_vertical?(F=Math.min(Math.max(ie[1],0),w),R.attr("y",Math.min(_,F)).attr("height",Math.abs(F-_))):(F=Math.min(Math.max(ie[0],0),p),R.attr("x",Math.min(_,F)).attr("width",Math.abs(F-_)))},T=J=>{if(!m)return;J.preventDefault(),(0,L.Ys)(window).on("mousemove.colzoomRect",null).on("mouseup.colzoomRect",null),R.remove(),R=null,m=!1;let ie=this.z_handle.gr,Me=ie.invert(_),de=ie.invert(F);this.getFramePainter().zoom("z",Math.min(Me,de),Math.max(Me,de))};M.settings.Zooming&&this.draw_g.selectAll(".axis_zoom").on("mousedown",J=>{if(m)return;m=!0,J.preventDefault(),J.stopPropagation();let ie=(0,L.cx)(J,this.draw_g.node());R=this.draw_g.append("svg:rect").attr("class","zoom").attr("id","colzoomRect"),this._palette_vertical?(_=F=ie[1],R.attr("x","0").attr("width",p).attr("y",_).attr("height",1)):(_=F=ie[0],R.attr("x",_).attr("width",1).attr("y",0).attr("height",w)),(0,L.Ys)(window).on("mousemove.colzoomRect",q).on("mouseup.colzoomRect",T,!0)}).on("dblclick",()=>this.getFramePainter().unzoom("z")),M.settings.ZoomWheel&&this.draw_g.on("wheel",J=>{let ie=(0,L.cx)(J,this.draw_g.node()),de=this.z_handle.analyzeWheelEvent(J,this._palette_vertical?1-ie[1]/w:ie[0]/p);de&&de.changed&&this.getFramePainter().zoom("z",de.min,de.max)})}fillContextMenu(p){let w=this.getObject();if(p.add("header: "+w._typename+"::"+w.fName),this.isStats()){let m=function(_,F){let R=_<10?w.fOptStat:w.fOptFit;R=parseInt(parseInt(R)/parseInt(Math.pow(10,_%10)))%10,p.addchk(R,F,100*R+_,function(q){let T=q%100<10?w.fOptStat:w.fOptFit,$=parseInt(q/100);T-=($>0?$:-1)*parseInt(Math.pow(10,q%10)),q%100<10?(w.fOptStat=T,this.interactiveRedraw(!0,`exec:SetOptStat(${T})`)):(w.fOptFit=T,this.interactiveRedraw(!0,`exec:SetOptFit(${T})`))})};p.add("Default position",function(){w.fX2NDC=M.gStyle.fStatX,w.fX1NDC=w.fX2NDC-M.gStyle.fStatW,w.fY2NDC=M.gStyle.fStatY,w.fY1NDC=w.fY2NDC-M.gStyle.fStatH,w.fInit=1,this.interactiveRedraw(!0,"pave_moved")}),p.add("Save to gStyle",()=>{M.gStyle.fStatX=w.fX2NDC,M.gStyle.fStatW=w.fX2NDC-w.fX1NDC,M.gStyle.fStatY=w.fY2NDC,M.gStyle.fStatH=w.fY2NDC-w.fY1NDC,this.fillatt&&this.fillatt.saveToStyle("fStatColor","fStatStyle"),M.gStyle.fStatTextColor=w.fTextColor,M.gStyle.fStatFontSize=w.fTextSize,M.gStyle.fStatFont=w.fTextFont},"Store stats position and graphical attributes to gStyle"),p.add("SetStatFormat",()=>{p.input("Enter StatFormat",w.fStatFormat).then(_=>{_&&(w.fStatFormat=_,this.interactiveRedraw(!0,`exec:SetStatFormat("${_}")`))})}),p.add("SetFitFormat",()=>{p.input("Enter FitFormat",w.fFitFormat).then(_=>{_&&(w.fFitFormat=_,this.interactiveRedraw(!0,`exec:SetFitFormat("${_}")`))})}),p.add("separator"),p.add("sub:SetOptStat",()=>{p.input("Enter OptStat",w.fOptStat,"int").then(_=>{w.fOptStat=_,this.interactiveRedraw(!0,`exec:SetOptStat(${_})`)})}),m(0,"Histogram name"),m(1,"Entries"),m(2,"Mean"),m(3,"Std Dev"),m(4,"Underflow"),m(5,"Overflow"),m(6,"Integral"),m(7,"Skewness"),m(8,"Kurtosis"),p.add("endsub:"),p.add("sub:SetOptFit",()=>{p.input("Enter OptStat",w.fOptFit,"int").then(_=>{w.fOptFit=_,this.interactiveRedraw(!0,`exec:SetOptFit(${_})`)})}),m(10,"Fit parameters"),m(11,"Par errors"),m(12,"Chi square / NDF"),m(13,"Probability"),p.add("endsub:"),p.add("separator")}else"title"===w.fName&&(p.add("Default position",function(){w.fX1NDC=M.gStyle.fTitleW>0?M.gStyle.fTitleX-M.gStyle.fTitleW/2:M.gStyle.fPadLeftMargin,w.fY1NDC=M.gStyle.fTitleY-Math.min(1.1*M.gStyle.fTitleFontSize,.06),w.fX2NDC=M.gStyle.fTitleW>0?M.gStyle.fTitleX+M.gStyle.fTitleW/2:1-M.gStyle.fPadRightMargin,w.fY2NDC=M.gStyle.fTitleY,w.fInit=1,this.interactiveRedraw(!0,"pave_moved")}),p.add("Save to gStyle",function(){M.gStyle.fTitleX=(w.fX2NDC+w.fX1NDC)/2,M.gStyle.fTitleY=w.fY2NDC,this.fillatt&&this.fillatt.saveToStyle("fTitleColor","fTitleStyle"),M.gStyle.fTitleTextColor=w.fTextColor,M.gStyle.fTitleFontSize=w.fTextSize,M.gStyle.fTitleFont=w.fTextFont},"Store title position and graphical attributes to gStyle"));return this.UseTextColor&&p.addTextAttributesMenu(this),p.addAttributesMenu(this),p.size()>0&&this.showInspector("check")&&p.add("Inspect",this.showInspector),p.size()>0}paveContextMenu(p){if(this.z_handle){let w=this.getFramePainter();(0,M.isFunc)(w?.showContextMenu)&&w.showContextMenu("z",p)}else p.stopPropagation(),p.preventDefault(),(0,He.Z)(p,this).then(w=>(this.fillContextMenu(w),this.fillObjectExecMenu(w,this.isTitle()?"title":void 0))).then(w=>w.show())}isStats(){return this.matchObjectType(M.clTPaveStats)}isTitle(){return this.matchObjectType(M.clTPaveText)&&"title"==this.getObject()?.fName}clearPave(){this.getObject().Clear()}addText(p){this.getObject().AddText(p)}fillFunctionStat(p,w){if(!w||!p)return!1;let m=w%10,_=Math.floor(w/10)%10,F=Math.floor(w/100)%10,R=Math.floor(w/1e3)%10;if(F>0&&this.addText("#chi^2 / ndf = "+this.format(p.fChisquare,"fit")+" / "+p.fNDF),R>0&&this.addText("Prob = "+this.format((0,ye.Prob)(p.fChisquare,p.fNDF))),m>0)for(let q=0;q<p.GetNumPars();++q){let T=p.GetParName(q),$=p.GetParValue(q),J=p.GetParError(q);$=void 0===$?"<not avail>":this.format(Number($),"fit"),void 0!==J&&(J=this.format(J,"last"),0===Number(J)&&0!=p.GetParError(q)&&(J=this.format(p.GetParError(q),"4.2g"))),this.addText(_>0&&J?`${T} = ${$} #pm ${J}`:`${T} = ${$}`)}return!0}isDummyPos(p){return!p||!(p.fInit||p.fX1||p.fX2||p.fY1||p.fY2||p.fX1NDC||p.fX2NDC||p.fY1NDC||p.fY2NDC)}updateObject(p){if(!this.matchObjectType(p))return!1;let w=this.getObject();switch(!w.modified_NDC&&!this.isDummyPos(p)&&(this.stored&&!p.fInit&&this.stored.fX1==p.fX1&&this.stored.fX2==p.fX2&&this.stored.fY1==p.fY1&&this.stored.fY2==p.fY2?(this.stored.fX1NDC!=p.fX1NDC&&(w.fX1NDC=p.fX1NDC),this.stored.fX2NDC!=p.fX2NDC&&(w.fX2NDC=p.fX2NDC),this.stored.fY1NDC!=p.fY1NDC&&(w.fY1NDC=p.fY1NDC),this.stored.fY2NDC!=p.fY2NDC&&(w.fY2NDC=p.fY2NDC)):(w.fInit=p.fInit,w.fX1=p.fX1,w.fX2=p.fX2,w.fY1=p.fY1,w.fY2=p.fY2,w.fX1NDC=p.fX1NDC,w.fX2NDC=p.fX2NDC,w.fY1NDC=p.fY1NDC,w.fY2NDC=p.fY2NDC),this.stored=Object.assign({},p)),w.fOption=p.fOption,w.fBorderSize=p.fBorderSize,p._typename){case M.clTPaveText:return w.fLines=(0,M.clone)(p.fLines),!0;case ue:return w.fLines=(0,M.clone)(p.fLines),w.fNpaves=p.fNpaves,!0;case X:return w.fLabel=p.fLabel,!0;case M.clTPaveStats:return w.fOptStat=p.fOptStat,w.fOptFit=p.fOptFit,!0;case M.clTLegend:let m=w.fPrimitives;if(w.fPrimitives=p.fPrimitives,w.fNColumns=p.fNColumns,m&&m.arr&&w.fPrimitives&&w.fPrimitives.arr&&m.arr.length==w.fPrimitives.arr.length)for(let _=0;_<m.arr.length;++_){let F=m.arr[_].fObject,R=w.fPrimitives.arr[_].fObject;F&&R&&F._typename==R._typename&&F.fName==R.fName&&(w.fPrimitives.arr[_].fObject=F)}return!0;case M.clTPaletteAxis:return w.fBorderSize=1,w.fShadowColor=0,!0}return!1}redraw(){var p=this;return(0,ze.Z)(function*(){return p.drawPave()})()}cleanup(){this.z_handle&&(this.z_handle.cleanup(),delete this.z_handle),super.cleanup()}static canDraw(p){let w=p?._typename;return w==M.clTPave||w==X||w==M.clTPaveStats||w==M.clTPaveText||w==ue||w==K||w==M.clTLegend||w==M.clTPaletteAxis}static draw(p,w,m){return(0,ze.Z)(function*(){let _=new Z(p,w);return(0,Y.ensureTCanvas)(_,!1).then(()=>{if("title"===w.fName&&w._typename===M.clTPaveText){let F=_.getPadPainter().findPainterFor(null,"title");if(F&&F!==_)F.removeFromPadPrimitives(),F.cleanup();else if("postitle"==m||_.isDummyPos(w)){let R=M.gStyle,q=_.getFramePainter();if(R&&q){let T=R.fTitleX,$=R.fTitleY,J=R.fTitleW,ie=R.fTitleH;ie||(ie=.7*($-q.fY2NDC)),J||(J=q.fX2NDC-q.fX1NDC),(!Number.isFinite(ie)||ie<=0)&&(ie=.06),(!Number.isFinite(J)||J<=0)&&(J=.44),w.fX1NDC=T-J/2,w.fY1NDC=$-ie,w.fX2NDC=T+J/2,w.fY2NDC=$,w.fInit=1}}}else w._typename===M.clTPaletteAxis&&(w.fBorderSize=1,w.fShadowColor=0,w.fAxis&&(w.fAxis.fChopt||(w.fAxis.fChopt="+"),w.fAxis.fNdiv||(w.fAxis.fNdiv=12),w.fAxis.fLabelOffset||(w.fAxis.fLabelOffset=.005)),_.z_handle=new Oe.z4(p,w.fAxis,!0),_.z_handle.setPadName(_.getPadName()),_.UseContextMenu=!0);switch(_.NoFillStats="nofillstats"==m,w._typename){case X:_.paveDrawFunc=_.drawPaveLabel;break;case M.clTPaveStats:_.paveDrawFunc=_.drawPaveStats,_.$secondary=!0;break;case M.clTPaveText:case ue:case K:_.paveDrawFunc=_.drawPaveText;break;case M.clTLegend:_.paveDrawFunc=_.drawLegend;break;case M.clTPaletteAxis:_.paveDrawFunc=_.drawPaletteAxis}return _.drawPave(m)})})()}}function O(x,p){return P.apply(this,arguments)}function P(){return(P=(0,ze.Z)(function*(x,p){let w=(0,je.SO)(x),m=w?w.getPadPainter():null,_=m?.getRootPad(!0);if(!_)return null;let F=(0,M.create)(M.clTLegend);for(let T=0;T<m.painters.length;++T){let $=m.painters[T],J=$.getObject();if(!J)continue;let ie=(0,M.create)(M.clTLegendEntry);ie.fObject=J,ie.fLabel="all"==p?J.fName:$.getItemName(),ie.fOption="",ie.fLabel&&($.lineatt?.used&&(ie.fOption+="l"),$.fillatt?.used&&(ie.fOption+="f"),$.markeratt?.used&&(ie.fOption+="m"),ie.fOption||(ie.fOption="l"),F.fPrimitives.Add(ie))}let q=F.fPrimitives.arr.length;return q?(q>8&&(q=8),q*=.1,F.fX1NDC=.4*_.fLeftMargin+.6*(1-_.fRightMargin),F.fY1NDC=(1-q)*(1-_.fTopMargin)+q*_.fBottomMargin,F.fX2NDC=.99-_.fRightMargin,F.fY2NDC=.99-_.fTopMargin,F.fFillStyle=1001,Z.draw(x,F)):null})).apply(this,arguments)}},7238:($r,At,Ce)=>{"use strict";Ce.d(At,{ME:()=>O,UR:()=>X,c5:()=>P,g_:()=>ue,me:()=>Z});var ze=Ce(9542),M=Ce(2253),L=Ce(9900),ye=Ce(1968),Be=Ce(48);function je(x,p,w,m){let _;if(p&&p.children)for(let T=0;T<p.children.length&&(_=p.children[T],!_.axis_draw);++T)_=void 0;if(!_)return;if(!x)return void p.remove(_);w=!!w,m=!!m;let F=1,R=x.position;R.x<0&&R.y>=0&&(F=2),R.x>=0&&R.y>=0&&(F=3),R.x>=0&&R.y<0&&(F=4);let q=(T,$)=>(T<=F&&(T+=4),T>F&&T<F+$);for(let T=0;T<_.children.length;++T){let $=_.children[T];if($.grid)$.visible=m&&q($.grid,3);else if($.zid)$.visible=q($.zid,2);else if($.xyid)$.visible=q($.xyid,3);else if($.xyboxid){let J=5,ie=0;m&&!w?(J=3,ie=-2):w&&!m?J=3:!w&&!m&&(J=$.bottom?3:0),$.visible=q($.xyboxid+ie,J),!$.visible&&$.bottom&&m&&($.visible=q($.xyboxid,3))}else if($.zboxid){let J=2,ie=0;w&&m?J=5:m&&!w?J=4:!m&&w&&(ie=-2,J=4),$.visible=q($.zboxid+ie,J)}}}function Ze(x,p){let w=x.getPadPainter().getRootPad(!0),m=Math.max(.75*x.size_x3d,x.size_z3d),_=Math.max(.75*x.size_y3d,x.size_z3d);if(p&&(m===_?x.camera.position.set(-1.6*m,-3.5*_,1.4*x.size_z3d):m>_?x.camera.position.set(-2*m,-3.5*_,1.4*x.size_z3d):x.camera.position.set(-3.5*m,-2*_,1.4*x.size_z3d)),w&&(p||!x.zoomChangedInteractive())&&Number.isFinite(w.fTheta)&&Number.isFinite(w.fPhi)&&(w.fTheta!==x.camera_Theta||w.fPhi!==x.camera_Phi)){x.camera_Phi=w.fPhi,x.camera_Theta=w.fTheta,m=3*Math.max(x.size_x3d,x.size_z3d),_=3*Math.max(x.size_y3d,x.size_z3d);let F=(270-w.fPhi)/180*Math.PI,R=(w.fTheta-10)/180*Math.PI;x.camera.position.set(m*Math.cos(F)*Math.cos(R),_*Math.sin(F)*Math.cos(R),x.size_z3d+.5*(m+_)*Math.sin(R)),p=!0}p&&x.camera.lookAt(x.lookat)}function Ie(x,p,w){if(-1===x){if(!this.mode3d)return;return this.clear3dCanvas?(je(null,this.toplevel),this.clear3dCanvas(),(0,ye.mF)(this.scene),this.control&&this.control.cleanup(),(0,ye.cM)(this.renderer),delete this.size_x3d,delete this.size_y3d,delete this.size_z3d,delete this.tooltip_mesh,delete this.scene,delete this.toplevel,delete this.camera,delete this.pointLight,delete this.renderer,delete this.control,this.render_tmout&&(clearTimeout(this.render_tmout),delete this.render_tmout),void(this.mode3d=!1)):void console.error(`Strange, why mode3d=${this.mode3d} is configured!!!!`)}if(this.mode3d=!0,"toplevel"in this){this.scene.remove(this.toplevel),(0,ye.mF)(this.toplevel),delete this.tooltip_mesh,delete this.toplevel,this.control&&this.control.HideTooltip();let _=new L.Tme;return this.scene.add(_),this.toplevel=_,this.resize3D(),Ze(this,!1),Promise.resolve(!0)}x=(0,ye.oc)(x),(0,ye.Sh)(this);let m=this.getSizeFor3d(void 0,x);return this.size_z3d=100,this.size_x3d=this.size_y3d=m.height>10&&m.width>10?Math.round(m.width/m.height*this.size_z3d):this.size_z3d,p&&(this.size_x3d*=p),w&&(this.size_y3d*=w),this.scene=new L.xsS,this.toplevel=new L.Tme,this.scene.add(this.toplevel),this.scene_width=m.width,this.scene_height=m.height,this.camera=new L.cPb(45,this.scene_width/this.scene_height,1,40*this.size_z3d),this.camera_Phi=30,this.camera_Theta=30,this.pointLight=new L.cek(16777215,1),this.camera.add(this.pointLight),this.pointLight.position.set(this.size_x3d/2,this.size_y3d/2,this.size_z3d/2),this.lookat=new L.Pa4(0,0,.8*this.size_z3d),this.camera.up=new L.Pa4(0,0,1),this.scene.add(this.camera),Ze(this,!0),(0,ye.iq)(this.scene_width,this.scene_height,x).then(_=>{if(this.renderer=_,this.webgl=x===ze.constants.Render3D.WebGL,this.add3dCanvas(m,this.renderer.jsroot_dom,this.webgl),this.first_render_tm=0,this.enable_highlight=!1,(0,ze.isBatchMode)()||!this.webgl)return this;this.control=(0,ye.JV)(this,this.camera,this.scene,this.renderer,this.lookat);let F=this,R=this.getMainPainter();return this.control.processMouseMove=function(q){let T=null,$=null,J=null;for(let ie=0;ie<q.length;++ie)if(q[ie].object.tooltip){if(T=q[ie].object.tooltip(q[ie]),T){$=q[ie].object;break}}else q[ie].object.zoom&&!J&&(J=q[ie].object);if(T&&!T.use_itself){let ie=1e-4*F.size_x3d,Me=1e-4*F.size_y3d,de=1e-4*F.size_z3d;(T.x1>T.x2||T.y1>T.y2||T.z1>T.z2)&&console.warn("check 3D hints coordinates"),T.x1-=ie,T.x2+=ie,T.y1-=Me,T.y2+=Me,T.z1-=de,T.z2+=de}if(F.highlightBin3D(T,$),!T&&J&&F.get3dZoomCoord){let ie=J.globalIntersect(this.raycaster),Me=J.zoom,de=F.get3dZoomCoord(ie,Me);return"z"===Me&&J.use_y_for_z&&(Me="y"),{name:Me,title:"axis object",line:Me+" : "+F.axisAsText(Me,de),only_status:!0}}return T?.lines?T:""},this.control.processMouseLeave=function(){F.highlightBin3D(null)},this.control.contextMenu=function(q,T){let $="painter",J=R;if(T)for(let Me=0;Me<T.length;++Me){let de=T[Me].object;if(de.zoom){$=de.zoom,J=null;break}if((0,ze.isFunc)(de.painter?.fillContextMenu)){J=de.painter;break}}let ie=R.getFramePainter();(0,ze.isFunc)(ie?.showContextMenu)&&ie.showContextMenu($,q,J)},this})}function He(x){if(-1111===x){let m=(0,ze.getDocument)(),_=(0,ye.$Y)(!1,0,m);if(_.setSize(this.scene_width,this.scene_height),_.render(this.scene,this.camera),_.makeOuterHTML){let F=m.createElement("div");return F.innerHTML=_.makeOuterHTML(),F.childNodes[0]}return _.domElement}if(void 0===x&&(x=5),x>0&&!this.usesvg&&!(0,ze.isBatchMode)())return void(this.render_tmout||(this.render_tmout=setTimeout(()=>this.render3D(0),x)));if(this.render_tmout&&(clearTimeout(this.render_tmout),delete this.render_tmout),!this.renderer)return;(0,ye.v2)(this.renderer);let p=new Date;this.opt3d||(this.opt3d={FrontBox:!0,BackBox:!0}),je(this.camera,this.toplevel,this.opt3d.FrontBox,this.opt3d.BackBox),this.renderer.render(this.scene,this.camera),(0,ye.wu)(this.renderer),0===this.first_render_tm&&(this.first_render_tm=(new Date).getTime()-p.getTime(),this.enable_highlight=this.first_render_tm<1200&&this.isTooltipAllowed(),console.log(`three.js r${L.UZH}, first render tm = ${this.first_render_tm}`))}function Oe(){let x=this.getSizeFor3d(this.access3dKind());return this.apply3dSize(x),!(this.scene_width===x.width&&this.scene_height===x.height||x.width<10||x.height<10||(this.scene_width=x.width,this.scene_height=x.height,this.camera.aspect=this.scene_width/this.scene_height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.scene_width,this.scene_height),this.renderer.setJSROOTSize&&this.renderer.setJSROOTSize(this.scene_width,this.scene_height),0))}function ce(x,p){let w=!1,m=null,_=!0,F=!x||void 0===x.x1||!this.enable_highlight,R=this.getMainPainter();if(R&&(!R.provideUserTooltip||!R.hasUserTooltip())&&(R=null),this.tooltip_selfmesh&&(_=this.tooltip_selfmesh!==p,this.tooltip_selfmesh.material.color=this.tooltip_selfmesh.save_color,delete this.tooltip_selfmesh,w=!0),this.tooltip_mesh&&(m=this.tooltip_mesh,this.toplevel.remove(this.tooltip_mesh),delete this.tooltip_mesh,w=!0),F)return w&&this.render3D(),void(w&&R&&R.provideUserTooltip(null));if(x.use_itself)p.save_color=p.material.color,p.material.color=new L.Ilk(x.color),this.tooltip_selfmesh=p,w=_;else{w=!0;const q=ye.XZ.Indexes,T=ye.XZ.Normals,$=ye.XZ.Vertices,J=new L.Ilk(x.color?x.color:16711680),ie=x.opacity||1;let Me,de;if(m)Me=m.geometry.attributes.position.array,m.geometry.attributes.position.needsUpdate=!0,m.material.color=J,m.material.opacity=ie;else{Me=new Float32Array(3*q.length),de=new Float32Array(3*q.length);const fe=new L.u9r;fe.setAttribute("position",new L.TlE(Me,3)),fe.setAttribute("normal",new L.TlE(de,3));const I=new L.vBJ({color:J,opacity:ie,vertexColors:!1});m=new L.Kj0(fe,I)}x.x1===x.x2&&console.warn(`same tip X ${x.x1} ${x.x2}`),x.y1===x.y2&&console.warn(`same tip Y ${x.y1} ${x.y2}`),x.z1===x.z2&&(x.z2=x.z1+1e-4);for(let fe=0,I=-3;fe<q.length;++fe){let U=$[q[fe]];Me[3*fe]=x.x1+U.x*(x.x2-x.x1),Me[3*fe+1]=x.y1+U.y*(x.y2-x.y1),Me[3*fe+2]=x.z1+U.z*(x.z2-x.z1),de&&(fe%6==0&&(I+=3),de[3*fe]=T[I],de[3*fe+1]=T[I+1],de[3*fe+2]=T[I+2])}this.tooltip_mesh=m,this.toplevel.add(m)}w&&this.render3D(),w&&(0,ze.isFunc)(x.$painter?.redrawProjection)&&x.$painter.redrawProjection(x.ix-1,x.ix,x.iy-1,x.iy),w&&R?.getObject()&&R.provideUserTooltip({obj:R.getObject(),name:R.getObject().fName,bin:x.bin,cont:x.value,binx:x.ix,biny:x.iy,binz:x.iz,grx:(x.x1+x.x2)/2,gry:(x.y1+x.y2)/2,grz:(x.z1+x.z2)/2})}function Y(x){this.opt3d=x}function K(x,p,w){w||(w={});let m=-this.size_x3d,_=this.size_x3d,F=-this.size_y3d,R=this.size_y3d,q=0,T=2*this.size_z3d,$=this.size_z3d,J=w.v7?null:this.getPadPainter().getRootPad(!0),ie=this.xmin,Me=this.xmax,de=this.ymin,fe=this.ymax,I=this.zmin,U=this.zmax,z=!1,le=!1;this.size_z3d||(m=this.xmin,_=this.xmax,F=this.ymin,R=this.ymax,q=this.zmin,T=this.zmax,$=T-q),"zoom_xmin"in this&&"zoom_xmax"in this&&this.zoom_xmin!==this.zoom_xmax&&(ie=this.zoom_xmin,Me=this.zoom_xmax),"zoom_ymin"in this&&"zoom_ymax"in this&&this.zoom_ymin!==this.zoom_ymax&&(de=this.zoom_ymin,fe=this.zoom_ymax,z=!0),"zoom_zmin"in this&&"zoom_zmax"in this&&this.zoom_zmin!==this.zoom_zmax&&(I=this.zoom_zmin,U=this.zoom_zmax,le=!0),w.use_y_for_z&&(this.zmin=this.ymin,this.zmax=this.ymax,I=de,U=fe,le=z,de=0,fe=1),this.lego_zmin=I,this.lego_zmax=U,void 0!==w.zmult&&!le&&(U*=w.zmult),this.x_handle=new p(null,this.xaxis),w.v7&&(this.x_handle.setPadName(this.getPadName()),this.x_handle.snapid=this.snapid),this.x_handle.configureAxis("xaxis",this.xmin,this.xmax,ie,Me,!1,[m,_],{log:J?J.fLogx:0}),this.x_handle.assignFrameMembers(this,"x"),this.x_handle.extractDrawAttributes($),this.y_handle=new p(null,this.yaxis),w.v7&&(this.y_handle.setPadName(this.getPadName()),this.y_handle.snapid=this.snapid),this.y_handle.configureAxis("yaxis",this.ymin,this.ymax,de,fe,!1,[F,R],{log:J&&!w.use_y_for_z?J.fLogy:0}),this.y_handle.assignFrameMembers(this,"y"),this.y_handle.extractDrawAttributes($),this.z_handle=new p(null,this.zaxis),w.v7&&(this.z_handle.setPadName(this.getPadName()),this.z_handle.snapid=this.snapid),this.z_handle.configureAxis("zaxis",this.zmin,this.zmax,I,U,!1,[q,T],{log:J?J.fLogz:0}),this.z_handle.assignFrameMembers(this,"z"),this.z_handle.extractDrawAttributes($),this.setRootPadRange(J,!0);let D={},oe={},_e=1,Ee=this.x_handle.createTicks(!1,!0),Ve=this.y_handle.createTicks(!1,!0),Qe=this.z_handle.createTicks(!1,!0);function et(qt,Qt){let _n="ticks"==Qt?qt.ticksColor:qt.lineatt.color,dn="ticks"==Qt?qt.ticksWidth:qt.lineatt.width;_n||(_n="black");let ci=`${_n}_${dn}`;return oe[ci]||(oe[ci]=new L.nls({color:_n,linewidth:dn,vertexColors:!1})),oe[ci]}function Tt(qt,Qt){let _n="title"==Qt?qt.titleFont?.color:qt.labelsFont?.color;return _n||(_n="black"),D[_n]||(D[_n]=new L.vBJ({color:_n,vertexColors:!1})),D[_n]}let Bt=new L.Tme;Bt.axis_draw=!0,x.add(Bt);let ve=[],Je=[],ct=0;for(;Ee.next();){let qt=Ee.grpos,Qt=1===Ee.kind,_n=this.x_handle.format(Ee.tick,2);if(Ee.last_major()?this.x_handle.fTitle||(_n="x"):null===_n&&(Qt=!1,_n=""),Qt&&_n&&w.draw){let dn=new L.MP$(_n,{font:ye.sU,size:this.x_handle.labelsFont.size,height:0,curveSegments:5});dn.computeBoundingBox();let ci=dn.boundingBox.max.x-dn.boundingBox.min.x,ir=dn.boundingBox.max.y-dn.boundingBox.min.y;dn.center=!0,dn.offsety=this.x_handle.labelsOffset+.005*(R-F),ct=Math.max(ct,ir),dn.grx=qt,Je.push(dn);let Vi=0;Ee.last_major()||(Vi=Ee.next_major_grpos()-qt,ci>0&&(_e=Math.min(_e,.9*Vi/ci))),this.x_handle.isCenteredLabels()&&(Vi||(Vi=Math.min(qt-m,_-qt)),dn.grx+=Vi/2)}ve.push(qt,0,0,qt,this.x_handle.ticksSize*(Qt?-1:-.6),0)}if(this.x_handle.fTitle&&w.draw){const qt=new L.MP$((0,Be.RO)(this.x_handle.fTitle),{font:ye.sU,size:this.x_handle.titleFont.size,height:0,curveSegments:5});qt.computeBoundingBox(),qt.center=this.x_handle.titleCenter,qt.opposite=this.x_handle.titleOpposite,qt.offsety=1.6*this.x_handle.titleOffset+.005*(R-F),qt.grx=(m+_)/2,qt.kind="title",Je.push(qt)}this.get3dZoomCoord=function(qt,Qt){let _n=qt[Qt],dn=this[`scale_${Qt}min`],ci=this[`scale_${Qt}max`];switch(Qt){case"x":_n=(_n+this.size_x3d)/2/this.size_x3d;break;case"y":_n=(_n+this.size_y3d)/2/this.size_y3d;break;case"z":_n=_n/2/this.size_z3d}return _n=this["log"+Qt]?Math.exp(Math.log(dn)+_n*(Math.log(ci)-Math.log(dn))):dn+_n*(ci-dn),_n};const We=(qt,Qt,_n)=>{let dn,ci=new L.u9r,ir=Math.max(this[qt+"_handle"].ticksSize,.005*Qt);dn="z"===qt?new Float32Array([0,0,0,4*ir,0,2*Qt,4*ir,0,0,0,0,0,0,0,2*Qt,4*ir,0,2*Qt]):new Float32Array([-Qt,0,0,Qt,4*-ir,0,Qt,0,0,-Qt,0,0,-Qt,4*-ir,0,Qt,4*-ir,0]),ci.setAttribute("position",new L.TlE(dn,3)),ci.computeVertexNormals();let Vi=new L.vBJ({transparent:!0,vertexColors:!1,side:L.ehD,opacity:0}),br=new L.Kj0(ci,Vi);return br.zoom=qt,br.size_3d=Qt,br.tsz=ir,br.use_y_for_z=_n,"y"==qt&&br.rotateZ(Math.PI/2).rotateX(Math.PI),br.v1=new L.Pa4(dn[0],dn[1],dn[2]),br.v2=new L.Pa4(dn[6],dn[7],dn[8]),br.v3=new L.Pa4(dn[3],dn[4],dn[5]),br.globalIntersect=function(Ur){if(!this.v1||!this.v2||!this.v3)return;let Ar=new L.JOQ;Ar.setFromCoplanarPoints(this.v1,this.v2,this.v3),Ar.applyMatrix4(this.matrixWorld);let cs=Ur.ray.origin.clone(),Rs=cs.clone().addScaledVector(Ur.ray.direction,1e10),es=Ar.intersectLine(new L.Zzh(cs,Rs),new L.Pa4);if(!es)return;let ho=-this.size_3d,ro=this.size_3d;return"z"===this.zoom&&(ho=0,ro=2*this.size_3d),es[this.zoom]<ho?es[this.zoom]=ho:es[this.zoom]>ro&&(es[this.zoom]=ro),es},br.showSelection=function(Ur,Ar){let Rs,cs=this.children?this.children[0]:null,es=this.zoom;if(!Ur||!Ar)return cs&&(this.remove(cs),(0,ye.mF)(cs)),cs;if(!this.geometry)return!1;if(cs)Rs=cs.geometry;else{Rs=this.geometry.clone();let ro=Rs.getAttribute("position").array;"z"==es?ro[6]=ro[3]=ro[15]=this.tsz:ro[4]=ro[16]=ro[13]=-this.tsz,cs=new L.Kj0(Rs,new L.vBJ({color:65280,side:L.ehD,vertexColors:!1})),this.add(cs)}let ho=Rs.getAttribute("position").array;return"z"==es?(ho[2]=ho[11]=ho[8]=Ur[es],ho[5]=ho[17]=ho[14]=Ar[es]):(ho[0]=ho[9]=ho[12]=Ur[es],ho[6]=ho[3]=ho[15]=Ar[es]),Rs.getAttribute("position").needsUpdate=!0,!0},br};let ft,Ke=new L.Tme;for(Ke.position.set(0,F,q),Ke.rotation.x=1/4*Math.PI,Ke.xyid=2,w.draw&&(ft=(0,ye.Qy)(ve,et(this.x_handle,"ticks")),Ke.add(ft)),Je.forEach(qt=>{let Qt=qt.boundingBox.max.x-qt.boundingBox.min.x,_n=qt.center?qt.grx-Qt/2:qt.opposite?m:_-Qt,dn=new L.yGw;dn.set(_e,0,0,_n,0,_e,0,-ct*_e-this.x_handle.ticksSize-qt.offsety,0,0,1,0,0,0,0,1);let ci=new L.Kj0(qt,Tt(this.x_handle,qt.kind));ci.applyMatrix4(dn),Ke.add(ci)}),w.zoom&&Ke.add(We("x",this.size_x3d)),Bt.add(Ke),Ke=new L.Tme,Ke.position.set(0,R,q),Ke.rotation.x=3/4*Math.PI,w.draw&&Ke.add(new L.ejS(ft.geometry,ft.material)),Je.forEach(qt=>{let Qt=qt.boundingBox.max.x-qt.boundingBox.min.x,_n=qt.center?qt.grx+Qt/2:qt.opposite?m+Qt:_,dn=new L.yGw;dn.set(-_e,0,0,_n,0,_e,0,-ct*_e-this.x_handle.ticksSize-qt.offsety,0,0,-1,0,0,0,0,1);let ci=new L.Kj0(qt,Tt(this.x_handle,qt.kind));ci.applyMatrix4(dn),Ke.add(ci)}),Ke.xyid=4,w.zoom&&Ke.add(We("x",this.size_x3d)),Bt.add(Ke),Je=[],_e=1,ct=0,ve=[];Ve.next();){let qt=Ve.grpos,Qt=1===Ve.kind,_n=this.y_handle.format(Ve.tick,2);if(Ve.last_major()?this.y_handle.fTitle||(_n="y"):null===_n&&(Qt=!1,_n=""),Qt&&_n&&w.draw){const dn=new L.MP$(_n,{font:ye.sU,size:this.y_handle.labelsFont.size,height:0,curveSegments:5});dn.computeBoundingBox();let ci=dn.boundingBox.max.x-dn.boundingBox.min.x,ir=dn.boundingBox.max.y-dn.boundingBox.min.y;dn.center=!0,ct=Math.max(ct,ir),dn.gry=qt,dn.offsetx=this.y_handle.labelsOffset+.005*(_-m),Je.push(dn);let Vi=0;Ve.last_major()||(Vi=Ve.next_major_grpos()-qt,ci>0&&(_e=Math.min(_e,.9*Vi/ci))),this.y_handle.isCenteredLabels()&&(Vi||(Vi=Math.min(qt-F,R-qt)),dn.gry+=Vi/2)}ve.push(0,qt,0,this.y_handle.ticksSize*(Qt?-1:-.6),qt,0)}if(this.y_handle.fTitle&&w.draw){const qt=new L.MP$((0,Be.RO)(this.y_handle.fTitle),{font:ye.sU,size:this.y_handle.titleFont.size,height:0,curveSegments:5});qt.computeBoundingBox(),qt.center=this.y_handle.titleCenter,qt.opposite=this.y_handle.titleOpposite,qt.offsetx=1.6*this.y_handle.titleOffset+.005*(_-m),qt.gry=(F+R)/2,qt.kind="title",Je.push(qt)}if(!w.use_y_for_z){let qt,Qt=new L.Tme;Qt.position.set(m,0,q),Qt.rotation.y=-1/4*Math.PI,w.draw&&(qt=(0,ye.Qy)(ve,et(this.y_handle,"ticks")),Qt.add(qt)),Je.forEach(_n=>{let dn=_n.boundingBox.max.x-_n.boundingBox.min.x,ci=_n.center?_n.gry+dn/2:_n.opposite?F+dn:R,ir=new L.yGw;ir.set(0,_e,0,-ct*_e-this.y_handle.ticksSize-_n.offsetx,-_e,0,0,ci,0,0,1,0,0,0,0,1);let Vi=new L.Kj0(_n,Tt(this.y_handle,_n.kind));Vi.applyMatrix4(ir),Qt.add(Vi)}),Qt.xyid=3,w.zoom&&Qt.add(We("y",this.size_y3d)),Bt.add(Qt),Qt=new L.Tme,Qt.position.set(_,0,q),Qt.rotation.y=-3/4*Math.PI,w.draw&&Qt.add(new L.ejS(qt.geometry,qt.material)),Je.forEach(_n=>{let dn=_n.boundingBox.max.x-_n.boundingBox.min.x,ci=_n.center?_n.gry-dn/2:_n.opposite?F:R-dn,ir=new L.yGw;ir.set(0,_e,0,-ct*_e-this.y_handle.ticksSize-_n.offsetx,_e,0,0,ci,0,0,-1,0,0,0,0,1);let Vi=new L.Kj0(_n,Tt(this.y_handle,_n.kind));Vi.applyMatrix4(ir),Qt.add(Vi)}),Qt.xyid=1,w.zoom&&Qt.add(We("y",this.size_y3d)),Bt.add(Qt)}Je=[],_e=1,ve=[];let zt=null,Zt=null,Mt=null,Ot=0;for(this.size_z3d&&(zt=[],Zt=[]);Qe.next();){let qt=Qe.grpos,Qt=1==Qe.kind,_n=this.z_handle.format(Qe.tick,2);if(null===_n&&(Qt=!1,_n=""),Qt&&_n&&w.draw){let dn=new L.MP$(_n,{font:ye.sU,size:this.z_handle.labelsFont.size,height:0,curveSegments:5});dn.computeBoundingBox();let ci=dn.boundingBox.max.x-dn.boundingBox.min.x,ir=dn.boundingBox.max.y-dn.boundingBox.min.y;dn.translate(-ci,-ir/2,0),dn.grz=qt,Je.push(dn),null!==Mt&&ir>0&&(_e=Math.min(_e,.9*(qt-Mt)/ir)),Ot=Math.max(Ot,ci),Mt=qt}zt&&Qt&&zt.push(m,0,qt,_,0,qt),Zt&&Qt&&Zt.push(0,F,qt,0,R,qt),ve.push(0,0,qt,this.z_handle.ticksSize*(Qt?1:.6),0,qt)}if(zt&&zt.length>0){const qt=new L.FT0({color:this.x_handle.ticksColor,dashSize:2,gapSize:2}),Qt=(0,ye.Qy)(zt,qt);Qt.position.set(0,R,0),Qt.grid=2,Qt.visible=!1,Bt.add(Qt);const _n=new L.ejS(Qt.geometry,qt);_n.position.set(0,F,0),_n.grid=4,_n.visible=!1,Bt.add(_n)}if(Zt&&Zt.length>0){const qt=new L.FT0({color:this.y_handle.ticksColor,dashSize:2,gapSize:2}),Qt=(0,ye.Qy)(Zt,qt);Qt.position.set(_,0,0),Qt.grid=3,Qt.visible=!1,Bt.add(Qt);const _n=new L.ejS(Qt.geometry,qt);_n.position.set(m,0,0),_n.grid=1,_n.visible=!1,Bt.add(_n)}let sn=[],wn=w.draw?(0,ye.Qy)(ve,et(this.z_handle,"ticks")):null;for(let qt=0;qt<4;++qt){if(sn.push(new L.Tme),Je.forEach((Qt,_n)=>{let dn=new L.yGw,ci=Qt.grz;this.z_handle.isCenteredLabels()&&(_n<Je.length-1?ci=(ci+Je[_n+1].grz)/2:_n>0&&(ci=Math.min(1.5*ci-.5*Je[_n-1].grz,T))),dn.set(-_e,0,0,this.z_handle.ticksSize+.005*(_-m)+this.z_handle.labelsOffset,0,0,1,0,0,_e,0,ci);let ir=new L.Kj0(Qt,Tt(this.z_handle));ir.applyMatrix4(dn),sn[qt].add(ir)}),this.z_handle.fTitle&&w.draw){let Qt=new L.MP$((0,Be.RO)(this.z_handle.fTitle),{font:ye.sU,size:this.z_handle.titleFont.size,height:0,curveSegments:5});Qt.computeBoundingBox();let _n=Qt.boundingBox.max.x-Qt.boundingBox.min.x,dn=this.z_handle.titleCenter?(T+q-_n)/2:this.z_handle.titleOpposite?q:T-_n;Qt.rotateZ(Math.PI/2);let ci=new L.yGw;ci.set(-_e,0,0,this.z_handle.ticksSize+.005*(_-m)+Ot+this.z_handle.titleOffset,0,0,1,0,0,_e,0,dn);let ir=new L.Kj0(Qt,Tt(this.z_handle,"title"));ir.applyMatrix4(ci),sn[qt].add(ir)}w.draw&&wn&&sn[qt].add(0==qt?wn:new L.ejS(wn.geometry,wn.material)),w.zoom&&sn[qt].add(We("z",this.size_z3d,w.use_y_for_z)),sn[qt].zid=qt+2,Bt.add(sn[qt])}sn[0].position.set(m,R,0),sn[0].rotation.z=3/4*Math.PI,sn[1].position.set(_,R,0),sn[1].rotation.z=1/4*Math.PI,sn[2].position.set(_,F,0),sn[2].rotation.z=-1/4*Math.PI,sn[3].position.set(m,F,0),sn[3].rotation.z=-3/4*Math.PI;let Ln=et(this.x_handle),En=(0,ye.Qy)([m,0,0,_,0,0],Ln,null,!0);for(let qt=0;qt<2;++qt){let Qt=new L.ejS(En,Ln);Qt.position.set(0,F,0==qt?q:T),Qt.xyboxid=2,Qt.bottom=0==qt,Bt.add(Qt),Qt=new L.ejS(En,Ln),Qt.position.set(0,R,0==qt?q:T),Qt.xyboxid=4,Qt.bottom=0==qt,Bt.add(Qt)}let $n=et(this.y_handle),vn=(0,ye.Qy)([0,F,0,0,R,0],$n,null,!0);for(let qt=0;qt<2;++qt){let Qt=new L.ejS(vn,$n);Qt.position.set(m,0,0==qt?q:T),Qt.xyboxid=3,Qt.bottom=0==qt,Bt.add(Qt),Qt=new L.ejS(vn,$n),Qt.position.set(_,0,0==qt?q:T),Qt.xyboxid=1,Qt.bottom=0==qt,Bt.add(Qt)}let rn=et(this.z_handle),Gt=(0,ye.Qy)([0,0,q,0,0,T],rn,null,!0);for(let qt=0;qt<4;++qt){let Qt=new L.ejS(Gt,rn);Qt.zboxid=sn[qt].zid,Qt.position.copy(sn[qt].position),Bt.add(Qt)}}function ue(x){Object.assign(x,{create3DScene:Ie,render3D:He,resize3D:Oe,highlightBin3D:ce,set3DOptions:Y,drawXYZ:K})}function X(x,p=!1){if(!x.draw_content)return;const w=ye.XZ.Vertices,m=ye.XZ.Indexes,_=ye.XZ.Normals,F=ye.XZ.Segments,R=[0,1,1,2,2,3,3,0],q=[new L.Pa4(0,0,0),new L.Pa4(0,1,0),new L.Pa4(1,1,0),new L.Pa4(1,0,0)],T=x.getFramePainter(),$=x.prepareDraw({rounding:!1,use3d:!0,extra:1}),J=$.i1,ie=$.i2,Me=$.j1,de=$.j2,fe=x.getHisto(),I=fe?fe.$baseh:null,U=11===x.options.Lego||13===x.options.Lego,z=fe.getBin(ie,de)<65535;if(J>=ie||Me>=de)return;let le,D,oe,_e,Ee,Ve,Qe,et,Tt,Bt,ve,Je,ct,We,Ke,ft=T.z_handle.getScaleMin(),zt=T.z_handle.getScaleMax();const Zt=(Vi,br,Ur)=>(Je=fe.getBinContent(Vi+1,br+1),ve=I?I.getBinContent(Vi+1,br+1):!1!==x.options.BaseLine?x.options.BaseLine:x.options.Zero?ft:0,Je<ve&&([ve,Je]=[Je,ve]),!(ve>=D||Je<le)&&(ct=Je===le||ve>=Je,!ct||Ur>0||!I&&(!!(x.options.Zero||ft>0)||x._show_empty_bins)));let Mt=[ft,zt],Ot=null;(12===x.options.Lego||14===x.options.Lego)&&(p?(Ot=T.getHistPalette(),x.createContour(T,Ot,{full_z_range:!0}),Mt=Ot.getContour(),ft=Mt[0],zt=Mt[Mt.length-1]):(Mt=x.createContour(fe.fContour?fe.fContour.length:20,T.lego_zmin,T.lego_zmax).arr,Ot=x.getHistPalette()));for(let Vi=0;Vi<Mt.length-1;++Vi){le=Mt[Vi],D=Mt[Vi+1],Ot&&Vi==Mt.length-2&&D<zt&&(D=zt);let br=0,Ur=0,Ar=0,cs=0,Rs=T.grz(le),es=T.grz(D);for(oe=J;oe<ie;++oe)for(_e=Me;_e<de;++_e)Zt(oe,_e,Vi)&&(We=!ct&&Vi>0,Ke=!ct&&Je>D&&Vi<Mt.length-2,Ar+=ct?12:m.length,We&&(Ar-=6),Ke&&(Ar-=6),U&&!ct&&(Ar-=12,cs+=12));const ho=new Float32Array(3*Ar),ro=new Float32Array(3*Ar),ws=z?new Uint16Array(Ar/3):new Uint32Array(Ar/3),Es=0===cs?null:new Float32Array(3*cs),Yo=0===cs?null:new Float32Array(3*cs),kl=0===cs?null:z?new Uint16Array(cs/3):new Uint32Array(cs/3);let al,xr,_o,fo=0,eo=0;for(oe=J;oe<ie;++oe)for(Qe=$.grx[oe]+$.xbar1*($.grx[oe+1]-$.grx[oe]),et=$.grx[oe]+$.xbar2*($.grx[oe+1]-$.grx[oe]),_e=Me;_e<de;++_e){if(!Zt(oe,_e,Vi))continue;We=!ct&&Vi>0,Ke=!ct&&Je>D&&Vi<Mt.length-2,Tt=$.gry[_e]+$.ybar1*($.gry[_e+1]-$.gry[_e]),Bt=$.gry[_e]+$.ybar2*($.gry[_e+1]-$.gry[_e]),br=ve<=le?Rs:T.grz(ve),Ur=Je>D?es:T.grz(Je),_o=0,xr=0,ct&&(_o+=12,xr+=24);let Ta=m.length,uc=fe.getBin(oe+1,_e+1);for(We&&(Ta-=6);xr<Ta;)al=w[m[xr]],U&&xr<12?(Es[eo]=Qe+al.x*(et-Qe),Es[eo+1]=Tt+al.y*(Bt-Tt),Es[eo+2]=br+al.z*(Ur-br),Yo[eo]=_[_o],Yo[eo+1]=_[_o+1],Yo[eo+2]=_[_o+2],eo%9==0&&(kl[eo/9]=uc),eo+=3):(ho[fo]=Qe+al.x*(et-Qe),ho[fo+1]=Tt+al.y*(Bt-Tt),ho[fo+2]=br+al.z*(Ur-br),ro[fo]=_[_o],ro[fo+1]=_[_o+1],ro[fo+2]=_[_o+2],fo%9==0&&(ws[fo/9]=uc),fo+=3),++xr,xr%6==0&&(_o+=3,Ke&&xr===m.length-12&&(xr+=6,_o+=3))}let el=new L.u9r;el.setAttribute("position",new L.TlE(ho,3)),el.setAttribute("normal",new L.TlE(ro,3));let lo=p?3:fe.fFillColor,Yi=x.getColor(lo);Ot?Yi=p?Ot.getColor(Vi):Ot.calcColor(Vi,Mt.length):(1===x.options.Lego||lo<2)&&(lo=1,Yi="white");let ga=new L.vBJ({color:Yi,vertexColors:!1}),xa=new L.Kj0(el,ga);if(xa.face_to_bins_index=ws,xa.painter=x,xa.zmin=ft,xa.zmax=zt,xa.baseline=!1!==x.options.BaseLine?x.options.BaseLine:x.options.Zero?ft:0,xa.tip_color=3===lo?16711680:65280,xa.handle=$,xa.tooltip=function(Ta){if(!Number.isInteger(Ta.faceIndex))return console.error(`faceIndex not provided, three.js version ${L.UZH}`),null;if(Ta.faceIndex<0||Ta.faceIndex>=this.face_to_bins_index.length)return null;const uc=this.painter,st=this.handle,Ae=uc.getFramePainter(),rt=uc.getHisto(),ot=uc.get3DToolTip(this.face_to_bins_index[Ta.faceIndex]);ot.x1=Math.max(-Ae.size_x3d,st.grx[ot.ix-1]+st.xbar1*(st.grx[ot.ix]-st.grx[ot.ix-1])),ot.x2=Math.min(Ae.size_x3d,st.grx[ot.ix-1]+st.xbar2*(st.grx[ot.ix]-st.grx[ot.ix-1])),ot.y1=Math.max(-Ae.size_y3d,st.gry[ot.iy-1]+st.ybar1*(st.gry[ot.iy]-st.gry[ot.iy-1])),ot.y2=Math.min(Ae.size_y3d,st.gry[ot.iy-1]+st.ybar2*(st.gry[ot.iy]-st.gry[ot.iy-1]));let wt=this.baseline,fn=ot.value;if(rt.$baseh&&(wt=rt.$baseh.getBinContent(ot.ix,ot.iy)),fn<wt){let pn=wt;wt=fn,fn=pn}return ot.z1=Ae.grz(Math.max(this.zmin,wt)),ot.z2=Ae.grz(Math.min(this.zmax,fn)),ot.color=this.tip_color,uc.is_projection&&2==uc.getDimension()&&(ot.$painter=uc),ot},T.toplevel.add(xa),cs>0){const Ta=new L.u9r;Ta.setAttribute("position",new L.TlE(Es,3)),Ta.setAttribute("normal",new L.TlE(Yo,3));const uc=new L.Ilk(lo<2?16711680:(0,M.B8)(Yi).darker(.5).toString()),st=new L.vBJ({color:uc,vertexColors:!1}),Ae=new L.Kj0(Ta,st);Ae.face_to_bins_index=kl,Ae.painter=x,Ae.handle=xa.handle,Ae.tooltip=xa.tooltip,Ae.zmin=xa.zmin,Ae.zmax=xa.zmax,Ae.baseline=xa.baseline,Ae.tip_color=xa.tip_color,T.toplevel.add(Ae)}}if(x.options.Lego>12)return;let sn=0,wn=0;for(D=zt,le=ft,oe=J;oe<ie;++oe)for(_e=Me;_e<de;++_e)Zt(oe,_e,0)&&(sn+=ct?q.length:w.length,wn+=ct?R.length:F.length);const Ln=sn<=65520;Ln||(sn=3*wn);const En=new Float32Array(3*sn),$n=Ln?new Uint16Array(wn):null,vn=T.grz(ft),rn=T.grz(zt);let Gt=0,qt=0,Qt=0,_n=0;for(oe=J;oe<ie;++oe)for(Qe=$.grx[oe]+$.xbar1*($.grx[oe+1]-$.grx[oe]),et=$.grx[oe]+$.xbar2*($.grx[oe+1]-$.grx[oe]),_e=Me;_e<de;++_e){if(!Zt(oe,_e,0))continue;Tt=$.gry[_e]+$.ybar1*($.gry[_e+1]-$.gry[_e]),Bt=$.gry[_e]+$.ybar2*($.gry[_e+1]-$.gry[_e]),Gt=ve<=ft?vn:T.grz(ve),qt=Je>zt?rn:T.grz(Je);const Vi=ct?R:F,br=ct?q:w;if(Ln){for(Ee=0;Ee<Vi.length;++Ee)$n[_n++]=Qt/3+Vi[Ee];for(Ee=0;Ee<br.length;++Ee)Ve=br[Ee],En[Qt]=Qe+Ve.x*(et-Qe),En[Qt+1]=Tt+Ve.y*(Bt-Tt),En[Qt+2]=Gt+Ve.z*(qt-Gt),Qt+=3}else for(Ee=0;Ee<Vi.length;++Ee)Ve=br[Vi[Ee]],En[Qt]=Qe+Ve.x*(et-Qe),En[Qt+1]=Tt+Ve.y*(Bt-Tt),En[Qt+2]=Gt+Ve.z*(qt-Gt),Qt+=3}const dn=p?x.v7EvalColor("line_color","lightblue"):x.getColor(fe.fLineColor),ci=new L.nls({color:new L.Ilk(dn),linewidth:p?x.v7EvalAttr("line_width",1):fe.fLineWidth}),ir=(0,ye.Qy)(En,ci,Ln?$n:null);T.toplevel.add(ir)}function Z(x,p=!1){const w=x.getFramePainter(),m=x.getHisto(),_=x.prepareDraw({rounding:!1,use3d:!0,extra:1}),F=w.z_handle.getScaleMin(),R=w.z_handle.getScaleMax();let q,T,$,J,ie,Me,de,fe,I,U,z,le=0,D=null,oe=null,_e=0;for(let Tt=0;Tt<2;++Tt){for(q=_.i1;q<_.i2;++q)for(Me=_.grx[q],fe=_.grx[q+1],T=_.j1;T<_.j2;++T)if(J=m.getBinContent(q+1,T+1),!(J<F||J>R)&&(J!==F||x.options.Zero||F>0||x._show_empty_bins)){if(0===Tt){le+=3;continue}$=m.getBin(q+1,T+1),ie=m.getBinError($),oe[_e/18]=$,de=_.gry[T],I=_.gry[T+1],U=w.grz(J-ie<F?F:J-ie),z=w.grz(J+ie>R?R:J+ie),D[_e]=Me,D[_e+3]=fe,D[_e+1]=D[_e+4]=(de+I)/2,D[_e+2]=D[_e+5]=(U+z)/2,_e+=6,D[_e]=D[_e+3]=(Me+fe)/2,D[_e+1]=de,D[_e+4]=I,D[_e+2]=D[_e+5]=(U+z)/2,_e+=6,D[_e]=D[_e+3]=(Me+fe)/2,D[_e+1]=D[_e+4]=(de+I)/2,D[_e+2]=U,D[_e+5]=z,_e+=6}if(0===Tt){if(0===le)return;D=new Float32Array(6*le),oe=new Int32Array(le/3)}}const Ve=p?x.v7EvalColor("line_color","lightblue"):x.getColor(m.fLineColor),Qe=new L.nls({color:new L.Ilk(Ve),linewidth:p?x.v7EvalAttr("line_width",1):m.fLineWidth}),et=(0,ye.Qy)(D,Qe);et.painter=x,et.intersect_index=oe,et.zmin=F,et.zmax=R,et.tip_color=3===m.fLineColor?16711680:65280,et.tooltip=function(Tt){if(!Number.isInteger(Tt.index))return console.error(`segment index not provided, three.js version ${L.UZH}`),null;let Bt=Math.floor(Tt.index/6);if(Bt<0||Bt>=this.intersect_index.length)return null;let ve=this.painter,Je=ve.getHisto(),ct=ve.getFramePainter(),We=ve.get3DToolTip(this.intersect_index[Bt]);return We.x1=Math.max(-ct.size_x3d,ct.grx(Je.fXaxis.GetBinLowEdge(We.ix))),We.x2=Math.min(ct.size_x3d,ct.grx(Je.fXaxis.GetBinLowEdge(We.ix+1))),We.y1=Math.max(-ct.size_y3d,ct.gry(Je.fYaxis.GetBinLowEdge(We.iy))),We.y2=Math.min(ct.size_y3d,ct.gry(Je.fYaxis.GetBinLowEdge(We.iy+1))),We.z1=ct.grz(We.value-We.error<this.zmin?this.zmin:We.value-We.error),We.z2=ct.grz(We.value+We.error>this.zmax?this.zmax:We.value+We.error),We.color=this.tip_color,We},w.toplevel.add(et)}function O(x,p=!1,w=!1){let m=x.getFramePainter(),_=x.prepareDraw({rounding:!1,use3d:!0,extra:100,middle:0}),F=x.getHisto(),R=x.getContourLevels(),q=x.getHistPalette(),T=2*m.size_z3d,$=[];x.buildContour(_,R,q,(ie,Me,de,fe,I,U)=>{if(!(I-fe<3||p&&(T=m.grz(R[U]),T<0||T>2*m.size_z3d)))for(let z=fe;z<I;++z)$.push(Me[z],de[z],T),$.push(Me[z+1],de[z+1],T)});let J=(0,ye.Qy)($,(0,ye.rq)(x,w?"line_":F));m.toplevel.add(J)}function P(x,p=!1){let F,R,q,T,$,J,ie,Me,de,fe,w=x.getHisto(),m=x.getFramePainter(),_=x.prepareDraw({rounding:!1,use3d:!0,extra:1,middle:.5}),I=m.z_handle.getScaleMin(),U=m.logz?Gt=>Gt<I?-.1:m.grz(Gt):m.grz;if(_.i2-_.i1<2||_.j2-_.j1<2)return;let z=null,le=null,D=!0,oe=!1,_e=!1,Ee=null;if(p){let Gt=0;switch(x.options.Surf){case 11:Gt=2;break;case 12:case 15:case 17:Gt=2,D=!1;break;case 14:D=!1,_e=!0;break;case 16:Gt=1,oe=!0,D=!1;break;default:z=m.z_handle.createTicks(!0),oe=!0}Gt>0&&(Ee=m.getHistPalette(),2==Gt&&x.createContour(m,Ee,{full_z_range:!0}),z=Ee.getContour())}else switch(x.options.Surf){case 11:z=x.getContourLevels(),Ee=x.getHistPalette();break;case 12:case 15:case 17:z=x.getContourLevels(),Ee=x.getHistPalette(),D=!1;break;case 14:D=!1,_e=!0;break;case 16:z=x.getContourLevels(),oe=!0,D=!1;break;default:z=m.z_handle.createTicks(!0),oe=!0}if(z){le=new Float32Array(z.length);for(let Gt=0;Gt<z.length;++Gt)le[Gt]=U(z[Gt])}else le=[0,2*m.size_z3d];let Ve,Qe=[],et=[],Tt=[],Bt=0,ve=null,Je=0,ct=0,We=null,Ke=0,ft=[];function zt(Gt,qt,Qt){return Gt<qt?-1:Gt>Qt?1:0}function Zt(Gt,qt,Qt,_n,dn,ci){if(!D)return;let ir=zt(Qt,0,2*m.size_z3d),Vi=zt(ci,0,2*m.size_z3d);if(ir!==Vi||0===ir){if(!Ve)return++Bt;if(0!==ir){let br=ci-Qt;Gt=_n-(_n-Gt)/br*(ci-(Qt=ir<0?0:2*m.size_z3d)),qt=dn-(dn-qt)/br*(ci-Qt)}if(0!==Vi){let br=Qt-ci;_n=Gt-(Gt-_n)/br*(Qt-(ci=Vi<0?0:2*m.size_z3d)),dn=qt-(qt-dn)/br*(Qt-ci)}ve[Je]=Gt,ve[Je+1]=qt,ve[Je+2]=Qt,Je+=3,ve[Je]=_n,ve[Je+1]=dn,ve[Je+2]=ci,Je+=3}}let Mt=new Float32Array(18),Ot=0,sn=0,wn=new Float32Array(6),Ln=0;function En(Gt,qt,Qt,_n,dn,ci,ir,Vi){Ot>=Mt.length&&console.log("more than 6 points???");let br=(ir-Qt)/(ci-Qt),Ur=3;0!==sn&&Math.abs(br)<Math.abs(sn)&&(Mt[Ot]=Mt[Ot-3],Mt[Ot+1]=Mt[Ot-2],Mt[Ot+2]=Mt[Ot-1],Ot-=3,Ur=6),Mt[Ot]=Gt+br*(_n-Gt),Mt[Ot+1]=qt+br*(dn-qt),Mt[Ot+2]=ir,Vi&&We&&(wn[Ln]=Mt[Ot],wn[Ln+1]=Mt[Ot+1],wn[Ln+2]=Mt[Ot+2],Ln+=3),Ot+=Ur,sn=br}function $n(Gt,qt,Qt){let _n=8*((qt-_.i1)*(_.j2-_.j1)+(Qt-_.j1));if(ft[_n]>=0)return console.error("More than 8 vertexes for the bin");let dn=_n+8+ft[_n];ft[_n]--,ft[dn]=Gt}function vn(Gt){for(let qt=_.i1;qt<_.i2;++qt)for(let Qt=_.j1;Qt<_.j2;++Qt){let _n=8*((qt-_.i1)*(_.j2-_.j1)+(Qt-_.j1));if(-1===ft[_n])continue;let dn=ft[_n]>=0?_n:_n+9+ft[_n],ci=_n+8,ir=0,Vi=0,br=0;for(let Ur=dn;Ur<ci;++Ur){let Ar=ft[Ur];if(Ar<0)return console.error("FAILURE in NORMALS RECALCULATIONS");ir+=Gt[Ar],Vi+=Gt[Ar+1],br+=Gt[Ar+2]}ir/=ci-dn,Vi/=ci-dn,br/=ci-dn;for(let Ur=dn;Ur<ci;++Ur){let Ar=ft[Ur];Gt[Ar]=ir,Gt[Ar+1]=Vi,Gt[Ar+2]=br}}}function rn(Gt,qt,Qt,_n,dn,ci,ir,Vi,br,Ur){for(let Ar=1;Ar<le.length;++Ar){let cs=zt(Qt,le[Ar-1],le[Ar]),Rs=zt(ci,le[Ar-1],le[Ar]),es=zt(br,le[Ar-1],le[Ar]),ho=cs+Rs+es;if(3===ho)continue;if(-3===ho)return;if(!Ve){let Es=Math.abs(Rs-cs)+Math.abs(es-Rs)+Math.abs(cs-es);0===cs&&++Es,0===Rs&&++Es,0===es&&++Es,(1===Es||2===Es)&&console.error(`FOUND npnts = ${Es}`),Es>2&&(void 0===Qe[Ar]&&(Qe[Ar]=0),Qe[Ar]+=Es-2),(cs>0||Rs>0||es>0)&&(cs!==Rs||Rs!==es||es!==cs)&&++ct;continue}if(Ln=0,Ot=0,0===cs&&(Mt[Ot]=Gt,Mt[Ot+1]=qt,Mt[Ot+2]=Qt,Ot+=3),cs!==Rs&&(sn=0,(cs<0||Rs<0)&&En(Gt,qt,Qt,_n,dn,ci,le[Ar-1]),(cs>0||Rs>0)&&En(Gt,qt,Qt,_n,dn,ci,le[Ar],!0)),0===Rs&&(Mt[Ot]=_n,Mt[Ot+1]=dn,Mt[Ot+2]=ci,Ot+=3),Rs!==es&&(sn=0,(Rs<0||es<0)&&En(_n,dn,ci,ir,Vi,br,le[Ar-1]),(Rs>0||es>0)&&En(_n,dn,ci,ir,Vi,br,le[Ar],!0)),0===es&&(Mt[Ot]=ir,Mt[Ot+1]=Vi,Mt[Ot+2]=br,Ot+=3),es!==cs&&(sn=0,(es<0||cs<0)&&En(ir,Vi,br,Gt,qt,Qt,le[Ar-1]),(es>0||cs>0)&&En(ir,Vi,br,Gt,qt,Qt,le[Ar],!0)),0===Ot)continue;if(Ot<9){console.log("found less than 3 points",Ot/3);continue}if(We&&6===Ln){for(let Es=0;Es<6;++Es)We[Ke+Es]=wn[Es];Ke+=6}let ro=et[Ar],ws=Tt[Ar];_e&&9===Ot&&($n(ws,F,R),$n(ws+3,F+1,Ur?R+1:R),$n(ws+6,Ur?F:F+1,R+1));for(let Es=3;Es<Ot-3;Es+=3)ro[ws]=Mt[0],ro[ws+1]=Mt[1],ro[ws+2]=Mt[2],ws+=3,ro[ws]=Mt[Es],ro[ws+1]=Mt[Es+1],ro[ws+2]=Mt[Es+2],ws+=3,ro[ws]=Mt[Es+3],ro[ws+1]=Mt[Es+4],ro[ws+2]=Mt[Es+5],ws+=3;Tt[Ar]=ws}}for(_e&&(ft=new Int32Array((_.i2-_.i1)*(_.j2-_.j1)*8).fill(-1)),Ve=0;Ve<2;++Ve){if(Ve){for(let Gt=1;Gt<le.length;++Gt)Qe[Gt]&&(et[Gt]=new Float32Array(9*Qe[Gt]),Tt[Gt]=0);D&&Bt>0&&(ve=new Float32Array(6*Bt)),oe&&ct>0&&(We=new Float32Array(6*ct))}for(F=_.i1;F<_.i2-1;++F)for(q=_.grx[F],$=_.grx[F+1],R=_.j1;R<_.j2-1;++R)T=_.gry[R],J=_.gry[R+1],ie=U(w.getBinContent(F+1,R+1)),Me=U(w.getBinContent(F+1,R+2)),de=U(w.getBinContent(F+2,R+1)),fe=U(w.getBinContent(F+2,R+2)),rn(q,T,ie,$,J,fe,q,J,Me,!0),rn(q,T,ie,$,T,de,$,J,fe,!1),Zt(q,J,Me,q,T,ie),Zt(q,T,ie,$,T,de),F===_.i2-2&&Zt($,T,de,$,J,fe),R===_.j2-2&&Zt(q,J,Me,$,J,fe)}for(let Gt=1;Gt<le.length;++Gt)if(et[Gt]){Tt[Gt]!==9*Qe[Gt]&&console.error(`SURF faces missmatch lvl=${Gt} faces=${Qe[Gt]} index=${Tt[Gt]} check=${9*Qe[Gt]-Tt[Gt]}`);let Qt,_n,qt=new L.u9r;qt.setAttribute("position",new L.TlE(et[Gt],3)),qt.computeVertexNormals(),_e&&1===Gt&&vn(qt.getAttribute("normal").array),p?Qt=Ee?Ee.getColor(Gt-1):x.getColor(5):Ee?Qt=Ee.calcColor(Gt,le.length):(Qt=w.fFillColor>1?x.getColor(w.fFillColor):"white",14===x.options.Surf&&w.fFillColor<2&&(Qt=x.getColor(48))),_n=14===x.options.Surf?new L.YBo({color:Qt,side:L.ehD,vertexColors:!1}):new L.vBJ({color:Qt,side:L.ehD,vertexColors:!1});let dn=new L.Kj0(qt,_n);m.toplevel.add(dn),dn.painter=x}if(ve){6*Bt!==Je&&console.error(`SURF lines mismmatch nsegm=${Bt} lindx=${Je} diff=${6*Bt-Je}`);const Gt=x.getColor(w.fLineColor),qt=new L.nls({color:new L.Ilk(Gt),linewidth:w.fLineWidth}),Qt=(0,ye.Qy)(ve,qt);Qt.painter=x,m.toplevel.add(Qt)}if(We){6*ct!==Ke&&console.error(`SURF grid draw mismatch ngridsegm=${ct} gindx=${Ke} diff=${6*ct-Ke}`);const Gt=1===x.options.Surf?new L.FT0({color:0,dashSize:2,gapSize:2}):new L.nls({color:new L.Ilk(x.getColor(w.fLineColor))}),qt=(0,ye.Qy)(We,Gt);qt.painter=x,m.toplevel.add(qt)}if(17===x.options.Surf&&O(x,!1,p),13===x.options.Surf){_=x.prepareDraw({rounding:!1,use3d:!0,extra:100,middle:0});let Gt=x.getContourLevels(),qt=x.getHistPalette(),Qt=-1,_n=2*m.size_z3d;x.buildContour(_,Gt,qt,(dn,ci,ir,Vi,br)=>{if(ci[br]===ci[Vi]&&ir[br]===ir[Vi]&&br--,br-Vi<3)return;let Ur=[];for(let Es=Vi;Es<=br;++Es)(Es===Vi||ci[Es]!==ci[Es-1]||ir[Es]!==ir[Es-1])&&Ur.push(new L.FM8(ci[Es],ir[Es]));if(Ur.length<3)return;const Ar=L.iDF.triangulateShape(Ur,[]);if(!Ar||0===Ar.length)return;(Qt<0||Qt!==dn)&&(Qt=dn,_n+=1e-4*m.size_z3d);const cs=new Float32Array(9*Ar.length),Rs=new Float32Array(9*Ar.length);let es=0;for(let Es=0;Es<Ar.length;++Es){let Yo=Ar[Es];for(let kl=0;kl<3;++kl){let fo=Ur[Yo[kl]];cs[es]=fo.x,cs[es+1]=fo.y,cs[es+2]=_n,Rs[es]=0,Rs[es+1]=0,Rs[es+2]=1,es+=3}}const ho=new L.u9r;ho.setAttribute("position",new L.TlE(cs,3)),ho.setAttribute("normal",new L.TlE(Rs,3));const ro=new L.vBJ({color:qt.getColor(dn),side:L.ehD,opacity:.5,vertexColors:!1}),ws=new L.Kj0(ho,ro);ws.painter=x,m.toplevel.add(ws)})}}},9670:($r,At,Ce)=>{"use strict";Ce.d(At,{f:()=>je});var ze=Ce(5835),M=Ce(9542),L=Ce(2253),ye=Ce(3675),Be=Ce(9921);class je extends Be.M{convertTH1K(){let Ie=this.getObject();if(Ie.fReady)return;let He=Ie.fArray,Oe=Ie.fEntries;Ie.fNcells=Ie.fXaxis.fNbins+2,Ie.fArray=new Float64Array(Ie.fNcells).fill(0);for(let ce=0;ce<Ie.fNIn;++ce)Ie.Fill(He[ce]);Ie.fReady=1,Ie.fEntries=Oe}scanContent(Ie){Ie&&!this.nbinsx&&(Ie=!1),this.isTH1K()&&this.convertTH1K();let He=this.getHisto();Ie||this.extractAxesProperties(1);let Oe=this.getSelectIndex("x","left"),ce=this.getSelectIndex("x","right");if(Ie&&Oe===this.scan_xleft&&ce===this.scan_xright)return;this.draw_content=!(this.options.Axis>0),this.scan_xleft=Oe,this.scan_xright=ce;let P,x,Y=0,K=0,ue=0,X=0,Z=!0,O=this.isTProfile();for(let w=0;w<this.nbinsx;++w)P=He.getBinContent(w+1),X+=O?He.fBinEntries[w+1]:P,!(w<Oe||w>=ce)&&(P>0&&(0==K||P<K)&&(K=P),Z&&(Y=ue=P,Z=!1),x=this.options.Error?He.getBinError(w+1):0,Y=Math.min(Y,P-x),ue=Math.max(ue,P+x));X+=O?He.fBinEntries[0]+He.fBinEntries[this.nbinsx+1]:He.getBinContent(0)+He.getBinContent(this.nbinsx+1),this.stat_entries=X,He.fEntries>1&&(this.stat_entries=He.fEntries),this.hmin=Y,this.hmax=ue,this.ymin_nz=K,(0==this.nbinsx||Math.abs(Y)<1e-300&&Math.abs(ue)<1e-300)&&(this.draw_content=!1);let p=!1;if(this.draw_content)if(Y>=ue)0==Y?(this.ymin=0,this.ymax=1):Y<0?(this.ymin=2*Y,this.ymax=0):(this.ymin=0,this.ymax=2*Y);else{let w=(ue-Y)*M.gStyle.fHistTopMargin;this.ymin=Y-w,this.ymin<0&&Y>=0&&(this.ymin=0),this.ymax=ue+w}Y=this.options.minimum,ue=this.options.maximum,Y===ue&&Y!==M.kNoZoom&&(Y<0?(Y*=2,ue=0):(Y=0,ue*=2,ue||(ue=1))),Y!=M.kNoZoom&&ue!=M.kNoZoom&&!this.draw_content&&(this.ymin==this.ymax||this.ymin>Y||this.ymax<ue)?(this.ymin=Y,this.ymax=ue):(Y!=M.kNoZoom&&(Y<this.ymin&&(this.ymin=Y),p=!0),ue!=M.kNoZoom&&(ue>this.ymax&&(this.ymax=ue),p=!0)),Ie||(p?(this.zoom_ymin=Y==M.kNoZoom?this.ymin:Y,this.zoom_ymax=ue==M.kNoZoom?this.ymax:ue):(delete this.zoom_ymin,delete this.zoom_ymax)),this.wheel_zoomy=this.getDimension()>1||!this.draw_content}countStat(Ie){let x,He=this.isTProfile(),Oe=this.getHisto(),ce=Oe.fXaxis,Y=this.getSelectIndex("x","left"),K=this.getSelectIndex("x","right"),ue=0,X=0,Z=0,O=0,P=0,p=0,w=0,m=null,_=null,F=this.getFramePainter(),R={name:Oe.fName,meanx:0,meany:0,rmsx:0,rmsy:0,integral:0,entries:this.stat_entries,xmax:0,wmax:0},q=!F.isAxisZoomed("x")&&Math.abs(Oe.fTsumw)>1e-300;for(x=Y;x<K;++x)p=ce.GetBinCoord(x+.5),(!Ie||Ie(p))&&(He?(w=Oe.fBinEntries[x+1],O+=Oe.fArray[x+1],P+=Oe.fSumw2[x+1]):w=Oe.getBinContent(x+1),(null===m||w>_)&&(m=p,_=w),q||(ue+=w,X+=w*p,Z+=w*p**2));return q&&(ue=Oe.fTsumw,X=Oe.fTsumwx,Z=Oe.fTsumwx2),R.integral=ue,Math.abs(ue)>1e-300&&(R.meanx=X/ue,R.meany=O/ue,R.rmsx=Math.sqrt(Math.abs(Z/ue-R.meanx**2)),R.rmsy=Math.sqrt(Math.abs(P/ue-R.meany**2))),null!==m&&(R.xmax=m,R.wmax=_),R}fillStatistic(Ie,He,Oe){if(this.isIgnoreStatsFill())return!1;let ce=this.getHisto(),Y=this.countStat(),K=He%10,ue=Math.floor(He/10)%10,X=Math.floor(He/100)%10,Z=Math.floor(He/1e3)%10,O=Math.floor(He/1e4)%10,P=Math.floor(He/1e5)%10,x=Math.floor(He/1e6)%10,p=Math.floor(He/1e7)%10,w=Math.floor(He/1e8)%10;return Ie.clearPave(),K>0&&Ie.addText(Y.name),this.isTProfile()?(ue>0&&Ie.addText("Entries = "+Ie.format(Y.entries,"entries")),X>0&&(Ie.addText("Mean = "+Ie.format(Y.meanx)),Ie.addText("Mean y = "+Ie.format(Y.meany))),Z>0&&(Ie.addText("Std Dev = "+Ie.format(Y.rmsx)),Ie.addText("Std Dev y = "+Ie.format(Y.rmsy)))):(ue>0&&Ie.addText("Entries = "+Ie.format(Y.entries,"entries")),X>0&&Ie.addText("Mean = "+Ie.format(Y.meanx)),Z>0&&Ie.addText("Std Dev = "+Ie.format(Y.rmsx)),O>0&&Ie.addText("Underflow = "+Ie.format(ce.fArray.length>0?ce.fArray[0]:0,"entries")),P>0&&Ie.addText("Overflow = "+Ie.format(ce.fArray.length>0?ce.fArray[ce.fArray.length-1]:0,"entries")),x>0&&Ie.addText("Integral = "+Ie.format(Y.integral,"entries")),p>0&&Ie.addText("Skew = <not avail>"),w>0&&Ie.addText("Kurt = <not avail>")),Oe&&Ie.fillFunctionStat(this.findFunction(M.clTF1),Oe),!0}drawBars(Ie,He,Oe){this.createG(!0);let Z,O,P,x,p,w,m,_,F,R,q,T,ce=this.getSelectIndex("x","left",-1),Y=this.getSelectIndex("x","right",1),K=this.getHisto(),ue=K.fXaxis,X=this.options.Text,$="",J="",ie="",Me=this.options.BarStyle>10?this.options.BarStyle%10:0;for(Me>4&&(Me=4),q=He.swap_xy?0:Ie,Number.isFinite(this.options.BaseLine)&&this.options.BaseLine>=Oe.scale_ymin&&(q=Math.round(Oe.gry(this.options.BaseLine))),X&&(Z=this.getColor(K.fMarkerColor),O=-1*this.options.TextAngle,P=20,1!==K.fMarkerSize&&O&&(P=.02*Ie*K.fMarkerSize),this.startTextDrawing(42,P,this.draw_g,P)),x=ce;x<Y;++x)if(p=ue.GetBinLowEdge(x+1),w=ue.GetBinLowEdge(x+2),!(He.logx&&w<=0)&&(m=Math.round(Oe.grx(p)),_=Math.round(Oe.grx(w)),F=K.getBinContent(x+1),!(Oe.logy&&F<Oe.scale_ymin)&&(R=Math.round(Oe.gry(F)),T=_-m,m+=Math.round(K.fBarOffset/1e3*T),T=Math.round(K.fBarWidth/1e3*T),$+=He.swap_xy?`M${q},${m}h${R-q}v${T}h${q-R}z`:`M${m},${R}h${T}v${q-R}h${-T}z`,Me>0&&(_=m+T,T=Math.round(T*Me/10),He.swap_xy?(J+=`M${q},${m}h${R-q}v${T}h${q-R}z`,ie+=`M${q},${_}h${R-q}v${-T}h${q-R}z`):(J+=`M${m},${R}h${T}v${q-R}h${-T}z`,ie+=`M${_},${R}h${-T}v${q-R}h${T}z`)),X&&F))){let de=F===Math.round(F)?F.toString():(0,ye.Ee)(F,M.gStyle.fPaintTextFormat);this.drawText(He.swap_xy?{align:12,x:Math.round(R+P/2),y:Math.round(m+.1),height:Math.round(.8*T),text:de,color:Z,latex:0}:O?{align:12,x:m+T/2,y:Math.round(R-2-P/5),width:0,height:0,rotate:O,text:de,color:Z,latex:0}:{align:22,x:Math.round(m+.1*T),y:Math.round(R-2-P),width:Math.round(.8*T),height:P,text:de,color:Z,latex:0})}if($&&this.draw_g.append("svg:path").attr("d",$).call(this.fillatt.func),J&&this.draw_g.append("svg:path").attr("d",J).call(this.fillatt.func).style("fill",(0,L.B8)(this.fillatt.color).brighter(.5).formatHex()),ie&&this.draw_g.append("svg:path").attr("d",ie).call(this.fillatt.func).style("fill",(0,L.B8)(this.fillatt.color).darker(.5).formatHex()),X)return this.finishTextDrawing()}drawFilledErrors(Ie){this.createG(!0);let K,ue,X,Z,O,He=this.getSelectIndex("x","left",-1),Oe=this.getSelectIndex("x","right",1),ce=this.getHisto(),Y=ce.fXaxis,P=[],x=[];for(K=He;K<Oe;++K)ue=Y.GetBinCoord(K+.5),!(Ie.logx&&ue<=0)&&(X=Math.round(Ie.grx(ue)),Z=ce.getBinContent(K+1),O=ce.getBinError(K+1),!(Ie.logy&&Z-O<Ie.scale_ymin)&&(P.push({grx:X,gry:Math.round(Ie.gry(Z+O))}),x.unshift({grx:X,gry:Math.round(Ie.gry(Z-O))})));let p=4===this.options.ErrorKind?"bezier":"line",w=(0,ye.Cq)(p,P),m=(0,ye.Cq)("L"+p,x);this.draw_g.append("svg:path").attr("d",w.path+m.path+"Z").call(this.fillatt.func)}draw1DBins(){this.createHistDrawAttributes();let Ie=this.getFramePainter(),He=Ie.getGrFuncs(this.options.second_x,this.options.second_y),Oe=Ie.getFrameWidth(),ce=Ie.getFrameHeight();if(!this.draw_content||Oe<=0||ce<=0)return this.removeG();if(this.options.Bar)return this.drawBars(ce,Ie,He);if(3===this.options.ErrorKind||4===this.options.ErrorKind)return this.drawFilledErrors(Ie,He);let x,p,w,m,_,F,R,q,T,$,J,ie,Me,de,We,Ke,ft,zt,Zt,Mt,Ot,sn,wn,Ln,En,$n,vn,Y=this.getSelectIndex("x","left",-1),K=this.getSelectIndex("x","right",2),ue=this.getHisto(),X=!(0,M.isBatchMode)()&&M.settings.Tooltip,Z=ue.fXaxis,O="",P=!1,fe=!this.options.Zero,I=this.options.Error,U=this.options.Mark,z=this.options.Line||this.options.Curve,le=this.options.Text,D=le&&"E"==this.options.TextKind&&this.isTProfile()&&ue.fBinEntries,oe=null,_e=null,Ee=null,Ve=null,Qe=null,et=null,Tt=5,Bt=!1,ve=!1,Je=0,ct=0;I&&!U&&ue.fMarkerStyle>1&&(U=!0),2===this.options.ErrorKind?this.fillatt.empty()?U=!0:oe="":this.options.Error&&(_e="",Qe=X?"":null,ve=!0),z&&(Ve=""),ct=this.lineatt.width+M.gStyle.fEndErrorSize,1===this.options.ErrorKind&&(Je=Math.floor((this.lineatt.width-1)/2)),U&&(this.createAttMarker({attr:ue,style:this.options.MarkStyle}),this.markeratt.size>0?(Ee="",Bt=!0,this.markeratt.resetPos(),null===Qe&&X&&(!this.markeratt.fill||this.markeratt.getFullSize()<7)&&(et="",Tt=Math.max(5,Math.round(.7*this.markeratt.getFullSize())))):U=!1);let rn=I||U,Gt=rn||le||z,qt=this.options.Hist&&(!this.lineatt.empty()||!this.fillatt.empty());if(!qt&&!Gt)return this.removeG();if(this.createG(!0),le){if(En=this.getColor(ue.fMarkerColor),$n=-1*this.options.TextAngle,vn=20,1!==ue.fMarkerSize&&$n&&(vn=.02*ce*ue.fMarkerSize),!$n&&!this.options.TextKind){let Ur=Oe/(K-Y+1);Ur<3*vn&&($n=270,vn=Math.round(.7*Ur))}this.startTextDrawing(42,vn,this.draw_g,vn)}let Qt=Gt||K-Y>3*Oe;const _n=Ur=>(zt=ue.getBinContent(Ur+1),!(fe&&0===zt||(Mt=Math.round(He.grx(Z.GetBinLowEdge(Ur+1))),Ot=Math.round(He.grx(Z.GetBinLowEdge(Ur+2))),sn=Math.round((Mt+Ot)/2),We=Math.round(He.gry(zt)),I?(Zt=ue.getBinError(Ur+1),Ke=Math.round(We-He.gry(zt+Zt)),ft=Math.round(He.gry(zt-Zt)-We)):Ke=ft=20,0))),dn=()=>{let Ur=5;this.options.errorX>0&&(Ur=Math.round((Ot-Mt)*this.options.errorX),wn=sn-Ur,Ln=sn+Ur,_e+=1===this.options.ErrorKind?`M${wn+Je},${We-ct}v${2*ct}m0,-${ct}h${Ln-wn-2*Je}m0,-${ct}v${2*ct}`:`M${wn+Je},${We}h${Ln-wn-2*Je}`),_e+=1===this.options.ErrorKind?`M${sn-ct},${We-Ke+Je}h${2*ct}m${-ct},0v${Ke+ft-2*Je}m${-ct},0h${2*ct}`:`M${sn},${We-Ke+Je}v${Ke+ft-2*Je}`,null!==Qe&&(Qe+=`M${sn-Ur},${We-Ke}h${2*Ur}v${Ke+ft}h${-2*Ur}z`)},ci=Ur=>{if(_n(Ur)){if(le){let Ar=D?ue.fBinEntries[Ur+1]:zt;if(0!==Ar){let cs=Ar===Math.round(Ar)?Ar.toString():(0,ye.Ee)(Ar,M.gStyle.fPaintTextFormat);this.drawText($n?{align:12,x:sn,y:Math.round(We-2-vn/5),width:0,height:0,rotate:$n,text:cs,color:En,latex:0}:{align:22,x:Math.round(Mt+.1*(Ot-Mt)),y:Math.round(We-2-vn),width:Math.round(.8*(Ot-Mt)),height:vn,text:cs,color:En,latex:0})}}z&&null!==Ve&&(Ve+=(0===Ve.length?"M":"L")+`${sn},${We}`),rn&&We>=-Ke&&We<=ce+ft&&(null!==oe&&(oe+=`M${Mt},${We-Ke}h${Ot-Mt}v${Ke+ft+1}h${Mt-Ot}z`),null!==Ee&&Bt&&(Ee+=this.markeratt.create(sn,We),null!==et&&(et+=`M${sn-Tt},${We-Tt}h${2*Tt}v${2*Tt}h${-2*Tt}z`)),null!==_e&&ve&&dn())}};if((Bt||ve)&&(!M.settings.OptimizeDraw||K-Y<5e4&&1==M.settings.OptimizeDraw)){for(ie=Y;ie<K;++ie)_n(ie)&&(null!==Ee&&(Ee+=this.markeratt.create(sn,We)),null!==et&&(et+=`M${sn-Tt},${We-Tt}h${2*Tt}v${2*Tt}h${-2*Tt}z`),null!==_e&&dn());ve=Bt=!1}for(ie=Y;ie<=K;++ie)m=Z.GetBinLowEdge(ie+1),!(this.logx&&m<=0)&&(_=Math.round(He.grx(m)),P=ie===K,P&&Y<K?R=w:(F=ue.getBinContent(ie+1),R=Math.round(He.gry(F))),0===O.length?(Me=de=ie,J=x=p=_,$=q=T=w=R,O=`M${p},${w}`):Qt?_!==p||P?(Gt&&(Me===de?ci(Me):Me<de?(ci(Me),ci(de)):(ci(de),ci(Me))),qt&&(q!==T||$!==q)&&(J!==p&&(O+="h"+(p-J)),w===q?(T!==$&&(O+="v"+(T-$)),q!==T&&(O+="v"+(q-T))):(q!==$&&(O+="v"+(q-$)),T!==q&&(O+="v"+(T-q)),w!==T&&(O+="v"+(w-T))),J=p,$=w),P&&J!==_&&(O+="h"+(_-J)),Me=de=ie,q=T=w=R,p=_):(R<q?de=ie:R>T&&(Me=ie),q=Math.min(q,R),T=Math.max(T,R),w=R):(R!==w||P)&&(_!==p&&(O+="h"+(_-p)),R!==w&&(O+="v"+(R-w)),w=R,p=_));let ir=X&&this.fillatt.empty()&&qt&&!rn&&!z,Vi=ce+3;if(!ir){let Ur=Math.round(He.gry(0));Ur<=0?Vi=-3:Ur<ce&&(Vi=Ur)}let br=`L${p},${Vi}H${x}Z`;return(rn||z)&&(oe&&this.draw_g.append("svg:path").attr("d",oe).call(this.fillatt.func),_e&&this.draw_g.append("svg:path").attr("d",_e).call(this.lineatt.func),Qe&&this.draw_g.append("svg:path").attr("d",Qe).style("fill","none").style("pointer-events",(0,M.isBatchMode)()?null:"visibleFill"),Ve&&(!this.fillatt.empty()&&!qt&&this.draw_g.append("svg:path").attr("d",Ve+br).call(this.fillatt.func),this.draw_g.append("svg:path").attr("d",Ve).style("fill","none").call(this.lineatt.func)),Ee&&this.draw_g.append("svg:path").attr("d",Ee).call(this.markeratt.func),et&&this.draw_g.append("svg:path").attr("d",et).style("fill","none").style("pointer-events",(0,M.isBatchMode)()?null:"visibleFill")),O&&qt&&this.draw_g.append("svg:path").attr("d",O+(!this.fillatt.empty()||ir?br:"")).style("stroke-linejoin","miter").call(this.lineatt.func).call(this.fillatt.func),le?this.finishTextDrawing():void 0}getBinTooltips(Ie){let He=[],Oe=this.getObjectHint(),Y=this.getFramePainter().getGrFuncs(this.options.second_x,this.options.second_y),K=this.getHisto(),ue=K.fXaxis.GetBinLowEdge(Ie+1),X=K.fXaxis.GetBinLowEdge(Ie+2),Z=K.getBinContent(Ie+1),O=this.getAxisBinTip("x",K.fXaxis,Ie);return Oe&&He.push(Oe),this.options.Error||this.options.Mark?(He.push("x = "+O,"y = "+Y.axisAsText("y",Z)),this.options.Error&&("["==O[0]&&He.push("error x = "+((X-ue)/2).toPrecision(4)),He.push("error y = "+K.getBinError(Ie+1).toPrecision(4)))):(He.push(`bin = ${Ie+1}`,`x = ${O}`),K.$baseh&&(Z-=K.$baseh.getBinContent(Ie+1)),Z===Math.round(Z)?He.push("entries = "+Z):He.push("entries = "+(0,ye.Ee)(Z,M.gStyle.fStatFormat))),He}processTooltipEvent(Ie){if(!Ie||!this.draw_content||!this.draw_g||this.options.Mode3D)return this.draw_g&&this.draw_g.select(".tooltip_bin").remove(),null;const He=this.getFramePainter(),Oe=He.getGrFuncs(this.options.second_x,this.options.second_y),ce=this.getHisto(),Y=this.getSelectIndex("x","left",-1),K=this.getSelectIndex("x","right",2);let O,P,x,p,w,m,_,ue=He.getFrameWidth(),X=He.getFrameHeight(),Z=null,F=2,R=Y,q=K,T=Ie.x,$=Ie.y;const J=I=>{let U=ce.fXaxis.GetBinLowEdge(I+1);return Oe.logx&&U<=0?null:Oe.grx(U)},ie=I=>{let U=ce.getBinContent(I+1);return Oe.logy&&U<Oe.scale_ymin?Oe.swap_xy?-1e3:10*X:Math.round(Oe.gry(U))};Oe.swap_xy&&([T,$,ue,X]=[$,T,X,ue]);let Me=Oe.swap_xy!=He.x_handle.reverse;for(;R<q-1;){let I=Math.round(.5*(R+q)),U=J(I);null===U||U<T-.5?Me?q=I:R=I:U>T+.5?Me?R=I:q=I:(R++,q--)}if(Z=q=R,P=J(Z),Me){for(;R>Y&&J(R-1)<P+2;)--R;for(;q<K&&J(q+1)>P-2;)++q}else{for(;R>Y&&J(R-1)>P-2;)--R;for(;q<K&&J(q+1)<P+2;)++q}if(R<q){let I=X;for(let U=R;U<=q;U++){let z=Math.abs(ie(U)-$);z<I&&(I=z,Z=U)}I>X/10&&(Z=Math.round(R+(q-R)/X*$)),P=J(Z)}if(P=Math.round(P),p=Math.round(J(Z+1)),this.options.Bar){let I=p-P;P+=Math.round(ce.fBarOffset/1e3*I),p=P+Math.round(ce.fBarWidth/1e3*I)}if(P>p&&([P,p]=[p,P]),x=Math.round((P+p)/2),m=w=_=ie(Z),this.options.Bar)O=!0,F=0,w=Math.round(Oe.gry(!1!==this.options.BaseLine&&this.options.BaseLine>Oe.scale_ymin?this.options.BaseLine:Oe.scale_ymin)),w>_&&([w,_]=[_,w]),!Ie.touch&&1===Ie.nproc&&($<w||$>_)&&(Z=null);else if(this.options.Error||this.options.Mark||this.options.Line||this.options.Curve){O=!0;let I=3;if(this.markeratt&&(I=Math.max(I,this.markeratt.getFullSize())),this.options.Error){let U=ce.getBinContent(Z+1),z=ce.getBinError(Z+1);w=Math.round(Oe.gry(U+z)),_=Math.round(Oe.gry(U-z)),0==U&&this.isTProfile()&&(Z=null);let le=(p-P)*this.options.errorX;P=Math.round(x-le),p=Math.round(x+le)}p-P<2*I&&(P=x-I,p=x+I),w=Math.min(w,m-I),_=Math.max(_,m+I),!Ie.touch&&1===Ie.nproc&&($<w||$>_)&&(Z=null)}else O=1===Ie.nproc&&K-Y<ue,O&&(_=X,this.fillatt.empty()||(_=Math.min(X,Math.max(0,Math.round(Oe.gry(0)))),_<w&&([w,_]=[_,w])),(Ie.y<w||Ie.y>_)&&!Ie.touch&&(Z=null));null!==Z&&(Z===Y&&P>T+F||Z===K-1&&p<T-F||T<P-F||T>p+F||!this.options.Zero&&0===ce.getBinContent(Z+1))&&(Z=null);let de=this.draw_g.select(".tooltip_bin");if(null===Z||_<=0||w>=X)return de.remove(),null;let fe={name:ce.fName,title:ce.fTitle,x,y:m,exact:!0,color1:this.lineatt?this.lineatt.color:"green",color2:this.fillatt?this.fillatt.getFillColorAlt("blue"):"blue",lines:this.getBinTooltips(Z)};if(Ie.disabled)de.remove(),fe.changed=!0;else if(O)de.empty()&&(de=this.draw_g.append("svg:rect").attr("class","tooltip_bin h1bin").style("pointer-events","none")),fe.changed=de.property("current_bin")!==Z,fe.changed&&de.attr("x",Oe.swap_xy?w:P).attr("width",Oe.swap_xy?_-w:p-P).attr("y",Oe.swap_xy?P:w).attr("height",Oe.swap_xy?p-P:_-w).style("opacity","0.3").property("current_bin",Z),fe.exact=Math.abs(m-$)<=5||$>=w&&$<=_,fe.menu=fe.exact,fe.menu_dist=Math.sqrt((x-T)**2+(m-$)**2);else{let I=this.lineatt.width+3;de.empty()&&(de=this.draw_g.append("svg:circle").attr("class","tooltip_bin").style("pointer-events","none").attr("r",I).call(this.lineatt.func).call(this.fillatt.func)),fe.exact=Math.abs(x-Ie.x)<=I&&Math.abs(m-Ie.y)<=I,fe.menu=fe.exact,fe.menu_dist=Math.sqrt((x-Ie.x)**2+(m-Ie.y)**2),fe.changed=de.property("current_bin")!==Z,fe.changed&&de.attr("cx",x).attr("cy",m).property("current_bin",Z)}return fe.changed&&(fe.user_info={obj:ce,name:ce.fName,bin:Z,cont:ce.getBinContent(Z+1),grx:x,gry:m}),fe}fillHistContextMenu(Ie){Ie.add("Auto zoom-in",()=>this.autoZoom());let He=this.getSupportedDrawOptions();Ie.addDrawMenu("Draw with",He,Oe=>{if("inspect"===Oe)return this.showInspector();this.decodeOptions(Oe),this.options.need_fillcol&&this.fillatt&&this.fillatt.empty()&&this.fillatt.change(5,1001),this.interactiveRedraw("pad","drawopt")}),!this.snapid&&!this.isTProfile()&&Ie.addRebinMenu(Oe=>this.rebinHist(Oe))}rebinHist(Ie){let He=this.getHisto(),Oe=He.fXaxis,ce=Math.floor(Oe.fNbins/Ie);if(ce<2)return;let Y=new Array(ce+2),K=null;Oe.fXbins.length>0&&(K=new Array(ce)),Y[0]=He.fArray[0];let ue=1;for(let Z=1;Z<=ce;++Z){K&&(K[Z-1]=Oe.fXbins[ue-1]);let O=0;for(let P=0;P<Ie;++P)O+=He.fArray[ue++];Y[Z]=O}K?(ue<=Oe.fXbins.length&&(Oe.fXmax=Oe.fXbins[ue-1]),Oe.fXbins=K):Oe.fXmax=Oe.fXmin+(Oe.fXmax-Oe.fXmin)/Oe.fNbins*ce*Ie,Oe.fNbins=ce;let X=0;for(;ue<He.fArray.length;)X+=He.fArray[ue++];Y[ce+1]=X,He.fArray=Y,He.fSumw2=[],this.scanContent(),this.interactiveRedraw("pad")}autoZoom(){let Ie=this.getSelectIndex("x","left",-1),He=this.getSelectIndex("x","right",1),Oe=He-Ie,ce=this.getHisto();if(0==Oe||!ce)return;let Y=ce.getBinContent(Ie+1);for(let K=Ie;K<He;++K)Y=Math.min(Y,ce.getBinContent(K+1));if(!(Y>0)){for(;Ie<He&&ce.getBinContent(Ie+1)<=Y;)++Ie;for(;Ie<He&&ce.getBinContent(He)<=Y;)--He;if(Ie===He-1&&Ie>2&&He<this.nbinsx-2&&(--Ie,++He),He-Ie<Oe&&Ie<He)return this.getFramePainter().zoom(ce.fXaxis.GetBinLowEdge(Ie+1),ce.fXaxis.GetBinLowEdge(He+1))}}canZoomInside(Ie,He,Oe){let ce=this.getHisto();return!!("x"==Ie&&ce&&ce.fXaxis.FindBin(Oe,.5)-ce.fXaxis.FindBin(He,0)>1||"y"==Ie&&Math.abs(Oe-He)>1e-6*Math.abs(this.ymax-this.ymin))}callDrawFunc(Ie){var He=this;return(0,ze.Z)(function*(){let Oe=He.getMainPainter(),ce=He.getFramePainter();return Oe!==He&&ce&&ce.mode3d!==He.options.Mode3D&&He.copyOptionsFrom(Oe),He.options.Mode3D?He.draw3D(Ie):He.draw2D(Ie)})()}draw2D(){var Ie=this;return(0,ze.Z)(function*(){return Ie.clear3DScene(),Ie.scanContent(!0),(Ie.isMainPainter()?Ie.drawColorPalette(!1):Promise.resolve(!0)).then(()=>Ie.drawAxes()).then(()=>Ie.draw1DBins()).then(()=>Ie.drawHistTitle()).then(()=>Ie.drawNextFunction(0,!0)).then(()=>(Ie.updateStatWebCanvas(),Ie.addInteractivity()))})()}draw3D(Ie){var He=this;return(0,ze.Z)(function*(){return console.log("3D drawing is disabled, load ./hist/TH1Painter.mjs"),He.draw2D(Ie)})()}redraw(Ie){return this.callDrawFunc(Ie)}static draw(Ie,He,Oe){return(0,ze.Z)(function*(){return Be.M._drawHist(new je(Ie,He),Oe)})()}}},7823:($r,At,Ce)=>{"use strict";Ce.d(At,{S:()=>He});var ze=Ce(5835),M=Ce(9542),L=Ce(2253),ye=Ce(6367),Be=Ce(6417),je=Ce(3675),Ze=Ce(6458),Ie=Ce(9921);class He extends Ie.M{constructor(ce,Y){super(ce,Y),this.fPalette=null,this.wheel_zoomy=!0,this._show_empty_bins=!1}cleanup(){delete this.tt_handle,super.cleanup()}toggleProjection(ce,Y){if(("Projections"==ce||"Off"==ce)&&(ce=""),(0,M.isStr)(ce)&&ce.length>1&&(Y=parseInt(ce.slice(1)),ce=ce[0]),Y||(Y=1),ce&&this.is_projection==ce){if(this.projection_width!==Y)return void(this.projection_width=Y);ce=""}delete this.proj_hist;let K=this.is_projection===ce?"":ce;this.projection_width=Y,this.is_projection="",this.provideSpecialDrawArea(K).then(()=>(this.is_projection=K,this.redrawProjection()))}redrawProjection(ce,Y,K,ue){var X=this;return(0,ze.Z)(function*(){if(!X.is_projection)return!1;if(void 0===ue){if(!X.tt_handle)return;ce=Math.round((X.tt_handle.i1+X.tt_handle.i2)/2),Y=ce+1,K=Math.round((X.tt_handle.j1+X.tt_handle.j2)/2),ue=K+1}let Z=X.getCanvPainter();if(Z&&!Z._readonly&&void 0!==X.snapid){let p=`EXECANDSEND:D${X.is_projection}PROJ:${X.snapid}:`;return p+="X"==X.is_projection?`ProjectionX("_projx",${K+1},${ue},"")`:`ProjectionY("_projy",${ce+1},${Y},"")`,Z.sendWebsocket(p),!0}if(X.doing_projection)return!1;X.doing_projection=!0;let O=X.getHisto();X.proj_hist||("X"==X.is_projection?(X.proj_hist=(0,M.createHistogram)("TH1D",X.nbinsx),Object.assign(X.proj_hist.fXaxis,O.fXaxis),X.proj_hist.fName="xproj",X.proj_hist.fTitle="X projection"):(X.proj_hist=(0,M.createHistogram)("TH1D",X.nbinsy),Object.assign(X.proj_hist.fXaxis,O.fYaxis),X.proj_hist.fName="yproj",X.proj_hist.fTitle="Y projection"));let P=0,x=-1;if("X"==X.is_projection){for(let p=0;p<X.nbinsx;++p){let w=0;for(let m=K;m<ue;++m)w+=O.getBinContent(p+1,m+1);X.proj_hist.setBinContent(p+1,w)}X.proj_hist.fTitle="X projection "+(K+1==ue?`bin ${ue}`:`bins [${K+1} .. ${ue}]`),X.tt_handle&&(P=X.tt_handle.i1+1,x=X.tt_handle.i2)}else{for(let p=0;p<X.nbinsy;++p){let w=0;for(let m=ce;m<Y;++m)w+=O.getBinContent(m+1,p+1);X.proj_hist.setBinContent(p+1,w)}X.proj_hist.fTitle="Y projection "+(ce+1==Y?`bin ${Y}`:`bins [${ce+1} .. ${Y}]`),X.tt_handle&&(P=X.tt_handle.j1+1,x=X.tt_handle.j2)}if(P<x){let p=X.proj_hist.fXaxis;p.fFirst=P,p.fLast=x,(1==p.fFirst&&p.fLast==p.fNbins)==p.TestBit(Ze.VO.kAxisRange)&&p.InvertBit(Ze.VO.kAxisRange)}return X.proj_hist.fEntries=0,X.proj_hist.fTsumw=0,X.drawInSpecialArea(X.proj_hist).then(p=>(delete X.doing_projection,p))})()}executeMenuCommand(ce,Y){return!!super.executeMenuCommand(ce,Y)||("SetShowProjectionX"==ce.fName||"SetShowProjectionY"==ce.fName)&&(this.toggleProjection(ce.fName[17],Y&&parseInt(Y)?parseInt(Y):1),!0)}fillHistContextMenu(ce){if(!this.isTH2Poly()){ce.add("sub:Projections",()=>this.toggleProjection());let K=this.is_projection||"";K&&(K+=this.projection_width);const ue=["X1","X2","X3","X5","X10","Y1","Y2","Y3","Y5","Y10"];this.is_projection&&ue.push("Off");for(let X=0;X<ue.length;++X)ce.addchk(K==ue[X],ue[X],ue[X],Z=>this.toggleProjection(Z));ce.add("endsub:"),ce.add("Auto zoom-in",()=>this.autoZoom())}let Y=this.getSupportedDrawOptions();ce.addDrawMenu("Draw with",Y,K=>{if("inspect"==K)return this.showInspector();this.decodeOptions(K),this.interactiveRedraw("pad","drawopt")}),this.options.Color&&this.fillPaletteMenu(ce)}clickButton(ce){if(super.clickButton(ce))return!0;if(this!==this.getMainPainter())return!1;switch(ce){case"ToggleColor":this.toggleColor();break;case"ToggleColorZ":this.toggleColz();break;case"Toggle3D":this.toggleMode3D();break;default:return!1}return!0}fillToolbar(){super.fillToolbar(!0);let ce=this.getPadPainter();ce&&(this.isTH2Poly()||ce.addPadButton("th2color","Toggle color","ToggleColor"),ce.addPadButton("th2colorz","Toggle color palette","ToggleColorZ"),ce.addPadButton("th2draw3d","Toggle 3D mode","Toggle3D"),ce.showPadButtons())}toggleColor(){this.options.Mode3D?(this.options.Mode3D=!1,this.options.Color=!0):this.options.Color=!this.options.Color,this._can_move_colz=!0,this.copyOptionsToOthers(),this.interactiveRedraw("pad","drawopt")}autoZoom(){if(this.isTH2Poly())return;let X,Z,ce=this.getSelectIndex("x","left",-1),Y=this.getSelectIndex("x","right",1),K=this.getSelectIndex("y","left",-1),ue=this.getSelectIndex("y","right",1),O=this.getObject();if(ce==Y||K==ue)return;let P=O.getBinContent(ce+1,K+1);for(X=ce;X<Y;++X)for(Z=K;Z<ue;++Z)P=Math.min(P,O.getBinContent(X+1,Z+1));if(P>0)return;let x=Y,p=ce,w=ue,m=K;for(X=ce;X<Y;++X)for(Z=K;Z<ue;++Z)O.getBinContent(X+1,Z+1)>P&&(X<x&&(x=X),X>=p&&(p=X+1),Z<w&&(w=Z),Z>=m&&(m=Z+1));let _,F,R,q,T=!1;return x===p-1&&x>ce+1&&p<Y-1&&(x--,p++),w===m-1&&w>K+1&&m<ue-1&&(w--,m++),(x>ce||p<Y)&&x<p-1&&(_=O.fXaxis.GetBinLowEdge(x+1),F=O.fXaxis.GetBinLowEdge(p+1),T=!0),(w>K||m<ue)&&w<m-1&&(R=O.fYaxis.GetBinLowEdge(w+1),q=O.fYaxis.GetBinLowEdge(m+1),T=!0),T?this.getFramePainter().zoom(_,F,R,q):void 0}scanContent(ce){if(ce&&this.nbinsx&&this.nbinsy)return;let Y,K,ue=this.getObject();if(this.extractAxesProperties(2),this.isTH2Poly()){this.gminposbin=null,this.gminbin=this.gmaxbin=0;for(let X=0,Z=ue.fBins.arr.length;X<Z;++X){let O=ue.fBins.arr[X].fContent;0===X&&(this.gminbin=this.gmaxbin=O),O<this.gminbin?this.gminbin=O:O>this.gmaxbin&&(this.gmaxbin=O),O>0&&(null===this.gminposbin||this.gminposbin>O)&&(this.gminposbin=O)}}else for(this.gminbin=this.gmaxbin=ue.getBinContent(1,1),this.gminposbin=null,Y=0;Y<this.nbinsx;++Y)for(K=0;K<this.nbinsy;++K){let X=ue.getBinContent(Y+1,K+1);X<this.gminbin?this.gminbin=X:X>this.gmaxbin&&(this.gmaxbin=X),X>0&&(null===this.gminposbin||this.gminposbin>X)&&(this.gminposbin=X)}null===this.gminposbin&&(this.gminposbin=1e-4*this.gmaxbin),this.options.Axis>0?this.draw_content=!1:(this.draw_content=this.gmaxbin>0,!this.draw_content&&this.options.Zero&&this.isTH2Poly()&&(this.draw_content=!0,this.options.Line=1))}countStat(ce){let p,w,m,_,F,Y=this.getHisto(),K=Y.fXaxis,ue=Y.fYaxis,X=0,Z=0,O=0,P=0,x=0,R=this.getFramePainter(),q=R.getGrFuncs(this.options.second_x,this.options.second_y),T={name:Y.fName,entries:0,integral:0,meanx:0,meany:0,rmsx:0,rmsy:0,matrix:[0,0,0,0,0,0,0,0,0],xmax:0,ymax:0,wmax:null},$=!R.isAxisZoomed("x")&&!R.isAxisZoomed("y")&&Math.abs(Y.fTsumw)>1e-300&&!ce;if(this.isTH2Poly()){let ie,Me,de,fe,I,U,z,J=Y.fBins.arr.length;for(ie=0;ie<J;++ie){for(Me=Y.fBins.arr[ie],p=1,w=1,Me.fXmin>q.scale_xmax?p=2:Me.fXmax<q.scale_xmin&&(p=0),Me.fYmin>q.scale_ymax?w=2:Me.fYmax<q.scale_ymin&&(w=0),m=_=z=0,fe=Me.fPoly,U=1,fe._typename===M.clTMultiGraph&&(U=Me.fPoly.fGraphs.arr.length,fe=null),I=0;I<U;++I)for((!fe||I>0)&&(fe=Me.fPoly.fGraphs.arr[I]),de=0;de<fe.fNpoints;++de)++z,m+=fe.fX[de],_+=fe.fY[de];z>1&&(m/=z,_/=z),F=Me.fContent,T.entries+=F,T.matrix[3*w+p]+=F,1==p&&1==w&&(!ce||ce(m,_))&&((null===T.wmax||F>T.wmax)&&(T.wmax=F,T.xmax=m,T.ymax=_),$||(X+=F,Z+=m*F,O+=_*F,P+=m*m*F,x+=_*_*F))}}else{let fe,I,J=this.getSelectIndex("x","left"),ie=this.getSelectIndex("x","right"),Me=this.getSelectIndex("y","left"),de=this.getSelectIndex("y","right");for(fe=0;fe<=this.nbinsx+1;++fe)for(p=fe<=J?0:fe>ie?2:1,m=K.GetBinCoord(fe-.5),I=0;I<=this.nbinsy+1;++I)w=I<=Me?0:I>de?2:1,_=ue.GetBinCoord(I-.5),F=Y.getBinContent(fe,I),T.entries+=F,T.matrix[3*w+p]+=F,1==p&&1==w&&(!ce||ce(m,_))&&((null===T.wmax||F>T.wmax)&&(T.wmax=F,T.xmax=m,T.ymax=_),$||(X+=F,Z+=m*F,O+=_*F,P+=m**2*F,x+=_**2*F))}return $&&(X=Y.fTsumw,Z=Y.fTsumwx,P=Y.fTsumwx2,O=Y.fTsumwy,x=Y.fTsumwy2),Math.abs(X)>1e-300&&(T.meanx=Z/X,T.meany=O/X,T.rmsx=Math.sqrt(Math.abs(P/X-T.meanx**2)),T.rmsy=Math.sqrt(Math.abs(x/X-T.meany**2))),null===T.wmax&&(T.wmax=0),T.integral=X,Y.fEntries>1&&(T.entries=Y.fEntries),T}fillStatistic(ce,Y,K){if(this.isIgnoreStatsFill())return!1;let ue=this.countStat(),X=Math.floor(Y%10),Z=Math.floor(Y/10)%10,O=Math.floor(Y/100)%10,P=Math.floor(Y/1e3)%10,x=Math.floor(Y/1e4)%10,p=Math.floor(Y/1e5)%10,w=Math.floor(Y/1e6)%10,m=Math.floor(Y/1e7)%10,_=Math.floor(Y/1e8)%10;if(ce.clearPave(),X>0&&ce.addText(ue.name),Z>0&&ce.addText("Entries = "+ce.format(ue.entries,"entries")),O>0&&(ce.addText("Mean x = "+ce.format(ue.meanx)),ce.addText("Mean y = "+ce.format(ue.meany))),P>0&&(ce.addText("Std Dev x = "+ce.format(ue.rmsx)),ce.addText("Std Dev y = "+ce.format(ue.rmsy))),w>0&&ce.addText("Integral = "+ce.format(ue.matrix[4],"entries")),m>0&&(ce.addText("Skewness x = <undef>"),ce.addText("Skewness y = <undef>")),_>0&&ce.addText("Kurt = <undef>"),x>0||p>0){let F=R=>ue.matrix[R].toFixed(0);ce.addText(`${F(6)} | ${F(7)} | ${F(7)}`),ce.addText(`${F(3)} | ${F(4)} | ${F(5)}`),ce.addText(`${F(0)} | ${F(1)} | ${F(2)}`)}return K&&ce.fillFunctionStat(this.findFunction(M.clTF2),K),!0}drawBinsColor(){const ce=this.getHisto(),Y=this.prepareDraw(),K=this.getContour(),ue=this.getHistPalette(),X=[],Z=this._show_empty_bins,O=1===Y.ybar2&&0===Y.ybar1;let P,x,p,w,m,_,F,R=null,q=!this.options.Zero;const T=()=>{R.path+=`h${P}v${R.y1-R.y2}h${-P}z`,R=null};!q&&!Z&&null===K.getPaletteIndex(ue,0)&&(q=!0);for(let $=Y.i1;$<Y.i2;++$){P=Y.grx[$+1]-Y.grx[$],p=Math.round(Y.grx[$]+P*Y.xbar1),P=Math.round(P*(Y.xbar2-Y.xbar1))||1;for(let J=Y.j2-1;J>=Y.j1;--J){if(m=ce.getBinContent($+1,J+1),_=0===m,_&&q){R&&T();continue}if(F=K.getPaletteIndex(ue,m),null===F){if(!_||!Z){R&&T();continue}F=0}x=Y.gry[J]-Y.gry[J+1]||1,O?w=Y.gry[J+1]:(w=Math.round(Y.gry[J+1]+x*Y.ybar2),x=Math.round(x*(Y.ybar2-Y.ybar1))||1);let ie=`M${p},${w}`,Me=X[F];if(Me){if(O&&Me===R){Me.y1=w+x;continue}{let de=p-Me.x1,fe=w-Me.y2;if(de||fe){let I=`m${de},${fe}`;Me.path+=I.length<ie.length?I:ie}}}else Me=X[F]={path:ie};R&&T(),Me.x1=p,Me.y2=w,O?(Me.y1=w+x,R=Me):Me.path+=`h${P}v${x}h${-P}z`}R&&T()}return X.forEach(($,J)=>{$&&this.draw_g.append("svg:path").attr("fill",ue.getColor(J)).attr("d",$.path)}),Y}buildContour(ce,Y,K,ue){const X=this.getObject(),Z=2004,P=new Float32Array(2*Z),x=new Float32Array(2*Z),p=new Int32Array(2*Z),w=Y.length;let _,F,q,de,fe,I,U,z,le,D,oe,_e,Ee,Ve,Qe,m=0,R=[],T=0,$=[0,0,0,0],J=[0,0,0,0],ie=[0,0,0,0],Me=[0,0,0,0];const et=ft=>{for(let zt=0;zt<w;++zt)if(ft<Y[zt])return zt-1;return w-1},Tt=(ft,zt,Zt,Mt,Ot,sn,wn,Ln)=>{let _n,dn,ci,ir,En=Zt===wn,$n=En?Ln-Mt:wn-Zt,vn=zt+1,rn=Ot-ft,Gt=m-1,qt=999+m,Qt=0;for(;vn<=sn&&Gt<=qt;)ir=Y[vn],ci=ir-ft,dn=ci/rn,_n=$n*dn,En?(P[Gt]=Zt,x[Gt]=Mt+_n):(P[Gt]=Zt+_n,x[Gt]=Mt),p[Gt]=vn,Qt++,Gt+=2,vn++;return Qt};let Bt=ce.original?ce.origx:ce.grx,ve=ce.original?ce.origy:ce.gry;for(fe=ce.j1;fe<ce.j2-1;++fe)for(J[1]=J[0]=(ve[fe]+ve[fe+1])/2,J[3]=J[2]=(ve[fe+1]+ve[fe+2])/2,de=ce.i1;de<ce.i2-1;++de){for(ie[0]=X.getBinContent(de+1,fe+1),ie[1]=X.getBinContent(de+2,fe+1),ie[2]=X.getBinContent(de+2,fe+2),ie[3]=X.getBinContent(de+1,fe+2),I=0;I<4;I++)Me[I]=et(ie[I]);if(Me[0]!==Me[1]||Me[1]!==Me[2]||Me[2]!==Me[3]||Me[3]!==Me[0]){for($[3]=$[0]=(Bt[de]+Bt[de+1])/2,$[2]=$[1]=(Bt[de+1]+Bt[de+2])/2,U=ie[0]<=ie[1]?0:1,z=ie[2]<=ie[3]?2:3,ie[U]>ie[z]&&(U=z),U++,m=1,Ve=1;Ve<=4;Ve++)z=U%4+1,le=Tt(ie[U-1],Me[U-1],$[U-1],J[U-1],ie[z-1],Me[z-1],$[z-1],J[z-1]),m+=2*le,U=z;for(U=ie[0]<=ie[1]?0:1,z=ie[2]<=ie[3]?2:3,ie[U]>ie[z]&&(U=z),U++,m=2,Ve=1;Ve<=4;Ve++)z=1==U?4:U-1,le=Tt(ie[U-1],Me[U-1],$[U-1],J[U-1],ie[z-1],Me[z-1],$[z-1],J[z-1]),m+=2*le,U=z;for(D=0,Ve=1;Ve<=m-5;Ve+=2)for(;p[Ve-1]!=p[Ve];){for(oe=P[Ve],_e=x[Ve],Ee=p[Ve],Qe=Ve;Qe<=m-5;Qe+=2)P[Qe]=P[Qe+2],x[Qe]=x[Qe+2],p[Qe]=p[Qe+2];if(P[m-3]=oe,x[m-3]=_e,p[m-3]=Ee,D>2e3)break;D++}if(D>2e3)continue;for(Ve=1;Ve<=m-2;Ve+=2)_=p[Ve-1],_>=0&&_<Y.length&&(F=R[_],F||(F=R[_]=(0,M.createTPolyLine)(4*Z,!0)),q=F.fLastPoint,q<F.fN-2&&(F.fX[q+1]=Math.round(P[Ve-1]),F.fY[q+1]=Math.round(x[Ve-1]),F.fX[q+2]=Math.round(P[Ve]),F.fY[q+2]=Math.round(x[Ve]),F.fLastPoint=q+2,T=Math.max(T,F.fLastPoint+1)))}}let Je=new Int32Array(Y.length),ct=0;for(_=0;_<Y.length;_++)if(Y[_]>=0){ct=_;break}for(I=0,_=ct-1;_>=0;_--)Je[I]=_,I++;for(_=ct;_<Y.length;_++)Je[I]=_,I++;let We=new Float32Array(2*T),Ke=new Float32Array(2*T);for(I=0;I<Y.length;++I){if(_=Je[I],F=R[_],!F)continue;let sn,wn,$n,ft=K.calcColorIndex(_,Y.length),zt=F.fX,Zt=F.fY,Mt=F.fLastPoint+1,Ot=0,Ln=0,En=0;for(;;){for(sn=T,wn=sn+1,We[sn]=zt[Ot],Ke[sn]=Zt[Ot],We[wn]=zt[Ot+1],Ke[wn]=Zt[Ot+1],zt[Ot]=zt[Ot+1]=Ln,Zt[Ot]=Zt[Ot+1]=En;;){for($n=0,de=2;de<Mt;de+=2)wn<2*T-1&&zt[de]===We[wn]&&Zt[de]===Ke[wn]&&(wn++,We[wn]=zt[de+1],Ke[wn]=Zt[de+1],zt[de]=zt[de+1]=Ln,Zt[de]=Zt[de+1]=En,$n++),sn>0&&zt[de+1]===We[sn]&&Zt[de+1]===Ke[sn]&&(sn--,We[sn]=zt[de],Ke[sn]=Zt[de],zt[de]=zt[de+1]=Ln,Zt[de]=Zt[de+1]=En,$n++);if(0==$n)break}for(sn+1<wn&&sn>=0&&ue(ft,We,Ke,sn,wn,_),Ot=0,de=2;de<Mt;de+=2)if(zt[de]!==Ln&&Zt[de]!==En){Ot=de;break}if(0===Ot)break}}}drawBinsContour(){let ce=this.prepareDraw({rounding:!1,extra:100,original:0!=this.options.Proj}),Y=this.getFramePainter(),K=Y.getFrameWidth(),ue=Y.getFrameHeight(),X=Y.getGrFuncs(this.options.second_x,this.options.second_y),Z=this.getContourLevels(),O=this.getHistPalette(),P=Y.getProjectionFunc();const x=(m,_,F,R,q)=>{let $,J,ie,Me,fe,I,U,T="",de=!1;for(let z=F;z<=R;++z){if(P){let le=P(m[z],_[z]);I=Math.round(X.grx(le.x)),U=Math.round(X.gry(le.y))}else I=Math.round(m[z]),U=Math.round(_[z]);if(T)if(z==R&&F!==R&&I==ie&&U==Me){if(!de)return"";T+="z",q=!1,fe=!0}else{let le=I-$,D=U-J;le?(de=!0,T+=D?`l${le},${D}`:`h${le}`):D&&(de=!0,T+=`v${D}`)}else T=`M${I},${U}`,ie=I,Me=U;$=I,J=U}return!q||fe||P?(q&&(T+="z"),T):"<failed>"},p=(m,_)=>{let F,R,q,T,$,J,ie,Me,de,fe;if(q=m.x2-m.x1,T=m.y2-m.y1,$=_.x2-_.x1,J=_.y2-_.y1,de=q*J-$*T,0==de)return 0;let I=de>0;return F=m.x1-_.x1,R=m.y1-_.y1,ie=q*R-T*F,ie<0==I||(Me=$*R-J*F,Me<0==I)||ie>de==I||Me>de==I?null:(fe=Me/de,{x:Math.round(m.x1+fe*q),y:Math.round(m.y1+fe*T)})};if(14===this.options.Contour){let m=`M0,0h${K}v${ue}h${-K}z`;if(this.options.Proj){let _=ce.j2-ce.j1,F=new Float32Array(2*_),R=new Float32Array(2*_);for(let q=0;q<_;++q)F[q]=ce.origx[ce.i1],R[q]=(ce.origy[ce.j1]*(q+.5)+ce.origy[ce.j2]*(_-.5-q))/_,F[q+_]=ce.origx[ce.i2],R[q+_]=(ce.origy[ce.j2]*(q+.5)+ce.origy[ce.j1]*(_-.5-q))/_;m=x(F,R,0,2*_-1,!0)}this.draw_g.append("svg:path").attr("d",m).style("fill",O.calcColor(0,Z.length))}return this.buildContour(ce,Z,O,(m,_,F,R,q,T)=>{let ie,$=O.getColor(m),J=$;switch(this.options.Contour){case 1:case 14:break;case 11:J="none",ie=new ye.rE({color:$});break;case 12:J="none",ie=new ye.rE({color:1,style:T%5+1,width:1});break;case 13:J="none",ie=this.lineatt}let Me=x(_,F,R,q,"none"!=J);if("<failed>"==Me&&(Me=((m,_,F,R,q)=>{const T=[{x:0,y:0},{x:K,y:0},{x:K,y:ue},{x:0,y:ue}],$=(I,U)=>{let z={x1:m[I],y1:_[I],x2:2*m[I]-m[I+U],y2:2*_[I]-_[I+U]};for(let le=0;le<4;++le){let D=p(z,{x1:T[le].x,y1:T[le].y,x2:T[(le+1)%4].x,y2:T[(le+1)%4].y});if(D)return D.indx=le+.5,D}return null};let J,ie;for(F--;F<R-1&&!J;)J=$(++F,1);for(R++;F<R-1&&J&&!ie;)ie=$(--R,-1);if(!J||!ie)return"";let Me=x(m,_,F,R),de=ie.indx;for(Me+=`L${ie.x},${ie.y}`;Math.abs(de-J.indx)>.1;)de=Math.round(de+.5)%4,Me+=`L${T[de].x},${T[de].y}`,de+=.5;return Me+`L${J.x},${J.y}z`})(_,F,R,q)),!Me)return;let de=this.draw_g.append("svg:path").attr("class","th2_contour").attr("d",Me).style("fill",J);ie&&de.call(ie.func)}),ce.hide_only_zeros=!0,ce}createPolyBin(ce,Y,K){let P,ue="",X="",Z=0,O=0,x=1,p=null;Y.fPoly._typename==M.clTMultiGraph?x=Y.fPoly.fGraphs.arr.length:p=Y.fPoly,K&&(Y._sumx=Y._sumy=Y._suml=0);const w=(_,F,R,q)=>{const T=Math.sqrt((_-R)**2+(F-q)**2);Y._sumx+=(_+R)*T/2,Y._sumy+=(F+q)*T/2,Y._suml+=T},m=()=>{Z&&(X+="h"+Z,Z=0),O&&(X+="v"+O,O=0)};for(P=0;P<x;++P){(!p||P>0)&&(p=Y.fPoly.fGraphs.arr[P]);const _=p.fX,F=p.fY;let R,q,T,J,ie,$=p.fNpoints,Me=Math.round(ce.grx(_[0])),de=Math.round(ce.gry(F[0]));$>2&&_[0]===_[$-1]&&F[0]===F[$-1]&&$--;let fe=`M${Me},${de}`;for(X="",R=1;R<$;++R)q=Math.round(ce.grx(_[R])),T=Math.round(ce.gry(F[R])),K&&w(Me,de,q,T),J=q-Me,ie=T-de,(J||ie)&&(0===J?((0===O||ie<0!=O<0)&&m(),O+=ie):0===ie?((0===Z||J<0!=Z<0)&&m(),Z+=J):(m(),X+="l"+J+","+ie),Me=q,de=T);K&&w(Me,de,Math.round(ce.grx(_[0])),Math.round(ce.gry(F[0]))),m(),X&&(ue+=fe+X+"z")}return K&&(Y._suml>0?(Y._midx=Math.round(Y._sumx/Y._suml),Y._midy=Math.round(Y._sumy/Y._suml)):(Y._midx=Math.round(ce.grx((Y.fXmin+Y.fXmax)/2)),Y._midy=Math.round(ce.gry((Y.fYmin+Y.fYmax)/2)))),ue}drawPolyBinsColor(){var ce=this;return(0,ze.Z)(function*(){let P,x,p,w,m,Y=ce.getObject(),K=ce.getFramePainter(),ue=K.getGrFuncs(ce.options.second_x,ce.options.second_y),X=K.getFrameHeight(),Z=[],O=[],_=Y.fBins.arr.length;ce.maxbin=ce.gmaxbin,ce.minbin=ce.gminbin,ce.minposbin=ce.gminposbin;let F=ce.getContour(!0),R=ce.getHistPalette();for(m=0;m<_;++m)if(p=Y.fBins.arr[m],P=F.getPaletteIndex(R,p.fContent),null!==P){if(0===p.fContent){if(!ce.options.Zero||!ce.options.Line)continue;P=0}p.fXmin>ue.scale_xmax||p.fXmax<ue.scale_xmin||p.fYmin>ue.scale_ymax||p.fYmax<ue.scale_ymin||(x=ce.createPolyBin(ue,p,ce.options.Text&&p.fContent),void 0===Z[P]?Z[P]=x:Z[P]+=x,ce.options.Text&&p.fContent&&O.push(p))}for(P=0;P<Z.length;++P)Z[P]&&(w=ce.draw_g.append("svg:path").style("fill",P?ce.fPalette.getColor(P):"none").attr("d",Z[P]),ce.options.Line&&w.call(ce.lineatt.func));let q=Promise.resolve(!0);if(O.length>0){let Me,T=ce.getColor(Y.fMarkerColor),$=-1*ce.options.TextAngle,J=ce.draw_g.append("svg:g").attr("class","th2poly_text"),ie=1!==Y.fMarkerSize&&$?Math.round(.02*X*Y.fMarkerSize):12;for(ce.startTextDrawing(42,ie,J,ie),m=0;m<O.length;++m)p=O[m],ce.options.TextKind?(Me=p.fPoly?.fName,(!Me||"Graph"==Me)&&(Me=p.fNumber.toString())):Me=Math.round(p.fContent)===p.fContent?p.fContent.toString():(0,je.Ee)(p.fContent,M.gStyle.fPaintTextFormat),ce.drawText({align:22,x:p._midx,y:p._midy,rotate:$,text:Me,color:T,latex:0,draw_g:J});q=ce.finishTextDrawing(J,!0)}return q.then(()=>({poly:!0}))})()}drawBinsText(ce){var Y=this;return(0,ze.Z)(function*(){let ue,X,Z,O,K=Y.getObject(),P=Y.getColor(K.fMarkerColor),x=-1*Y.options.TextAngle,p=Y.draw_g.append("svg:g").attr("class","th2_text"),w=20,m=0,_=Y.matchObjectType(M.clTProfile2D)&&(0,M.isFunc)(K.getBinEntries),F="E"==Y.options.TextKind,R=F&&!Y.options.TextLine?1:0;ce||(ce=Y.prepareDraw({rounding:!1})),1!==K.fMarkerSize&&x&&(w=Math.round(.02*K.fMarkerSize*Y.getFramePainter().getFrameHeight())),0!==K.fBarOffset&&(m=.001*K.fBarOffset),Y.startTextDrawing(42,w,p,w);for(let q=ce.i1;q<ce.i2;++q){let T=ce.grx[q+1]-ce.grx[q];for(let $=ce.j1;$<ce.j2;++$){let J=K.getBinContent(q+1,$+1);if(0===J&&!Y._show_empty_bins)continue;let ie=ce.gry[$]-ce.gry[$+1];_&&(J=K.getBinEntries(q+1,$+1));let Me=J===Math.round(J)?J.toString():(0,je.Ee)(J,M.gStyle.fPaintTextFormat);if(F){let de=K.getBinError(K.getBin(q+1,$+1)),fe=de===Math.round(de)?de.toString():(0,je.Ee)(de,M.gStyle.fPaintTextFormat);Y.options.TextLine?Me+="\xb1"+fe:Me=`#splitline{${Me}}{#pm${fe}}`}x?(ue=Math.round(ce.grx[q]+.5*T),X=Math.round(ce.gry[$+1]+ie*(.5+m)),Z=O=0):(ue=Math.round(ce.grx[q]+.1*T),X=Math.round(ce.gry[$+1]+ie*(.1+m)),Z=Math.round(.8*T),O=Math.round(.8*ie)),Y.drawText({align:22,x:ue,y:X,width:Z,height:O,rotate:x,text:Me,color:P,latex:R,draw_g:p})}}return ce.hide_only_zeros=!0,Y.finishTextDrawing(p,!0).then(()=>ce)})()}drawBinsArrow(){let K,ue,Z,O,P,x,p,w,m,_,F,R,q,T,$,ce=this.getObject(),Y="",X=1e-30,J=this.prepareDraw({rounding:!1}),ie=(J.grx[J.i2]-J.grx[J.i1])/(J.i2-J.i1+1)/2,Me=(J.gry[J.j2]-J.gry[J.j1])/(J.j2-J.j1+1)/2;const de=(fe,I)=>fe?I?`l${fe},${I}`:`h${fe}`:I?`v${I}`:"";for(let fe=0;fe<2;++fe)for(K=J.i1;K<J.i2;++K)for(ue=J.j1;ue<J.j2;++ue)Z=K===J.i1?ce.getBinContent(K+2,ue+1)-ce.getBinContent(K+1,ue+1):K===J.i2-1?ce.getBinContent(K+1,ue+1)-ce.getBinContent(K,ue+1):.5*(ce.getBinContent(K+2,ue+1)-ce.getBinContent(K,ue+1)),O=ue===J.j1?ce.getBinContent(K+1,ue+2)-ce.getBinContent(K+1,ue+1):ue===J.j2-1?ce.getBinContent(K+1,ue+1)-ce.getBinContent(K+1,ue):.5*(ce.getBinContent(K+1,ue+2)-ce.getBinContent(K+1,ue)),0===fe?X=Math.max(X,Math.abs(Z),Math.abs(O)):(P=(J.grx[K]+J.grx[K+1])/2,x=(J.gry[ue]+J.gry[ue+1])/2,p=ie*Z/X,w=Me*O/X,m=P-p,_=P+p,F=x-w,R=x+w,Z=Math.round(_-m),O=Math.round(R-F),(Z||O)&&(Y+=`M${Math.round(m)},${Math.round(F)}${de(Z,O)}`,(Math.abs(Z)>5||Math.abs(O)>5)&&(q=Math.sqrt(9/(Z**2+O**2)),T=Math.round(q*(Z+O)),$=Math.round(q*(Z-O)),(T||$)&&(Y+=`m${-T},${$}${de(T,-$)}${de(-$,-T)}`))));return this.draw_g.append("svg:path").attr("d",Y).style("fill","none").call(this.lineatt.func),J}drawBinsBox(){let ce=this.getObject(),Y=this.prepareDraw({rounding:!1}),K=this.getMainPainter();K===this&&(K.maxbin===K.minbin&&(K.maxbin=K.gmaxbin,K.minbin=K.gminbin,K.minposbin=K.gminposbin),K.maxbin===K.minbin&&(K.minbin=Math.min(0,K.maxbin-1)));let Z,O,P,x,F,R,q,T,$,J,ie,Me,ue=Math.max(Math.abs(K.maxbin),Math.abs(K.minbin)),X=Math.max(0,K.minbin),p="",w="",m="",_="",de=!1,fe=0,I=this.getPadPainter().getRootPad(!0);if(I&&I.fLogz&&ue>0){de=!0;let U=Math.log(ue);fe=X>0?Math.log(X):K.minposbin>=1&&K.minposbin<100?Math.log(.7):K.minposbin>0?Math.log(.7*K.minposbin):U-10,fe>=U&&(fe=U-10),Me=1/(U-fe)}else Me=1/(ue-X);for(Z=Y.i1;Z<Y.i2;++Z)for(O=Y.j1;O<Y.j2;++O)if(P=ce.getBinContent(Z+1,O+1),x=Math.abs(P),!(0===x||x<X)&&(F=de?x>0?Math.log(x)-fe:0:x-X,F=.5*(F<0?1:1-Math.sqrt(F*Me)),F<0&&(F=0),J=Y.grx[Z+1]-Y.grx[Z],ie=Y.gry[O]-Y.gry[O+1],R=F*J,q=F*ie,T=Math.round(Y.grx[Z]+R),$=Math.round(Y.gry[O+1]+q),J=Math.max(Math.round(J-2*R),1),ie=Math.max(Math.round(ie-2*q),1),p+=`M${T},${$}v${ie}h${J}v${-ie}z`,P<0&&10===this.options.BoxStyle&&(w+=`M${T},${$}l${J},${ie}m0,${-ie}l${-J},${ie}`),11===this.options.BoxStyle&&J>5&&ie>5)){const U=Math.round(.1*J),z=Math.round(.1*ie),le=`M${T},${$}h${J}l${-U},${z}h${2*U-J}v${ie-2*z}l${-U},${z}z`,D=`M${T+J},${$+ie}v${-ie}l${-U},${z}v${ie-2*z}h${2*U-J}l${-U},${z}z`;P<0?(_+=le,m+=D):(m+=le,_+=D)}if(p){let U=this.draw_g.append("svg:path").attr("d",p).call(this.fillatt.func);11!==this.options.BoxStyle&&this.fillatt.empty()&&U.call(this.lineatt.func)}if(m&&this.fillatt.hasColor()&&this.draw_g.append("svg:path").attr("d",m).call(this.fillatt.func).style("fill",(0,L.B8)(this.fillatt.color).brighter(.5).formatHex()),_&&this.draw_g.append("svg:path").attr("d",_).call(this.fillatt.func).style("fill",this.fillatt.hasColor()?(0,L.B8)(this.fillatt.color).darker(.5).formatHex():"red"),w){let U=this.draw_g.append("svg:path").attr("d",w).style("fill","none");this.lineatt.empty()?U.style("stroke","black"):U.call(this.lineatt.func)}return Y}drawBinsCandle(){let Me=0;const de=vn=>{let rn=1;for(;vn>=rn;)rn*=10;return rn/=10,Math.floor(Me/rn)%10===Math.floor(vn/rn)},fe=(vn,rn)=>{let Gt="",qt="",Qt=0,_n=vn[0],dn=vn[1];if(_n>="A"&&_n<="Z"&&(Gt=_n),_n>="1"&&_n<="9"&&(qt=_n),dn>="A"&&dn<="Z"&&qt&&(Gt=dn),dn>="1"&&dn<="9"&&Gt&&(qt=dn),rn)switch(qt){case"1":default:Qt+=11311;break;case"2":Qt+=112111;break;case"3":Qt+=112311;break;case"4":Qt+=112321;break;case"5":Qt+=212111;break;case"6":Qt+=312311}else switch(qt){case"1":default:Qt+=13001300;break;case"2":Qt+=13102300}let ci=vn.indexOf("("),ir=vn.lastIndexOf(")");ci>=0&&ir>ci+1&&(Qt=parseInt(vn.slice(ci+1,ir))),Me=Qt,("Y"==Gt||"H"==Gt)&&!de(1e8)&&(Me+=1e8)};this.options.Candle?fe(this.options.Candle,!0):this.options.Violin&&fe(this.options.Violin,!1);let ve,Je,U=this.getHisto(),z=this.prepareDraw(),D=this.getFramePainter().getGrFuncs(this.options.second_x,this.options.second_y),oe="",_e="",Ee="",Ve="",Qe="",et="",Tt="",Bt=null,ct=de(1e8),We=!0,Ke=!1,ft=0,zt=0;if(null!==this.options.Scaled?We=Ke=this.options.Scaled:U.fTitle.indexOf("unscaled")>=0?We=Ke=!1:U.fTitle.indexOf("scaled")>=0&&(We=Ke=!0),We&&(de(2e6)||de(1e6)||de(3e6)))for(let vn=0;vn<this.nbinsx;++vn)for(let rn=0;rn<this.nbinsy;++rn)ft=Math.max(ft,U.getBinContent(vn+1,rn+1));const Zt=(...vn)=>{"array"===vn[1]&&(vn=vn[0]);let rn=vn.length,Gt=2,qt=vn[0],Qt=vn[1],_n=ct?`M${Qt},${qt}`:`M${qt},${Qt}`;for(;Gt<rn;){switch(vn[Gt]){case"Z":return _n+"z";case"V":Qt!=vn[Gt+1]&&(_n+=(ct?"h":"v")+(vn[Gt+1]-Qt),Qt=vn[Gt+1]);break;case"H":qt!=vn[Gt+1]&&(_n+=(ct?"v":"h")+(vn[Gt+1]-qt),qt=vn[Gt+1]);break;default:_n+=ct?`l${vn[Gt+1]-Qt},${vn[Gt]-qt}`:`l${vn[Gt]-qt},${vn[Gt+1]-Qt}`,qt=vn[Gt],Qt=vn[Gt+1]}Gt+=2}return _n},Mt=(vn,rn)=>{et||(this.createAttMarker({attr:U,style:de(3e5)?0:5}),this.markeratt.resetPos()),et+=ct?this.markeratt.create(rn,vn):this.markeratt.create(vn,rn)},Ot=(vn,rn)=>{Bt||(Bt=new Be.M({attr:U,style:24}),Bt.resetPos()),Tt+=ct?Bt.create(rn,vn):Bt.create(vn,rn)};1===U.fMarkerColor&&(U.fMarkerColor=U.fLineColor),z.candle=[];const Ln=[1e-15,.25,.5,.75,1-1e-15],En=(vn,rn,Gt,qt,Qt)=>{let _n=((vn,rn,Gt)=>{let qt=0,Qt=0,_n=0,dn={max:0,first:-1,last:-1,entries:0};for(let Vi=0;Vi<rn.length;++Vi)rn[Vi]>0&&(dn.max=Math.max(dn.max,rn[Vi]),dn.first<0&&(dn.first=Vi),dn.last=Vi),qt+=rn[Vi],_n+=rn[Vi]*(vn[Vi]+vn[Vi+1])/2;if(qt<=0)return null;dn.entries=qt,dn.mean=_n/qt,dn.quantiles=new Array(Gt.length),dn.indx=new Array(Gt.length);let ci=0,ir=0;for(let Vi=0;Vi<rn.length;++Vi){let br=ir,Ur=vn[Vi];if(br===Gt[Qt]&&0===rn[Vi]&&br<.99){for(;0===rn[Vi]&&Vi<rn.length;)Vi++;Ur=(vn[Vi]+Ur)/2}for(ci+=rn[Vi],ir=ci/qt;Gt[Qt]>=br&&Gt[Qt]<ir;){if(dn.indx[Qt]=Vi,dn.quantiles[Qt]=Ur+(Gt[Qt]-br)/(ir-br)*(vn[Vi+1]-Ur),Qt++==Gt.length)return dn;Ur=vn[Vi]}}for(;Qt<Gt.length;)dn.indx[Qt]=rn.length-1,dn.quantiles[Qt++]=vn[vn.length-1];return dn})(ve,Je,Ln);if(!_n)return;let dn={bin:vn,swapXY:ct,fBoxDown:_n.quantiles[1],fMedian:_n.quantiles[2],fBoxUp:_n.quantiles[3]},ci=_n.quantiles[0],ir=_n.quantiles[4],Vi=dn.fBoxUp-dn.fBoxDown;if(de(2e3)){let fo=dn.fBoxDown-1.5*Vi,eo=_n.indx[1];for(;ve[eo]>fo&&eo>0;)eo--;for(;!Je[eo];)eo++;for(ci=ve[eo],fo=dn.fBoxUp+1.5*Vi,eo=_n.indx[3];ve[eo]<fo&&eo<Je.length;)eo++;for(;!Je[eo];)eo--;ir=ve[eo+1]}let br=_n.mean,Ur=1.57*Vi/Math.sqrt(_n.entries);if(ci<=0&&(ct&&D.logx||!ct&&D.logy))return;let cs,Rs,Ar=Gt-rn,es=(rn+Gt)/2+U.fBarOffset/1e3*Ar;U.fBarWidth>0&&1e3!==U.fBarWidth?cs=Rs=Ar*U.fBarWidth/1e3:(cs=.66*Ar,Rs=.8*Ar),We&&ft>0&&(Rs*=_n.max/ft),Ke&&zt>0&&(cs*=_n.entries/zt),dn.x1=Math.round(es-cs/2),dn.x2=Math.round(es+cs/2),es=Math.round(es);let ho=Math.round(es-cs/3),ro=Math.round(es+cs/3),ws=ct?D.grx:D.gry;dn.yy1=Math.round(ws(ir)),dn.y1=Math.round(ws(dn.fBoxUp)),dn.y0=Math.round(ws(dn.fMedian)),dn.y2=Math.round(ws(dn.fBoxDown)),dn.yy2=Math.round(ws(ci));let Es=Math.round(ws(br)),Yo=Math.round(ws(dn.fMedian+Ur)),kl=Math.round(ws(dn.fMedian-Ur));if(de(1e7)&&(Qe+=Zt(es,Math.round(ws(ve[qt])),"V",Math.round(ws(ve[Qt])))),de(10)?_e+=Zt(dn.x1,dn.y0,"H",dn.x2):de(20)?_e+=Zt(ho,dn.y0,"H",ro):de(30)&&Ot(es,dn.y0),de(300)?Ot(es,Es):de(100)&&(Ee+=Zt(dn.x1,Es,"H",dn.x2)),de(1)&&(de(20)?oe+=Zt(dn.x1,dn.y1,"V",Yo,ho,dn.y0,dn.x1,kl,"V",dn.y2,"H",dn.x2,"V",kl,ro,dn.y0,dn.x2,Yo,"V",dn.y1,"Z"):oe+=Zt(dn.x1,dn.y1,"V",dn.y2,"H",dn.x2,"V",dn.y1,"Z")),de(1e4)&&(_e+=Zt(dn.x1,dn.yy1,"H",dn.x2)+Zt(dn.x1,dn.yy2,"H",dn.x2)),de(1e3)&&!de(1e7)?Ee+=Zt(es,dn.y1,"V",dn.yy1)+Zt(es,dn.y2,"V",dn.yy2):(de(1e3)&&de(1e7)||de(2e3))&&(_e+=Zt(es,dn.y1,"V",dn.yy1)+Zt(es,dn.y2,"V",dn.yy2)),de(1e5)||de(2e5)||de(3e5)){let fo=new je.q9(7521*vn+Math.round(_n.integral)),eo=!de(1e5),al=de(3e5);for(let xr=0;xr<Je.length;++xr){let _o=Je[xr],el=(ve[xr]+ve[xr+1])/2,lo=es,Yi=0;if(_o&&!(!eo&&el>=ci&&el<=ir))for(let ga=0;ga<_o;ga++)al&&(lo=es+Math.round((fo.random()-.5)*cs)),Yi=1!=_o||al?Math.round(ws(ve[xr]+fo.random()*(ve[xr+1]-ve[xr]))):Math.round(ws(el)),Mt(lo,Yi)}}if((de(2e6)||de(1e6)||de(3e6))&&_n.max>0&&_n.first>=0){let fo=[],eo=(ct?-.5:.5)*Rs/_n.max;if(qt=Math.max(qt,_n.first),Qt=Math.min(Qt-1,_n.last),de(2e6)||de(3e6)){let al=es,xr=Math.round(ws(ve[qt]));fo.push(al,xr);for(let _o=qt;_o<=Qt;_o++){let el=Math.round(es+eo*Je[_o]),lo=Math.round(ws(ve[_o+1]));el!=al&&(_o!=qt&&fo.push("V",xr),fo.push("H",el)),al=el,xr=lo}fo.push("V",xr)}if(de(1e6)||de(3e6)){let al=es,xr=Math.round(ws(ve[Qt+1]));0==fo.length&&fo.push(al,xr);for(let _o=Qt;_o>=qt;_o--){let el=Math.round(es-eo*Je[_o]),lo=Math.round(ws(ve[_o]));el!=al&&(_o!=Qt&&fo.push("V",xr),fo.push("H",el)),al=el,xr=lo}fo.push("V",xr)}fo.push("H",es),Ve+=Zt(fo,"array"),this.fillatt.empty()||(Ve+="Z")}z.candle.push(dn)};if(ct){ve=new Array(this.nbinsx+1),Je=new Array(this.nbinsx);for(let vn=0;vn<this.nbinsx+1;++vn)ve[vn]=U.fXaxis.GetBinLowEdge(vn+1);if(Ke)for(let vn=0;vn<this.nbinsy;++vn){let rn=0;for(let Gt=0;Gt<this.nbinsx;++Gt)rn+=U.getBinContent(Gt+1,vn+1);zt=Math.max(zt,rn)}for(let vn=z.j1;vn<z.j2;++vn){for(let rn=0;rn<this.nbinsx;++rn)Je[rn]=U.getBinContent(rn+1,vn+1);En(vn,z.gry[vn+1],z.gry[vn],z.i1,z.i2)}}else{ve=new Array(this.nbinsy+1),Je=new Array(this.nbinsy);for(let vn=0;vn<this.nbinsy+1;++vn)ve[vn]=U.fYaxis.GetBinLowEdge(vn+1);if(Ke)for(let vn=0;vn<this.nbinsx;++vn){let rn=0;for(let Gt=0;Gt<this.nbinsy;++Gt)rn+=U.getBinContent(vn+1,Gt+1);zt=Math.max(zt,rn)}for(let vn=z.i1;vn<z.i2;++vn){for(let rn=0;rn<this.nbinsy;++rn)Je[rn]=U.getBinContent(vn+1,rn+1);En(vn,z.grx[vn],z.grx[vn+1],z.j1,z.j2)}}Qe&&U.fFillColor>0&&this.draw_g.append("svg:path").attr("d",Qe).style("stroke",this.getColor(U.fFillColor));let $n=de(1e7)&&0!=U.fFillStyle?this.fillatt.color:this.lineatt.color;if(Ve&&(!this.fillatt.empty()||"none"!=$n)&&this.draw_g.append("svg:path").attr("d",Ve).style("stroke","none"!=$n?$n:null).style("pointer-events",(0,M.isBatchMode)()?null:"visibleFill").call(this.fillatt.func),oe&&this.draw_g.append("svg:path").attr("d",oe).call(this.lineatt.func).call(this.fillatt.func),_e&&this.draw_g.append("svg:path").attr("d",_e).call(this.lineatt.func).style("fill","none"),Ee){let vn=new ye.rE({attr:U,style:2});this.draw_g.append("svg:path").attr("d",Ee).call(vn.func).style("fill","none")}return Tt&&this.draw_g.append("svg:path").attr("d",Tt).call(Bt.func),et&&this.draw_g.append("svg:path").attr("d",et).call(this.markeratt.func),z}drawBinsScatter(){let P,x,p,w,m,_,F,R,ce=this.getObject(),Y=this.prepareDraw({rounding:!0,pixel_density:!0}),K=[],ue=[],X=[],Z=[],O=[],q=1,T=this.options.ScatCoef*(this.gmaxbin>2e3?2e3/this.gmaxbin:1),$=new je.q9(Y.sumz);if(T*Y.sumz<1e5){this.createAttMarker({attr:ce}),this.markeratt.resetPos();let fe="";for(w=Y.i1;w<Y.i2;++w)for(F=Y.grx[w+1]-Y.grx[w],m=Y.j1;m<Y.j2;++m){R=Y.gry[m]-Y.gry[m+1],_=ce.getBinContent(w+1,m+1);let I=Math.round(T*_);if(!(I<=0))for(let U=0;U<I;++U)fe+=this.markeratt.create(Math.round(Y.grx[w]+F*$.random()),Math.round(Y.gry[m+1]+R*$.random()))}return this.draw_g.append("svg:path").attr("d",fe).call(this.markeratt.func),Y}this.maxbin>.7&&(q=.7/this.maxbin);let J=Math.round(Y.max-Y.min),ie=this.createContour(J>50?50:J,this.minposbin,this.maxbin,this.minposbin);for(w=Y.i1;w<Y.i2;++w)for(m=Y.j1;m<Y.j2;++m)_=ce.getBinContent(w+1,m+1),!(_<=0||_<this.minbin)&&(F=Y.grx[w+1]-Y.grx[w],R=Y.gry[m]-Y.gry[m+1],!(F*R<=0)&&(P=ie.getContourIndex(_/F/R),!(P<0)&&(x=`M${Y.grx[w]},${Y.gry[m+1]}`,void 0===K[P]?(K[P]=x,Z[P]=F,O[P]=R):(p=`m${Y.grx[w]-ue[P]},${Y.gry[m+1]-X[P]}`,K[P]+=p.length<x.length?p:x,Z[P]=Math.max(Z[P],F),O[P]=Math.max(O[P],R)),ue[P]=Y.grx[w],X[P]=Y.gry[m+1],K[P]+=`v${R}h${F}v${-R}z`)));let Me=this.getFrameSvg().select(".main_layer"),de=Me.select("defs");for(de.empty()&&K.length>0&&(de=Me.insert("svg:defs",":first-child")),this.createAttMarker({attr:ce}),P=0;P<K.length;++P)if(void 0!==K[P]&&P<ie.arr.length){let fe="scatter_"+P,I=de.select("."+fe);I.empty()?I=de.append("svg:pattern").attr("class",fe).attr("id","jsroot_scatter_pattern_"+M.internals.id_counter++).attr("patternUnits","userSpaceOnUse"):I.selectAll("*").remove();let U=Math.round(q*ie.arr[P]*Z[P]*O[P]);U<1&&(U=1);let z=new Float32Array(U),le=new Float32Array(U);if(1===U)z[0]=le[0]=.5;else for(let oe=0;oe<U;++oe)z[oe]=$.random(),le[oe]=$.random();this.markeratt.resetPos();let D="";for(let oe=0;oe<U;++oe)D+=this.markeratt.create(z[oe]*Z[P],le[oe]*O[P]);I.attr("width",Z[P]).attr("height",O[P]).append("svg:path").attr("d",D).call(this.markeratt.func),this.draw_g.append("svg:path").attr("scatter-index",P).style("fill",`url(#${I.attr("id")})`).attr("d",K[P])}return Y}draw2DBins(){if(this._hide_frame&&this.isMainPainter()&&(this.getFrameSvg().style("display",null),delete this._hide_frame),!this.draw_content)return this.removeG();let ce,Y;if(this.createHistDrawAttributes(),this.createG(!0),this.isTH2Poly()?Y=this.drawPolyBinsColor():(this.options.Scat&&(ce=this.drawBinsScatter()),this.options.Color?ce=this.drawBinsColor():this.options.Box?ce=this.drawBinsBox():this.options.Arrow?ce=this.drawBinsArrow():this.options.Contour?ce=this.drawBinsContour():(this.options.Candle||this.options.Violin)&&(ce=this.drawBinsCandle()),this.options.Text&&(Y=this.drawBinsText(ce)),!ce&&!Y&&(ce=this.drawBinsScatter())),ce)this.tt_handle=ce;else if(Y)return Y.then(K=>{this.tt_handle=K})}drawBinsCircular(){this.getFrameSvg().style("display","none"),this._hide_frame=!0;let ce=this.getPadPainter().getFrameRect(),Y=this.getHisto(),K=this.options.Circular>10?this.getHistPalette():null,Z=Y.fXaxis,O=_=>{if(Z.fLabels)for(let F=0;F<Z.fLabels.arr.length;++F){const R=Z.fLabels.arr[F];if(R.fUniqueID===_+1)return R.fString}return _.toString()};this.createG(),this.draw_g.attr("transform",`translate(${Math.round(ce.x+ce.width/2)},${Math.round(ce.y+ce.height/2)})`);let P=Math.min(this.nbinsx,this.nbinsy);this.startTextDrawing(42,20,this.draw_g);let x=[];for(let _=0;_<P;_++){let F=(.5-_/P)*Math.PI*2,R=Math.round((.9*ce.width/2-32)*Math.cos(F)),q=Math.round((.9*ce.height/2-32)*Math.sin(F)),T=Math.round(.9*ce.width/2*Math.cos(F)),$=Math.round(.9*ce.height/2*Math.sin(F)),J=Math.round(F/Math.PI*180),ie=12,Me=K?K.calcColor(_,P):"black";x.push({x:R,y:q,a:F,color:Me}),(J<-90||J>90)&&(J+=180,ie=32);let de=Math.round(10),fe=2*de;this.draw_g.append("path").attr("d",`M${R-de},${q} a${de},${de},0,1,0,${fe},0a${de},${de},0,1,0,${-fe},0z`).style("stroke",Me).style("fill","none"),this.drawText({align:ie,rotate:J,x:T,y:$,text:O(_)})}let w=0,m=0;if(this.options.Circular>11)for(let _=0;_<P-1;++_)for(let F=_+1;F<P;++F){let R=Y.getBinContent(_+1,F+1);R>0&&(w=Math.max(w,R),(!m||R<m)&&(m=R))}for(let _=0;_<P-1;++_){let F="",R=x[_];for(let q=_+1;q<P;++q){let T=Y.getBinContent(_+1,q+1);if(T<=0)continue;let $=x[q],J=(R.a+$.a)/2,ie=.5*(1-Math.abs(R.a-$.a)/Math.PI),Me=Math.round(ie*ce.width/2*Math.cos(J)),de=Math.round(ie*ce.height/2*Math.sin(J));if(F+=`M${R.x},${R.y}Q${Me},${de},${$.x},${$.y}`,this.options.Circular>11&&w>m){let fe=Math.round((T-m)/(w-m)*7+1);this.draw_g.append("path").attr("d",F).style("stroke",R.color).style("stroke-width",fe).style("fill","none"),F=""}}F&&this.draw_g.append("path").attr("d",F).style("stroke",R.color).style("fill","none")}return this.finishTextDrawing()}drawBinsChord(){var ce=this;return(0,ze.Z)(function*(){ce.getFrameSvg().style("display","none"),ce._hide_frame=!0;let Y=0,K=[],ue=!0,X=Math.min(ce.nbinsx,ce.nbinsy),Z=ce.getHisto();for(let z=0;z<X;++z){let le=0;for(let D=0;D<X;++D){let oe=Z.getBinContent(z+1,D+1);oe>0&&(le+=oe,ue&&Math.round(oe)!==oe&&(ue=!1))}le>0&&K.push(z),Y+=le}if(K.length<2)return!0;let O=ce.getPadPainter().getFrameRect(),P=ce.getHistPalette(),x=.5*Math.min(O.width,O.height)-60,p=x-10,w=[],m=[],_=z=>P.calcColor(z,K.length),F=0,R=1,q=z=>z.toString(),$=(z,le)=>le<z?-1:le>z?1:le>=z?0:Number.NaN;if(!ue&&Y<10){let z=Math.round(Math.log10(Y)-2.3);F=-z,R=Math.pow(10,z)}else if(Y>200){let z=Math.round(Math.log10(Y)-2.3);R=Math.pow(10,z)}250*R<Y?R*=5:100*R<Y&&(R*=2);for(let z=0;z<K.length;++z){w[z]=[];for(let oe=0;oe<K.length;++oe)w[z].push(Z.getBinContent(K[z]+1,K[oe]+1));let le=Z.fXaxis,D="indx_"+K[z].toString();if(le.fLabels)for(let oe=0;oe<le.fLabels.arr.length;++oe){const _e=le.fLabels.arr[oe];if(_e.fUniqueID===K[z]+1){D=_e.fString;break}}m.push(D)}ce.createG(),ce.draw_g.attr("transform",`translate(${Math.round(O.x+O.width/2)},${Math.round(O.y+O.height/2)})`);const ie=(0,L.fF)().padAngle(10/p).sortSubgroups($).sortChords($)(w),Me=ce.draw_g.append("g").attr("font-size",10).attr("font-family","sans-serif").selectAll("g").data(ie.groups).join("g"),de=(0,L.Nb)().innerRadius(p).outerRadius(x),fe=(0,L.N2)().radius(p-1).padAngle(1/p);Me.append("path").attr("fill",z=>_(z.index)).attr("d",de),Me.append("title").text(z=>`${m[z.index]} ${q(z.value)}`);const U=Me.append("g").selectAll("g").data(function I({startAngle:z,endAngle:le,value:D}){const oe=(le-z)/D;let _e=[];for(let Ee=0;Ee<=D;Ee+=R)_e.push({value:Ee,angle:Ee*oe+z});return _e}).join("g").attr("transform",z=>`rotate(${180*z.angle/Math.PI-90}) translate(${x},0)`);return U.append("line").attr("stroke","currentColor").attr("x2",6),U.append("text").attr("x",8).attr("dy","0.35em").attr("transform",z=>z.angle>Math.PI?"rotate(180) translate(-16)":null).attr("text-anchor",z=>z.angle>Math.PI?"end":null).text(z=>(z=>F>3?z.toExponential(0):z.toFixed(F))(z.value)),Me.select("text").attr("font-weight","bold").text(function(z){return"end"===this.getAttribute("text-anchor")?`\u2191 ${m[z.index]}`:`${m[z.index]} \u2193`}),ce.draw_g.append("g").attr("fill-opacity",.8).selectAll("path").data(ie).join("path").style("mix-blend-mode","multiply").attr("fill",z=>_(z.source.index)).attr("d",fe).append("title").text(z=>`${q(z.source.value)} ${m[z.target.index]} \u2192 ${m[z.source.index]}${z.source.index===z.target.index?"":`\n${q(z.target.value)} ${m[z.source.index]} \u2192 ${m[z.target.index]}`}`),!0})()}getBinTooltips(ce,Y){let K=this.getHisto(),ue=K.getBinContent(ce+1,Y+1);K.$baseh&&(ue-=K.$baseh.getBinContent(ce+1,Y+1));let X=[this.getObjectHint(),"x = "+this.getAxisBinTip("x",K.fXaxis,ce),"y = "+this.getAxisBinTip("y",K.fYaxis,Y),`bin = ${K.getBin(ce+1,Y+1)}  x: ${ce+1}  y: ${Y+1}`,"entries = "+(ue===Math.round(ue)?ue:(0,je.Ee)(ue,M.gStyle.fStatFormat))];if("E"==this.options.TextKind||this.matchObjectType(M.clTProfile2D)){let Z=K.getBinError(K.getBin(ce+1,Y+1));X.push("error = "+(Z===Math.round(Z)?Z.toString():(0,je.Ee)(Z,M.gStyle.fPaintTextFormat)))}return X}getCandleTooltips(ce){let K=this.getFramePainter().getGrFuncs(this.options.second_x,this.options.second_y),ue=this.getHisto();return[this.getObjectHint(),ce.swapXY?"y = "+K.axisAsText("y",ue.fYaxis.GetBinLowEdge(ce.bin+1)):"x = "+K.axisAsText("x",ue.fXaxis.GetBinLowEdge(ce.bin+1)),"m-25%  = "+(0,je.Ee)(ce.fBoxDown,M.gStyle.fStatFormat),"median = "+(0,je.Ee)(ce.fMedian,M.gStyle.fStatFormat),"m+25%  = "+(0,je.Ee)(ce.fBoxUp,M.gStyle.fStatFormat)]}getPolyBinTooltips(ce,Y,K){let X=this.getHisto().fBins.arr[ce],O=this.getFramePainter().getGrFuncs(this.options.second_x,this.options.second_y),P=X.fPoly.fName,x=[],p=0;if("Graph"===P&&(P=""),0===P.length&&(P=X.fNumber),void 0===Y&&void 0===K){Y=K=0;let w=X.fPoly,m=1;w._typename===M.clTMultiGraph&&(m=X.fPoly.fGraphs.arr.length,w=null);for(let _=0;_<m;++_){(!w||_>0)&&(w=X.fPoly.fGraphs.arr[_]);for(let F=0;F<w.fNpoints;++F)++p,Y+=w.fX[F],K+=w.fY[F]}p>1&&(Y/=p,K/=p)}return x.push(this.getObjectHint(),"x = "+O.axisAsText("x",Y),"y = "+O.axisAsText("y",K)),p>0&&x.push("npnts = "+p),x.push("bin = "+P),X.fContent===Math.round(X.fContent)?x.push("content = "+X.fContent):x.push("content = "+(0,je.Ee)(X.fContent,M.gStyle.fStatFormat)),x}processTooltipEvent(ce){if(!ce||!this.draw_content||!this.draw_g||!this.tt_handle||this.options.Proj)return this.draw_g&&this.draw_g.select(".tooltip_bin").remove(),null;let Y=this.getHisto(),K=this.tt_handle,ue=this.draw_g.select(".tooltip_bin");if(K.poly){let de,ie=this.getFramePainter().getGrFuncs(this.options.second_x,this.options.second_y),Me=-1;const fe=ie.revertAxis("x",ce.x),I=ie.revertAxis("y",ce.y);if(void 0!==fe&&void 0!==I){const z=Y.fBins.arr.length;for(let le=0;le<z&&Me<0;++le){if(de=Y.fBins.arr[le],fe<de.fXmin||fe>de.fXmax||I<de.fYmin||I>de.fYmax||0===de.fContent&&!this.options.Zero)continue;let D=de.fPoly,oe=1;D._typename===M.clTMultiGraph&&(oe=de.fPoly.fGraphs.arr.length,D=null);for(let _e=0;_e<oe;++_e)if((!D||_e>0)&&(D=de.fPoly.fGraphs.arr[_e]),D.IsInside(fe,I)){Me=le;break}}}if(Me<0)return ue.remove(),null;let U={name:Y.fName,title:Y.fTitle,x:ce.x,y:ce.y,color1:this.lineatt?this.lineatt.color:"green",color2:this.fillatt?this.fillatt.getFillColorAlt("blue"):"blue",exact:!0,menu:!0,lines:this.getPolyBinTooltips(Me,fe,I)};return ce.disabled?(ue.remove(),U.changed=!0):(ue.empty()&&(ue=this.draw_g.append("svg:path").attr("class","tooltip_bin h1bin").style("pointer-events","none")),U.changed=ue.property("current_bin")!==Me,U.changed&&ue.attr("d",this.createPolyBin(ie,de)).style("opacity","0.7").property("current_bin",Me)),U.changed&&(U.user_info={obj:Y,name:Y.fName,bin:Me,cont:de.fContent,grx:ce.x,gry:ce.y}),U}if(K.candle){let J,ie,Me;for(J=0;J<K.candle.length&&(ie=K.candle[J],Me=ie.swapXY?ie.x1<=ce.y&&ce.y<=ie.x2&&ie.yy1>=ce.x&&ce.x>=ie.yy2:ie.x1<=ce.x&&ce.x<=ie.x2&&ie.yy1<=ce.y&&ce.y<=ie.yy2,!Me);++J);if(!Me)return ue.remove(),null;let de={name:Y.fName,title:Y.fTitle,x:ce.x,y:ce.y,color1:this.lineatt?this.lineatt.color:"green",color2:this.fillatt?this.fillatt.getFillColorAlt("blue"):"blue",lines:this.getCandleTooltips(ie),exact:!0,menu:!0};return ce.disabled?(ue.remove(),de.changed=!0):(ue.empty()&&(ue=this.draw_g.append("svg:path").attr("class","tooltip_bin h1bin").style("pointer-events","none").style("opacity","0.7")),de.changed=ue.property("current_bin")!==J,de.changed&&ue.attr("d",ie.swapXY?`M${ie.yy1},${ie.x1}H${ie.yy2}V${ie.x2}H${ie.yy1}Z`:`M${ie.x1},${ie.yy1}H${ie.x2}V${ie.yy2}H${ie.x1}Z`).property("current_bin",J)),de.changed&&(de.user_info={obj:Y,name:Y.fName,bin:J+1,cont:ie.fMedian,binx:J+1,biny:1,grx:ce.x,gry:ce.y}),de}let X,Z,x,p,w,m,_,F,R,q,O=0,P=null,T=this.getFramePainter();if(T.reverse_x)for(X=K.i1;X<K.i2&&!(ce.x<=K.grx[X]&&ce.x>=K.grx[X+1]);++X);else for(X=K.i1;X<K.i2&&!(ce.x>=K.grx[X]&&ce.x<=K.grx[X+1]);++X);if(T.reverse_y)for(Z=K.j1;Z<K.j2&&!(ce.y<=K.gry[Z+1]&&ce.y>=K.gry[Z]);++Z);else for(Z=K.j1;Z<K.j2&&!(ce.y>=K.gry[Z+1]&&ce.y<=K.gry[Z]);++Z);if(X<K.i2&&Z<K.j2){x=X,p=X+1,w=Z,m=Z+1,_=K.grx[x],F=K.grx[p],R=K.gry[m],q=K.gry[w];let J=!0;if(this.options.Color){let ie=F-_,Me=q-R;F=Math.round(_+ie*K.xbar2),_=Math.round(_+ie*K.xbar1),q=Math.round(R+Me*K.ybar2),R=Math.round(R+Me*K.ybar1),T.reverse_x?(ce.x>_||ce.x<=F)&&(J=!1):(ce.x<_||ce.x>=F)&&(J=!1),T.reverse_y?(ce.y>R||ce.y<=q)&&(J=!1):(ce.y<R||ce.y>=q)&&(J=!1)}O=Y.getBinContent(X+1,Z+1),this.is_projection?P=0:J?K.hide_only_zeros?P=0!==O||this._show_empty_bins?0:null:(P=this.getContour().getPaletteIndex(this.getHistPalette(),O),null===P&&0===O&&this._show_empty_bins&&(P=0)):P=null}if(null===P)return ue.remove(),null;let $={name:Y.fName,title:Y.fTitle,x:ce.x,y:ce.y,color1:this.lineatt?this.lineatt.color:"green",color2:this.fillatt?this.fillatt.getFillColorAlt("blue"):"blue",lines:this.getBinTooltips(X,Z),exact:!0,menu:!0};if(this.options.Color&&($.color2=this.getHistPalette().getColor(P)),ce.disabled&&!this.is_projection)ue.remove(),$.changed=!0;else{ue.empty()&&(ue=this.draw_g.append("svg:path").attr("class","tooltip_bin h1bin").style("pointer-events","none"));let J=1e4*X+Z;if("X"==this.is_projection){if(_=0,F=this.getFramePainter().getFrameWidth(),this.projection_width>1){let ie=(this.projection_width-1)/2;m+ie>=K.j2?(m=Math.min(Math.round(m+ie),K.j2),w=Math.max(m-this.projection_width,K.j1)):(w=Math.max(Math.round(w-ie),K.j1),m=Math.min(w+this.projection_width,K.j2))}R=K.gry[m],q=K.gry[w],J=777*w+333*m}else if("Y"==this.is_projection){if(R=0,q=this.getFramePainter().getFrameHeight(),this.projection_width>1){let ie=(this.projection_width-1)/2;p+ie>=K.i2?(p=Math.min(Math.round(p+ie),K.i2),x=Math.max(p-this.projection_width,K.i1)):(x=Math.max(Math.round(x-ie),K.i1),p=Math.min(x+this.projection_width,K.i2))}_=K.grx[x],F=K.grx[p],J=777*x+333*p}$.changed=ue.property("current_bin")!==J,$.changed&&ue.attr("d",`M${_},${R}h${F-_}v${q-R}h${_-F}z`).style("opacity","0.7").property("current_bin",J),this.is_projection&&$.changed&&this.redrawProjection(x,p,w,m)}return $.changed&&($.user_info={obj:Y,name:Y.fName,bin:Y.getBin(X+1,Z+1),cont:O,binx:X+1,biny:Z+1,grx:ce.x,gry:ce.y}),$}canZoomInside(ce,Y,K){if("z"==ce)return!0;let ue=this.getHisto();return ue&&(ue="y"==ce?ue.fYaxis:ue.fXaxis),!ue||ue.FindBin(K,.5)-ue.FindBin(Y,0)>1}completePalette(ce){return!ce||(ce.$main_painter=this,this.options.Zvert=ce._palette_vertical,ce.drawPave(this.options.Cjust?"cjust":""))}draw2D(){var ce=this;return(0,ze.Z)(function*(){return ce.clear3DScene(),ce.drawColorPalette(ce.options.Zscale&&(ce.options.Color||ce.options.Contour),!0).then(K=>{let ue;return ue=ce.options.Circular&&ce.isMainPainter()?ce.drawBinsCircular():ce.options.Chord&&ce.isMainPainter()?ce.drawBinsChord():ce.drawAxes().then(()=>ce.draw2DBins()),ue.then(()=>ce.completePalette(K))}).then(()=>ce.drawHistTitle()).then(()=>ce.drawNextFunction(0,!0)).then(()=>(ce.updateStatWebCanvas(),ce.addInteractivity()))})()}draw3D(ce){var Y=this;return(0,ze.Z)(function*(){return console.log("3D drawing is disabled, load ./hist/TH2Painter.mjs"),Y.draw2D(ce)})()}callDrawFunc(ce){var Y=this;return(0,ze.Z)(function*(){let K=Y.getMainPainter(),ue=Y.getFramePainter();return K!==Y&&ue&&ue.mode3d!==Y.options.Mode3D&&Y.copyOptionsFrom(K),Y.options.Mode3D?Y.draw3D(ce):Y.draw2D(ce)})()}redraw(ce){var Y=this;return(0,ze.Z)(function*(){return Y.callDrawFunc(ce)})()}static draw(ce,Y,K){return(0,ze.Z)(function*(){return Ie.M._drawHist(new He(ce,Y),K)})()}}},9921:($r,At,Ce)=>{"use strict";Ce.d(At,{M:()=>X});var ze=Ce(5835),M=Ce(9542),L=Ce(3038),ye=Ce(3675),Be=Ce(6458),je=Ce(4585),Ze=Ce(49);function He(){const Z=(m,_,F)=>(F<0&&(F+=1),F>1&&(F-=1),F<.16666666666666666?m+6*(_-m)*F:F<.5?_:F<.6666666666666666?m+(_-m)*(.6666666666666666-F)*6:m),O=(m,_,F)=>{const R=_<.5?_*(1+F):_+F-_*F,q=2*_-R,T=Z(q,R,m+1/3),$=Z(q,R,m),J=Z(q,R,m-1/3);return"#"+(0,L.NC)(T)+(0,L.NC)($)+(0,L.NC)(J)},w=[];for(let m=0;m<50;++m)w.push(O((280-5.6*(m+1))/360,.5,1));return new L.VZ(w)}class Y{constructor(){this.reset()}reset(){Object.assign(this,{Axis:0,RevX:!1,RevY:!1,SymlogX:0,SymlogY:0,Bar:!1,BarStyle:0,Curve:!1,Hist:!0,Line:!1,Fill:!1,Error:!1,ErrorKind:-1,errorX:M.gStyle.fErrorX,Mark:!1,Same:!1,Scat:!1,ScatCoef:1,Func:!0,Arrow:!1,Box:!1,BoxStyle:0,Text:!1,TextAngle:0,TextKind:"",Char:0,Color:!1,Contour:0,Cjust:!1,Lego:0,Surf:0,Off:0,Tri:0,Proj:0,AxisPos:0,Spec:!1,Pie:!1,List:!1,Zscale:!1,Zvert:!0,PadPalette:!1,Candle:"",Violin:"",Scaled:null,Circular:0,GLBox:0,GLColor:!1,Project:"",System:1,AutoColor:!1,NoStat:!1,ForceStat:!1,PadStats:!1,PadTitle:!1,AutoZoom:!1,HighRes:0,Zero:!0,Palette:0,BaseLine:!1,Optimize:M.settings.OptimizeDraw,adjustFrame:!1,Mode3D:!1,x3dscale:1,y3dscale:1,Render3D:M.constants.Render3D.Default,FrontBox:!0,BackBox:!0,_pmc:!1,_plc:!1,_pfc:!1,need_fillcol:!1,minimum:M.kNoZoom,maximum:M.kNoZoom,ymin:0,ymax:0})}decode(O,P,x,p,w){this.orginal=O;const m=new ye.pc(O);if(1===P&&x.fSumw2.length>0)for(let J=0;J<x.fSumw2.length;++J)if(x.fSumw2[J]>0){this.Error=!0,this.Hist=!1,this.Zero=!1;break}this.ndim=P||1,this.PadStats=m.check("USE_PAD_STATS"),this.PadPalette=m.check("USE_PAD_PALETTE"),this.PadTitle=m.check("USE_PAD_TITLE"),m.check("PAL",!0)&&(this.Palette=m.partAsInt()),m.check("MINIMUM:",!0)?(this.ominimum=!0,this.minimum=parseFloat(m.part)):(this.ominimum=!1,this.minimum=x.fMinimum),m.check("MAXIMUM:",!0)?(this.omaximum=!0,this.maximum=parseFloat(m.part)):(this.omaximum=!1,this.maximum=x.fMaximum),m.check("HMIN:",!0)?(this.ohmin=!0,this.hmin=parseFloat(m.part)):(this.ohmin=!1,delete this.hmin),m.check("HMAX:",!0)?(this.ohmax=!0,this.hmax=parseFloat(m.part)):(this.ohmax=!1,delete this.hmax),m.check("HTITLE:",!0)&&(x.fTitle=decodeURIComponent(m.part.toLowerCase())),m.check("XTITLE:",!0)&&(x.fXaxis.fTitle=decodeURIComponent(m.part.toLowerCase())),m.check("YTITLE:",!0)&&(x.fYaxis.fTitle=decodeURIComponent(m.part.toLowerCase())),m.check("ZTITLE:",!0)&&(x.fZaxis.fTitle=decodeURIComponent(m.part.toLowerCase())),m.check("_ADJUST_FRAME_")&&(this.adjustFrame=!0),m.check("NOOPTIMIZE")&&(this.Optimize=0),m.check("OPTIMIZE")&&(this.Optimize=2),m.check("AUTOCOL")&&(this.AutoColor=!0),m.check("AUTOZOOM")&&(this.AutoZoom=!0),m.check("OPTSTAT",!0)&&(this.optstat=m.partAsInt()),m.check("OPTFIT",!0)&&(this.optfit=m.partAsInt()),m.check("NOSTAT")&&(this.NoStat=!0),m.check("STAT")&&(this.ForceStat=!0),m.check("NOTOOLTIP")&&w&&w.setTooltipAllowed(!1),m.check("TOOLTIP")&&w&&w.setTooltipAllowed(!0),m.check("SYMLOGX",!0)&&(this.SymlogX=m.partAsInt(0,3)),m.check("SYMLOGY",!0)&&(this.SymlogY=m.partAsInt(0,3)),m.check("X3DSC",!0)&&(this.x3dscale=m.partAsInt(0,100)/100),m.check("Y3DSC",!0)&&(this.y3dscale=m.partAsInt(0,100)/100);let _=!1,F=!1,R="",q=3==P;m.check("LOGXY")&&(_=F=!0),m.check("LOGX")&&(_=!0),m.check("LOGY")&&(F=!0),_&&p&&(p.fLogx=1,p.fUxmin=0,p.fUxmax=1,p.fX1=0,p.fX2=1),F&&p&&(p.fLogy=1,p.fUymin=0,p.fUymax=1,p.fY1=0,p.fY2=1),m.check("LOGZ")&&p&&(p.fLogz=1),m.check("GRIDXY")&&p&&(p.fGridx=p.fGridy=1),m.check("GRIDX")&&p&&(p.fGridx=1),m.check("GRIDY")&&p&&(p.fGridy=1),m.check("TICKXY")&&p&&(p.fTickx=p.fTicky=1),m.check("TICKX")&&p&&(p.fTickx=1),m.check("TICKY")&&p&&(p.fTicky=1),m.getColor=function(){if(this.color=this.partAsInt(1)-1,this.color>=0)return!0;for(let J=0;J<8;++J)if((0,L.Lq)(J).toUpperCase()===this.part)return this.color=J,!0;return!1},m.check("FILL_",!0)&&m.getColor()&&(this.histoFillColor=m.color),m.check("LINE_",!0)&&m.getColor()&&(this.histoLineColor=(0,L.Lq)(m.color)),m.check("XAXIS_",!0)&&m.getColor()&&(x.fXaxis.fAxisColor=x.fXaxis.fLabelColor=x.fXaxis.fTitleColor=m.color),m.check("YAXIS_",!0)&&m.getColor()&&(x.fYaxis.fAxisColor=x.fYaxis.fLabelColor=x.fYaxis.fTitleColor=m.color);let T=!!w&&!!w.getMainPainter();m.check("X+")&&(this.AxisPos=10,this.second_x=T),m.check("Y+")&&(this.AxisPos+=1,this.second_y=T),m.check("SAMES")&&(this.Same=!0,this.ForceStat=!0),m.check("SAME")&&(this.Same=!0,this.Func=!0),m.check("SPEC")&&(this.Spec=!0),(m.check("BASE0")||m.check("MIN0")||M.gStyle.fHistMinimumZero)&&(this.BaseLine=0),m.check("PIE")&&(this.Pie=!0),m.check("CANDLE",!0)&&(this.Candle=m.part||"1"),m.check("VIOLIN",!0)&&(this.Violin=m.part||"1",delete this.Candle),m.check("NOSCALED")&&(this.Scaled=!1),m.check("SCALED")&&(this.Scaled=!0),m.check("GLBOX",!0)&&(this.GLBox=10+m.partAsInt()),m.check("GLCOL")&&(this.GLColor=!0),m.check("GL"),(m.check("CIRCULAR",!0)||m.check("CIRC",!0))&&(this.Circular=11,m.part.indexOf("0")>=0&&(this.Circular=10),m.part.indexOf("1")>=0&&(this.Circular=11),m.part.indexOf("2")>=0&&(this.Circular=12)),this.Chord=m.check("CHORD"),m.check("LEGO",!0)&&(this.Lego=1,m.part.indexOf("0")>=0&&(this.Zero=!1),m.part.indexOf("1")>=0&&(this.Lego=11),m.part.indexOf("2")>=0&&(this.Lego=12),m.part.indexOf("3")>=0&&(this.Lego=13),m.part.indexOf("4")>=0&&(this.Lego=14),R=m.part,m.part.indexOf("Z")>=0&&(this.Zscale=!0)),m.check("R3D_",!0)&&(this.Render3D=M.constants.Render3D.fromString(m.part.toLowerCase())),m.check("SURF",!0)&&(this.Surf=m.partAsInt(10,1),R=m.part,m.part.indexOf("Z")>=0&&(this.Zscale=!0)),m.check("TF3",!0)&&(R=m.part),m.check("ISO",!0)&&(R=m.part),m.check("LIST")&&(this.List=!0),m.check("CONT",!0)&&P>1&&(this.Contour=1,m.part.indexOf("Z")>=0&&(this.Zscale=!0),m.part.indexOf("1")>=0?this.Contour=11:m.part.indexOf("2")>=0?this.Contour=12:m.part.indexOf("3")>=0?this.Contour=13:m.part.indexOf("4")>=0&&(this.Contour=14)),m.check("HBAR",!0)?this.BarStyle=20:m.check("BAR",!0)&&(this.BarStyle=10),this.BarStyle>0&&(this.Hist=!1,this.need_fillcol=!0,this.BarStyle+=m.partAsInt()),m.check("ARR")&&(this.Arrow=!0),m.check("BOX",!0)&&(this.BoxStyle=10+m.partAsInt()),this.Box=this.BoxStyle>0,m.check("CJUST")&&(this.Cjust=!0),m.check("COL")&&(this.Color=!0),m.check("CHAR")&&(this.Char=1),m.check("FUNC")&&(this.Func=!0,this.Hist=!1),m.check("AXIS3D")&&(this.Axis=1,this.Lego=1,q=!0),m.check("AXIS")&&(this.Axis=1),m.check("AXIG")&&(this.Axis=2),m.check("TEXT",!0)&&(this.Text=!0,this.Hist=!1,this.TextAngle=Math.min(m.partAsInt(),90),m.part.indexOf("N")>=0&&(this.TextKind="N"),m.part.indexOf("E0")>=0&&(this.TextLine=!0),m.part.indexOf("E")>=0&&(this.TextKind="E")),m.check("SCAT=",!0)&&(this.Scat=!0,this.ScatCoef=parseFloat(m.part),(!Number.isFinite(this.ScatCoef)||this.ScatCoef<=0)&&(this.ScatCoef=1)),m.check("SCAT")&&(this.Scat=!0),m.check("POL")&&(this.System=2),m.check("CYL")&&(this.System=3),m.check("SPH")&&(this.System=4),m.check("PSR")&&(this.System=5),m.check("TRI",!0)&&(this.Color=!1,this.Tri=1,R=m.part,m.part.indexOf("ERR")>=0&&(this.Error=!0)),m.check("AITOFF")&&(this.Proj=1),m.check("MERCATOR")&&(this.Proj=2),m.check("SINUSOIDAL")&&(this.Proj=3),m.check("PARABOLIC")&&(this.Proj=4),this.Proj>0&&(this.Contour=14),m.check("PROJX",!0)&&(this.Project="X"+m.partAsInt(0,1)),m.check("PROJY",!0)&&(this.Project="Y"+m.partAsInt(0,1)),m.check("PROJ")&&(this.Project="Y1"),R&&(R.indexOf("FB")>=0&&(this.FrontBox=!1),R.indexOf("BB")>=0&&(this.BackBox=!1)),q&&m.check("FB")&&(this.FrontBox=!1),q&&m.check("BB")&&(this.BackBox=!1),this._pfc=m.check("PFC"),this._plc=m.check("PLC")||this.AutoColor,this._pmc=m.check("PMC"),m.check("L")&&(this.Line=!0,this.Hist=!1,this.Error=!1),m.check("F")&&(this.Fill=!0,this.need_fillcol=!0),m.check("A")&&(this.Axis=-1),(m.check("RX")||p&&p.$RX)&&(this.RevX=!0),(m.check("RY")||p&&p.$RY)&&(this.RevY=!0);const $=(J,ie,Me)=>{let de=m.check(J);p&&p["$"+J]&&(de=!0,p["$"+J]=void 0),de&&x&&(x[ie].TestBit(Me)||x[ie].InvertBit(Me))};$("OTX","fXaxis",Be.VO.kOppositeTitle),$("OTY","fYaxis",Be.VO.kOppositeTitle),$("CTX","fXaxis",Be.VO.kCenterTitle),$("CTY","fYaxis",Be.VO.kCenterTitle),m.check("B1")&&(this.BarStyle=1,this.BaseLine=0,this.Hist=!1,this.need_fillcol=!0),m.check("B")&&(this.BarStyle=1,this.Hist=!1,this.need_fillcol=!0),m.check("C")&&(this.Curve=!0,this.Hist=!1),m.check("][")&&(this.Off=1,this.Hist=!0),m.check("HIST")&&(this.Hist=!0,this.Func=!0,this.Error=!1),this.Bar=this.BarStyle>0,delete this.MarkStyle,m.check("P0")&&(this.Mark=!0,this.Hist=!1,this.Zero=!0),m.check("P")&&(this.Mark=!0,this.Hist=!1,this.Zero=!1),m.check("HZ")&&(this.Zscale=!0,this.Zvert=!1),m.check("Z")&&(this.Zscale=!0),m.check("*")&&(this.Mark=!0,this.MarkStyle=3,this.Hist=!1),m.check("H")&&(this.Hist=!0),m.check("E",!0)&&(this.Error=!0,1==P&&(this.Zero=!1,this.Hist=!1,Number.isInteger(parseInt(m.part[0]))&&(this.ErrorKind=parseInt(m.part[0])),(3===this.ErrorKind||4===this.ErrorKind)&&(this.need_fillcol=!0),0===this.ErrorKind&&(this.Zero=!0),m.part.indexOf("X0")>=0&&(this.errorX=0))),m.check("9")&&(this.HighRes=1),m.check("0")&&(this.Zero=!1),this.Color&&m.check("1")&&(this.Zero=!1),(this.Lego>0||3==P||this.Surf>0||this.Error&&2==P)&&(this.Mode3D=!0)}asString(O,P){let x="";return this.Mode3D?(this.Lego?(x="LEGO",this.Zero||(x+="0"),this.Lego>10&&(x+=this.Lego-10),this.Zscale&&(x+="Z")):this.Surf&&(x="SURF"+(this.Surf-10),this.Zscale&&(x+="Z")),this.FrontBox||(x+="FB"),this.BackBox||(x+="BB"),1!==this.x3dscale&&(x+="_X3DSC"+Math.round(100*this.x3dscale)),1!==this.y3dscale&&(x+="_Y3DSC"+Math.round(100*this.y3dscale))):(this.Candle?x="CANDLE"+this.Candle:this.Violin?x="VIOLIN"+this.Violin:this.Scat?x="SCAT":this.Color?(x="COL",this.Zero||(x+="0"),this.Zscale&&(x+=this.Zvert?"Z":"HZ"),this.Axis<0&&(x+="A")):this.Contour?(x="CONT",this.Contour>10&&(x+=this.Contour-10),this.Zscale&&(x+="Z")):this.Bar?x=!1===this.BaseLine?"B":"B1":this.Mark?x=this.Zero?"P0":"P":this.Error?(x="E",this.ErrorKind>=0&&(x+=this.ErrorKind)):this.Line&&(x+="L",this.Fill&&(x+="F")),this.Cjust&&(x+=" CJUST"),this.Text&&(x+="TEXT",this.TextAngle&&(x+=this.TextAngle),x+=this.TextKind)),O&&x&&(this.ForceStat||!0===this.StatEnabled?x+="_STAT":(this.NoStat||!1===this.StatEnabled)&&(x+="_NOSTAT")),O&&P&&x&&(P.fLogx&&(x+="_LOGX"),P.fLogy&&(x+="_LOGY"),P.fLogz&&(x+="_LOGZ"),P.fGridx&&(x+="_GRIDX"),P.fGridy&&(x+="_GRIDY"),P.fTickx&&(x+="_TICKX"),P.fTicky&&(x+="_TICKY")),x}}class K{constructor(O,P){this.arr=[],this.colzmin=O,this.colzmax=P,this.below_min_indx=-1,this.exact_min_indx=0}getLevels(){return this.arr}createNormal(O,P,x){if(P){this.colzmax<=0&&(this.colzmax=1),this.colzmin<=0&&(this.colzmin=void 0===x||x<=0?1e-4*this.colzmax:x<3||x>100?.3*x:1),this.colzmin>=this.colzmax&&(this.colzmin=1e-4*this.colzmax);let p=Math.log(this.colzmin)/Math.log(10),m=(Math.log(this.colzmax)/Math.log(10)-p)/O;this.arr.push(this.colzmin);for(let _=1;_<O;_++)this.arr.push(Math.exp((p+m*_)*Math.log(10)));this.arr.push(this.colzmax),this.custom=!0}else{this.colzmin===this.colzmax&&0!==this.colzmin&&(this.colzmax+=.01*Math.abs(this.colzmax),this.colzmin-=.01*Math.abs(this.colzmin));let p=(this.colzmax-this.colzmin)/O;for(let w=0;w<=O;w++)this.arr.push(this.colzmin+p*w)}}createCustom(O){this.custom=!0;for(let P=0;P<O.length;++P)this.arr.push(O[P]);this.colzmax>this.arr[this.arr.length-1]&&this.arr.push(this.colzmax)}configIndicies(O,P){this.below_min_indx=O,this.exact_min_indx=P}getContourIndex(O){if(O<this.colzmin)return this.below_min_indx;if(O===this.colzmin)return this.exact_min_indx;if(!this.custom)return Math.floor(.01+(O-this.colzmin)*(this.arr.length-1)/(this.colzmax-this.colzmin));let P=0,x=this.arr.length-1;if(O<this.arr[0])return-1;if(O>=this.arr[x])return x;for(;P<x-1;){let p=Math.round((P+x)/2);this.arr[p]>O?x=p:P=p}return P}getPaletteColor(O,P){let x=this.getContourIndex(P);if(x<0)return null;let p=O.calcColorIndex(x,this.arr.length);return O.getColor(p)}getPaletteIndex(O,P){let x=this.getContourIndex(P);return x<0?null:O.calcColorIndex(x,this.arr.length)}}const ue={kNoStats:(0,M.BIT)(9),kUserContour:(0,M.BIT)(10),kCanRebin:(0,M.BIT)(11),kLogX:(0,M.BIT)(15),kIsZoomed:(0,M.BIT)(16),kNoTitle:(0,M.BIT)(17),kIsAverage:(0,M.BIT)(18)};class X extends Be.tK{constructor(O,P){super(O,P),this.draw_content=!0,this.nbinsx=0,this.nbinsy=0,this.accept_drops=!0,this.mode3d=!1,this.hist_painter_id=M.internals.id_counter++}getHisto(){return this.getObject()}getAxis(O){let P=this.getObject();switch(O){case"x":return P?.fXaxis;case"y":return P?.fYaxis;case"z":return P?.fZaxis}return null}isTProfile(){return this.matchObjectType(M.clTProfile)}isTH1K(){return this.matchObjectType("TH1K")}isTH2Poly(){return this.matchObjectType(/^TH2Poly/)||this.matchObjectType(/^TProfile2Poly/)}clear3DScene(){let O=this.getFramePainter();(0,M.isFunc)(O?.create3DScene)&&O.create3DScene(-1),this.mode3d=!1}cleanup(){this.clear3DScene(),delete this.fPalette,delete this.fContour,delete this.options,super.cleanup()}getDimension(){let O=this.getHisto();return O?O._typename.match(/^TH2/)||O._typename.match(/^TProfile2D/)?2:O._typename.match(/^TH3/)?3:this.isTH2Poly()?2:1:0}decodeOptions(O){let P=this.getHisto(),x=this.getDimension(),w=this.getPadPainter()?.getRootPad(!0);this.options?this.options.reset():this.options=new Y,this.options.decode(O||P.fOption,x,P,w,this),this.storeDrawOpt(O)}copyOptionsFrom(O){if(O===this)return;let P=this.options,x=O.options;P.Mode3D=x.Mode3D,P.Zero=x.Zero,x.Mode3D?(P.Lego=x.Lego,P.Surf=x.Surf):(P.Color=x.Color,P.Contour=x.Contour)}copyOptionsToOthers(){this.forEachPainter(O=>{O!==this&&(0,M.isFunc)(O.copyOptionsFrom)&&O.copyOptionsFrom(this)},"objects")}scanContent(){}checkPadRange(O){this.isMainPainter()&&(this.check_pad_range=!O||"pad_range")}createAutoColor(O){if(!O){let p=this.getPadPainter().getRootPad(!0);O=p?.fPrimitves?p.fPrimitves.arr.length:5}let P=this._auto_color||0;this._auto_color=P+1;let x=this.getHistPalette();if(x){O<2&&(O=2),P>=O&&(P=O-1);let p=Math.round(P*(x.getLength()-3)/(O-1)),w=x.getColor(p);return this.addColor(w)}return this._auto_color=this._auto_color%8,P+2}createHistDrawAttributes(){let O=this.getHisto();if(this.options._pfc||this.options._plc||this.options._pmc){let P=this.getMainPainter();if((0,M.isFunc)(P?.createAutoColor)){let x=P.createAutoColor();this.options._pfc&&(O.fFillColor=x,delete this.fillatt),this.options._plc&&(O.fLineColor=x,delete this.lineatt),this.options._pmc&&(O.fMarkerColor=x,delete this.markeratt),this.options._pfc=this.options._plc=this.options._pmc=!1}}this.createAttFill({attr:O,color:this.options.histoFillColor,kind:1}),this.createAttLine({attr:O,color0:this.options.histoLineColor})}setSnapId(O){this.snapid=O,this.getPadPainter().forEachPainterInPad(P=>{if(P.child_painter_id===this.hist_painter_id){let x=P.getObject();x&&x.fName&&(P.snapid=O+"#func_"+x.fName)}},"objects")}updateObject(O,P,x){let p=this.getHisto(),w=this.getFramePainter(),m=this.getPadPainter();if(O!==p){if(!this.matchObjectType(O))return!1;let _=m?.findPainterFor(this.findStat());p.TestBit(ue.kNoStats)!=O.TestBit(ue.kNoStats)&&(p.fBits=O.fBits,_&&(_.Enabled=!p.TestBit(ue.kNoStats))),void 0!==this.snapid&&(p.fName=O.fName),p.fFillColor=O.fFillColor,p.fFillStyle=O.fFillStyle,p.fLineColor=O.fLineColor,p.fLineStyle=O.fLineStyle,p.fLineWidth=O.fLineWidth,p.fEntries=O.fEntries,p.fTsumw=O.fTsumw,p.fTsumwx=O.fTsumwx,p.fTsumwx2=O.fTsumwx2,p.fXaxis.fNbins=O.fXaxis.fNbins,this.getDimension()>1&&(p.fTsumwy=O.fTsumwy,p.fTsumwy2=O.fTsumwy2,p.fTsumwxy=O.fTsumwxy,p.fYaxis.fNbins=O.fYaxis.fNbins,this.getDimension()>2&&(p.fTsumwz=O.fTsumwz,p.fTsumwz2=O.fTsumwz2,p.fTsumwxz=O.fTsumwxz,p.fTsumwyz=O.fTsumwyz,p.fZaxis.fNbins=O.fZaxis.fNbins));const F=(q,T,$)=>{T.fTitle=$.fTitle,T.fLabels=$.fLabels,T.fXmin=$.fXmin,T.fXmax=$.fXmax,T.fTimeDisplay=$.fTimeDisplay,T.fTimeFormat=$.fTimeFormat,T.fAxisColor=$.fAxisColor,T.fLabelColor=$.fLabelColor,T.fLabelFont=$.fLabelFont,T.fLabelOffset=$.fLabelOffset,T.fLabelSize=$.fLabelSize,T.fNdivisions=$.fNdivisions,T.fTickLength=$.fTickLength,T.fTitleColor=$.fTitleColor,T.fTitleFont=$.fTitleFont,T.fTitleOffset=$.fTitleOffset,T.fTitleSize=$.fTitleSize,this.snapid&&(!w||!w.zoomChangedInteractive(q))&&(T.fFirst=$.fFirst,T.fLast=$.fLast,T.fBits=$.fBits)};if(F("x",p.fXaxis,O.fXaxis),F("y",p.fYaxis,O.fYaxis),F("z",p.fZaxis,O.fZaxis),p.fArray=O.fArray,p.fNcells=O.fNcells,p.fTitle=O.fTitle,p.fMinimum=O.fMinimum,p.fMaximum=O.fMaximum,p.fSumw2=O.fSumw2,this.isTProfile()?p.fBinEntries=O.fBinEntries:this.isTH1K()?(p.fNIn=O.fNIn,p.fReady=0):this.isTH2Poly()&&(p.fBins=O.fBins),this.options.Func){let q=[],T=[],$=[],J=this.hist_painter_id;if(m&&m.forEachPainterInPad(ie=>{ie.child_painter_id===J&&q.push(ie)},"objects"),O.fFunctions)for(let ie=0;ie<O.fFunctions.arr.length;++ie){let Me=O.fFunctions.arr[ie];if(!Me?._typename||!this.needDrawFunc(p,Me))continue;let de=null,fe=-1;for(let I=0;I<q.length;++I)if(q[I].matchObjectType(Me._typename)&&q[I].getObject().fName===Me.fName){de=q[I],fe=I;break}!de&&Me.fName&&(de=m?m.findPainterFor(null,Me.fName,Me._typename):null),de?(de.updateObject(Me),fe>=0&&(q.splice(fe,1),$.push(de))):T.push(Me)}if(_){let ie=q.indexOf(_);ie>=0&&q.splice(ie,1)}m&&q.length>0&&m.cleanPrimitives(ie=>q.indexOf(ie)>=0),T.length>0&&(this._extraFunctions=T),x&&$.length>0&&(this._extraPainters=$)}let R=p.fOption!=O.fOption;p.fOption=O.fOption,(void 0!==P&&this.options.original!==P||R)&&this.decodeOptions(P||p.fOption)}return this.options.ominimum||(this.options.minimum=p.fMinimum),this.options.omaximum||(this.options.maximum=p.fMaximum),(this.snapid||!w||!w.zoomChangedInteractive())&&this.checkPadRange(),this.scanContent(),this.histogram_updated=!0,!0}extractAxesProperties(O){const P=p=>{p.fXbins.length>=p.fNbins?(p.regular=!1,p.GetBinCoord=function(w){let m=Math.round(w);if(m<=0)return this.fXmin;if(m>this.fNbins)return this.fXmax;if(m==w)return this.fXbins[m];let _=w<m?m-1:m+1;return this.fXbins[m]*Math.abs(w-_)+this.fXbins[_]*Math.abs(w-m)},p.FindBin=function(w,m){for(let _=1;_<this.fXbins.length;++_)if(w<this.fXbins[_])return Math.floor(_-1+m);return this.fNbins}):(p.regular=!0,p.binwidth=(p.fXmax-p.fXmin)/(p.fNbins||1),p.GetBinCoord=function(w){return this.fXmin+w*this.binwidth},p.FindBin=function(w,m){return Math.floor((w-this.fXmin)/this.binwidth+m)})};this.nbinsx=this.nbinsy=this.nbinsz=0;const x=this.getHisto();this.nbinsx=x.fXaxis.fNbins,this.xmin=x.fXaxis.fXmin,this.xmax=x.fXaxis.fXmax,P(x.fXaxis),this.ymin=x.fYaxis.fXmin,this.ymax=x.fYaxis.fXmax,1==O&&this.options.ohmin&&this.options.ohmax&&(this.ymin=this.options.hmin,this.ymax=this.options.hmax),O>1&&(this.nbinsy=x.fYaxis.fNbins,P(x.fYaxis),this.zmin=x.fZaxis.fXmin,this.zmax=x.fZaxis.fXmax,2==O&&this.options.ohmin&&this.options.ohmax&&(this.zmin=this.options.hmin,this.zmax=this.options.hmax)),O>2&&(this.nbinsz=x.fZaxis.fNbins,P(x.fZaxis))}drawAxes(){var O=this;return(0,ze.Z)(function*(){let P=O.getFramePainter();if(!P)return!1;let x=O.getHisto();if(O.ymin===O.ymax&&(O.ymax+=1),!O.isMainPainter()){let p={second_x:O.options.AxisPos>=10,second_y:O.options.AxisPos%10==1,hist_painter:O};return!(!p.second_x&&!p.second_y||P.hasDrawnAxes(p.second_x,p.second_y))&&(P.setAxes2Ranges(p.second_x,x.fXaxis,O.xmin,O.xmax,p.second_y,x.fYaxis,O.ymin,O.ymax),P.createXY2(p),P.drawAxes2(p.second_x,p.second_y))}if(O.options.adjustFrame){let p=O.getPadPainter().getRootPad();p&&(p.fUxmin<p.fUxmax&&(P.fX1NDC=(O.xmin-p.fUxmin)/(p.fUxmax-p.fUxmin),P.fX2NDC=(O.xmax-p.fUxmin)/(p.fUxmax-p.fUxmin)),p.fUymin<p.fUymax&&(P.fY1NDC=(O.ymin-p.fUymin)/(p.fUymax-p.fUymin),P.fY2NDC=(O.ymax-p.fUymin)/(p.fUymax-p.fUymin)),p.fLeftMargin=P.fX1NDC,p.fRightMargin=1-P.fX2NDC,p.fBottomMargin=P.fY1NDC,p.fTopMargin=1-P.fY2NDC,p.fFrameLineColor=0,p.fFrameLineWidth=0,P.setRootPadRange(p),P.fillatt.setSolidColor("none"),P.redraw()),O.options.adjustFrame=!1}return P.setAxesRanges(x.fXaxis,O.xmin,O.xmax,x.fYaxis,O.ymin,O.ymax,x.fZaxis,0,0),P.createXY({ndim:O.getDimension(),check_pad_range:O.check_pad_range,zoom_ymin:O.zoom_ymin,zoom_ymax:O.zoom_ymax,ymin_nz:O.ymin_nz,swap_xy:O.options.BarStyle>=20,reverse_x:O.options.RevX,reverse_y:O.options.RevY,symlog_x:O.options.SymlogX,symlog_y:O.options.SymlogY,Proj:O.options.Proj,extra_y_space:O.options.Text&&O.options.BarStyle>0,hist_painter:O}),delete O.check_pad_range,!O.options.Same&&P.drawAxes(!1,O.options.Axis<0,O.options.Axis<0,O.options.AxisPos,O.options.Zscale&&O.options.Zvert,O.options.Zscale&&!O.options.Zvert)})()}processOnlineChange(O){let P=this.getCanvPainter();(0,M.isFunc)(P?.processChanges)&&P.processChanges(O,this)}toggleTitle(O){let P=this.getHisto();return!(!this.isMainPainter()||!P)&&("only-check"===O?!P.TestBit(ue.kNoTitle):(P.InvertBit(ue.kNoTitle),void this.drawHistTitle().then(()=>this.processOnlineChange(`exec:SetBit(TH1::kNoTitle,${P.TestBit(ue.kNoTitle)?1:0})`))))}drawHistTitle(){var O=this;return(0,ze.Z)(function*(){if(!O.isMainPainter()||O.options.Same)return O;let P=O.getHisto(),x=M.gStyle,p=O.getPadPainter(),w=p?.findPainterFor(null,"title"),m=w?.getObject(),_=!P.TestBit(ue.kNoTitle)&&x.fOptTitle>0;if(!m&&(0,M.isFunc)(p?.findInPrimitives)&&(m=p.findInPrimitives("title",M.clTPaveText)),m){if(m.Clear(),_&&m.AddText(P.fTitle),w)return w.redraw().then(()=>O)}else if(_&&!w&&P.fTitle&&!O.options.PadTitle)return m=(0,M.create)(M.clTPaveText),Object.assign(m,{fName:"title",fFillColor:x.fTitleColor,fFillStyle:x.fTitleStyle,fBorderSize:x.fTitleBorderSize,fTextFont:x.fTitleFont,fTextSize:x.fTitleFontSize,fTextColor:x.fTitleTextColor,fTextAlign:x.fTitleAlign}),m.AddText(P.fTitle),je.TPavePainter.draw(O.getDom(),m,"postitle").then(F=>(F&&(F.$secondary=!0),O));return O})()}processTitleChange(O){let P=this.getHisto(),p=this.getPadPainter()?.findPainterFor(null,"title");return P&&p?"check"===O?!this.isMainPainter()||this.options.Same?null:P:(p.clearPave(),p.addText(P.fTitle),p.redraw(),void this.submitCanvExec(`SetTitle("${P.fTitle}")`)):null}updateStatWebCanvas(){if(!this.snapid)return;let O=this.findStat(),P=this.getPadPainter()?.findPainterFor(O);P&&!P.snapid&&P.redraw()}findStat(){return this.options.PadStats?this.getPadPainter()?.findPainterFor(null,"stats",M.clTPaveStats)?.getObject():this.findFunction(M.clTPaveStats,"stats")}toggleStat(O){let p,w,P=this.findStat(),x=this.getPadPainter();if(O||(O=""),P)p=x?.findPainterFor(P);else{if(O.indexOf("-check")>0)return!1;P=this.createStat(!0)}if("only-check"==O)return p?.Enabled||!1;if("fitpar-check"==O)return P?.fOptFit||!1;if("fitpar-toggle"==O)return!!P&&(P.fOptFit=P.fOptFit?0:1111,p?.redraw(),!0);if(p)p.Enabled=!p.Enabled,this.options.StatEnabled=p.Enabled,p.redraw(),w=p.Enabled;else{let m=this.selectCurrentPad(this.getPadName());je.TPavePainter.draw(this.getDom(),P).then(()=>this.selectCurrentPad(m)),w=!0}return this.processOnlineChange(`exec:SetBit(TH1::kNoStats,${w?0:1})`,this),w}isIgnoreStatsFill(){return!this.getObject()||!this.draw_content&&!this.create_stats&&!this.snapid||this.options.Axis>0}createStat(O){let P=this.getHisto();if(this.options.PadStats||!P||!O&&!this.options.ForceStat&&(this.options.NoStat||P.TestBit(ue.kNoStats)||!M.settings.AutoStat||this.options.Axis>0||!this.isMainPainter()))return null;let x=this.findStat(),p=M.gStyle,w=this.options.optstat,m=this.options.optfit;return void 0!==w?(x&&(x.fOptStat=w),delete this.options.optstat):w=P.$custom_stat||p.fOptStat,void 0!==m?(x&&(x.fOptFit=m),delete this.options.optfit):m=p.fOptFit,x||w||m?(this.create_stats=!0,x||(x=(0,M.create)(M.clTPaveStats),Object.assign(x,{fName:"stats",fOptStat:w,fOptFit:m,fX1NDC:p.fStatX-p.fStatW,fY1NDC:p.fStatY-p.fStatH,fX2NDC:p.fStatX,fY2NDC:p.fStatY,fTextAlign:12}),(P._typename.match(/^TProfile/)||P._typename.match(/^TH2/))&&(x.fY1NDC=.67),x.AddText(P.fName),this.addFunction(x),x)):null}findFunction(O,P){let x=this.getHisto()?.fFunctions?.arr;if(!x)return null;for(let p=0;p<x.length;++p){let w=x[p];if((!P||w.fName===P)&&w._typename===O)return w}return null}addFunction(O,P){let x=this.getHisto();!x||!O||(x.fFunctions||(x.fFunctions=(0,M.create)(M.clTList)),P?x.fFunctions.AddFirst(O):x.fFunctions.Add(O))}needDrawFunc(O,P){return P._typename===M.clTPaveStats?!O.TestBit(ue.kNoStats)&&!this.options.NoStat:P._typename===M.clTF1?!P.TestBit((0,M.BIT)(9)):P._typename!==M.clTPaletteAxis}drawNextFunction(O,P){var x=this;return(0,ze.Z)(function*(){let p=x.getHisto(),w=null,m="";if(P){if(x._extraPainters){let T=x._extraPainters.shift();return 0==x._extraPainters.length&&delete x._extraPainters,(0,M.getPromise)(T.redraw()).then(()=>x.drawNextFunction(O,P))}x._extraFunctions&&O<x._extraFunctions.length?w=x._extraFunctions[O]:delete x._extraFunctions}else x.options.Func&&p.fFunctions&&O<p.fFunctions.arr.length&&(w=p.fFunctions.arr[O],m=p.fFunctions.opt[O]);if(!w)return!0;let _=x.getPadPainter(),F=!1;return _?.findPainterFor(w)||(F=x.needDrawFunc(p,w)),F?(w.$histo=p,(je.TPavePainter.canDraw(w)?je.TPavePainter.draw(x.getDom(),w,m):_.drawObject(x.getDom(),w,m)).then(T=>((0,M.isObject)(T)&&(T.child_painter_id=x.hist_painter_id),x.drawNextFunction(O+1,P)))):x.drawNextFunction(O+1,P)})()}getSelectIndex(O,P,x){let p=0,w=this["nbins"+O]||0,m=this.getAxis(O);this.options.second_x&&"x"==O&&(O="x2"),this.options.second_y&&"y"==O&&(O="y2");let _=this.getFramePainter(),F=_?_[`zoom_${O}min`]:0,R=_?_[`zoom_${O}max`]:0;return F!==R&&m?(p="left"==P?m.FindBin(F,x||0):m.FindBin(R,(x||0)+.5),p<0?p=0:p>w&&(p=w)):p="left"==P?0:w,m&&(m.fFirst===m.fLast||!m.TestBit(Be.VO.kAxisRange)||m.fFirst<=1&&m.fLast>=w)&&(m=void 0),"left"==P?(p<0&&(p=0),m&&m.fFirst>1&&p<m.fFirst&&(p=m.fFirst-1)):(p>w&&(p=w),m&&m.fLast<=w&&p>m.fLast&&(p=m.fLast)),p}unzoomUserRange(O,P,x){let p=!1,w=this.getHisto();if(!w)return!1;let m=F=>!(!F||!F.TestBit(Be.VO.kAxisRange)||F.fFirst===F.fLast||F.fFirst<=1&&F.fLast>=F.fNbins||(F.InvertBit(Be.VO.kAxisRange),0)),_=F=>!(this.getDimension()!==F||this.options.minimum===M.kNoZoom&&this.options.maximum===M.kNoZoom||!this.draw_content||(this.options.minimum=this.options.maximum=M.kNoZoom,this.scanContent(!0),0));return O&&m(w.fXaxis)&&(p=!0),P&&(m(w.fYaxis)||_(1))&&(p=!0),x&&(m(w.fZaxis)||_(2))&&(p=!0),p}addInteractivity(){var O=this;return(0,ze.Z)(function*(){let P=O.isMainPainter(),x=O.options.AxisPos>0,p=P||x?O.getFramePainter():null;return!!p&&p.addInteractivity(!P&&x)})()}changeUserRange(O,P){let x=this.getHisto(),p=x?x["f"+P+"axis"]:null;if(!p)return;let w="[1,"+p.fNbins+"]";p.TestBit(Be.VO.kAxisRange)&&(w="["+p.fFirst+","+p.fLast+"]"),O.input(`Enter user range for axis ${P} like [1,${p.fNbins}]`,w).then(m=>{if(!m||!(m=JSON.parse(m))||2!=m.length)return;let _=parseInt(m[0]),F=parseInt(m[1]);Number.isInteger(_)&&Number.isInteger(F)&&(p.fFirst=_,p.fLast=F,(p.fFirst<p.fLast&&p.fFirst>=1&&p.fLast<=p.fNbins)!=p.TestBit(Be.VO.kAxisRange)&&p.InvertBit(Be.VO.kAxisRange),this.interactiveRedraw())})}changeValuesRange(O){let P;P=this.options.minimum!=M.kNoZoom&&this.options.maximum!=M.kNoZoom?`[${this.options.minimum},${this.options.maximum}]`:`[${this.gminbin},${this.gmaxbin}]`,O.input("Enter min/max hist values or empty string to reset",P).then(x=>{x=x?JSON.parse(x):[],(0,M.isObject)(x)&&2==x.length&&Number.isFinite(x[0])&&Number.isFinite(x[1])?(this.options.minimum=x[0],this.options.maximum=x[1]):this.options.minimum=this.options.maximum=M.kNoZoom,this.interactiveRedraw()})}fillContextMenu(O){let P=this.getHisto(),x=this.getFramePainter();if(P){if(O.add("header:"+P._typename+"::"+P.fName),this.options.Axis<=0&&O.addchk(this.toggleStat("only-check"),"Show statbox",()=>this.toggleStat()),P.fTitle&&this.isMainPainter()&&O.addchk(this.toggleTitle("only-check"),"Show title",()=>this.toggleTitle()),this.draw_content&&(1==this.getDimension()?O.add("User range X",()=>this.changeUserRange(O,"X")):(O.add("sub:User ranges"),O.add("X",()=>this.changeUserRange(O,"X")),O.add("Y",()=>this.changeUserRange(O,"Y")),this.getDimension()>2?O.add("Z",()=>this.changeUserRange(O,"Z")):O.add("Values",()=>this.changeValuesRange(O)),O.add("endsub:")),(0,M.isFunc)(this.fillHistContextMenu)&&this.fillHistContextMenu(O)),this.options.Mode3D){O.size()>0&&O.add("separator");let p=this.getMainPainter()||this;O.addchk(p.isTooltipAllowed(),"Show tooltips",function(){p.setTooltipAllowed("toggle")}),O.addchk(x.enable_highlight,"Highlight bins",function(){x.enable_highlight=!x.enable_highlight,!x.enable_highlight&&x.highlightBin3D&&x.mode3d&&x.highlightBin3D(null)}),(0,M.isFunc)(x?.render3D)&&(O.addchk(p.options.FrontBox,"Front box",function(){p.options.FrontBox=!p.options.FrontBox,x.render3D()}),O.addchk(p.options.BackBox,"Back box",function(){p.options.BackBox=!p.options.BackBox,x.render3D()})),this.draw_content&&(O.addchk(!this.options.Zero,"Suppress zeros",function(){this.options.Zero=!this.options.Zero,this.interactiveRedraw("pad")}),(12==this.options.Lego||14==this.options.Lego)&&(O.addchk(this.options.Zscale,"Z scale",()=>this.toggleColz()),this.fillPaletteMenu&&this.fillPaletteMenu(O))),(0,M.isFunc)(p.control?.reset)&&O.add("Reset camera",function(){p.control.reset()})}return O.addAttributesMenu(this),this.histogram_updated&&x.zoomChangedInteractive()&&O.add("Let update zoom",function(){x.zoomChangedInteractive("reset")}),!0}}autoZoom(){}clickButton(O){let P=this.getFramePainter();if(!this.isMainPainter()||!P)return!1;switch(O){case"ToggleZoom":if(P.zoom_xmin!==P.zoom_xmax||P.zoom_ymin!==P.zoom_ymax||P.zoom_zmin!==P.zoom_zmax)return P.unzoom(),P.zoomChangedInteractive("reset"),!0;if(this.draw_content)return this.autoZoom(),!0;break;case"ToggleLogX":P.toggleAxisLog("x");break;case"ToggleLogY":P.toggleAxisLog("y");break;case"ToggleLogZ":P.toggleAxisLog("z");break;case"ToggleStatBox":return this.toggleStat(),!0}return!1}fillToolbar(O){let P=this.getPadPainter();P&&(P.addPadButton("auto_zoom","Toggle between unzoom and autozoom-in","ToggleZoom","Ctrl *"),P.addPadButton("arrow_right","Toggle log x","ToggleLogX","PageDown"),P.addPadButton("arrow_up","Toggle log y","ToggleLogY","PageUp"),this.getDimension()>1&&P.addPadButton("arrow_diag","Toggle log z","ToggleLogZ"),this.options.Axis<=0&&P.addPadButton("statbox","Toggle stat box","ToggleStatBox"),O||P.showPadButtons())}get3DToolTip(O){let P=this.getHisto(),x={bin:O,name:P.fName,title:P.fTitle};switch(this.getDimension()){case 1:x.ix=O,x.iy=1,x.value=P.getBinContent(x.ix),x.error=P.getBinError(O),x.lines=this.getBinTooltips(O-1);break;case 2:x.ix=O%(this.nbinsx+2),x.iy=(O-x.ix)/(this.nbinsx+2),x.value=P.getBinContent(x.ix,x.iy),x.error=P.getBinError(O),x.lines=this.getBinTooltips(x.ix-1,x.iy-1);break;case 3:x.ix=O%(this.nbinsx+2),x.iy=(O-x.ix)/(this.nbinsx+2)%(this.nbinsy+2),x.iz=(O-x.ix-x.iy*(this.nbinsx+2))/(this.nbinsx+2)/(this.nbinsy+2),x.value=P.getBinContent(x.ix,x.iy,x.iz),x.error=P.getBinError(O),x.lines=this.getBinTooltips(x.ix-1,x.iy-1,x.iz-1)}return x}createContour(O,P,x,p,w){let m=new K(P,x);if(w)m.createCustom(w);else{O<2&&(O=M.gStyle.fNumberContours);let F=this.getPadPainter().getRootPad(!0);m.createNormal(O,F?F.fLogz:0,p)}m.configIndicies(this.options.Zero?-1:0,0!=m.colzmin||!this.options.Zero||this.isTH2Poly()?0:-1);let _=this.getFramePainter();return this.getDimension()<3&&_&&(_.zmin=m.colzmin,_.zmax=m.colzmax),this.fContour=m,m}getContour(O){if(this.fContour&&!O)return this.fContour;let P=this.getMainPainter(),x=this.getFramePainter();if(P?.fContour&&P!==this)return this.fContour=P.fContour,this.fContour;let m,q,p=this.getObject(),w=0,_=this.minbin,F=this.maxbin,R=this.minposbin;_===F&&(_=this.gminbin,F=this.gmaxbin,R=this.gminposbin);let T=_,$=F;this.options.minimum!==M.kNoZoom&&(_=this.options.minimum,T=Math.min(T,_),m=!0),this.options.maximum!==M.kNoZoom&&(F=this.options.maximum,$=Math.max($,F),m=!1),_>=F&&(m?F=_+1:_=F-1),x&&x.zoom_zmin!=x.zoom_zmax&&(_=x.zoom_zmin,F=x.zoom_zmax),p.fContour&&p.fContour.length>1&&(p.TestBit(ue.kUserContour)?q=p.fContour:w=p.fContour.length);let J=this.createContour(w,_,F,R,q);return this.getDimension()<3&&x&&(x.zmin=T,x.zmax=$,T!=J.colzmin||$!=J.colzmax?(x.zoom_zmin=J.colzmin,x.zoom_zmax=J.colzmax):x.zoom_zmin=x.zoom_zmax=void 0),J}getContourLevels(){return this.getContour().getLevels()}getHistPalette(O){if(O&&(this.fPalette=null),!this.fPalette&&!this.options.Palette){let P=this.getPadPainter();(0,M.isFunc)(P?.getCustomPalette)&&(this.fPalette=P.getCustomPalette())}return this.fPalette||(this.fPalette=function ce(Z){if((Z=Z||M.settings.Palette)>0&&Z<10)return function Oe(){let Z=[];for(let O=0;O<50;++O){const P=(0,L.NC)((O+2)/60);Z.push("#"+P+P+P)}return new L.VZ(Z)}();if(Z<51)return He();Z>113&&(Z=57);let O,P=[0,.125,.25,.375,.5,.625,.75,.875,1];switch(Z){case 51:O=[[0,9,13,17,24,32,27,25,29],[0,0,0,2,37,74,113,160,221],[28,42,59,78,98,129,154,184,221]];break;case 52:O=[[0,32,64,96,128,160,192,224,255],[0,32,64,96,128,160,192,224,255],[0,32,64,96,128,160,192,224,255]];break;case 53:O=[[0,45,99,156,212,230,237,234,242],[0,0,0,45,101,168,238,238,243],[0,1,1,3,9,8,11,95,230]];break;case 54:O=[[0,22,44,68,93,124,160,192,237],[0,16,41,67,93,125,162,194,241],[97,100,99,99,93,68,44,26,74]];break;case 55:O=[[0,5,15,35,102,196,208,199,110],[0,48,124,192,206,226,97,16,0],[99,142,198,201,90,22,13,8,2]];break;case 56:O=[[242,234,237,230,212,156,99,45,0],[243,238,238,168,101,45,0,0,0],[230,95,11,8,9,3,1,1,0]];break;case 57:O=[[53.091,15.096,19.89,5.916,45.951,135.1755,208.743,253.878,248.982],[42.432,91.7745,128.5455,163.6845,183.039,191.046,186.864,200.481,250.716],[134.9715,221.442,213.8175,201.807,163.8375,118.881,89.2245,50.184,13.7445]];break;case 58:O=[[0,24,2,54,176,236,202,194,255],[0,29,92,129,117,120,176,236,255],[0,68,80,34,57,172,252,245,255]];break;case 59:O=[[13,23,25,63,76,104,137,161,206],[95,67,37,21,0,12,35,52,79],[4,3,2,6,11,22,49,98,208]];break;case 60:O=[[0,61,89,122,143,160,185,204,231],[0,0,0,0,14,37,72,132,235],[0,140,224,144,4,5,6,9,13]];break;case 61:O=[[14,7,2,0,5,11,55,131,229],[105,56,26,1,42,74,131,171,229],[2,21,35,60,92,113,160,185,229]];break;case 62:O=[[0,0,0,70,148,231,235,237,244],[0,0,0,0,0,69,67,216,244],[0,102,228,231,177,124,137,20,244]];break;case 63:O=[[50,56,63,68,93,121,165,192,241],[66,81,91,96,111,128,155,189,241],[97,91,75,65,77,103,143,167,217]];break;case 64:O=[[145,166,167,156,131,114,101,112,132],[158,178,179,181,163,154,144,152,159],[190,199,201,192,176,169,160,166,190]];break;case 65:O=[[93,91,99,108,130,125,132,155,174],[126,124,128,129,131,121,119,153,173],[103,94,87,85,80,85,107,120,146]];break;case 66:O=[[24,40,69,90,104,114,120,132,103],[29,52,94,127,150,162,159,151,101],[29,52,96,132,162,181,184,186,131]];break;case 67:O=[[46,38,61,92,113,121,132,150,191],[46,36,40,69,110,135,131,92,34],[46,80,74,70,81,105,165,211,225]];break;case 68:O=[[0,4,12,30,52,101,142,190,237],[0,40,86,121,140,172,187,213,240],[0,9,14,18,21,23,27,35,101]];break;case 69:O=[[198,206,206,211,198,181,161,171,244],[103,133,150,172,178,174,163,175,244],[49,54,55,66,91,130,184,224,244]];break;case 70:O=[[243,243,240,240,241,239,186,151,129],[0,46,99,149,194,220,183,166,147],[6,8,36,91,169,235,246,240,233]];break;case 71:O=[[22,19,19,25,35,53,88,139,210],[0,32,69,108,135,159,183,198,215],[77,96,110,116,110,100,90,78,70]];break;case 72:O=[[68,116,165,182,189,180,145,111,71],[37,82,135,178,204,225,221,202,147],[16,55,105,147,196,226,232,224,178]];break;case 73:O=[[61,99,136,181,213,225,198,136,24],[149,140,96,83,132,178,190,135,22],[214,203,168,135,110,100,111,113,22]];break;case 74:O=[[76,120,156,183,197,180,162,154,140],[34,35,42,69,102,137,164,188,197],[64,69,78,105,142,177,205,217,198]];break;case 75:O=[[37,102,157,188,196,214,223,235,251],[37,29,25,37,67,91,132,185,251],[37,32,33,45,66,98,137,187,251]];break;case 76:O=[[79,100,119,137,153,172,192,205,250],[63,79,93,103,115,135,167,196,250],[51,59,66,61,62,70,110,160,250]];break;case 77:O=[[43,44,50,66,125,172,178,155,157],[63,63,85,101,138,163,122,51,39],[121,101,58,44,47,55,57,44,43]];break;case 78:O=[[0,41,62,79,90,87,99,140,228],[0,57,81,93,85,70,71,125,228],[95,91,91,82,60,43,44,112,228]];break;case 79:O=[[49,59,72,88,114,141,176,205,222],[78,72,66,57,59,75,106,142,173],[78,55,46,40,39,39,40,41,47]];break;case 80:O=[[243,222,201,185,165,158,166,187,219],[94,108,132,135,125,96,68,51,61],[7,9,12,19,45,89,118,146,118]];break;case 81:O=[[19,44,74,105,137,166,194,206,220],[19,28,40,55,82,110,159,181,220],[19,42,68,96,129,157,188,203,220]];break;case 82:O=[[33,44,70,99,140,165,199,211,216],[38,50,76,105,140,165,191,189,167],[55,67,97,124,140,166,163,129,52]];break;case 83:O=[[0,33,73,124,136,152,159,171,223],[0,43,92,124,134,126,121,144,223],[0,43,68,76,73,64,72,114,223]];break;case 84:O=[[5,18,45,124,193,223,205,128,49],[48,134,207,230,193,113,28,0,7],[6,15,41,121,193,226,208,130,49]];break;case 85:O=[[180,106,104,135,164,188,189,165,144],[72,126,154,184,198,207,205,190,179],[41,120,158,188,194,181,145,100,62]];break;case 86:O=[[57,72,94,117,136,154,174,192,215],[0,33,68,109,140,171,192,196,209],[116,137,173,201,200,201,203,190,187]];break;case 87:O=[[31,71,123,160,210,222,214,199,183],[40,117,171,211,231,220,190,132,65],[234,214,228,222,210,160,105,60,34]];break;case 88:O=[[123,108,109,126,154,172,188,196,218],[184,138,130,133,154,175,188,196,218],[208,130,109,99,110,122,150,171,218]];break;case 89:O=[[105,106,122,143,159,172,176,181,207],[252,197,194,187,174,162,153,136,125],[146,133,144,155,163,167,166,162,174]];break;case 90:O=[[171,141,145,152,154,159,163,158,177],[236,143,100,63,53,55,44,31,6],[59,48,46,44,42,54,82,112,179]];break;case 91:O=[[180,190,209,223,204,228,205,152,91],[93,125,147,172,181,224,233,198,158],[236,218,160,133,114,132,162,220,218]];break;case 92:O=[[225,183,162,135,115,111,119,145,211],[205,177,166,135,124,117,117,132,172],[186,165,155,135,126,130,150,178,226]];break;case 93:O=[[39,43,59,63,80,116,153,177,223],[39,43,59,74,91,114,139,165,223],[39,50,59,70,85,115,151,176,223]];break;case 94:O=[[0,38,60,76,84,89,101,128,204],[0,10,15,23,35,57,83,123,199],[0,11,22,40,63,86,97,94,85]];break;case 95:O=[[94,112,141,165,167,140,91,49,27],[27,46,88,135,166,161,135,97,58],[42,52,81,106,139,158,155,137,116]];break;case 96:O=[[30,49,79,117,135,151,146,138,147],[63,60,72,90,94,94,68,46,16],[18,28,41,56,62,63,50,36,21]];break;case 97:O=[[0,30,63,101,143,152,169,187,230],[0,14,28,42,58,61,67,74,91],[39,26,21,18,15,14,14,13,13]];break;case 98:O=[[149,140,164,179,182,181,131,87,61],[62,70,107,136,144,138,117,87,74],[40,38,45,49,49,49,38,32,34]];break;case 99:O=[[99,112,148,165,179,182,183,183,208],[39,40,57,79,104,127,148,161,198],[15,16,18,33,51,79,103,129,177]];break;case 100:O=[[99,116,154,174,200,196,201,201,230],[0,0,8,32,58,83,119,136,173],[5,6,7,9,9,14,17,19,24]];break;case 101:O=[[82,106,126,141,155,163,142,107,66],[62,44,69,107,135,152,149,132,119],[39,25,31,60,73,68,49,72,188]];break;case 102:O=[[18,29,44,72,116,158,184,208,221],[27,46,71,105,146,177,189,190,183],[39,55,80,108,130,133,124,100,76]];break;case 103:O=[[0,48,119,173,212,224,228,228,245],[0,13,30,47,79,127,167,205,245],[0,68,75,43,16,22,55,128,245]];break;case 104:O=[[34,70,129,187,225,226,216,193,179],[48,91,147,194,226,229,196,110,12],[234,212,216,224,206,110,53,40,29]];break;case 105:O=[[30,55,103,147,174,203,188,151,105],[0,65,138,182,187,175,121,53,9],[191,202,212,208,171,140,97,57,30]];break;case 106:O=[[112,97,113,125,138,159,178,188,225],[16,17,24,37,56,81,110,136,189],[38,35,46,59,78,103,130,152,201]];break;case 107:O=[[18,72,5,23,29,201,200,98,29],[0,0,43,167,211,117,0,0,0],[51,203,177,26,10,9,8,3,0]];break;case 108:O=[[19,42,64,88,118,147,175,187,205],[19,55,89,125,154,169,161,129,70],[19,32,47,70,100,128,145,130,75]];break;case 109:O=[[33,31,42,68,86,111,141,172,227],[255,175,145,106,88,55,15,0,0],[255,205,202,203,208,205,203,206,231]];break;case 110:O=[[0,25,50,79,110,145,181,201,254],[0,16,30,46,63,82,101,124,179],[0,12,21,29,39,49,61,74,103]];break;case 111:O=[[0,13,30,44,72,120,156,200,247],[0,36,84,117,141,153,151,158,247],[0,94,100,82,56,66,76,131,247]];break;case 112:O=[[26,51,43,33,28,35,74,144,246],[9,24,55,87,118,150,180,200,222],[30,96,112,114,112,101,72,35,0]];break;case 113:O=[[0,5,65,97,124,156,189,224,255],[32,54,77,100,123,148,175,203,234],[77,110,107,111,120,119,111,94,70]];break;default:return He()}const p=O[0],w=O[1],m=O[2],_=[];for(let F=1;F<P.length;F++){const R=Math.round(Math.floor(255*P[F])-Math.floor(255*P[F-1]));for(let q=0;q<R;q++){const T="#"+(0,L.NC)(p[F-1]+q*(p[F]-p[F-1])/R,1)+(0,L.NC)(w[F-1]+q*(w[F]-w[F-1])/R,1)+(0,L.NC)(m[F-1]+q*(m[F]-m[F-1])/R,1);_.push(T)}}return new L.VZ(_)}(this.options.Palette)),this.fPalette}fillPaletteMenu(O){O.addPaletteMenu(this.options.Palette||M.settings.Palette,P=>{this.options.Palette=parseInt(P),this.getHistPalette(!0),this.redraw()})}drawColorPalette(O,P,x){var p=this;return(0,ze.Z)(function*(){let w=p.getMainPainter();if(w!==p&&w&&!1!==w.draw_content)return null;let m=p.findFunction(M.clTPaletteAxis),_=p.getPadPainter(),F=_?.findPainterFor(m),R=!!m;if(p._can_move_colz&&(x=!0,delete p._can_move_colz),!F&&!m&&(F=_?.findPainterFor(void 0,void 0,M.clTPaletteAxis),F&&(m=F.getObject(),p.addFunction(m,!0))),!O)return F&&(p.options.Zvert=F._palette_vertical,F.Enabled=!1,F.removeG()),null;if(m)void 0!==_?._palette_vertical&&(p.options.Zvert=_._palette_vertical);else{if(p.options.PadPalette)return null;m=(0,M.create)(M.clTPave),Object.assign(m,{_typename:M.clTPaletteAxis,fName:M.clTPave,fH:null,fAxis:(0,M.create)(M.clTGaxis),fX1NDC:.905,fX2NDC:.945,fY1NDC:.1,fY2NDC:.9,fInit:1,$can_move:!0}),p.options.Zvert||Object.assign(m,{fX1NDC:.1,fX2NDC:.9,fY1NDC:.805,fY2NDC:.845});let J=p.getHisto().fZaxis;Object.assign(m.fAxis,{fTitle:J.fTitle,fTitleSize:J.fTitleSize,fChopt:"+",fLineColor:J.fAxisColor,fLineSyle:1,fLineWidth:1,fTextAngle:0,fTextSize:J.fLabelSize,fTextAlign:11,fTextColor:J.fLabelColor,fTextFont:J.fLabelFont}),p.addFunction(m,!0),x=!0}let q=p.getFramePainter();x&&q&&m.$can_move&&(p.options.Zvert?(m.fX1NDC>.5?(m.fX2NDC=q.fX2NDC+.005+(m.fX2NDC-m.fX1NDC),m.fX1NDC=q.fX2NDC+.005):(m.fX1NDC=q.fX1NDC-.03-(m.fX2NDC-m.fX1NDC),m.fX2NDC=q.fX1NDC-.03),m.fY1NDC=q.fY1NDC,m.fY2NDC=q.fY2NDC):(m.fX1NDC=q.fX1NDC,m.fX2NDC=q.fX2NDC,m.fY2NDC>.5?(m.fY2NDC=q.fY2NDC+.005+(m.fY2NDC-m.fY1NDC),m.fY1NDC=q.fY2NDC+.005):(m.fY1NDC=q.fY1NDC-.05-(m.fY2NDC-m.fY1NDC),m.fY2NDC=q.fY1NDC-.05))),m.$main_painter=p;let $,T="";if(P&&(T+=";postpone"),x&&!p.do_redraw_palette&&(T+=";can_move"),p.options.Cjust&&(T+=";cjust"),F){if(F.Enabled=!0,P)return F;$=F.drawPave(T)}else{let J=p.selectCurrentPad(p.getPadName());$=je.TPavePainter.draw(p.getDom(),m,T).then(ie=>{F=ie,p.selectCurrentPad(J),R&&(F._hist_painter=p)})}return $.then(()=>{F.$secondary=!0,p.options.Zvert=F._palette_vertical,F.redraw=()=>{};let J=!1;if(x&&q&&!p.do_redraw_palette){let Me=_?.getRootPad(!0);p.options.Zvert?(m.fX1NDC>.5&&q.fX2NDC>m.fX1NDC?(J=!0,q.fX2NDC=m.fX1NDC-.01,q.fX1NDC>q.fX2NDC-.1&&(q.fX1NDC=Math.max(0,q.fX2NDC-.1))):m.fX2NDC<.5&&q.fX1NDC<m.fX2NDC&&(J=!0,q.fX1NDC=m.fX2NDC+.05,q.fX2NDC<q.fX1NDC+.1&&(q.fX2NDC=Math.min(1,q.fX1NDC+.1))),J&&Me&&(Me.fLeftMargin=q.fX1NDC,Me.fRightMargin=1-q.fX2NDC)):(m.fY1NDC>.5&&q.fY2NDC>m.fY1NDC?(J=!0,q.fY2NDC=m.fY1NDC-.01,q.fY1NDC>q.fY2NDC-.1&&(q.fY1NDC=Math.max(0,q.fXYNDC-.1))):m.fY2NDC<.5&&q.fY1NDC<m.fY2NDC&&(J=!0,q.fY1NDC=m.fY2NDC+.05,q.fXYNDC<q.fY1NDC+.1&&(q.fY2NDC=Math.min(1,q.fY1NDC+.1))),J&&Me&&(Me.fTopMargin=q.fY1NDC,Me.fBottomMargin=1-q.fY2NDC))}return J?(p.do_redraw_palette=!0,q.redraw(),(P?Promise.resolve(!0):p.redraw()).then(()=>(delete p.do_redraw_palette,F))):F})})()}toggleColz(){if(this.options.Mode3D?12===this.options.Lego||14===this.options.Lego||11===this.options.Surf||12===this.options.Surf:this.options.Color||this.options.Contour)return this.options.Zscale=!this.options.Zscale,this.drawColorPalette(this.options.Zscale,!1,!0).then(()=>this.processOnlineChange("drawopt"))}toggleMode3D(){this.options.Mode3D=!this.options.Mode3D,this.options.Mode3D&&!this.options.Surf&&!this.options.Lego&&!this.options.Error&&(this.options.Lego=this.nbinsx>=50||this.nbinsy>=50?this.options.Color?14:13:this.options.Color?12:1,this.options.Zero=!1),this.copyOptionsToOthers(),this.interactiveRedraw("pad","drawopt")}prepareDraw(O){O||(O={rounding:!0,extra:0,middle:0}),void 0===O.extra&&(O.extra=0),void 0===O.middle&&(O.middle=0);let _,F,R,q,T,$,P=this.getHisto(),x=P.fXaxis,p=P.fYaxis,w=this.getFramePainter(),m=this.getDimension(),J={i1:this.getSelectIndex("x","left",0-O.extra),i2:this.getSelectIndex("x","right",1+O.extra),j1:1===m?0:this.getSelectIndex("y","left",0-O.extra),j2:1===m?1:this.getSelectIndex("y","right",1+O.extra),min:0,max:0,sumz:0,xbar1:0,xbar2:1,ybar1:0,ybar2:1};if(J.grx=new Float32Array(J.i2+1),J.gry=new Float32Array(J.j2+1),"number"==typeof P.fBarOffset&&"number"==typeof P.fBarWidth&&(P.fBarOffset||1e3!==P.fBarWidth)&&(P.fBarOffset<=1e3?J.xbar1=J.ybar1=.001*P.fBarOffset:P.fBarOffset<=3e3?J.xbar1=.001*(P.fBarOffset-2e3):P.fBarOffset<=5e3&&(J.ybar1=.001*(P.fBarOffset-4e3)),P.fBarWidth<=1e3?(J.xbar2=Math.min(1,J.xbar1+.001*P.fBarWidth),J.ybar2=Math.min(1,J.ybar1+.001*P.fBarWidth)):P.fBarWidth<=3e3?J.xbar2=Math.min(1,J.xbar1+.001*(P.fBarWidth-2e3)):P.fBarWidth<=5e3&&(J.ybar2=Math.min(1,J.ybar1+.001*(P.fBarWidth-4e3)))),O.original&&(J.original=!0,J.origx=new Float32Array(J.i2+1),J.origy=new Float32Array(J.j2+1)),O.pixel_density&&(O.rounding=!0),!w)return console.warn("cannot draw histogram without frame"),J;let ie=w.getGrFuncs(this.options.second_x,this.options.second_y);for(_=J.i1;_<=J.i2;++_)R=x.GetBinCoord(_+O.middle),ie.logx&&R<=0?J.i1=_+1:(J.origx&&(J.origx[_]=R),J.grx[_]=ie.grx(R),O.rounding&&(J.grx[_]=Math.round(J.grx[_])),O.use3d&&(J.grx[_]<-w.size_x3d&&(J.i1=_,J.grx[_]=-w.size_x3d),J.grx[_]>w.size_x3d&&(J.i2=_,J.grx[_]=w.size_x3d)));if(1===m)J.gry[0]=ie.gry(0),J.gry[1]=ie.gry(1);else for(F=J.j1;F<=J.j2;++F)q=p.GetBinCoord(F+O.middle),ie.logy&&q<=0?J.j1=F+1:(J.origy&&(J.origy[F]=q),J.gry[F]=ie.gry(q),O.rounding&&(J.gry[F]=Math.round(J.gry[F])),O.use3d&&(J.gry[F]<-w.size_y3d&&(J.j1=F,J.gry[F]=-w.size_y3d),J.gry[F]>w.size_y3d&&(J.j2=F,J.gry[F]=w.size_y3d)));for(this.maxbin=this.minbin=this.minposbin=null,_=J.i1;_<J.i2;++_)for(F=J.j1;F<J.j2;++F){if(T=P.getBinContent(_+1,F+1),J.sumz+=T,O.pixel_density){if($=(J.grx[_+1]-J.grx[_])*(J.gry[F]-J.gry[F+1]),$<=0)continue;J.max=Math.max(J.max,T),T>0&&(T<J.min||0===J.min)&&(J.min=T),T/=$}null===this.maxbin?this.maxbin=this.minbin=T:(this.maxbin=Math.max(this.maxbin,T),this.minbin=Math.min(this.minbin,T)),T>0&&(null===this.minposbin||T<this.minposbin)&&(this.minposbin=T)}return this.fContour=null,J}getAxisBinTip(O,P,x){let w=this.getFramePainter().getGrFuncs(this.options.second_x,this.options.second_y),m=w[O+"_handle"],_=P.GetBinLowEdge(x+1);if("labels"===m.kind)return w.axisAsText(O,_);let F=P.GetBinLowEdge(x+2);return"time"===m.kind?w.axisAsText(O,(_+F)/2):`[${w.axisAsText(O,_)}, ${w.axisAsText(O,F)})`}static _drawHist(O,P){return(0,ze.Z)(function*(){return(0,Ze.ensureTCanvas)(O).then(()=>(O.setAsMainPainter(),O.decodeOptions(P),O.isTH2Poly()&&(O.options.Mode3D?O.options.Lego=12:O.options.Color||(O.options.Color=!0)),O.checkPadRange(
/*!painter.options.Mode3D && */
14!=O.options.Contour),O.scanContent(),O.createStat(),O.callDrawFunc())).then(()=>O.drawNextFunction(0)).then(()=>{if(!O.Mode3D&&O.options.AutoZoom)return O.autoZoom()}).then(()=>{if(O.options.Project&&!O.mode3d&&(0,M.isFunc)(O.toggleProjection))return O.toggleProjection(O.options.Project)}).then(()=>(O.fillToolbar(),O))})()}}},8538:($r,At,Ce)=>{"use strict";Ce.d(At,{$Q:()=>Ze,AT:()=>m,C5:()=>I,CJ:()=>$,GS:()=>eo,Gh:()=>et,Gk:()=>ue,Gp:()=>T,I8:()=>je,MD:()=>kl,N:()=>ci,P:()=>U,R1:()=>Ve,R4:()=>ie,RL:()=>x,RZ:()=>fe,S4:()=>K,S7:()=>ce,SE:()=>Oe,UI:()=>Y,Vo:()=>Tt,ZB:()=>uc,_q:()=>p,aS:()=>_,cF:()=>de,cI:()=>F,cL:()=>Bt,cr:()=>Qe,dF:()=>Vi,jH:()=>Ie,kt:()=>D,od:()=>J,uD:()=>z,vo:()=>P,wL:()=>Z});var ze=Ce(5835),M=Ce(9542);const L="TStreamerElement",ye="TStreamerObject",Be="TStreamerSTL",je="TStreamerInfoList",Ze="TDirectory",Ie="TDirectoryFile",Oe="TBasket",ce="StreamerInfo",Y=1,K=2,ue=3,X=4,Z=5,O=6,P=7,x=8,p=9,w=10,m=11,_=12,F=13,R=14,q=15,T=16,$=17,J=18,ie=19,Me=0,de=20,fe=40,I=61,U=62,z=63,le=64,D=65,oe=66,_e=67,Ee=68,Ve=69,Qe=71,et=300,Tt=500,Bt=501,Je=1073741824,ct=4294967295,We=2147483648,Ke=(0,M.BIT)(14),ft=0,zt=1,Zt=2,Mt=3,Ot=4,sn=5,wn=6,Ln=7,En=8,$n=["BASE","char","short","int","long","float","int","const char*","double","Double32_t","char","unsigned  char","unsigned short","unsigned","unsigned long","unsigned","Long64_t","ULong64_t","bool","Float16_t"],vn=["","vector","list","deque","map","multimap","set","multiset","bitset"],rn=(0,M.BIT)(4),Gt=(0,M.BIT)(5),qt={TObject(st,Ae){Ae.fUniqueID=st.ntou4(),Ae.fBits=st.ntou4(),Ae.fBits&rn&&st.ntou2()},TNamed:[{basename:M.clTObject,base:1,func(st,Ae){Ae._typename||(Ae._typename=M.clTNamed),st.classStreamer(Ae,M.clTObject)}},{name:"fName",func(st,Ae){Ae.fName=st.readTString()}},{name:"fTitle",func(st,Ae){Ae.fTitle=st.readTString()}}],TObjString:[{basename:M.clTObject,base:1,func(st,Ae){Ae._typename||(Ae._typename=M.clTObjString),st.classStreamer(Ae,M.clTObject)}},{name:"fString",func(st,Ae){Ae.fString=st.readTString()}}],TClonesArray(st,Ae){Ae._typename||(Ae._typename=M.clTClonesArray),Ae.$kind=M.clTClonesArray,Ae.name="";const rt=st.last_read_version;rt>2&&st.classStreamer(Ae,M.clTObject),rt>1&&(Ae.name=st.readTString());let ot=st.readTString(),wt=0,fn=ot.lastIndexOf(";");fn>0&&(wt=parseInt(ot.slice(fn+1)),ot=ot.slice(0,fn));let pn=st.ntou4();pn<0&&(pn=-pn),Ae.arr=new Array(pn),Ae.fLast=pn-1,Ae.fLowerBound=st.ntou4();let jn=st.fFile.getStreamer(ot,{val:wt});if(jn=st.fFile.getSplittedStreamer(jn),jn){for(let Yn=0;Yn<pn;++Yn)Ae.arr[Yn]={_typename:ot};for(let Yn=0;Yn<jn.length;++Yn)for(let lt=0;lt<pn;++lt)jn[Yn].func(st,Ae.arr[lt])}else console.log(`Cannot get member-wise streamer for ${ot}:${wt}`)},TMap(st,Ae){Ae._typename||(Ae._typename=M.clTMap),Ae.name="",Ae.arr=[];const rt=st.last_read_version;rt>2&&st.classStreamer(Ae,M.clTObject),rt>1&&(Ae.name=st.readTString());const ot=st.ntou4();for(let wt=0;wt<ot;++wt){let fn={_typename:"TPair"};fn.first=st.readObjectAny(),fn.second=st.readObjectAny(),fn.first&&Ae.arr.push(fn)}},TTreeIndex(st,Ae){const rt=st.last_read_version;Ae._typename="TTreeIndex",st.classStreamer(Ae,"TVirtualIndex"),Ae.fMajorName=st.readTString(),Ae.fMinorName=st.readTString(),Ae.fN=st.ntoi8(),Ae.fIndexValues=st.readFastArray(Ae.fN,T),rt>1&&(Ae.fIndexValuesMinor=st.readFastArray(Ae.fN,T)),Ae.fIndex=st.readFastArray(Ae.fN,T)},TRefArray(st,Ae){Ae._typename="TRefArray",st.classStreamer(Ae,M.clTObject),Ae.name=st.readTString();const rt=st.ntoi4();Ae.fLast=rt-1,Ae.fLowerBound=st.ntoi4(),st.ntou2(),Ae.fUIDs=st.readFastArray(rt,F)},TCanvas(st,Ae){Ae._typename=M.clTCanvas,st.classStreamer(Ae,M.clTPad),Ae.fDISPLAY=st.readTString(),Ae.fDoubleBuffer=st.ntoi4(),Ae.fRetained=0!==st.ntou1(),Ae.fXsizeUser=st.ntoi4(),Ae.fYsizeUser=st.ntoi4(),Ae.fXsizeReal=st.ntoi4(),Ae.fYsizeReal=st.ntoi4(),Ae.fWindowTopX=st.ntoi4(),Ae.fWindowTopY=st.ntoi4(),Ae.fWindowWidth=st.ntoi4(),Ae.fWindowHeight=st.ntoi4(),Ae.fCw=st.ntou4(),Ae.fCh=st.ntou4(),Ae.fCatt=st.classStreamer({},M.clTAttCanvas),st.ntou1(),st.ntou1(),Ae.fHighLightColor=st.ntoi2(),Ae.fBatch=0!==st.ntou1(),st.ntou1(),st.ntou1(),st.ntou1()},TObjArray(st,Ae){Ae._typename||(Ae._typename=M.clTObjArray),Ae.$kind=M.clTObjArray,Ae.name="";const rt=st.last_read_version;rt>2&&st.classStreamer(Ae,M.clTObject),rt>1&&(Ae.name=st.readTString());const ot=st.ntou4();let wt=0;for(Ae.arr=new Array(ot),Ae.fLast=ot-1,Ae.fLowerBound=st.ntou4();wt<ot;)Ae.arr[wt++]=st.readObjectAny()},TPolyMarker3D(st,Ae){const rt=st.last_read_version;st.classStreamer(Ae,M.clTObject),st.classStreamer(Ae,M.clTAttMarker),Ae.fN=st.ntoi4(),Ae.fP=st.readFastArray(3*Ae.fN,Z),Ae.fOption=st.readTString(),Ae.fName=rt>1?st.readTString():M.clTPolyMarker3D},TPolyLine3D(st,Ae){st.classStreamer(Ae,M.clTObject),st.classStreamer(Ae,M.clTAttLine),Ae.fN=st.ntoi4(),Ae.fP=st.readFastArray(3*Ae.fN,Z),Ae.fOption=st.readTString()},TStreamerInfo(st,Ae){st.classStreamer(Ae,M.clTNamed),Ae.fCheckSum=st.ntou4(),Ae.fClassVersion=st.ntou4(),Ae.fElements=st.readObjectAny()},TStreamerElement(st,Ae){const rt=st.last_read_version;if(st.classStreamer(Ae,M.clTNamed),Ae.fType=st.ntou4(),Ae.fSize=st.ntou4(),Ae.fArrayLength=st.ntou4(),Ae.fArrayDim=st.ntou4(),Ae.fMaxIndex=st.readFastArray(1==rt?st.ntou4():5,F),Ae.fTypeName=st.readTString(),Ae.fType===m&&("Bool_t"==Ae.fTypeName||"bool"==Ae.fTypeName)&&(Ae.fType=J),Ae.fXmin=Ae.fXmax=Ae.fFactor=0,3===rt)Ae.fXmin=st.ntod(),Ae.fXmax=st.ntod(),Ae.fFactor=st.ntod();else if(rt>3&&Ae.fBits&(0,M.BIT)(6)){let ot=Ae.fTitle.indexOf("[");ot>=0&&Ae.fType>fe&&(ot=Ae.fTitle.indexOf("[",ot+1));let wt=Ae.fTitle.indexOf("]",ot+1);if(ot>=0&&wt>=ot+2){let fn=Ae.fTitle.slice(ot+1,wt).split(","),pn=32;if(!fn||fn.length<2)throw new Error(`Problem to decode range setting from streamer element title ${Ae.fTitle}`);3===fn.length&&(pn=parseInt(fn[2])),(!Number.isInteger(pn)||pn<2||pn>32)&&(pn=32);let jn=lt=>{if(!lt)return 0;if(lt.indexOf("pi")<0)return parseFloat(lt);let mt=1;switch("-"==(lt=lt.trim())[0]&&(mt=-1,lt=lt.slice(1)),lt){case"2pi":case"2*pi":case"twopi":return 2*mt*Math.PI;case"pi/2":return mt*Math.PI/2;case"pi/4":return mt*Math.PI/4}return mt*Math.PI};Ae.fXmin=jn(fn[0]),Ae.fXmax=jn(fn[1]);let Yn=pn>=0&&pn<32?Math.pow(2,pn):4294967295;Ae.fXmin<Ae.fXmax?Ae.fFactor=Yn/(Ae.fXmax-Ae.fXmin):pn<15&&(Ae.fXmin=pn)}}},TStreamerBase(st,Ae){const rt=st.last_read_version;st.classStreamer(Ae,L),rt>2&&(Ae.fBaseVersion=st.ntou4())},TStreamerSTL(st,Ae){st.classStreamer(Ae,L),Ae.fSTLtype=st.ntou4(),Ae.fCtype=st.ntou4(),Ae.fSTLtype===sn&&(0===Ae.fTypeName.indexOf("std::set")||0===Ae.fTypeName.indexOf("set"))&&(Ae.fSTLtype=wn),Ae.fSTLtype===wn&&(0===Ae.fTypeName.indexOf("std::multimap")||0===Ae.fTypeName.indexOf("multimap"))&&(Ae.fSTLtype=sn)},TStreamerSTLstring(st,Ae){st.last_read_version>0&&st.classStreamer(Ae,Be)},TList(st,Ae){if(Ae._typename||(Ae._typename=this.typename),Ae.$kind=M.clTList,st.last_read_version>3){st.classStreamer(Ae,M.clTObject),Ae.name=st.readTString();const rt=st.ntou4();Ae.arr=new Array(rt),Ae.opt=new Array(rt);for(let ot=0;ot<rt;++ot)Ae.arr[ot]=st.readObjectAny(),Ae.opt[ot]=st.readTString()}else Ae.name="",Ae.arr=[],Ae.opt=[]},THashList:M.clTList,TStreamerLoop(st,Ae){st.last_read_version>1&&(st.classStreamer(Ae,L),Ae.fCountVersion=st.ntou4(),Ae.fCountName=st.readTString(),Ae.fCountClass=st.readTString())},TStreamerBasicPointer:"TStreamerLoop",TStreamerObject(st,Ae){st.last_read_version>1&&st.classStreamer(Ae,L)},TStreamerBasicType:ye,TStreamerObjectAny:ye,TStreamerString:ye,TStreamerObjectPointer:ye,TStreamerObjectAnyPointer(st,Ae){st.last_read_version>0&&st.classStreamer(Ae,L)},TTree:{name:"$file",func(st,Ae){Ae.$kind="TTree",Ae.$file=st.fFile}},RooRealVar(st,Ae){const rt=st.last_read_version;st.classStreamer(Ae,"RooAbsRealLValue"),1==rt&&(st.ntod(),st.ntod(),st.ntoi4()),Ae._error=st.ntod(),Ae._asymErrLo=st.ntod(),Ae._asymErrHi=st.ntod(),rt>=2&&(Ae._binning=st.readObjectAny()),3==rt&&(Ae._sharedProp=st.readObjectAny()),rt>=4&&(Ae._sharedProp=st.classStreamer({},"RooRealVarSharedProperties"))},RooAbsBinning(st,Ae){st.classStreamer(Ae,1==st.last_read_version?M.clTObject:M.clTNamed),st.classStreamer(Ae,"RooPrintable")},RooCategory(st,Ae){const rt=st.last_read_version;st.classStreamer(Ae,"RooAbsCategoryLValue"),Ae._sharedProp=1===rt?st.readObjectAny():st.classStreamer({},"RooCategorySharedProperties")},"RooWorkspace::CodeRepo":st=>{const Ae=2==st.last_read_version?3:2;for(let rt=0;rt<Ae;++rt){let ot=st.ntoi4()*(0==rt?4:3);for(;ot--;)st.readTString()}},RooLinkedList(st,Ae){const rt=st.last_read_version;st.classStreamer(Ae,M.clTObject);let ot=st.ntoi4();for(Ae.arr=(0,M.create)(M.clTList);ot--;)Ae.arr.Add(st.readObjectAny());rt>1&&(Ae._name=st.readTString())},TImagePalette:[{basename:M.clTObject,base:1,func(st,Ae){Ae._typename||(Ae._typename="TImagePalette"),st.classStreamer(Ae,M.clTObject)}},{name:"fNumPoints",func(st,Ae){Ae.fNumPoints=st.ntou4()}},{name:"fPoints",func(st,Ae){Ae.fPoints=st.readFastArray(Ae.fNumPoints,x)}},{name:"fColorRed",func(st,Ae){Ae.fColorRed=st.readFastArray(Ae.fNumPoints,_)}},{name:"fColorGreen",func(st,Ae){Ae.fColorGreen=st.readFastArray(Ae.fNumPoints,_)}},{name:"fColorBlue",func(st,Ae){Ae.fColorBlue=st.readFastArray(Ae.fNumPoints,_)}},{name:"fColorAlpha",func(st,Ae){Ae.fColorAlpha=st.readFastArray(Ae.fNumPoints,_)}}],TAttImage:[{name:"fImageQuality",func(st,Ae){Ae.fImageQuality=st.ntoi4()}},{name:"fImageCompression",func(st,Ae){Ae.fImageCompression=st.ntou4()}},{name:"fConstRatio",func(st,Ae){Ae.fConstRatio=0!=st.ntou1()}},{name:"fPalette",func(st,Ae){Ae.fPalette=st.classStreamer({},"TImagePalette")}}],TASImage(st,Ae){if(1==st.last_read_version&&st.fFile.fVersion>0&&st.fFile.fVersion<5e4)return console.warn("old TASImage version - not yet supported");if(st.classStreamer(Ae,M.clTNamed),0!=st.ntou1()){const rt=st.ntoi4();Ae.fPngBuf=st.readFastArray(rt,m)}else st.classStreamer(Ae,"TAttImage"),Ae.fWidth=st.ntoi4(),Ae.fHeight=st.ntoi4(),Ae.fImgBuf=st.readFastArray(Ae.fWidth*Ae.fHeight,x)},TMaterial(st,Ae){const rt=st.last_read_version;st.classStreamer(Ae,M.clTNamed),Ae.fNumber=st.ntoi4(),Ae.fA=st.ntof(),Ae.fZ=st.ntof(),Ae.fDensity=st.ntof(),rt>2?(st.classStreamer(Ae,M.clTAttFill),Ae.fRadLength=st.ntof(),Ae.fInterLength=st.ntof()):Ae.fRadLength=Ae.fInterLength=0},TMixture(st,Ae){st.classStreamer(Ae,"TMaterial"),Ae.fNmixt=st.ntoi4(),Ae.fAmixt=st.readFastArray(st.ntoi4(),Z),Ae.fZmixt=st.readFastArray(st.ntoi4(),Z),Ae.fWmixt=st.readFastArray(st.ntoi4(),Z)},TVirtualPerfStats:M.clTObject,TMethodCall:M.clTObject},_n={TQObject(){},TGraphStruct(){},TGraphNode(){},TGraphEdge(){},TDatime(st,Ae){Ae.fDatime=st.ntou4()},TKey(st,Ae){Ae.fNbytes=st.ntoi4(),Ae.fVersion=st.ntoi2(),Ae.fObjlen=st.ntou4(),Ae.fDatime=st.classStreamer({},"TDatime"),Ae.fKeylen=st.ntou2(),Ae.fCycle=st.ntou2(),Ae.fVersion>1e3?(Ae.fSeekKey=st.ntou8(),st.shift(8)):(Ae.fSeekKey=st.ntou4(),st.shift(4)),Ae.fClassName=st.readTString(),Ae.fName=st.readTString(),Ae.fTitle=st.readTString()},TDirectory(st,Ae){const rt=st.ntou2();Ae.fDatimeC=st.classStreamer({},"TDatime"),Ae.fDatimeM=st.classStreamer({},"TDatime"),Ae.fNbytesKeys=st.ntou4(),Ae.fNbytesName=st.ntou4(),Ae.fSeekDir=rt>1e3?st.ntou8():st.ntou4(),Ae.fSeekParent=rt>1e3?st.ntou8():st.ntou4(),Ae.fSeekKeys=rt>1e3?st.ntou8():st.ntou4()},TBasket(st,Ae){st.classStreamer(Ae,"TKey");const rt=st.readVersion();Ae.fBufferSize=st.ntoi4(),Ae.fNevBufSize=st.ntoi4(),Ae.fNevBuf=st.ntoi4(),Ae.fLast=st.ntoi4(),Ae.fLast>Ae.fBufferSize&&(Ae.fBufferSize=Ae.fLast);const ot=st.ntoi1();if(0!==ot){if(ot%10!=2){if(Ae.fNevBuf&&(Ae.fEntryOffset=st.readFastArray(st.ntoi4(),ue),20<ot&&ot<40))for(let wt=0,fn=4278190080;wt<Ae.fNevBuf;++wt)Ae.fEntryOffset[wt]&=~fn;ot>40&&(Ae.fDisplacement=st.readFastArray(st.ntoi4(),ue))}if(1===ot||ot>10){const wt=rt.val<=1?st.ntoi4():Ae.fLast;if(wt>Ae.fKeylen){let fn=st.extract([st.o+Ae.fKeylen,wt-Ae.fKeylen]);Ae.fBufferRef=new eo(fn,0,st.fFile,wt-Ae.fKeylen),Ae.fBufferRef.fTagOffset=Ae.fKeylen}st.shift(wt)}}},TRef(st,Ae){st.classStreamer(Ae,M.clTObject),Ae.fBits&Gt?Ae.fUUID=st.readTString():Ae.fPID=st.ntou2()},"TMatrixTSym<float>":(st,Ae)=>{st.classStreamer(Ae,"TMatrixTBase<float>"),Ae.fElements=new Float32Array(Ae.fNelems);let rt=st.readFastArray(Ae.fNrows*(Ae.fNcols+1)/2,Z),ot=0;for(let wt=0;wt<Ae.fNrows;++wt)for(let fn=wt;fn<Ae.fNcols;++fn)Ae.fElements[fn*Ae.fNcols+wt]=Ae.fElements[wt*Ae.fNcols+fn]=rt[ot++]},"TMatrixTSym<double>":(st,Ae)=>{st.classStreamer(Ae,"TMatrixTBase<double>"),Ae.fElements=new Float64Array(Ae.fNelems);let rt=st.readFastArray(Ae.fNrows*(Ae.fNcols+1)/2,x),ot=0;for(let wt=0;wt<Ae.fNrows;++wt)for(let fn=wt;fn<Ae.fNcols;++fn)Ae.fElements[fn*Ae.fNcols+wt]=Ae.fElements[wt*Ae.fNcols+fn]=rt[ot++]}};function dn(st,Ae){switch(st){case"bool":case"Bool_t":return J;case"char":case"signed char":case"Char_t":return Y;case"Color_t":case"Style_t":case"Width_t":case"short":case"Short_t":return K;case"int":case"EErrorType":case"Int_t":return ue;case"long":case"Long_t":return X;case"float":case"Float_t":return Z;case"double":case"Double_t":return x;case"unsigned char":case"UChar_t":return m;case"unsigned short":case"UShort_t":return _;case"unsigned":case"unsigned int":case"UInt_t":return F;case"unsigned long":case"ULong_t":return R;case"int64_t":case"long long":case"Long64_t":return T;case"uint64_t":case"unsigned long long":case"ULong64_t":return $;case"Double32_t":return p;case"Float16_t":return ie;case"char*":case"const char*":case"const Char_t*":return P}if(!Ae){let rt=qt[st];if((0,M.isStr)(rt))return dn(rt,!0)}return-1}function ci(st,Ae,rt){const ot={_typename:"TStreamerElement",fName:st,fTypeName:Ae,fType:0,fSize:0,fArrayLength:0,fArrayDim:0,fMaxIndex:[0,0,0,0,0],fXmin:0,fXmax:0,fFactor:0};if((0,M.isStr)(Ae)?(ot.fType=dn(Ae),ot.fType<0&&rt&&rt.fBasicTypes[Ae]&&(ot.fType=rt.fBasicTypes[Ae])):(ot.fType=Ae,Ae=ot.fTypeName=$n[ot.fType]||"int"),ot.fType>0)return ot;let wt=ft,fn=Ae.indexOf("<");if(fn>0&&Ae.indexOf(">")>fn+2)for(let jn=1;jn<vn.length;++jn)if(Ae.slice(0,fn)===vn[jn]){wt=jn;break}if(wt!==ft)return ot._typename=Be,ot.fType=Tt,ot.fSTLtype=wt,ot.fCtype=0,ot;const pn=Ae.lastIndexOf("*")===Ae.length-1;return pn&&(ot.fTypeName=Ae=Ae.slice(0,Ae.length-1)),0==br(Ae)?(ot.fType=D,ot):(ot.fType=pn?Ve:U,ot)}function ir(st,Ae,rt){if(!st){if(0!==Ae.indexOf("pair"))return null;if(!(st=rt.findStreamerInfo(Ae))){let pn=function(){let jn="",Yn=wt+1,lt=0;for(;Yn<fn&&lt>=0;){switch(Ae[Yn]){case"<":lt++;break;case",":0===lt&&lt--;break;case">":lt--}lt>=0&&(jn+=Ae[Yn]),Yn++}return wt=Yn-1,jn.trim()},wt=Ae.indexOf("<"),fn=Ae.lastIndexOf(">");(st={_typename:"TStreamerInfo",fVersion:1,fName:Ae,fElements:(0,M.create)(M.clTList)}).fElements.Add(ci("first",pn(),rt)),st.fElements.Add(ci("second",pn(),rt))}}let ot=rt.getStreamer(Ae,null,st);if(!ot)return null;if(2!==ot.length)return console.error(`Streamer for pair class contains ${ot.length} elements`),null;for(let wt=0;wt<2;++wt)ot[wt].readelem&&!ot[wt].pair_name&&(ot[wt].pair_name=0==wt?"first":"second",ot[wt].func=function(fn,pn){pn[this.pair_name]=this.readelem(fn)});return ot}function Vi(st,Ae){let rt={name:st.fName,type:st.fType,fArrayLength:st.fArrayLength,fArrayDim:st.fArrayDim,fMaxIndex:st.fMaxIndex};switch("BASE"===st.fTypeName&&(br(rt.name)>0?(rt.name="fArray",rt.type=U):rt.type=Me),rt.type){case Me:rt.base=st.fBaseVersion,rt.basename=st.fName,rt.func=function(ot,wt){ot.classStreamer(wt,this.basename)};break;case K:rt.func=function(ot,wt){wt[this.name]=ot.ntoi2()};break;case ue:case O:rt.func=function(ot,wt){wt[this.name]=ot.ntoi4()};break;case X:case T:rt.func=function(ot,wt){wt[this.name]=ot.ntoi8()};break;case x:rt.func=function(ot,wt){wt[this.name]=ot.ntod()};break;case Z:rt.func=function(ot,wt){wt[this.name]=ot.ntof()};break;case w:case m:rt.func=function(ot,wt){wt[this.name]=ot.ntou1()};break;case _:rt.func=function(ot,wt){wt[this.name]=ot.ntou2()};break;case q:case F:rt.func=function(ot,wt){wt[this.name]=ot.ntou4()};break;case $:case R:rt.func=function(ot,wt){wt[this.name]=ot.ntou8()};break;case J:rt.func=function(ot,wt){wt[this.name]=0!=ot.ntou1()};break;case de+J:case de+ue:case de+O:case de+x:case de+m:case de+K:case de+_:case de+q:case de+F:case de+R:case de+$:case de+X:case de+T:case de+Z:st.fArrayDim<2?(rt.arrlength=st.fArrayLength,rt.func=function(ot,wt){wt[this.name]=ot.readFastArray(this.arrlength,this.type-de)}):(rt.arrlength=st.fMaxIndex[st.fArrayDim-1],rt.minus1=!0,rt.func=function(ot,wt){wt[this.name]=ot.readNdimArray(this,(fn,pn)=>fn.readFastArray(pn.arrlength,pn.type-de))});break;case de+Y:st.fArrayDim<2?(rt.arrlength=st.fArrayLength,rt.func=function(ot,wt){wt[this.name]=ot.readFastString(this.arrlength)}):(rt.minus1=!0,rt.arrlength=st.fMaxIndex[st.fArrayDim-1],rt.func=function(ot,wt){wt[this.name]=ot.readNdimArray(this,(fn,pn)=>fn.readFastString(pn.arrlength))});break;case fe+J:case fe+ue:case fe+x:case fe+m:case fe+K:case fe+_:case fe+q:case fe+F:case fe+R:case fe+$:case fe+X:case fe+T:case fe+Z:rt.cntname=st.fCountName,rt.func=function(ot,wt){wt[this.name]=1===ot.ntou1()?ot.readFastArray(wt[this.cntname],this.type-fe):[]};break;case fe+Y:rt.cntname=st.fCountName,rt.func=function(ot,wt){wt[this.name]=1===ot.ntou1()?ot.readFastString(wt[this.cntname]):null};break;case p:case de+p:case fe+p:rt.double32=!0;case ie:case de+ie:case fe+ie:0!==st.fFactor?(rt.factor=1/st.fFactor,rt.min=st.fXmin,rt.read=function(ot){return ot.ntou4()*this.factor+this.min}):0===st.fXmin&&rt.double32?rt.read=function(ot){return ot.ntof()}:(rt.nbits=Math.round(st.fXmin),0===rt.nbits&&(rt.nbits=12),rt.dv=new DataView(new ArrayBuffer(8),0),rt.read=function(ot){let wt=ot.ntou1(),fn=ot.ntou2();return this.dv.setUint32(0,wt<<23|(fn&(1<<this.nbits+1)-1)<<23-this.nbits),(1<<this.nbits+1&fn?-1:1)*this.dv.getFloat32(0)}),rt.readarr=function(ot,wt){let fn=this.double32?new Float64Array(wt):new Float32Array(wt);for(let pn=0;pn<wt;++pn)fn[pn]=this.read(ot);return fn},rt.type<de?rt.func=function(ot,wt){wt[this.name]=this.read(ot)}:rt.type>fe?(rt.cntname=st.fCountName,rt.func=function(ot,wt){wt[this.name]=1===ot.ntou1()?this.readarr(ot,wt[this.cntname]):null}):st.fArrayDim<2?(rt.arrlength=st.fArrayLength,rt.func=function(ot,wt){wt[this.name]=this.readarr(ot,this.arrlength)}):(rt.arrlength=st.fMaxIndex[st.fArrayDim-1],rt.minus1=!0,rt.func=function(ot,wt){wt[this.name]=ot.readNdimArray(this,(fn,pn)=>pn.readarr(fn,pn.arrlength))});break;case Ve:case le:rt.func=function(ot,wt){wt[this.name]=ot.readNdimArray(this,fn=>fn.readObjectAny())};break;case U:case Ee:case z:case I:{let ot="BASE"===st.fTypeName?st.fName:st.fTypeName;"*"==ot[ot.length-1]&&(ot=ot.slice(0,ot.length-1));const wt=br(ot);wt>0?(rt.arrkind=wt,rt.func=function(fn,pn){pn[this.name]=fn.readFastArray(fn.ntou4(),this.arrkind)}):0===wt?rt.func=function(fn,pn){pn[this.name]=fn.readTString()}:(rt.classname=ot,rt.func=st.fArrayLength>1?function(fn,pn){pn[this.name]=fn.readNdimArray(this,(jn,Yn)=>jn.classStreamer({},Yn.classname))}:function(fn,pn){pn[this.name]=fn.classStreamer({},this.classname)});break}case de+I:case de+U:case de+Ee:case de+z:{let ot=st.fTypeName;"*"==ot[ot.length-1]&&(ot=ot.slice(0,ot.length-1)),rt.arrkind=br(ot),rt.arrkind<0&&(rt.classname=ot),rt.func=function(wt,fn){fn[this.name]=wt.readNdimArray(this,(pn,jn)=>jn.arrkind>0?pn.readFastArray(pn.ntou4(),jn.arrkind):0===jn.arrkind?pn.readTString():pn.classStreamer({},jn.classname))};break}case Y:rt.func=function(ot,wt){wt[this.name]=ot.ntoi1()};break;case P:rt.func=function(ot,wt){const fn=ot.ntoi4();wt[this.name]=ot.substring(ot.o,ot.o+fn),ot.o+=fn};break;case D:rt.func=function(ot,wt){wt[this.name]=ot.readTString()};break;case oe:case _e:rt.typename=st.fTypeName,rt.func=function(ot,wt){wt[this.name]=ot.classStreamer({},this.typename)};break;case de+D:case de+oe:case de+_e:rt.typename=st.fTypeName,rt.func=function(ot,wt){const fn=ot.readVersion();wt[this.name]=ot.readNdimArray(this,(pn,jn)=>jn.typename===M.clTString?pn.readTString():pn.classStreamer({},jn.typename)),ot.checkByteCount(fn,this.typename+"[]")};break;case Bt:case de+Bt:rt.typename=st.fTypeName,rt.cntname=st.fCountName,rt.typename.lastIndexOf("**")>0?(rt.typename=rt.typename.slice(0,rt.typename.lastIndexOf("**")),rt.isptrptr=!0):(rt.typename=rt.typename.slice(0,rt.typename.lastIndexOf("*")),rt.isptrptr=!1),rt.isptrptr?rt.readitem=function(ot){return ot.readObjectAny()}:(rt.arrkind=br(rt.typename),rt.readitem=rt.arrkind>0?function(ot){return ot.readFastArray(ot.ntou4(),this.arrkind)}:0===rt.arrkind?function(ot){return ot.readTString()}:function(ot){return ot.classStreamer({},this.typename)}),void 0!==rt.readitem?(rt.read_loop=function(ot,wt){return ot.readNdimArray(this,(fn,pn)=>{let jn=new Array(wt);for(let Yn=0;Yn<wt;++Yn)jn[Yn]=pn.readitem(fn);return jn})},rt.func=function(ot,wt){const fn=ot.readVersion(),pn=this.read_loop(ot,wt[this.cntname]);wt[this.name]=ot.checkByteCount(fn,this.typename)?pn:null},rt.branch_func=function(ot,wt){const fn=ot.readVersion(),pn=wt[this.stl_size],jn=new Array(pn);for(let Yn=0;Yn<pn;++Yn)jn[Yn]=this.read_loop(ot,wt[this.cntname][Yn]);wt[this.name]=ot.checkByteCount(fn,this.typename)?jn:null},rt.objs_branch_func=function(ot,wt){const fn=ot.readVersion(),pn=wt[this.name0];for(let jn=0;jn<pn.length;++jn){let Yn=this.get(pn,jn);Yn[this.name]=this.read_loop(ot,Yn[this.cntname])}ot.checkByteCount(fn,this.typename)}):(console.error(`fail to provide function for ${st.fName} (${st.fTypeName})  typ = ${st.fType}`),rt.func=function(ot,wt){const fn=ot.readVersion();ot.checkByteCount(fn),wt[this.name]=null});break;case Tt:{rt.typename=st.fTypeName;let ot=(st.fSTLtype||0)%40;if("TStreamerSTLstring"===st._typename||"string"==rt.typename||"string*"==rt.typename)rt.readelem=wt=>wt.readTString();else if(ot===zt||ot===Zt||ot===Mt||ot===wn||ot===Ln){let wt=rt.typename.indexOf("<"),fn=rt.typename.lastIndexOf(">");if(rt.conttype=rt.typename.slice(wt+1,fn).trim(),rt.typeid=dn(rt.conttype),rt.typeid<0&&Ae.fBasicTypes[rt.conttype]&&(rt.typeid=Ae.fBasicTypes[rt.conttype],console.log(`!!! Reuse basic type ${rt.conttype} from file streamer infos`)),st.fCtype&&st.fCtype<20&&st.fCtype!==rt.typeid&&(console.warn(`Contained type ${rt.conttype} not recognized as basic type ${st.fCtype} FORCE`),rt.typeid=st.fCtype),rt.typeid>0)rt.readelem=function(pn){return pn.readFastArray(pn.ntoi4(),this.typeid)};else if(rt.isptr=!1,rt.conttype.lastIndexOf("*")===rt.conttype.length-1&&(rt.isptr=!0,rt.conttype=rt.conttype.slice(0,rt.conttype.length-1)),st.fCtype===z&&(rt.isptr=!0),rt.arrkind=br(rt.conttype),rt.readelem=el,!rt.isptr&&rt.arrkind<0){let pn=ci("temp",rt.conttype);pn.fType===Tt&&(pn.$fictional=!0,rt.submember=Vi(pn,Ae))}}else if(ot===Ot||ot===sn){const wt=rt.typename.indexOf("<"),fn=rt.typename.lastIndexOf(">");rt.pairtype="pair<"+rt.typename.slice(wt+1,fn)+">",rt.si=Ae.findStreamerInfo(rt.pairtype),rt.streamer=ir(rt.si,rt.pairtype,Ae),(!rt.streamer||2!==rt.streamer.length)&&(console.error(`Fail to build streamer for pair ${rt.pairtype}`),delete rt.streamer),rt.streamer&&(rt.readelem=lo)}else ot===En&&(rt.readelem=wt=>wt.readFastArray(wt.ntou4(),J));rt.readelem?st.$fictional||(rt.read_version=function(wt,fn){if(0===fn)return null;const pn=wt.readVersion();return this.member_wise=0!=(pn.val&Ke),this.stl_version=void 0,this.member_wise&&(pn.val=pn.val&~Ke,this.stl_version={val:wt.ntoi2()},this.stl_version.val<=0&&(this.stl_version.checksum=wt.ntou4())),pn},rt.func=function(wt,fn){const pn=this.read_version(wt);let jn=wt.readNdimArray(this,(Yn,lt)=>lt.readelem(Yn));wt.checkByteCount(pn,this.typename)||(jn=null),fn[this.name]=jn},rt.branch_func=function(wt,fn){const pn=fn[this.stl_size],jn=this.read_version(wt,pn);let Yn=new Array(pn);for(let lt=0;lt<pn;++lt)Yn[lt]=wt.readNdimArray(this,(mt,Lt)=>Lt.readelem(mt));jn&&wt.checkByteCount(jn,`branch ${this.typename}`),fn[this.name]=Yn},rt.split_func=function(wt,fn,pn){const jn=this.read_version(wt);for(let Yn=0;Yn<pn;++Yn)fn[Yn][this.name]=wt.readNdimArray(this,(lt,mt)=>mt.readelem(lt));wt.checkByteCount(jn,this.typename)},rt.objs_branch_func=function(wt,fn){let pn=fn[this.name0];const jn=this.read_version(wt,pn.length);for(let Yn=0;Yn<pn.length;++Yn)this.get(pn,Yn)[this.name]=wt.readNdimArray(this,(mt,Lt)=>Lt.readelem(mt));jn&&wt.checkByteCount(jn,`branch ${this.typename}`)}):(console.error(`failed to create streamer for element ${rt.typename} ${rt.name} element ${st._typename} STL type ${st.fSTLtype}`),rt.func=function(wt,fn){const pn=wt.readVersion();wt.checkByteCount(pn),fn[this.name]=null});break}default:console.error(`fail to provide function for ${st.fName} (${st.fTypeName})  typ = ${st.fType}`),rt.func=function(){}}return rt}function br(st){if(st===M.clTString||"string"===st||qt[st]===M.clTString)return 0;if(st.length<7||0!==st.indexOf("TArray"))return-1;if(7==st.length)switch(st[6]){case"I":return ue;case"D":return x;case"F":return Z;case"S":return K;case"C":return Y;case"L":return X;default:return-1}return"TArrayL64"==st?T:-1}function Ur(st,Ae){if(null===Ae)return Ae;let rt=(0,M.getMethods)(st);if(rt)for(let ot in rt)((0,M.isFunc)(rt[ot])||0==ot.indexOf("_"))&&Ae.push({name:ot,method:rt[ot],func(wt,fn){fn[this.name]=this.method}});return Ae}const Ar=32768,cs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],Rs=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],es=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99],ho=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],ro=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ws=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function Es(st,Ae){let fn,pn,jn,un,It,Pt,rt=new Array(2*Ar),ot=0,wt=null,Yn=0,lt=0,mt=-1,Lt=!1,$e=0,Nt=0,it=null,Sn=st,Fn=st.byteLength,Gi=0;function In(Fr){for(;lt<Fr;)Gi<Fn&&(Yn|=Sn[Gi++]<<lt),lt+=8}function ii(Fr){return Yn&cs[Fr]}function lr(Fr){Yn>>=Fr,lt-=Fr}function cr(Fr,Is,Ea,Xr,ys,tl){this.status=0,this.root=null,this.m=0;let nu,we,N,E,H,me,Ue,Xe,pt,vt,Ht,hn,nl=Array(17).fill(0),Qa=Array(17).fill(0),Mo=Array(16).fill(null),Gh=Array(288).fill(0),Ol=Array(17).fill(0),Cl={e:0,b:0,n:0,t:null},_c=null,Jp=Is>256?Fr[256]:16,De=Fr,Re=0,gn=this.root=null,mn=Is;do{nl[De[Re++]]++}while(--mn>0);if(nl[0]==Is)return this.root=null,this.m=0,this.status=0,this;for(H=1;H<=16&&0==nl[H];++H);for(me=H,tl<H&&(tl=H),mn=16;0!=mn&&0==nl[mn];--mn);for(N=mn,tl>mn&&(tl=mn),vt=1<<H;H<mn;++H,vt<<=1)if((vt-=nl[H])<0)return this.status=2,this.m=tl,this;if((vt-=nl[mn])<0)return this.status=2,this.m=tl,this;for(nl[mn]+=vt,Ol[1]=H=0,De=nl,Re=1,pt=2;--mn>0;)Ol[pt++]=H+=De[Re++];De=Fr,Re=0,mn=0;do{0!=(H=De[Re++])&&(Gh[Ol[H]++]=mn)}while(++mn<Is);for(Is=Ol[N],Ol[0]=mn=0,De=Gh,Re=0,E=-1,Xe=Qa[0]=0,Ue=null,Ht=0;me<=N;++me)for(nu=nl[me];nu-- >0;){for(;me>Xe+Qa[1+E];){if(Xe+=Qa[1+E++],Ht=(Ht=N-Xe)>tl?tl:Ht,(we=1<<(H=me-Xe))>nu+1)for(we-=nu+1,pt=me;++H<Ht&&!((we<<=1)<=nl[++pt]);)we-=nl[pt];for(Xe+H>Jp&&Xe<Jp&&(H=Jp-Xe),Ht=1<<H,Qa[1+E]=H,Ue=new Array(Ht),hn=0;hn<Ht;++hn)Ue[hn]={e:0,b:0,n:0,t:null};gn=null==gn?this.root={next:null,list:null}:gn.next={next:null,list:null},gn.next=null,gn.list=Ue,Mo[E]=Ue,E>0&&(Ol[E]=mn,Cl.b=Qa[E],Cl.e=16+H,Cl.t=Ue,H=(mn&(1<<Xe)-1)>>Xe-Qa[E],_c=Mo[E-1][H],_c.e=Cl.e,_c.b=Cl.b,_c.n=Cl.n,_c.t=Cl.t)}for(Cl.b=me-Xe,Re>=Is?Cl.e=99:De[Re]<Ea?(Cl.e=De[Re]<256?16:15,Cl.n=De[Re++]):(Cl.e=ys[De[Re]-Ea],Cl.n=Xr[De[Re++]-Ea]),we=1<<me-Xe,H=mn>>Xe;H<Ht;H+=we)_c=Ue[H],_c.e=Cl.e,_c.b=Cl.b,_c.n=Cl.n,_c.t=Cl.t;for(H=1<<me-1;mn&H;H>>=1)mn^=H;for(mn^=H;(mn&(1<<Xe)-1)!=Ol[E];)Xe-=Qa[E--]}return this.m=Qa[1],this.status=0!=vt&&1!=N?1:0,this}function Qi(Fr,Is,Ea){if(0==Ea)return 0;let Xr,ys,tl=0;for(;;){for(In(It),ys=it.list[ii(It)],Xr=ys.e;Xr>16;){if(99==Xr)return-1;lr(ys.b),Xr-=16,In(Xr),ys=ys.t[ii(Xr)],Xr=ys.e}if(lr(ys.b),16!=Xr){if(15==Xr)break;for(In(Xr),$e=ys.n+ii(Xr),lr(Xr),In(Pt),ys=un.list[ii(Pt)],Xr=ys.e;Xr>16;){if(99==Xr)return-1;lr(ys.b),Xr-=16,In(Xr),ys=ys.t[ii(Xr)],Xr=ys.e}for(lr(ys.b),In(Xr),Nt=ot-ys.n-ii(Xr),lr(Xr);$e>0&&tl<Ea;)--$e,Nt&=Ar-1,ot&=Ar-1,Fr[Is+tl++]=rt[ot++]=rt[Nt++];if(tl==Ea)return Ea}else if(ot&=Ar-1,Fr[Is+tl++]=rt[ot++]=ys.n,tl==Ea)return Ea}return mt=-1,tl}function is(Fr,Is,Ea){let Xr=7&lt;if(lr(Xr),In(16),Xr=ii(16),lr(16),In(16),Xr!=(65535&~Yn))return-1;for(lr(16),$e=Xr,Xr=0;$e>0&&Xr<Ea;)--$e,ot&=Ar-1,In(8),Fr[Is+Xr++]=rt[ot++]=ii(8),lr(8);return 0==$e&&(mt=-1),Xr}function Vs(Fr,Is,Ea){if(null==wt){let Xr=Array(288).fill(8,0,144).fill(9,144,256).fill(7,256,280).fill(8,280,288);pn=7;let ys=new cr(Xr,288,257,Rs,es,pn);if(0!=ys.status)throw new Error("HufBuild error: "+ys.status);if(wt=ys.root,pn=ys.m,Xr.fill(5,0,30),jn=5,ys=new cr(Xr,30,0,ho,ro,jn),ys.status>1)throw wt=null,new Error("HufBuild error: "+ys.status);fn=ys.root,jn=ys.m}return it=wt,un=fn,It=pn,Pt=jn,Qi(Fr,Is,Ea)}function na(Fr,Is,Ea){let Xr,ys,tl,ll,Of,nl,Qa=new Array(316).fill(0);In(5);const Mo=257+ii(5);lr(5),In(5);const Gh=1+ii(5);lr(5),In(4);const Ol=4+ii(4);if(lr(4),Mo>286||Gh>30)return-1;for(ys=0;ys<Ol;++ys)In(3),Qa[ws[ys]]=ii(3),lr(3);for(;ys<19;++ys)Qa[ws[ys]]=0;if(It=7,nl=new cr(Qa,19,19,null,null,It),0!=nl.status)return-1;for(it=nl.root,It=nl.m,ll=Mo+Gh,Xr=tl=0;Xr<ll;)if(In(It),Of=it.list[ii(It)],ys=Of.b,lr(ys),ys=Of.n,ys<16)Qa[Xr++]=tl=ys;else if(16==ys){if(In(2),ys=3+ii(2),lr(2),Xr+ys>ll)return-1;for(;ys-- >0;)Qa[Xr++]=tl}else if(17==ys){if(In(3),ys=3+ii(3),lr(3),Xr+ys>ll)return-1;for(;ys-- >0;)Qa[Xr++]=0;tl=0}else{if(In(7),ys=11+ii(7),lr(7),Xr+ys>ll)return-1;for(;ys-- >0;)Qa[Xr++]=0;tl=0}if(It=9,nl=new cr(Qa,Mo,257,Rs,es,It),0==It&&(nl.status=1),0!=nl.status)return-1;for(it=nl.root,It=nl.m,Xr=0;Xr<Gh;++Xr)Qa[Xr]=Qa[Xr+Mo];return Pt=6,nl=new cr(Qa,Gh,0,ho,ro,Pt),un=nl.root,Pt=nl.m,0==Pt&&Mo>257||0!=nl.status?-1:Qi(Fr,Is,Ea)}function yo(Fr,Is,Ea){let ys,Xr=0;for(;Xr<Ea;){if(Lt&&-1==mt)return Xr;if($e>0){if(0!=mt)for(;$e>0&&Xr<Ea;)--$e,Nt&=Ar-1,ot&=Ar-1,Fr[Is+Xr++]=rt[ot++]=rt[Nt++];else{for(;$e>0&&Xr<Ea;)--$e,ot&=Ar-1,In(8),Fr[Is+Xr++]=rt[ot++]=ii(8),lr(8);0==$e&&(mt=-1)}if(Xr==Ea)return Xr}if(-1==mt){if(Lt)break;In(1),0!=ii(1)&&(Lt=!0),lr(1),In(2),mt=ii(2),lr(2),it=null,$e=0}switch(mt){case 0:ys=is(Fr,Is+Xr,Ea-Xr);break;case 1:ys=null!=it?Qi(Fr,Is+Xr,Ea-Xr):Vs(Fr,Is+Xr,Ea-Xr);break;case 2:ys=null!=it?Qi(Fr,Is+Xr,Ea-Xr):na(Fr,Is+Xr,Ea-Xr);break;default:ys=-1}if(-1==ys)return Lt?0:-1;Xr+=ys}return Xr}let pi,bl=0;for(;(pi=yo(Ae,bl,Math.min(1024,Ae.byteLength-bl)))>0;)bl+=pi;return bl}function Yo(st,Ae,rt,ot){for(let wt=rt=rt||0,fn=ot=ot||st.length-rt,pn=0;wt<fn;){let jn=st[wt++],Yn=jn>>4;if(Yn>0){let it=Yn+240;for(;255===it;)it=st[wt++],Yn+=it;let un=wt+Yn;for(;wt<un;)Ae[pn++]=st[wt++];if(wt===fn)return pn}const lt=st[wt++]|st[wt++]<<8;if(0===lt||lt>pn)return-(wt-2);let mt=15&jn,Lt=mt+240;for(;255===Lt;)Lt=st[wt++],mt+=Lt;let $e=pn-lt;const Nt=pn+mt+4;for(;pn<Nt;)Ae[pn++]=Ae[$e++]}return j}function kl(st,Ae,rt,ot){return fo.apply(this,arguments)}function fo(){return(fo=(0,ze.Z)(function*(st,Ae,rt,ot){const fn=st.byteLength,pn=$e=>String.fromCharCode(st.getUint8($e)),jn=$e=>st.getUint8($e);let Yn=ot||0,lt=0,mt=null;const Lt=()=>{for(;lt<Ae;){let $e="unknown",Nt=0,it=0;if(Yn+9>=fn)return rt||console.error("Error R__unzip: header size exceeds buffer size"),Promise.resolve(null);if("Z"==pn(Yn)&&"L"==pn(Yn+1)&&8==jn(Yn+2)?($e="new",Nt=2):"C"==pn(Yn)&&"S"==pn(Yn+1)&&8==jn(Yn+2)?($e="old",Nt=0):"X"==pn(Yn)&&"Z"==pn(Yn+1)&&0==jn(Yn+2)?$e="LZMA":"Z"==pn(Yn)&&"S"==pn(Yn+1)&&1==jn(Yn+2)?$e="ZSTD":"L"==pn(Yn)&&"4"==pn(Yn+1)&&($e="LZ4",Nt=0,it=8),"new"!==$e&&"old"!==$e&&"LZ4"!==$e&&"ZSTD"!==$e)return rt||console.error(`R__unzip: ${$e} format is not supported!`),Promise.resolve(null);const un=9+(255&jn(Yn+3)|(255&jn(Yn+4))<<8|(255&jn(Yn+5))<<16),It=new Uint8Array(st.buffer,st.byteOffset+Yn+9+Nt+it,Math.min(st.byteLength-Yn-9-Nt-it,un-9-it));if("ZSTD"===$e){const Fn=In=>new Promise((ii,lr)=>{In.run(cr=>{const is=(new cr.Streaming).decompress(It),Vs=is.length;if(0!==is.byteOffset)return lr(Error("ZSTD result with byteOffset != 0"));mt||(mt=new ArrayBuffer(Ae));let na=new Uint8Array(mt,lt);for(let yo=0;yo<Vs;++yo)na[yo]=is[yo];lt+=Vs,Yn+=un,ii(!0)})});return((0,M.isNodeJs)()?Ce.e(495).then(Ce.t.bind(Ce,6495,19)).then(In=>Fn(In.ZstdCodec)):(0,M.loadScript)("../../zstd/zstd-codec.min.js").catch(()=>(0,M.loadScript)("https://root.cern/js/zstd/zstd-codec.min.js")).then(()=>Fn(ZstdCodec))).then(()=>Lt())}mt||(mt=new ArrayBuffer(Ae));let Pt=new Uint8Array(mt,lt);const Sn="LZ4"===$e?Yo(It,Pt):Es(It,Pt);if(Sn<=0)break;lt+=Sn,Yn+=un}return lt!==Ae?(rt||console.error(`R__unzip: fail to unzip data expects ${Ae}, got ${lt}`),Promise.resolve(null)):Promise.resolve(new DataView(mt))};return Lt()})).apply(this,arguments)}class eo{constructor(Ae,rt,ot,wt){this._typename="TBuffer",this.arr=Ae,this.o=rt||0,this.fFile=ot,this.length=wt||(Ae?Ae.byteLength:0),this.clearObjectMap(),this.fTagOffset=0,this.last_read_version=0}locate(Ae){this.o=Ae}shift(Ae){this.o+=Ae}remain(){return this.length-this.o}getMappedObject(Ae){return this.fObjectMap[Ae]}mapObject(Ae,rt){null!==rt&&(this.fObjectMap[Ae]=rt)}mapClass(Ae,rt){this.fClassMap[Ae]=rt}getMappedClass(Ae){return Ae in this.fClassMap?this.fClassMap[Ae]:-1}clearObjectMap(){this.fObjectMap={},this.fClassMap={},this.fObjectMap[0]=null,this.fDisplacement=0}readVersion(){let Ae={},rt=this.ntou4();return rt&Je?Ae.bytecnt=rt-Je-2:this.o-=4,this.last_read_version=Ae.val=this.ntoi2(),this.last_read_checksum=0,Ae.off=this.o,Ae.val<=0&&Ae.bytecnt&&Ae.bytecnt>=4&&(Ae.checksum=this.ntou4(),this.fFile.findStreamerInfo(void 0,void 0,Ae.checksum)?this.last_read_checksum=Ae.checksum:(this.o-=4,delete Ae.checksum)),Ae}checkByteCount(Ae,rt){return void 0===Ae.bytecnt||Ae.off+Ae.bytecnt===this.o||(rt&&console.log(`Missmatch in ${rt} bytecount expected = ${Ae.bytecnt}  got = ${this.o-Ae.off}`),this.o=Ae.off+Ae.bytecnt,!1)}readTString(){let Ae=this.ntou1();if(255==Ae&&(Ae=this.ntou4()),0==Ae)return"";const rt=this.o;return this.o+=Ae,0==this.codeAt(rt)?"":this.substring(rt,rt+Ae)}readFastString(Ae){let ot,rt="",wt=!1;for(let fn=0;(Ae<0||fn<Ae)&&(ot=this.ntou1(),!(0==ot&&(wt=!0,Ae<0)));++fn)wt||(rt+=String.fromCharCode(ot));return rt}ntou1(){return this.arr.getUint8(this.o++)}ntou2(){const Ae=this.o;return this.o+=2,this.arr.getUint16(Ae)}ntou4(){const Ae=this.o;return this.o+=4,this.arr.getUint32(Ae)}ntou8(){const Ae=this.arr.getUint32(this.o);this.o+=4;const rt=this.arr.getUint32(this.o);return this.o+=4,Ae<2097152?4294967296*Ae+rt:BigInt(Ae)*BigInt(4294967296)+BigInt(rt)}ntoi1(){return this.arr.getInt8(this.o++)}ntoi2(){const Ae=this.o;return this.o+=2,this.arr.getInt16(Ae)}ntoi4(){const Ae=this.o;return this.o+=4,this.arr.getInt32(Ae)}ntoi8(){const Ae=this.arr.getUint32(this.o);this.o+=4;const rt=this.arr.getUint32(this.o);return this.o+=4,Ae<2147483648?Ae<2097152?4294967296*Ae+rt:BigInt(Ae)*BigInt(4294967296)+BigInt(rt):~Ae<2097152?-1-(4294967296*~Ae+~rt):BigInt(-1)-(BigInt(~Ae)*BigInt(4294967296)+BigInt(~rt))}ntof(){const Ae=this.o;return this.o+=4,this.arr.getFloat32(Ae)}ntod(){const Ae=this.o;return this.o+=8,this.arr.getFloat64(Ae)}readFastArray(Ae,rt){let ot,wt=0,fn=this.o;const pn=this.arr;switch(rt){case x:for(ot=new Float64Array(Ae);wt<Ae;++wt,fn+=8)ot[wt]=pn.getFloat64(fn);break;case Z:for(ot=new Float32Array(Ae);wt<Ae;++wt,fn+=4)ot[wt]=pn.getFloat32(fn);break;case X:case T:for(ot=new Array(Ae);wt<Ae;++wt)ot[wt]=this.ntoi8();return ot;case R:case $:for(ot=new Array(Ae);wt<Ae;++wt)ot[wt]=this.ntou8();return ot;case ue:case O:for(ot=new Int32Array(Ae);wt<Ae;++wt,fn+=4)ot[wt]=pn.getInt32(fn);break;case K:for(ot=new Int16Array(Ae);wt<Ae;++wt,fn+=2)ot[wt]=pn.getInt16(fn);break;case _:for(ot=new Uint16Array(Ae);wt<Ae;++wt,fn+=2)ot[wt]=pn.getUint16(fn);break;case Y:for(ot=new Int8Array(Ae);wt<Ae;++wt)ot[wt]=pn.getInt8(fn++);break;case J:case m:for(ot=new Uint8Array(Ae);wt<Ae;++wt)ot[wt]=pn.getUint8(fn++);break;case D:for(ot=new Array(Ae);wt<Ae;++wt)ot[wt]=this.readTString();return ot;case p:throw new Error("kDouble32 should not be used in readFastArray");case ie:throw new Error("kFloat16 should not be used in readFastArray");default:for(ot=new Uint32Array(Ae);wt<Ae;++wt,fn+=4)ot[wt]=pn.getUint32(fn)}return this.o=fn,ot}canExtract(Ae){for(let rt=0;rt<Ae.length;rt+=2)if(Ae[rt]+Ae[rt+1]>this.length)return!1;return!0}extract(Ae){if(!this.arr||!this.arr.buffer||!this.canExtract(Ae))return null;if(2===Ae.length)return new DataView(this.arr.buffer,this.arr.byteOffset+Ae[0],Ae[1]);let rt=new Array(Ae.length/2);for(let ot=0;ot<Ae.length;ot+=2)rt[ot/2]=new DataView(this.arr.buffer,this.arr.byteOffset+Ae[ot],Ae[ot+1]);return rt}codeAt(Ae){return this.arr.getUint8(Ae)}substring(Ae,rt){let ot="";for(let wt=Ae;wt<rt;++wt)ot+=String.fromCharCode(this.arr.getUint8(wt));return ot}readNdimArray(Ae,rt){let fn,ot=Ae.fArrayDim,wt=Ae.fMaxIndex;if(ot<1&&Ae.fArrayLength>0&&(ot=1,wt=[Ae.fArrayLength]),Ae.minus1&&--ot,ot<1)return rt(this,Ae);if(1===ot){fn=new Array(wt[0]);for(let pn=0;pn<wt[0];++pn)fn[pn]=rt(this,Ae)}else if(2===ot){fn=new Array(wt[0]);for(let pn=0;pn<wt[0];++pn){let jn=new Array(wt[1]);for(let Yn=0;Yn<wt[1];++Yn)jn[Yn]=rt(this,Ae);fn[pn]=jn}}else{let Yn,pn=[],jn=[];for(Yn=0;Yn<ot;++Yn)pn[Yn]=0,jn[Yn]=[];for(fn=jn[0];pn[0]<wt[0];)for(Yn=ot-1,jn[Yn].push(rt(this,Ae)),++pn[Yn];pn[Yn]===wt[Yn]&&Yn>0;)pn[Yn]=0,jn[Yn-1].push(jn[Yn]),jn[Yn]=[],++pn[--Yn]}return fn}readTKey(Ae){Ae||(Ae={}),this.classStreamer(Ae,"TKey");let rt=Ae.fName.replace(/['"]/g,"");return rt!==Ae.fName&&(Ae.fRealName=Ae.fName,Ae.fName=rt),Ae}readBasketEntryOffset(Ae,rt){if(this.locate(Ae.fLast-rt),this.remain()<=0)return!Ae.fEntryOffset&&Ae.fNevBuf<=1&&(Ae.fEntryOffset=[Ae.fKeylen]),void(Ae.fEntryOffset||console.warn(`No fEntryOffset when expected for basket with ${Ae.fNevBuf} entries`));const ot=this.ntoi4();if(ot<0||ot>4*this.remain())return console.error(`Error when reading entries offset from basket fNevBuf ${Ae.fNevBuf} remains ${this.remain()} want to read ${ot}`),void(Ae.fNevBuf<=1&&(Ae.fEntryOffset=[Ae.fKeylen]));Ae.fEntryOffset=this.readFastArray(ot,ue),Ae.fEntryOffset||(Ae.fEntryOffset=[Ae.fKeylen]),Ae.fDisplacement=this.remain()>0?this.readFastArray(this.ntoi4(),ue):void 0}readClass(){const Ae={name:-1},rt=this.ntou4(),ot=this.o;let wt;if(wt=rt&Je&&rt!=ct?this.ntou4():rt,!(wt&We))return Ae.objtag=wt+this.fDisplacement,Ae;if(wt==ct)Ae.name=this.readFastString(-1),-1===this.getMappedClass(this.fTagOffset+ot+2)&&this.mapClass(this.fTagOffset+ot+2,Ae.name);else{const fn=(wt&~We)+this.fDisplacement;Ae.name=this.getMappedClass(fn),-1===Ae.name&&console.error(`Did not found class with tag ${fn}`)}return Ae}readObjectAny(){const Ae=this.fTagOffset+this.o+2,rt=this.readClass();if("objtag"in rt)return this.getMappedObject(rt.objtag);if(-1===rt.name)return null;const ot=br(rt.name);let wt;return 0===ot?wt=this.readTString():ot>0?(wt=this.readFastArray(this.ntou4(),ot),this.mapObject(Ae,wt)):(wt={},this.mapObject(Ae,wt),this.classStreamer(wt,rt.name)),wt}classStreamer(Ae,rt){void 0===Ae._typename&&(Ae._typename=rt);const ot=_n[rt];if(ot)return ot(this,Ae),Ae;const wt=this.readVersion(),fn=this.fFile.getStreamer(rt,wt);if(null!==fn){const pn=fn.length;for(let jn=0;jn<pn;++jn)fn[jn].func(this,Ae)}else(0,M.addMethods)(Ae);return this.checkByteCount(wt,rt),Ae}}class al{constructor(Ae,rt,ot){this.fFile=Ae,this._typename=Ze,this.dir_name=rt,this.dir_cycle=ot,this.fKeys=[]}getKey(Ae,rt,ot){"number"!=typeof rt&&(rt=-1);let wt=null;for(let pn=0;pn<this.fKeys.length;++pn){const jn=this.fKeys[pn];if(jn&&jn.fName===Ae){if(jn.fCycle==rt){wt=jn;break}rt<0&&(!wt||jn.fCycle>wt.fCycle)&&(wt=jn)}}if(wt)return ot?wt:Promise.resolve(wt);let fn=Ae.lastIndexOf("/");for(;fn>0;){let pn=Ae.slice(0,fn),jn=Ae.slice(fn+1),Yn=this.getKey(pn,void 0,!0);if(Yn&&!ot&&0==Yn.fClassName.indexOf(Ze))return this.fFile.readObject(this.dir_name+"/"+pn,1).then(lt=>lt.getKey(jn,rt));fn=Ae.lastIndexOf("/",fn-1)}return ot?null:Promise.reject(Error(`Key not found ${Ae}`))}readObject(Ae,rt){return this.fFile.readObject(this.dir_name+"/"+Ae,rt)}readKeys(Ae){var rt=this;return(0,ze.Z)(function*(){return Ae.classStreamer(rt,Ze),rt.fSeekKeys<=0||rt.fNbytesKeys<=0?rt:rt.fFile.readBuffer([rt.fSeekKeys,rt.fNbytesKeys]).then(ot=>{const wt=new eo(ot,0,rt.fFile);wt.readTKey();const fn=wt.ntoi4();for(let pn=0;pn<fn;++pn)rt.fKeys.push(wt.readTKey());return rt.fFile.fDirectories.push(rt),rt})})()}}class xr{constructor(Ae){if(this._typename="TFile",this.fEND=0,this.fFullURL=Ae,this.fURL=Ae,this.fAcceptRanges=!0,this.fUseStampPar=!!M.settings.UseStamp&&"stamp="+(new Date).getTime(),this.fFileContent=null,this.fMaxRanges=M.settings.MaxRanges||200,this.fDirectories=[],this.fKeys=[],this.fSeekInfo=0,this.fNbytesInfo=0,this.fTagOffset=0,this.fStreamers=0,this.fStreamerInfos=null,this.fFileName="",this.fStreamers=[],this.fBasicTypes={},!(0,M.isStr)(this.fURL))return this;"+"===this.fURL[this.fURL.length-1]&&(this.fURL=this.fURL.slice(0,this.fURL.length-1),this.fAcceptRanges=!1),"^"===this.fURL[this.fURL.length-1]&&(this.fURL=this.fURL.slice(0,this.fURL.length-1),this.fSkipHeadRequest=!0),"-"===this.fURL[this.fURL.length-1]&&(this.fURL=this.fURL.slice(0,this.fURL.length-1),this.fUseStampPar=!1),0==this.fURL.indexOf("file://")&&(this.fUseStampPar=!1,this.fAcceptRanges=!1);const rt=Math.max(this.fURL.lastIndexOf("/"),this.fURL.lastIndexOf("\\"));this.fFileName=rt>=0?this.fURL.slice(rt+1):this.fURL}assignFileContent(Ae){this.fFileContent=new eo(new DataView(Ae)),this.fAcceptRanges=!1,this.fUseStampPar=!1,this.fEND=this.fFileContent.length}_open(){var Ae=this;return(0,ze.Z)(function*(){return!Ae.fAcceptRanges||Ae.fSkipHeadRequest?Ae.readKeys():(0,M.httpRequest)(Ae.fURL,"head").then(rt=>{rt.getResponseHeader("Accept-Ranges")||(Ae.fAcceptRanges=!1);const wt=rt.getResponseHeader("Content-Length");return wt?Ae.fEND=parseInt(wt):Ae.fAcceptRanges=!1,Ae.readKeys()})})()}readBuffer(Ae,rt,ot){var wt=this;return(0,ze.Z)(function*(){if(null!==wt.fFileContent&&!rt&&(!wt.fAcceptRanges||wt.fFileContent.canExtract(Ae)))return wt.fFileContent.extract(Ae);let jn,Yn,Nt,fn=wt,pn=fn.fURL,lt=new Promise((un,It)=>{jn=un,Yn=It}),mt=0,Lt=0,$e=[];if((0,M.isStr)(rt)&&rt){const un=pn.lastIndexOf("/");pn=un<0?rt:pn.slice(0,un+1)+rt}function it(un){if(un&&(mt=Lt,Lt=Math.min(mt+2*fn.fMaxRanges,Ae.length),mt>=Ae.length))return jn($e);let It=pn,Pt="bytes",Sn=0;fn.fUseStampPar&&(It+=(It.indexOf("?")<0?"?":"&")+fn.fUseStampPar);for(let Fn=mt;Fn<Lt;Fn+=2)Pt+=(Fn>mt?",":"=")+Ae[Fn]+"-"+(Ae[Fn]+Ae[Fn+1]-1),Sn+=Ae[Fn+1];return Lt-mt>2&&(Sn+=60*(Lt-mt)),(0,M.createHttpRequest)(It,"buf",Nt,void 0,!0).then(Fn=>{if(fn.fAcceptRanges&&(Fn.setRequestHeader("Range",Pt),Fn.expected_size=Math.max(Math.round(1.1*Sn),Sn+200)),ot&&(0,M.isFunc)(Fn.addEventListener)){let Gi=0,In=0,ii=0;for(let Qi=1;Qi<Ae.length;Qi+=2)ii+=Ae[Qi],Qi<mt&&(Gi+=Ae[Qi]),Qi<Lt&&(In+=Ae[Qi]);ii||(ii=1);let lr=Gi/ii,cr=(In-Gi)/ii;Fn.addEventListener("progress",function(Qi){Qi.lengthComputable&&ot(lr+cr*Qi.loaded/Qi.total)})}Fn.send(null)})}return Nt=function(un){if(!un&&fn.fUseStampPar&&0===Ae[0]&&2===Ae.length)return fn.fUseStampPar=!1,it();if(un&&0===Ae[0]&&2===Ae.length&&!fn.fFileContent)return fn.fFileContent=new eo((0,M.isStr)(un)?un:new DataView(un)),fn.fAcceptRanges||(fn.fEND=fn.fFileContent.length),jn(fn.fFileContent.extract(Ae));if(!un)return 0===mt&&Lt>2&&fn.fMaxRanges>1?(fn.fMaxRanges=Lt/2>200?200:Lt/2>50?50:Lt/2>20?20:Lt/2>5?5:1,Lt=Math.min(Lt,2*fn.fMaxRanges),it()):Yn(Error("Fail to read with several ranges"));if(Lt-mt==2){let lr=new DataView(un);return 2===Ae.length?jn(lr):($e.push(lr),it(!0))}let It=this.getResponseHeader("Content-Type"),Pt=(0,M.isStr)(It)&&It.indexOf("multipart")>=0,Sn=new DataView(un);if(!Pt){let lr=this.getResponseHeader("Content-Range"),cr=0,Qi=-1;if(lr&&lr.indexOf("bytes")>=0){let Vs=lr.slice(lr.indexOf("bytes")+6).split(/[\s-\/]+/);3===Vs.length&&(cr=parseInt(Vs[0]),Qi=parseInt(Vs[1]),(!Number.isInteger(cr)||!Number.isInteger(Qi)||cr>Qi)&&(cr=0,Qi=-1))}let is=cr<=Qi;for(let Vs=mt;Vs<Lt;Vs+=2)(Ae[Vs]<cr||Ae[Vs]+Ae[Vs+1]-1>Qi)&&(is=!1);if(is){for(let Vs=mt;Vs<Lt;Vs+=2)$e.push(new DataView(un,Ae[Vs]-cr,Ae[Vs+1]));return it(!0)}return 1===fn.fMaxRanges||0!==mt?Yn(Error("Server returns normal response when multipart was requested, disable multirange support")):(fn.fMaxRanges=1,Lt=Math.min(Lt,2*fn.fMaxRanges),it())}let Fn=It.indexOf("boundary="),Gi="",In=mt,ii=0;for(Fn>0?(Gi=It.slice(Fn+9),'"'==Gi[0]&&'"'==Gi[Gi.length-1]&&(Gi=Gi.slice(1,Gi.length-1)),Gi="--"+Gi):console.error("Did not found boundary id in the response header");In<Lt;){let lr,cr=Sn.getUint8(ii),Qi=0,is="",Vs=!1,na=0,yo=-1;for(;ii<Sn.byteLength-1&&!Vs&&Qi<5;){if(lr=cr,cr=Sn.getUint8(ii+1),13==lr&&10==cr||10==lr){if(is.length>2&&"--"==is.slice(0,2)&&is!==Gi)return Yn(Error(`Decode multipart message, expect boundary ${Gi} got ${is}`));if(is=is.toLowerCase(),is.indexOf("content-range")>=0&&is.indexOf("bytes")>0){let pi=is.slice(is.indexOf("bytes")+6).split(/[\s-\/]+/);3===pi.length?(na=parseInt(pi[0]),yo=parseInt(pi[1]),(!Number.isInteger(na)||!Number.isInteger(yo)||na>yo)&&(na=0,yo=-1)):console.error(`Fail to decode content-range ${is} ${pi}`)}Qi>1&&0===is.length&&(Vs=!0),Qi++,is="",10!=lr&&(ii++,cr=Sn.getUint8(ii+1))}else is+=String.fromCharCode(lr);ii++}if(!Vs)return Yn(Error("Cannot decode header in multipart message"));if(na>yo)$e.push(new DataView(un,ii,Ae[In+1])),ii+=Ae[In+1],In+=2;else{for(;In<Lt&&Ae[In]>=na&&Ae[In]+Ae[In+1]-1<=yo;)$e.push(new DataView(un,ii+Ae[In]-na,Ae[In+1])),In+=2;ii+=yo-na+1}}it(!0)},it(!0).then(()=>lt)})()}getFileName(){return this.fFileName}getDir(Ae,rt){if(void 0===rt&&(0,M.isStr)(Ae)){const ot=Ae.lastIndexOf(";");ot>0&&(rt=parseInt(Ae.slice(ot+1)),Ae=Ae.slice(0,ot))}for(let ot=0;ot<this.fDirectories.length;++ot){const wt=this.fDirectories[ot];if(wt.dir_name==Ae&&(void 0===rt||wt.dir_cycle===rt))return wt}return null}getKey(Ae,rt,ot){"number"!=typeof rt&&(rt=-1);let wt=null;for(let pn=0;pn<this.fKeys.length;++pn){const jn=this.fKeys[pn];if(jn&&jn.fName===Ae){if(jn.fCycle==rt){wt=jn;break}rt<0&&(!wt||jn.fCycle>wt.fCycle)&&(wt=jn)}}if(wt)return ot?wt:Promise.resolve(wt);let fn=Ae.lastIndexOf("/");for(;fn>0;){let pn=Ae.slice(0,fn),jn=Ae.slice(fn+1),Yn=this.getDir(pn);if(Yn)return Yn.getKey(jn,rt,ot);let lt=this.getKey(pn,void 0,!0);if(lt&&!ot&&0==lt.fClassName.indexOf(Ze))return this.readObject(pn).then(mt=>mt.getKey(jn,rt));fn=Ae.lastIndexOf("/",fn-1)}return ot?null:Promise.reject(Error(`Key not found ${Ae}`))}readObjBuffer(Ae){var rt=this;return(0,ze.Z)(function*(){return rt.readBuffer([Ae.fSeekKey+Ae.fKeylen,Ae.fNbytes-Ae.fKeylen]).then(ot=>{if(Ae.fObjlen<=Ae.fNbytes-Ae.fKeylen){let wt=new eo(ot,0,rt);return wt.fTagOffset=Ae.fKeylen,wt}return kl(ot,Ae.fObjlen).then(wt=>{if(!wt)return Promise.reject(Error("Fail to UNZIP buffer"));let fn=new eo(wt,0,rt);return fn.fTagOffset=Ae.fKeylen,fn})})})()}readObject(Ae,rt,ot){var wt=this;return(0,ze.Z)(function*(){let fn=Ae.lastIndexOf(";");for(fn>0&&(rt=parseInt(Ae.slice(fn+1)),Ae=Ae.slice(0,fn)),"number"!=typeof rt&&(rt=-1);Ae.length&&"/"==Ae[0];)Ae=Ae.slice(1);return wt.getKey(Ae,rt).then(pn=>{if(Ae==ce&&pn.fClassName==M.clTList)return wt.fStreamerInfos;let jn=!1;if(pn.fClassName==Ze||pn.fClassName==Ie){let Yn=wt.getDir(Ae,rt);if(Yn)return Yn;jn=!0}return!jn&&ot?Promise.reject(Error(`Key ${Ae} is not directory}`)):wt.readObjBuffer(pn).then(Yn=>{if(jn){let mt=new al(wt,Ae,rt);return mt.fTitle=pn.fTitle,mt.readKeys(Yn)}let lt={};return Yn.mapObject(1,lt),Yn.classStreamer(lt,pn.fClassName),pn.fClassName===M.clTF1||pn.fClassName===M.clTF2?wt._readFormulas(lt):lt})})})()}_readFormulas(Ae){var rt=this;return(0,ze.Z)(function*(){let ot=[];for(let wt=0;wt<rt.fKeys.length;++wt)"TFormula"==rt.fKeys[wt].fClassName&&ot.push(rt.readObject(rt.fKeys[wt].fName,rt.fKeys[wt].fCycle));return Promise.all(ot).then(wt=>(wt.forEach(fn=>Ae.addFormula(fn)),Ae))})()}extractStreamerInfos(Ae){if(!Ae)return;let rt={};Ae.mapObject(1,rt),Ae.classStreamer(rt,M.clTList),rt._typename=je,this.fStreamerInfos=rt,M.internals.addStreamerInfosForPainter&&M.internals.addStreamerInfosForPainter(rt);for(let ot=0;ot<rt.arr.length;++ot){let wt=rt.arr[ot];if(wt.fElements)for(let fn=0;fn<wt.fElements.arr.length;++fn){let pn=wt.fElements.arr[fn];if(!pn.fTypeName||!pn.fType)continue;let jn=pn.fType,Yn=pn.fTypeName;if(jn>=60){if(jn===Tt&&pn._typename==Be&&pn.fSTLtype&&pn.fCtype&&pn.fCtype<20){let mt=(vn[pn.fSTLtype]||"undef")+"<";if(0===Yn.indexOf(mt)&&">"==Yn[Yn.length-1]&&(jn=pn.fCtype,Yn=Yn.slice(mt.length,Yn.length-1).trim(),pn.fSTLtype===Ot||pn.fSTLtype===sn)){if(!(Yn.indexOf(",")>0))continue;Yn=Yn.slice(0,Yn.indexOf(",")).trim()}}if(jn>=60)continue}else jn>20&&"*"==Yn[Yn.length-1]&&(Yn=Yn.slice(0,Yn.length-1)),jn%=20;const lt=dn(Yn);lt!==jn&&(jn===q&&lt===F||jn===O&&lt===ue||Yn&&jn&&this.fBasicTypes[Yn]!==jn&&(this.fBasicTypes[Yn]=jn))}}}readKeys(){var Ae=this;return(0,ze.Z)(function*(){return Ae.readBuffer([0,1024]).then(rt=>{let ot=new eo(rt,0,Ae);if("root"!==ot.substring(0,4))return Promise.reject(Error(`Not a ROOT file ${Ae.fURL}`));if(ot.shift(4),Ae.fVersion=ot.ntou4(),Ae.fBEGIN=ot.ntou4(),Ae.fVersion<1e6?(Ae.fEND=ot.ntou4(),Ae.fSeekFree=ot.ntou4(),Ae.fNbytesFree=ot.ntou4(),ot.shift(4),Ae.fNbytesName=ot.ntou4(),Ae.fUnits=ot.ntou1(),Ae.fCompress=ot.ntou4(),Ae.fSeekInfo=ot.ntou4(),Ae.fNbytesInfo=ot.ntou4()):(Ae.fEND=ot.ntou8(),Ae.fSeekFree=ot.ntou8(),Ae.fNbytesFree=ot.ntou4(),ot.shift(4),Ae.fNbytesName=ot.ntou4(),Ae.fUnits=ot.ntou1(),Ae.fCompress=ot.ntou4(),Ae.fSeekInfo=ot.ntou8(),Ae.fNbytesInfo=ot.ntou4()),!Ae.fSeekInfo||!Ae.fNbytesInfo)return Promise.reject(Error(`File ${Ae.fURL} does not provide streamer infos`));if(!Ae.fNbytesName||Ae.fNbytesName>1e5)return Promise.reject(Error(`Cannot read directory info of the file ${Ae.fURL}`));let wt=Ae.fNbytesName+22;return wt+=4,wt+=4,wt+=18,Ae.fVersion>=4e4&&(wt+=12),Ae.readBuffer([Ae.fBEGIN,Math.max(300,wt)])}).then(rt=>{let ot=new eo(rt,0,Ae);return Ae.fTitle=ot.readTKey().fTitle,ot.locate(Ae.fNbytesName),ot.classStreamer(Ae,Ze),Ae.fSeekKeys?Ae.readBuffer([Ae.fSeekKeys,Ae.fNbytesKeys,Ae.fSeekInfo,Ae.fNbytesInfo]):Promise.reject(Error(`Empty keys list in ${Ae.fURL}`))}).then(rt=>{const ot=new eo(rt[0],0,Ae);ot.readTKey();const wt=ot.ntoi4();for(let jn=0;jn<wt;++jn)Ae.fKeys.push(ot.readTKey());const pn=new eo(rt[1],0,Ae).readTKey();return pn?(Ae.fKeys.push(pn),Ae.readObjBuffer(pn)):Promise.reject(Error(`Fail to read StreamerInfo data in ${Ae.fURL}`))}).then(rt=>(Ae.extractStreamerInfos(rt),Ae))})()}readDirectory(Ae,rt){var ot=this;return(0,ze.Z)(function*(){return ot.readObject(Ae,rt,!0)})()}findStreamerInfo(Ae,rt,ot){if(!this.fStreamerInfos)return null;const wt=this.fStreamerInfos.arr,fn=wt.length;if(void 0!==ot){let pn=this.fStreamerInfos.cache;pn||(pn=this.fStreamerInfos.cache={});let jn=pn[ot];if(void 0!==jn)return jn;for(let Yn=0;Yn<fn;++Yn)if(jn=wt[Yn],jn.fCheckSum===ot)return pn[ot]=jn;pn[ot]=null}else for(let pn=0;pn<fn;++pn){let jn=wt[pn];if(jn.fName===Ae&&(jn.fClassVersion===rt||void 0===rt))return jn}return null}getStreamer(Ae,rt,ot){if("TQObject"==Ae||Ae==Oe)return null;let wt,fn=Ae;if(rt&&(fn+=rt.checksum?`$chksum${rt.checksum}`:`$ver${rt.val}`,wt=this.fStreamers[fn],void 0!==wt))return wt;let pn=qt[Ae];if((0,M.isStr)(pn))return this.getStreamer(pn,rt,ot);if((0,M.isFunc)(pn))return wt=[{typename:Ae,func:pn}],Ur(Ae,wt);if(wt=[],(0,M.isObject)(pn)){if(!pn.name&&!pn.func)return pn;wt.push(pn)}if(ot||(ot=this.findStreamerInfo(Ae,rt.val,rt.checksum)),!ot)return delete this.fStreamers[fn],rt.nowarning||console.warn(`Not found streamer for ${Ae} ver ${rt.val} checksum ${rt.checksum} full ${fn}`),null;if(ot.fName==M.clTStyle&&ot.fElements&&ot.fElements.arr.forEach(jn=>{"fLineStyle"==jn.fName&&(jn.fName="fLineStyles")}),ot.fElements)for(let jn=0;jn<ot.fElements.arr.length;++jn)wt.push(Vi(ot.fElements.arr[jn],this));return this.fStreamers[fn]=wt,Ur(Ae,wt)}getSplittedStreamer(Ae,rt){if(!Ae)return rt;rt||(rt=[]);for(let ot=0;ot<Ae.length;++ot){let wt=Ae[ot];if(void 0===wt.base){rt.push(wt);continue}if(wt.basename==M.clTObject){rt.push({func(jn,Yn){jn.ntoi2(),Yn.fUniqueID=jn.ntou4(),Yn.fBits=jn.ntou4(),Yn.fBits&rn&&jn.ntou2()}});continue}let fn={val:wt.base};4294967295===fn.val&&(fn.val=1);let pn=this.getStreamer(wt.basename,fn);pn&&this.getSplittedStreamer(pn,rt)}return rt}delete(){this.fDirectories=null,this.fKeys=null,this.fStreamers=null,this.fSeekInfo=0,this.fNbytesInfo=0,this.fTagOffset=0}}function el(st){if(this.member_wise){const wt=st.ntou4();let fn=null,pn=this.stl_version;if(0===wt)return[];if(wt>1e6)throw new Error(`member-wise streaming of ${this.conttype} num ${wt} member ${this.name}`);pn.val===this.member_ver&&pn.checksum===this.member_checksum?fn=this.member_streamer:(fn=st.fFile.getStreamer(this.conttype,pn),this.member_streamer=fn=st.fFile.getSplittedStreamer(fn),this.member_ver=pn.val,this.member_checksum=pn.checksum);let Yn,lt,mt,jn=new Array(wt);for(Yn=0;Yn<wt;++Yn)jn[Yn]={_typename:this.conttype};if(fn)for(lt=0;lt<fn.length;++lt)if(mt=fn[lt],mt.split_func)mt.split_func(st,jn,wt);else for(Yn=0;Yn<wt;++Yn)mt.func(st,jn[Yn]);else console.error(`Fail to create split streamer for ${this.conttype} need to read ${wt} objects version ${pn}`);return jn}const Ae=st.ntou4();let rt=new Array(Ae),ot=0;if(Ae>2e5)return console.error(`vector streaming for ${this.conttype} at ${Ae}`),rt;if(this.arrkind>0)for(;ot<Ae;)rt[ot++]=st.readFastArray(st.ntou4(),this.arrkind);else if(0===this.arrkind)for(;ot<Ae;)rt[ot++]=st.readTString();else if(this.isptr)for(;ot<Ae;)rt[ot++]=st.readObjectAny();else if(this.submember)for(;ot<Ae;)rt[ot++]=this.submember.readelem(st);else for(;ot<Ae;)rt[ot++]=st.classStreamer({},this.conttype);return rt}function lo(st){let Ae=this.streamer;if(this.member_wise){const fn=this.stl_version;if(this.si){let pn=st.fFile.findStreamerInfo(this.pairtype,fn.val,fn.checksum);if(this.si!==pn&&(Ae=ir(pn,this.pairtype,st.fFile),!Ae||2!==Ae.length))return console.log(`Fail to produce streamer for ${this.pairtype}`),null}}const rt=st.ntoi4();let ot,wt=new Array(rt);for(this.member_wise&&st.remain()>=6&&(st.ntoi2()==Ke?st.shift(4):st.shift(-2)),ot=0;ot<rt;++ot)wt[ot]={_typename:this.pairtype},Ae[0].func(st,wt[ot]),this.member_wise||Ae[1].func(st,wt[ot]);if(this.member_wise)for(ot=0;ot<rt;++ot)Ae[1].func(st,wt[ot]);return wt}class Yi extends xr{constructor(Ae){super(null),this.fUseStampPar=!1,this.fLocalFile=Ae,this.fEND=Ae.size,this.fFullURL=Ae.name,this.fURL=Ae.name,this.fFileName=Ae.name}_open(){var Ae=this;return(0,ze.Z)(function*(){return Ae.readKeys()})()}readBuffer(Ae,rt){var ot=this;return(0,ze.Z)(function*(){let wt=ot.fLocalFile;return new Promise((fn,pn)=>{if(rt)return pn(Error(`Cannot access other local file ${rt}`));let jn=new FileReader,Yn=0,lt=[];jn.onload=function(mt){let Lt=new DataView(mt.target.result);return 2===Ae.length?fn(Lt):(lt.push(Lt),Yn+=2,Yn>=Ae.length?fn(lt):void jn.readAsArrayBuffer(wt.slice(Ae[Yn],Ae[Yn]+Ae[Yn+1])))},jn.readAsArrayBuffer(wt.slice(Ae[0],Ae[0]+Ae[1]))})})()}}class ga extends xr{constructor(Ae){super(null),this.fUseStampPar=!1,this.fEND=0,this.fFullURL=Ae,this.fURL=Ae,this.fFileName=Ae}_open(){var Ae=this;return(0,ze.Z)(function*(){return Ce.e(148).then(Ce.t.bind(Ce,2148,19)).then(rt=>(Ae.fs=rt,new Promise((ot,wt)=>Ae.fs.open(Ae.fFileName,"r",(fn,pn)=>{if(fn)return console.log(fn.message),wt(Error(`Not possible to open ${Ae.fFileName} inside node.js`));let jn=Ae.fs.fstatSync(pn);Ae.fEND=jn.size,Ae.fd=pn,Ae.readKeys().then(ot).catch(wt)}))))})()}readBuffer(Ae,rt){var ot=this;return(0,ze.Z)(function*(){return new Promise((wt,fn)=>{if(rt)return fn(Error(`Cannot access other local file ${rt}`));if(!ot.fs||!ot.fd)return fn(Error(`File is not opened ${ot.fFileName}`));let pn=0,jn=[],Yn=(lt,mt,Lt)=>{let $e=new DataView(Lt.buffer,Lt.byteOffset,Ae[pn+1]);return 2===Ae.length?wt($e):(jn.push($e),pn+=2,pn>=Ae.length?wt(jn):void ot.fs.read(ot.fd,Buffer.alloc(Ae[pn+1]),0,Ae[pn+1],Ae[pn],Yn))};ot.fs.read(ot.fd,Buffer.alloc(Ae[1]),0,Ae[1],Ae[0],Yn)})})()}}class xa{openFile(){return(0,ze.Z)(function*(){return!1})()}getFileName(){return""}getFileSize(){return 0}readBuffer(){return(0,ze.Z)(function*(){return null})()}}class Ta extends xr{constructor(Ae){super(null),this.fUseStampPar=!1,this.proxy=Ae}_open(){var Ae=this;return(0,ze.Z)(function*(){return Ae.proxy.openFile().then(rt=>{if(!rt)return!1;if(Ae.fEND=Ae.proxy.getFileSize(),Ae.fFullURL=Ae.fURL=Ae.fFileName=Ae.proxy.getFileName(),(0,M.isStr)(Ae.fFileName)){let ot=Ae.fFileName.lastIndexOf("/");ot>0&&ot<Ae.fFileName.length-4&&(Ae.fFileName=Ae.fFileName.slice(ot+1))}return Ae.readKeys()})})()}readBuffer(Ae,rt){var ot=this;return(0,ze.Z)(function*(){if(rt)return Promise.reject(Error(`Cannot access other file ${rt}`));if(!ot.proxy)return Promise.reject(Error(`File is not opened ${ot.fFileName}`));if(2==Ae.length)return ot.proxy.readBuffer(Ae[0],Ae[1]);let wt=[];for(let fn=0;fn<Ae.length;fn+=2)wt.push(ot.proxy.readBuffer(Ae[fn],Ae[fn+1]));return Promise.all(wt)})()}}function uc(st){let Ae;return(0,M.isNodeJs)()&&(0,M.isStr)(st)&&(0==st.indexOf("file://")?Ae=new ga(st.slice(7)):0!==st.indexOf("http")&&(Ae=new ga(st))),!Ae&&(0,M.isObject)(st)&&st instanceof xa&&(Ae=new Ta(st)),!Ae&&(0,M.isObject)(st)&&st instanceof ArrayBuffer&&(Ae=new xr("localfile.root"),Ae.assignFileContent(st)),!Ae&&(0,M.isObject)(st)&&st.size&&st.name&&(Ae=new Yi(st)),Ae||(Ae=new xr(st)),Ae._open()}Ur(M.clTNamed,qt[M.clTNamed]),Ur(M.clTObjString,qt[M.clTObjString])},9900:($r,At,Ce)=>{"use strict";Ce.d(At,{CDd:()=>xT,CP7:()=>V,DvJ:()=>Gl,FM8:()=>Di,FT0:()=>D2,GaR:()=>dr,Ilk:()=>wr,JOQ:()=>Jl,Kj0:()=>Yr,M8C:()=>cl,MP$:()=>Or,Mig:()=>N2,Pa4:()=>Ut,Qm_:()=>ST,ROQ:()=>Qo,TlE:()=>Bc,Tme:()=>Va,USm:()=>Ic,UY4:()=>pr,UZH:()=>M,Uk6:()=>FS,VLJ:()=>WD,Wl3:()=>K,YBo:()=>RS,Ys8:()=>eB,ZAu:()=>Ph,Zxw:()=>Vg,ZzF:()=>du,Zzh:()=>H1,_fP:()=>Ha,a$l:()=>Ss,cPb:()=>dc,cek:()=>px,dd2:()=>Lo,dpR:()=>F1,ehD:()=>X,ejS:()=>xi,fQA:()=>jD,iDF:()=>bm,iKG:()=>jf,iMs:()=>z1,iWj:()=>wh,mih:()=>wl,nls:()=>Ge,u9r:()=>So,uMZ:()=>CT,vBJ:()=>Ou,vmT:()=>k2,woe:()=>Ri,xCo:()=>rB,xo$:()=>P1,xsS:()=>xe,y8_:()=>Q2,yGw:()=>so,ybr:()=>pe,zf8:()=>Jb,zxs:()=>JD});var ze=Ce(5835);const M="146",L={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ye={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Be=0,je=1,Ze=2,Oe=1,ce=2,Y=3,K=0,ue=1,X=2,Z=0,O=1,P=2,x=3,p=4,w=5,m=100,_=101,F=102,R=103,q=104,T=200,$=201,J=202,ie=203,Me=204,de=205,fe=206,I=207,U=208,z=209,le=210,D=0,oe=1,_e=2,Ee=3,Ve=4,Qe=5,et=6,Tt=7,Bt=0,ve=1,Je=2,ct=0,We=1,Ke=2,ft=3,zt=4,Zt=5,Ot=301,sn=302,wn=303,Ln=304,En=306,$n=1e3,vn=1001,rn=1002,Gt=1003,qt=1004,_n=1005,ci=1006,ir=1007,br=1008,Ar=1009,cs=1010,Rs=1011,es=1012,ho=1013,ro=1014,ws=1015,Es=1016,Yo=1017,kl=1018,fo=1020,eo=1021,al=1022,xr=1023,_o=1024,el=1025,lo=1026,Yi=1027,ga=1028,xa=1029,Ta=1030,uc=1031,st=1033,Ae=33776,rt=33777,ot=33778,wt=33779,fn=35840,pn=35841,jn=35842,Yn=35843,lt=36196,mt=37492,Lt=37496,$e=37808,Nt=37809,it=37810,un=37811,It=37812,Pt=37813,Sn=37814,Fn=37815,Gi=37816,In=37817,ii=37818,lr=37819,cr=37820,Qi=37821,is=36492,Qa=3e3,Mo=3001,Ol=3201,Cl=0,_c=1,nu="srgb",we="srgb-linear",E=7680,ua="300 es",Qs=1035;class Ra{addEventListener(o,c){void 0===this._listeners&&(this._listeners={});const h=this._listeners;void 0===h[o]&&(h[o]=[]),-1===h[o].indexOf(c)&&h[o].push(c)}hasEventListener(o,c){if(void 0===this._listeners)return!1;const h=this._listeners;return void 0!==h[o]&&-1!==h[o].indexOf(c)}removeEventListener(o,c){if(void 0===this._listeners)return;const f=this._listeners[o];if(void 0!==f){const b=f.indexOf(c);-1!==b&&f.splice(b,1)}}dispatchEvent(o){if(void 0===this._listeners)return;const h=this._listeners[o.type];if(void 0!==h){o.target=this;const f=h.slice(0);for(let b=0,S=f.length;b<S;b++)f[b].call(this,o);o.target=null}}}const ha=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let eA=1234567;const qd=Math.PI/180,tA=180/Math.PI;function Yu(){const v=4294967295*Math.random()|0,o=4294967295*Math.random()|0,c=4294967295*Math.random()|0,h=4294967295*Math.random()|0;return(ha[255&v]+ha[v>>8&255]+ha[v>>16&255]+ha[v>>24&255]+"-"+ha[255&o]+ha[o>>8&255]+"-"+ha[o>>16&15|64]+ha[o>>24&255]+"-"+ha[63&c|128]+ha[c>>8&255]+"-"+ha[c>>16&255]+ha[c>>24&255]+ha[255&h]+ha[h>>8&255]+ha[h>>16&255]+ha[h>>24&255]).toLowerCase()}function Vl(v,o,c){return Math.max(o,Math.min(c,v))}function fp(v,o){return(v%o+o)%o}function oi(v,o,c){return(1-c)*v+c*o}function Zu(v){return 0==(v&v-1)&&0!==v}function wa(v){return Math.pow(2,Math.floor(Math.log(v)/Math.LN2))}function uu(v,o){switch(o.constructor){case Float32Array:return v;case Uint16Array:return v/65535;case Uint8Array:return v/255;case Int16Array:return Math.max(v/32767,-1);case Int8Array:return Math.max(v/127,-1);default:throw new Error("Invalid component type.")}}function Da(v,o){switch(o.constructor){case Float32Array:return v;case Uint16Array:return Math.round(65535*v);case Uint8Array:return Math.round(255*v);case Int16Array:return Math.round(32767*v);case Int8Array:return Math.round(127*v);default:throw new Error("Invalid component type.")}}var cl=Object.freeze({__proto__:null,DEG2RAD:qd,RAD2DEG:tA,generateUUID:Yu,clamp:Vl,euclideanModulo:fp,mapLinear:function nA(v,o,c,h,f){return h+(v-o)*(f-h)/(c-o)},inverseLerp:function Py(v,o,c){return v!==o?(c-v)/(o-v):0},lerp:oi,damp:function Q_(v,o,c,h){return oi(v,o,1-Math.exp(-c*h))},pingpong:function Do(v,o=1){return o-Math.abs(fp(v,2*o)-o)},smoothstep:function pp(v,o,c){return v<=o?0:v>=c?1:(v=(v-o)/(c-o))*v*(3-2*v)},smootherstep:function m0(v,o,c){return v<=o?0:v>=c?1:(v=(v-o)/(c-o))*v*v*(v*(6*v-15)+10)},randInt:function jA(v,o){return v+Math.floor(Math.random()*(o-v+1))},randFloat:function Fy(v,o){return v+Math.random()*(o-v)},randFloatSpread:function Ry(v){return v*(.5-Math.random())},seededRandom:function ky(v){void 0!==v&&(eA=v);let o=eA+=1831565813;return o=Math.imul(o^o>>>15,1|o),o^=o+Math.imul(o^o>>>7,61|o),((o^o>>>14)>>>0)/4294967296},degToRad:function Qd(v){return v*qd},radToDeg:function bd(v){return v*tA},isPowerOfTwo:Zu,ceilPowerOfTwo:function yh(v){return Math.pow(2,Math.ceil(Math.log(v)/Math.LN2))},floorPowerOfTwo:wa,setQuaternionFromProperEuler:function $A(v,o,c,h,f){const b=Math.cos,S=Math.sin,B=b(c/2),ne=S(c/2),ae=b((o+h)/2),ge=S((o+h)/2),Te=b((o-h)/2),Se=S((o-h)/2),Pe=b((h-o)/2),qe=S((h-o)/2);switch(f){case"XYX":v.set(B*ge,ne*Te,ne*Se,B*ae);break;case"YZY":v.set(ne*Se,B*ge,ne*Te,B*ae);break;case"ZXZ":v.set(ne*Te,ne*Se,B*ge,B*ae);break;case"XZX":v.set(B*ge,ne*qe,ne*Pe,B*ae);break;case"YXY":v.set(ne*Pe,B*ge,ne*qe,B*ae);break;case"ZYZ":v.set(ne*qe,ne*Pe,B*ge,B*ae);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+f)}},normalize:Da,denormalize:uu});class Di{constructor(o=0,c=0){Di.prototype.isVector2=!0,this.x=o,this.y=c}get width(){return this.x}set width(o){this.x=o}get height(){return this.y}set height(o){this.y=o}set(o,c){return this.x=o,this.y=c,this}setScalar(o){return this.x=o,this.y=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setComponent(o,c){switch(o){case 0:this.x=c;break;case 1:this.y=c;break;default:throw new Error("index is out of range: "+o)}return this}getComponent(o){switch(o){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+o)}}clone(){return new this.constructor(this.x,this.y)}copy(o){return this.x=o.x,this.y=o.y,this}add(o){return this.x+=o.x,this.y+=o.y,this}addScalar(o){return this.x+=o,this.y+=o,this}addVectors(o,c){return this.x=o.x+c.x,this.y=o.y+c.y,this}addScaledVector(o,c){return this.x+=o.x*c,this.y+=o.y*c,this}sub(o){return this.x-=o.x,this.y-=o.y,this}subScalar(o){return this.x-=o,this.y-=o,this}subVectors(o,c){return this.x=o.x-c.x,this.y=o.y-c.y,this}multiply(o){return this.x*=o.x,this.y*=o.y,this}multiplyScalar(o){return this.x*=o,this.y*=o,this}divide(o){return this.x/=o.x,this.y/=o.y,this}divideScalar(o){return this.multiplyScalar(1/o)}applyMatrix3(o){const c=this.x,h=this.y,f=o.elements;return this.x=f[0]*c+f[3]*h+f[6],this.y=f[1]*c+f[4]*h+f[7],this}min(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this}max(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this}clamp(o,c){return this.x=Math.max(o.x,Math.min(c.x,this.x)),this.y=Math.max(o.y,Math.min(c.y,this.y)),this}clampScalar(o,c){return this.x=Math.max(o,Math.min(c,this.x)),this.y=Math.max(o,Math.min(c,this.y)),this}clampLength(o,c){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(o,Math.min(c,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(o){return this.x*o.x+this.y*o.y}cross(o){return this.x*o.y-this.y*o.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(o){return Math.sqrt(this.distanceToSquared(o))}distanceToSquared(o){const c=this.x-o.x,h=this.y-o.y;return c*c+h*h}manhattanDistanceTo(o){return Math.abs(this.x-o.x)+Math.abs(this.y-o.y)}setLength(o){return this.normalize().multiplyScalar(o)}lerp(o,c){return this.x+=(o.x-this.x)*c,this.y+=(o.y-this.y)*c,this}lerpVectors(o,c,h){return this.x=o.x+(c.x-o.x)*h,this.y=o.y+(c.y-o.y)*h,this}equals(o){return o.x===this.x&&o.y===this.y}fromArray(o,c=0){return this.x=o[c],this.y=o[c+1],this}toArray(o=[],c=0){return o[c]=this.x,o[c+1]=this.y,o}fromBufferAttribute(o,c){return this.x=o.getX(c),this.y=o.getY(c),this}rotateAround(o,c){const h=Math.cos(c),f=Math.sin(c),b=this.x-o.x,S=this.y-o.y;return this.x=b*h-S*f+o.x,this.y=b*f+S*h+o.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Zl{constructor(){Zl.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(o,c,h,f,b,S,B,ne,ae){const ge=this.elements;return ge[0]=o,ge[1]=f,ge[2]=B,ge[3]=c,ge[4]=b,ge[5]=ne,ge[6]=h,ge[7]=S,ge[8]=ae,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(o){const c=this.elements,h=o.elements;return c[0]=h[0],c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=h[6],c[7]=h[7],c[8]=h[8],this}extractBasis(o,c,h){return o.setFromMatrix3Column(this,0),c.setFromMatrix3Column(this,1),h.setFromMatrix3Column(this,2),this}setFromMatrix4(o){const c=o.elements;return this.set(c[0],c[4],c[8],c[1],c[5],c[9],c[2],c[6],c[10]),this}multiply(o){return this.multiplyMatrices(this,o)}premultiply(o){return this.multiplyMatrices(o,this)}multiplyMatrices(o,c){const h=o.elements,f=c.elements,b=this.elements,S=h[0],B=h[3],ne=h[6],ae=h[1],ge=h[4],Te=h[7],Se=h[2],Pe=h[5],qe=h[8],Ne=f[0],Fe=f[3],at=f[6],_t=f[1],ut=f[4],ht=f[7],Rt=f[2],Xt=f[5],xn=f[8];return b[0]=S*Ne+B*_t+ne*Rt,b[3]=S*Fe+B*ut+ne*Xt,b[6]=S*at+B*ht+ne*xn,b[1]=ae*Ne+ge*_t+Te*Rt,b[4]=ae*Fe+ge*ut+Te*Xt,b[7]=ae*at+ge*ht+Te*xn,b[2]=Se*Ne+Pe*_t+qe*Rt,b[5]=Se*Fe+Pe*ut+qe*Xt,b[8]=Se*at+Pe*ht+qe*xn,this}multiplyScalar(o){const c=this.elements;return c[0]*=o,c[3]*=o,c[6]*=o,c[1]*=o,c[4]*=o,c[7]*=o,c[2]*=o,c[5]*=o,c[8]*=o,this}determinant(){const o=this.elements,c=o[0],h=o[1],f=o[2],b=o[3],S=o[4],B=o[5],ne=o[6],ae=o[7],ge=o[8];return c*S*ge-c*B*ae-h*b*ge+h*B*ne+f*b*ae-f*S*ne}invert(){const o=this.elements,c=o[0],h=o[1],f=o[2],b=o[3],S=o[4],B=o[5],ne=o[6],ae=o[7],ge=o[8],Te=ge*S-B*ae,Se=B*ne-ge*b,Pe=ae*b-S*ne,qe=c*Te+h*Se+f*Pe;if(0===qe)return this.set(0,0,0,0,0,0,0,0,0);const Ne=1/qe;return o[0]=Te*Ne,o[1]=(f*ae-ge*h)*Ne,o[2]=(B*h-f*S)*Ne,o[3]=Se*Ne,o[4]=(ge*c-f*ne)*Ne,o[5]=(f*b-B*c)*Ne,o[6]=Pe*Ne,o[7]=(h*ne-ae*c)*Ne,o[8]=(S*c-h*b)*Ne,this}transpose(){let o;const c=this.elements;return o=c[1],c[1]=c[3],c[3]=o,o=c[2],c[2]=c[6],c[6]=o,o=c[5],c[5]=c[7],c[7]=o,this}getNormalMatrix(o){return this.setFromMatrix4(o).invert().transpose()}transposeIntoArray(o){const c=this.elements;return o[0]=c[0],o[1]=c[3],o[2]=c[6],o[3]=c[1],o[4]=c[4],o[5]=c[7],o[6]=c[2],o[7]=c[5],o[8]=c[8],this}setUvTransform(o,c,h,f,b,S,B){const ne=Math.cos(b),ae=Math.sin(b);return this.set(h*ne,h*ae,-h*(ne*S+ae*B)+S+o,-f*ae,f*ne,-f*(-ae*S+ne*B)+B+c,0,0,1),this}scale(o,c){const h=this.elements;return h[0]*=o,h[3]*=o,h[6]*=o,h[1]*=c,h[4]*=c,h[7]*=c,this}rotate(o){const c=Math.cos(o),h=Math.sin(o),f=this.elements,b=f[0],S=f[3],B=f[6],ne=f[1],ae=f[4],ge=f[7];return f[0]=c*b+h*ne,f[3]=c*S+h*ae,f[6]=c*B+h*ge,f[1]=-h*b+c*ne,f[4]=-h*S+c*ae,f[7]=-h*B+c*ge,this}translate(o,c){const h=this.elements;return h[0]+=o*h[2],h[3]+=o*h[5],h[6]+=o*h[8],h[1]+=c*h[2],h[4]+=c*h[5],h[7]+=c*h[8],this}equals(o){const c=this.elements,h=o.elements;for(let f=0;f<9;f++)if(c[f]!==h[f])return!1;return!0}fromArray(o,c=0){for(let h=0;h<9;h++)this.elements[h]=o[h+c];return this}toArray(o=[],c=0){const h=this.elements;return o[c]=h[0],o[c+1]=h[1],o[c+2]=h[2],o[c+3]=h[3],o[c+4]=h[4],o[c+5]=h[5],o[c+6]=h[6],o[c+7]=h[7],o[c+8]=h[8],o}clone(){return(new this.constructor).fromArray(this.elements)}}function g0(v){for(let o=v.length-1;o>=0;--o)if(v[o]>=65535)return!0;return!1}function XA(v){return document.createElementNS("http://www.w3.org/1999/xhtml",v)}function Iu(v){return v<.04045?.0773993808*v:Math.pow(.9478672986*v+.0521327014,2.4)}function Xs(v){return v<.0031308?12.92*v:1.055*Math.pow(v,.41666)-.055}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const Wm={[nu]:{[we]:Iu},[we]:{[nu]:Xs}},ul={legacyMode:!0,get workingColorSpace(){return we},set workingColorSpace(v){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(v,o,c){if(this.legacyMode||o===c||!o||!c)return v;if(Wm[o]&&void 0!==Wm[o][c]){const h=Wm[o][c];return v.r=h(v.r),v.g=h(v.g),v.b=h(v.b),v}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(v,o){return this.convert(v,this.workingColorSpace,o)},toWorkingColorSpace:function(v,o){return this.convert(v,o,this.workingColorSpace)}},gr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ia={r:0,g:0,b:0},Go={h:0,s:0,l:0},qo={h:0,s:0,l:0};function yc(v,o,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?v+6*(o-v)*c:c<.5?o:c<2/3?v+6*(o-v)*(2/3-c):v}function Ll(v,o){return o.r=v.r,o.g=v.g,o.b=v.b,o}let Lf,wr=(()=>{class v{constructor(c,h,f){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===h&&void 0===f?this.set(c):this.setRGB(c,h,f)}set(c){return c&&c.isColor?this.copy(c):"number"==typeof c?this.setHex(c):"string"==typeof c&&this.setStyle(c),this}setScalar(c){return this.r=c,this.g=c,this.b=c,this}setHex(c,h=nu){return c=Math.floor(c),this.r=(c>>16&255)/255,this.g=(c>>8&255)/255,this.b=(255&c)/255,ul.toWorkingColorSpace(this,h),this}setRGB(c,h,f,b=we){return this.r=c,this.g=h,this.b=f,ul.toWorkingColorSpace(this,b),this}setHSL(c,h,f,b=we){if(c=fp(c,1),h=Vl(h,0,1),f=Vl(f,0,1),0===h)this.r=this.g=this.b=f;else{const S=f<=.5?f*(1+h):f+h-f*h,B=2*f-S;this.r=yc(B,S,c+1/3),this.g=yc(B,S,c),this.b=yc(B,S,c-1/3)}return ul.toWorkingColorSpace(this,b),this}setStyle(c,h=nu){function f(S){void 0!==S&&parseFloat(S)<1&&console.warn("THREE.Color: Alpha component of "+c+" will be ignored.")}let b;if(b=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(c)){let S;const ne=b[2];switch(b[1]){case"rgb":case"rgba":if(S=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ne))return this.r=Math.min(255,parseInt(S[1],10))/255,this.g=Math.min(255,parseInt(S[2],10))/255,this.b=Math.min(255,parseInt(S[3],10))/255,ul.toWorkingColorSpace(this,h),f(S[4]),this;if(S=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ne))return this.r=Math.min(100,parseInt(S[1],10))/100,this.g=Math.min(100,parseInt(S[2],10))/100,this.b=Math.min(100,parseInt(S[3],10))/100,ul.toWorkingColorSpace(this,h),f(S[4]),this;break;case"hsl":case"hsla":if(S=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(ne)){const ae=parseFloat(S[1])/360,ge=parseFloat(S[2])/100,Te=parseFloat(S[3])/100;return f(S[4]),this.setHSL(ae,ge,Te,h)}}}else if(b=/^\#([A-Fa-f\d]+)$/.exec(c)){const S=b[1],B=S.length;if(3===B)return this.r=parseInt(S.charAt(0)+S.charAt(0),16)/255,this.g=parseInt(S.charAt(1)+S.charAt(1),16)/255,this.b=parseInt(S.charAt(2)+S.charAt(2),16)/255,ul.toWorkingColorSpace(this,h),this;if(6===B)return this.r=parseInt(S.charAt(0)+S.charAt(1),16)/255,this.g=parseInt(S.charAt(2)+S.charAt(3),16)/255,this.b=parseInt(S.charAt(4)+S.charAt(5),16)/255,ul.toWorkingColorSpace(this,h),this}return c&&c.length>0?this.setColorName(c,h):this}setColorName(c,h=nu){const f=gr[c.toLowerCase()];return void 0!==f?this.setHex(f,h):console.warn("THREE.Color: Unknown color "+c),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(c){return this.r=c.r,this.g=c.g,this.b=c.b,this}copySRGBToLinear(c){return this.r=Iu(c.r),this.g=Iu(c.g),this.b=Iu(c.b),this}copyLinearToSRGB(c){return this.r=Xs(c.r),this.g=Xs(c.g),this.b=Xs(c.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(c=nu){return ul.fromWorkingColorSpace(Ll(this,ia),c),Vl(255*ia.r,0,255)<<16^Vl(255*ia.g,0,255)<<8^Vl(255*ia.b,0,255)<<0}getHexString(c=nu){return("000000"+this.getHex(c).toString(16)).slice(-6)}getHSL(c,h=we){ul.fromWorkingColorSpace(Ll(this,ia),h);const f=ia.r,b=ia.g,S=ia.b,B=Math.max(f,b,S),ne=Math.min(f,b,S);let ae,ge;const Te=(ne+B)/2;if(ne===B)ae=0,ge=0;else{const Se=B-ne;switch(ge=Te<=.5?Se/(B+ne):Se/(2-B-ne),B){case f:ae=(b-S)/Se+(b<S?6:0);break;case b:ae=(S-f)/Se+2;break;case S:ae=(f-b)/Se+4}ae/=6}return c.h=ae,c.s=ge,c.l=Te,c}getRGB(c,h=we){return ul.fromWorkingColorSpace(Ll(this,ia),h),c.r=ia.r,c.g=ia.g,c.b=ia.b,c}getStyle(c=nu){return ul.fromWorkingColorSpace(Ll(this,ia),c),c!==nu?`color(${c} ${ia.r} ${ia.g} ${ia.b})`:`rgb(${255*ia.r|0},${255*ia.g|0},${255*ia.b|0})`}offsetHSL(c,h,f){return this.getHSL(Go),Go.h+=c,Go.s+=h,Go.l+=f,this.setHSL(Go.h,Go.s,Go.l),this}add(c){return this.r+=c.r,this.g+=c.g,this.b+=c.b,this}addColors(c,h){return this.r=c.r+h.r,this.g=c.g+h.g,this.b=c.b+h.b,this}addScalar(c){return this.r+=c,this.g+=c,this.b+=c,this}sub(c){return this.r=Math.max(0,this.r-c.r),this.g=Math.max(0,this.g-c.g),this.b=Math.max(0,this.b-c.b),this}multiply(c){return this.r*=c.r,this.g*=c.g,this.b*=c.b,this}multiplyScalar(c){return this.r*=c,this.g*=c,this.b*=c,this}lerp(c,h){return this.r+=(c.r-this.r)*h,this.g+=(c.g-this.g)*h,this.b+=(c.b-this.b)*h,this}lerpColors(c,h,f){return this.r=c.r+(h.r-c.r)*f,this.g=c.g+(h.g-c.g)*f,this.b=c.b+(h.b-c.b)*f,this}lerpHSL(c,h){this.getHSL(Go),c.getHSL(qo);const f=oi(Go.h,qo.h,h),b=oi(Go.s,qo.s,h),S=oi(Go.l,qo.l,h);return this.setHSL(f,b,S),this}equals(c){return c.r===this.r&&c.g===this.g&&c.b===this.b}fromArray(c,h=0){return this.r=c[h],this.g=c[h+1],this.b=c[h+2],this}toArray(c=[],h=0){return c[h]=this.r,c[h+1]=this.g,c[h+2]=this.b,c}fromBufferAttribute(c,h){return this.r=c.getX(h),this.g=c.getY(h),this.b=c.getZ(h),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}return v.NAMES=gr,v})();class qh{static getDataURL(o){if(/^data:/i.test(o.src)||typeof HTMLCanvasElement>"u")return o.src;let c;if(o instanceof HTMLCanvasElement)c=o;else{void 0===Lf&&(Lf=XA("canvas")),Lf.width=o.width,Lf.height=o.height;const h=Lf.getContext("2d");o instanceof ImageData?h.putImageData(o,0,0):h.drawImage(o,0,0,o.width,o.height),c=Lf}return c.width>2048||c.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",o),c.toDataURL("image/jpeg",.6)):c.toDataURL("image/png")}static sRGBToLinear(o){if(typeof HTMLImageElement<"u"&&o instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&o instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&o instanceof ImageBitmap){const c=XA("canvas");c.width=o.width,c.height=o.height;const h=c.getContext("2d");h.drawImage(o,0,0,o.width,o.height);const f=h.getImageData(0,0,o.width,o.height),b=f.data;for(let S=0;S<b.length;S++)b[S]=255*Iu(b[S]/255);return h.putImageData(f,0,0),c}if(o.data){const c=o.data.slice(0);for(let h=0;h<c.length;h++)c[h]=c instanceof Uint8Array||c instanceof Uint8ClampedArray?Math.floor(255*Iu(c[h]/255)):Iu(c[h]);return{data:c,width:o.width,height:o.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),o}}class Wd{constructor(o=null){this.isSource=!0,this.uuid=Yu(),this.data=o,this.version=0}set needsUpdate(o){!0===o&&this.version++}toJSON(o){const c=void 0===o||"string"==typeof o;if(!c&&void 0!==o.images[this.uuid])return o.images[this.uuid];const h={uuid:this.uuid,url:""},f=this.data;if(null!==f){let b;if(Array.isArray(f)){b=[];for(let S=0,B=f.length;S<B;S++)b.push(vh(f[S].isDataTexture?f[S].image:f[S]))}else b=vh(f);h.url=b}return c||(o.images[this.uuid]=h),h}}function vh(v){return typeof HTMLImageElement<"u"&&v instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&v instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&v instanceof ImageBitmap?qh.getDataURL(v):v.data?{data:Array.from(v.data),width:v.width,height:v.height,type:v.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ts=0,Ws=(()=>{class v extends Ra{constructor(c=v.DEFAULT_IMAGE,h=v.DEFAULT_MAPPING,f=vn,b=vn,S=ci,B=br,ne=xr,ae=Ar,ge=1,Te=Qa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ts++}),this.uuid=Yu(),this.name="",this.source=new Wd(c),this.mipmaps=[],this.mapping=h,this.wrapS=f,this.wrapT=b,this.magFilter=S,this.minFilter=B,this.anisotropy=ge,this.format=ne,this.internalFormat=null,this.type=ae,this.offset=new Di(0,0),this.repeat=new Di(1,1),this.center=new Di(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Zl,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=Te,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(c){this.source.data=c}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(c){return this.name=c.name,this.source=c.source,this.mipmaps=c.mipmaps.slice(0),this.mapping=c.mapping,this.wrapS=c.wrapS,this.wrapT=c.wrapT,this.magFilter=c.magFilter,this.minFilter=c.minFilter,this.anisotropy=c.anisotropy,this.format=c.format,this.internalFormat=c.internalFormat,this.type=c.type,this.offset.copy(c.offset),this.repeat.copy(c.repeat),this.center.copy(c.center),this.rotation=c.rotation,this.matrixAutoUpdate=c.matrixAutoUpdate,this.matrix.copy(c.matrix),this.generateMipmaps=c.generateMipmaps,this.premultiplyAlpha=c.premultiplyAlpha,this.flipY=c.flipY,this.unpackAlignment=c.unpackAlignment,this.encoding=c.encoding,this.userData=JSON.parse(JSON.stringify(c.userData)),this.needsUpdate=!0,this}toJSON(c){const h=void 0===c||"string"==typeof c;if(!h&&void 0!==c.textures[this.uuid])return c.textures[this.uuid];const f={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(c).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(f.userData=this.userData),h||(c.textures[this.uuid]=f),f}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(c){if(300!==this.mapping)return c;if(c.applyMatrix3(this.matrix),c.x<0||c.x>1)switch(this.wrapS){case $n:c.x=c.x-Math.floor(c.x);break;case vn:c.x=c.x<0?0:1;break;case rn:c.x=1===Math.abs(Math.floor(c.x)%2)?Math.ceil(c.x)-c.x:c.x-Math.floor(c.x)}if(c.y<0||c.y>1)switch(this.wrapT){case $n:c.y=c.y-Math.floor(c.y);break;case vn:c.y=c.y<0?0:1;break;case rn:c.y=1===Math.abs(Math.floor(c.y)%2)?Math.ceil(c.y)-c.y:c.y-Math.floor(c.y)}return this.flipY&&(c.y=1-c.y),c}set needsUpdate(c){!0===c&&(this.version++,this.source.needsUpdate=!0)}}return v.DEFAULT_IMAGE=null,v.DEFAULT_MAPPING=300,v})();class js{constructor(o=0,c=0,h=0,f=1){js.prototype.isVector4=!0,this.x=o,this.y=c,this.z=h,this.w=f}get width(){return this.z}set width(o){this.z=o}get height(){return this.w}set height(o){this.w=o}set(o,c,h,f){return this.x=o,this.y=c,this.z=h,this.w=f,this}setScalar(o){return this.x=o,this.y=o,this.z=o,this.w=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setZ(o){return this.z=o,this}setW(o){return this.w=o,this}setComponent(o,c){switch(o){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;case 3:this.w=c;break;default:throw new Error("index is out of range: "+o)}return this}getComponent(o){switch(o){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+o)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(o){return this.x=o.x,this.y=o.y,this.z=o.z,this.w=void 0!==o.w?o.w:1,this}add(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z,this.w+=o.w,this}addScalar(o){return this.x+=o,this.y+=o,this.z+=o,this.w+=o,this}addVectors(o,c){return this.x=o.x+c.x,this.y=o.y+c.y,this.z=o.z+c.z,this.w=o.w+c.w,this}addScaledVector(o,c){return this.x+=o.x*c,this.y+=o.y*c,this.z+=o.z*c,this.w+=o.w*c,this}sub(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z,this.w-=o.w,this}subScalar(o){return this.x-=o,this.y-=o,this.z-=o,this.w-=o,this}subVectors(o,c){return this.x=o.x-c.x,this.y=o.y-c.y,this.z=o.z-c.z,this.w=o.w-c.w,this}multiply(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z,this.w*=o.w,this}multiplyScalar(o){return this.x*=o,this.y*=o,this.z*=o,this.w*=o,this}applyMatrix4(o){const c=this.x,h=this.y,f=this.z,b=this.w,S=o.elements;return this.x=S[0]*c+S[4]*h+S[8]*f+S[12]*b,this.y=S[1]*c+S[5]*h+S[9]*f+S[13]*b,this.z=S[2]*c+S[6]*h+S[10]*f+S[14]*b,this.w=S[3]*c+S[7]*h+S[11]*f+S[15]*b,this}divideScalar(o){return this.multiplyScalar(1/o)}setAxisAngleFromQuaternion(o){this.w=2*Math.acos(o.w);const c=Math.sqrt(1-o.w*o.w);return c<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=o.x/c,this.y=o.y/c,this.z=o.z/c),this}setAxisAngleFromRotationMatrix(o){let c,h,f,b;const ne=o.elements,ae=ne[0],ge=ne[4],Te=ne[8],Se=ne[1],Pe=ne[5],qe=ne[9],Ne=ne[2],Fe=ne[6],at=ne[10];if(Math.abs(ge-Se)<.01&&Math.abs(Te-Ne)<.01&&Math.abs(qe-Fe)<.01){if(Math.abs(ge+Se)<.1&&Math.abs(Te+Ne)<.1&&Math.abs(qe+Fe)<.1&&Math.abs(ae+Pe+at-3)<.1)return this.set(1,0,0,0),this;c=Math.PI;const ut=(ae+1)/2,ht=(Pe+1)/2,Rt=(at+1)/2,Xt=(ge+Se)/4,xn=(Te+Ne)/4,bt=(qe+Fe)/4;return ut>ht&&ut>Rt?ut<.01?(h=0,f=.707106781,b=.707106781):(h=Math.sqrt(ut),f=Xt/h,b=xn/h):ht>Rt?ht<.01?(h=.707106781,f=0,b=.707106781):(f=Math.sqrt(ht),h=Xt/f,b=bt/f):Rt<.01?(h=.707106781,f=.707106781,b=0):(b=Math.sqrt(Rt),h=xn/b,f=bt/b),this.set(h,f,b,c),this}let _t=Math.sqrt((Fe-qe)*(Fe-qe)+(Te-Ne)*(Te-Ne)+(Se-ge)*(Se-ge));return Math.abs(_t)<.001&&(_t=1),this.x=(Fe-qe)/_t,this.y=(Te-Ne)/_t,this.z=(Se-ge)/_t,this.w=Math.acos((ae+Pe+at-1)/2),this}min(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this.z=Math.min(this.z,o.z),this.w=Math.min(this.w,o.w),this}max(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this.z=Math.max(this.z,o.z),this.w=Math.max(this.w,o.w),this}clamp(o,c){return this.x=Math.max(o.x,Math.min(c.x,this.x)),this.y=Math.max(o.y,Math.min(c.y,this.y)),this.z=Math.max(o.z,Math.min(c.z,this.z)),this.w=Math.max(o.w,Math.min(c.w,this.w)),this}clampScalar(o,c){return this.x=Math.max(o,Math.min(c,this.x)),this.y=Math.max(o,Math.min(c,this.y)),this.z=Math.max(o,Math.min(c,this.z)),this.w=Math.max(o,Math.min(c,this.w)),this}clampLength(o,c){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(o,Math.min(c,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(o){return this.x*o.x+this.y*o.y+this.z*o.z+this.w*o.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(o){return this.normalize().multiplyScalar(o)}lerp(o,c){return this.x+=(o.x-this.x)*c,this.y+=(o.y-this.y)*c,this.z+=(o.z-this.z)*c,this.w+=(o.w-this.w)*c,this}lerpVectors(o,c,h){return this.x=o.x+(c.x-o.x)*h,this.y=o.y+(c.y-o.y)*h,this.z=o.z+(c.z-o.z)*h,this.w=o.w+(c.w-o.w)*h,this}equals(o){return o.x===this.x&&o.y===this.y&&o.z===this.z&&o.w===this.w}fromArray(o,c=0){return this.x=o[c],this.y=o[c+1],this.z=o[c+2],this.w=o[c+3],this}toArray(o=[],c=0){return o[c]=this.x,o[c+1]=this.y,o[c+2]=this.z,o[c+3]=this.w,o}fromBufferAttribute(o,c){return this.x=o.getX(c),this.y=o.getY(c),this.z=o.getZ(c),this.w=o.getW(c),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Lo extends Ra{constructor(o=1,c=1,h={}){super(),this.isWebGLRenderTarget=!0,this.width=o,this.height=c,this.depth=1,this.scissor=new js(0,0,o,c),this.scissorTest=!1,this.viewport=new js(0,0,o,c),this.texture=new Ws({width:o,height:c,depth:1},h.mapping,h.wrapS,h.wrapT,h.magFilter,h.minFilter,h.format,h.type,h.anisotropy,h.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==h.generateMipmaps&&h.generateMipmaps,this.texture.internalFormat=void 0!==h.internalFormat?h.internalFormat:null,this.texture.minFilter=void 0!==h.minFilter?h.minFilter:ci,this.depthBuffer=void 0===h.depthBuffer||h.depthBuffer,this.stencilBuffer=void 0!==h.stencilBuffer&&h.stencilBuffer,this.depthTexture=void 0!==h.depthTexture?h.depthTexture:null,this.samples=void 0!==h.samples?h.samples:0}setSize(o,c,h=1){(this.width!==o||this.height!==c||this.depth!==h)&&(this.width=o,this.height=c,this.depth=h,this.texture.image.width=o,this.texture.image.height=c,this.texture.image.depth=h,this.dispose()),this.viewport.set(0,0,o,c),this.scissor.set(0,0,o,c)}clone(){return(new this.constructor).copy(this)}copy(o){this.width=o.width,this.height=o.height,this.depth=o.depth,this.viewport.copy(o.viewport),this.texture=o.texture.clone(),this.texture.isRenderTargetTexture=!0;const c=Object.assign({},o.texture.image);return this.texture.source=new Wd(c),this.depthBuffer=o.depthBuffer,this.stencilBuffer=o.stencilBuffer,null!==o.depthTexture&&(this.depthTexture=o.depthTexture.clone()),this.samples=o.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ha{constructor(o=0,c=0,h=0,f=1){this.isQuaternion=!0,this._x=o,this._y=c,this._z=h,this._w=f}static slerpFlat(o,c,h,f,b,S,B){let ne=h[f+0],ae=h[f+1],ge=h[f+2],Te=h[f+3];const Se=b[S+0],Pe=b[S+1],qe=b[S+2],Ne=b[S+3];if(0===B)return o[c+0]=ne,o[c+1]=ae,o[c+2]=ge,void(o[c+3]=Te);if(1===B)return o[c+0]=Se,o[c+1]=Pe,o[c+2]=qe,void(o[c+3]=Ne);if(Te!==Ne||ne!==Se||ae!==Pe||ge!==qe){let Fe=1-B;const at=ne*Se+ae*Pe+ge*qe+Te*Ne,_t=at>=0?1:-1,ut=1-at*at;if(ut>Number.EPSILON){const Rt=Math.sqrt(ut),Xt=Math.atan2(Rt,at*_t);Fe=Math.sin(Fe*Xt)/Rt,B=Math.sin(B*Xt)/Rt}const ht=B*_t;if(ne=ne*Fe+Se*ht,ae=ae*Fe+Pe*ht,ge=ge*Fe+qe*ht,Te=Te*Fe+Ne*ht,Fe===1-B){const Rt=1/Math.sqrt(ne*ne+ae*ae+ge*ge+Te*Te);ne*=Rt,ae*=Rt,ge*=Rt,Te*=Rt}}o[c]=ne,o[c+1]=ae,o[c+2]=ge,o[c+3]=Te}static multiplyQuaternionsFlat(o,c,h,f,b,S){const B=h[f],ne=h[f+1],ae=h[f+2],ge=h[f+3],Te=b[S],Se=b[S+1],Pe=b[S+2],qe=b[S+3];return o[c]=B*qe+ge*Te+ne*Pe-ae*Se,o[c+1]=ne*qe+ge*Se+ae*Te-B*Pe,o[c+2]=ae*qe+ge*Pe+B*Se-ne*Te,o[c+3]=ge*qe-B*Te-ne*Se-ae*Pe,o}get x(){return this._x}set x(o){this._x=o,this._onChangeCallback()}get y(){return this._y}set y(o){this._y=o,this._onChangeCallback()}get z(){return this._z}set z(o){this._z=o,this._onChangeCallback()}get w(){return this._w}set w(o){this._w=o,this._onChangeCallback()}set(o,c,h,f){return this._x=o,this._y=c,this._z=h,this._w=f,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(o){return this._x=o.x,this._y=o.y,this._z=o.z,this._w=o.w,this._onChangeCallback(),this}setFromEuler(o,c){const h=o._x,f=o._y,b=o._z,S=o._order,B=Math.cos,ne=Math.sin,ae=B(h/2),ge=B(f/2),Te=B(b/2),Se=ne(h/2),Pe=ne(f/2),qe=ne(b/2);switch(S){case"XYZ":this._x=Se*ge*Te+ae*Pe*qe,this._y=ae*Pe*Te-Se*ge*qe,this._z=ae*ge*qe+Se*Pe*Te,this._w=ae*ge*Te-Se*Pe*qe;break;case"YXZ":this._x=Se*ge*Te+ae*Pe*qe,this._y=ae*Pe*Te-Se*ge*qe,this._z=ae*ge*qe-Se*Pe*Te,this._w=ae*ge*Te+Se*Pe*qe;break;case"ZXY":this._x=Se*ge*Te-ae*Pe*qe,this._y=ae*Pe*Te+Se*ge*qe,this._z=ae*ge*qe+Se*Pe*Te,this._w=ae*ge*Te-Se*Pe*qe;break;case"ZYX":this._x=Se*ge*Te-ae*Pe*qe,this._y=ae*Pe*Te+Se*ge*qe,this._z=ae*ge*qe-Se*Pe*Te,this._w=ae*ge*Te+Se*Pe*qe;break;case"YZX":this._x=Se*ge*Te+ae*Pe*qe,this._y=ae*Pe*Te+Se*ge*qe,this._z=ae*ge*qe-Se*Pe*Te,this._w=ae*ge*Te-Se*Pe*qe;break;case"XZY":this._x=Se*ge*Te-ae*Pe*qe,this._y=ae*Pe*Te-Se*ge*qe,this._z=ae*ge*qe+Se*Pe*Te,this._w=ae*ge*Te+Se*Pe*qe;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+S)}return!1!==c&&this._onChangeCallback(),this}setFromAxisAngle(o,c){const h=c/2,f=Math.sin(h);return this._x=o.x*f,this._y=o.y*f,this._z=o.z*f,this._w=Math.cos(h),this._onChangeCallback(),this}setFromRotationMatrix(o){const c=o.elements,h=c[0],f=c[4],b=c[8],S=c[1],B=c[5],ne=c[9],ae=c[2],ge=c[6],Te=c[10],Se=h+B+Te;if(Se>0){const Pe=.5/Math.sqrt(Se+1);this._w=.25/Pe,this._x=(ge-ne)*Pe,this._y=(b-ae)*Pe,this._z=(S-f)*Pe}else if(h>B&&h>Te){const Pe=2*Math.sqrt(1+h-B-Te);this._w=(ge-ne)/Pe,this._x=.25*Pe,this._y=(f+S)/Pe,this._z=(b+ae)/Pe}else if(B>Te){const Pe=2*Math.sqrt(1+B-h-Te);this._w=(b-ae)/Pe,this._x=(f+S)/Pe,this._y=.25*Pe,this._z=(ne+ge)/Pe}else{const Pe=2*Math.sqrt(1+Te-h-B);this._w=(S-f)/Pe,this._x=(b+ae)/Pe,this._y=(ne+ge)/Pe,this._z=.25*Pe}return this._onChangeCallback(),this}setFromUnitVectors(o,c){let h=o.dot(c)+1;return h<Number.EPSILON?(h=0,Math.abs(o.x)>Math.abs(o.z)?(this._x=-o.y,this._y=o.x,this._z=0,this._w=h):(this._x=0,this._y=-o.z,this._z=o.y,this._w=h)):(this._x=o.y*c.z-o.z*c.y,this._y=o.z*c.x-o.x*c.z,this._z=o.x*c.y-o.y*c.x,this._w=h),this.normalize()}angleTo(o){return 2*Math.acos(Math.abs(Vl(this.dot(o),-1,1)))}rotateTowards(o,c){const h=this.angleTo(o);if(0===h)return this;const f=Math.min(1,c/h);return this.slerp(o,f),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(o){return this._x*o._x+this._y*o._y+this._z*o._z+this._w*o._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let o=this.length();return 0===o?(this._x=0,this._y=0,this._z=0,this._w=1):(o=1/o,this._x=this._x*o,this._y=this._y*o,this._z=this._z*o,this._w=this._w*o),this._onChangeCallback(),this}multiply(o){return this.multiplyQuaternions(this,o)}premultiply(o){return this.multiplyQuaternions(o,this)}multiplyQuaternions(o,c){const h=o._x,f=o._y,b=o._z,S=o._w,B=c._x,ne=c._y,ae=c._z,ge=c._w;return this._x=h*ge+S*B+f*ae-b*ne,this._y=f*ge+S*ne+b*B-h*ae,this._z=b*ge+S*ae+h*ne-f*B,this._w=S*ge-h*B-f*ne-b*ae,this._onChangeCallback(),this}slerp(o,c){if(0===c)return this;if(1===c)return this.copy(o);const h=this._x,f=this._y,b=this._z,S=this._w;let B=S*o._w+h*o._x+f*o._y+b*o._z;if(B<0?(this._w=-o._w,this._x=-o._x,this._y=-o._y,this._z=-o._z,B=-B):this.copy(o),B>=1)return this._w=S,this._x=h,this._y=f,this._z=b,this;const ne=1-B*B;if(ne<=Number.EPSILON){const Pe=1-c;return this._w=Pe*S+c*this._w,this._x=Pe*h+c*this._x,this._y=Pe*f+c*this._y,this._z=Pe*b+c*this._z,this.normalize(),this._onChangeCallback(),this}const ae=Math.sqrt(ne),ge=Math.atan2(ae,B),Te=Math.sin((1-c)*ge)/ae,Se=Math.sin(c*ge)/ae;return this._w=S*Te+this._w*Se,this._x=h*Te+this._x*Se,this._y=f*Te+this._y*Se,this._z=b*Te+this._z*Se,this._onChangeCallback(),this}slerpQuaternions(o,c,h){return this.copy(o).slerp(c,h)}random(){const o=Math.random(),c=Math.sqrt(1-o),h=Math.sqrt(o),f=2*Math.PI*Math.random(),b=2*Math.PI*Math.random();return this.set(c*Math.cos(f),h*Math.sin(b),h*Math.cos(b),c*Math.sin(f))}equals(o){return o._x===this._x&&o._y===this._y&&o._z===this._z&&o._w===this._w}fromArray(o,c=0){return this._x=o[c],this._y=o[c+1],this._z=o[c+2],this._w=o[c+3],this._onChangeCallback(),this}toArray(o=[],c=0){return o[c]=this._x,o[c+1]=this._y,o[c+2]=this._z,o[c+3]=this._w,o}fromBufferAttribute(o,c){return this._x=o.getX(c),this._y=o.getY(c),this._z=o.getZ(c),this._w=o.getW(c),this}_onChange(o){return this._onChangeCallback=o,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ut{constructor(o=0,c=0,h=0){Ut.prototype.isVector3=!0,this.x=o,this.y=c,this.z=h}set(o,c,h){return void 0===h&&(h=this.z),this.x=o,this.y=c,this.z=h,this}setScalar(o){return this.x=o,this.y=o,this.z=o,this}setX(o){return this.x=o,this}setY(o){return this.y=o,this}setZ(o){return this.z=o,this}setComponent(o,c){switch(o){case 0:this.x=c;break;case 1:this.y=c;break;case 2:this.z=c;break;default:throw new Error("index is out of range: "+o)}return this}getComponent(o){switch(o){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+o)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(o){return this.x=o.x,this.y=o.y,this.z=o.z,this}add(o){return this.x+=o.x,this.y+=o.y,this.z+=o.z,this}addScalar(o){return this.x+=o,this.y+=o,this.z+=o,this}addVectors(o,c){return this.x=o.x+c.x,this.y=o.y+c.y,this.z=o.z+c.z,this}addScaledVector(o,c){return this.x+=o.x*c,this.y+=o.y*c,this.z+=o.z*c,this}sub(o){return this.x-=o.x,this.y-=o.y,this.z-=o.z,this}subScalar(o){return this.x-=o,this.y-=o,this.z-=o,this}subVectors(o,c){return this.x=o.x-c.x,this.y=o.y-c.y,this.z=o.z-c.z,this}multiply(o){return this.x*=o.x,this.y*=o.y,this.z*=o.z,this}multiplyScalar(o){return this.x*=o,this.y*=o,this.z*=o,this}multiplyVectors(o,c){return this.x=o.x*c.x,this.y=o.y*c.y,this.z=o.z*c.z,this}applyEuler(o){return this.applyQuaternion(Al.setFromEuler(o))}applyAxisAngle(o,c){return this.applyQuaternion(Al.setFromAxisAngle(o,c))}applyMatrix3(o){const c=this.x,h=this.y,f=this.z,b=o.elements;return this.x=b[0]*c+b[3]*h+b[6]*f,this.y=b[1]*c+b[4]*h+b[7]*f,this.z=b[2]*c+b[5]*h+b[8]*f,this}applyNormalMatrix(o){return this.applyMatrix3(o).normalize()}applyMatrix4(o){const c=this.x,h=this.y,f=this.z,b=o.elements,S=1/(b[3]*c+b[7]*h+b[11]*f+b[15]);return this.x=(b[0]*c+b[4]*h+b[8]*f+b[12])*S,this.y=(b[1]*c+b[5]*h+b[9]*f+b[13])*S,this.z=(b[2]*c+b[6]*h+b[10]*f+b[14])*S,this}applyQuaternion(o){const c=this.x,h=this.y,f=this.z,b=o.x,S=o.y,B=o.z,ne=o.w,ae=ne*c+S*f-B*h,ge=ne*h+B*c-b*f,Te=ne*f+b*h-S*c,Se=-b*c-S*h-B*f;return this.x=ae*ne+Se*-b+ge*-B-Te*-S,this.y=ge*ne+Se*-S+Te*-b-ae*-B,this.z=Te*ne+Se*-B+ae*-S-ge*-b,this}project(o){return this.applyMatrix4(o.matrixWorldInverse).applyMatrix4(o.projectionMatrix)}unproject(o){return this.applyMatrix4(o.projectionMatrixInverse).applyMatrix4(o.matrixWorld)}transformDirection(o){const c=this.x,h=this.y,f=this.z,b=o.elements;return this.x=b[0]*c+b[4]*h+b[8]*f,this.y=b[1]*c+b[5]*h+b[9]*f,this.z=b[2]*c+b[6]*h+b[10]*f,this.normalize()}divide(o){return this.x/=o.x,this.y/=o.y,this.z/=o.z,this}divideScalar(o){return this.multiplyScalar(1/o)}min(o){return this.x=Math.min(this.x,o.x),this.y=Math.min(this.y,o.y),this.z=Math.min(this.z,o.z),this}max(o){return this.x=Math.max(this.x,o.x),this.y=Math.max(this.y,o.y),this.z=Math.max(this.z,o.z),this}clamp(o,c){return this.x=Math.max(o.x,Math.min(c.x,this.x)),this.y=Math.max(o.y,Math.min(c.y,this.y)),this.z=Math.max(o.z,Math.min(c.z,this.z)),this}clampScalar(o,c){return this.x=Math.max(o,Math.min(c,this.x)),this.y=Math.max(o,Math.min(c,this.y)),this.z=Math.max(o,Math.min(c,this.z)),this}clampLength(o,c){const h=this.length();return this.divideScalar(h||1).multiplyScalar(Math.max(o,Math.min(c,h)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(o){return this.x*o.x+this.y*o.y+this.z*o.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(o){return this.normalize().multiplyScalar(o)}lerp(o,c){return this.x+=(o.x-this.x)*c,this.y+=(o.y-this.y)*c,this.z+=(o.z-this.z)*c,this}lerpVectors(o,c,h){return this.x=o.x+(c.x-o.x)*h,this.y=o.y+(c.y-o.y)*h,this.z=o.z+(c.z-o.z)*h,this}cross(o){return this.crossVectors(this,o)}crossVectors(o,c){const h=o.x,f=o.y,b=o.z,S=c.x,B=c.y,ne=c.z;return this.x=f*ne-b*B,this.y=b*S-h*ne,this.z=h*B-f*S,this}projectOnVector(o){const c=o.lengthSq();if(0===c)return this.set(0,0,0);const h=o.dot(this)/c;return this.copy(o).multiplyScalar(h)}projectOnPlane(o){return jd.copy(this).projectOnVector(o),this.sub(jd)}reflect(o){return this.sub(jd.copy(o).multiplyScalar(2*this.dot(o)))}angleTo(o){const c=Math.sqrt(this.lengthSq()*o.lengthSq());if(0===c)return Math.PI/2;const h=this.dot(o)/c;return Math.acos(Vl(h,-1,1))}distanceTo(o){return Math.sqrt(this.distanceToSquared(o))}distanceToSquared(o){const c=this.x-o.x,h=this.y-o.y,f=this.z-o.z;return c*c+h*h+f*f}manhattanDistanceTo(o){return Math.abs(this.x-o.x)+Math.abs(this.y-o.y)+Math.abs(this.z-o.z)}setFromSpherical(o){return this.setFromSphericalCoords(o.radius,o.phi,o.theta)}setFromSphericalCoords(o,c,h){const f=Math.sin(c)*o;return this.x=f*Math.sin(h),this.y=Math.cos(c)*o,this.z=f*Math.cos(h),this}setFromCylindrical(o){return this.setFromCylindricalCoords(o.radius,o.theta,o.y)}setFromCylindricalCoords(o,c,h){return this.x=o*Math.sin(c),this.y=h,this.z=o*Math.cos(c),this}setFromMatrixPosition(o){const c=o.elements;return this.x=c[12],this.y=c[13],this.z=c[14],this}setFromMatrixScale(o){const c=this.setFromMatrixColumn(o,0).length(),h=this.setFromMatrixColumn(o,1).length(),f=this.setFromMatrixColumn(o,2).length();return this.x=c,this.y=h,this.z=f,this}setFromMatrixColumn(o,c){return this.fromArray(o.elements,4*c)}setFromMatrix3Column(o,c){return this.fromArray(o.elements,3*c)}setFromEuler(o){return this.x=o._x,this.y=o._y,this.z=o._z,this}equals(o){return o.x===this.x&&o.y===this.y&&o.z===this.z}fromArray(o,c=0){return this.x=o[c],this.y=o[c+1],this.z=o[c+2],this}toArray(o=[],c=0){return o[c]=this.x,o[c+1]=this.y,o[c+2]=this.z,o}fromBufferAttribute(o,c){return this.x=o.getX(c),this.y=o.getY(c),this.z=o.getZ(c),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const o=2*(Math.random()-.5),c=Math.random()*Math.PI*2,h=Math.sqrt(1-o**2);return this.x=h*Math.cos(c),this.y=h*Math.sin(c),this.z=o,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const jd=new Ut,Al=new Ha;class du{constructor(o=new Ut(1/0,1/0,1/0),c=new Ut(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=o,this.max=c}set(o,c){return this.min.copy(o),this.max.copy(c),this}setFromArray(o){let c=1/0,h=1/0,f=1/0,b=-1/0,S=-1/0,B=-1/0;for(let ne=0,ae=o.length;ne<ae;ne+=3){const ge=o[ne],Te=o[ne+1],Se=o[ne+2];ge<c&&(c=ge),Te<h&&(h=Te),Se<f&&(f=Se),ge>b&&(b=ge),Te>S&&(S=Te),Se>B&&(B=Se)}return this.min.set(c,h,f),this.max.set(b,S,B),this}setFromBufferAttribute(o){let c=1/0,h=1/0,f=1/0,b=-1/0,S=-1/0,B=-1/0;for(let ne=0,ae=o.count;ne<ae;ne++){const ge=o.getX(ne),Te=o.getY(ne),Se=o.getZ(ne);ge<c&&(c=ge),Te<h&&(h=Te),Se<f&&(f=Se),ge>b&&(b=ge),Te>S&&(S=Te),Se>B&&(B=Se)}return this.min.set(c,h,f),this.max.set(b,S,B),this}setFromPoints(o){this.makeEmpty();for(let c=0,h=o.length;c<h;c++)this.expandByPoint(o[c]);return this}setFromCenterAndSize(o,c){const h=vo.copy(c).multiplyScalar(.5);return this.min.copy(o).sub(h),this.max.copy(o).add(h),this}setFromObject(o,c=!1){return this.makeEmpty(),this.expandByObject(o,c)}clone(){return(new this.constructor).copy(this)}copy(o){return this.min.copy(o.min),this.max.copy(o.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(o){return this.isEmpty()?o.set(0,0,0):o.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(o){return this.isEmpty()?o.set(0,0,0):o.subVectors(this.max,this.min)}expandByPoint(o){return this.min.min(o),this.max.max(o),this}expandByVector(o){return this.min.sub(o),this.max.add(o),this}expandByScalar(o){return this.min.addScalar(-o),this.max.addScalar(o),this}expandByObject(o,c=!1){o.updateWorldMatrix(!1,!1);const h=o.geometry;if(void 0!==h)if(c&&null!=h.attributes&&void 0!==h.attributes.position){const b=h.attributes.position;for(let S=0,B=b.count;S<B;S++)vo.fromBufferAttribute(b,S).applyMatrix4(o.matrixWorld),this.expandByPoint(vo)}else null===h.boundingBox&&h.computeBoundingBox(),Ju.copy(h.boundingBox),Ju.applyMatrix4(o.matrixWorld),this.union(Ju);const f=o.children;for(let b=0,S=f.length;b<S;b++)this.expandByObject(f[b],c);return this}containsPoint(o){return!(o.x<this.min.x||o.x>this.max.x||o.y<this.min.y||o.y>this.max.y||o.z<this.min.z||o.z>this.max.z)}containsBox(o){return this.min.x<=o.min.x&&o.max.x<=this.max.x&&this.min.y<=o.min.y&&o.max.y<=this.max.y&&this.min.z<=o.min.z&&o.max.z<=this.max.z}getParameter(o,c){return c.set((o.x-this.min.x)/(this.max.x-this.min.x),(o.y-this.min.y)/(this.max.y-this.min.y),(o.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(o){return!(o.max.x<this.min.x||o.min.x>this.max.x||o.max.y<this.min.y||o.min.y>this.max.y||o.max.z<this.min.z||o.min.z>this.max.z)}intersectsSphere(o){return this.clampPoint(o.center,vo),vo.distanceToSquared(o.center)<=o.radius*o.radius}intersectsPlane(o){let c,h;return o.normal.x>0?(c=o.normal.x*this.min.x,h=o.normal.x*this.max.x):(c=o.normal.x*this.max.x,h=o.normal.x*this.min.x),o.normal.y>0?(c+=o.normal.y*this.min.y,h+=o.normal.y*this.max.y):(c+=o.normal.y*this.max.y,h+=o.normal.y*this.min.y),o.normal.z>0?(c+=o.normal.z*this.min.z,h+=o.normal.z*this.max.z):(c+=o.normal.z*this.max.z,h+=o.normal.z*this.min.z),c<=-o.constant&&h>=-o.constant}intersectsTriangle(o){if(this.isEmpty())return!1;this.getCenter(Ul),iu.subVectors(this.max,Ul),eh.subVectors(o.a,Ul),$d.subVectors(o.b,Ul),Pu.subVectors(o.c,Ul),Nl.subVectors($d,eh),bh.subVectors(Pu,$d),xh.subVectors(eh,Pu);let c=[0,-Nl.z,Nl.y,0,-bh.z,bh.y,0,-xh.z,xh.y,Nl.z,0,-Nl.x,bh.z,0,-bh.x,xh.z,0,-xh.x,-Nl.y,Nl.x,0,-bh.y,bh.x,0,-xh.y,xh.x,0];return!(!YA(c,eh,$d,Pu,iu)||(c=[1,0,0,0,1,0,0,0,1],!YA(c,eh,$d,Pu,iu)))&&(KA.crossVectors(Nl,bh),c=[KA.x,KA.y,KA.z],YA(c,eh,$d,Pu,iu))}clampPoint(o,c){return c.copy(o).clamp(this.min,this.max)}distanceToPoint(o){return vo.copy(o).clamp(this.min,this.max).sub(o).length()}getBoundingSphere(o){return this.getCenter(o.center),o.radius=.5*this.getSize(vo).length(),o}intersect(o){return this.min.max(o.min),this.max.min(o.max),this.isEmpty()&&this.makeEmpty(),this}union(o){return this.min.min(o.min),this.max.max(o.max),this}applyMatrix4(o){return this.isEmpty()||(zc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(o),zc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(o),zc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(o),zc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(o),zc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(o),zc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(o),zc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(o),zc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(o),this.setFromPoints(zc)),this}translate(o){return this.min.add(o),this.max.add(o),this}equals(o){return o.min.equals(this.min)&&o.max.equals(this.max)}}const zc=[new Ut,new Ut,new Ut,new Ut,new Ut,new Ut,new Ut,new Ut],vo=new Ut,Ju=new du,eh=new Ut,$d=new Ut,Pu=new Ut,Nl=new Ut,bh=new Ut,xh=new Ut,Ul=new Ut,iu=new Ut,KA=new Ut,ka=new Ut;function YA(v,o,c,h,f){for(let b=0,S=v.length-3;b<=S;b+=3){ka.fromArray(v,b);const B=f.x*Math.abs(ka.x)+f.y*Math.abs(ka.y)+f.z*Math.abs(ka.z),ne=o.dot(ka),ae=c.dot(ka),ge=h.dot(ka);if(Math.max(-Math.max(ne,ae,ge),Math.min(ne,ae,ge))>B)return!1}return!0}const jm=new du,Ap=new Ut,iA=new Ut;class xd{constructor(o=new Ut,c=-1){this.center=o,this.radius=c}set(o,c){return this.center.copy(o),this.radius=c,this}setFromPoints(o,c){const h=this.center;void 0!==c?h.copy(c):jm.setFromPoints(o).getCenter(h);let f=0;for(let b=0,S=o.length;b<S;b++)f=Math.max(f,h.distanceToSquared(o[b]));return this.radius=Math.sqrt(f),this}copy(o){return this.center.copy(o.center),this.radius=o.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(o){return o.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(o){return o.distanceTo(this.center)-this.radius}intersectsSphere(o){const c=this.radius+o.radius;return o.center.distanceToSquared(this.center)<=c*c}intersectsBox(o){return o.intersectsSphere(this)}intersectsPlane(o){return Math.abs(o.distanceToPoint(this.center))<=this.radius}clampPoint(o,c){const h=this.center.distanceToSquared(o);return c.copy(o),h>this.radius*this.radius&&(c.sub(this.center).normalize(),c.multiplyScalar(this.radius).add(this.center)),c}getBoundingBox(o){return this.isEmpty()?(o.makeEmpty(),o):(o.set(this.center,this.center),o.expandByScalar(this.radius),o)}applyMatrix4(o){return this.center.applyMatrix4(o),this.radius=this.radius*o.getMaxScaleOnAxis(),this}translate(o){return this.center.add(o),this}expandByPoint(o){if(this.isEmpty())return this.center.copy(o),this.radius=0,this;Ap.subVectors(o,this.center);const c=Ap.lengthSq();if(c>this.radius*this.radius){const h=Math.sqrt(c),f=.5*(h-this.radius);this.center.addScaledVector(Ap,f/h),this.radius+=f}return this}union(o){return o.isEmpty()?this:this.isEmpty()?(this.copy(o),this):(!0===this.center.equals(o.center)?this.radius=Math.max(this.radius,o.radius):(iA.subVectors(o.center,this.center).setLength(o.radius),this.expandByPoint(Ap.copy(o.center).add(iA)),this.expandByPoint(Ap.copy(o.center).sub(iA))),this)}equals(o){return o.center.equals(this.center)&&o.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const th=new Ut,Hc=new Ut,W_=new Zl;class Jl{constructor(o=new Ut(1,0,0),c=0){this.isPlane=!0,this.normal=o,this.constant=c}set(o,c){return this.normal.copy(o),this.constant=c,this}setComponents(o,c,h,f){return this.normal.set(o,c,h),this.constant=f,this}setFromNormalAndCoplanarPoint(o,c){return this.normal.copy(o),this.constant=-c.dot(this.normal),this}setFromCoplanarPoints(o,c,h){const f=th.subVectors(h,c).cross(Hc.subVectors(o,c)).normalize();return this.setFromNormalAndCoplanarPoint(f,o),this}copy(o){return this.normal.copy(o.normal),this.constant=o.constant,this}normalize(){const o=1/this.normal.length();return this.normal.multiplyScalar(o),this.constant*=o,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(o){return this.normal.dot(o)+this.constant}distanceToSphere(o){return this.distanceToPoint(o.center)-o.radius}projectPoint(o,c){return c.copy(this.normal).multiplyScalar(-this.distanceToPoint(o)).add(o)}intersectLine(o,c){const h=o.delta(th),f=this.normal.dot(h);if(0===f)return 0===this.distanceToPoint(o.start)?c.copy(o.start):null;const b=-(o.start.dot(this.normal)+this.constant)/f;return b<0||b>1?null:c.copy(h).multiplyScalar(b).add(o.start)}intersectsLine(o){const c=this.distanceToPoint(o.start),h=this.distanceToPoint(o.end);return c<0&&h>0||h<0&&c>0}intersectsBox(o){return o.intersectsPlane(this)}intersectsSphere(o){return o.intersectsPlane(this)}coplanarPoint(o){return o.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(o,c){const h=c||W_.getNormalMatrix(o),f=this.coplanarPoint(th).applyMatrix4(o),b=this.normal.applyMatrix3(h).normalize();return this.constant=-f.dot(b),this}translate(o){return this.constant-=o.dot(this.normal),this}equals(o){return o.normal.equals(this.normal)&&o.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Vc=new xd,rA=new Ut;class wh{constructor(o=new Jl,c=new Jl,h=new Jl,f=new Jl,b=new Jl,S=new Jl){this.planes=[o,c,h,f,b,S]}set(o,c,h,f,b,S){const B=this.planes;return B[0].copy(o),B[1].copy(c),B[2].copy(h),B[3].copy(f),B[4].copy(b),B[5].copy(S),this}copy(o){const c=this.planes;for(let h=0;h<6;h++)c[h].copy(o.planes[h]);return this}setFromProjectionMatrix(o){const c=this.planes,h=o.elements,f=h[0],b=h[1],S=h[2],B=h[3],ne=h[4],ae=h[5],ge=h[6],Te=h[7],Se=h[8],Pe=h[9],qe=h[10],Ne=h[11],Fe=h[12],at=h[13],_t=h[14],ut=h[15];return c[0].setComponents(B-f,Te-ne,Ne-Se,ut-Fe).normalize(),c[1].setComponents(B+f,Te+ne,Ne+Se,ut+Fe).normalize(),c[2].setComponents(B+b,Te+ae,Ne+Pe,ut+at).normalize(),c[3].setComponents(B-b,Te-ae,Ne-Pe,ut-at).normalize(),c[4].setComponents(B-S,Te-ge,Ne-qe,ut-_t).normalize(),c[5].setComponents(B+S,Te+ge,Ne+qe,ut+_t).normalize(),this}intersectsObject(o){const c=o.geometry;return null===c.boundingSphere&&c.computeBoundingSphere(),Vc.copy(c.boundingSphere).applyMatrix4(o.matrixWorld),this.intersectsSphere(Vc)}intersectsSprite(o){return Vc.center.set(0,0,0),Vc.radius=.7071067811865476,Vc.applyMatrix4(o.matrixWorld),this.intersectsSphere(Vc)}intersectsSphere(o){const c=this.planes,h=o.center,f=-o.radius;for(let b=0;b<6;b++)if(c[b].distanceToPoint(h)<f)return!1;return!0}intersectsBox(o){const c=this.planes;for(let h=0;h<6;h++){const f=c[h];if(rA.x=f.normal.x>0?o.max.x:o.min.x,rA.y=f.normal.y>0?o.max.y:o.min.y,rA.z=f.normal.z>0?o.max.z:o.min.z,f.distanceToPoint(rA)<0)return!1}return!0}containsPoint(o){const c=this.planes;for(let h=0;h<6;h++)if(c[h].distanceToPoint(o)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class so{constructor(){so.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(o,c,h,f,b,S,B,ne,ae,ge,Te,Se,Pe,qe,Ne,Fe){const at=this.elements;return at[0]=o,at[4]=c,at[8]=h,at[12]=f,at[1]=b,at[5]=S,at[9]=B,at[13]=ne,at[2]=ae,at[6]=ge,at[10]=Te,at[14]=Se,at[3]=Pe,at[7]=qe,at[11]=Ne,at[15]=Fe,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new so).fromArray(this.elements)}copy(o){const c=this.elements,h=o.elements;return c[0]=h[0],c[1]=h[1],c[2]=h[2],c[3]=h[3],c[4]=h[4],c[5]=h[5],c[6]=h[6],c[7]=h[7],c[8]=h[8],c[9]=h[9],c[10]=h[10],c[11]=h[11],c[12]=h[12],c[13]=h[13],c[14]=h[14],c[15]=h[15],this}copyPosition(o){const c=this.elements,h=o.elements;return c[12]=h[12],c[13]=h[13],c[14]=h[14],this}setFromMatrix3(o){const c=o.elements;return this.set(c[0],c[3],c[6],0,c[1],c[4],c[7],0,c[2],c[5],c[8],0,0,0,0,1),this}extractBasis(o,c,h){return o.setFromMatrixColumn(this,0),c.setFromMatrixColumn(this,1),h.setFromMatrixColumn(this,2),this}makeBasis(o,c,h){return this.set(o.x,c.x,h.x,0,o.y,c.y,h.y,0,o.z,c.z,h.z,0,0,0,0,1),this}extractRotation(o){const c=this.elements,h=o.elements,f=1/Dc.setFromMatrixColumn(o,0).length(),b=1/Dc.setFromMatrixColumn(o,1).length(),S=1/Dc.setFromMatrixColumn(o,2).length();return c[0]=h[0]*f,c[1]=h[1]*f,c[2]=h[2]*f,c[3]=0,c[4]=h[4]*b,c[5]=h[5]*b,c[6]=h[6]*b,c[7]=0,c[8]=h[8]*S,c[9]=h[9]*S,c[10]=h[10]*S,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this}makeRotationFromEuler(o){const c=this.elements,h=o.x,f=o.y,b=o.z,S=Math.cos(h),B=Math.sin(h),ne=Math.cos(f),ae=Math.sin(f),ge=Math.cos(b),Te=Math.sin(b);if("XYZ"===o.order){const Se=S*ge,Pe=S*Te,qe=B*ge,Ne=B*Te;c[0]=ne*ge,c[4]=-ne*Te,c[8]=ae,c[1]=Pe+qe*ae,c[5]=Se-Ne*ae,c[9]=-B*ne,c[2]=Ne-Se*ae,c[6]=qe+Pe*ae,c[10]=S*ne}else if("YXZ"===o.order){const Se=ne*ge,Pe=ne*Te,qe=ae*ge,Ne=ae*Te;c[0]=Se+Ne*B,c[4]=qe*B-Pe,c[8]=S*ae,c[1]=S*Te,c[5]=S*ge,c[9]=-B,c[2]=Pe*B-qe,c[6]=Ne+Se*B,c[10]=S*ne}else if("ZXY"===o.order){const Se=ne*ge,Pe=ne*Te,qe=ae*ge,Ne=ae*Te;c[0]=Se-Ne*B,c[4]=-S*Te,c[8]=qe+Pe*B,c[1]=Pe+qe*B,c[5]=S*ge,c[9]=Ne-Se*B,c[2]=-S*ae,c[6]=B,c[10]=S*ne}else if("ZYX"===o.order){const Se=S*ge,Pe=S*Te,qe=B*ge,Ne=B*Te;c[0]=ne*ge,c[4]=qe*ae-Pe,c[8]=Se*ae+Ne,c[1]=ne*Te,c[5]=Ne*ae+Se,c[9]=Pe*ae-qe,c[2]=-ae,c[6]=B*ne,c[10]=S*ne}else if("YZX"===o.order){const Se=S*ne,Pe=S*ae,qe=B*ne,Ne=B*ae;c[0]=ne*ge,c[4]=Ne-Se*Te,c[8]=qe*Te+Pe,c[1]=Te,c[5]=S*ge,c[9]=-B*ge,c[2]=-ae*ge,c[6]=Pe*Te+qe,c[10]=Se-Ne*Te}else if("XZY"===o.order){const Se=S*ne,Pe=S*ae,qe=B*ne,Ne=B*ae;c[0]=ne*ge,c[4]=-Te,c[8]=ae*ge,c[1]=Se*Te+Ne,c[5]=S*ge,c[9]=Pe*Te-qe,c[2]=qe*Te-Pe,c[6]=B*ge,c[10]=Ne*Te+Se}return c[3]=0,c[7]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,this}makeRotationFromQuaternion(o){return this.compose(j_,o,$m)}lookAt(o,c,h){const f=this.elements;return nh.subVectors(o,c),0===nh.lengthSq()&&(nh.z=1),nh.normalize(),Xd.crossVectors(h,nh),0===Xd.lengthSq()&&(1===Math.abs(h.z)?nh.x+=1e-4:nh.z+=1e-4,nh.normalize(),Xd.crossVectors(h,nh)),Xd.normalize(),ZA.crossVectors(nh,Xd),f[0]=Xd.x,f[4]=ZA.x,f[8]=nh.x,f[1]=Xd.y,f[5]=ZA.y,f[9]=nh.y,f[2]=Xd.z,f[6]=ZA.z,f[10]=nh.z,this}multiply(o){return this.multiplyMatrices(this,o)}premultiply(o){return this.multiplyMatrices(o,this)}multiplyMatrices(o,c){const h=o.elements,f=c.elements,b=this.elements,S=h[0],B=h[4],ne=h[8],ae=h[12],ge=h[1],Te=h[5],Se=h[9],Pe=h[13],qe=h[2],Ne=h[6],Fe=h[10],at=h[14],_t=h[3],ut=h[7],ht=h[11],Rt=h[15],Xt=f[0],xn=f[4],bt=f[8],en=f[12],bn=f[1],ui=f[5],Pi=f[9],hi=f[13],Vn=f[2],Mi=f[6],Oi=f[10],Xi=f[14],Ai=f[3],Hn=f[7],Zn=f[11],_r=f[15];return b[0]=S*Xt+B*bn+ne*Vn+ae*Ai,b[4]=S*xn+B*ui+ne*Mi+ae*Hn,b[8]=S*bt+B*Pi+ne*Oi+ae*Zn,b[12]=S*en+B*hi+ne*Xi+ae*_r,b[1]=ge*Xt+Te*bn+Se*Vn+Pe*Ai,b[5]=ge*xn+Te*ui+Se*Mi+Pe*Hn,b[9]=ge*bt+Te*Pi+Se*Oi+Pe*Zn,b[13]=ge*en+Te*hi+Se*Xi+Pe*_r,b[2]=qe*Xt+Ne*bn+Fe*Vn+at*Ai,b[6]=qe*xn+Ne*ui+Fe*Mi+at*Hn,b[10]=qe*bt+Ne*Pi+Fe*Oi+at*Zn,b[14]=qe*en+Ne*hi+Fe*Xi+at*_r,b[3]=_t*Xt+ut*bn+ht*Vn+Rt*Ai,b[7]=_t*xn+ut*ui+ht*Mi+Rt*Hn,b[11]=_t*bt+ut*Pi+ht*Oi+Rt*Zn,b[15]=_t*en+ut*hi+ht*Xi+Rt*_r,this}multiplyScalar(o){const c=this.elements;return c[0]*=o,c[4]*=o,c[8]*=o,c[12]*=o,c[1]*=o,c[5]*=o,c[9]*=o,c[13]*=o,c[2]*=o,c[6]*=o,c[10]*=o,c[14]*=o,c[3]*=o,c[7]*=o,c[11]*=o,c[15]*=o,this}determinant(){const o=this.elements,c=o[0],h=o[4],f=o[8],b=o[12],S=o[1],B=o[5],ne=o[9],ae=o[13],ge=o[2],Te=o[6],Se=o[10],Pe=o[14];return o[3]*(+b*ne*Te-f*ae*Te-b*B*Se+h*ae*Se+f*B*Pe-h*ne*Pe)+o[7]*(+c*ne*Pe-c*ae*Se+b*S*Se-f*S*Pe+f*ae*ge-b*ne*ge)+o[11]*(+c*ae*Te-c*B*Pe-b*S*Te+h*S*Pe+b*B*ge-h*ae*ge)+o[15]*(-f*B*ge-c*ne*Te+c*B*Se+f*S*Te-h*S*Se+h*ne*ge)}transpose(){const o=this.elements;let c;return c=o[1],o[1]=o[4],o[4]=c,c=o[2],o[2]=o[8],o[8]=c,c=o[6],o[6]=o[9],o[9]=c,c=o[3],o[3]=o[12],o[12]=c,c=o[7],o[7]=o[13],o[13]=c,c=o[11],o[11]=o[14],o[14]=c,this}setPosition(o,c,h){const f=this.elements;return o.isVector3?(f[12]=o.x,f[13]=o.y,f[14]=o.z):(f[12]=o,f[13]=c,f[14]=h),this}invert(){const o=this.elements,c=o[0],h=o[1],f=o[2],b=o[3],S=o[4],B=o[5],ne=o[6],ae=o[7],ge=o[8],Te=o[9],Se=o[10],Pe=o[11],qe=o[12],Ne=o[13],Fe=o[14],at=o[15],_t=Te*Fe*ae-Ne*Se*ae+Ne*ne*Pe-B*Fe*Pe-Te*ne*at+B*Se*at,ut=qe*Se*ae-ge*Fe*ae-qe*ne*Pe+S*Fe*Pe+ge*ne*at-S*Se*at,ht=ge*Ne*ae-qe*Te*ae+qe*B*Pe-S*Ne*Pe-ge*B*at+S*Te*at,Rt=qe*Te*ne-ge*Ne*ne-qe*B*Se+S*Ne*Se+ge*B*Fe-S*Te*Fe,Xt=c*_t+h*ut+f*ht+b*Rt;if(0===Xt)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const xn=1/Xt;return o[0]=_t*xn,o[1]=(Ne*Se*b-Te*Fe*b-Ne*f*Pe+h*Fe*Pe+Te*f*at-h*Se*at)*xn,o[2]=(B*Fe*b-Ne*ne*b+Ne*f*ae-h*Fe*ae-B*f*at+h*ne*at)*xn,o[3]=(Te*ne*b-B*Se*b-Te*f*ae+h*Se*ae+B*f*Pe-h*ne*Pe)*xn,o[4]=ut*xn,o[5]=(ge*Fe*b-qe*Se*b+qe*f*Pe-c*Fe*Pe-ge*f*at+c*Se*at)*xn,o[6]=(qe*ne*b-S*Fe*b-qe*f*ae+c*Fe*ae+S*f*at-c*ne*at)*xn,o[7]=(S*Se*b-ge*ne*b+ge*f*ae-c*Se*ae-S*f*Pe+c*ne*Pe)*xn,o[8]=ht*xn,o[9]=(qe*Te*b-ge*Ne*b-qe*h*Pe+c*Ne*Pe+ge*h*at-c*Te*at)*xn,o[10]=(S*Ne*b-qe*B*b+qe*h*ae-c*Ne*ae-S*h*at+c*B*at)*xn,o[11]=(ge*B*b-S*Te*b-ge*h*ae+c*Te*ae+S*h*Pe-c*B*Pe)*xn,o[12]=Rt*xn,o[13]=(ge*Ne*f-qe*Te*f+qe*h*Se-c*Ne*Se-ge*h*Fe+c*Te*Fe)*xn,o[14]=(qe*B*f-S*Ne*f-qe*h*ne+c*Ne*ne+S*h*Fe-c*B*Fe)*xn,o[15]=(S*Te*f-ge*B*f+ge*h*ne-c*Te*ne-S*h*Se+c*B*Se)*xn,this}scale(o){const c=this.elements,h=o.x,f=o.y,b=o.z;return c[0]*=h,c[4]*=f,c[8]*=b,c[1]*=h,c[5]*=f,c[9]*=b,c[2]*=h,c[6]*=f,c[10]*=b,c[3]*=h,c[7]*=f,c[11]*=b,this}getMaxScaleOnAxis(){const o=this.elements;return Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1]+o[2]*o[2],o[4]*o[4]+o[5]*o[5]+o[6]*o[6],o[8]*o[8]+o[9]*o[9]+o[10]*o[10]))}makeTranslation(o,c,h){return this.set(1,0,0,o,0,1,0,c,0,0,1,h,0,0,0,1),this}makeRotationX(o){const c=Math.cos(o),h=Math.sin(o);return this.set(1,0,0,0,0,c,-h,0,0,h,c,0,0,0,0,1),this}makeRotationY(o){const c=Math.cos(o),h=Math.sin(o);return this.set(c,0,h,0,0,1,0,0,-h,0,c,0,0,0,0,1),this}makeRotationZ(o){const c=Math.cos(o),h=Math.sin(o);return this.set(c,-h,0,0,h,c,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(o,c){const h=Math.cos(c),f=Math.sin(c),b=1-h,S=o.x,B=o.y,ne=o.z,ae=b*S,ge=b*B;return this.set(ae*S+h,ae*B-f*ne,ae*ne+f*B,0,ae*B+f*ne,ge*B+h,ge*ne-f*S,0,ae*ne-f*B,ge*ne+f*S,b*ne*ne+h,0,0,0,0,1),this}makeScale(o,c,h){return this.set(o,0,0,0,0,c,0,0,0,0,h,0,0,0,0,1),this}makeShear(o,c,h,f,b,S){return this.set(1,h,b,0,o,1,S,0,c,f,1,0,0,0,0,1),this}compose(o,c,h){const f=this.elements,b=c._x,S=c._y,B=c._z,ne=c._w,ae=b+b,ge=S+S,Te=B+B,Se=b*ae,Pe=b*ge,qe=b*Te,Ne=S*ge,Fe=S*Te,at=B*Te,_t=ne*ae,ut=ne*ge,ht=ne*Te,Rt=h.x,Xt=h.y,xn=h.z;return f[0]=(1-(Ne+at))*Rt,f[1]=(Pe+ht)*Rt,f[2]=(qe-ut)*Rt,f[3]=0,f[4]=(Pe-ht)*Xt,f[5]=(1-(Se+at))*Xt,f[6]=(Fe+_t)*Xt,f[7]=0,f[8]=(qe+ut)*xn,f[9]=(Fe-_t)*xn,f[10]=(1-(Se+Ne))*xn,f[11]=0,f[12]=o.x,f[13]=o.y,f[14]=o.z,f[15]=1,this}decompose(o,c,h){const f=this.elements;let b=Dc.set(f[0],f[1],f[2]).length();const S=Dc.set(f[4],f[5],f[6]).length(),B=Dc.set(f[8],f[9],f[10]).length();this.determinant()<0&&(b=-b),o.x=f[12],o.y=f[13],o.z=f[14],fu.copy(this);const ae=1/b,ge=1/S,Te=1/B;return fu.elements[0]*=ae,fu.elements[1]*=ae,fu.elements[2]*=ae,fu.elements[4]*=ge,fu.elements[5]*=ge,fu.elements[6]*=ge,fu.elements[8]*=Te,fu.elements[9]*=Te,fu.elements[10]*=Te,c.setFromRotationMatrix(fu),h.x=b,h.y=S,h.z=B,this}makePerspective(o,c,h,f,b,S){const B=this.elements,ae=2*b/(h-f),ge=(c+o)/(c-o),Te=(h+f)/(h-f),Se=-(S+b)/(S-b),Pe=-2*S*b/(S-b);return B[0]=2*b/(c-o),B[4]=0,B[8]=ge,B[12]=0,B[1]=0,B[5]=ae,B[9]=Te,B[13]=0,B[2]=0,B[6]=0,B[10]=Se,B[14]=Pe,B[3]=0,B[7]=0,B[11]=-1,B[15]=0,this}makeOrthographic(o,c,h,f,b,S){const B=this.elements,ne=1/(c-o),ae=1/(h-f),ge=1/(S-b),Te=(c+o)*ne,Se=(h+f)*ae,Pe=(S+b)*ge;return B[0]=2*ne,B[4]=0,B[8]=0,B[12]=-Te,B[1]=0,B[5]=2*ae,B[9]=0,B[13]=-Se,B[2]=0,B[6]=0,B[10]=-2*ge,B[14]=-Pe,B[3]=0,B[7]=0,B[11]=0,B[15]=1,this}equals(o){const c=this.elements,h=o.elements;for(let f=0;f<16;f++)if(c[f]!==h[f])return!1;return!0}fromArray(o,c=0){for(let h=0;h<16;h++)this.elements[h]=o[h+c];return this}toArray(o=[],c=0){const h=this.elements;return o[c]=h[0],o[c+1]=h[1],o[c+2]=h[2],o[c+3]=h[3],o[c+4]=h[4],o[c+5]=h[5],o[c+6]=h[6],o[c+7]=h[7],o[c+8]=h[8],o[c+9]=h[9],o[c+10]=h[10],o[c+11]=h[11],o[c+12]=h[12],o[c+13]=h[13],o[c+14]=h[14],o[c+15]=h[15],o}}const Dc=new Ut,fu=new so,j_=new Ut(0,0,0),$m=new Ut(1,1,1),Xd=new Ut,ZA=new Ut,nh=new Ut;function $_(){let v=null,o=!1,c=null,h=null;function f(b,S){c(b,S),h=v.requestAnimationFrame(f)}return{start:function(){!0!==o&&null!==c&&(h=v.requestAnimationFrame(f),o=!0)},stop:function(){v.cancelAnimationFrame(h),o=!1},setAnimationLoop:function(b){c=b},setContext:function(b){v=b}}}function Oy(v,o){const c=o.isWebGL2,h=new WeakMap;return{get:function S(ae){return ae.isInterleavedBufferAttribute&&(ae=ae.data),h.get(ae)},remove:function B(ae){ae.isInterleavedBufferAttribute&&(ae=ae.data);const ge=h.get(ae);ge&&(v.deleteBuffer(ge.buffer),h.delete(ae))},update:function ne(ae,ge){if(ae.isGLBufferAttribute){const Se=h.get(ae);return void((!Se||Se.version<ae.version)&&h.set(ae,{buffer:ae.buffer,type:ae.type,bytesPerElement:ae.elementSize,version:ae.version}))}ae.isInterleavedBufferAttribute&&(ae=ae.data);const Te=h.get(ae);void 0===Te?h.set(ae,function f(ae,ge){const Te=ae.array,Se=ae.usage,Pe=v.createBuffer();let qe;if(v.bindBuffer(ge,Pe),v.bufferData(ge,Te,Se),ae.onUploadCallback(),Te instanceof Float32Array)qe=v.FLOAT;else if(Te instanceof Uint16Array)if(ae.isFloat16BufferAttribute){if(!c)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");qe=v.HALF_FLOAT}else qe=v.UNSIGNED_SHORT;else if(Te instanceof Int16Array)qe=v.SHORT;else if(Te instanceof Uint32Array)qe=v.UNSIGNED_INT;else if(Te instanceof Int32Array)qe=v.INT;else if(Te instanceof Int8Array)qe=v.BYTE;else if(Te instanceof Uint8Array)qe=v.UNSIGNED_BYTE;else{if(!(Te instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+Te);qe=v.UNSIGNED_BYTE}return{buffer:Pe,type:qe,bytesPerElement:Te.BYTES_PER_ELEMENT,version:ae.version}}(ae,ge)):Te.version<ae.version&&(function b(ae,ge,Te){const Se=ge.array,Pe=ge.updateRange;v.bindBuffer(Te,ae),-1===Pe.count?v.bufferSubData(Te,0,Se):(c?v.bufferSubData(Te,Pe.offset*Se.BYTES_PER_ELEMENT,Se,Pe.offset,Pe.count):v.bufferSubData(Te,Pe.offset*Se.BYTES_PER_ELEMENT,Se.subarray(Pe.offset,Pe.offset+Pe.count)),Pe.count=-1)}(Te.buffer,ae,ge),Te.version=ae.version)}}}const hl=new Ut,_0=new Di;class Bc{constructor(o,c,h){if(Array.isArray(o))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=o,this.itemSize=c,this.count=void 0!==o?o.length/c:0,this.normalized=!0===h,this.usage=35044,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(o){!0===o&&this.version++}setUsage(o){return this.usage=o,this}copy(o){return this.name=o.name,this.array=new o.array.constructor(o.array),this.itemSize=o.itemSize,this.count=o.count,this.normalized=o.normalized,this.usage=o.usage,this}copyAt(o,c,h){o*=this.itemSize,h*=c.itemSize;for(let f=0,b=this.itemSize;f<b;f++)this.array[o+f]=c.array[h+f];return this}copyArray(o){return this.array.set(o),this}applyMatrix3(o){if(2===this.itemSize)for(let c=0,h=this.count;c<h;c++)_0.fromBufferAttribute(this,c),_0.applyMatrix3(o),this.setXY(c,_0.x,_0.y);else if(3===this.itemSize)for(let c=0,h=this.count;c<h;c++)hl.fromBufferAttribute(this,c),hl.applyMatrix3(o),this.setXYZ(c,hl.x,hl.y,hl.z);return this}applyMatrix4(o){for(let c=0,h=this.count;c<h;c++)hl.fromBufferAttribute(this,c),hl.applyMatrix4(o),this.setXYZ(c,hl.x,hl.y,hl.z);return this}applyNormalMatrix(o){for(let c=0,h=this.count;c<h;c++)hl.fromBufferAttribute(this,c),hl.applyNormalMatrix(o),this.setXYZ(c,hl.x,hl.y,hl.z);return this}transformDirection(o){for(let c=0,h=this.count;c<h;c++)hl.fromBufferAttribute(this,c),hl.transformDirection(o),this.setXYZ(c,hl.x,hl.y,hl.z);return this}set(o,c=0){return this.array.set(o,c),this}getX(o){let c=this.array[o*this.itemSize];return this.normalized&&(c=uu(c,this.array)),c}setX(o,c){return this.normalized&&(c=Da(c,this.array)),this.array[o*this.itemSize]=c,this}getY(o){let c=this.array[o*this.itemSize+1];return this.normalized&&(c=uu(c,this.array)),c}setY(o,c){return this.normalized&&(c=Da(c,this.array)),this.array[o*this.itemSize+1]=c,this}getZ(o){let c=this.array[o*this.itemSize+2];return this.normalized&&(c=uu(c,this.array)),c}setZ(o,c){return this.normalized&&(c=Da(c,this.array)),this.array[o*this.itemSize+2]=c,this}getW(o){let c=this.array[o*this.itemSize+3];return this.normalized&&(c=uu(c,this.array)),c}setW(o,c){return this.normalized&&(c=Da(c,this.array)),this.array[o*this.itemSize+3]=c,this}setXY(o,c,h){return o*=this.itemSize,this.normalized&&(c=Da(c,this.array),h=Da(h,this.array)),this.array[o+0]=c,this.array[o+1]=h,this}setXYZ(o,c,h,f){return o*=this.itemSize,this.normalized&&(c=Da(c,this.array),h=Da(h,this.array),f=Da(f,this.array)),this.array[o+0]=c,this.array[o+1]=h,this.array[o+2]=f,this}setXYZW(o,c,h,f,b){return o*=this.itemSize,this.normalized&&(c=Da(c,this.array),h=Da(h,this.array),f=Da(f,this.array),b=Da(b,this.array)),this.array[o+0]=c,this.array[o+1]=h,this.array[o+2]=f,this.array[o+3]=b,this}onUpload(o){return this.onUploadCallback=o,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const o={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(o.name=this.name),35044!==this.usage&&(o.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(o.updateRange=this.updateRange),o}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class K_ extends Bc{constructor(o,c,h){super(new Uint16Array(o),c,h)}}class Xm extends Bc{constructor(o,c,h){super(new Uint32Array(o),c,h)}}class Ss extends Bc{constructor(o,c,h){super(new Float32Array(o),c,h)}}const Qh=new so,Y_=new Ha;let Ic=(()=>{class v{constructor(c=0,h=0,f=0,b=v.DefaultOrder){this.isEuler=!0,this._x=c,this._y=h,this._z=f,this._order=b}get x(){return this._x}set x(c){this._x=c,this._onChangeCallback()}get y(){return this._y}set y(c){this._y=c,this._onChangeCallback()}get z(){return this._z}set z(c){this._z=c,this._onChangeCallback()}get order(){return this._order}set order(c){this._order=c,this._onChangeCallback()}set(c,h,f,b=this._order){return this._x=c,this._y=h,this._z=f,this._order=b,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(c){return this._x=c._x,this._y=c._y,this._z=c._z,this._order=c._order,this._onChangeCallback(),this}setFromRotationMatrix(c,h=this._order,f=!0){const b=c.elements,S=b[0],B=b[4],ne=b[8],ae=b[1],ge=b[5],Te=b[9],Se=b[2],Pe=b[6],qe=b[10];switch(h){case"XYZ":this._y=Math.asin(Vl(ne,-1,1)),Math.abs(ne)<.9999999?(this._x=Math.atan2(-Te,qe),this._z=Math.atan2(-B,S)):(this._x=Math.atan2(Pe,ge),this._z=0);break;case"YXZ":this._x=Math.asin(-Vl(Te,-1,1)),Math.abs(Te)<.9999999?(this._y=Math.atan2(ne,qe),this._z=Math.atan2(ae,ge)):(this._y=Math.atan2(-Se,S),this._z=0);break;case"ZXY":this._x=Math.asin(Vl(Pe,-1,1)),Math.abs(Pe)<.9999999?(this._y=Math.atan2(-Se,qe),this._z=Math.atan2(-B,ge)):(this._y=0,this._z=Math.atan2(ae,S));break;case"ZYX":this._y=Math.asin(-Vl(Se,-1,1)),Math.abs(Se)<.9999999?(this._x=Math.atan2(Pe,qe),this._z=Math.atan2(ae,S)):(this._x=0,this._z=Math.atan2(-B,ge));break;case"YZX":this._z=Math.asin(Vl(ae,-1,1)),Math.abs(ae)<.9999999?(this._x=Math.atan2(-Te,ge),this._y=Math.atan2(-Se,S)):(this._x=0,this._y=Math.atan2(ne,qe));break;case"XZY":this._z=Math.asin(-Vl(B,-1,1)),Math.abs(B)<.9999999?(this._x=Math.atan2(Pe,ge),this._y=Math.atan2(ne,S)):(this._x=Math.atan2(-Te,qe),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+h)}return this._order=h,!0===f&&this._onChangeCallback(),this}setFromQuaternion(c,h,f){return Qh.makeRotationFromQuaternion(c),this.setFromRotationMatrix(Qh,h,f)}setFromVector3(c,h=this._order){return this.set(c.x,c.y,c.z,h)}reorder(c){return Y_.setFromEuler(this),this.setFromQuaternion(Y_,c)}equals(c){return c._x===this._x&&c._y===this._y&&c._z===this._z&&c._order===this._order}fromArray(c){return this._x=c[0],this._y=c[1],this._z=c[2],void 0!==c[3]&&(this._order=c[3]),this._onChangeCallback(),this}toArray(c=[],h=0){return c[h]=this._x,c[h+1]=this._y,c[h+2]=this._z,c[h+3]=this._order,c}_onChange(c){return this._onChangeCallback=c,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}return v.DefaultOrder="XYZ",v.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],v})();class gp{constructor(){this.mask=1}set(o){this.mask=(1<<o|0)>>>0}enable(o){this.mask|=1<<o|0}enableAll(){this.mask=-1}toggle(o){this.mask^=1<<o|0}disable(o){this.mask&=~(1<<o|0)}disableAll(){this.mask=0}test(o){return 0!=(this.mask&o.mask)}isEnabled(o){return 0!=(this.mask&(1<<o|0))}}let Ly=0;const em=new Ut,_p=new Ha,Md=new so,Fu=new Ut,yp=new Ut,y0=new Ut,Ru=new Ha,v0=new Ut(1,0,0),b0=new Ut(0,1,0),vc=new Ut(0,0,1),sA={type:"added"},Wh={type:"removed"};let Va=(()=>{class v extends Ra{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Ly++}),this.uuid=Yu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=v.DefaultUp.clone();const c=new Ut,h=new Ic,f=new Ha,b=new Ut(1,1,1);h._onChange(function S(){f.setFromEuler(h,!1)}),f._onChange(function B(){h.setFromQuaternion(f,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:c},rotation:{configurable:!0,enumerable:!0,value:h},quaternion:{configurable:!0,enumerable:!0,value:f},scale:{configurable:!0,enumerable:!0,value:b},modelViewMatrix:{value:new so},normalMatrix:{value:new Zl}}),this.matrix=new so,this.matrixWorld=new so,this.matrixAutoUpdate=v.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=v.DefaultMatrixWorldAutoUpdate,this.layers=new gp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(c){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(c),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(c){return this.quaternion.premultiply(c),this}setRotationFromAxisAngle(c,h){this.quaternion.setFromAxisAngle(c,h)}setRotationFromEuler(c){this.quaternion.setFromEuler(c,!0)}setRotationFromMatrix(c){this.quaternion.setFromRotationMatrix(c)}setRotationFromQuaternion(c){this.quaternion.copy(c)}rotateOnAxis(c,h){return _p.setFromAxisAngle(c,h),this.quaternion.multiply(_p),this}rotateOnWorldAxis(c,h){return _p.setFromAxisAngle(c,h),this.quaternion.premultiply(_p),this}rotateX(c){return this.rotateOnAxis(v0,c)}rotateY(c){return this.rotateOnAxis(b0,c)}rotateZ(c){return this.rotateOnAxis(vc,c)}translateOnAxis(c,h){return em.copy(c).applyQuaternion(this.quaternion),this.position.add(em.multiplyScalar(h)),this}translateX(c){return this.translateOnAxis(v0,c)}translateY(c){return this.translateOnAxis(b0,c)}translateZ(c){return this.translateOnAxis(vc,c)}localToWorld(c){return c.applyMatrix4(this.matrixWorld)}worldToLocal(c){return c.applyMatrix4(Md.copy(this.matrixWorld).invert())}lookAt(c,h,f){c.isVector3?Fu.copy(c):Fu.set(c,h,f);const b=this.parent;this.updateWorldMatrix(!0,!1),yp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Md.lookAt(yp,Fu,this.up):Md.lookAt(Fu,yp,this.up),this.quaternion.setFromRotationMatrix(Md),b&&(Md.extractRotation(b.matrixWorld),_p.setFromRotationMatrix(Md),this.quaternion.premultiply(_p.invert()))}add(c){if(arguments.length>1){for(let h=0;h<arguments.length;h++)this.add(arguments[h]);return this}return c===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",c),this):(c&&c.isObject3D?(null!==c.parent&&c.parent.remove(c),c.parent=this,this.children.push(c),c.dispatchEvent(sA)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",c),this)}remove(c){if(arguments.length>1){for(let f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}const h=this.children.indexOf(c);return-1!==h&&(c.parent=null,this.children.splice(h,1),c.dispatchEvent(Wh)),this}removeFromParent(){const c=this.parent;return null!==c&&c.remove(this),this}clear(){for(let c=0;c<this.children.length;c++){const h=this.children[c];h.parent=null,h.dispatchEvent(Wh)}return this.children.length=0,this}attach(c){return this.updateWorldMatrix(!0,!1),Md.copy(this.matrixWorld).invert(),null!==c.parent&&(c.parent.updateWorldMatrix(!0,!1),Md.multiply(c.parent.matrixWorld)),c.applyMatrix4(Md),this.add(c),c.updateWorldMatrix(!1,!0),this}getObjectById(c){return this.getObjectByProperty("id",c)}getObjectByName(c){return this.getObjectByProperty("name",c)}getObjectByProperty(c,h){if(this[c]===h)return this;for(let f=0,b=this.children.length;f<b;f++){const B=this.children[f].getObjectByProperty(c,h);if(void 0!==B)return B}}getWorldPosition(c){return this.updateWorldMatrix(!0,!1),c.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(c){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yp,c,y0),c}getWorldScale(c){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yp,Ru,c),c}getWorldDirection(c){this.updateWorldMatrix(!0,!1);const h=this.matrixWorld.elements;return c.set(h[8],h[9],h[10]).normalize()}raycast(){}traverse(c){c(this);const h=this.children;for(let f=0,b=h.length;f<b;f++)h[f].traverse(c)}traverseVisible(c){if(!1===this.visible)return;c(this);const h=this.children;for(let f=0,b=h.length;f<b;f++)h[f].traverseVisible(c)}traverseAncestors(c){const h=this.parent;null!==h&&(c(h),h.traverseAncestors(c))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(c){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||c)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,c=!0);const h=this.children;for(let f=0,b=h.length;f<b;f++){const S=h[f];(!0===S.matrixWorldAutoUpdate||!0===c)&&S.updateMatrixWorld(c)}}updateWorldMatrix(c,h){const f=this.parent;if(!0===c&&null!==f&&!0===f.matrixWorldAutoUpdate&&f.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===h){const b=this.children;for(let S=0,B=b.length;S<B;S++){const ne=b[S];!0===ne.matrixWorldAutoUpdate&&ne.updateWorldMatrix(!1,!0)}}}toJSON(c){const h=void 0===c||"string"==typeof c,f={};h&&(c={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},f.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const b={};function S(ne,ae){return void 0===ne[ae.uuid]&&(ne[ae.uuid]=ae.toJSON(c)),ae.uuid}if(b.uuid=this.uuid,b.type=this.type,""!==this.name&&(b.name=this.name),!0===this.castShadow&&(b.castShadow=!0),!0===this.receiveShadow&&(b.receiveShadow=!0),!1===this.visible&&(b.visible=!1),!1===this.frustumCulled&&(b.frustumCulled=!1),0!==this.renderOrder&&(b.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(b.userData=this.userData),b.layers=this.layers.mask,b.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(b.matrixAutoUpdate=!1),this.isInstancedMesh&&(b.type="InstancedMesh",b.count=this.count,b.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(b.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?b.background=this.background.toJSON():this.background.isTexture&&(b.background=this.background.toJSON(c).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(b.environment=this.environment.toJSON(c).uuid);else if(this.isMesh||this.isLine||this.isPoints){b.geometry=S(c.geometries,this.geometry);const ne=this.geometry.parameters;if(void 0!==ne&&void 0!==ne.shapes){const ae=ne.shapes;if(Array.isArray(ae))for(let ge=0,Te=ae.length;ge<Te;ge++)S(c.shapes,ae[ge]);else S(c.shapes,ae)}}if(this.isSkinnedMesh&&(b.bindMode=this.bindMode,b.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(S(c.skeletons,this.skeleton),b.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const ne=[];for(let ae=0,ge=this.material.length;ae<ge;ae++)ne.push(S(c.materials,this.material[ae]));b.material=ne}else b.material=S(c.materials,this.material);if(this.children.length>0){b.children=[];for(let ne=0;ne<this.children.length;ne++)b.children.push(this.children[ne].toJSON(c).object)}if(this.animations.length>0){b.animations=[];for(let ne=0;ne<this.animations.length;ne++)b.animations.push(S(c.animations,this.animations[ne]))}if(h){const ne=B(c.geometries),ae=B(c.materials),ge=B(c.textures),Te=B(c.images),Se=B(c.shapes),Pe=B(c.skeletons),qe=B(c.animations),Ne=B(c.nodes);ne.length>0&&(f.geometries=ne),ae.length>0&&(f.materials=ae),ge.length>0&&(f.textures=ge),Te.length>0&&(f.images=Te),Se.length>0&&(f.shapes=Se),Pe.length>0&&(f.skeletons=Pe),qe.length>0&&(f.animations=qe),Ne.length>0&&(f.nodes=Ne)}return f.object=b,f;function B(ne){const ae=[];for(const ge in ne){const Te=ne[ge];delete Te.metadata,ae.push(Te)}return ae}}clone(c){return(new this.constructor).copy(this,c)}copy(c,h=!0){if(this.name=c.name,this.up.copy(c.up),this.position.copy(c.position),this.rotation.order=c.rotation.order,this.quaternion.copy(c.quaternion),this.scale.copy(c.scale),this.matrix.copy(c.matrix),this.matrixWorld.copy(c.matrixWorld),this.matrixAutoUpdate=c.matrixAutoUpdate,this.matrixWorldNeedsUpdate=c.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=c.matrixWorldAutoUpdate,this.layers.mask=c.layers.mask,this.visible=c.visible,this.castShadow=c.castShadow,this.receiveShadow=c.receiveShadow,this.frustumCulled=c.frustumCulled,this.renderOrder=c.renderOrder,this.userData=JSON.parse(JSON.stringify(c.userData)),!0===h)for(let f=0;f<c.children.length;f++)this.add(c.children[f].clone());return this}}return v.DefaultUp=new Ut(0,1,0),v.DefaultMatrixAutoUpdate=!0,v.DefaultMatrixWorldAutoUpdate=!0,v})(),x0=0;const pu=new so,jh=new Va,bc=new Ut,Au=new du,Mh=new du,Pc=new Ut;class So extends Ra{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:x0++}),this.uuid=Yu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(o){return this.index=Array.isArray(o)?new(g0(o)?Xm:K_)(o,1):o,this}getAttribute(o){return this.attributes[o]}setAttribute(o,c){return this.attributes[o]=c,this}deleteAttribute(o){return delete this.attributes[o],this}hasAttribute(o){return void 0!==this.attributes[o]}addGroup(o,c,h=0){this.groups.push({start:o,count:c,materialIndex:h})}clearGroups(){this.groups=[]}setDrawRange(o,c){this.drawRange.start=o,this.drawRange.count=c}applyMatrix4(o){const c=this.attributes.position;void 0!==c&&(c.applyMatrix4(o),c.needsUpdate=!0);const h=this.attributes.normal;if(void 0!==h){const b=(new Zl).getNormalMatrix(o);h.applyNormalMatrix(b),h.needsUpdate=!0}const f=this.attributes.tangent;return void 0!==f&&(f.transformDirection(o),f.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(o){return pu.makeRotationFromQuaternion(o),this.applyMatrix4(pu),this}rotateX(o){return pu.makeRotationX(o),this.applyMatrix4(pu),this}rotateY(o){return pu.makeRotationY(o),this.applyMatrix4(pu),this}rotateZ(o){return pu.makeRotationZ(o),this.applyMatrix4(pu),this}translate(o,c,h){return pu.makeTranslation(o,c,h),this.applyMatrix4(pu),this}scale(o,c,h){return pu.makeScale(o,c,h),this.applyMatrix4(pu),this}lookAt(o){return jh.lookAt(o),jh.updateMatrix(),this.applyMatrix4(jh.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(bc).negate(),this.translate(bc.x,bc.y,bc.z),this}setFromPoints(o){const c=[];for(let h=0,f=o.length;h<f;h++){const b=o[h];c.push(b.x,b.y,b.z||0)}return this.setAttribute("position",new Ss(c,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new du);const o=this.attributes.position,c=this.morphAttributes.position;if(o&&o.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Ut(-1/0,-1/0,-1/0),new Ut(1/0,1/0,1/0));if(void 0!==o){if(this.boundingBox.setFromBufferAttribute(o),c)for(let h=0,f=c.length;h<f;h++)Au.setFromBufferAttribute(c[h]),this.morphTargetsRelative?(Pc.addVectors(this.boundingBox.min,Au.min),this.boundingBox.expandByPoint(Pc),Pc.addVectors(this.boundingBox.max,Au.max),this.boundingBox.expandByPoint(Pc)):(this.boundingBox.expandByPoint(Au.min),this.boundingBox.expandByPoint(Au.max))}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new xd);const o=this.attributes.position,c=this.morphAttributes.position;if(o&&o.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Ut,1/0);if(o){const h=this.boundingSphere.center;if(Au.setFromBufferAttribute(o),c)for(let b=0,S=c.length;b<S;b++)Mh.setFromBufferAttribute(c[b]),this.morphTargetsRelative?(Pc.addVectors(Au.min,Mh.min),Au.expandByPoint(Pc),Pc.addVectors(Au.max,Mh.max),Au.expandByPoint(Pc)):(Au.expandByPoint(Mh.min),Au.expandByPoint(Mh.max));Au.getCenter(h);let f=0;for(let b=0,S=o.count;b<S;b++)Pc.fromBufferAttribute(o,b),f=Math.max(f,h.distanceToSquared(Pc));if(c)for(let b=0,S=c.length;b<S;b++){const B=c[b],ne=this.morphTargetsRelative;for(let ae=0,ge=B.count;ae<ge;ae++)Pc.fromBufferAttribute(B,ae),ne&&(bc.fromBufferAttribute(o,ae),Pc.add(bc)),f=Math.max(f,h.distanceToSquared(Pc))}this.boundingSphere.radius=Math.sqrt(f),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const o=this.index,c=this.attributes;if(null===o||void 0===c.position||void 0===c.normal||void 0===c.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const h=o.array,f=c.position.array,b=c.normal.array,S=c.uv.array,B=f.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Bc(new Float32Array(4*B),4));const ne=this.getAttribute("tangent").array,ae=[],ge=[];for(let bn=0;bn<B;bn++)ae[bn]=new Ut,ge[bn]=new Ut;const Te=new Ut,Se=new Ut,Pe=new Ut,qe=new Di,Ne=new Di,Fe=new Di,at=new Ut,_t=new Ut;function ut(bn,ui,Pi){Te.fromArray(f,3*bn),Se.fromArray(f,3*ui),Pe.fromArray(f,3*Pi),qe.fromArray(S,2*bn),Ne.fromArray(S,2*ui),Fe.fromArray(S,2*Pi),Se.sub(Te),Pe.sub(Te),Ne.sub(qe),Fe.sub(qe);const hi=1/(Ne.x*Fe.y-Fe.x*Ne.y);isFinite(hi)&&(at.copy(Se).multiplyScalar(Fe.y).addScaledVector(Pe,-Ne.y).multiplyScalar(hi),_t.copy(Pe).multiplyScalar(Ne.x).addScaledVector(Se,-Fe.x).multiplyScalar(hi),ae[bn].add(at),ae[ui].add(at),ae[Pi].add(at),ge[bn].add(_t),ge[ui].add(_t),ge[Pi].add(_t))}let ht=this.groups;0===ht.length&&(ht=[{start:0,count:h.length}]);for(let bn=0,ui=ht.length;bn<ui;++bn){const Pi=ht[bn],hi=Pi.start;for(let Mi=hi,Oi=hi+Pi.count;Mi<Oi;Mi+=3)ut(h[Mi+0],h[Mi+1],h[Mi+2])}const Rt=new Ut,Xt=new Ut,xn=new Ut,bt=new Ut;function en(bn){xn.fromArray(b,3*bn),bt.copy(xn);const ui=ae[bn];Rt.copy(ui),Rt.sub(xn.multiplyScalar(xn.dot(ui))).normalize(),Xt.crossVectors(bt,ui);const hi=Xt.dot(ge[bn])<0?-1:1;ne[4*bn]=Rt.x,ne[4*bn+1]=Rt.y,ne[4*bn+2]=Rt.z,ne[4*bn+3]=hi}for(let bn=0,ui=ht.length;bn<ui;++bn){const Pi=ht[bn],hi=Pi.start;for(let Mi=hi,Oi=hi+Pi.count;Mi<Oi;Mi+=3)en(h[Mi+0]),en(h[Mi+1]),en(h[Mi+2])}}computeVertexNormals(){const o=this.index,c=this.getAttribute("position");if(void 0!==c){let h=this.getAttribute("normal");if(void 0===h)h=new Bc(new Float32Array(3*c.count),3),this.setAttribute("normal",h);else for(let Se=0,Pe=h.count;Se<Pe;Se++)h.setXYZ(Se,0,0,0);const f=new Ut,b=new Ut,S=new Ut,B=new Ut,ne=new Ut,ae=new Ut,ge=new Ut,Te=new Ut;if(o)for(let Se=0,Pe=o.count;Se<Pe;Se+=3){const qe=o.getX(Se+0),Ne=o.getX(Se+1),Fe=o.getX(Se+2);f.fromBufferAttribute(c,qe),b.fromBufferAttribute(c,Ne),S.fromBufferAttribute(c,Fe),ge.subVectors(S,b),Te.subVectors(f,b),ge.cross(Te),B.fromBufferAttribute(h,qe),ne.fromBufferAttribute(h,Ne),ae.fromBufferAttribute(h,Fe),B.add(ge),ne.add(ge),ae.add(ge),h.setXYZ(qe,B.x,B.y,B.z),h.setXYZ(Ne,ne.x,ne.y,ne.z),h.setXYZ(Fe,ae.x,ae.y,ae.z)}else for(let Se=0,Pe=c.count;Se<Pe;Se+=3)f.fromBufferAttribute(c,Se+0),b.fromBufferAttribute(c,Se+1),S.fromBufferAttribute(c,Se+2),ge.subVectors(S,b),Te.subVectors(f,b),ge.cross(Te),h.setXYZ(Se+0,ge.x,ge.y,ge.z),h.setXYZ(Se+1,ge.x,ge.y,ge.z),h.setXYZ(Se+2,ge.x,ge.y,ge.z);this.normalizeNormals(),h.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const o=this.attributes.normal;for(let c=0,h=o.count;c<h;c++)Pc.fromBufferAttribute(o,c),Pc.normalize(),o.setXYZ(c,Pc.x,Pc.y,Pc.z)}toNonIndexed(){function o(B,ne){const ae=B.array,ge=B.itemSize,Te=B.normalized,Se=new ae.constructor(ne.length*ge);let Pe=0,qe=0;for(let Ne=0,Fe=ne.length;Ne<Fe;Ne++){Pe=B.isInterleavedBufferAttribute?ne[Ne]*B.data.stride+B.offset:ne[Ne]*ge;for(let at=0;at<ge;at++)Se[qe++]=ae[Pe++]}return new Bc(Se,ge,Te)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const c=new So,h=this.index.array,f=this.attributes;for(const B in f){const ae=o(f[B],h);c.setAttribute(B,ae)}const b=this.morphAttributes;for(const B in b){const ne=[],ae=b[B];for(let ge=0,Te=ae.length;ge<Te;ge++){const Pe=o(ae[ge],h);ne.push(Pe)}c.morphAttributes[B]=ne}c.morphTargetsRelative=this.morphTargetsRelative;const S=this.groups;for(let B=0,ne=S.length;B<ne;B++){const ae=S[B];c.addGroup(ae.start,ae.count,ae.materialIndex)}return c}toJSON(){const o={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),Object.keys(this.userData).length>0&&(o.userData=this.userData),void 0!==this.parameters){const ne=this.parameters;for(const ae in ne)void 0!==ne[ae]&&(o[ae]=ne[ae]);return o}o.data={attributes:{}};const c=this.index;null!==c&&(o.data.index={type:c.array.constructor.name,array:Array.prototype.slice.call(c.array)});const h=this.attributes;for(const ne in h)o.data.attributes[ne]=h[ne].toJSON(o.data);const f={};let b=!1;for(const ne in this.morphAttributes){const ae=this.morphAttributes[ne],ge=[];for(let Te=0,Se=ae.length;Te<Se;Te++)ge.push(ae[Te].toJSON(o.data));ge.length>0&&(f[ne]=ge,b=!0)}b&&(o.data.morphAttributes=f,o.data.morphTargetsRelative=this.morphTargetsRelative);const S=this.groups;S.length>0&&(o.data.groups=JSON.parse(JSON.stringify(S)));const B=this.boundingSphere;return null!==B&&(o.data.boundingSphere={center:B.center.toArray(),radius:B.radius}),o}clone(){return(new this.constructor).copy(this)}copy(o){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const c={};this.name=o.name;const h=o.index;null!==h&&this.setIndex(h.clone(c));const f=o.attributes;for(const ae in f)this.setAttribute(ae,f[ae].clone(c));const b=o.morphAttributes;for(const ae in b){const ge=[],Te=b[ae];for(let Se=0,Pe=Te.length;Se<Pe;Se++)ge.push(Te[Se].clone(c));this.morphAttributes[ae]=ge}this.morphTargetsRelative=o.morphTargetsRelative;const S=o.groups;for(let ae=0,ge=S.length;ae<ge;ae++){const Te=S[ae];this.addGroup(Te.start,Te.count,Te.materialIndex)}const B=o.boundingBox;null!==B&&(this.boundingBox=B.clone());const ne=o.boundingSphere;return null!==ne&&(this.boundingSphere=ne.clone()),this.drawRange.start=o.drawRange.start,this.drawRange.count=o.drawRange.count,this.userData=o.userData,void 0!==o.parameters&&(this.parameters=Object.assign({},o.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}class Gl extends So{constructor(o=1,c=1,h=1,f=1,b=1,S=1){super(),this.type="BoxGeometry",this.parameters={width:o,height:c,depth:h,widthSegments:f,heightSegments:b,depthSegments:S};const B=this;f=Math.floor(f),b=Math.floor(b),S=Math.floor(S);const ne=[],ae=[],ge=[],Te=[];let Se=0,Pe=0;function qe(Ne,Fe,at,_t,ut,ht,Rt,Xt,xn,bt,en){const bn=ht/xn,ui=Rt/bt,Pi=ht/2,hi=Rt/2,Vn=Xt/2,Mi=xn+1,Oi=bt+1;let Xi=0,Ai=0;const Hn=new Ut;for(let Zn=0;Zn<Oi;Zn++){const _r=Zn*ui-hi;for(let ur=0;ur<Mi;ur++)Hn[Ne]=(ur*bn-Pi)*_t,Hn[Fe]=_r*ut,Hn[at]=Vn,ae.push(Hn.x,Hn.y,Hn.z),Hn[Ne]=0,Hn[Fe]=0,Hn[at]=Xt>0?1:-1,ge.push(Hn.x,Hn.y,Hn.z),Te.push(ur/xn),Te.push(1-Zn/bt),Xi+=1}for(let Zn=0;Zn<bt;Zn++)for(let _r=0;_r<xn;_r++){const ai=Se+_r+Mi*(Zn+1),As=Se+(_r+1)+Mi*(Zn+1),co=Se+(_r+1)+Mi*Zn;ne.push(Se+_r+Mi*Zn,ai,co),ne.push(ai,As,co),Ai+=6}B.addGroup(Pe,Ai,en),Pe+=Ai,Se+=Xi}qe("z","y","x",-1,-1,h,c,o,S,b,0),qe("z","y","x",1,-1,h,c,-o,S,b,1),qe("x","z","y",1,1,o,h,c,f,S,2),qe("x","z","y",1,-1,o,h,-c,f,S,3),qe("x","y","z",1,-1,o,c,h,f,b,4),qe("x","y","z",-1,-1,o,c,-h,f,b,5),this.setIndex(ne),this.setAttribute("position",new Ss(ae,3)),this.setAttribute("normal",new Ss(ge,3)),this.setAttribute("uv",new Ss(Te,2))}static fromJSON(o){return new Gl(o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments)}}class vp extends So{constructor(o=1,c=1,h=1,f=1){super(),this.type="PlaneGeometry",this.parameters={width:o,height:c,widthSegments:h,heightSegments:f};const b=o/2,S=c/2,B=Math.floor(h),ne=Math.floor(f),ae=B+1,ge=ne+1,Te=o/B,Se=c/ne,Pe=[],qe=[],Ne=[],Fe=[];for(let at=0;at<ge;at++){const _t=at*Se-S;for(let ut=0;ut<ae;ut++)qe.push(ut*Te-b,-_t,0),Ne.push(0,0,1),Fe.push(ut/B),Fe.push(1-at/ne)}for(let at=0;at<ne;at++)for(let _t=0;_t<B;_t++){const ht=_t+ae*(at+1),Rt=_t+1+ae*(at+1),Xt=_t+1+ae*at;Pe.push(_t+ae*at,ht,Xt),Pe.push(ht,Rt,Xt)}this.setIndex(Pe),this.setAttribute("position",new Ss(qe,3)),this.setAttribute("normal",new Ss(Ne,3)),this.setAttribute("uv",new Ss(Fe,2))}static fromJSON(o){return new vp(o.width,o.height,o.widthSegments,o.heightSegments)}}let Io=0;class $h extends Ra{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Io++}),this.uuid=Yu(),this.name="",this.type="Material",this.blending=O,this.side=K,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Me,this.blendDst=de,this.blendEquation=m,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ee,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=E,this.stencilZFail=E,this.stencilZPass=E,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(o){this._alphaTest>0!=o>0&&this.version++,this._alphaTest=o}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(o){if(void 0!==o)for(const c in o){const h=o[c];if(void 0===h){console.warn("THREE.Material: '"+c+"' parameter is undefined.");continue}const f=this[c];void 0!==f?f&&f.isColor?f.set(h):f&&f.isVector3&&h&&h.isVector3?f.copy(h):this[c]=h:console.warn("THREE."+this.type+": '"+c+"' is not a property of this material.")}}toJSON(o){const c=void 0===o||"string"==typeof o;c&&(o={textures:{},images:{}});const h={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function f(b){const S=[];for(const B in b){const ne=b[B];delete ne.metadata,S.push(ne)}return S}if(h.uuid=this.uuid,h.type=this.type,""!==this.name&&(h.name=this.name),this.color&&this.color.isColor&&(h.color=this.color.getHex()),void 0!==this.roughness&&(h.roughness=this.roughness),void 0!==this.metalness&&(h.metalness=this.metalness),void 0!==this.sheen&&(h.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(h.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(h.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(h.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(h.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(h.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(h.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(h.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(h.shininess=this.shininess),void 0!==this.clearcoat&&(h.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(h.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(h.clearcoatMap=this.clearcoatMap.toJSON(o).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(h.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(o).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(h.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(o).uuid,h.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(h.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(h.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(h.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(h.iridescenceMap=this.iridescenceMap.toJSON(o).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(h.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(o).uuid),this.map&&this.map.isTexture&&(h.map=this.map.toJSON(o).uuid),this.matcap&&this.matcap.isTexture&&(h.matcap=this.matcap.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(h.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(h.lightMap=this.lightMap.toJSON(o).uuid,h.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(h.aoMap=this.aoMap.toJSON(o).uuid,h.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(h.bumpMap=this.bumpMap.toJSON(o).uuid,h.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(h.normalMap=this.normalMap.toJSON(o).uuid,h.normalMapType=this.normalMapType,h.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(h.displacementMap=this.displacementMap.toJSON(o).uuid,h.displacementScale=this.displacementScale,h.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(h.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(h.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(h.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(h.specularMap=this.specularMap.toJSON(o).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(h.specularIntensityMap=this.specularIntensityMap.toJSON(o).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(h.specularColorMap=this.specularColorMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(h.envMap=this.envMap.toJSON(o).uuid,void 0!==this.combine&&(h.combine=this.combine)),void 0!==this.envMapIntensity&&(h.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(h.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(h.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(h.gradientMap=this.gradientMap.toJSON(o).uuid),void 0!==this.transmission&&(h.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(h.transmissionMap=this.transmissionMap.toJSON(o).uuid),void 0!==this.thickness&&(h.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(h.thicknessMap=this.thicknessMap.toJSON(o).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(h.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(h.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(h.size=this.size),null!==this.shadowSide&&(h.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(h.sizeAttenuation=this.sizeAttenuation),this.blending!==O&&(h.blending=this.blending),this.side!==K&&(h.side=this.side),this.vertexColors&&(h.vertexColors=!0),this.opacity<1&&(h.opacity=this.opacity),!0===this.transparent&&(h.transparent=this.transparent),h.depthFunc=this.depthFunc,h.depthTest=this.depthTest,h.depthWrite=this.depthWrite,h.colorWrite=this.colorWrite,h.stencilWrite=this.stencilWrite,h.stencilWriteMask=this.stencilWriteMask,h.stencilFunc=this.stencilFunc,h.stencilRef=this.stencilRef,h.stencilFuncMask=this.stencilFuncMask,h.stencilFail=this.stencilFail,h.stencilZFail=this.stencilZFail,h.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(h.rotation=this.rotation),!0===this.polygonOffset&&(h.polygonOffset=!0),0!==this.polygonOffsetFactor&&(h.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(h.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(h.linewidth=this.linewidth),void 0!==this.dashSize&&(h.dashSize=this.dashSize),void 0!==this.gapSize&&(h.gapSize=this.gapSize),void 0!==this.scale&&(h.scale=this.scale),!0===this.dithering&&(h.dithering=!0),this.alphaTest>0&&(h.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(h.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(h.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(h.wireframe=this.wireframe),this.wireframeLinewidth>1&&(h.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(h.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(h.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(h.flatShading=this.flatShading),!1===this.visible&&(h.visible=!1),!1===this.toneMapped&&(h.toneMapped=!1),!1===this.fog&&(h.fog=!1),"{}"!==JSON.stringify(this.userData)&&(h.userData=this.userData),c){const b=f(o.textures),S=f(o.images);b.length>0&&(h.textures=b),S.length>0&&(h.images=S)}return h}clone(){return(new this.constructor).copy(this)}copy(o){this.name=o.name,this.blending=o.blending,this.side=o.side,this.vertexColors=o.vertexColors,this.opacity=o.opacity,this.transparent=o.transparent,this.blendSrc=o.blendSrc,this.blendDst=o.blendDst,this.blendEquation=o.blendEquation,this.blendSrcAlpha=o.blendSrcAlpha,this.blendDstAlpha=o.blendDstAlpha,this.blendEquationAlpha=o.blendEquationAlpha,this.depthFunc=o.depthFunc,this.depthTest=o.depthTest,this.depthWrite=o.depthWrite,this.stencilWriteMask=o.stencilWriteMask,this.stencilFunc=o.stencilFunc,this.stencilRef=o.stencilRef,this.stencilFuncMask=o.stencilFuncMask,this.stencilFail=o.stencilFail,this.stencilZFail=o.stencilZFail,this.stencilZPass=o.stencilZPass,this.stencilWrite=o.stencilWrite;const c=o.clippingPlanes;let h=null;if(null!==c){const f=c.length;h=new Array(f);for(let b=0;b!==f;++b)h[b]=c[b].clone()}return this.clippingPlanes=h,this.clipIntersection=o.clipIntersection,this.clipShadows=o.clipShadows,this.shadowSide=o.shadowSide,this.colorWrite=o.colorWrite,this.precision=o.precision,this.polygonOffset=o.polygonOffset,this.polygonOffsetFactor=o.polygonOffsetFactor,this.polygonOffsetUnits=o.polygonOffsetUnits,this.dithering=o.dithering,this.alphaTest=o.alphaTest,this.alphaToCoverage=o.alphaToCoverage,this.premultipliedAlpha=o.premultipliedAlpha,this.visible=o.visible,this.toneMapped=o.toneMapped,this.userData=JSON.parse(JSON.stringify(o.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(o){!0===o&&this.version++}}function $l(v){const o={};for(const c in v){o[c]={};for(const h in v[c]){const f=v[c][h];o[c][h]=f&&(f.isColor||f.isMatrix3||f.isMatrix4||f.isVector2||f.isVector3||f.isVector4||f.isTexture||f.isQuaternion)?f.clone():Array.isArray(f)?f.slice():f}}return o}function Gc(v){const o={};for(let c=0;c<v.length;c++){const h=$l(v[c]);for(const f in h)o[f]=h[f]}return o}const Nf={clone:$l,merge:Gc};class ec extends $h{constructor(o){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==o&&this.setValues(o)}copy(o){return super.copy(o),this.fragmentShader=o.fragmentShader,this.vertexShader=o.vertexShader,this.uniforms=$l(o.uniforms),this.uniformsGroups=function Ny(v){const o=[];for(let c=0;c<v.length;c++)o.push(v[c].clone());return o}(o.uniformsGroups),this.defines=Object.assign({},o.defines),this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.fog=o.fog,this.lights=o.lights,this.clipping=o.clipping,this.extensions=Object.assign({},o.extensions),this.glslVersion=o.glslVersion,this}toJSON(o){const c=super.toJSON(o);c.glslVersion=this.glslVersion,c.uniforms={};for(const f in this.uniforms){const S=this.uniforms[f].value;c.uniforms[f]=S&&S.isTexture?{type:"t",value:S.toJSON(o).uuid}:S&&S.isColor?{type:"c",value:S.getHex()}:S&&S.isVector2?{type:"v2",value:S.toArray()}:S&&S.isVector3?{type:"v3",value:S.toArray()}:S&&S.isVector4?{type:"v4",value:S.toArray()}:S&&S.isMatrix3?{type:"m3",value:S.toArray()}:S&&S.isMatrix4?{type:"m4",value:S.toArray()}:{value:S}}Object.keys(this.defines).length>0&&(c.defines=this.defines),c.vertexShader=this.vertexShader,c.fragmentShader=this.fragmentShader;const h={};for(const f in this.extensions)!0===this.extensions[f]&&(h[f]=!0);return Object.keys(h).length>0&&(c.extensions=h),c}}const Zi=new Ut,_a=new Ut,ks=new Ut,Ts=new Ut,xc=new Ut,nm=new Ut,Uf=new Ut;class qc{constructor(o=new Ut,c=new Ut(0,0,-1)){this.origin=o,this.direction=c}set(o,c){return this.origin.copy(o),this.direction.copy(c),this}copy(o){return this.origin.copy(o.origin),this.direction.copy(o.direction),this}at(o,c){return c.copy(this.direction).multiplyScalar(o).add(this.origin)}lookAt(o){return this.direction.copy(o).sub(this.origin).normalize(),this}recast(o){return this.origin.copy(this.at(o,Zi)),this}closestPointToPoint(o,c){c.subVectors(o,this.origin);const h=c.dot(this.direction);return h<0?c.copy(this.origin):c.copy(this.direction).multiplyScalar(h).add(this.origin)}distanceToPoint(o){return Math.sqrt(this.distanceSqToPoint(o))}distanceSqToPoint(o){const c=Zi.subVectors(o,this.origin).dot(this.direction);return c<0?this.origin.distanceToSquared(o):(Zi.copy(this.direction).multiplyScalar(c).add(this.origin),Zi.distanceToSquared(o))}distanceSqToSegment(o,c,h,f){_a.copy(o).add(c).multiplyScalar(.5),ks.copy(c).sub(o).normalize(),Ts.copy(this.origin).sub(_a);const b=.5*o.distanceTo(c),S=-this.direction.dot(ks),B=Ts.dot(this.direction),ne=-Ts.dot(ks),ae=Ts.lengthSq(),ge=Math.abs(1-S*S);let Te,Se,Pe,qe;if(ge>0)if(Te=S*ne-B,Se=S*B-ne,qe=b*ge,Te>=0)if(Se>=-qe)if(Se<=qe){const Ne=1/ge;Te*=Ne,Se*=Ne,Pe=Te*(Te+S*Se+2*B)+Se*(S*Te+Se+2*ne)+ae}else Se=b,Te=Math.max(0,-(S*Se+B)),Pe=-Te*Te+Se*(Se+2*ne)+ae;else Se=-b,Te=Math.max(0,-(S*Se+B)),Pe=-Te*Te+Se*(Se+2*ne)+ae;else Se<=-qe?(Te=Math.max(0,-(-S*b+B)),Se=Te>0?-b:Math.min(Math.max(-b,-ne),b),Pe=-Te*Te+Se*(Se+2*ne)+ae):Se<=qe?(Te=0,Se=Math.min(Math.max(-b,-ne),b),Pe=Se*(Se+2*ne)+ae):(Te=Math.max(0,-(S*b+B)),Se=Te>0?b:Math.min(Math.max(-b,-ne),b),Pe=-Te*Te+Se*(Se+2*ne)+ae);else Se=S>0?-b:b,Te=Math.max(0,-(S*Se+B)),Pe=-Te*Te+Se*(Se+2*ne)+ae;return h&&h.copy(this.direction).multiplyScalar(Te).add(this.origin),f&&f.copy(ks).multiplyScalar(Se).add(_a),Pe}intersectSphere(o,c){Zi.subVectors(o.center,this.origin);const h=Zi.dot(this.direction),f=Zi.dot(Zi)-h*h,b=o.radius*o.radius;if(f>b)return null;const S=Math.sqrt(b-f),B=h-S,ne=h+S;return B<0&&ne<0?null:this.at(B<0?ne:B,c)}intersectsSphere(o){return this.distanceSqToPoint(o.center)<=o.radius*o.radius}distanceToPlane(o){const c=o.normal.dot(this.direction);if(0===c)return 0===o.distanceToPoint(this.origin)?0:null;const h=-(this.origin.dot(o.normal)+o.constant)/c;return h>=0?h:null}intersectPlane(o,c){const h=this.distanceToPlane(o);return null===h?null:this.at(h,c)}intersectsPlane(o){const c=o.distanceToPoint(this.origin);return 0===c||o.normal.dot(this.direction)*c<0}intersectBox(o,c){let h,f,b,S,B,ne;const ae=1/this.direction.x,ge=1/this.direction.y,Te=1/this.direction.z,Se=this.origin;return ae>=0?(h=(o.min.x-Se.x)*ae,f=(o.max.x-Se.x)*ae):(h=(o.max.x-Se.x)*ae,f=(o.min.x-Se.x)*ae),ge>=0?(b=(o.min.y-Se.y)*ge,S=(o.max.y-Se.y)*ge):(b=(o.max.y-Se.y)*ge,S=(o.min.y-Se.y)*ge),h>S||b>f||((b>h||isNaN(h))&&(h=b),(S<f||isNaN(f))&&(f=S),Te>=0?(B=(o.min.z-Se.z)*Te,ne=(o.max.z-Se.z)*Te):(B=(o.max.z-Se.z)*Te,ne=(o.min.z-Se.z)*Te),h>ne||B>f)||((B>h||h!=h)&&(h=B),(ne<f||f!=f)&&(f=ne),f<0)?null:this.at(h>=0?h:f,c)}intersectsBox(o){return null!==this.intersectBox(o,Zi)}intersectTriangle(o,c,h,f,b){xc.subVectors(c,o),nm.subVectors(h,o),Uf.crossVectors(xc,nm);let B,S=this.direction.dot(Uf);if(S>0){if(f)return null;B=1}else{if(!(S<0))return null;B=-1,S=-S}Ts.subVectors(this.origin,o);const ne=B*this.direction.dot(nm.crossVectors(Ts,nm));if(ne<0)return null;const ae=B*this.direction.dot(xc.cross(Ts));if(ae<0||ne+ae>S)return null;const ge=-B*Ts.dot(Uf);return ge<0?null:this.at(ge/S,b)}applyMatrix4(o){return this.origin.applyMatrix4(o),this.direction.transformDirection(o),this}equals(o){return o.origin.equals(this.origin)&&o.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}const mu=new Ut,Xh=new Ut,Kd=new Ut,zf=new Ut,Hf=new Ut,Xl=new Ut,Kh=new Ut,im=new Ut,Yd=new Ut,Yh=new Ut;class ku{constructor(o=new Ut,c=new Ut,h=new Ut){this.a=o,this.b=c,this.c=h}static getNormal(o,c,h,f){f.subVectors(h,c),mu.subVectors(o,c),f.cross(mu);const b=f.lengthSq();return b>0?f.multiplyScalar(1/Math.sqrt(b)):f.set(0,0,0)}static getBarycoord(o,c,h,f,b){mu.subVectors(f,c),Xh.subVectors(h,c),Kd.subVectors(o,c);const S=mu.dot(mu),B=mu.dot(Xh),ne=mu.dot(Kd),ae=Xh.dot(Xh),ge=Xh.dot(Kd),Te=S*ae-B*B;if(0===Te)return b.set(-2,-1,-1);const Se=1/Te,Pe=(ae*ne-B*ge)*Se,qe=(S*ge-B*ne)*Se;return b.set(1-Pe-qe,qe,Pe)}static containsPoint(o,c,h,f){return this.getBarycoord(o,c,h,f,zf),zf.x>=0&&zf.y>=0&&zf.x+zf.y<=1}static getUV(o,c,h,f,b,S,B,ne){return this.getBarycoord(o,c,h,f,zf),ne.set(0,0),ne.addScaledVector(b,zf.x),ne.addScaledVector(S,zf.y),ne.addScaledVector(B,zf.z),ne}static isFrontFacing(o,c,h,f){return mu.subVectors(h,c),Xh.subVectors(o,c),mu.cross(Xh).dot(f)<0}set(o,c,h){return this.a.copy(o),this.b.copy(c),this.c.copy(h),this}setFromPointsAndIndices(o,c,h,f){return this.a.copy(o[c]),this.b.copy(o[h]),this.c.copy(o[f]),this}setFromAttributeAndIndices(o,c,h,f){return this.a.fromBufferAttribute(o,c),this.b.fromBufferAttribute(o,h),this.c.fromBufferAttribute(o,f),this}clone(){return(new this.constructor).copy(this)}copy(o){return this.a.copy(o.a),this.b.copy(o.b),this.c.copy(o.c),this}getArea(){return mu.subVectors(this.c,this.b),Xh.subVectors(this.a,this.b),.5*mu.cross(Xh).length()}getMidpoint(o){return o.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(o){return ku.getNormal(this.a,this.b,this.c,o)}getPlane(o){return o.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(o,c){return ku.getBarycoord(o,this.a,this.b,this.c,c)}getUV(o,c,h,f,b){return ku.getUV(o,this.a,this.b,this.c,c,h,f,b)}containsPoint(o){return ku.containsPoint(o,this.a,this.b,this.c)}isFrontFacing(o){return ku.isFrontFacing(this.a,this.b,this.c,o)}intersectsBox(o){return o.intersectsTriangle(this)}closestPointToPoint(o,c){const h=this.a,f=this.b,b=this.c;let S,B;Hf.subVectors(f,h),Xl.subVectors(b,h),im.subVectors(o,h);const ne=Hf.dot(im),ae=Xl.dot(im);if(ne<=0&&ae<=0)return c.copy(h);Yd.subVectors(o,f);const ge=Hf.dot(Yd),Te=Xl.dot(Yd);if(ge>=0&&Te<=ge)return c.copy(f);const Se=ne*Te-ge*ae;if(Se<=0&&ne>=0&&ge<=0)return S=ne/(ne-ge),c.copy(h).addScaledVector(Hf,S);Yh.subVectors(o,b);const Pe=Hf.dot(Yh),qe=Xl.dot(Yh);if(qe>=0&&Pe<=qe)return c.copy(b);const Ne=Pe*ae-ne*qe;if(Ne<=0&&ae>=0&&qe<=0)return B=ae/(ae-qe),c.copy(h).addScaledVector(Xl,B);const Fe=ge*qe-Pe*Te;if(Fe<=0&&Te-ge>=0&&Pe-qe>=0)return Kh.subVectors(b,f),B=(Te-ge)/(Te-ge+(Pe-qe)),c.copy(f).addScaledVector(Kh,B);const at=1/(Fe+Ne+Se);return S=Ne*at,B=Se*at,c.copy(h).addScaledVector(Hf,S).addScaledVector(Xl,B)}equals(o){return o.a.equals(this.a)&&o.b.equals(this.b)&&o.c.equals(this.c)}}class Ou extends $h{constructor(o){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new wr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.fog=o.fog,this}}const w0=new so,oA=new qc,ql=new xd,Cd=new Ut,Zd=new Ut,Sd=new Ut,Td=new Ut,rm=new Ut,aA=new Ut,lA=new Ut,cA=new Ut,uA=new Ut,sm=new Di,hA=new Di,Km=new Di,Ym=new Ut,Wr=new Ut;class Yr extends Va{constructor(o=new So,c=new Ou){super(),this.isMesh=!0,this.type="Mesh",this.geometry=o,this.material=c,this.updateMorphTargets()}copy(o,c){return super.copy(o,c),void 0!==o.morphTargetInfluences&&(this.morphTargetInfluences=o.morphTargetInfluences.slice()),void 0!==o.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},o.morphTargetDictionary)),this.material=o.material,this.geometry=o.geometry,this}updateMorphTargets(){const c=this.geometry.morphAttributes,h=Object.keys(c);if(h.length>0){const f=c[h[0]];if(void 0!==f){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,S=f.length;b<S;b++){const B=f[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[B]=b}}}}raycast(o,c){const h=this.geometry,f=this.material,b=this.matrixWorld;if(void 0===f||(null===h.boundingSphere&&h.computeBoundingSphere(),ql.copy(h.boundingSphere),ql.applyMatrix4(b),!1===o.ray.intersectsSphere(ql))||(w0.copy(b).invert(),oA.copy(o.ray).applyMatrix4(w0),null!==h.boundingBox&&!1===oA.intersectsBox(h.boundingBox)))return;let S;const B=h.index,ne=h.attributes.position,ae=h.morphAttributes.position,ge=h.morphTargetsRelative,Te=h.attributes.uv,Se=h.attributes.uv2,Pe=h.groups,qe=h.drawRange;if(null!==B)if(Array.isArray(f))for(let Ne=0,Fe=Pe.length;Ne<Fe;Ne++){const at=Pe[Ne],_t=f[at.materialIndex];for(let Rt=Math.max(at.start,qe.start),Xt=Math.min(B.count,Math.min(at.start+at.count,qe.start+qe.count));Rt<Xt;Rt+=3){const xn=B.getX(Rt),bt=B.getX(Rt+1),en=B.getX(Rt+2);S=xl(this,_t,o,oA,ne,ae,ge,Te,Se,xn,bt,en),S&&(S.faceIndex=Math.floor(Rt/3),S.face.materialIndex=at.materialIndex,c.push(S))}}else for(let at=Math.max(0,qe.start),_t=Math.min(B.count,qe.start+qe.count);at<_t;at+=3){const ut=B.getX(at),ht=B.getX(at+1),Rt=B.getX(at+2);S=xl(this,f,o,oA,ne,ae,ge,Te,Se,ut,ht,Rt),S&&(S.faceIndex=Math.floor(at/3),c.push(S))}else if(void 0!==ne)if(Array.isArray(f))for(let Ne=0,Fe=Pe.length;Ne<Fe;Ne++){const at=Pe[Ne],_t=f[at.materialIndex];for(let Rt=Math.max(at.start,qe.start),Xt=Math.min(ne.count,Math.min(at.start+at.count,qe.start+qe.count));Rt<Xt;Rt+=3)S=xl(this,_t,o,oA,ne,ae,ge,Te,Se,Rt,Rt+1,Rt+2),S&&(S.faceIndex=Math.floor(Rt/3),S.face.materialIndex=at.materialIndex,c.push(S))}else for(let at=Math.max(0,qe.start),_t=Math.min(ne.count,qe.start+qe.count);at<_t;at+=3)S=xl(this,f,o,oA,ne,ae,ge,Te,Se,at,at+1,at+2),S&&(S.faceIndex=Math.floor(at/3),c.push(S))}}function xl(v,o,c,h,f,b,S,B,ne,ae,ge,Te){Cd.fromBufferAttribute(f,ae),Zd.fromBufferAttribute(f,ge),Sd.fromBufferAttribute(f,Te);const Se=v.morphTargetInfluences;if(b&&Se){lA.set(0,0,0),cA.set(0,0,0),uA.set(0,0,0);for(let qe=0,Ne=b.length;qe<Ne;qe++){const Fe=Se[qe],at=b[qe];0!==Fe&&(Td.fromBufferAttribute(at,ae),rm.fromBufferAttribute(at,ge),aA.fromBufferAttribute(at,Te),S?(lA.addScaledVector(Td,Fe),cA.addScaledVector(rm,Fe),uA.addScaledVector(aA,Fe)):(lA.addScaledVector(Td.sub(Cd),Fe),cA.addScaledVector(rm.sub(Zd),Fe),uA.addScaledVector(aA.sub(Sd),Fe)))}Cd.add(lA),Zd.add(cA),Sd.add(uA)}v.isSkinnedMesh&&(v.boneTransform(ae,Cd),v.boneTransform(ge,Zd),v.boneTransform(Te,Sd));const Pe=function Il(v,o,c,h,f,b,S,B){let ne;if(ne=o.side===ue?h.intersectTriangle(S,b,f,!0,B):h.intersectTriangle(f,b,S,o.side!==X,B),null===ne)return null;Wr.copy(B),Wr.applyMatrix4(v.matrixWorld);const ae=c.ray.origin.distanceTo(Wr);return ae<c.near||ae>c.far?null:{distance:ae,point:Wr.clone(),object:v}}(v,o,c,h,Cd,Zd,Sd,Ym);if(Pe){B&&(sm.fromBufferAttribute(B,ae),hA.fromBufferAttribute(B,ge),Km.fromBufferAttribute(B,Te),Pe.uv=ku.getUV(Ym,Cd,Zd,Sd,sm,hA,Km,new Di)),ne&&(sm.fromBufferAttribute(ne,ae),hA.fromBufferAttribute(ne,ge),Km.fromBufferAttribute(ne,Te),Pe.uv2=ku.getUV(Ym,Cd,Zd,Sd,sm,hA,Km,new Di));const qe={a:ae,b:ge,c:Te,normal:new Ut,materialIndex:0};ku.getNormal(Cd,Zd,Sd,qe.normal),Pe.face=qe}return Pe}const Wo={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n\t\tfloat x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n\t\tfloat x2 = x * x;\n\t\tfloat x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n\t\treturn ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,\t0.0556434,\n\t\t-1.5371385,\t1.8760108, -0.2040259,\n\t\t-0.4985314,\t0.0415560,\t1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert\n#define Material_LightProbeLOD( material )\t(0)",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(\t\t0, 1,\t\t0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t\tf.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if defined( USE_SHADOWMAP ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_COORDS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(\t1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,\t1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,\t1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},as={common:{diffuse:{value:new wr(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Zl},uv2Transform:{value:new Zl},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Di(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new wr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new wr(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zl}},sprite:{diffuse:{value:new wr(16777215)},opacity:{value:1},center:{value:new Di(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Zl}}},sf={basic:{uniforms:Gc([as.common,as.specularmap,as.envmap,as.aomap,as.lightmap,as.fog]),vertexShader:Wo.meshbasic_vert,fragmentShader:Wo.meshbasic_frag},lambert:{uniforms:Gc([as.common,as.specularmap,as.envmap,as.aomap,as.lightmap,as.emissivemap,as.bumpmap,as.normalmap,as.displacementmap,as.fog,as.lights,{emissive:{value:new wr(0)}}]),vertexShader:Wo.meshlambert_vert,fragmentShader:Wo.meshlambert_frag},phong:{uniforms:Gc([as.common,as.specularmap,as.envmap,as.aomap,as.lightmap,as.emissivemap,as.bumpmap,as.normalmap,as.displacementmap,as.fog,as.lights,{emissive:{value:new wr(0)},specular:{value:new wr(1118481)},shininess:{value:30}}]),vertexShader:Wo.meshphong_vert,fragmentShader:Wo.meshphong_frag},standard:{uniforms:Gc([as.common,as.envmap,as.aomap,as.lightmap,as.emissivemap,as.bumpmap,as.normalmap,as.displacementmap,as.roughnessmap,as.metalnessmap,as.fog,as.lights,{emissive:{value:new wr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wo.meshphysical_vert,fragmentShader:Wo.meshphysical_frag},toon:{uniforms:Gc([as.common,as.aomap,as.lightmap,as.emissivemap,as.bumpmap,as.normalmap,as.displacementmap,as.gradientmap,as.fog,as.lights,{emissive:{value:new wr(0)}}]),vertexShader:Wo.meshtoon_vert,fragmentShader:Wo.meshtoon_frag},matcap:{uniforms:Gc([as.common,as.bumpmap,as.normalmap,as.displacementmap,as.fog,{matcap:{value:null}}]),vertexShader:Wo.meshmatcap_vert,fragmentShader:Wo.meshmatcap_frag},points:{uniforms:Gc([as.points,as.fog]),vertexShader:Wo.points_vert,fragmentShader:Wo.points_frag},dashed:{uniforms:Gc([as.common,as.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wo.linedashed_vert,fragmentShader:Wo.linedashed_frag},depth:{uniforms:Gc([as.common,as.displacementmap]),vertexShader:Wo.depth_vert,fragmentShader:Wo.depth_frag},normal:{uniforms:Gc([as.common,as.bumpmap,as.normalmap,as.displacementmap,{opacity:{value:1}}]),vertexShader:Wo.meshnormal_vert,fragmentShader:Wo.meshnormal_frag},sprite:{uniforms:Gc([as.sprite,as.fog]),vertexShader:Wo.sprite_vert,fragmentShader:Wo.sprite_frag},background:{uniforms:{uvTransform:{value:new Zl},t2D:{value:null}},vertexShader:Wo.background_vert,fragmentShader:Wo.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0}},vertexShader:Wo.backgroundCube_vert,fragmentShader:Wo.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wo.cube_vert,fragmentShader:Wo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wo.equirect_vert,fragmentShader:Wo.equirect_frag},distanceRGBA:{uniforms:Gc([as.common,as.displacementmap,{referencePosition:{value:new Ut},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wo.distanceRGBA_vert,fragmentShader:Wo.distanceRGBA_frag},shadow:{uniforms:Gc([as.lights,as.fog,{color:{value:new wr(0)},opacity:{value:1}}]),vertexShader:Wo.shadow_vert,fragmentShader:Wo.shadow_frag}};function Yy(v,o,c,h,f,b,S){const B=new wr(0);let ae,ge,ne=!0===b?0:1,Te=null,Se=0,Pe=null;function Ne(Fe,at){h.buffers.color.setClear(Fe.r,Fe.g,Fe.b,at,S)}return{getClearColor:function(){return B},setClearColor:function(Fe,at=1){B.set(Fe),ne=at,Ne(B,ne)},getClearAlpha:function(){return ne},setClearAlpha:function(Fe){ne=Fe,Ne(B,ne)},render:function qe(Fe,at){let _t=!1,ut=!0===at.isScene?at.background:null;ut&&ut.isTexture&&(ut=(at.backgroundBlurriness>0?c:o).get(ut));const ht=v.xr,Rt=ht.getSession&&ht.getSession();Rt&&"additive"===Rt.environmentBlendMode&&(ut=null),null===ut?Ne(B,ne):ut&&ut.isColor&&(Ne(ut,1),_t=!0),(v.autoClear||_t)&&v.clear(v.autoClearColor,v.autoClearDepth,v.autoClearStencil),ut&&(ut.isCubeTexture||ut.mapping===En)?(void 0===ge&&(ge=new Yr(new Gl(1,1,1),new ec({name:"BackgroundCubeMaterial",uniforms:$l(sf.backgroundCube.uniforms),vertexShader:sf.backgroundCube.vertexShader,fragmentShader:sf.backgroundCube.fragmentShader,side:ue,depthTest:!1,depthWrite:!1,fog:!1})),ge.geometry.deleteAttribute("normal"),ge.geometry.deleteAttribute("uv"),ge.onBeforeRender=function(Xt,xn,bt){this.matrixWorld.copyPosition(bt.matrixWorld)},Object.defineProperty(ge.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),f.update(ge)),ge.material.uniforms.envMap.value=ut,ge.material.uniforms.flipEnvMap.value=ut.isCubeTexture&&!1===ut.isRenderTargetTexture?-1:1,ge.material.uniforms.backgroundBlurriness.value=at.backgroundBlurriness,(Te!==ut||Se!==ut.version||Pe!==v.toneMapping)&&(ge.material.needsUpdate=!0,Te=ut,Se=ut.version,Pe=v.toneMapping),ge.layers.enableAll(),Fe.unshift(ge,ge.geometry,ge.material,0,0,null)):ut&&ut.isTexture&&(void 0===ae&&(ae=new Yr(new vp(2,2),new ec({name:"BackgroundMaterial",uniforms:$l(sf.background.uniforms),vertexShader:sf.background.vertexShader,fragmentShader:sf.background.fragmentShader,side:K,depthTest:!1,depthWrite:!1,fog:!1})),ae.geometry.deleteAttribute("normal"),Object.defineProperty(ae.material,"map",{get:function(){return this.uniforms.t2D.value}}),f.update(ae)),ae.material.uniforms.t2D.value=ut,!0===ut.matrixAutoUpdate&&ut.updateMatrix(),ae.material.uniforms.uvTransform.value.copy(ut.matrix),(Te!==ut||Se!==ut.version||Pe!==v.toneMapping)&&(ae.material.needsUpdate=!0,Te=ut,Se=ut.version,Pe=v.toneMapping),ae.layers.enableAll(),Fe.unshift(ae,ae.geometry,ae.material,0,0,null))}}}function Zy(v,o,c,h){const f=v.getParameter(v.MAX_VERTEX_ATTRIBS),b=h.isWebGL2?null:o.get("OES_vertex_array_object"),S=h.isWebGL2||null!==b,B={},ne=Fe(null);let ae=ne,ge=!1;function Pe(Vn){return h.isWebGL2?v.bindVertexArray(Vn):b.bindVertexArrayOES(Vn)}function qe(Vn){return h.isWebGL2?v.deleteVertexArray(Vn):b.deleteVertexArrayOES(Vn)}function Fe(Vn){const Mi=[],Oi=[],Xi=[];for(let Ai=0;Ai<f;Ai++)Mi[Ai]=0,Oi[Ai]=0,Xi[Ai]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Mi,enabledAttributes:Oi,attributeDivisors:Xi,object:Vn,attributes:{},index:null}}function ut(){const Vn=ae.newAttributes;for(let Mi=0,Oi=Vn.length;Mi<Oi;Mi++)Vn[Mi]=0}function ht(Vn){Rt(Vn,0)}function Rt(Vn,Mi){const Xi=ae.enabledAttributes,Ai=ae.attributeDivisors;ae.newAttributes[Vn]=1,0===Xi[Vn]&&(v.enableVertexAttribArray(Vn),Xi[Vn]=1),Ai[Vn]!==Mi&&((h.isWebGL2?v:o.get("ANGLE_instanced_arrays"))[h.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Vn,Mi),Ai[Vn]=Mi)}function Xt(){const Vn=ae.newAttributes,Mi=ae.enabledAttributes;for(let Oi=0,Xi=Mi.length;Oi<Xi;Oi++)Mi[Oi]!==Vn[Oi]&&(v.disableVertexAttribArray(Oi),Mi[Oi]=0)}function xn(Vn,Mi,Oi,Xi,Ai,Hn){!0!==h.isWebGL2||Oi!==v.INT&&Oi!==v.UNSIGNED_INT?v.vertexAttribPointer(Vn,Mi,Oi,Xi,Ai,Hn):v.vertexAttribIPointer(Vn,Mi,Oi,Ai,Hn)}function Pi(){hi(),ge=!0,ae!==ne&&(ae=ne,Pe(ae.object))}function hi(){ne.geometry=null,ne.program=null,ne.wireframe=!1}return{setup:function Te(Vn,Mi,Oi,Xi,Ai){let Hn=!1;if(S){const Zn=function Ne(Vn,Mi,Oi){const Xi=!0===Oi.wireframe;let Ai=B[Vn.id];void 0===Ai&&(Ai={},B[Vn.id]=Ai);let Hn=Ai[Mi.id];void 0===Hn&&(Hn={},Ai[Mi.id]=Hn);let Zn=Hn[Xi];return void 0===Zn&&(Zn=Fe(function Se(){return h.isWebGL2?v.createVertexArray():b.createVertexArrayOES()}()),Hn[Xi]=Zn),Zn}(Xi,Oi,Mi);ae!==Zn&&(ae=Zn,Pe(ae.object)),Hn=function at(Vn,Mi,Oi,Xi){const Ai=ae.attributes,Hn=Mi.attributes;let Zn=0;const _r=Oi.getAttributes();for(const ur in _r)if(_r[ur].location>=0){const As=Ai[ur];let co=Hn[ur];if(void 0===co&&("instanceMatrix"===ur&&Vn.instanceMatrix&&(co=Vn.instanceMatrix),"instanceColor"===ur&&Vn.instanceColor&&(co=Vn.instanceColor)),void 0===As||As.attribute!==co||co&&As.data!==co.data)return!0;Zn++}return ae.attributesNum!==Zn||ae.index!==Xi}(Vn,Xi,Oi,Ai),Hn&&function _t(Vn,Mi,Oi,Xi){const Ai={},Hn=Mi.attributes;let Zn=0;const _r=Oi.getAttributes();for(const ur in _r)if(_r[ur].location>=0){let As=Hn[ur];void 0===As&&("instanceMatrix"===ur&&Vn.instanceMatrix&&(As=Vn.instanceMatrix),"instanceColor"===ur&&Vn.instanceColor&&(As=Vn.instanceColor));const co={};co.attribute=As,As&&As.data&&(co.data=As.data),Ai[ur]=co,Zn++}ae.attributes=Ai,ae.attributesNum=Zn,ae.index=Xi}(Vn,Xi,Oi,Ai)}else{const Zn=!0===Mi.wireframe;(ae.geometry!==Xi.id||ae.program!==Oi.id||ae.wireframe!==Zn)&&(ae.geometry=Xi.id,ae.program=Oi.id,ae.wireframe=Zn,Hn=!0)}null!==Ai&&c.update(Ai,v.ELEMENT_ARRAY_BUFFER),(Hn||ge)&&(ge=!1,function bt(Vn,Mi,Oi,Xi){if(!1===h.isWebGL2&&(Vn.isInstancedMesh||Xi.isInstancedBufferGeometry)&&null===o.get("ANGLE_instanced_arrays"))return;ut();const Ai=Xi.attributes,Hn=Oi.getAttributes(),Zn=Mi.defaultAttributeValues;for(const _r in Hn){const ur=Hn[_r];if(ur.location>=0){let ai=Ai[_r];if(void 0===ai&&("instanceMatrix"===_r&&Vn.instanceMatrix&&(ai=Vn.instanceMatrix),"instanceColor"===_r&&Vn.instanceColor&&(ai=Vn.instanceColor)),void 0!==ai){const As=ai.normalized,co=ai.itemSize,Jn=c.get(ai);if(void 0===Jn)continue;const no=Jn.buffer,Li=Jn.type,Mr=Jn.bytesPerElement;if(ai.isInterleavedBufferAttribute){const vi=ai.data,Ji=vi.stride,di=ai.offset;if(vi.isInstancedInterleavedBuffer){for(let ri=0;ri<ur.locationSize;ri++)Rt(ur.location+ri,vi.meshPerAttribute);!0!==Vn.isInstancedMesh&&void 0===Xi._maxInstanceCount&&(Xi._maxInstanceCount=vi.meshPerAttribute*vi.count)}else for(let ri=0;ri<ur.locationSize;ri++)ht(ur.location+ri);v.bindBuffer(v.ARRAY_BUFFER,no);for(let ri=0;ri<ur.locationSize;ri++)xn(ur.location+ri,co/ur.locationSize,Li,As,Ji*Mr,(di+co/ur.locationSize*ri)*Mr)}else{if(ai.isInstancedBufferAttribute){for(let vi=0;vi<ur.locationSize;vi++)Rt(ur.location+vi,ai.meshPerAttribute);!0!==Vn.isInstancedMesh&&void 0===Xi._maxInstanceCount&&(Xi._maxInstanceCount=ai.meshPerAttribute*ai.count)}else for(let vi=0;vi<ur.locationSize;vi++)ht(ur.location+vi);v.bindBuffer(v.ARRAY_BUFFER,no);for(let vi=0;vi<ur.locationSize;vi++)xn(ur.location+vi,co/ur.locationSize,Li,As,co*Mr,co/ur.locationSize*vi*Mr)}}else if(void 0!==Zn){const As=Zn[_r];if(void 0!==As)switch(As.length){case 2:v.vertexAttrib2fv(ur.location,As);break;case 3:v.vertexAttrib3fv(ur.location,As);break;case 4:v.vertexAttrib4fv(ur.location,As);break;default:v.vertexAttrib1fv(ur.location,As)}}}}Xt()}(Vn,Mi,Oi,Xi),null!==Ai&&v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,c.get(Ai).buffer))},reset:Pi,resetDefaultState:hi,dispose:function en(){Pi();for(const Vn in B){const Mi=B[Vn];for(const Oi in Mi){const Xi=Mi[Oi];for(const Ai in Xi)qe(Xi[Ai].object),delete Xi[Ai];delete Mi[Oi]}delete B[Vn]}},releaseStatesOfGeometry:function bn(Vn){if(void 0===B[Vn.id])return;const Mi=B[Vn.id];for(const Oi in Mi){const Xi=Mi[Oi];for(const Ai in Xi)qe(Xi[Ai].object),delete Xi[Ai];delete Mi[Oi]}delete B[Vn.id]},releaseStatesOfProgram:function ui(Vn){for(const Mi in B){const Oi=B[Mi];if(void 0===Oi[Vn.id])continue;const Xi=Oi[Vn.id];for(const Ai in Xi)qe(Xi[Ai].object),delete Xi[Ai];delete Oi[Vn.id]}},initAttributes:ut,enableAttribute:ht,disableUnusedAttributes:Xt}}function A1(v,o,c,h){const f=h.isWebGL2;let b;this.setMode=function S(ae){b=ae},this.render=function B(ae,ge){v.drawArrays(b,ae,ge),c.update(ge,b,1)},this.renderInstances=function ne(ae,ge,Te){if(0===Te)return;let Se,Pe;if(f)Se=v,Pe="drawArraysInstanced";else if(Se=o.get("ANGLE_instanced_arrays"),Pe="drawArraysInstancedANGLE",null===Se)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Se[Pe](b,ae,ge,Te),c.update(ge,b,Te)}}function af(v,o,c){let h;function b(xn){if("highp"===xn){if(v.getShaderPrecisionFormat(v.VERTEX_SHADER,v.HIGH_FLOAT).precision>0&&v.getShaderPrecisionFormat(v.FRAGMENT_SHADER,v.HIGH_FLOAT).precision>0)return"highp";xn="mediump"}return"mediump"===xn&&v.getShaderPrecisionFormat(v.VERTEX_SHADER,v.MEDIUM_FLOAT).precision>0&&v.getShaderPrecisionFormat(v.FRAGMENT_SHADER,v.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const S=typeof WebGL2RenderingContext<"u"&&v instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&v instanceof WebGL2ComputeRenderingContext;let B=void 0!==c.precision?c.precision:"highp";const ne=b(B);ne!==B&&(console.warn("THREE.WebGLRenderer:",B,"not supported, using",ne,"instead."),B=ne);const ae=S||o.has("WEBGL_draw_buffers"),ge=!0===c.logarithmicDepthBuffer,Te=v.getParameter(v.MAX_TEXTURE_IMAGE_UNITS),Se=v.getParameter(v.MAX_VERTEX_TEXTURE_IMAGE_UNITS),Pe=v.getParameter(v.MAX_TEXTURE_SIZE),qe=v.getParameter(v.MAX_CUBE_MAP_TEXTURE_SIZE),Ne=v.getParameter(v.MAX_VERTEX_ATTRIBS),Fe=v.getParameter(v.MAX_VERTEX_UNIFORM_VECTORS),at=v.getParameter(v.MAX_VARYING_VECTORS),_t=v.getParameter(v.MAX_FRAGMENT_UNIFORM_VECTORS),ut=Se>0,ht=S||o.has("OES_texture_float");return{isWebGL2:S,drawBuffers:ae,getMaxAnisotropy:function f(){if(void 0!==h)return h;if(!0===o.has("EXT_texture_filter_anisotropic")){const xn=o.get("EXT_texture_filter_anisotropic");h=v.getParameter(xn.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else h=0;return h},getMaxPrecision:b,precision:B,logarithmicDepthBuffer:ge,maxTextures:Te,maxVertexTextures:Se,maxTextureSize:Pe,maxCubemapSize:qe,maxAttributes:Ne,maxVertexUniforms:Fe,maxVaryings:at,maxFragmentUniforms:_t,vertexTextures:ut,floatFragmentTextures:ht,floatVertexTextures:ut&&ht,maxSamples:S?v.getParameter(v.MAX_SAMPLES):0}}function fm(v){const o=this;let c=null,h=0,f=!1,b=!1;const S=new Jl,B=new Zl,ne={value:null,needsUpdate:!1};function ae(){ne.value!==c&&(ne.value=c,ne.needsUpdate=h>0),o.numPlanes=h,o.numIntersection=0}function ge(Te,Se,Pe,qe){const Ne=null!==Te?Te.length:0;let Fe=null;if(0!==Ne){if(Fe=ne.value,!0!==qe||null===Fe){const at=Pe+4*Ne,_t=Se.matrixWorldInverse;B.getNormalMatrix(_t),(null===Fe||Fe.length<at)&&(Fe=new Float32Array(at));for(let ut=0,ht=Pe;ut!==Ne;++ut,ht+=4)S.copy(Te[ut]).applyMatrix4(_t,B),S.normal.toArray(Fe,ht),Fe[ht+3]=S.constant}ne.value=Fe,ne.needsUpdate=!0}return o.numPlanes=Ne,o.numIntersection=0,Fe}this.uniform=ne,this.numPlanes=0,this.numIntersection=0,this.init=function(Te,Se,Pe){const qe=0!==Te.length||Se||0!==h||f;return f=Se,c=ge(Te,Pe,0),h=Te.length,qe},this.beginShadows=function(){b=!0,ge(null)},this.endShadows=function(){b=!1,ae()},this.setState=function(Te,Se,Pe){const qe=Te.clippingPlanes,Ne=Te.clipIntersection,Fe=Te.clipShadows,at=v.get(Te);if(!f||null===qe||0===qe.length||b&&!Fe)b?ge(null):ae();else{const _t=b?0:h,ut=4*_t;let ht=at.clippingState||null;ne.value=ht,ht=ge(qe,Se,ut,Pe);for(let Rt=0;Rt!==ut;++Rt)ht[Rt]=c[Rt];at.clippingState=ht,this.numIntersection=Ne?this.numPlanes:0,this.numPlanes+=_t}}}sf.physical={uniforms:Gc([sf.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Di(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new wr(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Di},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new wr(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new wr(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Wo.meshphysical_vert,fragmentShader:Wo.meshphysical_frag};class pm extends Va{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new so,this.projectionMatrix=new so,this.projectionMatrixInverse=new so}copy(o,c){return super.copy(o,c),this.matrixWorldInverse.copy(o.matrixWorldInverse),this.projectionMatrix.copy(o.projectionMatrix),this.projectionMatrixInverse.copy(o.projectionMatrixInverse),this}getWorldDirection(o){this.updateWorldMatrix(!0,!1);const c=this.matrixWorld.elements;return o.set(-c[8],-c[9],-c[10]).normalize()}updateMatrixWorld(o){super.updateMatrixWorld(o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(o,c){super.updateWorldMatrix(o,c),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class dc extends pm{constructor(o=50,c=1,h=.1,f=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=o,this.zoom=1,this.near=h,this.far=f,this.focus=10,this.aspect=c,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(o,c){return super.copy(o,c),this.fov=o.fov,this.zoom=o.zoom,this.near=o.near,this.far=o.far,this.focus=o.focus,this.aspect=o.aspect,this.view=null===o.view?null:Object.assign({},o.view),this.filmGauge=o.filmGauge,this.filmOffset=o.filmOffset,this}setFocalLength(o){const c=.5*this.getFilmHeight()/o;this.fov=2*tA*Math.atan(c),this.updateProjectionMatrix()}getFocalLength(){const o=Math.tan(.5*qd*this.fov);return.5*this.getFilmHeight()/o}getEffectiveFOV(){return 2*tA*Math.atan(Math.tan(.5*qd*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(o,c,h,f,b,S){this.aspect=o/c,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=c,this.view.offsetX=h,this.view.offsetY=f,this.view.width=b,this.view.height=S,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const o=this.near;let c=o*Math.tan(.5*qd*this.fov)/this.zoom,h=2*c,f=this.aspect*h,b=-.5*f;const S=this.view;if(null!==this.view&&this.view.enabled){const ne=S.fullWidth,ae=S.fullHeight;b+=S.offsetX*f/ne,c-=S.offsetY*h/ae,f*=S.width/ne,h*=S.height/ae}const B=this.filmOffset;0!==B&&(b+=o*B/this.getFilmWidth()),this.projectionMatrix.makePerspective(b,b+f,c,c-h,o,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(o){const c=super.toJSON(o);return c.object.fov=this.fov,c.object.zoom=this.zoom,c.object.near=this.near,c.object.far=this.far,c.object.focus=this.focus,c.object.aspect=this.aspect,null!==this.view&&(c.object.view=Object.assign({},this.view)),c.object.filmGauge=this.filmGauge,c.object.filmOffset=this.filmOffset,c}}class vg extends Va{constructor(o,c,h){super(),this.type="CubeCamera",this.renderTarget=h;const f=new dc(90,1,o,c);f.layers=this.layers,f.up.set(0,-1,0),f.lookAt(new Ut(1,0,0)),this.add(f);const b=new dc(90,1,o,c);b.layers=this.layers,b.up.set(0,-1,0),b.lookAt(new Ut(-1,0,0)),this.add(b);const S=new dc(90,1,o,c);S.layers=this.layers,S.up.set(0,0,1),S.lookAt(new Ut(0,1,0)),this.add(S);const B=new dc(90,1,o,c);B.layers=this.layers,B.up.set(0,0,-1),B.lookAt(new Ut(0,-1,0)),this.add(B);const ne=new dc(90,1,o,c);ne.layers=this.layers,ne.up.set(0,-1,0),ne.lookAt(new Ut(0,0,1)),this.add(ne);const ae=new dc(90,1,o,c);ae.layers=this.layers,ae.up.set(0,-1,0),ae.lookAt(new Ut(0,0,-1)),this.add(ae)}update(o,c){null===this.parent&&this.updateMatrixWorld();const h=this.renderTarget,[f,b,S,B,ne,ae]=this.children,ge=o.getRenderTarget(),Te=o.toneMapping,Se=o.xr.enabled;o.toneMapping=ct,o.xr.enabled=!1;const Pe=h.texture.generateMipmaps;h.texture.generateMipmaps=!1,o.setRenderTarget(h,0),o.render(c,f),o.setRenderTarget(h,1),o.render(c,b),o.setRenderTarget(h,2),o.render(c,S),o.setRenderTarget(h,3),o.render(c,B),o.setRenderTarget(h,4),o.render(c,ne),h.texture.generateMipmaps=Pe,o.setRenderTarget(h,5),o.render(c,ae),o.setRenderTarget(ge),o.toneMapping=Te,o.xr.enabled=Se,h.texture.needsPMREMUpdate=!0}}class wA extends Ws{constructor(o,c,h,f,b,S,B,ne,ae,ge){super(o=void 0!==o?o:[],c=void 0!==c?c:Ot,h,f,b,S,B,ne,ae,ge),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(o){this.image=o}}class Jy extends Lo{constructor(o=1,c={}){super(o,o,c),this.isWebGLCubeRenderTarget=!0;const h={width:o,height:o,depth:1};this.texture=new wA([h,h,h,h,h,h],c.mapping,c.wrapS,c.wrapT,c.magFilter,c.minFilter,c.format,c.type,c.anisotropy,c.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==c.generateMipmaps&&c.generateMipmaps,this.texture.minFilter=void 0!==c.minFilter?c.minFilter:ci}fromEquirectangularTexture(o,c){this.texture.type=c.type,this.texture.encoding=c.encoding,this.texture.generateMipmaps=c.generateMipmaps,this.texture.minFilter=c.minFilter,this.texture.magFilter=c.magFilter;const h_uniforms={tEquirect:{value:null}},h_vertexShader="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",h_fragmentShader="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",f=new Gl(5,5,5),b=new ec({name:"CubemapFromEquirect",uniforms:$l(h_uniforms),vertexShader:h_vertexShader,fragmentShader:h_fragmentShader,side:ue,blending:Z});b.uniforms.tEquirect.value=c;const S=new Yr(f,b),B=c.minFilter;return c.minFilter===br&&(c.minFilter=ci),new vg(1,10,this).update(o,S),c.minFilter=B,S.geometry.dispose(),S.material.dispose(),this}clear(o,c,h,f){const b=o.getRenderTarget();for(let S=0;S<6;S++)o.setRenderTarget(this,S),o.clear(c,h,f);o.setRenderTarget(b)}}function ev(v){let o=new WeakMap;function c(S,B){return B===wn?S.mapping=Ot:B===Ln&&(S.mapping=sn),S}function f(S){const B=S.target;B.removeEventListener("dispose",f);const ne=o.get(B);void 0!==ne&&(o.delete(B),ne.dispose())}return{get:function h(S){if(S&&S.isTexture&&!1===S.isRenderTargetTexture){const B=S.mapping;if(B===wn||B===Ln){if(o.has(S))return c(o.get(S).texture,S.mapping);{const ne=S.image;if(ne&&ne.height>0){const ae=new Jy(ne.height/2);return ae.fromEquirectangularTexture(v,S),o.set(S,ae),S.addEventListener("dispose",f),c(ae.texture,S.mapping)}return null}}}return S},dispose:function b(){o=new WeakMap}}}class jf extends pm{constructor(o=-1,c=1,h=1,f=-1,b=.1,S=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=o,this.right=c,this.top=h,this.bottom=f,this.near=b,this.far=S,this.updateProjectionMatrix()}copy(o,c){return super.copy(o,c),this.left=o.left,this.right=o.right,this.top=o.top,this.bottom=o.bottom,this.near=o.near,this.far=o.far,this.zoom=o.zoom,this.view=null===o.view?null:Object.assign({},o.view),this}setViewOffset(o,c,h,f,b,S){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=c,this.view.offsetX=h,this.view.offsetY=f,this.view.width=b,this.view.height=S,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const o=(this.right-this.left)/(2*this.zoom),c=(this.top-this.bottom)/(2*this.zoom),h=(this.right+this.left)/2,f=(this.top+this.bottom)/2;let b=h-o,S=h+o,B=f+c,ne=f-c;if(null!==this.view&&this.view.enabled){const ae=(this.right-this.left)/this.view.fullWidth/this.zoom,ge=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=ae*this.view.offsetX,S=b+ae*this.view.width,B-=ge*this.view.offsetY,ne=B-ge*this.view.height}this.projectionMatrix.makeOrthographic(b,S,B,ne,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(o){const c=super.toJSON(o);return c.object.zoom=this.zoom,c.object.left=this.left,c.object.right=this.right,c.object.top=this.top,c.object.bottom=this.bottom,c.object.near=this.near,c.object.far=this.far,null!==this.view&&(c.object.view=Object.assign({},this.view)),c}}const tv=[.125,.215,.35,.446,.526,.582],bg=new jf,xg=new wr;let W0=null;const nc=(1+Math.sqrt(5))/2,rd=1/nc,Dh=[new Ut(1,1,1),new Ut(-1,1,1),new Ut(1,1,-1),new Ut(-1,1,-1),new Ut(0,nc,rd),new Ut(0,nc,-rd),new Ut(rd,0,nc),new Ut(-rd,0,nc),new Ut(nc,rd,0),new Ut(-nc,rd,0)];class wg{constructor(o){this._renderer=o,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(o,c=0,h=.1,f=100){W0=this._renderer.getRenderTarget(),this._setSize(256);const b=this._allocateTargets();return b.depthBuffer=!0,this._sceneToCubeUV(o,h,f,b),c>0&&this._blur(b,0,0,c),this._applyPMREM(b),this._cleanup(b),b}fromEquirectangular(o,c=null){return this._fromTexture(o,c)}fromCubemap(o,c=null){return this._fromTexture(o,c)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=ya(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=m1(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(o){this._lodMax=Math.floor(Math.log2(o)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let o=0;o<this._lodPlanes.length;o++)this._lodPlanes[o].dispose()}_cleanup(o){this._renderer.setRenderTarget(W0),o.scissorTest=!1,lf(o,0,0,o.width,o.height)}_fromTexture(o,c){this._setSize(o.mapping===Ot||o.mapping===sn?0===o.image.length?16:o.image[0].width||o.image[0].image.width:o.image.width/4),W0=this._renderer.getRenderTarget();const h=c||this._allocateTargets();return this._textureToCubeUV(o,h),this._applyPMREM(h),this._cleanup(h),h}_allocateTargets(){const o=3*Math.max(this._cubeSize,112),c=4*this._cubeSize,h={magFilter:ci,minFilter:ci,generateMipmaps:!1,type:Es,format:xr,encoding:Qa,depthBuffer:!1},f=sd(o,c,h);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==o){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=sd(o,c,h);const{_lodMax:b}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function qr(v){const o=[],c=[],h=[];let f=v;const b=v-4+1+tv.length;for(let S=0;S<b;S++){const B=Math.pow(2,f);c.push(B);let ne=1/B;S>v-4?ne=tv[S-v+4-1]:0===S&&(ne=0),h.push(ne);const ae=1/(B-2),ge=-ae,Te=1+ae,Se=[ge,ge,Te,ge,Te,Te,ge,ge,Te,Te,ge,Te],Pe=6,qe=6,Ne=3,Fe=2,at=1,_t=new Float32Array(Ne*qe*Pe),ut=new Float32Array(Fe*qe*Pe),ht=new Float32Array(at*qe*Pe);for(let Xt=0;Xt<Pe;Xt++){const xn=Xt%3*2/3-1,bt=Xt>2?0:-1;_t.set([xn,bt,0,xn+2/3,bt,0,xn+2/3,bt+1,0,xn,bt,0,xn+2/3,bt+1,0,xn,bt+1,0],Ne*qe*Xt),ut.set(Se,Fe*qe*Xt),ht.set([Xt,Xt,Xt,Xt,Xt,Xt],at*qe*Xt)}const Rt=new So;Rt.setAttribute("position",new Bc(_t,Ne)),Rt.setAttribute("uv",new Bc(ut,Fe)),Rt.setAttribute("faceIndex",new Bc(ht,at)),o.push(Rt),f>4&&f--}return{lodPlanes:o,sizeLods:c,sigmas:h}}(b)),this._blurMaterial=function Bh(v,o,c){const h=new Float32Array(20),f=new Ut(0,1,0);return new ec({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/o,CUBEUV_TEXEL_HEIGHT:1/c,CUBEUV_MAX_MIP:`${v}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:h},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:f}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Z,depthTest:!1,depthWrite:!1})}(b,o,c)}return f}_compileMaterial(o){const c=new Yr(this._lodPlanes[0],o);this._renderer.compile(c,bg)}_sceneToCubeUV(o,c,h,f){const B=new dc(90,1,c,h),ne=[1,-1,1,1,1,1],ae=[1,1,1,-1,-1,-1],ge=this._renderer,Te=ge.autoClear,Se=ge.toneMapping;ge.getClearColor(xg),ge.toneMapping=ct,ge.autoClear=!1;const Pe=new Ou({name:"PMREM.Background",side:ue,depthWrite:!1,depthTest:!1}),qe=new Yr(new Gl,Pe);let Ne=!1;const Fe=o.background;Fe?Fe.isColor&&(Pe.color.copy(Fe),o.background=null,Ne=!0):(Pe.color.copy(xg),Ne=!0);for(let at=0;at<6;at++){const _t=at%3;0===_t?(B.up.set(0,ne[at],0),B.lookAt(ae[at],0,0)):1===_t?(B.up.set(0,0,ne[at]),B.lookAt(0,ae[at],0)):(B.up.set(0,ne[at],0),B.lookAt(0,0,ae[at]));const ut=this._cubeSize;lf(f,_t*ut,at>2?ut:0,ut,ut),ge.setRenderTarget(f),Ne&&ge.render(qe,B),ge.render(o,B)}qe.geometry.dispose(),qe.material.dispose(),ge.toneMapping=Se,ge.autoClear=Te,o.background=Fe}_textureToCubeUV(o,c){const h=this._renderer,f=o.mapping===Ot||o.mapping===sn;f?(null===this._cubemapMaterial&&(this._cubemapMaterial=ya()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===o.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=m1());const b=f?this._cubemapMaterial:this._equirectMaterial,S=new Yr(this._lodPlanes[0],b);b.uniforms.envMap.value=o;const ne=this._cubeSize;lf(c,0,0,3*ne,2*ne),h.setRenderTarget(c),h.render(S,bg)}_applyPMREM(o){const c=this._renderer,h=c.autoClear;c.autoClear=!1;for(let f=1;f<this._lodPlanes.length;f++){const b=Math.sqrt(this._sigmas[f]*this._sigmas[f]-this._sigmas[f-1]*this._sigmas[f-1]);this._blur(o,f-1,f,b,Dh[(f-1)%Dh.length])}c.autoClear=h}_blur(o,c,h,f,b){const S=this._pingPongRenderTarget;this._halfBlur(o,S,c,h,f,"latitudinal",b),this._halfBlur(S,o,h,h,f,"longitudinal",b)}_halfBlur(o,c,h,f,b,S,B){const ne=this._renderer,ae=this._blurMaterial;"latitudinal"!==S&&"longitudinal"!==S&&console.error("blur direction must be either latitudinal or longitudinal!");const Te=new Yr(this._lodPlanes[f],ae),Se=ae.uniforms,Pe=this._sizeLods[h]-1,qe=isFinite(b)?Math.PI/(2*Pe):2*Math.PI/39,Ne=b/qe,Fe=isFinite(b)?1+Math.floor(3*Ne):20;Fe>20&&console.warn(`sigmaRadians, ${b}, is too large and will clip, as it requested ${Fe} samples when the maximum is set to 20`);const at=[];let _t=0;for(let xn=0;xn<20;++xn){const bt=xn/Ne,en=Math.exp(-bt*bt/2);at.push(en),0===xn?_t+=en:xn<Fe&&(_t+=2*en)}for(let xn=0;xn<at.length;xn++)at[xn]=at[xn]/_t;Se.envMap.value=o.texture,Se.samples.value=Fe,Se.weights.value=at,Se.latitudinal.value="latitudinal"===S,B&&(Se.poleAxis.value=B);const{_lodMax:ut}=this;Se.dTheta.value=qe,Se.mipInt.value=ut-h;const ht=this._sizeLods[f];lf(c,3*ht*(f>ut-4?f-ut+4:0),4*(this._cubeSize-ht),3*ht,2*ht),ne.setRenderTarget(c),ne.render(Te,bg)}}function sd(v,o,c){const h=new Lo(v,o,c);return h.texture.mapping=En,h.texture.name="PMREM.cubeUv",h.scissorTest=!0,h}function lf(v,o,c,h,f){v.viewport.set(o,c,h,f),v.scissor.set(o,c,h,f)}function m1(){return new ec({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Z,depthTest:!1,depthWrite:!1})}function ya(){return new ec({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Z,depthTest:!1,depthWrite:!1})}function Am(v){let o=new WeakMap,c=null;function b(B){const ne=B.target;ne.removeEventListener("dispose",b);const ae=o.get(ne);void 0!==ae&&(o.delete(ne),ae.dispose())}return{get:function h(B){if(B&&B.isTexture){const ne=B.mapping,ae=ne===wn||ne===Ln,ge=ne===Ot||ne===sn;if(ae||ge){if(B.isRenderTargetTexture&&!0===B.needsPMREMUpdate){B.needsPMREMUpdate=!1;let Te=o.get(B);return null===c&&(c=new wg(v)),Te=ae?c.fromEquirectangular(B,Te):c.fromCubemap(B,Te),o.set(B,Te),Te.texture}if(o.has(B))return o.get(B).texture;{const Te=B.image;if(ae&&Te&&Te.height>0||ge&&Te&&function f(B){let ne=0;for(let ge=0;ge<6;ge++)void 0!==B[ge]&&ne++;return 6===ne}(Te)){null===c&&(c=new wg(v));const Se=ae?c.fromEquirectangular(B):c.fromCubemap(B);return o.set(B,Se),B.addEventListener("dispose",b),Se.texture}return null}}}return B},dispose:function S(){o=new WeakMap,null!==c&&(c.dispose(),c=null)}}}function nv(v){const o={};function c(h){if(void 0!==o[h])return o[h];let f;switch(h){case"WEBGL_depth_texture":f=v.getExtension("WEBGL_depth_texture")||v.getExtension("MOZ_WEBGL_depth_texture")||v.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":f=v.getExtension("EXT_texture_filter_anisotropic")||v.getExtension("MOZ_EXT_texture_filter_anisotropic")||v.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":f=v.getExtension("WEBGL_compressed_texture_s3tc")||v.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":f=v.getExtension("WEBGL_compressed_texture_pvrtc")||v.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:f=v.getExtension(h)}return o[h]=f,f}return{has:function(h){return null!==c(h)},init:function(h){h.isWebGL2?c("EXT_color_buffer_float"):(c("WEBGL_depth_texture"),c("OES_texture_float"),c("OES_texture_half_float"),c("OES_texture_half_float_linear"),c("OES_standard_derivatives"),c("OES_element_index_uint"),c("OES_vertex_array_object"),c("ANGLE_instanced_arrays")),c("OES_texture_float_linear"),c("EXT_color_buffer_half_float"),c("WEBGL_multisampled_render_to_texture")},get:function(h){const f=c(h);return null===f&&console.warn("THREE.WebGLRenderer: "+h+" extension not supported."),f}}}function CA(v,o,c,h){const f={},b=new WeakMap;function S(Te){const Se=Te.target;null!==Se.index&&o.remove(Se.index);for(const qe in Se.attributes)o.remove(Se.attributes[qe]);Se.removeEventListener("dispose",S),delete f[Se.id];const Pe=b.get(Se);Pe&&(o.remove(Pe),b.delete(Se)),h.releaseStatesOfGeometry(Se),!0===Se.isInstancedBufferGeometry&&delete Se._maxInstanceCount,c.memory.geometries--}function ae(Te){const Se=[],Pe=Te.index,qe=Te.attributes.position;let Ne=0;if(null!==Pe){const _t=Pe.array;Ne=Pe.version;for(let ut=0,ht=_t.length;ut<ht;ut+=3){const Rt=_t[ut+0],Xt=_t[ut+1],xn=_t[ut+2];Se.push(Rt,Xt,Xt,xn,xn,Rt)}}else{Ne=qe.version;for(let ut=0,ht=qe.array.length/3-1;ut<ht;ut+=3){const Rt=ut+0,Xt=ut+1,xn=ut+2;Se.push(Rt,Xt,Xt,xn,xn,Rt)}}const Fe=new(g0(Se)?Xm:K_)(Se,1);Fe.version=Ne;const at=b.get(Te);at&&o.remove(at),b.set(Te,Fe)}return{get:function B(Te,Se){return!0===f[Se.id]||(Se.addEventListener("dispose",S),f[Se.id]=!0,c.memory.geometries++),Se},update:function ne(Te){const Se=Te.attributes;for(const qe in Se)o.update(Se[qe],v.ARRAY_BUFFER);const Pe=Te.morphAttributes;for(const qe in Pe){const Ne=Pe[qe];for(let Fe=0,at=Ne.length;Fe<at;Fe++)o.update(Ne[Fe],v.ARRAY_BUFFER)}},getWireframeAttribute:function ge(Te){const Se=b.get(Te);if(Se){const Pe=Te.index;null!==Pe&&Se.version<Pe.version&&ae(Te)}else ae(Te);return b.get(Te)}}}function Wb(v,o,c,h){const f=h.isWebGL2;let b,B,ne;this.setMode=function S(Se){b=Se},this.setIndex=function ae(Se){B=Se.type,ne=Se.bytesPerElement},this.render=function ge(Se,Pe){v.drawElements(b,Pe,B,Se*ne),c.update(Pe,b,1)},this.renderInstances=function Te(Se,Pe,qe){if(0===qe)return;let Ne,Fe;if(f)Ne=v,Fe="drawElementsInstanced";else if(Ne=o.get("ANGLE_instanced_arrays"),Fe="drawElementsInstancedANGLE",null===Ne)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");Ne[Fe](b,Pe,B,Se*ne,qe),c.update(Pe,b,qe)}}function od(v){const c={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:c,programs:null,autoReset:!0,reset:function f(){c.frame++,c.calls=0,c.triangles=0,c.points=0,c.lines=0},update:function h(b,S,B){switch(c.calls++,S){case v.TRIANGLES:c.triangles+=B*(b/3);break;case v.LINES:c.lines+=B*(b/2);break;case v.LINE_STRIP:c.lines+=B*(b-1);break;case v.LINE_LOOP:c.lines+=B*b;break;case v.POINTS:c.points+=B*b;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",S)}}}}class mm extends Ws{constructor(o=null,c=1,h=1,f=1){super(null),this.isDataArrayTexture=!0,this.image={data:o,width:c,height:h,depth:f},this.magFilter=Gt,this.minFilter=Gt,this.wrapR=vn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}function kc(v,o){return v[0]-o[0]}function $f(v,o){return Math.abs(o[1])-Math.abs(v[1])}function gm(v,o,c){const h={},f=new Float32Array(8),b=new WeakMap,S=new js,B=[];for(let ae=0;ae<8;ae++)B[ae]=[ae,0];return{update:function ne(ae,ge,Te,Se){const Pe=ae.morphTargetInfluences;if(!0===o.isWebGL2){const qe=ge.morphAttributes.position||ge.morphAttributes.normal||ge.morphAttributes.color,Ne=void 0!==qe?qe.length:0;let Fe=b.get(ge);if(void 0===Fe||Fe.count!==Ne){let Mi=function(){hi.dispose(),b.delete(ge),ge.removeEventListener("dispose",Mi)};void 0!==Fe&&Fe.texture.dispose();const ut=void 0!==ge.morphAttributes.position,ht=void 0!==ge.morphAttributes.normal,Rt=void 0!==ge.morphAttributes.color,Xt=ge.morphAttributes.position||[],xn=ge.morphAttributes.normal||[],bt=ge.morphAttributes.color||[];let en=0;!0===ut&&(en=1),!0===ht&&(en=2),!0===Rt&&(en=3);let bn=ge.attributes.position.count*en,ui=1;bn>o.maxTextureSize&&(ui=Math.ceil(bn/o.maxTextureSize),bn=o.maxTextureSize);const Pi=new Float32Array(bn*ui*4*Ne),hi=new mm(Pi,bn,ui,Ne);hi.type=ws,hi.needsUpdate=!0;const Vn=4*en;for(let Oi=0;Oi<Ne;Oi++){const Xi=Xt[Oi],Ai=xn[Oi],Hn=bt[Oi],Zn=bn*ui*4*Oi;for(let _r=0;_r<Xi.count;_r++){const ur=_r*Vn;!0===ut&&(S.fromBufferAttribute(Xi,_r),Pi[Zn+ur+0]=S.x,Pi[Zn+ur+1]=S.y,Pi[Zn+ur+2]=S.z,Pi[Zn+ur+3]=0),!0===ht&&(S.fromBufferAttribute(Ai,_r),Pi[Zn+ur+4]=S.x,Pi[Zn+ur+5]=S.y,Pi[Zn+ur+6]=S.z,Pi[Zn+ur+7]=0),!0===Rt&&(S.fromBufferAttribute(Hn,_r),Pi[Zn+ur+8]=S.x,Pi[Zn+ur+9]=S.y,Pi[Zn+ur+10]=S.z,Pi[Zn+ur+11]=4===Hn.itemSize?S.w:1)}}Fe={count:Ne,texture:hi,size:new Di(bn,ui)},b.set(ge,Fe),ge.addEventListener("dispose",Mi)}let at=0;for(let ut=0;ut<Pe.length;ut++)at+=Pe[ut];const _t=ge.morphTargetsRelative?1:1-at;Se.getUniforms().setValue(v,"morphTargetBaseInfluence",_t),Se.getUniforms().setValue(v,"morphTargetInfluences",Pe),Se.getUniforms().setValue(v,"morphTargetsTexture",Fe.texture,c),Se.getUniforms().setValue(v,"morphTargetsTextureSize",Fe.size)}else{const qe=void 0===Pe?0:Pe.length;let Ne=h[ge.id];if(void 0===Ne||Ne.length!==qe){Ne=[];for(let ht=0;ht<qe;ht++)Ne[ht]=[ht,0];h[ge.id]=Ne}for(let ht=0;ht<qe;ht++){const Rt=Ne[ht];Rt[0]=ht,Rt[1]=Pe[ht]}Ne.sort($f);for(let ht=0;ht<8;ht++)ht<qe&&Ne[ht][1]?(B[ht][0]=Ne[ht][0],B[ht][1]=Ne[ht][1]):(B[ht][0]=Number.MAX_SAFE_INTEGER,B[ht][1]=0);B.sort(kc);const Fe=ge.morphAttributes.position,at=ge.morphAttributes.normal;let _t=0;for(let ht=0;ht<8;ht++){const Rt=B[ht],Xt=Rt[0],xn=Rt[1];Xt!==Number.MAX_SAFE_INTEGER&&xn?(Fe&&ge.getAttribute("morphTarget"+ht)!==Fe[Xt]&&ge.setAttribute("morphTarget"+ht,Fe[Xt]),at&&ge.getAttribute("morphNormal"+ht)!==at[Xt]&&ge.setAttribute("morphNormal"+ht,at[Xt]),f[ht]=xn,_t+=xn):(Fe&&!0===ge.hasAttribute("morphTarget"+ht)&&ge.deleteAttribute("morphTarget"+ht),at&&!0===ge.hasAttribute("morphNormal"+ht)&&ge.deleteAttribute("morphNormal"+ht),f[ht]=0)}const ut=ge.morphTargetsRelative?1:1-_t;Se.getUniforms().setValue(v,"morphTargetBaseInfluence",ut),Se.getUniforms().setValue(v,"morphTargetInfluences",f)}}}}function Mg(v,o,c,h){let f=new WeakMap;function B(ne){const ae=ne.target;ae.removeEventListener("dispose",B),c.remove(ae.instanceMatrix),null!==ae.instanceColor&&c.remove(ae.instanceColor)}return{update:function b(ne){const ae=h.render.frame,Te=o.get(ne,ne.geometry);return f.get(Te)!==ae&&(o.update(Te),f.set(Te,ae)),ne.isInstancedMesh&&(!1===ne.hasEventListener("dispose",B)&&ne.addEventListener("dispose",B),c.update(ne.instanceMatrix,v.ARRAY_BUFFER),null!==ne.instanceColor&&c.update(ne.instanceColor,v.ARRAY_BUFFER)),Te},dispose:function S(){f=new WeakMap}}}class Pd extends Ws{constructor(o=null,c=1,h=1,f=1){super(null),this.isData3DTexture=!0,this.image={data:o,width:c,height:h,depth:f},this.magFilter=Gt,this.minFilter=Gt,this.wrapR=vn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Fd=new Ws,Oc=new mm,cf=new Pd,ad=new wA,Cg=[],Sg=[],j0=new Float32Array(16),Tg=new Float32Array(9),g1=new Float32Array(4);function uf(v,o,c){const h=v[0];if(h<=0||h>0)return v;const f=o*c;let b=Cg[f];if(void 0===b&&(b=new Float32Array(f),Cg[f]=b),0!==o){h.toArray(b,0);for(let S=1,B=0;S!==o;++S)B+=c,v[S].toArray(b,B)}return b}function rl(v,o){if(v.length!==o.length)return!1;for(let c=0,h=v.length;c<h;c++)if(v[c]!==o[c])return!1;return!0}function fc(v,o){for(let c=0,h=o.length;c<h;c++)v[c]=o[c]}function Dp(v,o){let c=Sg[o];void 0===c&&(c=new Int32Array(o),Sg[o]=c);for(let h=0;h!==o;++h)c[h]=v.allocateTextureUnit();return c}function Eg(v,o){const c=this.cache;c[0]!==o&&(v.uniform1f(this.addr,o),c[0]=o)}function _1(v,o){const c=this.cache;if(void 0!==o.x)(c[0]!==o.x||c[1]!==o.y)&&(v.uniform2f(this.addr,o.x,o.y),c[0]=o.x,c[1]=o.y);else{if(rl(c,o))return;v.uniform2fv(this.addr,o),fc(c,o)}}function Rd(v,o){const c=this.cache;if(void 0!==o.x)(c[0]!==o.x||c[1]!==o.y||c[2]!==o.z)&&(v.uniform3f(this.addr,o.x,o.y,o.z),c[0]=o.x,c[1]=o.y,c[2]=o.z);else if(void 0!==o.r)(c[0]!==o.r||c[1]!==o.g||c[2]!==o.b)&&(v.uniform3f(this.addr,o.r,o.g,o.b),c[0]=o.r,c[1]=o.g,c[2]=o.b);else{if(rl(c,o))return;v.uniform3fv(this.addr,o),fc(c,o)}}function ld(v,o){const c=this.cache;if(void 0!==o.x)(c[0]!==o.x||c[1]!==o.y||c[2]!==o.z||c[3]!==o.w)&&(v.uniform4f(this.addr,o.x,o.y,o.z,o.w),c[0]=o.x,c[1]=o.y,c[2]=o.z,c[3]=o.w);else{if(rl(c,o))return;v.uniform4fv(this.addr,o),fc(c,o)}}function kd(v,o){const c=this.cache,h=o.elements;if(void 0===h){if(rl(c,o))return;v.uniformMatrix2fv(this.addr,!1,o),fc(c,o)}else{if(rl(c,h))return;g1.set(h),v.uniformMatrix2fv(this.addr,!1,g1),fc(c,h)}}function y1(v,o){const c=this.cache,h=o.elements;if(void 0===h){if(rl(c,o))return;v.uniformMatrix3fv(this.addr,!1,o),fc(c,o)}else{if(rl(c,h))return;Tg.set(h),v.uniformMatrix3fv(this.addr,!1,Tg),fc(c,h)}}function hf(v,o){const c=this.cache,h=o.elements;if(void 0===h){if(rl(c,o))return;v.uniformMatrix4fv(this.addr,!1,o),fc(c,o)}else{if(rl(c,h))return;j0.set(h),v.uniformMatrix4fv(this.addr,!1,j0),fc(c,h)}}function SA(v,o){const c=this.cache;c[0]!==o&&(v.uniform1i(this.addr,o),c[0]=o)}function _m(v,o){const c=this.cache;if(void 0!==o.x)(c[0]!==o.x||c[1]!==o.y)&&(v.uniform2i(this.addr,o.x,o.y),c[0]=o.x,c[1]=o.y);else{if(rl(c,o))return;v.uniform2iv(this.addr,o),fc(c,o)}}function Nu(v,o){const c=this.cache;if(void 0!==o.x)(c[0]!==o.x||c[1]!==o.y||c[2]!==o.z)&&(v.uniform3i(this.addr,o.x,o.y,o.z),c[0]=o.x,c[1]=o.y,c[2]=o.z);else{if(rl(c,o))return;v.uniform3iv(this.addr,o),fc(c,o)}}function ym(v,o){const c=this.cache;if(void 0!==o.x)(c[0]!==o.x||c[1]!==o.y||c[2]!==o.z||c[3]!==o.w)&&(v.uniform4i(this.addr,o.x,o.y,o.z,o.w),c[0]=o.x,c[1]=o.y,c[2]=o.z,c[3]=o.w);else{if(rl(c,o))return;v.uniform4iv(this.addr,o),fc(c,o)}}function Bp(v,o){const c=this.cache;c[0]!==o&&(v.uniform1ui(this.addr,o),c[0]=o)}function v1(v,o){const c=this.cache;if(void 0!==o.x)(c[0]!==o.x||c[1]!==o.y)&&(v.uniform2ui(this.addr,o.x,o.y),c[0]=o.x,c[1]=o.y);else{if(rl(c,o))return;v.uniform2uiv(this.addr,o),fc(c,o)}}function b1(v,o){const c=this.cache;if(void 0!==o.x)(c[0]!==o.x||c[1]!==o.y||c[2]!==o.z)&&(v.uniform3ui(this.addr,o.x,o.y,o.z),c[0]=o.x,c[1]=o.y,c[2]=o.z);else{if(rl(c,o))return;v.uniform3uiv(this.addr,o),fc(c,o)}}function Dg(v,o){const c=this.cache;if(void 0!==o.x)(c[0]!==o.x||c[1]!==o.y||c[2]!==o.z||c[3]!==o.w)&&(v.uniform4ui(this.addr,o.x,o.y,o.z,o.w),c[0]=o.x,c[1]=o.y,c[2]=o.z,c[3]=o.w);else{if(rl(c,o))return;v.uniform4uiv(this.addr,o),fc(c,o)}}function Bg(v,o,c){const h=this.cache,f=c.allocateTextureUnit();h[0]!==f&&(v.uniform1i(this.addr,f),h[0]=f),c.setTexture2D(o||Fd,f)}function $0(v,o,c){const h=this.cache,f=c.allocateTextureUnit();h[0]!==f&&(v.uniform1i(this.addr,f),h[0]=f),c.setTexture3D(o||cf,f)}function x1(v,o,c){const h=this.cache,f=c.allocateTextureUnit();h[0]!==f&&(v.uniform1i(this.addr,f),h[0]=f),c.setTextureCube(o||ad,f)}function X0(v,o,c){const h=this.cache,f=c.allocateTextureUnit();h[0]!==f&&(v.uniform1i(this.addr,f),h[0]=f),c.setTexture2DArray(o||Oc,f)}function w1(v,o){v.uniform1fv(this.addr,o)}function TA(v,o){const c=uf(o,this.size,2);v.uniform2fv(this.addr,c)}function vm(v,o){const c=uf(o,this.size,3);v.uniform3fv(this.addr,c)}function M1(v,o){const c=uf(o,this.size,4);v.uniform4fv(this.addr,c)}function Y0(v,o){const c=uf(o,this.size,4);v.uniformMatrix2fv(this.addr,!1,c)}function Ig(v,o){const c=uf(o,this.size,9);v.uniformMatrix3fv(this.addr,!1,c)}function W(v,o){const c=uf(o,this.size,16);v.uniformMatrix4fv(this.addr,!1,c)}function G(v,o){v.uniform1iv(this.addr,o)}function te(v,o){v.uniform2iv(this.addr,o)}function ee(v,o){v.uniform3iv(this.addr,o)}function ke(v,o){v.uniform4iv(this.addr,o)}function tt(v,o){v.uniform1uiv(this.addr,o)}function St(v,o){v.uniform2uiv(this.addr,o)}function Kt(v,o){v.uniform3uiv(this.addr,o)}function jt(v,o){v.uniform4uiv(this.addr,o)}function Dn(v,o,c){const h=this.cache,f=o.length,b=Dp(c,f);rl(h,b)||(v.uniform1iv(this.addr,b),fc(h,b));for(let S=0;S!==f;++S)c.setTexture2D(o[S]||Fd,b[S])}function zn(v,o,c){const h=this.cache,f=o.length,b=Dp(c,f);rl(h,b)||(v.uniform1iv(this.addr,b),fc(h,b));for(let S=0;S!==f;++S)c.setTexture3D(o[S]||cf,b[S])}function ei(v,o,c){const h=this.cache,f=o.length,b=Dp(c,f);rl(h,b)||(v.uniform1iv(this.addr,b),fc(h,b));for(let S=0;S!==f;++S)c.setTextureCube(o[S]||ad,b[S])}function zi(v,o,c){const h=this.cache,f=o.length,b=Dp(c,f);rl(h,b)||(v.uniform1iv(this.addr,b),fc(h,b));for(let S=0;S!==f;++S)c.setTexture2DArray(o[S]||Oc,b[S])}class Qr{constructor(o,c,h){this.id=o,this.addr=h,this.cache=[],this.setValue=function K0(v){switch(v){case 5126:return Eg;case 35664:return _1;case 35665:return Rd;case 35666:return ld;case 35674:return kd;case 35675:return y1;case 35676:return hf;case 5124:case 35670:return SA;case 35667:case 35671:return _m;case 35668:case 35672:return Nu;case 35669:case 35673:return ym;case 5125:return Bp;case 36294:return v1;case 36295:return b1;case 36296:return Dg;case 35678:case 36198:case 36298:case 36306:case 35682:return Bg;case 35679:case 36299:case 36307:return $0;case 35680:case 36300:case 36308:case 36293:return x1;case 36289:case 36303:case 36311:case 36292:return X0}}(c.type)}}class us{constructor(o,c,h){this.id=o,this.addr=h,this.cache=[],this.size=c.size,this.setValue=function vs(v){switch(v){case 5126:return w1;case 35664:return TA;case 35665:return vm;case 35666:return M1;case 35674:return Y0;case 35675:return Ig;case 35676:return W;case 5124:case 35670:return G;case 35667:case 35671:return te;case 35668:case 35672:return ee;case 35669:case 35673:return ke;case 5125:return tt;case 36294:return St;case 36295:return Kt;case 36296:return jt;case 35678:case 36198:case 36298:case 36306:case 35682:return Dn;case 35679:case 36299:case 36307:return zn;case 35680:case 36300:case 36308:case 36293:return ei;case 36289:case 36303:case 36311:case 36292:return zi}}(c.type)}}class No{constructor(o){this.id=o,this.seq=[],this.map={}}setValue(o,c,h){const f=this.seq;for(let b=0,S=f.length;b!==S;++b){const B=f[b];B.setValue(o,c[B.id],h)}}}const Ps=/(\w+)(\])?(\[|\.)?/g;function Ds(v,o){v.seq.push(o),v.map[o.id]=o}function Ma(v,o,c){const h=v.name,f=h.length;for(Ps.lastIndex=0;;){const b=Ps.exec(h);let B=b[1];const ae=b[3];if("]"===b[2]&&(B|=0),void 0===ae||"["===ae&&Ps.lastIndex+2===f){Ds(c,void 0===ae?new Qr(B,v,o):new us(B,v,o));break}{let Te=c.map[B];void 0===Te&&(Te=new No(B),Ds(c,Te)),c=Te}}}class Uo{constructor(o,c){this.seq=[],this.map={};const h=o.getProgramParameter(c,o.ACTIVE_UNIFORMS);for(let f=0;f<h;++f){const b=o.getActiveUniform(c,f);Ma(b,o.getUniformLocation(c,b.name),this)}}setValue(o,c,h,f){const b=this.map[c];void 0!==b&&b.setValue(o,h,f)}setOptional(o,c,h){const f=c[h];void 0!==f&&this.setValue(o,h,f)}static upload(o,c,h,f){for(let b=0,S=c.length;b!==S;++b){const B=c[b],ne=h[B.id];!1!==ne.needsUpdate&&B.setValue(o,ne.value,f)}}static seqWithValue(o,c){const h=[];for(let f=0,b=o.length;f!==b;++f){const S=o[f];S.id in c&&h.push(S)}return h}}function To(v,o,c){const h=v.createShader(o);return v.shaderSource(h,c),v.compileShader(h),h}let fs=0;function Po(v,o,c){const h=v.getShaderParameter(o,v.COMPILE_STATUS),f=v.getShaderInfoLog(o).trim();if(h&&""===f)return"";const b=/ERROR: 0:(\d+)/.exec(f);if(b){const S=parseInt(b[1]);return c.toUpperCase()+"\n\n"+f+"\n\n"+function Ca(v,o){const c=v.split("\n"),h=[],f=Math.max(o-6,0),b=Math.min(o+6,c.length);for(let S=f;S<b;S++){const B=S+1;h.push(`${B===o?">":" "} ${B}: ${c[S]}`)}return h.join("\n")}(v.getShaderSource(o),S)}return f}function pc(v,o){const c=function ra(v){switch(v){case Qa:return["Linear","( value )"];case Mo:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",v),["Linear","( value )"]}}(o);return"vec4 "+v+"( vec4 value ) { return LinearTo"+c[0]+c[1]+"; }"}function Uu(v,o){let c;switch(o){case We:c="Linear";break;case Ke:c="Reinhard";break;case ft:c="OptimizedCineon";break;case zt:c="ACESFilmic";break;case Zt:c="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",o),c="Linear"}return"vec3 "+v+"( vec3 color ) { return "+c+"ToneMapping( color ); }"}function ic(v){return""!==v}function gu(v,o){const c=o.numSpotLightShadows+o.numSpotLightMaps-o.numSpotLightShadowsWithMaps;return v.replace(/NUM_DIR_LIGHTS/g,o.numDirLights).replace(/NUM_SPOT_LIGHTS/g,o.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,o.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,c).replace(/NUM_RECT_AREA_LIGHTS/g,o.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,o.numPointLights).replace(/NUM_HEMI_LIGHTS/g,o.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,o.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,o.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,o.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,o.numPointLightShadows)}function _u(v,o){return v.replace(/NUM_CLIPPING_PLANES/g,o.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,o.numClippingPlanes-o.numClipIntersection)}const Ip=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ih(v){return v.replace(Ip,Xf)}function Xf(v,o){const c=Wo[o];if(void 0===c)throw new Error("Can not resolve #include <"+o+">");return Ih(c)}const Pp=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function df(v){return v.replace(Pp,ff)}function ff(v,o,c,h){let f="";for(let b=parseInt(o);b<parseInt(c);b++)f+=h.replace(/\[\s*i\s*\]/g,"[ "+b+" ]").replace(/UNROLLED_LOOP_INDEX/g,b);return f}function Kf(v){let o="precision "+v.precision+" float;\nprecision "+v.precision+" int;";return"highp"===v.precision?o+="\n#define HIGH_PRECISION":"mediump"===v.precision?o+="\n#define MEDIUM_PRECISION":"lowp"===v.precision&&(o+="\n#define LOW_PRECISION"),o}function jb(v,o,c,h){const f=v.getContext(),b=c.defines;let S=c.vertexShader,B=c.fragmentShader;const ne=function pf(v){let o="SHADOWMAP_TYPE_BASIC";return v.shadowMapType===Oe?o="SHADOWMAP_TYPE_PCF":v.shadowMapType===ce?o="SHADOWMAP_TYPE_PCF_SOFT":v.shadowMapType===Y&&(o="SHADOWMAP_TYPE_VSM"),o}(c),ae=function EA(v){let o="ENVMAP_TYPE_CUBE";if(v.envMap)switch(v.envMapMode){case Ot:case sn:o="ENVMAP_TYPE_CUBE";break;case En:o="ENVMAP_TYPE_CUBE_UV"}return o}(c),ge=function Yf(v){let o="ENVMAP_MODE_REFLECTION";return v.envMap&&v.envMapMode===sn&&(o="ENVMAP_MODE_REFRACTION"),o}(c),Te=function Fp(v){let o="ENVMAP_BLENDING_NONE";if(v.envMap)switch(v.combine){case Bt:o="ENVMAP_BLENDING_MULTIPLY";break;case ve:o="ENVMAP_BLENDING_MIX";break;case Je:o="ENVMAP_BLENDING_ADD"}return o}(c),Se=function Z0(v){const o=v.envMapCubeUVHeight;if(null===o)return null;const c=Math.log2(o)-2,h=1/o;return{texelWidth:1/(3*Math.max(Math.pow(2,c),112)),texelHeight:h,maxMip:c}}(c),Pe=c.isWebGL2?"":function rh(v){return[v.extensionDerivatives||v.envMapCubeUVHeight||v.bumpMap||v.tangentSpaceNormalMap||v.clearcoatNormalMap||v.flatShading||"physical"===v.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(v.extensionFragDepth||v.logarithmicDepthBuffer)&&v.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",v.extensionDrawBuffers&&v.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(v.extensionShaderTextureLOD||v.envMap||v.transmission)&&v.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ic).join("\n")}(c),qe=function ml(v){const o=[];for(const c in v){const h=v[c];!1!==h&&o.push("#define "+c+" "+h)}return o.join("\n")}(b),Ne=f.createProgram();let Fe,at,_t=c.glslVersion?"#version "+c.glslVersion+"\n":"";c.isRawShaderMaterial?(Fe=[qe].filter(ic).join("\n"),Fe.length>0&&(Fe+="\n"),at=[Pe,qe].filter(ic).join("\n"),at.length>0&&(at+="\n")):(Fe=[Kf(c),"#define SHADER_NAME "+c.shaderName,qe,c.instancing?"#define USE_INSTANCING":"",c.instancingColor?"#define USE_INSTANCING_COLOR":"",c.supportsVertexTextures?"#define VERTEX_TEXTURES":"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+ge:"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMap&&c.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",c.normalMap&&c.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",c.displacementMap&&c.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",c.specularColorMap?"#define USE_SPECULARCOLORMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.sheenColorMap?"#define USE_SHEENCOLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",c.vertexTangents?"#define USE_TANGENT":"",c.vertexColors?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUvs?"#define USE_UV":"",c.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",c.flatShading?"#define FLAT_SHADED":"",c.skinning?"#define USE_SKINNING":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals&&!1===c.flatShading?"#define USE_MORPHNORMALS":"",c.morphColors&&c.isWebGL2?"#define USE_MORPHCOLORS":"",c.morphTargetsCount>0&&c.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",c.morphTargetsCount>0&&c.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+c.morphTextureStride:"",c.morphTargetsCount>0&&c.isWebGL2?"#define MORPHTARGETS_COUNT "+c.morphTargetsCount:"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+ne:"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ic).join("\n"),at=[Pe,Kf(c),"#define SHADER_NAME "+c.shaderName,qe,c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.matcap?"#define USE_MATCAP":"",c.envMap?"#define USE_ENVMAP":"",c.envMap?"#define "+ae:"",c.envMap?"#define "+ge:"",c.envMap?"#define "+Te:"",Se?"#define CUBEUV_TEXEL_WIDTH "+Se.texelWidth:"",Se?"#define CUBEUV_TEXEL_HEIGHT "+Se.texelHeight:"",Se?"#define CUBEUV_MAX_MIP "+Se.maxMip+".0":"",c.lightMap?"#define USE_LIGHTMAP":"",c.aoMap?"#define USE_AOMAP":"",c.emissiveMap?"#define USE_EMISSIVEMAP":"",c.bumpMap?"#define USE_BUMPMAP":"",c.normalMap?"#define USE_NORMALMAP":"",c.normalMap&&c.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",c.normalMap&&c.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",c.clearcoat?"#define USE_CLEARCOAT":"",c.clearcoatMap?"#define USE_CLEARCOATMAP":"",c.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",c.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",c.iridescence?"#define USE_IRIDESCENCE":"",c.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",c.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",c.specularMap?"#define USE_SPECULARMAP":"",c.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",c.specularColorMap?"#define USE_SPECULARCOLORMAP":"",c.roughnessMap?"#define USE_ROUGHNESSMAP":"",c.metalnessMap?"#define USE_METALNESSMAP":"",c.alphaMap?"#define USE_ALPHAMAP":"",c.alphaTest?"#define USE_ALPHATEST":"",c.sheen?"#define USE_SHEEN":"",c.sheenColorMap?"#define USE_SHEENCOLORMAP":"",c.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",c.transmission?"#define USE_TRANSMISSION":"",c.transmissionMap?"#define USE_TRANSMISSIONMAP":"",c.thicknessMap?"#define USE_THICKNESSMAP":"",c.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",c.vertexTangents?"#define USE_TANGENT":"",c.vertexColors||c.instancingColor?"#define USE_COLOR":"",c.vertexAlphas?"#define USE_COLOR_ALPHA":"",c.vertexUvs?"#define USE_UV":"",c.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",c.gradientMap?"#define USE_GRADIENTMAP":"",c.flatShading?"#define FLAT_SHADED":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.flipSided?"#define FLIP_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapEnabled?"#define "+ne:"",c.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",c.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",c.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",c.logarithmicDepthBuffer&&c.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",c.toneMapping!==ct?"#define TONE_MAPPING":"",c.toneMapping!==ct?Wo.tonemapping_pars_fragment:"",c.toneMapping!==ct?Uu("toneMapping",c.toneMapping):"",c.dithering?"#define DITHERING":"",c.opaque?"#define OPAQUE":"",Wo.encodings_pars_fragment,pc("linearToOutputTexel",c.outputEncoding),c.useDepthPacking?"#define DEPTH_PACKING "+c.depthPacking:"","\n"].filter(ic).join("\n")),S=Ih(S),S=gu(S,c),S=_u(S,c),B=Ih(B),B=gu(B,c),B=_u(B,c),S=df(S),B=df(B),c.isWebGL2&&!0!==c.isRawShaderMaterial&&(_t="#version 300 es\n",Fe=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+Fe,at=["#define varying in",c.glslVersion===ua?"":"layout(location = 0) out highp vec4 pc_fragColor;",c.glslVersion===ua?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+at);const ht=_t+at+B,Rt=To(f,f.VERTEX_SHADER,_t+Fe+S),Xt=To(f,f.FRAGMENT_SHADER,ht);if(f.attachShader(Ne,Rt),f.attachShader(Ne,Xt),void 0!==c.index0AttributeName?f.bindAttribLocation(Ne,0,c.index0AttributeName):!0===c.morphTargets&&f.bindAttribLocation(Ne,0,"position"),f.linkProgram(Ne),v.debug.checkShaderErrors){const en=f.getProgramInfoLog(Ne).trim(),bn=f.getShaderInfoLog(Rt).trim(),ui=f.getShaderInfoLog(Xt).trim();let Pi=!0,hi=!0;if(!1===f.getProgramParameter(Ne,f.LINK_STATUS)){Pi=!1;const Vn=Po(f,Rt,"vertex"),Mi=Po(f,Xt,"fragment");console.error("THREE.WebGLProgram: Shader Error "+f.getError()+" - VALIDATE_STATUS "+f.getProgramParameter(Ne,f.VALIDATE_STATUS)+"\n\nProgram Info Log: "+en+"\n"+Vn+"\n"+Mi)}else""!==en?console.warn("THREE.WebGLProgram: Program Info Log:",en):(""===bn||""===ui)&&(hi=!1);hi&&(this.diagnostics={runnable:Pi,programLog:en,vertexShader:{log:bn,prefix:Fe},fragmentShader:{log:ui,prefix:at}})}let xn,bt;return f.deleteShader(Rt),f.deleteShader(Xt),this.getUniforms=function(){return void 0===xn&&(xn=new Uo(f,Ne)),xn},this.getAttributes=function(){return void 0===bt&&(bt=function dl(v,o){const c={},h=v.getProgramParameter(o,v.ACTIVE_ATTRIBUTES);for(let f=0;f<h;f++){const b=v.getActiveAttrib(o,f),S=b.name;let B=1;b.type===v.FLOAT_MAT2&&(B=2),b.type===v.FLOAT_MAT3&&(B=3),b.type===v.FLOAT_MAT4&&(B=4),c[S]={type:b.type,location:v.getAttribLocation(o,S),locationSize:B}}return c}(f,Ne)),bt},this.destroy=function(){h.releaseStatesOfProgram(this),f.deleteProgram(Ne),this.program=void 0},this.name=c.shaderName,this.id=fs++,this.cacheKey=o,this.usedTimes=1,this.program=Ne,this.vertexShader=Rt,this.fragmentShader=Xt,this}let $b=0;class Xb{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(o){const h=o.fragmentShader,f=this._getShaderStage(o.vertexShader),b=this._getShaderStage(h),S=this._getShaderCacheForMaterial(o);return!1===S.has(f)&&(S.add(f),f.usedTimes++),!1===S.has(b)&&(S.add(b),b.usedTimes++),this}remove(o){const c=this.materialCache.get(o);for(const h of c)h.usedTimes--,0===h.usedTimes&&this.shaderCache.delete(h.code);return this.materialCache.delete(o),this}getVertexShaderID(o){return this._getShaderStage(o.vertexShader).id}getFragmentShaderID(o){return this._getShaderStage(o.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(o){const c=this.materialCache;let h=c.get(o);return void 0===h&&(h=new Set,c.set(o,h)),h}_getShaderStage(o){const c=this.shaderCache;let h=c.get(o);return void 0===h&&(h=new yS(o),c.set(o,h)),h}}class yS{constructor(o){this.id=$b++,this.code=o,this.usedTimes=0}}function vS(v,o,c,h,f,b,S){const B=new gp,ne=new Xb,ae=[],ge=f.isWebGL2,Te=f.logarithmicDepthBuffer,Se=f.vertexTextures;let Pe=f.precision;const qe={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function Ne(bt,en,bn,ui,Pi){const hi=ui.fog,Vn=Pi.geometry,Oi=(bt.isMeshStandardMaterial?c:o).get(bt.envMap||(bt.isMeshStandardMaterial?ui.environment:null)),Xi=Oi&&Oi.mapping===En?Oi.image.height:null,Ai=qe[bt.type];null!==bt.precision&&(Pe=f.getMaxPrecision(bt.precision),Pe!==bt.precision&&console.warn("THREE.WebGLProgram.getParameters:",bt.precision,"not supported, using",Pe,"instead."));const Hn=Vn.morphAttributes.position||Vn.morphAttributes.normal||Vn.morphAttributes.color,Zn=void 0!==Hn?Hn.length:0;let ur,ai,As,co,_r=0;if(void 0!==Vn.morphAttributes.position&&(_r=1),void 0!==Vn.morphAttributes.normal&&(_r=2),void 0!==Vn.morphAttributes.color&&(_r=3),Ai){const Ji=sf[Ai];ur=Ji.vertexShader,ai=Ji.fragmentShader}else ur=bt.vertexShader,ai=bt.fragmentShader,ne.update(bt),As=ne.getVertexShaderID(bt),co=ne.getFragmentShaderID(bt);const Jn=v.getRenderTarget(),Li=bt.clearcoat>0,Mr=bt.iridescence>0;return{isWebGL2:ge,shaderID:Ai,shaderName:bt.type,vertexShader:ur,fragmentShader:ai,defines:bt.defines,customVertexShaderID:As,customFragmentShaderID:co,isRawShaderMaterial:!0===bt.isRawShaderMaterial,glslVersion:bt.glslVersion,precision:Pe,instancing:!0===Pi.isInstancedMesh,instancingColor:!0===Pi.isInstancedMesh&&null!==Pi.instanceColor,supportsVertexTextures:Se,outputEncoding:null===Jn?v.outputEncoding:!0===Jn.isXRRenderTarget?Jn.texture.encoding:Qa,map:!!bt.map,matcap:!!bt.matcap,envMap:!!Oi,envMapMode:Oi&&Oi.mapping,envMapCubeUVHeight:Xi,lightMap:!!bt.lightMap,aoMap:!!bt.aoMap,emissiveMap:!!bt.emissiveMap,bumpMap:!!bt.bumpMap,normalMap:!!bt.normalMap,objectSpaceNormalMap:bt.normalMapType===_c,tangentSpaceNormalMap:bt.normalMapType===Cl,decodeVideoTexture:!!bt.map&&!0===bt.map.isVideoTexture&&bt.map.encoding===Mo,clearcoat:Li,clearcoatMap:Li&&!!bt.clearcoatMap,clearcoatRoughnessMap:Li&&!!bt.clearcoatRoughnessMap,clearcoatNormalMap:Li&&!!bt.clearcoatNormalMap,iridescence:Mr,iridescenceMap:Mr&&!!bt.iridescenceMap,iridescenceThicknessMap:Mr&&!!bt.iridescenceThicknessMap,displacementMap:!!bt.displacementMap,roughnessMap:!!bt.roughnessMap,metalnessMap:!!bt.metalnessMap,specularMap:!!bt.specularMap,specularIntensityMap:!!bt.specularIntensityMap,specularColorMap:!!bt.specularColorMap,opaque:!1===bt.transparent&&bt.blending===O,alphaMap:!!bt.alphaMap,alphaTest:bt.alphaTest>0,gradientMap:!!bt.gradientMap,sheen:bt.sheen>0,sheenColorMap:!!bt.sheenColorMap,sheenRoughnessMap:!!bt.sheenRoughnessMap,transmission:bt.transmission>0,transmissionMap:!!bt.transmissionMap,thicknessMap:!!bt.thicknessMap,combine:bt.combine,vertexTangents:!!bt.normalMap&&!!Vn.attributes.tangent,vertexColors:bt.vertexColors,vertexAlphas:!0===bt.vertexColors&&!!Vn.attributes.color&&4===Vn.attributes.color.itemSize,vertexUvs:!!(bt.map||bt.bumpMap||bt.normalMap||bt.specularMap||bt.alphaMap||bt.emissiveMap||bt.roughnessMap||bt.metalnessMap||bt.clearcoatMap||bt.clearcoatRoughnessMap||bt.clearcoatNormalMap||bt.iridescenceMap||bt.iridescenceThicknessMap||bt.displacementMap||bt.transmissionMap||bt.thicknessMap||bt.specularIntensityMap||bt.specularColorMap||bt.sheenColorMap||bt.sheenRoughnessMap),uvsVertexOnly:!(bt.map||bt.bumpMap||bt.normalMap||bt.specularMap||bt.alphaMap||bt.emissiveMap||bt.roughnessMap||bt.metalnessMap||bt.clearcoatNormalMap||bt.iridescenceMap||bt.iridescenceThicknessMap||bt.transmission>0||bt.transmissionMap||bt.thicknessMap||bt.specularIntensityMap||bt.specularColorMap||bt.sheen>0||bt.sheenColorMap||bt.sheenRoughnessMap||!bt.displacementMap),fog:!!hi,useFog:!0===bt.fog,fogExp2:hi&&hi.isFogExp2,flatShading:!!bt.flatShading,sizeAttenuation:bt.sizeAttenuation,logarithmicDepthBuffer:Te,skinning:!0===Pi.isSkinnedMesh,morphTargets:void 0!==Vn.morphAttributes.position,morphNormals:void 0!==Vn.morphAttributes.normal,morphColors:void 0!==Vn.morphAttributes.color,morphTargetsCount:Zn,morphTextureStride:_r,numDirLights:en.directional.length,numPointLights:en.point.length,numSpotLights:en.spot.length,numSpotLightMaps:en.spotLightMap.length,numRectAreaLights:en.rectArea.length,numHemiLights:en.hemi.length,numDirLightShadows:en.directionalShadowMap.length,numPointLightShadows:en.pointShadowMap.length,numSpotLightShadows:en.spotShadowMap.length,numSpotLightShadowsWithMaps:en.numSpotLightShadowsWithMaps,numClippingPlanes:S.numPlanes,numClipIntersection:S.numIntersection,dithering:bt.dithering,shadowMapEnabled:v.shadowMap.enabled&&bn.length>0,shadowMapType:v.shadowMap.type,toneMapping:bt.toneMapped?v.toneMapping:ct,physicallyCorrectLights:v.physicallyCorrectLights,premultipliedAlpha:bt.premultipliedAlpha,doubleSided:bt.side===X,flipSided:bt.side===ue,useDepthPacking:!!bt.depthPacking,depthPacking:bt.depthPacking||0,index0AttributeName:bt.index0AttributeName,extensionDerivatives:bt.extensions&&bt.extensions.derivatives,extensionFragDepth:bt.extensions&&bt.extensions.fragDepth,extensionDrawBuffers:bt.extensions&&bt.extensions.drawBuffers,extensionShaderTextureLOD:bt.extensions&&bt.extensions.shaderTextureLOD,rendererExtensionFragDepth:ge||h.has("EXT_frag_depth"),rendererExtensionDrawBuffers:ge||h.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:ge||h.has("EXT_shader_texture_lod"),customProgramCacheKey:bt.customProgramCacheKey()}},getProgramCacheKey:function Fe(bt){const en=[];if(bt.shaderID?en.push(bt.shaderID):(en.push(bt.customVertexShaderID),en.push(bt.customFragmentShaderID)),void 0!==bt.defines)for(const bn in bt.defines)en.push(bn),en.push(bt.defines[bn]);return!1===bt.isRawShaderMaterial&&(function at(bt,en){bt.push(en.precision),bt.push(en.outputEncoding),bt.push(en.envMapMode),bt.push(en.envMapCubeUVHeight),bt.push(en.combine),bt.push(en.vertexUvs),bt.push(en.fogExp2),bt.push(en.sizeAttenuation),bt.push(en.morphTargetsCount),bt.push(en.morphAttributeCount),bt.push(en.numDirLights),bt.push(en.numPointLights),bt.push(en.numSpotLights),bt.push(en.numSpotLightMaps),bt.push(en.numHemiLights),bt.push(en.numRectAreaLights),bt.push(en.numDirLightShadows),bt.push(en.numPointLightShadows),bt.push(en.numSpotLightShadows),bt.push(en.numSpotLightShadowsWithMaps),bt.push(en.shadowMapType),bt.push(en.toneMapping),bt.push(en.numClippingPlanes),bt.push(en.numClipIntersection),bt.push(en.depthPacking)}(en,bt),function _t(bt,en){B.disableAll(),en.isWebGL2&&B.enable(0),en.supportsVertexTextures&&B.enable(1),en.instancing&&B.enable(2),en.instancingColor&&B.enable(3),en.map&&B.enable(4),en.matcap&&B.enable(5),en.envMap&&B.enable(6),en.lightMap&&B.enable(7),en.aoMap&&B.enable(8),en.emissiveMap&&B.enable(9),en.bumpMap&&B.enable(10),en.normalMap&&B.enable(11),en.objectSpaceNormalMap&&B.enable(12),en.tangentSpaceNormalMap&&B.enable(13),en.clearcoat&&B.enable(14),en.clearcoatMap&&B.enable(15),en.clearcoatRoughnessMap&&B.enable(16),en.clearcoatNormalMap&&B.enable(17),en.iridescence&&B.enable(18),en.iridescenceMap&&B.enable(19),en.iridescenceThicknessMap&&B.enable(20),en.displacementMap&&B.enable(21),en.specularMap&&B.enable(22),en.roughnessMap&&B.enable(23),en.metalnessMap&&B.enable(24),en.gradientMap&&B.enable(25),en.alphaMap&&B.enable(26),en.alphaTest&&B.enable(27),en.vertexColors&&B.enable(28),en.vertexAlphas&&B.enable(29),en.vertexUvs&&B.enable(30),en.vertexTangents&&B.enable(31),en.uvsVertexOnly&&B.enable(32),bt.push(B.mask),B.disableAll(),en.fog&&B.enable(0),en.useFog&&B.enable(1),en.flatShading&&B.enable(2),en.logarithmicDepthBuffer&&B.enable(3),en.skinning&&B.enable(4),en.morphTargets&&B.enable(5),en.morphNormals&&B.enable(6),en.morphColors&&B.enable(7),en.premultipliedAlpha&&B.enable(8),en.shadowMapEnabled&&B.enable(9),en.physicallyCorrectLights&&B.enable(10),en.doubleSided&&B.enable(11),en.flipSided&&B.enable(12),en.useDepthPacking&&B.enable(13),en.dithering&&B.enable(14),en.specularIntensityMap&&B.enable(15),en.specularColorMap&&B.enable(16),en.transmission&&B.enable(17),en.transmissionMap&&B.enable(18),en.thicknessMap&&B.enable(19),en.sheen&&B.enable(20),en.sheenColorMap&&B.enable(21),en.sheenRoughnessMap&&B.enable(22),en.decodeVideoTexture&&B.enable(23),en.opaque&&B.enable(24),bt.push(B.mask)}(en,bt),en.push(v.outputEncoding)),en.push(bt.customProgramCacheKey),en.join()},getUniforms:function ut(bt){const en=qe[bt.type];let bn;return bn=en?Nf.clone(sf[en].uniforms):bt.uniforms,bn},acquireProgram:function ht(bt,en){let bn;for(let ui=0,Pi=ae.length;ui<Pi;ui++){const hi=ae[ui];if(hi.cacheKey===en){bn=hi,++bn.usedTimes;break}}return void 0===bn&&(bn=new jb(v,en,bt,b),ae.push(bn)),bn},releaseProgram:function Rt(bt){if(0==--bt.usedTimes){const en=ae.indexOf(bt);ae[en]=ae[ae.length-1],ae.pop(),bt.destroy()}},releaseShaderCache:function Xt(bt){ne.remove(bt)},programs:ae,dispose:function xn(){ne.dispose()}}}function bS(){let v=new WeakMap;return{get:function o(b){let S=v.get(b);return void 0===S&&(S={},v.set(b,S)),S},remove:function c(b){v.delete(b)},update:function h(b,S,B){v.get(b)[S]=B},dispose:function f(){v=new WeakMap}}}function C1(v,o){return v.groupOrder!==o.groupOrder?v.groupOrder-o.groupOrder:v.renderOrder!==o.renderOrder?v.renderOrder-o.renderOrder:v.material.id!==o.material.id?v.material.id-o.material.id:v.z!==o.z?v.z-o.z:v.id-o.id}function S1(v,o){return v.groupOrder!==o.groupOrder?v.groupOrder-o.groupOrder:v.renderOrder!==o.renderOrder?v.renderOrder-o.renderOrder:v.z!==o.z?o.z-v.z:v.id-o.id}function l2(){const v=[];let o=0;const c=[],h=[],f=[];function S(Te,Se,Pe,qe,Ne,Fe){let at=v[o];return void 0===at?(at={id:Te.id,object:Te,geometry:Se,material:Pe,groupOrder:qe,renderOrder:Te.renderOrder,z:Ne,group:Fe},v[o]=at):(at.id=Te.id,at.object=Te,at.geometry=Se,at.material=Pe,at.groupOrder=qe,at.renderOrder=Te.renderOrder,at.z=Ne,at.group=Fe),o++,at}return{opaque:c,transmissive:h,transparent:f,init:function b(){o=0,c.length=0,h.length=0,f.length=0},push:function B(Te,Se,Pe,qe,Ne,Fe){const at=S(Te,Se,Pe,qe,Ne,Fe);Pe.transmission>0?h.push(at):!0===Pe.transparent?f.push(at):c.push(at)},unshift:function ne(Te,Se,Pe,qe,Ne,Fe){const at=S(Te,Se,Pe,qe,Ne,Fe);Pe.transmission>0?h.unshift(at):!0===Pe.transparent?f.unshift(at):c.unshift(at)},finish:function ge(){for(let Te=o,Se=v.length;Te<Se;Te++){const Pe=v[Te];if(null===Pe.id)break;Pe.id=null,Pe.object=null,Pe.geometry=null,Pe.material=null,Pe.group=null}},sort:function ae(Te,Se){c.length>1&&c.sort(Te||C1),h.length>1&&h.sort(Se||S1),f.length>1&&f.sort(Se||S1)}}}function xS(){let v=new WeakMap;return{get:function o(h,f){const b=v.get(h);let S;return void 0===b?(S=new l2,v.set(h,[S])):f>=b.length?(S=new l2,b.push(S)):S=b[f],S},dispose:function c(){v=new WeakMap}}}function Kb(){const v={};return{get:function(o){if(void 0!==v[o.id])return v[o.id];let c;switch(o.type){case"DirectionalLight":c={direction:new Ut,color:new wr};break;case"SpotLight":c={position:new Ut,direction:new Ut,color:new wr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":c={position:new Ut,color:new wr,distance:0,decay:0};break;case"HemisphereLight":c={direction:new Ut,skyColor:new wr,groundColor:new wr};break;case"RectAreaLight":c={color:new wr,position:new Ut,halfWidth:new Ut,halfHeight:new Ut}}return v[o.id]=c,c}}}let u2=0;function h2(v,o){return(o.castShadow?2:0)-(v.castShadow?2:0)+(o.map?1:0)-(v.map?1:0)}function d2(v,o){const c=new Kb,h=function c2(){const v={};return{get:function(o){if(void 0!==v[o.id])return v[o.id];let c;switch(o.type){case"DirectionalLight":case"SpotLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Di};break;case"PointLight":c={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Di,shadowCameraNear:1,shadowCameraFar:1e3}}return v[o.id]=c,c}}}(),f={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let ge=0;ge<9;ge++)f.probe.push(new Ut);const b=new Ut,S=new so,B=new so;return{setup:function ne(ge,Te){let Se=0,Pe=0,qe=0;for(let ui=0;ui<9;ui++)f.probe[ui].set(0,0,0);let Ne=0,Fe=0,at=0,_t=0,ut=0,ht=0,Rt=0,Xt=0,xn=0,bt=0;ge.sort(h2);const en=!0!==Te?Math.PI:1;for(let ui=0,Pi=ge.length;ui<Pi;ui++){const hi=ge[ui],Vn=hi.color,Mi=hi.intensity,Oi=hi.distance,Xi=hi.shadow&&hi.shadow.map?hi.shadow.map.texture:null;if(hi.isAmbientLight)Se+=Vn.r*Mi*en,Pe+=Vn.g*Mi*en,qe+=Vn.b*Mi*en;else if(hi.isLightProbe)for(let Ai=0;Ai<9;Ai++)f.probe[Ai].addScaledVector(hi.sh.coefficients[Ai],Mi);else if(hi.isDirectionalLight){const Ai=c.get(hi);if(Ai.color.copy(hi.color).multiplyScalar(hi.intensity*en),hi.castShadow){const Hn=hi.shadow,Zn=h.get(hi);Zn.shadowBias=Hn.bias,Zn.shadowNormalBias=Hn.normalBias,Zn.shadowRadius=Hn.radius,Zn.shadowMapSize=Hn.mapSize,f.directionalShadow[Ne]=Zn,f.directionalShadowMap[Ne]=Xi,f.directionalShadowMatrix[Ne]=hi.shadow.matrix,ht++}f.directional[Ne]=Ai,Ne++}else if(hi.isSpotLight){const Ai=c.get(hi);Ai.position.setFromMatrixPosition(hi.matrixWorld),Ai.color.copy(Vn).multiplyScalar(Mi*en),Ai.distance=Oi,Ai.coneCos=Math.cos(hi.angle),Ai.penumbraCos=Math.cos(hi.angle*(1-hi.penumbra)),Ai.decay=hi.decay,f.spot[at]=Ai;const Hn=hi.shadow;if(hi.map&&(f.spotLightMap[xn]=hi.map,xn++,Hn.updateMatrices(hi),hi.castShadow&&bt++),f.spotLightMatrix[at]=Hn.matrix,hi.castShadow){const Zn=h.get(hi);Zn.shadowBias=Hn.bias,Zn.shadowNormalBias=Hn.normalBias,Zn.shadowRadius=Hn.radius,Zn.shadowMapSize=Hn.mapSize,f.spotShadow[at]=Zn,f.spotShadowMap[at]=Xi,Xt++}at++}else if(hi.isRectAreaLight){const Ai=c.get(hi);Ai.color.copy(Vn).multiplyScalar(Mi),Ai.halfWidth.set(.5*hi.width,0,0),Ai.halfHeight.set(0,.5*hi.height,0),f.rectArea[_t]=Ai,_t++}else if(hi.isPointLight){const Ai=c.get(hi);if(Ai.color.copy(hi.color).multiplyScalar(hi.intensity*en),Ai.distance=hi.distance,Ai.decay=hi.decay,hi.castShadow){const Hn=hi.shadow,Zn=h.get(hi);Zn.shadowBias=Hn.bias,Zn.shadowNormalBias=Hn.normalBias,Zn.shadowRadius=Hn.radius,Zn.shadowMapSize=Hn.mapSize,Zn.shadowCameraNear=Hn.camera.near,Zn.shadowCameraFar=Hn.camera.far,f.pointShadow[Fe]=Zn,f.pointShadowMap[Fe]=Xi,f.pointShadowMatrix[Fe]=hi.shadow.matrix,Rt++}f.point[Fe]=Ai,Fe++}else if(hi.isHemisphereLight){const Ai=c.get(hi);Ai.skyColor.copy(hi.color).multiplyScalar(Mi*en),Ai.groundColor.copy(hi.groundColor).multiplyScalar(Mi*en),f.hemi[ut]=Ai,ut++}}_t>0&&(o.isWebGL2||!0===v.has("OES_texture_float_linear")?(f.rectAreaLTC1=as.LTC_FLOAT_1,f.rectAreaLTC2=as.LTC_FLOAT_2):!0===v.has("OES_texture_half_float_linear")?(f.rectAreaLTC1=as.LTC_HALF_1,f.rectAreaLTC2=as.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),f.ambient[0]=Se,f.ambient[1]=Pe,f.ambient[2]=qe;const bn=f.hash;(bn.directionalLength!==Ne||bn.pointLength!==Fe||bn.spotLength!==at||bn.rectAreaLength!==_t||bn.hemiLength!==ut||bn.numDirectionalShadows!==ht||bn.numPointShadows!==Rt||bn.numSpotShadows!==Xt||bn.numSpotMaps!==xn)&&(f.directional.length=Ne,f.spot.length=at,f.rectArea.length=_t,f.point.length=Fe,f.hemi.length=ut,f.directionalShadow.length=ht,f.directionalShadowMap.length=ht,f.pointShadow.length=Rt,f.pointShadowMap.length=Rt,f.spotShadow.length=Xt,f.spotShadowMap.length=Xt,f.directionalShadowMatrix.length=ht,f.pointShadowMatrix.length=Rt,f.spotLightMatrix.length=Xt+xn-bt,f.spotLightMap.length=xn,f.numSpotLightShadowsWithMaps=bt,bn.directionalLength=Ne,bn.pointLength=Fe,bn.spotLength=at,bn.rectAreaLength=_t,bn.hemiLength=ut,bn.numDirectionalShadows=ht,bn.numPointShadows=Rt,bn.numSpotShadows=Xt,bn.numSpotMaps=xn,f.version=u2++)},setupView:function ae(ge,Te){let Se=0,Pe=0,qe=0,Ne=0,Fe=0;const at=Te.matrixWorldInverse;for(let _t=0,ut=ge.length;_t<ut;_t++){const ht=ge[_t];if(ht.isDirectionalLight){const Rt=f.directional[Se];Rt.direction.setFromMatrixPosition(ht.matrixWorld),b.setFromMatrixPosition(ht.target.matrixWorld),Rt.direction.sub(b),Rt.direction.transformDirection(at),Se++}else if(ht.isSpotLight){const Rt=f.spot[qe];Rt.position.setFromMatrixPosition(ht.matrixWorld),Rt.position.applyMatrix4(at),Rt.direction.setFromMatrixPosition(ht.matrixWorld),b.setFromMatrixPosition(ht.target.matrixWorld),Rt.direction.sub(b),Rt.direction.transformDirection(at),qe++}else if(ht.isRectAreaLight){const Rt=f.rectArea[Ne];Rt.position.setFromMatrixPosition(ht.matrixWorld),Rt.position.applyMatrix4(at),B.identity(),S.copy(ht.matrixWorld),S.premultiply(at),B.extractRotation(S),Rt.halfWidth.set(.5*ht.width,0,0),Rt.halfHeight.set(0,.5*ht.height,0),Rt.halfWidth.applyMatrix4(B),Rt.halfHeight.applyMatrix4(B),Ne++}else if(ht.isPointLight){const Rt=f.point[Pe];Rt.position.setFromMatrixPosition(ht.matrixWorld),Rt.position.applyMatrix4(at),Pe++}else if(ht.isHemisphereLight){const Rt=f.hemi[Fe];Rt.direction.setFromMatrixPosition(ht.matrixWorld),Rt.direction.transformDirection(at),Fe++}}},state:f}}function iv(v,o){const c=new d2(v,o),h=[],f=[];return{init:function b(){h.length=0,f.length=0},state:{lightsArray:h,shadowsArray:f,lights:c},setupLights:function ne(Te){c.setup(h,Te)},setupLightsView:function ae(Te){c.setupView(h,Te)},pushLight:function S(Te){h.push(Te)},pushShadow:function B(Te){f.push(Te)}}}function T1(v,o){let c=new WeakMap;return{get:function h(b,S=0){const B=c.get(b);let ne;return void 0===B?(ne=new iv(v,o),c.set(b,[ne])):S>=B.length?(ne=new iv(v,o),B.push(ne)):ne=B[S],ne},dispose:function f(){c=new WeakMap}}}class rv extends $h{constructor(o){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(o)}copy(o){return super.copy(o),this.depthPacking=o.depthPacking,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this}}class E1 extends $h{constructor(o){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Ut,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(o)}copy(o){return super.copy(o),this.referencePosition.copy(o.referencePosition),this.nearDistance=o.nearDistance,this.farDistance=o.farDistance,this.map=o.map,this.alphaMap=o.alphaMap,this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this}}const f2="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fl="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function p2(v,o,c){let h=new wh;const f=new Di,b=new Di,S=new js,B=new rv({depthPacking:Ol}),ne=new E1,ae={},ge=c.maxTextureSize,Te={0:ue,1:K,2:X},Se=new ec({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Di},radius:{value:4}},vertexShader:f2,fragmentShader:fl}),Pe=Se.clone();Pe.defines.HORIZONTAL_PASS=1;const qe=new So;qe.setAttribute("position",new Bc(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const Ne=new Yr(qe,Se),Fe=this;function at(ht,Rt){const Xt=o.update(Ne);Se.defines.VSM_SAMPLES!==ht.blurSamples&&(Se.defines.VSM_SAMPLES=ht.blurSamples,Pe.defines.VSM_SAMPLES=ht.blurSamples,Se.needsUpdate=!0,Pe.needsUpdate=!0),null===ht.mapPass&&(ht.mapPass=new Lo(f.x,f.y)),Se.uniforms.shadow_pass.value=ht.map.texture,Se.uniforms.resolution.value=ht.mapSize,Se.uniforms.radius.value=ht.radius,v.setRenderTarget(ht.mapPass),v.clear(),v.renderBufferDirect(Rt,null,Xt,Se,Ne,null),Pe.uniforms.shadow_pass.value=ht.mapPass.texture,Pe.uniforms.resolution.value=ht.mapSize,Pe.uniforms.radius.value=ht.radius,v.setRenderTarget(ht.map),v.clear(),v.renderBufferDirect(Rt,null,Xt,Pe,Ne,null)}function _t(ht,Rt,Xt,xn,bt,en){let bn=null;const ui=!0===Xt.isPointLight?ht.customDistanceMaterial:ht.customDepthMaterial;if(bn=void 0!==ui?ui:!0===Xt.isPointLight?ne:B,v.localClippingEnabled&&!0===Rt.clipShadows&&Array.isArray(Rt.clippingPlanes)&&0!==Rt.clippingPlanes.length||Rt.displacementMap&&0!==Rt.displacementScale||Rt.alphaMap&&Rt.alphaTest>0){const Pi=bn.uuid,hi=Rt.uuid;let Vn=ae[Pi];void 0===Vn&&(Vn={},ae[Pi]=Vn);let Mi=Vn[hi];void 0===Mi&&(Mi=bn.clone(),Vn[hi]=Mi),bn=Mi}return bn.visible=Rt.visible,bn.wireframe=Rt.wireframe,bn.side=en===Y?null!==Rt.shadowSide?Rt.shadowSide:Rt.side:null!==Rt.shadowSide?Rt.shadowSide:Te[Rt.side],bn.alphaMap=Rt.alphaMap,bn.alphaTest=Rt.alphaTest,bn.clipShadows=Rt.clipShadows,bn.clippingPlanes=Rt.clippingPlanes,bn.clipIntersection=Rt.clipIntersection,bn.displacementMap=Rt.displacementMap,bn.displacementScale=Rt.displacementScale,bn.displacementBias=Rt.displacementBias,bn.wireframeLinewidth=Rt.wireframeLinewidth,bn.linewidth=Rt.linewidth,!0===Xt.isPointLight&&!0===bn.isMeshDistanceMaterial&&(bn.referencePosition.setFromMatrixPosition(Xt.matrixWorld),bn.nearDistance=xn,bn.farDistance=bt),bn}function ut(ht,Rt,Xt,xn,bt){if(!1===ht.visible)return;if(ht.layers.test(Rt.layers)&&(ht.isMesh||ht.isLine||ht.isPoints)&&(ht.castShadow||ht.receiveShadow&&bt===Y)&&(!ht.frustumCulled||h.intersectsObject(ht))){ht.modelViewMatrix.multiplyMatrices(Xt.matrixWorldInverse,ht.matrixWorld);const ui=o.update(ht),Pi=ht.material;if(Array.isArray(Pi)){const hi=ui.groups;for(let Vn=0,Mi=hi.length;Vn<Mi;Vn++){const Oi=hi[Vn],Xi=Pi[Oi.materialIndex];if(Xi&&Xi.visible){const Ai=_t(ht,Xi,xn,Xt.near,Xt.far,bt);v.renderBufferDirect(Xt,null,ui,Ai,ht,Oi)}}}else if(Pi.visible){const hi=_t(ht,Pi,xn,Xt.near,Xt.far,bt);v.renderBufferDirect(Xt,null,ui,hi,ht,null)}}const bn=ht.children;for(let ui=0,Pi=bn.length;ui<Pi;ui++)ut(bn[ui],Rt,Xt,xn,bt)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Oe,this.render=function(ht,Rt,Xt){if(!1===Fe.enabled||!1===Fe.autoUpdate&&!1===Fe.needsUpdate||0===ht.length)return;const xn=v.getRenderTarget(),bt=v.getActiveCubeFace(),en=v.getActiveMipmapLevel(),bn=v.state;bn.setBlending(Z),bn.buffers.color.setClear(1,1,1,1),bn.buffers.depth.setTest(!0),bn.setScissorTest(!1);for(let ui=0,Pi=ht.length;ui<Pi;ui++){const hi=ht[ui],Vn=hi.shadow;if(void 0===Vn){console.warn("THREE.WebGLShadowMap:",hi,"has no shadow.");continue}if(!1===Vn.autoUpdate&&!1===Vn.needsUpdate)continue;f.copy(Vn.mapSize);const Mi=Vn.getFrameExtents();f.multiply(Mi),b.copy(Vn.mapSize),(f.x>ge||f.y>ge)&&(f.x>ge&&(b.x=Math.floor(ge/Mi.x),f.x=b.x*Mi.x,Vn.mapSize.x=b.x),f.y>ge&&(b.y=Math.floor(ge/Mi.y),f.y=b.y*Mi.y,Vn.mapSize.y=b.y)),null===Vn.map&&(Vn.map=new Lo(f.x,f.y,this.type!==Y?{minFilter:Gt,magFilter:Gt}:{}),Vn.map.texture.name=hi.name+".shadowMap",Vn.camera.updateProjectionMatrix()),v.setRenderTarget(Vn.map),v.clear();const Oi=Vn.getViewportCount();for(let Xi=0;Xi<Oi;Xi++){const Ai=Vn.getViewport(Xi);S.set(b.x*Ai.x,b.y*Ai.y,b.x*Ai.z,b.y*Ai.w),bn.viewport(S),Vn.updateMatrices(hi,Xi),h=Vn.getFrustum(),ut(Rt,Xt,Vn.camera,hi,this.type)}!0!==Vn.isPointLightShadow&&this.type===Y&&at(Vn,Xt),Vn.needsUpdate=!1}Fe.needsUpdate=!1,v.setRenderTarget(xn,bt,en)}}function A2(v,o,c){const h=c.isWebGL2,B=new function f(){let Gn=!1;const Wi=new js;let Pr=null;const Os=new js(0,0,0,0);return{setMask:function(go){Pr!==go&&!Gn&&(v.colorMask(go,go,go,go),Pr=go)},setLocked:function(go){Gn=go},setClear:function(go,Rl,uh,pd,j1){!0===j1&&(go*=pd,Rl*=pd,uh*=pd),Wi.set(go,Rl,uh,pd),!1===Os.equals(Wi)&&(v.clearColor(go,Rl,uh,pd),Os.copy(Wi))},reset:function(){Gn=!1,Pr=null,Os.set(-1,0,0,0)}}},ne=new function b(){let Gn=!1,Wi=null,Pr=null,Os=null;return{setTest:function(go){go?no(v.DEPTH_TEST):Li(v.DEPTH_TEST)},setMask:function(go){Wi!==go&&!Gn&&(v.depthMask(go),Wi=go)},setFunc:function(go){if(Pr!==go){switch(go){case D:v.depthFunc(v.NEVER);break;case oe:v.depthFunc(v.ALWAYS);break;case _e:v.depthFunc(v.LESS);break;case Ee:v.depthFunc(v.LEQUAL);break;case Ve:v.depthFunc(v.EQUAL);break;case Qe:v.depthFunc(v.GEQUAL);break;case et:v.depthFunc(v.GREATER);break;case Tt:v.depthFunc(v.NOTEQUAL);break;default:v.depthFunc(v.LEQUAL)}Pr=go}},setLocked:function(go){Gn=go},setClear:function(go){Os!==go&&(v.clearDepth(go),Os=go)},reset:function(){Gn=!1,Wi=null,Pr=null,Os=null}}},ae=new function S(){let Gn=!1,Wi=null,Pr=null,Os=null,go=null,Rl=null,uh=null,pd=null,j1=null;return{setTest:function(oc){Gn||(oc?no(v.STENCIL_TEST):Li(v.STENCIL_TEST))},setMask:function(oc){Wi!==oc&&!Gn&&(v.stencilMask(oc),Wi=oc)},setFunc:function(oc,ep,tp){(Pr!==oc||Os!==ep||go!==tp)&&(v.stencilFunc(oc,ep,tp),Pr=oc,Os=ep,go=tp)},setOp:function(oc,ep,tp){(Rl!==oc||uh!==ep||pd!==tp)&&(v.stencilOp(oc,ep,tp),Rl=oc,uh=ep,pd=tp)},setLocked:function(oc){Gn=oc},setClear:function(oc){j1!==oc&&(v.clearStencil(oc),j1=oc)},reset:function(){Gn=!1,Wi=null,Pr=null,Os=null,go=null,Rl=null,uh=null,pd=null,j1=null}}},ge=new WeakMap,Te=new WeakMap;let Se={},Pe={},qe=new WeakMap,Ne=[],Fe=null,at=!1,_t=null,ut=null,ht=null,Rt=null,Xt=null,xn=null,bt=null,en=!1,bn=null,ui=null,Pi=null,hi=null,Vn=null;const Mi=v.getParameter(v.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Oi=!1,Xi=0;const Ai=v.getParameter(v.VERSION);-1!==Ai.indexOf("WebGL")?(Xi=parseFloat(/^WebGL (\d)/.exec(Ai)[1]),Oi=Xi>=1):-1!==Ai.indexOf("OpenGL ES")&&(Xi=parseFloat(/^OpenGL ES (\d)/.exec(Ai)[1]),Oi=Xi>=2);let Hn=null,Zn={};const _r=v.getParameter(v.SCISSOR_BOX),ur=v.getParameter(v.VIEWPORT),ai=(new js).fromArray(_r),As=(new js).fromArray(ur);function co(Gn,Wi,Pr){const Os=new Uint8Array(4),go=v.createTexture();v.bindTexture(Gn,go),v.texParameteri(Gn,v.TEXTURE_MIN_FILTER,v.NEAREST),v.texParameteri(Gn,v.TEXTURE_MAG_FILTER,v.NEAREST);for(let Rl=0;Rl<Pr;Rl++)v.texImage2D(Wi+Rl,0,v.RGBA,1,1,0,v.RGBA,v.UNSIGNED_BYTE,Os);return go}const Jn={};function no(Gn){!0!==Se[Gn]&&(v.enable(Gn),Se[Gn]=!0)}function Li(Gn){!1!==Se[Gn]&&(v.disable(Gn),Se[Gn]=!1)}Jn[v.TEXTURE_2D]=co(v.TEXTURE_2D,v.TEXTURE_2D,1),Jn[v.TEXTURE_CUBE_MAP]=co(v.TEXTURE_CUBE_MAP,v.TEXTURE_CUBE_MAP_POSITIVE_X,6),B.setClear(0,0,0,1),ne.setClear(1),ae.setClear(0),no(v.DEPTH_TEST),ne.setFunc(Ee),ji(!1),ps(je),no(v.CULL_FACE),bi(Z);const di={[m]:v.FUNC_ADD,[_]:v.FUNC_SUBTRACT,[F]:v.FUNC_REVERSE_SUBTRACT};if(h)di[R]=v.MIN,di[q]=v.MAX;else{const Gn=o.get("EXT_blend_minmax");null!==Gn&&(di[R]=Gn.MIN_EXT,di[q]=Gn.MAX_EXT)}const ri={[T]:v.ZERO,[$]:v.ONE,[J]:v.SRC_COLOR,[Me]:v.SRC_ALPHA,[le]:v.SRC_ALPHA_SATURATE,[U]:v.DST_COLOR,[fe]:v.DST_ALPHA,[ie]:v.ONE_MINUS_SRC_COLOR,[de]:v.ONE_MINUS_SRC_ALPHA,[z]:v.ONE_MINUS_DST_COLOR,[I]:v.ONE_MINUS_DST_ALPHA};function bi(Gn,Wi,Pr,Os,go,Rl,uh,pd){if(Gn!==Z){if(!1===at&&(no(v.BLEND),at=!0),Gn===w)go=go||Wi,Rl=Rl||Pr,uh=uh||Os,(Wi!==ut||go!==Xt)&&(v.blendEquationSeparate(di[Wi],di[go]),ut=Wi,Xt=go),(Pr!==ht||Os!==Rt||Rl!==xn||uh!==bt)&&(v.blendFuncSeparate(ri[Pr],ri[Os],ri[Rl],ri[uh]),ht=Pr,Rt=Os,xn=Rl,bt=uh),_t=Gn,en=null;else if(Gn!==_t||pd!==en){if((ut!==m||Xt!==m)&&(v.blendEquation(v.FUNC_ADD),ut=m,Xt=m),pd)switch(Gn){case O:v.blendFuncSeparate(v.ONE,v.ONE_MINUS_SRC_ALPHA,v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case P:v.blendFunc(v.ONE,v.ONE);break;case x:v.blendFuncSeparate(v.ZERO,v.ONE_MINUS_SRC_COLOR,v.ZERO,v.ONE);break;case p:v.blendFuncSeparate(v.ZERO,v.SRC_COLOR,v.ZERO,v.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Gn)}else switch(Gn){case O:v.blendFuncSeparate(v.SRC_ALPHA,v.ONE_MINUS_SRC_ALPHA,v.ONE,v.ONE_MINUS_SRC_ALPHA);break;case P:v.blendFunc(v.SRC_ALPHA,v.ONE);break;case x:v.blendFuncSeparate(v.ZERO,v.ONE_MINUS_SRC_COLOR,v.ZERO,v.ONE);break;case p:v.blendFunc(v.ZERO,v.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Gn)}ht=null,Rt=null,xn=null,bt=null,_t=Gn,en=pd}}else!0===at&&(Li(v.BLEND),at=!1)}function ji(Gn){bn!==Gn&&(v.frontFace(Gn?v.CW:v.CCW),bn=Gn)}function ps(Gn){Gn!==Be?(no(v.CULL_FACE),Gn!==ui&&v.cullFace(Gn===je?v.BACK:Gn===Ze?v.FRONT:v.FRONT_AND_BACK)):Li(v.CULL_FACE),ui=Gn}function vr(Gn,Wi,Pr){Gn?(no(v.POLYGON_OFFSET_FILL),(hi!==Wi||Vn!==Pr)&&(v.polygonOffset(Wi,Pr),hi=Wi,Vn=Pr)):Li(v.POLYGON_OFFSET_FILL)}return{buffers:{color:B,depth:ne,stencil:ae},enable:no,disable:Li,bindFramebuffer:function Mr(Gn,Wi){return Pe[Gn]!==Wi&&(v.bindFramebuffer(Gn,Wi),Pe[Gn]=Wi,h&&(Gn===v.DRAW_FRAMEBUFFER&&(Pe[v.FRAMEBUFFER]=Wi),Gn===v.FRAMEBUFFER&&(Pe[v.DRAW_FRAMEBUFFER]=Wi)),!0)},drawBuffers:function vi(Gn,Wi){let Pr=Ne,Os=!1;if(Gn)if(Pr=qe.get(Wi),void 0===Pr&&(Pr=[],qe.set(Wi,Pr)),Gn.isWebGLMultipleRenderTargets){const go=Gn.texture;if(Pr.length!==go.length||Pr[0]!==v.COLOR_ATTACHMENT0){for(let Rl=0,uh=go.length;Rl<uh;Rl++)Pr[Rl]=v.COLOR_ATTACHMENT0+Rl;Pr.length=go.length,Os=!0}}else Pr[0]!==v.COLOR_ATTACHMENT0&&(Pr[0]=v.COLOR_ATTACHMENT0,Os=!0);else Pr[0]!==v.BACK&&(Pr[0]=v.BACK,Os=!0);Os&&(c.isWebGL2?v.drawBuffers(Pr):o.get("WEBGL_draw_buffers").drawBuffersWEBGL(Pr))},useProgram:function Ji(Gn){return Fe!==Gn&&(v.useProgram(Gn),Fe=Gn,!0)},setBlending:bi,setMaterial:function or(Gn,Wi){Gn.side===X?Li(v.CULL_FACE):no(v.CULL_FACE);let Pr=Gn.side===ue;Wi&&(Pr=!Pr),ji(Pr),Gn.blending===O&&!1===Gn.transparent?bi(Z):bi(Gn.blending,Gn.blendEquation,Gn.blendSrc,Gn.blendDst,Gn.blendEquationAlpha,Gn.blendSrcAlpha,Gn.blendDstAlpha,Gn.premultipliedAlpha),ne.setFunc(Gn.depthFunc),ne.setTest(Gn.depthTest),ne.setMask(Gn.depthWrite),B.setMask(Gn.colorWrite);const Os=Gn.stencilWrite;ae.setTest(Os),Os&&(ae.setMask(Gn.stencilWriteMask),ae.setFunc(Gn.stencilFunc,Gn.stencilRef,Gn.stencilFuncMask),ae.setOp(Gn.stencilFail,Gn.stencilZFail,Gn.stencilZPass)),vr(Gn.polygonOffset,Gn.polygonOffsetFactor,Gn.polygonOffsetUnits),!0===Gn.alphaToCoverage?no(v.SAMPLE_ALPHA_TO_COVERAGE):Li(v.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:ji,setCullFace:ps,setLineWidth:function ms(Gn){Gn!==Pi&&(Oi&&v.lineWidth(Gn),Pi=Gn)},setPolygonOffset:vr,setScissorTest:function Ys(Gn){Gn?no(v.SCISSOR_TEST):Li(v.SCISSOR_TEST)},activeTexture:function Ro(Gn){void 0===Gn&&(Gn=v.TEXTURE0+Mi-1),Hn!==Gn&&(v.activeTexture(Gn),Hn=Gn)},bindTexture:function Yt(Gn,Wi,Pr){void 0===Pr&&(Pr=null===Hn?v.TEXTURE0+Mi-1:Hn);let Os=Zn[Pr];void 0===Os&&(Os={type:void 0,texture:void 0},Zn[Pr]=Os),(Os.type!==Gn||Os.texture!==Wi)&&(Hn!==Pr&&(v.activeTexture(Pr),Hn=Pr),v.bindTexture(Gn,Wi||Jn[Gn]),Os.type=Gn,Os.texture=Wi)},unbindTexture:function Dt(){const Gn=Zn[Hn];void 0!==Gn&&void 0!==Gn.type&&(v.bindTexture(Gn.type,null),Gn.type=void 0,Gn.texture=void 0)},compressedTexImage2D:function Kn(){try{v.compressedTexImage2D.apply(v,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}},compressedTexImage3D:function Hi(){try{v.compressedTexImage3D.apply(v,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}},texImage2D:function ls(){try{v.texImage2D.apply(v,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}},texImage3D:function ss(){try{v.texImage3D.apply(v,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}},updateUBOMapping:function Oa(Gn,Wi){let Pr=Te.get(Wi);void 0===Pr&&(Pr=new WeakMap,Te.set(Wi,Pr));let Os=Pr.get(Gn);void 0===Os&&(Os=v.getUniformBlockIndex(Wi,Gn.name),Pr.set(Gn,Os))},uniformBlockBinding:function fa(Gn,Wi){const Os=Te.get(Wi).get(Gn);ge.get(Gn)!==Os&&(v.uniformBlockBinding(Wi,Os,Gn.__bindingPointIndex),ge.set(Gn,Os))},texStorage2D:function Xn(){try{v.texStorage2D.apply(v,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}},texStorage3D:function rs(){try{v.texStorage3D.apply(v,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}},texSubImage2D:function rr(){try{v.texSubImage2D.apply(v,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}},texSubImage3D:function Lr(){try{v.texSubImage3D.apply(v,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}},compressedTexSubImage2D:function Us(){try{v.compressedTexSubImage2D.apply(v,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}},compressedTexSubImage3D:function Cn(){try{v.compressedTexSubImage3D.apply(v,arguments)}catch(Gn){console.error("THREE.WebGLState:",Gn)}},scissor:function uo(Gn){!1===ai.equals(Gn)&&(v.scissor(Gn.x,Gn.y,Gn.z,Gn.w),ai.copy(Gn))},viewport:function oo(Gn){!1===As.equals(Gn)&&(v.viewport(Gn.x,Gn.y,Gn.z,Gn.w),As.copy(Gn))},reset:function $a(){v.disable(v.BLEND),v.disable(v.CULL_FACE),v.disable(v.DEPTH_TEST),v.disable(v.POLYGON_OFFSET_FILL),v.disable(v.SCISSOR_TEST),v.disable(v.STENCIL_TEST),v.disable(v.SAMPLE_ALPHA_TO_COVERAGE),v.blendEquation(v.FUNC_ADD),v.blendFunc(v.ONE,v.ZERO),v.blendFuncSeparate(v.ONE,v.ZERO,v.ONE,v.ZERO),v.colorMask(!0,!0,!0,!0),v.clearColor(0,0,0,0),v.depthMask(!0),v.depthFunc(v.LESS),v.clearDepth(1),v.stencilMask(4294967295),v.stencilFunc(v.ALWAYS,0,4294967295),v.stencilOp(v.KEEP,v.KEEP,v.KEEP),v.clearStencil(0),v.cullFace(v.BACK),v.frontFace(v.CCW),v.polygonOffset(0,0),v.activeTexture(v.TEXTURE0),v.bindFramebuffer(v.FRAMEBUFFER,null),!0===h&&(v.bindFramebuffer(v.DRAW_FRAMEBUFFER,null),v.bindFramebuffer(v.READ_FRAMEBUFFER,null)),v.useProgram(null),v.lineWidth(1),v.scissor(0,0,v.canvas.width,v.canvas.height),v.viewport(0,0,v.canvas.width,v.canvas.height),Se={},Hn=null,Zn={},Pe={},qe=new WeakMap,Ne=[],Fe=null,at=!1,_t=null,ut=null,ht=null,Rt=null,Xt=null,xn=null,bt=null,en=!1,bn=null,ui=null,Pi=null,hi=null,Vn=null,ai.set(0,0,v.canvas.width,v.canvas.height),As.set(0,0,v.canvas.width,v.canvas.height),B.reset(),ne.reset(),ae.reset()}}}function cd(v,o,c,h,f,b,S){const B=f.isWebGL2,ne=f.maxTextures,ae=f.maxCubemapSize,ge=f.maxTextureSize,Te=f.maxSamples,Se=o.has("WEBGL_multisampled_render_to_texture")?o.get("WEBGL_multisampled_render_to_texture"):null,Pe=/OculusBrowser/g.test(typeof navigator>"u"?"":navigator.userAgent),qe=new WeakMap;let Ne;const Fe=new WeakMap;let at=!1;try{at=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch{}function _t(Yt,Dt){return at?new OffscreenCanvas(Yt,Dt):XA("canvas")}function ut(Yt,Dt,Kn,Hi){let rr=1;if((Yt.width>Hi||Yt.height>Hi)&&(rr=Hi/Math.max(Yt.width,Yt.height)),rr<1||!0===Dt){if(typeof HTMLImageElement<"u"&&Yt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Yt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Yt instanceof ImageBitmap){const Lr=Dt?wa:Math.floor,Us=Lr(rr*Yt.width),Cn=Lr(rr*Yt.height);void 0===Ne&&(Ne=_t(Us,Cn));const Xn=Kn?_t(Us,Cn):Ne;return Xn.width=Us,Xn.height=Cn,Xn.getContext("2d").drawImage(Yt,0,0,Us,Cn),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Yt.width+"x"+Yt.height+") to ("+Us+"x"+Cn+")."),Xn}return"data"in Yt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Yt.width+"x"+Yt.height+")."),Yt}return Yt}function ht(Yt){return Zu(Yt.width)&&Zu(Yt.height)}function Xt(Yt,Dt){return Yt.generateMipmaps&&Dt&&Yt.minFilter!==Gt&&Yt.minFilter!==ci}function xn(Yt){v.generateMipmap(Yt)}function bt(Yt,Dt,Kn,Hi,rr=!1){if(!1===B)return Dt;if(null!==Yt){if(void 0!==v[Yt])return v[Yt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Yt+"'")}let Lr=Dt;return Dt===v.RED&&(Kn===v.FLOAT&&(Lr=v.R32F),Kn===v.HALF_FLOAT&&(Lr=v.R16F),Kn===v.UNSIGNED_BYTE&&(Lr=v.R8)),Dt===v.RG&&(Kn===v.FLOAT&&(Lr=v.RG32F),Kn===v.HALF_FLOAT&&(Lr=v.RG16F),Kn===v.UNSIGNED_BYTE&&(Lr=v.RG8)),Dt===v.RGBA&&(Kn===v.FLOAT&&(Lr=v.RGBA32F),Kn===v.HALF_FLOAT&&(Lr=v.RGBA16F),Kn===v.UNSIGNED_BYTE&&(Lr=Hi===Mo&&!1===rr?v.SRGB8_ALPHA8:v.RGBA8),Kn===v.UNSIGNED_SHORT_4_4_4_4&&(Lr=v.RGBA4),Kn===v.UNSIGNED_SHORT_5_5_5_1&&(Lr=v.RGB5_A1)),(Lr===v.R16F||Lr===v.R32F||Lr===v.RG16F||Lr===v.RG32F||Lr===v.RGBA16F||Lr===v.RGBA32F)&&o.get("EXT_color_buffer_float"),Lr}function en(Yt,Dt,Kn){return!0===Xt(Yt,Kn)||Yt.isFramebufferTexture&&Yt.minFilter!==Gt&&Yt.minFilter!==ci?Math.log2(Math.max(Dt.width,Dt.height))+1:void 0!==Yt.mipmaps&&Yt.mipmaps.length>0?Yt.mipmaps.length:Yt.isCompressedTexture&&Array.isArray(Yt.image)?Dt.mipmaps.length:1}function bn(Yt){return Yt===Gt||Yt===qt||Yt===_n?v.NEAREST:v.LINEAR}function ui(Yt){const Dt=Yt.target;Dt.removeEventListener("dispose",ui),function hi(Yt){const Dt=h.get(Yt);if(void 0===Dt.__webglInit)return;const Kn=Yt.source,Hi=Fe.get(Kn);if(Hi){const rr=Hi[Dt.__cacheKey];rr.usedTimes--,0===rr.usedTimes&&Vn(Yt),0===Object.keys(Hi).length&&Fe.delete(Kn)}h.remove(Yt)}(Dt),Dt.isVideoTexture&&qe.delete(Dt)}function Pi(Yt){const Dt=Yt.target;Dt.removeEventListener("dispose",Pi),function Mi(Yt){const Dt=Yt.texture,Kn=h.get(Yt),Hi=h.get(Dt);if(void 0!==Hi.__webglTexture&&(v.deleteTexture(Hi.__webglTexture),S.memory.textures--),Yt.depthTexture&&Yt.depthTexture.dispose(),Yt.isWebGLCubeRenderTarget)for(let rr=0;rr<6;rr++)v.deleteFramebuffer(Kn.__webglFramebuffer[rr]),Kn.__webglDepthbuffer&&v.deleteRenderbuffer(Kn.__webglDepthbuffer[rr]);else{if(v.deleteFramebuffer(Kn.__webglFramebuffer),Kn.__webglDepthbuffer&&v.deleteRenderbuffer(Kn.__webglDepthbuffer),Kn.__webglMultisampledFramebuffer&&v.deleteFramebuffer(Kn.__webglMultisampledFramebuffer),Kn.__webglColorRenderbuffer)for(let rr=0;rr<Kn.__webglColorRenderbuffer.length;rr++)Kn.__webglColorRenderbuffer[rr]&&v.deleteRenderbuffer(Kn.__webglColorRenderbuffer[rr]);Kn.__webglDepthRenderbuffer&&v.deleteRenderbuffer(Kn.__webglDepthRenderbuffer)}if(Yt.isWebGLMultipleRenderTargets)for(let rr=0,Lr=Dt.length;rr<Lr;rr++){const Us=h.get(Dt[rr]);Us.__webglTexture&&(v.deleteTexture(Us.__webglTexture),S.memory.textures--),h.remove(Dt[rr])}h.remove(Dt),h.remove(Yt)}(Dt)}function Vn(Yt){const Dt=h.get(Yt);v.deleteTexture(Dt.__webglTexture),delete Fe.get(Yt.source)[Dt.__cacheKey],S.memory.textures--}let Oi=0;function Zn(Yt,Dt){const Kn=h.get(Yt);if(Yt.isVideoTexture&&function Ys(Yt){const Dt=S.render.frame;qe.get(Yt)!==Dt&&(qe.set(Yt,Dt),Yt.update())}(Yt),!1===Yt.isRenderTargetTexture&&Yt.version>0&&Kn.__version!==Yt.version){const Hi=Yt.image;if(null===Hi)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==Hi.complete)return void Li(Kn,Yt,Dt);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}c.bindTexture(v.TEXTURE_2D,Kn.__webglTexture,v.TEXTURE0+Dt)}const As={[$n]:v.REPEAT,[vn]:v.CLAMP_TO_EDGE,[rn]:v.MIRRORED_REPEAT},co={[Gt]:v.NEAREST,[qt]:v.NEAREST_MIPMAP_NEAREST,[_n]:v.NEAREST_MIPMAP_LINEAR,[ci]:v.LINEAR,[ir]:v.LINEAR_MIPMAP_NEAREST,[br]:v.LINEAR_MIPMAP_LINEAR};function Jn(Yt,Dt,Kn){if(Kn?(v.texParameteri(Yt,v.TEXTURE_WRAP_S,As[Dt.wrapS]),v.texParameteri(Yt,v.TEXTURE_WRAP_T,As[Dt.wrapT]),(Yt===v.TEXTURE_3D||Yt===v.TEXTURE_2D_ARRAY)&&v.texParameteri(Yt,v.TEXTURE_WRAP_R,As[Dt.wrapR]),v.texParameteri(Yt,v.TEXTURE_MAG_FILTER,co[Dt.magFilter]),v.texParameteri(Yt,v.TEXTURE_MIN_FILTER,co[Dt.minFilter])):(v.texParameteri(Yt,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(Yt,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),(Yt===v.TEXTURE_3D||Yt===v.TEXTURE_2D_ARRAY)&&v.texParameteri(Yt,v.TEXTURE_WRAP_R,v.CLAMP_TO_EDGE),(Dt.wrapS!==vn||Dt.wrapT!==vn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),v.texParameteri(Yt,v.TEXTURE_MAG_FILTER,bn(Dt.magFilter)),v.texParameteri(Yt,v.TEXTURE_MIN_FILTER,bn(Dt.minFilter)),Dt.minFilter!==Gt&&Dt.minFilter!==ci&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===o.has("EXT_texture_filter_anisotropic")){const Hi=o.get("EXT_texture_filter_anisotropic");if(Dt.type===ws&&!1===o.has("OES_texture_float_linear")||!1===B&&Dt.type===Es&&!1===o.has("OES_texture_half_float_linear"))return;(Dt.anisotropy>1||h.get(Dt).__currentAnisotropy)&&(v.texParameterf(Yt,Hi.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Dt.anisotropy,f.getMaxAnisotropy())),h.get(Dt).__currentAnisotropy=Dt.anisotropy)}}function no(Yt,Dt){let Kn=!1;void 0===Yt.__webglInit&&(Yt.__webglInit=!0,Dt.addEventListener("dispose",ui));const Hi=Dt.source;let rr=Fe.get(Hi);void 0===rr&&(rr={},Fe.set(Hi,rr));const Lr=function Hn(Yt){const Dt=[];return Dt.push(Yt.wrapS),Dt.push(Yt.wrapT),Dt.push(Yt.wrapR||0),Dt.push(Yt.magFilter),Dt.push(Yt.minFilter),Dt.push(Yt.anisotropy),Dt.push(Yt.internalFormat),Dt.push(Yt.format),Dt.push(Yt.type),Dt.push(Yt.generateMipmaps),Dt.push(Yt.premultiplyAlpha),Dt.push(Yt.flipY),Dt.push(Yt.unpackAlignment),Dt.push(Yt.encoding),Dt.join()}(Dt);if(Lr!==Yt.__cacheKey){void 0===rr[Lr]&&(rr[Lr]={texture:v.createTexture(),usedTimes:0},S.memory.textures++,Kn=!0),rr[Lr].usedTimes++;const Us=rr[Yt.__cacheKey];void 0!==Us&&(rr[Yt.__cacheKey].usedTimes--,0===Us.usedTimes&&Vn(Dt)),Yt.__cacheKey=Lr,Yt.__webglTexture=rr[Lr].texture}return Kn}function Li(Yt,Dt,Kn){let Hi=v.TEXTURE_2D;(Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(Hi=v.TEXTURE_2D_ARRAY),Dt.isData3DTexture&&(Hi=v.TEXTURE_3D);const rr=no(Yt,Dt),Lr=Dt.source;c.bindTexture(Hi,Yt.__webglTexture,v.TEXTURE0+Kn);const Us=h.get(Lr);if(Lr.version!==Us.__version||!0===rr){c.activeTexture(v.TEXTURE0+Kn),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,Dt.flipY),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Dt.premultiplyAlpha),v.pixelStorei(v.UNPACK_ALIGNMENT,Dt.unpackAlignment),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,v.NONE);const Cn=function Rt(Yt){return!B&&(Yt.wrapS!==vn||Yt.wrapT!==vn||Yt.minFilter!==Gt&&Yt.minFilter!==ci)}(Dt)&&!1===ht(Dt.image);let Xn=ut(Dt.image,Cn,!1,ge);Xn=Ro(Dt,Xn);const rs=ht(Xn)||B,ls=b.convert(Dt.format,Dt.encoding);let oo,ss=b.convert(Dt.type),uo=bt(Dt.internalFormat,ls,ss,Dt.encoding,Dt.isVideoTexture);Jn(Hi,Dt,rs);const Oa=Dt.mipmaps,fa=B&&!0!==Dt.isVideoTexture,$a=void 0===Us.__version||!0===rr,Gn=en(Dt,Xn,rs);if(Dt.isDepthTexture)uo=v.DEPTH_COMPONENT,B?uo=Dt.type===ws?v.DEPTH_COMPONENT32F:Dt.type===ro?v.DEPTH_COMPONENT24:Dt.type===fo?v.DEPTH24_STENCIL8:v.DEPTH_COMPONENT16:Dt.type===ws&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Dt.format===lo&&uo===v.DEPTH_COMPONENT&&Dt.type!==es&&Dt.type!==ro&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Dt.type=ro,ss=b.convert(Dt.type)),Dt.format===Yi&&uo===v.DEPTH_COMPONENT&&(uo=v.DEPTH_STENCIL,Dt.type!==fo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Dt.type=fo,ss=b.convert(Dt.type))),$a&&(fa?c.texStorage2D(v.TEXTURE_2D,1,uo,Xn.width,Xn.height):c.texImage2D(v.TEXTURE_2D,0,uo,Xn.width,Xn.height,0,ls,ss,null));else if(Dt.isDataTexture)if(Oa.length>0&&rs){fa&&$a&&c.texStorage2D(v.TEXTURE_2D,Gn,uo,Oa[0].width,Oa[0].height);for(let Wi=0,Pr=Oa.length;Wi<Pr;Wi++)oo=Oa[Wi],fa?c.texSubImage2D(v.TEXTURE_2D,Wi,0,0,oo.width,oo.height,ls,ss,oo.data):c.texImage2D(v.TEXTURE_2D,Wi,uo,oo.width,oo.height,0,ls,ss,oo.data);Dt.generateMipmaps=!1}else fa?($a&&c.texStorage2D(v.TEXTURE_2D,Gn,uo,Xn.width,Xn.height),c.texSubImage2D(v.TEXTURE_2D,0,0,0,Xn.width,Xn.height,ls,ss,Xn.data)):c.texImage2D(v.TEXTURE_2D,0,uo,Xn.width,Xn.height,0,ls,ss,Xn.data);else if(Dt.isCompressedTexture)if(Dt.isCompressedArrayTexture){fa&&$a&&c.texStorage3D(v.TEXTURE_2D_ARRAY,Gn,uo,Oa[0].width,Oa[0].height,Xn.depth);for(let Wi=0,Pr=Oa.length;Wi<Pr;Wi++)oo=Oa[Wi],Dt.format!==xr?null!==ls?fa?c.compressedTexSubImage3D(v.TEXTURE_2D_ARRAY,Wi,0,0,0,oo.width,oo.height,Xn.depth,ls,oo.data,0,0):c.compressedTexImage3D(v.TEXTURE_2D_ARRAY,Wi,uo,oo.width,oo.height,Xn.depth,0,oo.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):fa?c.texSubImage3D(v.TEXTURE_2D_ARRAY,Wi,0,0,0,oo.width,oo.height,Xn.depth,ls,ss,oo.data):c.texImage3D(v.TEXTURE_2D_ARRAY,Wi,uo,oo.width,oo.height,Xn.depth,0,ls,ss,oo.data)}else{fa&&$a&&c.texStorage2D(v.TEXTURE_2D,Gn,uo,Oa[0].width,Oa[0].height);for(let Wi=0,Pr=Oa.length;Wi<Pr;Wi++)oo=Oa[Wi],Dt.format!==xr?null!==ls?fa?c.compressedTexSubImage2D(v.TEXTURE_2D,Wi,0,0,oo.width,oo.height,ls,oo.data):c.compressedTexImage2D(v.TEXTURE_2D,Wi,uo,oo.width,oo.height,0,oo.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):fa?c.texSubImage2D(v.TEXTURE_2D,Wi,0,0,oo.width,oo.height,ls,ss,oo.data):c.texImage2D(v.TEXTURE_2D,Wi,uo,oo.width,oo.height,0,ls,ss,oo.data)}else if(Dt.isDataArrayTexture)fa?($a&&c.texStorage3D(v.TEXTURE_2D_ARRAY,Gn,uo,Xn.width,Xn.height,Xn.depth),c.texSubImage3D(v.TEXTURE_2D_ARRAY,0,0,0,0,Xn.width,Xn.height,Xn.depth,ls,ss,Xn.data)):c.texImage3D(v.TEXTURE_2D_ARRAY,0,uo,Xn.width,Xn.height,Xn.depth,0,ls,ss,Xn.data);else if(Dt.isData3DTexture)fa?($a&&c.texStorage3D(v.TEXTURE_3D,Gn,uo,Xn.width,Xn.height,Xn.depth),c.texSubImage3D(v.TEXTURE_3D,0,0,0,0,Xn.width,Xn.height,Xn.depth,ls,ss,Xn.data)):c.texImage3D(v.TEXTURE_3D,0,uo,Xn.width,Xn.height,Xn.depth,0,ls,ss,Xn.data);else if(Dt.isFramebufferTexture){if($a)if(fa)c.texStorage2D(v.TEXTURE_2D,Gn,uo,Xn.width,Xn.height);else{let Wi=Xn.width,Pr=Xn.height;for(let Os=0;Os<Gn;Os++)c.texImage2D(v.TEXTURE_2D,Os,uo,Wi,Pr,0,ls,ss,null),Wi>>=1,Pr>>=1}}else if(Oa.length>0&&rs){fa&&$a&&c.texStorage2D(v.TEXTURE_2D,Gn,uo,Oa[0].width,Oa[0].height);for(let Wi=0,Pr=Oa.length;Wi<Pr;Wi++)oo=Oa[Wi],fa?c.texSubImage2D(v.TEXTURE_2D,Wi,0,0,ls,ss,oo):c.texImage2D(v.TEXTURE_2D,Wi,uo,ls,ss,oo);Dt.generateMipmaps=!1}else fa?($a&&c.texStorage2D(v.TEXTURE_2D,Gn,uo,Xn.width,Xn.height),c.texSubImage2D(v.TEXTURE_2D,0,0,0,ls,ss,Xn)):c.texImage2D(v.TEXTURE_2D,0,uo,ls,ss,Xn);Xt(Dt,rs)&&xn(Hi),Us.__version=Lr.version,Dt.onUpdate&&Dt.onUpdate(Dt)}Yt.__version=Dt.version}function vi(Yt,Dt,Kn,Hi,rr){const Lr=b.convert(Kn.format,Kn.encoding),Us=b.convert(Kn.type),Cn=bt(Kn.internalFormat,Lr,Us,Kn.encoding);h.get(Dt).__hasExternalTextures||(rr===v.TEXTURE_3D||rr===v.TEXTURE_2D_ARRAY?c.texImage3D(rr,0,Cn,Dt.width,Dt.height,Dt.depth,0,Lr,Us,null):c.texImage2D(rr,0,Cn,Dt.width,Dt.height,0,Lr,Us,null)),c.bindFramebuffer(v.FRAMEBUFFER,Yt),vr(Dt)?Se.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,Hi,rr,h.get(Kn).__webglTexture,0,ms(Dt)):(rr===v.TEXTURE_2D||rr>=v.TEXTURE_CUBE_MAP_POSITIVE_X&&rr<=v.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&v.framebufferTexture2D(v.FRAMEBUFFER,Hi,rr,h.get(Kn).__webglTexture,0),c.bindFramebuffer(v.FRAMEBUFFER,null)}function Ji(Yt,Dt,Kn){if(v.bindRenderbuffer(v.RENDERBUFFER,Yt),Dt.depthBuffer&&!Dt.stencilBuffer){let Hi=v.DEPTH_COMPONENT16;if(Kn||vr(Dt)){const rr=Dt.depthTexture;rr&&rr.isDepthTexture&&(rr.type===ws?Hi=v.DEPTH_COMPONENT32F:rr.type===ro&&(Hi=v.DEPTH_COMPONENT24));const Lr=ms(Dt);vr(Dt)?Se.renderbufferStorageMultisampleEXT(v.RENDERBUFFER,Lr,Hi,Dt.width,Dt.height):v.renderbufferStorageMultisample(v.RENDERBUFFER,Lr,Hi,Dt.width,Dt.height)}else v.renderbufferStorage(v.RENDERBUFFER,Hi,Dt.width,Dt.height);v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.RENDERBUFFER,Yt)}else if(Dt.depthBuffer&&Dt.stencilBuffer){const Hi=ms(Dt);Kn&&!1===vr(Dt)?v.renderbufferStorageMultisample(v.RENDERBUFFER,Hi,v.DEPTH24_STENCIL8,Dt.width,Dt.height):vr(Dt)?Se.renderbufferStorageMultisampleEXT(v.RENDERBUFFER,Hi,v.DEPTH24_STENCIL8,Dt.width,Dt.height):v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,Dt.width,Dt.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.RENDERBUFFER,Yt)}else{const Hi=!0===Dt.isWebGLMultipleRenderTargets?Dt.texture:[Dt.texture];for(let rr=0;rr<Hi.length;rr++){const Lr=Hi[rr],Us=b.convert(Lr.format,Lr.encoding),Cn=b.convert(Lr.type),Xn=bt(Lr.internalFormat,Us,Cn,Lr.encoding),rs=ms(Dt);Kn&&!1===vr(Dt)?v.renderbufferStorageMultisample(v.RENDERBUFFER,rs,Xn,Dt.width,Dt.height):vr(Dt)?Se.renderbufferStorageMultisampleEXT(v.RENDERBUFFER,rs,Xn,Dt.width,Dt.height):v.renderbufferStorage(v.RENDERBUFFER,Xn,Dt.width,Dt.height)}}v.bindRenderbuffer(v.RENDERBUFFER,null)}function ri(Yt){const Dt=h.get(Yt),Kn=!0===Yt.isWebGLCubeRenderTarget;if(Yt.depthTexture&&!Dt.__autoAllocateDepthBuffer){if(Kn)throw new Error("target.depthTexture not supported in Cube render targets");!function di(Yt,Dt){if(Dt&&Dt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(c.bindFramebuffer(v.FRAMEBUFFER,Yt),!Dt.depthTexture||!Dt.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!h.get(Dt.depthTexture).__webglTexture||Dt.depthTexture.image.width!==Dt.width||Dt.depthTexture.image.height!==Dt.height)&&(Dt.depthTexture.image.width=Dt.width,Dt.depthTexture.image.height=Dt.height,Dt.depthTexture.needsUpdate=!0),Zn(Dt.depthTexture,0);const Hi=h.get(Dt.depthTexture).__webglTexture,rr=ms(Dt);if(Dt.depthTexture.format===lo)vr(Dt)?Se.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.TEXTURE_2D,Hi,0,rr):v.framebufferTexture2D(v.FRAMEBUFFER,v.DEPTH_ATTACHMENT,v.TEXTURE_2D,Hi,0);else{if(Dt.depthTexture.format!==Yi)throw new Error("Unknown depthTexture format");vr(Dt)?Se.framebufferTexture2DMultisampleEXT(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.TEXTURE_2D,Hi,0,rr):v.framebufferTexture2D(v.FRAMEBUFFER,v.DEPTH_STENCIL_ATTACHMENT,v.TEXTURE_2D,Hi,0)}}(Dt.__webglFramebuffer,Yt)}else if(Kn){Dt.__webglDepthbuffer=[];for(let Hi=0;Hi<6;Hi++)c.bindFramebuffer(v.FRAMEBUFFER,Dt.__webglFramebuffer[Hi]),Dt.__webglDepthbuffer[Hi]=v.createRenderbuffer(),Ji(Dt.__webglDepthbuffer[Hi],Yt,!1)}else c.bindFramebuffer(v.FRAMEBUFFER,Dt.__webglFramebuffer),Dt.__webglDepthbuffer=v.createRenderbuffer(),Ji(Dt.__webglDepthbuffer,Yt,!1);c.bindFramebuffer(v.FRAMEBUFFER,null)}function ms(Yt){return Math.min(Te,Yt.samples)}function vr(Yt){const Dt=h.get(Yt);return B&&Yt.samples>0&&!0===o.has("WEBGL_multisampled_render_to_texture")&&!1!==Dt.__useRenderToTexture}function Ro(Yt,Dt){const Kn=Yt.encoding,Hi=Yt.format,rr=Yt.type;return!0===Yt.isCompressedTexture||!0===Yt.isVideoTexture||Yt.format===Qs||Kn!==Qa&&(Kn===Mo?!1===B?!0===o.has("EXT_sRGB")&&Hi===xr?(Yt.format=Qs,Yt.minFilter=ci,Yt.generateMipmaps=!1):Dt=qh.sRGBToLinear(Dt):(Hi!==xr||rr!==Ar)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Kn)),Dt}this.allocateTextureUnit=function Ai(){const Yt=Oi;return Yt>=ne&&console.warn("THREE.WebGLTextures: Trying to use "+Yt+" texture units while this GPU supports only "+ne),Oi+=1,Yt},this.resetTextureUnits=function Xi(){Oi=0},this.setTexture2D=Zn,this.setTexture2DArray=function _r(Yt,Dt){const Kn=h.get(Yt);Yt.version>0&&Kn.__version!==Yt.version?Li(Kn,Yt,Dt):c.bindTexture(v.TEXTURE_2D_ARRAY,Kn.__webglTexture,v.TEXTURE0+Dt)},this.setTexture3D=function ur(Yt,Dt){const Kn=h.get(Yt);Yt.version>0&&Kn.__version!==Yt.version?Li(Kn,Yt,Dt):c.bindTexture(v.TEXTURE_3D,Kn.__webglTexture,v.TEXTURE0+Dt)},this.setTextureCube=function ai(Yt,Dt){const Kn=h.get(Yt);Yt.version>0&&Kn.__version!==Yt.version?function Mr(Yt,Dt,Kn){if(6!==Dt.image.length)return;const Hi=no(Yt,Dt),rr=Dt.source;c.bindTexture(v.TEXTURE_CUBE_MAP,Yt.__webglTexture,v.TEXTURE0+Kn);const Lr=h.get(rr);if(rr.version!==Lr.__version||!0===Hi){c.activeTexture(v.TEXTURE0+Kn),v.pixelStorei(v.UNPACK_FLIP_Y_WEBGL,Dt.flipY),v.pixelStorei(v.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Dt.premultiplyAlpha),v.pixelStorei(v.UNPACK_ALIGNMENT,Dt.unpackAlignment),v.pixelStorei(v.UNPACK_COLORSPACE_CONVERSION_WEBGL,v.NONE);const Us=Dt.isCompressedTexture||Dt.image[0].isCompressedTexture,Cn=Dt.image[0]&&Dt.image[0].isDataTexture,Xn=[];for(let Wi=0;Wi<6;Wi++)Xn[Wi]=Us||Cn?Cn?Dt.image[Wi].image:Dt.image[Wi]:ut(Dt.image[Wi],!1,!0,ae),Xn[Wi]=Ro(Dt,Xn[Wi]);const rs=Xn[0],ls=ht(rs)||B,ss=b.convert(Dt.format,Dt.encoding),uo=b.convert(Dt.type),oo=bt(Dt.internalFormat,ss,uo,Dt.encoding),Oa=B&&!0!==Dt.isVideoTexture,fa=void 0===Lr.__version||!0===Hi;let Gn,$a=en(Dt,rs,ls);if(Jn(v.TEXTURE_CUBE_MAP,Dt,ls),Us){Oa&&fa&&c.texStorage2D(v.TEXTURE_CUBE_MAP,$a,oo,rs.width,rs.height);for(let Wi=0;Wi<6;Wi++){Gn=Xn[Wi].mipmaps;for(let Pr=0;Pr<Gn.length;Pr++){const Os=Gn[Pr];Dt.format!==xr?null!==ss?Oa?c.compressedTexSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,Pr,0,0,Os.width,Os.height,ss,Os.data):c.compressedTexImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,Pr,oo,Os.width,Os.height,0,Os.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Oa?c.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,Pr,0,0,Os.width,Os.height,ss,uo,Os.data):c.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,Pr,oo,Os.width,Os.height,0,ss,uo,Os.data)}}}else{Gn=Dt.mipmaps,Oa&&fa&&(Gn.length>0&&$a++,c.texStorage2D(v.TEXTURE_CUBE_MAP,$a,oo,Xn[0].width,Xn[0].height));for(let Wi=0;Wi<6;Wi++)if(Cn){Oa?c.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,0,0,0,Xn[Wi].width,Xn[Wi].height,ss,uo,Xn[Wi].data):c.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,0,oo,Xn[Wi].width,Xn[Wi].height,0,ss,uo,Xn[Wi].data);for(let Pr=0;Pr<Gn.length;Pr++){const go=Gn[Pr].image[Wi].image;Oa?c.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,Pr+1,0,0,go.width,go.height,ss,uo,go.data):c.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,Pr+1,oo,go.width,go.height,0,ss,uo,go.data)}}else{Oa?c.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,0,0,0,ss,uo,Xn[Wi]):c.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,0,oo,ss,uo,Xn[Wi]);for(let Pr=0;Pr<Gn.length;Pr++){const Os=Gn[Pr];Oa?c.texSubImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,Pr+1,0,0,ss,uo,Os.image[Wi]):c.texImage2D(v.TEXTURE_CUBE_MAP_POSITIVE_X+Wi,Pr+1,oo,ss,uo,Os.image[Wi])}}}Xt(Dt,ls)&&xn(v.TEXTURE_CUBE_MAP),Lr.__version=rr.version,Dt.onUpdate&&Dt.onUpdate(Dt)}Yt.__version=Dt.version}(Kn,Yt,Dt):c.bindTexture(v.TEXTURE_CUBE_MAP,Kn.__webglTexture,v.TEXTURE0+Dt)},this.rebindTextures=function bi(Yt,Dt,Kn){const Hi=h.get(Yt);void 0!==Dt&&vi(Hi.__webglFramebuffer,Yt,Yt.texture,v.COLOR_ATTACHMENT0,v.TEXTURE_2D),void 0!==Kn&&ri(Yt)},this.setupRenderTarget=function or(Yt){const Dt=Yt.texture,Kn=h.get(Yt),Hi=h.get(Dt);Yt.addEventListener("dispose",Pi),!0!==Yt.isWebGLMultipleRenderTargets&&(void 0===Hi.__webglTexture&&(Hi.__webglTexture=v.createTexture()),Hi.__version=Dt.version,S.memory.textures++);const rr=!0===Yt.isWebGLCubeRenderTarget,Lr=!0===Yt.isWebGLMultipleRenderTargets,Us=ht(Yt)||B;if(rr){Kn.__webglFramebuffer=[];for(let Cn=0;Cn<6;Cn++)Kn.__webglFramebuffer[Cn]=v.createFramebuffer()}else{if(Kn.__webglFramebuffer=v.createFramebuffer(),Lr)if(f.drawBuffers){const Cn=Yt.texture;for(let Xn=0,rs=Cn.length;Xn<rs;Xn++){const ls=h.get(Cn[Xn]);void 0===ls.__webglTexture&&(ls.__webglTexture=v.createTexture(),S.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(B&&Yt.samples>0&&!1===vr(Yt)){const Cn=Lr?Dt:[Dt];Kn.__webglMultisampledFramebuffer=v.createFramebuffer(),Kn.__webglColorRenderbuffer=[],c.bindFramebuffer(v.FRAMEBUFFER,Kn.__webglMultisampledFramebuffer);for(let Xn=0;Xn<Cn.length;Xn++){const rs=Cn[Xn];Kn.__webglColorRenderbuffer[Xn]=v.createRenderbuffer(),v.bindRenderbuffer(v.RENDERBUFFER,Kn.__webglColorRenderbuffer[Xn]);const ls=b.convert(rs.format,rs.encoding),ss=b.convert(rs.type),uo=bt(rs.internalFormat,ls,ss,rs.encoding,!0===Yt.isXRRenderTarget),oo=ms(Yt);v.renderbufferStorageMultisample(v.RENDERBUFFER,oo,uo,Yt.width,Yt.height),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+Xn,v.RENDERBUFFER,Kn.__webglColorRenderbuffer[Xn])}v.bindRenderbuffer(v.RENDERBUFFER,null),Yt.depthBuffer&&(Kn.__webglDepthRenderbuffer=v.createRenderbuffer(),Ji(Kn.__webglDepthRenderbuffer,Yt,!0)),c.bindFramebuffer(v.FRAMEBUFFER,null)}}if(rr){c.bindTexture(v.TEXTURE_CUBE_MAP,Hi.__webglTexture),Jn(v.TEXTURE_CUBE_MAP,Dt,Us);for(let Cn=0;Cn<6;Cn++)vi(Kn.__webglFramebuffer[Cn],Yt,Dt,v.COLOR_ATTACHMENT0,v.TEXTURE_CUBE_MAP_POSITIVE_X+Cn);Xt(Dt,Us)&&xn(v.TEXTURE_CUBE_MAP),c.unbindTexture()}else if(Lr){const Cn=Yt.texture;for(let Xn=0,rs=Cn.length;Xn<rs;Xn++){const ls=Cn[Xn],ss=h.get(ls);c.bindTexture(v.TEXTURE_2D,ss.__webglTexture),Jn(v.TEXTURE_2D,ls,Us),vi(Kn.__webglFramebuffer,Yt,ls,v.COLOR_ATTACHMENT0+Xn,v.TEXTURE_2D),Xt(ls,Us)&&xn(v.TEXTURE_2D)}c.unbindTexture()}else{let Cn=v.TEXTURE_2D;(Yt.isWebGL3DRenderTarget||Yt.isWebGLArrayRenderTarget)&&(B?Cn=Yt.isWebGL3DRenderTarget?v.TEXTURE_3D:v.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),c.bindTexture(Cn,Hi.__webglTexture),Jn(Cn,Dt,Us),vi(Kn.__webglFramebuffer,Yt,Dt,v.COLOR_ATTACHMENT0,Cn),Xt(Dt,Us)&&xn(Cn),c.unbindTexture()}Yt.depthBuffer&&ri(Yt)},this.updateRenderTargetMipmap=function ji(Yt){const Dt=ht(Yt)||B,Kn=!0===Yt.isWebGLMultipleRenderTargets?Yt.texture:[Yt.texture];for(let Hi=0,rr=Kn.length;Hi<rr;Hi++){const Lr=Kn[Hi];if(Xt(Lr,Dt)){const Us=Yt.isWebGLCubeRenderTarget?v.TEXTURE_CUBE_MAP:v.TEXTURE_2D,Cn=h.get(Lr).__webglTexture;c.bindTexture(Us,Cn),xn(Us),c.unbindTexture()}}},this.updateMultisampleRenderTarget=function ps(Yt){if(B&&Yt.samples>0&&!1===vr(Yt)){const Dt=Yt.isWebGLMultipleRenderTargets?Yt.texture:[Yt.texture],Kn=Yt.width,Hi=Yt.height;let rr=v.COLOR_BUFFER_BIT;const Lr=[],Us=Yt.stencilBuffer?v.DEPTH_STENCIL_ATTACHMENT:v.DEPTH_ATTACHMENT,Cn=h.get(Yt),Xn=!0===Yt.isWebGLMultipleRenderTargets;if(Xn)for(let rs=0;rs<Dt.length;rs++)c.bindFramebuffer(v.FRAMEBUFFER,Cn.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+rs,v.RENDERBUFFER,null),c.bindFramebuffer(v.FRAMEBUFFER,Cn.__webglFramebuffer),v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0+rs,v.TEXTURE_2D,null,0);c.bindFramebuffer(v.READ_FRAMEBUFFER,Cn.__webglMultisampledFramebuffer),c.bindFramebuffer(v.DRAW_FRAMEBUFFER,Cn.__webglFramebuffer);for(let rs=0;rs<Dt.length;rs++){Lr.push(v.COLOR_ATTACHMENT0+rs),Yt.depthBuffer&&Lr.push(Us);const ls=void 0!==Cn.__ignoreDepthValues&&Cn.__ignoreDepthValues;if(!1===ls&&(Yt.depthBuffer&&(rr|=v.DEPTH_BUFFER_BIT),Yt.stencilBuffer&&(rr|=v.STENCIL_BUFFER_BIT)),Xn&&v.framebufferRenderbuffer(v.READ_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.RENDERBUFFER,Cn.__webglColorRenderbuffer[rs]),!0===ls&&(v.invalidateFramebuffer(v.READ_FRAMEBUFFER,[Us]),v.invalidateFramebuffer(v.DRAW_FRAMEBUFFER,[Us])),Xn){const ss=h.get(Dt[rs]).__webglTexture;v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,ss,0)}v.blitFramebuffer(0,0,Kn,Hi,0,0,Kn,Hi,rr,v.NEAREST),Pe&&v.invalidateFramebuffer(v.READ_FRAMEBUFFER,Lr)}if(c.bindFramebuffer(v.READ_FRAMEBUFFER,null),c.bindFramebuffer(v.DRAW_FRAMEBUFFER,null),Xn)for(let rs=0;rs<Dt.length;rs++){c.bindFramebuffer(v.FRAMEBUFFER,Cn.__webglMultisampledFramebuffer),v.framebufferRenderbuffer(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0+rs,v.RENDERBUFFER,Cn.__webglColorRenderbuffer[rs]);const ls=h.get(Dt[rs]).__webglTexture;c.bindFramebuffer(v.FRAMEBUFFER,Cn.__webglFramebuffer),v.framebufferTexture2D(v.DRAW_FRAMEBUFFER,v.COLOR_ATTACHMENT0+rs,v.TEXTURE_2D,ls,0)}c.bindFramebuffer(v.DRAW_FRAMEBUFFER,Cn.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ri,this.setupFrameBufferTexture=vi,this.useMultisampledRTT=vr}function Yb(v,o,c){const h=c.isWebGL2;return{convert:function f(b,S=null){let B;if(b===Ar)return v.UNSIGNED_BYTE;if(b===Yo)return v.UNSIGNED_SHORT_4_4_4_4;if(b===kl)return v.UNSIGNED_SHORT_5_5_5_1;if(b===cs)return v.BYTE;if(b===Rs)return v.SHORT;if(b===es)return v.UNSIGNED_SHORT;if(b===ho)return v.INT;if(b===ro)return v.UNSIGNED_INT;if(b===ws)return v.FLOAT;if(b===Es)return h?v.HALF_FLOAT:(B=o.get("OES_texture_half_float"),null!==B?B.HALF_FLOAT_OES:null);if(b===eo)return v.ALPHA;if(b===xr)return v.RGBA;if(b===_o)return v.LUMINANCE;if(b===el)return v.LUMINANCE_ALPHA;if(b===lo)return v.DEPTH_COMPONENT;if(b===Yi)return v.DEPTH_STENCIL;if(b===ga)return v.RED;if(b===al)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),v.RGBA;if(b===Qs)return B=o.get("EXT_sRGB"),null!==B?B.SRGB_ALPHA_EXT:null;if(b===xa)return v.RED_INTEGER;if(b===Ta)return v.RG;if(b===uc)return v.RG_INTEGER;if(b===st)return v.RGBA_INTEGER;if(b===Ae||b===rt||b===ot||b===wt)if(S===Mo){if(B=o.get("WEBGL_compressed_texture_s3tc_srgb"),null===B)return null;if(b===Ae)return B.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(b===rt)return B.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(b===ot)return B.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(b===wt)return B.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(B=o.get("WEBGL_compressed_texture_s3tc"),null===B)return null;if(b===Ae)return B.COMPRESSED_RGB_S3TC_DXT1_EXT;if(b===rt)return B.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(b===ot)return B.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(b===wt)return B.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(b===fn||b===pn||b===jn||b===Yn){if(B=o.get("WEBGL_compressed_texture_pvrtc"),null===B)return null;if(b===fn)return B.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(b===pn)return B.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(b===jn)return B.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(b===Yn)return B.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(b===lt)return B=o.get("WEBGL_compressed_texture_etc1"),null!==B?B.COMPRESSED_RGB_ETC1_WEBGL:null;if(b===mt||b===Lt){if(B=o.get("WEBGL_compressed_texture_etc"),null===B)return null;if(b===mt)return S===Mo?B.COMPRESSED_SRGB8_ETC2:B.COMPRESSED_RGB8_ETC2;if(b===Lt)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:B.COMPRESSED_RGBA8_ETC2_EAC}if(b===$e||b===Nt||b===it||b===un||b===It||b===Pt||b===Sn||b===Fn||b===Gi||b===In||b===ii||b===lr||b===cr||b===Qi){if(B=o.get("WEBGL_compressed_texture_astc"),null===B)return null;if(b===$e)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:B.COMPRESSED_RGBA_ASTC_4x4_KHR;if(b===Nt)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:B.COMPRESSED_RGBA_ASTC_5x4_KHR;if(b===it)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:B.COMPRESSED_RGBA_ASTC_5x5_KHR;if(b===un)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:B.COMPRESSED_RGBA_ASTC_6x5_KHR;if(b===It)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:B.COMPRESSED_RGBA_ASTC_6x6_KHR;if(b===Pt)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:B.COMPRESSED_RGBA_ASTC_8x5_KHR;if(b===Sn)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:B.COMPRESSED_RGBA_ASTC_8x6_KHR;if(b===Fn)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:B.COMPRESSED_RGBA_ASTC_8x8_KHR;if(b===Gi)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:B.COMPRESSED_RGBA_ASTC_10x5_KHR;if(b===In)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:B.COMPRESSED_RGBA_ASTC_10x6_KHR;if(b===ii)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:B.COMPRESSED_RGBA_ASTC_10x8_KHR;if(b===lr)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:B.COMPRESSED_RGBA_ASTC_10x10_KHR;if(b===cr)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:B.COMPRESSED_RGBA_ASTC_12x10_KHR;if(b===Qi)return S===Mo?B.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:B.COMPRESSED_RGBA_ASTC_12x12_KHR}if(b===is){if(B=o.get("EXT_texture_compression_bptc"),null===B)return null;if(b===is)return S===Mo?B.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:B.COMPRESSED_RGBA_BPTC_UNORM_EXT}return b===fo?h?v.UNSIGNED_INT_24_8:(B=o.get("WEBGL_depth_texture"),null!==B?B.UNSIGNED_INT_24_8_WEBGL:null):void 0!==v[b]?v[b]:null}}}class Zb extends dc{constructor(o=[]){super(),this.isArrayCamera=!0,this.cameras=o}}class Ph extends Va{constructor(){super(),this.isGroup=!0,this.type="Group"}}const m2={type:"move"};class sv{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Ph,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Ph,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ut,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ut),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Ph,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ut,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ut),this._grip}dispatchEvent(o){return null!==this._targetRay&&this._targetRay.dispatchEvent(o),null!==this._grip&&this._grip.dispatchEvent(o),null!==this._hand&&this._hand.dispatchEvent(o),this}disconnect(o){return this.dispatchEvent({type:"disconnected",data:o}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(o,c,h){let f=null,b=null,S=null;const B=this._targetRay,ne=this._grip,ae=this._hand;if(o&&"visible-blurred"!==c.session.visibilityState){if(ae&&o.hand){S=!0;for(const Ne of o.hand.values()){const Fe=c.getJointPose(Ne,h);if(void 0===ae.joints[Ne.jointName]){const _t=new Ph;_t.matrixAutoUpdate=!1,_t.visible=!1,ae.joints[Ne.jointName]=_t,ae.add(_t)}const at=ae.joints[Ne.jointName];null!==Fe&&(at.matrix.fromArray(Fe.transform.matrix),at.matrix.decompose(at.position,at.rotation,at.scale),at.jointRadius=Fe.radius),at.visible=null!==Fe}const Se=ae.joints["index-finger-tip"].position.distanceTo(ae.joints["thumb-tip"].position),Pe=.02,qe=.005;ae.inputState.pinching&&Se>Pe+qe?(ae.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:o.handedness,target:this})):!ae.inputState.pinching&&Se<=Pe-qe&&(ae.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:o.handedness,target:this}))}else null!==ne&&o.gripSpace&&(b=c.getPose(o.gripSpace,h),null!==b&&(ne.matrix.fromArray(b.transform.matrix),ne.matrix.decompose(ne.position,ne.rotation,ne.scale),b.linearVelocity?(ne.hasLinearVelocity=!0,ne.linearVelocity.copy(b.linearVelocity)):ne.hasLinearVelocity=!1,b.angularVelocity?(ne.hasAngularVelocity=!0,ne.angularVelocity.copy(b.angularVelocity)):ne.hasAngularVelocity=!1));null!==B&&(f=c.getPose(o.targetRaySpace,h),null===f&&null!==b&&(f=b),null!==f&&(B.matrix.fromArray(f.transform.matrix),B.matrix.decompose(B.position,B.rotation,B.scale),f.linearVelocity?(B.hasLinearVelocity=!0,B.linearVelocity.copy(f.linearVelocity)):B.hasLinearVelocity=!1,f.angularVelocity?(B.hasAngularVelocity=!0,B.angularVelocity.copy(f.angularVelocity)):B.hasAngularVelocity=!1,this.dispatchEvent(m2)))}return null!==B&&(B.visible=null!==f),null!==ne&&(ne.visible=null!==b),null!==ae&&(ae.visible=null!==S),this}}class ov extends Ws{constructor(o,c,h,f,b,S,B,ne,ae,ge){if((ge=void 0!==ge?ge:lo)!==lo&&ge!==Yi)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===h&&ge===lo&&(h=ro),void 0===h&&ge===Yi&&(h=fo),super(null,f,b,S,B,ne,ge,h,ae),this.isDepthTexture=!0,this.image={width:o,height:c},this.magFilter=void 0!==B?B:Gt,this.minFilter=void 0!==ne?ne:Gt,this.flipY=!1,this.generateMipmaps=!1}}class wS extends Ra{constructor(o,c){super();const h=this;let f=null,b=1,S=null,B="local-floor",ne=null,ae=null,ge=null,Te=null,Se=null,Pe=null;const qe=c.getContextAttributes();let Ne=null,Fe=null;const at=[],_t=[],ut=new dc;ut.layers.enable(1),ut.viewport=new js;const ht=new dc;ht.layers.enable(2),ht.viewport=new js;const Rt=[ut,ht],Xt=new Zb;Xt.layers.enable(1),Xt.layers.enable(2);let xn=null,bt=null;function en(Hn){const Zn=_t.indexOf(Hn.inputSource);if(-1===Zn)return;const _r=at[Zn];void 0!==_r&&_r.dispatchEvent({type:Hn.type,data:Hn.inputSource})}function bn(){f.removeEventListener("select",en),f.removeEventListener("selectstart",en),f.removeEventListener("selectend",en),f.removeEventListener("squeeze",en),f.removeEventListener("squeezestart",en),f.removeEventListener("squeezeend",en),f.removeEventListener("end",bn),f.removeEventListener("inputsourceschange",ui);for(let Hn=0;Hn<at.length;Hn++){const Zn=_t[Hn];null!==Zn&&(_t[Hn]=null,at[Hn].disconnect(Zn))}xn=null,bt=null,o.setRenderTarget(Ne),Se=null,Te=null,ge=null,f=null,Fe=null,Ai.stop(),h.isPresenting=!1,h.dispatchEvent({type:"sessionend"})}function ui(Hn){for(let Zn=0;Zn<Hn.removed.length;Zn++){const _r=Hn.removed[Zn],ur=_t.indexOf(_r);ur>=0&&(_t[ur]=null,at[ur].dispatchEvent({type:"disconnected",data:_r}))}for(let Zn=0;Zn<Hn.added.length;Zn++){const _r=Hn.added[Zn];let ur=_t.indexOf(_r);if(-1===ur){for(let As=0;As<at.length;As++){if(As>=_t.length){_t.push(_r),ur=As;break}if(null===_t[As]){_t[As]=_r,ur=As;break}}if(-1===ur)break}const ai=at[ur];ai&&ai.dispatchEvent({type:"connected",data:_r})}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Hn){let Zn=at[Hn];return void 0===Zn&&(Zn=new sv,at[Hn]=Zn),Zn.getTargetRaySpace()},this.getControllerGrip=function(Hn){let Zn=at[Hn];return void 0===Zn&&(Zn=new sv,at[Hn]=Zn),Zn.getGripSpace()},this.getHand=function(Hn){let Zn=at[Hn];return void 0===Zn&&(Zn=new sv,at[Hn]=Zn),Zn.getHandSpace()},this.setFramebufferScaleFactor=function(Hn){b=Hn,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Hn){B=Hn,!0===h.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return ne||S},this.setReferenceSpace=function(Hn){ne=Hn},this.getBaseLayer=function(){return null!==Te?Te:Se},this.getBinding=function(){return ge},this.getFrame=function(){return Pe},this.getSession=function(){return f},this.setSession=function(){var Hn=(0,ze.Z)(function*(Zn){if(f=Zn,null!==f){if(Ne=o.getRenderTarget(),f.addEventListener("select",en),f.addEventListener("selectstart",en),f.addEventListener("selectend",en),f.addEventListener("squeeze",en),f.addEventListener("squeezestart",en),f.addEventListener("squeezeend",en),f.addEventListener("end",bn),f.addEventListener("inputsourceschange",ui),!0!==qe.xrCompatible&&(yield c.makeXRCompatible()),void 0===f.renderState.layers||!1===o.capabilities.isWebGL2)Se=new XRWebGLLayer(f,c,{antialias:void 0!==f.renderState.layers||qe.antialias,alpha:qe.alpha,depth:qe.depth,stencil:qe.stencil,framebufferScaleFactor:b}),f.updateRenderState({baseLayer:Se}),Fe=new Lo(Se.framebufferWidth,Se.framebufferHeight,{format:xr,type:Ar,encoding:o.outputEncoding,stencilBuffer:qe.stencil});else{let _r=null,ur=null,ai=null;qe.depth&&(ai=qe.stencil?c.DEPTH24_STENCIL8:c.DEPTH_COMPONENT24,_r=qe.stencil?Yi:lo,ur=qe.stencil?fo:ro);const As={colorFormat:c.RGBA8,depthFormat:ai,scaleFactor:b};ge=new XRWebGLBinding(f,c),Te=ge.createProjectionLayer(As),f.updateRenderState({layers:[Te]}),Fe=new Lo(Te.textureWidth,Te.textureHeight,{format:xr,type:Ar,depthTexture:new ov(Te.textureWidth,Te.textureHeight,ur,void 0,void 0,void 0,void 0,void 0,void 0,_r),stencilBuffer:qe.stencil,encoding:o.outputEncoding,samples:qe.antialias?4:0}),o.properties.get(Fe).__ignoreDepthValues=Te.ignoreDepthValues}Fe.isXRRenderTarget=!0,this.setFoveation(1),ne=null,S=yield f.requestReferenceSpace(B),Ai.setContext(f),Ai.start(),h.isPresenting=!0,h.dispatchEvent({type:"sessionstart"})}});return function(Zn){return Hn.apply(this,arguments)}}();const Pi=new Ut,hi=new Ut;function Mi(Hn,Zn){null===Zn?Hn.matrixWorld.copy(Hn.matrix):Hn.matrixWorld.multiplyMatrices(Zn.matrixWorld,Hn.matrix),Hn.matrixWorldInverse.copy(Hn.matrixWorld).invert()}this.updateCamera=function(Hn){if(null===f)return;Xt.near=ht.near=ut.near=Hn.near,Xt.far=ht.far=ut.far=Hn.far,(xn!==Xt.near||bt!==Xt.far)&&(f.updateRenderState({depthNear:Xt.near,depthFar:Xt.far}),xn=Xt.near,bt=Xt.far);const Zn=Hn.parent,_r=Xt.cameras;Mi(Xt,Zn);for(let ai=0;ai<_r.length;ai++)Mi(_r[ai],Zn);Xt.matrixWorld.decompose(Xt.position,Xt.quaternion,Xt.scale),Hn.matrix.copy(Xt.matrix),Hn.matrix.decompose(Hn.position,Hn.quaternion,Hn.scale);const ur=Hn.children;for(let ai=0,As=ur.length;ai<As;ai++)ur[ai].updateMatrixWorld(!0);2===_r.length?function Vn(Hn,Zn,_r){Pi.setFromMatrixPosition(Zn.matrixWorld),hi.setFromMatrixPosition(_r.matrixWorld);const ur=Pi.distanceTo(hi),ai=Zn.projectionMatrix.elements,As=_r.projectionMatrix.elements,co=ai[14]/(ai[10]-1),Jn=ai[14]/(ai[10]+1),no=(ai[9]+1)/ai[5],Li=(ai[9]-1)/ai[5],Mr=(ai[8]-1)/ai[0],vi=(As[8]+1)/As[0],Ji=co*Mr,di=co*vi,ri=ur/(-Mr+vi),bi=ri*-Mr;Zn.matrixWorld.decompose(Hn.position,Hn.quaternion,Hn.scale),Hn.translateX(bi),Hn.translateZ(ri),Hn.matrixWorld.compose(Hn.position,Hn.quaternion,Hn.scale),Hn.matrixWorldInverse.copy(Hn.matrixWorld).invert();const or=co+ri,ji=Jn+ri;Hn.projectionMatrix.makePerspective(Ji-bi,di+(ur-bi),no*Jn/ji*or,Li*Jn/ji*or,or,ji)}(Xt,ut,ht):Xt.projectionMatrix.copy(ut.projectionMatrix)},this.getCamera=function(){return Xt},this.getFoveation=function(){return null!==Te?Te.fixedFoveation:null!==Se?Se.fixedFoveation:void 0},this.setFoveation=function(Hn){null!==Te&&(Te.fixedFoveation=Hn),null!==Se&&void 0!==Se.fixedFoveation&&(Se.fixedFoveation=Hn)};let Oi=null;const Ai=new $_;Ai.setAnimationLoop(function Xi(Hn,Zn){if(ae=Zn.getViewerPose(ne||S),Pe=Zn,null!==ae){const _r=ae.views;null!==Se&&(o.setRenderTargetFramebuffer(Fe,Se.framebuffer),o.setRenderTarget(Fe));let ur=!1;_r.length!==Xt.cameras.length&&(Xt.cameras.length=0,ur=!0);for(let ai=0;ai<_r.length;ai++){const As=_r[ai];let co=null;if(null!==Se)co=Se.getViewport(As);else{const no=ge.getViewSubImage(Te,As);co=no.viewport,0===ai&&(o.setRenderTargetTextures(Fe,no.colorTexture,Te.ignoreDepthValues?void 0:no.depthStencilTexture),o.setRenderTarget(Fe))}let Jn=Rt[ai];void 0===Jn&&(Jn=new dc,Jn.layers.enable(ai),Jn.viewport=new js,Rt[ai]=Jn),Jn.matrix.fromArray(As.transform.matrix),Jn.projectionMatrix.fromArray(As.projectionMatrix),Jn.viewport.set(co.x,co.y,co.width,co.height),0===ai&&Xt.matrix.copy(Jn.matrix),!0===ur&&Xt.cameras.push(Jn)}}for(let _r=0;_r<at.length;_r++){const ur=_t[_r],ai=at[_r];null!==ur&&void 0!==ai&&ai.update(ur,Zn,ne||S)}Oi&&Oi(Hn,Zn),Pe=null}),this.setAnimationLoop=function(Hn){Oi=Hn},this.dispose=function(){}}}function MS(v,o){function f(Ne,Fe){Ne.opacity.value=Fe.opacity,Fe.color&&Ne.diffuse.value.copy(Fe.color),Fe.emissive&&Ne.emissive.value.copy(Fe.emissive).multiplyScalar(Fe.emissiveIntensity),Fe.map&&(Ne.map.value=Fe.map),Fe.alphaMap&&(Ne.alphaMap.value=Fe.alphaMap),Fe.bumpMap&&(Ne.bumpMap.value=Fe.bumpMap,Ne.bumpScale.value=Fe.bumpScale,Fe.side===ue&&(Ne.bumpScale.value*=-1)),Fe.displacementMap&&(Ne.displacementMap.value=Fe.displacementMap,Ne.displacementScale.value=Fe.displacementScale,Ne.displacementBias.value=Fe.displacementBias),Fe.emissiveMap&&(Ne.emissiveMap.value=Fe.emissiveMap),Fe.normalMap&&(Ne.normalMap.value=Fe.normalMap,Ne.normalScale.value.copy(Fe.normalScale),Fe.side===ue&&Ne.normalScale.value.negate()),Fe.specularMap&&(Ne.specularMap.value=Fe.specularMap),Fe.alphaTest>0&&(Ne.alphaTest.value=Fe.alphaTest);const at=o.get(Fe).envMap;if(at&&(Ne.envMap.value=at,Ne.flipEnvMap.value=at.isCubeTexture&&!1===at.isRenderTargetTexture?-1:1,Ne.reflectivity.value=Fe.reflectivity,Ne.ior.value=Fe.ior,Ne.refractionRatio.value=Fe.refractionRatio),Fe.lightMap){Ne.lightMap.value=Fe.lightMap;const ht=!0!==v.physicallyCorrectLights?Math.PI:1;Ne.lightMapIntensity.value=Fe.lightMapIntensity*ht}let _t,ut;Fe.aoMap&&(Ne.aoMap.value=Fe.aoMap,Ne.aoMapIntensity.value=Fe.aoMapIntensity),Fe.map?_t=Fe.map:Fe.specularMap?_t=Fe.specularMap:Fe.displacementMap?_t=Fe.displacementMap:Fe.normalMap?_t=Fe.normalMap:Fe.bumpMap?_t=Fe.bumpMap:Fe.roughnessMap?_t=Fe.roughnessMap:Fe.metalnessMap?_t=Fe.metalnessMap:Fe.alphaMap?_t=Fe.alphaMap:Fe.emissiveMap?_t=Fe.emissiveMap:Fe.clearcoatMap?_t=Fe.clearcoatMap:Fe.clearcoatNormalMap?_t=Fe.clearcoatNormalMap:Fe.clearcoatRoughnessMap?_t=Fe.clearcoatRoughnessMap:Fe.iridescenceMap?_t=Fe.iridescenceMap:Fe.iridescenceThicknessMap?_t=Fe.iridescenceThicknessMap:Fe.specularIntensityMap?_t=Fe.specularIntensityMap:Fe.specularColorMap?_t=Fe.specularColorMap:Fe.transmissionMap?_t=Fe.transmissionMap:Fe.thicknessMap?_t=Fe.thicknessMap:Fe.sheenColorMap?_t=Fe.sheenColorMap:Fe.sheenRoughnessMap&&(_t=Fe.sheenRoughnessMap),void 0!==_t&&(_t.isWebGLRenderTarget&&(_t=_t.texture),!0===_t.matrixAutoUpdate&&_t.updateMatrix(),Ne.uvTransform.value.copy(_t.matrix)),Fe.aoMap?ut=Fe.aoMap:Fe.lightMap&&(ut=Fe.lightMap),void 0!==ut&&(ut.isWebGLRenderTarget&&(ut=ut.texture),!0===ut.matrixAutoUpdate&&ut.updateMatrix(),Ne.uv2Transform.value.copy(ut.matrix))}return{refreshFogUniforms:function c(Ne,Fe){Ne.fogColor.value.copy(Fe.color),Fe.isFog?(Ne.fogNear.value=Fe.near,Ne.fogFar.value=Fe.far):Fe.isFogExp2&&(Ne.fogDensity.value=Fe.density)},refreshMaterialUniforms:function h(Ne,Fe,at,_t,ut){Fe.isMeshBasicMaterial||Fe.isMeshLambertMaterial?f(Ne,Fe):Fe.isMeshToonMaterial?(f(Ne,Fe),function ge(Ne,Fe){Fe.gradientMap&&(Ne.gradientMap.value=Fe.gradientMap)}(Ne,Fe)):Fe.isMeshPhongMaterial?(f(Ne,Fe),function ae(Ne,Fe){Ne.specular.value.copy(Fe.specular),Ne.shininess.value=Math.max(Fe.shininess,1e-4)}(Ne,Fe)):Fe.isMeshStandardMaterial?(f(Ne,Fe),function Te(Ne,Fe){Ne.roughness.value=Fe.roughness,Ne.metalness.value=Fe.metalness,Fe.roughnessMap&&(Ne.roughnessMap.value=Fe.roughnessMap),Fe.metalnessMap&&(Ne.metalnessMap.value=Fe.metalnessMap),o.get(Fe).envMap&&(Ne.envMapIntensity.value=Fe.envMapIntensity)}(Ne,Fe),Fe.isMeshPhysicalMaterial&&function Se(Ne,Fe,at){Ne.ior.value=Fe.ior,Fe.sheen>0&&(Ne.sheenColor.value.copy(Fe.sheenColor).multiplyScalar(Fe.sheen),Ne.sheenRoughness.value=Fe.sheenRoughness,Fe.sheenColorMap&&(Ne.sheenColorMap.value=Fe.sheenColorMap),Fe.sheenRoughnessMap&&(Ne.sheenRoughnessMap.value=Fe.sheenRoughnessMap)),Fe.clearcoat>0&&(Ne.clearcoat.value=Fe.clearcoat,Ne.clearcoatRoughness.value=Fe.clearcoatRoughness,Fe.clearcoatMap&&(Ne.clearcoatMap.value=Fe.clearcoatMap),Fe.clearcoatRoughnessMap&&(Ne.clearcoatRoughnessMap.value=Fe.clearcoatRoughnessMap),Fe.clearcoatNormalMap&&(Ne.clearcoatNormalScale.value.copy(Fe.clearcoatNormalScale),Ne.clearcoatNormalMap.value=Fe.clearcoatNormalMap,Fe.side===ue&&Ne.clearcoatNormalScale.value.negate())),Fe.iridescence>0&&(Ne.iridescence.value=Fe.iridescence,Ne.iridescenceIOR.value=Fe.iridescenceIOR,Ne.iridescenceThicknessMinimum.value=Fe.iridescenceThicknessRange[0],Ne.iridescenceThicknessMaximum.value=Fe.iridescenceThicknessRange[1],Fe.iridescenceMap&&(Ne.iridescenceMap.value=Fe.iridescenceMap),Fe.iridescenceThicknessMap&&(Ne.iridescenceThicknessMap.value=Fe.iridescenceThicknessMap)),Fe.transmission>0&&(Ne.transmission.value=Fe.transmission,Ne.transmissionSamplerMap.value=at.texture,Ne.transmissionSamplerSize.value.set(at.width,at.height),Fe.transmissionMap&&(Ne.transmissionMap.value=Fe.transmissionMap),Ne.thickness.value=Fe.thickness,Fe.thicknessMap&&(Ne.thicknessMap.value=Fe.thicknessMap),Ne.attenuationDistance.value=Fe.attenuationDistance,Ne.attenuationColor.value.copy(Fe.attenuationColor)),Ne.specularIntensity.value=Fe.specularIntensity,Ne.specularColor.value.copy(Fe.specularColor),Fe.specularIntensityMap&&(Ne.specularIntensityMap.value=Fe.specularIntensityMap),Fe.specularColorMap&&(Ne.specularColorMap.value=Fe.specularColorMap)}(Ne,Fe,ut)):Fe.isMeshMatcapMaterial?(f(Ne,Fe),function Pe(Ne,Fe){Fe.matcap&&(Ne.matcap.value=Fe.matcap)}(Ne,Fe)):Fe.isMeshDepthMaterial?f(Ne,Fe):Fe.isMeshDistanceMaterial?(f(Ne,Fe),function qe(Ne,Fe){Ne.referencePosition.value.copy(Fe.referencePosition),Ne.nearDistance.value=Fe.nearDistance,Ne.farDistance.value=Fe.farDistance}(Ne,Fe)):Fe.isMeshNormalMaterial?f(Ne,Fe):Fe.isLineBasicMaterial?(function b(Ne,Fe){Ne.diffuse.value.copy(Fe.color),Ne.opacity.value=Fe.opacity}(Ne,Fe),Fe.isLineDashedMaterial&&function S(Ne,Fe){Ne.dashSize.value=Fe.dashSize,Ne.totalSize.value=Fe.dashSize+Fe.gapSize,Ne.scale.value=Fe.scale}(Ne,Fe)):Fe.isPointsMaterial?function B(Ne,Fe,at,_t){let ut;Ne.diffuse.value.copy(Fe.color),Ne.opacity.value=Fe.opacity,Ne.size.value=Fe.size*at,Ne.scale.value=.5*_t,Fe.map&&(Ne.map.value=Fe.map),Fe.alphaMap&&(Ne.alphaMap.value=Fe.alphaMap),Fe.alphaTest>0&&(Ne.alphaTest.value=Fe.alphaTest),Fe.map?ut=Fe.map:Fe.alphaMap&&(ut=Fe.alphaMap),void 0!==ut&&(!0===ut.matrixAutoUpdate&&ut.updateMatrix(),Ne.uvTransform.value.copy(ut.matrix))}(Ne,Fe,at,_t):Fe.isSpriteMaterial?function ne(Ne,Fe){let at;Ne.diffuse.value.copy(Fe.color),Ne.opacity.value=Fe.opacity,Ne.rotation.value=Fe.rotation,Fe.map&&(Ne.map.value=Fe.map),Fe.alphaMap&&(Ne.alphaMap.value=Fe.alphaMap),Fe.alphaTest>0&&(Ne.alphaTest.value=Fe.alphaTest),Fe.map?at=Fe.map:Fe.alphaMap&&(at=Fe.alphaMap),void 0!==at&&(!0===at.matrixAutoUpdate&&at.updateMatrix(),Ne.uvTransform.value.copy(at.matrix))}(Ne,Fe):Fe.isShadowMaterial?(Ne.color.value.copy(Fe.color),Ne.opacity.value=Fe.opacity):Fe.isShaderMaterial&&(Fe.uniformsNeedUpdate=!1)}}}function D1(v,o,c,h){let f={},b={},S=[];const B=c.isWebGL2?v.getParameter(v.MAX_UNIFORM_BUFFER_BINDINGS):0;function Pe(_t,ut,ht){const Rt=_t.value;if(void 0===ht[ut])return ht[ut]="number"==typeof Rt?Rt:Rt.clone(),!0;if("number"==typeof Rt){if(ht[ut]!==Rt)return ht[ut]=Rt,!0}else{const Xt=ht[ut];if(!1===Xt.equals(Rt))return Xt.copy(Rt),!0}return!1}function Ne(_t){const ut=_t.value,ht={boundary:0,storage:0};return"number"==typeof ut?(ht.boundary=4,ht.storage=4):ut.isVector2?(ht.boundary=8,ht.storage=8):ut.isVector3||ut.isColor?(ht.boundary=16,ht.storage=12):ut.isVector4?(ht.boundary=16,ht.storage=16):ut.isMatrix3?(ht.boundary=48,ht.storage=48):ut.isMatrix4?(ht.boundary=64,ht.storage=64):ut.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",ut),ht}function Fe(_t){const ut=_t.target;ut.removeEventListener("dispose",Fe);const ht=S.indexOf(ut.__bindingPointIndex);S.splice(ht,1),v.deleteBuffer(f[ut.id]),delete f[ut.id],delete b[ut.id]}return{bind:function ne(_t,ut){h.uniformBlockBinding(_t,ut.program)},update:function ae(_t,ut){let ht=f[_t.id];void 0===ht&&(function qe(_t){const ut=_t.uniforms;let ht=0;let Xt=0;for(let xn=0,bt=ut.length;xn<bt;xn++){const en=ut[xn],bn=Ne(en);en.__data=new Float32Array(bn.storage/Float32Array.BYTES_PER_ELEMENT),en.__offset=ht,xn>0&&(Xt=ht%16,0!==Xt&&16-Xt-bn.boundary<0&&(ht+=16-Xt,en.__offset=ht)),ht+=bn.storage}Xt=ht%16,Xt>0&&(ht+=16-Xt),_t.__size=ht,_t.__cache={}}(_t),ht=function ge(_t){const ut=function Te(){for(let _t=0;_t<B;_t++)if(-1===S.indexOf(_t))return S.push(_t),_t;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();_t.__bindingPointIndex=ut;const ht=v.createBuffer(),Rt=_t.__size,Xt=_t.usage;return v.bindBuffer(v.UNIFORM_BUFFER,ht),v.bufferData(v.UNIFORM_BUFFER,Rt,Xt),v.bindBuffer(v.UNIFORM_BUFFER,null),v.bindBufferBase(v.UNIFORM_BUFFER,ut,ht),ht}(_t),f[_t.id]=ht,_t.addEventListener("dispose",Fe)),h.updateUBOMapping(_t,ut.program);const Xt=o.render.frame;b[_t.id]!==Xt&&(function Se(_t){const ht=_t.uniforms,Rt=_t.__cache;v.bindBuffer(v.UNIFORM_BUFFER,f[_t.id]);for(let Xt=0,xn=ht.length;Xt<xn;Xt++){const bt=ht[Xt];if(!0===Pe(bt,Xt,Rt)){const en=bt.value,bn=bt.__offset;"number"==typeof en?(bt.__data[0]=en,v.bufferSubData(v.UNIFORM_BUFFER,bn,bt.__data)):(bt.value.isMatrix3?(bt.__data[0]=bt.value.elements[0],bt.__data[1]=bt.value.elements[1],bt.__data[2]=bt.value.elements[2],bt.__data[3]=bt.value.elements[0],bt.__data[4]=bt.value.elements[3],bt.__data[5]=bt.value.elements[4],bt.__data[6]=bt.value.elements[5],bt.__data[7]=bt.value.elements[0],bt.__data[8]=bt.value.elements[6],bt.__data[9]=bt.value.elements[7],bt.__data[10]=bt.value.elements[8],bt.__data[11]=bt.value.elements[0]):en.toArray(bt.__data),v.bufferSubData(v.UNIFORM_BUFFER,bn,bt.__data))}}v.bindBuffer(v.UNIFORM_BUFFER,null)}(_t),b[_t.id]=Xt)},dispose:function at(){for(const _t in f)v.deleteBuffer(f[_t]);S=[],f={},b={}}}}function V(v={}){this.isWebGLRenderer=!0;const o=void 0!==v.canvas?v.canvas:function g(){const v=XA("canvas");return v.style.display="block",v}(),c=void 0!==v.context?v.context:null,h=void 0===v.depth||v.depth,f=void 0===v.stencil||v.stencil,b=void 0!==v.antialias&&v.antialias,S=void 0===v.premultipliedAlpha||v.premultipliedAlpha,B=void 0!==v.preserveDrawingBuffer&&v.preserveDrawingBuffer,ne=void 0!==v.powerPreference?v.powerPreference:"default",ae=void 0!==v.failIfMajorPerformanceCaveat&&v.failIfMajorPerformanceCaveat;let ge;ge=null!==c?c.getContextAttributes().alpha:void 0!==v.alpha&&v.alpha;let Te=null,Se=null;const Pe=[],qe=[];this.domElement=o,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Qa,this.physicallyCorrectLights=!1,this.toneMapping=ct,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const Ne=this;let Fe=!1,at=0,_t=0,ut=null,ht=-1,Rt=null;const Xt=new js,xn=new js;let bt=null,en=o.width,bn=o.height,ui=1,Pi=null,hi=null;const Vn=new js(0,0,en,bn),Mi=new js(0,0,en,bn);let Oi=!1;const Xi=new wh;let Ai=!1,Hn=!1,Zn=null;const _r=new so,ur=new Di,ai=new Ut,As={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function co(){return null===ut?ui:1}let Li,Mr,vi,Ji,di,ri,bi,or,ji,ps,ms,vr,Ys,Ro,Yt,Dt,Kn,Hi,rr,Lr,Us,Cn,Xn,rs,Jn=c;function no(ln,wi){for(let er=0;er<ln.length;er++){const hr=o.getContext(ln[er],wi);if(null!==hr)return hr}return null}try{const ln={alpha:!0,depth:h,stencil:f,antialias:b,premultipliedAlpha:S,preserveDrawingBuffer:B,powerPreference:ne,failIfMajorPerformanceCaveat:ae};if("setAttribute"in o&&o.setAttribute("data-engine",`three.js r${M}`),o.addEventListener("webglcontextlost",uo,!1),o.addEventListener("webglcontextrestored",oo,!1),o.addEventListener("webglcontextcreationerror",Oa,!1),null===Jn){const wi=["webgl2","webgl","experimental-webgl"];if(!0===Ne.isWebGL1Renderer&&wi.shift(),Jn=no(wi,ln),null===Jn)throw no(wi)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Jn.getShaderPrecisionFormat&&(Jn.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ln){throw console.error("THREE.WebGLRenderer: "+ln.message),ln}function ls(){Li=new nv(Jn),Mr=new af(Jn,Li,v),Li.init(Mr),Cn=new Yb(Jn,Li,Mr),vi=new A2(Jn,Li,Mr),Ji=new od(Jn),di=new bS,ri=new cd(Jn,Li,vi,di,Mr,Cn,Ji),bi=new ev(Ne),or=new Am(Ne),ji=new Oy(Jn,Mr),Xn=new Zy(Jn,Li,ji,Mr),ps=new CA(Jn,ji,Ji,Xn),ms=new Mg(Jn,ps,ji,Ji),rr=new gm(Jn,Mr,ri),Dt=new fm(di),vr=new vS(Ne,bi,or,Li,Mr,Xn,Dt),Ys=new MS(Ne,di),Ro=new xS,Yt=new T1(Li,Mr),Hi=new Yy(Ne,bi,or,vi,ms,ge,S),Kn=new p2(Ne,ms,Mr),rs=new D1(Jn,Ji,Mr,vi),Lr=new A1(Jn,Li,Ji,Mr),Us=new Wb(Jn,Li,Ji,Mr),Ji.programs=vr.programs,Ne.capabilities=Mr,Ne.extensions=Li,Ne.properties=di,Ne.renderLists=Ro,Ne.shadowMap=Kn,Ne.state=vi,Ne.info=Ji}ls();const ss=new wS(Ne,Jn);function uo(ln){ln.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Fe=!0}function oo(){console.log("THREE.WebGLRenderer: Context Restored."),Fe=!1;const ln=Ji.autoReset,wi=Kn.enabled,er=Kn.autoUpdate,mi=Kn.needsUpdate,hr=Kn.type;ls(),Ji.autoReset=ln,Kn.enabled=wi,Kn.autoUpdate=er,Kn.needsUpdate=mi,Kn.type=hr}function Oa(ln){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ln.statusMessage)}function fa(ln){const wi=ln.target;wi.removeEventListener("dispose",fa),function $a(ln){(function Gn(ln){const wi=di.get(ln).programs;void 0!==wi&&(wi.forEach(function(er){vr.releaseProgram(er)}),ln.isShaderMaterial&&vr.releaseShaderCache(ln))})(ln),di.remove(ln)}(wi)}this.xr=ss,this.getContext=function(){return Jn},this.getContextAttributes=function(){return Jn.getContextAttributes()},this.forceContextLoss=function(){const ln=Li.get("WEBGL_lose_context");ln&&ln.loseContext()},this.forceContextRestore=function(){const ln=Li.get("WEBGL_lose_context");ln&&ln.restoreContext()},this.getPixelRatio=function(){return ui},this.setPixelRatio=function(ln){void 0!==ln&&(ui=ln,this.setSize(en,bn,!1))},this.getSize=function(ln){return ln.set(en,bn)},this.setSize=function(ln,wi,er){ss.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(en=ln,bn=wi,o.width=Math.floor(ln*ui),o.height=Math.floor(wi*ui),!1!==er&&(o.style.width=ln+"px",o.style.height=wi+"px"),this.setViewport(0,0,ln,wi))},this.getDrawingBufferSize=function(ln){return ln.set(en*ui,bn*ui).floor()},this.setDrawingBufferSize=function(ln,wi,er){en=ln,bn=wi,ui=er,o.width=Math.floor(ln*er),o.height=Math.floor(wi*er),this.setViewport(0,0,ln,wi)},this.getCurrentViewport=function(ln){return ln.copy(Xt)},this.getViewport=function(ln){return ln.copy(Vn)},this.setViewport=function(ln,wi,er,mi){ln.isVector4?Vn.set(ln.x,ln.y,ln.z,ln.w):Vn.set(ln,wi,er,mi),vi.viewport(Xt.copy(Vn).multiplyScalar(ui).floor())},this.getScissor=function(ln){return ln.copy(Mi)},this.setScissor=function(ln,wi,er,mi){ln.isVector4?Mi.set(ln.x,ln.y,ln.z,ln.w):Mi.set(ln,wi,er,mi),vi.scissor(xn.copy(Mi).multiplyScalar(ui).floor())},this.getScissorTest=function(){return Oi},this.setScissorTest=function(ln){vi.setScissorTest(Oi=ln)},this.setOpaqueSort=function(ln){Pi=ln},this.setTransparentSort=function(ln){hi=ln},this.getClearColor=function(ln){return ln.copy(Hi.getClearColor())},this.setClearColor=function(){Hi.setClearColor.apply(Hi,arguments)},this.getClearAlpha=function(){return Hi.getClearAlpha()},this.setClearAlpha=function(){Hi.setClearAlpha.apply(Hi,arguments)},this.clear=function(ln=!0,wi=!0,er=!0){let mi=0;ln&&(mi|=Jn.COLOR_BUFFER_BIT),wi&&(mi|=Jn.DEPTH_BUFFER_BIT),er&&(mi|=Jn.STENCIL_BUFFER_BIT),Jn.clear(mi)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",uo,!1),o.removeEventListener("webglcontextrestored",oo,!1),o.removeEventListener("webglcontextcreationerror",Oa,!1),Ro.dispose(),Yt.dispose(),di.dispose(),bi.dispose(),or.dispose(),ms.dispose(),Xn.dispose(),rs.dispose(),vr.dispose(),ss.dispose(),ss.removeEventListener("sessionstart",Os),ss.removeEventListener("sessionend",go),Zn&&(Zn.dispose(),Zn=null),Rl.stop()},this.renderBufferDirect=function(ln,wi,er,mi,hr,Bo){null===wi&&(wi=As);const sa=hr.isMesh&&hr.matrixWorld.determinant()<0,Pa=function ET(ln,wi,er,mi,hr){!0!==wi.isScene&&(wi=As),ri.resetTextureUnits();const Bo=wi.fog,Pa=null===ut?Ne.outputEncoding:!0===ut.isXRRenderTarget?ut.texture.encoding:Qa,oa=(mi.isMeshStandardMaterial?or:bi).get(mi.envMap||(mi.isMeshStandardMaterial?wi.environment:null)),Tl=!0===mi.vertexColors&&!!er.attributes.color&&4===er.attributes.color.itemSize,La=!!mi.normalMap&&!!er.attributes.tangent,pl=!!er.morphAttributes.position,Sc=!!er.morphAttributes.normal,b_=!!er.morphAttributes.color,x_=mi.toneMapped?Ne.toneMapping:ct,$1=er.morphAttributes.position||er.morphAttributes.normal||er.morphAttributes.color,np=void 0!==$1?$1.length:0,El=di.get(mi),w_=Se.state.lights;!0!==Ai||!0!==Hn&&ln===Rt||Dt.setState(mi,ln,ln===Rt&&mi.id===ht);let Xc=!1;mi.version===El.__version?(El.needsLights&&El.lightsStateVersion!==w_.state.version||El.outputEncoding!==Pa||hr.isInstancedMesh&&!1===El.instancing||!hr.isInstancedMesh&&!0===El.instancing||hr.isSkinnedMesh&&!1===El.skinning||!hr.isSkinnedMesh&&!0===El.skinning||El.envMap!==oa||!0===mi.fog&&El.fog!==Bo||void 0!==El.numClippingPlanes&&(El.numClippingPlanes!==Dt.numPlanes||El.numIntersection!==Dt.numIntersection)||El.vertexAlphas!==Tl||El.vertexTangents!==La||El.morphTargets!==pl||El.morphNormals!==Sc||El.morphColors!==b_||El.toneMapping!==x_||!0===Mr.isWebGL2&&El.morphTargetsCount!==np)&&(Xc=!0):(Xc=!0,El.__version=mi.version);let ip=El.currentProgram;!0===Xc&&(ip=tp(mi,wi,hr));let qg=!1,Ev=!1,Dv=!1;const Ad=ip.getUniforms(),Qg=El.uniforms;if(vi.useProgram(ip.program)&&(qg=!0,Ev=!0,Dv=!0),mi.id!==ht&&(ht=mi.id,Ev=!0),qg||Rt!==ln){if(Ad.setValue(Jn,"projectionMatrix",ln.projectionMatrix),Mr.logarithmicDepthBuffer&&Ad.setValue(Jn,"logDepthBufFC",2/(Math.log(ln.far+1)/Math.LN2)),Rt!==ln&&(Rt=ln,Ev=!0,Dv=!0),mi.isShaderMaterial||mi.isMeshPhongMaterial||mi.isMeshToonMaterial||mi.isMeshStandardMaterial||mi.envMap){const xf=Ad.map.cameraPosition;void 0!==xf&&xf.setValue(Jn,ai.setFromMatrixPosition(ln.matrixWorld))}(mi.isMeshPhongMaterial||mi.isMeshToonMaterial||mi.isMeshLambertMaterial||mi.isMeshBasicMaterial||mi.isMeshStandardMaterial||mi.isShaderMaterial)&&Ad.setValue(Jn,"isOrthographic",!0===ln.isOrthographicCamera),(mi.isMeshPhongMaterial||mi.isMeshToonMaterial||mi.isMeshLambertMaterial||mi.isMeshBasicMaterial||mi.isMeshStandardMaterial||mi.isShaderMaterial||mi.isShadowMaterial||hr.isSkinnedMesh)&&Ad.setValue(Jn,"viewMatrix",ln.matrixWorldInverse)}if(hr.isSkinnedMesh){Ad.setOptional(Jn,hr,"bindMatrix"),Ad.setOptional(Jn,hr,"bindMatrixInverse");const xf=hr.skeleton;xf&&(Mr.floatVertexTextures?(null===xf.boneTexture&&xf.computeBoneTexture(),Ad.setValue(Jn,"boneTexture",xf.boneTexture,ri),Ad.setValue(Jn,"boneTextureSize",xf.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const lM=er.morphAttributes;if((void 0!==lM.position||void 0!==lM.normal||void 0!==lM.color&&!0===Mr.isWebGL2)&&rr.update(hr,er,mi,ip),(Ev||El.receiveShadow!==hr.receiveShadow)&&(El.receiveShadow=hr.receiveShadow,Ad.setValue(Jn,"receiveShadow",hr.receiveShadow)),mi.isMeshGouraudMaterial&&null!==mi.envMap&&(Qg.envMap.value=oa,Qg.flipEnvMap.value=oa.isCubeTexture&&!1===oa.isRenderTargetTexture?-1:1),Ev&&(Ad.setValue(Jn,"toneMappingExposure",Ne.toneMappingExposure),El.needsLights&&function Tv(ln,wi){ln.ambientLightColor.needsUpdate=wi,ln.lightProbe.needsUpdate=wi,ln.directionalLights.needsUpdate=wi,ln.directionalLightShadows.needsUpdate=wi,ln.pointLights.needsUpdate=wi,ln.pointLightShadows.needsUpdate=wi,ln.spotLights.needsUpdate=wi,ln.spotLightShadows.needsUpdate=wi,ln.rectAreaLights.needsUpdate=wi,ln.hemisphereLights.needsUpdate=wi}(Qg,Dv),Bo&&!0===mi.fog&&Ys.refreshFogUniforms(Qg,Bo),Ys.refreshMaterialUniforms(Qg,mi,ui,bn,Zn),Uo.upload(Jn,El.uniformsList,Qg,ri)),mi.isShaderMaterial&&!0===mi.uniformsNeedUpdate&&(Uo.upload(Jn,El.uniformsList,Qg,ri),mi.uniformsNeedUpdate=!1),mi.isSpriteMaterial&&Ad.setValue(Jn,"center",hr.center),Ad.setValue(Jn,"modelViewMatrix",hr.modelViewMatrix),Ad.setValue(Jn,"normalMatrix",hr.normalMatrix),Ad.setValue(Jn,"modelMatrix",hr.matrixWorld),mi.isShaderMaterial||mi.isRawShaderMaterial){const xf=mi.uniformsGroups;for(let cM=0,oB=xf.length;cM<oB;cM++)if(Mr.isWebGL2){const DT=xf[cM];rs.update(DT,ip),rs.bind(DT,ip)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ip}(ln,wi,er,mi,hr);vi.setMaterial(mi,sa);let oa=er.index;const Tl=er.attributes.position;if(null===oa){if(void 0===Tl||0===Tl.count)return}else if(0===oa.count)return;let La=1;!0===mi.wireframe&&(oa=ps.getWireframeAttribute(er),La=2),Xn.setup(hr,mi,Pa,er,oa);let pl,Sc=Lr;null!==oa&&(pl=ji.get(oa),Sc=Us,Sc.setIndex(pl));const b_=null!==oa?oa.count:Tl.count,x_=er.drawRange.start*La,$1=er.drawRange.count*La,np=null!==Bo?Bo.start*La:0,El=null!==Bo?Bo.count*La:1/0,w_=Math.max(x_,np),Xc=Math.min(b_,x_+$1,np+El)-1,ip=Math.max(0,Xc-w_+1);if(0!==ip){if(hr.isMesh)!0===mi.wireframe?(vi.setLineWidth(mi.wireframeLinewidth*co()),Sc.setMode(Jn.LINES)):Sc.setMode(Jn.TRIANGLES);else if(hr.isLine){let qg=mi.linewidth;void 0===qg&&(qg=1),vi.setLineWidth(qg*co()),Sc.setMode(hr.isLineSegments?Jn.LINES:hr.isLineLoop?Jn.LINE_LOOP:Jn.LINE_STRIP)}else hr.isPoints?Sc.setMode(Jn.POINTS):hr.isSprite&&Sc.setMode(Jn.TRIANGLES);if(hr.isInstancedMesh)Sc.renderInstances(w_,ip,hr.count);else if(er.isInstancedBufferGeometry){const qg=Math.min(er.instanceCount,er._maxInstanceCount);Sc.renderInstances(w_,ip,qg)}else Sc.render(w_,ip)}},this.compile=function(ln,wi){function er(mi,hr,Bo){!0===mi.transparent&&mi.side===X?(mi.side=ue,mi.needsUpdate=!0,tp(mi,hr,Bo),mi.side=K,mi.needsUpdate=!0,tp(mi,hr,Bo),mi.side=X):tp(mi,hr,Bo)}Se=Yt.get(ln),Se.init(),qe.push(Se),ln.traverseVisible(function(mi){mi.isLight&&mi.layers.test(wi.layers)&&(Se.pushLight(mi),mi.castShadow&&Se.pushShadow(mi))}),Se.setupLights(Ne.physicallyCorrectLights),ln.traverse(function(mi){const hr=mi.material;if(hr)if(Array.isArray(hr))for(let Bo=0;Bo<hr.length;Bo++)er(hr[Bo],ln,mi);else er(hr,ln,mi)}),qe.pop(),Se=null};let Wi=null;function Os(){Rl.stop()}function go(){Rl.start()}const Rl=new $_;function uh(ln,wi,er,mi){if(!1===ln.visible)return;if(ln.layers.test(wi.layers))if(ln.isGroup)er=ln.renderOrder;else if(ln.isLOD)!0===ln.autoUpdate&&ln.update(wi);else if(ln.isLight)Se.pushLight(ln),ln.castShadow&&Se.pushShadow(ln);else if(ln.isSprite){if(!ln.frustumCulled||Xi.intersectsSprite(ln)){mi&&ai.setFromMatrixPosition(ln.matrixWorld).applyMatrix4(_r);const sa=ms.update(ln),Pa=ln.material;Pa.visible&&Te.push(ln,sa,Pa,er,ai.z,null)}}else if((ln.isMesh||ln.isLine||ln.isPoints)&&(ln.isSkinnedMesh&&ln.skeleton.frame!==Ji.render.frame&&(ln.skeleton.update(),ln.skeleton.frame=Ji.render.frame),!ln.frustumCulled||Xi.intersectsObject(ln))){mi&&ai.setFromMatrixPosition(ln.matrixWorld).applyMatrix4(_r);const sa=ms.update(ln),Pa=ln.material;if(Array.isArray(Pa)){const oa=sa.groups;for(let Tl=0,La=oa.length;Tl<La;Tl++){const pl=oa[Tl],Sc=Pa[pl.materialIndex];Sc&&Sc.visible&&Te.push(ln,sa,Sc,er,ai.z,pl)}}else Pa.visible&&Te.push(ln,sa,Pa,er,ai.z,null)}const Bo=ln.children;for(let sa=0,Pa=Bo.length;sa<Pa;sa++)uh(Bo[sa],wi,er,mi)}function pd(ln,wi,er,mi){const hr=ln.opaque,Bo=ln.transmissive,sa=ln.transparent;Se.setupLightsView(er),Bo.length>0&&function j1(ln,wi,er){const mi=Mr.isWebGL2;null===Zn&&(Zn=new Lo(1,1,{generateMipmaps:!0,type:Li.has("EXT_color_buffer_half_float")?Es:Ar,minFilter:br,samples:mi&&!0===b?4:0})),Ne.getDrawingBufferSize(ur),mi?Zn.setSize(ur.x,ur.y):Zn.setSize(wa(ur.x),wa(ur.y));const hr=Ne.getRenderTarget();Ne.setRenderTarget(Zn),Ne.clear();const Bo=Ne.toneMapping;Ne.toneMapping=ct,oc(ln,wi,er),Ne.toneMapping=Bo,ri.updateMultisampleRenderTarget(Zn),ri.updateRenderTargetMipmap(Zn),Ne.setRenderTarget(hr)}(hr,wi,er),mi&&vi.viewport(Xt.copy(mi)),hr.length>0&&oc(hr,wi,er),Bo.length>0&&oc(Bo,wi,er),sa.length>0&&oc(sa,wi,er),vi.buffers.depth.setTest(!0),vi.buffers.depth.setMask(!0),vi.buffers.color.setMask(!0),vi.setPolygonOffset(!1)}function oc(ln,wi,er){const mi=!0===wi.isScene?wi.overrideMaterial:null;for(let hr=0,Bo=ln.length;hr<Bo;hr++){const sa=ln[hr],Pa=sa.object,oa=sa.geometry,Tl=null===mi?sa.material:mi,La=sa.group;Pa.layers.test(er.layers)&&ep(Pa,wi,er,oa,Tl,La)}}function ep(ln,wi,er,mi,hr,Bo){ln.onBeforeRender(Ne,wi,er,mi,hr,Bo),ln.modelViewMatrix.multiplyMatrices(er.matrixWorldInverse,ln.matrixWorld),ln.normalMatrix.getNormalMatrix(ln.modelViewMatrix),hr.onBeforeRender(Ne,wi,er,mi,ln,Bo),!0===hr.transparent&&hr.side===X?(hr.side=ue,hr.needsUpdate=!0,Ne.renderBufferDirect(er,wi,mi,hr,ln,Bo),hr.side=K,hr.needsUpdate=!0,Ne.renderBufferDirect(er,wi,mi,hr,ln,Bo),hr.side=X):Ne.renderBufferDirect(er,wi,mi,hr,ln,Bo),ln.onAfterRender(Ne,wi,er,mi,hr,Bo)}function tp(ln,wi,er){!0!==wi.isScene&&(wi=As);const mi=di.get(ln),hr=Se.state.lights,sa=hr.state.version,Pa=vr.getParameters(ln,hr.state,Se.state.shadowsArray,wi,er),oa=vr.getProgramCacheKey(Pa);let Tl=mi.programs;mi.environment=ln.isMeshStandardMaterial?wi.environment:null,mi.fog=wi.fog,mi.envMap=(ln.isMeshStandardMaterial?or:bi).get(ln.envMap||mi.environment),void 0===Tl&&(ln.addEventListener("dispose",fa),Tl=new Map,mi.programs=Tl);let La=Tl.get(oa);if(void 0!==La){if(mi.currentProgram===La&&mi.lightsStateVersion===sa)return TT(ln,Pa),La}else Pa.uniforms=vr.getUniforms(ln),ln.onBuild(er,Pa,Ne),ln.onBeforeCompile(Pa,Ne),La=vr.acquireProgram(Pa,oa),Tl.set(oa,La),mi.uniforms=Pa.uniforms;const pl=mi.uniforms;(!ln.isShaderMaterial&&!ln.isRawShaderMaterial||!0===ln.clipping)&&(pl.clippingPlanes=Dt.uniform),TT(ln,Pa),mi.needsLights=function sB(ln){return ln.isMeshLambertMaterial||ln.isMeshToonMaterial||ln.isMeshPhongMaterial||ln.isMeshStandardMaterial||ln.isShadowMaterial||ln.isShaderMaterial&&!0===ln.lights}(ln),mi.lightsStateVersion=sa,mi.needsLights&&(pl.ambientLightColor.value=hr.state.ambient,pl.lightProbe.value=hr.state.probe,pl.directionalLights.value=hr.state.directional,pl.directionalLightShadows.value=hr.state.directionalShadow,pl.spotLights.value=hr.state.spot,pl.spotLightShadows.value=hr.state.spotShadow,pl.rectAreaLights.value=hr.state.rectArea,pl.ltc_1.value=hr.state.rectAreaLTC1,pl.ltc_2.value=hr.state.rectAreaLTC2,pl.pointLights.value=hr.state.point,pl.pointLightShadows.value=hr.state.pointShadow,pl.hemisphereLights.value=hr.state.hemi,pl.directionalShadowMap.value=hr.state.directionalShadowMap,pl.directionalShadowMatrix.value=hr.state.directionalShadowMatrix,pl.spotShadowMap.value=hr.state.spotShadowMap,pl.spotLightMatrix.value=hr.state.spotLightMatrix,pl.spotLightMap.value=hr.state.spotLightMap,pl.pointShadowMap.value=hr.state.pointShadowMap,pl.pointShadowMatrix.value=hr.state.pointShadowMatrix);const Sc=La.getUniforms(),b_=Uo.seqWithValue(Sc.seq,pl);return mi.currentProgram=La,mi.uniformsList=b_,La}function TT(ln,wi){const er=di.get(ln);er.outputEncoding=wi.outputEncoding,er.instancing=wi.instancing,er.skinning=wi.skinning,er.morphTargets=wi.morphTargets,er.morphNormals=wi.morphNormals,er.morphColors=wi.morphColors,er.morphTargetsCount=wi.morphTargetsCount,er.numClippingPlanes=wi.numClippingPlanes,er.numIntersection=wi.numClipIntersection,er.vertexAlphas=wi.vertexAlphas,er.vertexTangents=wi.vertexTangents,er.toneMapping=wi.toneMapping}Rl.setAnimationLoop(function Pr(ln){Wi&&Wi(ln)}),typeof self<"u"&&Rl.setContext(self),this.setAnimationLoop=function(ln){Wi=ln,ss.setAnimationLoop(ln),null===ln?Rl.stop():Rl.start()},ss.addEventListener("sessionstart",Os),ss.addEventListener("sessionend",go),this.render=function(ln,wi){if(void 0===wi||!0===wi.isCamera){if(!0!==Fe){if(!0===ln.matrixWorldAutoUpdate&&ln.updateMatrixWorld(),null===wi.parent&&!0===wi.matrixWorldAutoUpdate&&wi.updateMatrixWorld(),!0===ss.enabled&&!0===ss.isPresenting&&(!0===ss.cameraAutoUpdate&&ss.updateCamera(wi),wi=ss.getCamera()),!0===ln.isScene&&ln.onBeforeRender(Ne,ln,wi,ut),Se=Yt.get(ln,qe.length),Se.init(),qe.push(Se),_r.multiplyMatrices(wi.projectionMatrix,wi.matrixWorldInverse),Xi.setFromProjectionMatrix(_r),Hn=this.localClippingEnabled,Ai=Dt.init(this.clippingPlanes,Hn,wi),Te=Ro.get(ln,Pe.length),Te.init(),Pe.push(Te),uh(ln,wi,0,Ne.sortObjects),Te.finish(),!0===Ne.sortObjects&&Te.sort(Pi,hi),!0===Ai&&Dt.beginShadows(),Kn.render(Se.state.shadowsArray,ln,wi),!0===Ai&&Dt.endShadows(),!0===this.info.autoReset&&this.info.reset(),Hi.render(Te,ln),Se.setupLights(Ne.physicallyCorrectLights),wi.isArrayCamera){const mi=wi.cameras;for(let hr=0,Bo=mi.length;hr<Bo;hr++){const sa=mi[hr];pd(Te,ln,sa,sa.viewport)}}else pd(Te,ln,wi);null!==ut&&(ri.updateMultisampleRenderTarget(ut),ri.updateRenderTargetMipmap(ut)),!0===ln.isScene&&ln.onAfterRender(Ne,ln,wi),Xn.resetDefaultState(),ht=-1,Rt=null,qe.pop(),Se=qe.length>0?qe[qe.length-1]:null,Pe.pop(),Te=Pe.length>0?Pe[Pe.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return at},this.getActiveMipmapLevel=function(){return _t},this.getRenderTarget=function(){return ut},this.setRenderTargetTextures=function(ln,wi,er){di.get(ln.texture).__webglTexture=wi,di.get(ln.depthTexture).__webglTexture=er;const mi=di.get(ln);mi.__hasExternalTextures=!0,mi.__hasExternalTextures&&(mi.__autoAllocateDepthBuffer=void 0===er,mi.__autoAllocateDepthBuffer||!0===Li.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),mi.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ln,wi){const er=di.get(ln);er.__webglFramebuffer=wi,er.__useDefaultFramebuffer=void 0===wi},this.setRenderTarget=function(ln,wi=0,er=0){ut=ln,at=wi,_t=er;let mi=!0,hr=null,Bo=!1,sa=!1;if(ln){const oa=di.get(ln);void 0!==oa.__useDefaultFramebuffer?(vi.bindFramebuffer(Jn.FRAMEBUFFER,null),mi=!1):void 0===oa.__webglFramebuffer?ri.setupRenderTarget(ln):oa.__hasExternalTextures&&ri.rebindTextures(ln,di.get(ln.texture).__webglTexture,di.get(ln.depthTexture).__webglTexture);const Tl=ln.texture;(Tl.isData3DTexture||Tl.isDataArrayTexture||Tl.isCompressedArrayTexture)&&(sa=!0);const La=di.get(ln).__webglFramebuffer;ln.isWebGLCubeRenderTarget?(hr=La[wi],Bo=!0):hr=Mr.isWebGL2&&ln.samples>0&&!1===ri.useMultisampledRTT(ln)?di.get(ln).__webglMultisampledFramebuffer:La,Xt.copy(ln.viewport),xn.copy(ln.scissor),bt=ln.scissorTest}else Xt.copy(Vn).multiplyScalar(ui).floor(),xn.copy(Mi).multiplyScalar(ui).floor(),bt=Oi;if(vi.bindFramebuffer(Jn.FRAMEBUFFER,hr)&&Mr.drawBuffers&&mi&&vi.drawBuffers(ln,hr),vi.viewport(Xt),vi.scissor(xn),vi.setScissorTest(bt),Bo){const oa=di.get(ln.texture);Jn.framebufferTexture2D(Jn.FRAMEBUFFER,Jn.COLOR_ATTACHMENT0,Jn.TEXTURE_CUBE_MAP_POSITIVE_X+wi,oa.__webglTexture,er)}else if(sa){const oa=di.get(ln.texture);Jn.framebufferTextureLayer(Jn.FRAMEBUFFER,Jn.COLOR_ATTACHMENT0,oa.__webglTexture,er||0,wi||0)}ht=-1},this.readRenderTargetPixels=function(ln,wi,er,mi,hr,Bo,sa){if(!ln||!ln.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Pa=di.get(ln).__webglFramebuffer;if(ln.isWebGLCubeRenderTarget&&void 0!==sa&&(Pa=Pa[sa]),Pa){vi.bindFramebuffer(Jn.FRAMEBUFFER,Pa);try{const oa=ln.texture,Tl=oa.format,La=oa.type;if(Tl!==xr&&Cn.convert(Tl)!==Jn.getParameter(Jn.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const pl=La===Es&&(Li.has("EXT_color_buffer_half_float")||Mr.isWebGL2&&Li.has("EXT_color_buffer_float"));if(!(La===Ar||Cn.convert(La)===Jn.getParameter(Jn.IMPLEMENTATION_COLOR_READ_TYPE)||La===ws&&(Mr.isWebGL2||Li.has("OES_texture_float")||Li.has("WEBGL_color_buffer_float"))||pl))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");wi>=0&&wi<=ln.width-mi&&er>=0&&er<=ln.height-hr&&Jn.readPixels(wi,er,mi,hr,Cn.convert(Tl),Cn.convert(La),Bo)}finally{const oa=null!==ut?di.get(ut).__webglFramebuffer:null;vi.bindFramebuffer(Jn.FRAMEBUFFER,oa)}}},this.copyFramebufferToTexture=function(ln,wi,er=0){const mi=Math.pow(2,-er),hr=Math.floor(wi.image.width*mi),Bo=Math.floor(wi.image.height*mi);ri.setTexture2D(wi,0),Jn.copyTexSubImage2D(Jn.TEXTURE_2D,er,0,0,ln.x,ln.y,hr,Bo),vi.unbindTexture()},this.copyTextureToTexture=function(ln,wi,er,mi=0){const hr=wi.image.width,Bo=wi.image.height,sa=Cn.convert(er.format),Pa=Cn.convert(er.type);ri.setTexture2D(er,0),Jn.pixelStorei(Jn.UNPACK_FLIP_Y_WEBGL,er.flipY),Jn.pixelStorei(Jn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,er.premultiplyAlpha),Jn.pixelStorei(Jn.UNPACK_ALIGNMENT,er.unpackAlignment),wi.isDataTexture?Jn.texSubImage2D(Jn.TEXTURE_2D,mi,ln.x,ln.y,hr,Bo,sa,Pa,wi.image.data):wi.isCompressedTexture?Jn.compressedTexSubImage2D(Jn.TEXTURE_2D,mi,ln.x,ln.y,wi.mipmaps[0].width,wi.mipmaps[0].height,sa,wi.mipmaps[0].data):Jn.texSubImage2D(Jn.TEXTURE_2D,mi,ln.x,ln.y,sa,Pa,wi.image),0===mi&&er.generateMipmaps&&Jn.generateMipmap(Jn.TEXTURE_2D),vi.unbindTexture()},this.copyTextureToTexture3D=function(ln,wi,er,mi,hr=0){if(Ne.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const Bo=ln.max.x-ln.min.x+1,sa=ln.max.y-ln.min.y+1,Pa=ln.max.z-ln.min.z+1,oa=Cn.convert(mi.format),Tl=Cn.convert(mi.type);let La;if(mi.isData3DTexture)ri.setTexture3D(mi,0),La=Jn.TEXTURE_3D;else{if(!mi.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ri.setTexture2DArray(mi,0),La=Jn.TEXTURE_2D_ARRAY}Jn.pixelStorei(Jn.UNPACK_FLIP_Y_WEBGL,mi.flipY),Jn.pixelStorei(Jn.UNPACK_PREMULTIPLY_ALPHA_WEBGL,mi.premultiplyAlpha),Jn.pixelStorei(Jn.UNPACK_ALIGNMENT,mi.unpackAlignment);const pl=Jn.getParameter(Jn.UNPACK_ROW_LENGTH),Sc=Jn.getParameter(Jn.UNPACK_IMAGE_HEIGHT),b_=Jn.getParameter(Jn.UNPACK_SKIP_PIXELS),x_=Jn.getParameter(Jn.UNPACK_SKIP_ROWS),$1=Jn.getParameter(Jn.UNPACK_SKIP_IMAGES),np=er.isCompressedTexture?er.mipmaps[0]:er.image;Jn.pixelStorei(Jn.UNPACK_ROW_LENGTH,np.width),Jn.pixelStorei(Jn.UNPACK_IMAGE_HEIGHT,np.height),Jn.pixelStorei(Jn.UNPACK_SKIP_PIXELS,ln.min.x),Jn.pixelStorei(Jn.UNPACK_SKIP_ROWS,ln.min.y),Jn.pixelStorei(Jn.UNPACK_SKIP_IMAGES,ln.min.z),er.isDataTexture||er.isData3DTexture?Jn.texSubImage3D(La,hr,wi.x,wi.y,wi.z,Bo,sa,Pa,oa,Tl,np.data):er.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Jn.compressedTexSubImage3D(La,hr,wi.x,wi.y,wi.z,Bo,sa,Pa,oa,np.data)):Jn.texSubImage3D(La,hr,wi.x,wi.y,wi.z,Bo,sa,Pa,oa,Tl,np),Jn.pixelStorei(Jn.UNPACK_ROW_LENGTH,pl),Jn.pixelStorei(Jn.UNPACK_IMAGE_HEIGHT,Sc),Jn.pixelStorei(Jn.UNPACK_SKIP_PIXELS,b_),Jn.pixelStorei(Jn.UNPACK_SKIP_ROWS,x_),Jn.pixelStorei(Jn.UNPACK_SKIP_IMAGES,$1),0===hr&&mi.generateMipmaps&&Jn.generateMipmap(La),vi.unbindTexture()},this.initTexture=function(ln){ln.isCubeTexture?ri.setTextureCube(ln,0):ln.isData3DTexture?ri.setTexture3D(ln,0):ln.isDataArrayTexture||ln.isCompressedArrayTexture?ri.setTexture2DArray(ln,0):ri.setTexture2D(ln,0),vi.unbindTexture()},this.resetState=function(){at=0,_t=0,ut=null,vi.reset(),Xn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class pe{constructor(o,c=1,h=1e3){this.isFog=!0,this.name="",this.color=new wr(o),this.near=c,this.far=h}clone(){return new pe(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class xe extends Va{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(o,c){return super.copy(o,c),null!==o.background&&(this.background=o.background.clone()),null!==o.environment&&(this.environment=o.environment.clone()),null!==o.fog&&(this.fog=o.fog.clone()),this.backgroundBlurriness=o.backgroundBlurriness,null!==o.overrideMaterial&&(this.overrideMaterial=o.overrideMaterial.clone()),this.matrixAutoUpdate=o.matrixAutoUpdate,this}toJSON(o){const c=super.toJSON(o);return null!==this.fog&&(c.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(c.backgroundBlurriness=this.backgroundBlurriness),c}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(o){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=o}}class Ge extends $h{constructor(o){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new wr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.linewidth=o.linewidth,this.linecap=o.linecap,this.linejoin=o.linejoin,this.fog=o.fog,this}}const nt=new Ut,yt=new Ut,Ct=new so,Ft=new qc,Vt=new xd;class an extends Va{constructor(o=new So,c=new Ge){super(),this.isLine=!0,this.type="Line",this.geometry=o,this.material=c,this.updateMorphTargets()}copy(o,c){return super.copy(o,c),this.material=o.material,this.geometry=o.geometry,this}computeLineDistances(){const o=this.geometry;if(null===o.index){const c=o.attributes.position,h=[0];for(let f=1,b=c.count;f<b;f++)nt.fromBufferAttribute(c,f-1),yt.fromBufferAttribute(c,f),h[f]=h[f-1],h[f]+=nt.distanceTo(yt);o.setAttribute("lineDistance",new Ss(h,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(o,c){const h=this.geometry,f=this.matrixWorld,b=o.params.Line.threshold,S=h.drawRange;if(null===h.boundingSphere&&h.computeBoundingSphere(),Vt.copy(h.boundingSphere),Vt.applyMatrix4(f),Vt.radius+=b,!1===o.ray.intersectsSphere(Vt))return;Ct.copy(f).invert(),Ft.copy(o.ray).applyMatrix4(Ct);const B=b/((this.scale.x+this.scale.y+this.scale.z)/3),ne=B*B,ae=new Ut,ge=new Ut,Te=new Ut,Se=new Ut,Pe=this.isLineSegments?2:1,qe=h.index,Fe=h.attributes.position;if(null!==qe)for(let ut=Math.max(0,S.start),ht=Math.min(qe.count,S.start+S.count)-1;ut<ht;ut+=Pe){const Rt=qe.getX(ut),Xt=qe.getX(ut+1);if(ae.fromBufferAttribute(Fe,Rt),ge.fromBufferAttribute(Fe,Xt),Ft.distanceSqToSegment(ae,ge,Se,Te)>ne)continue;Se.applyMatrix4(this.matrixWorld);const bt=o.ray.origin.distanceTo(Se);bt<o.near||bt>o.far||c.push({distance:bt,point:Te.clone().applyMatrix4(this.matrixWorld),index:ut,face:null,faceIndex:null,object:this})}else for(let ut=Math.max(0,S.start),ht=Math.min(Fe.count,S.start+S.count)-1;ut<ht;ut+=Pe){if(ae.fromBufferAttribute(Fe,ut),ge.fromBufferAttribute(Fe,ut+1),Ft.distanceSqToSegment(ae,ge,Se,Te)>ne)continue;Se.applyMatrix4(this.matrixWorld);const Xt=o.ray.origin.distanceTo(Se);Xt<o.near||Xt>o.far||c.push({distance:Xt,point:Te.clone().applyMatrix4(this.matrixWorld),index:ut,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const c=this.geometry.morphAttributes,h=Object.keys(c);if(h.length>0){const f=c[h[0]];if(void 0!==f){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,S=f.length;b<S;b++){const B=f[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[B]=b}}}}}const Tn=new Ut,Pn=new Ut;class xi extends an{constructor(o,c){super(o,c),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const o=this.geometry;if(null===o.index){const c=o.attributes.position,h=[];for(let f=0,b=c.count;f<b;f+=2)Tn.fromBufferAttribute(c,f),Pn.fromBufferAttribute(c,f+1),h[f]=0===f?0:h[f-1],h[f+1]=h[f]+Tn.distanceTo(Pn);o.setAttribute("lineDistance",new Ss(h,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class pr extends $h{constructor(o){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new wr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.map=o.map,this.alphaMap=o.alphaMap,this.size=o.size,this.sizeAttenuation=o.sizeAttenuation,this.fog=o.fog,this}}const $i=new so,$s=new qc,mo=new xd,Er=new Ut;class Ri extends Va{constructor(o=new So,c=new pr){super(),this.isPoints=!0,this.type="Points",this.geometry=o,this.material=c,this.updateMorphTargets()}copy(o,c){return super.copy(o,c),this.material=o.material,this.geometry=o.geometry,this}raycast(o,c){const h=this.geometry,f=this.matrixWorld,b=o.params.Points.threshold,S=h.drawRange;if(null===h.boundingSphere&&h.computeBoundingSphere(),mo.copy(h.boundingSphere),mo.applyMatrix4(f),mo.radius+=b,!1===o.ray.intersectsSphere(mo))return;$i.copy(f).invert(),$s.copy(o.ray).applyMatrix4($i);const B=b/((this.scale.x+this.scale.y+this.scale.z)/3),ne=B*B,ae=h.index,Te=h.attributes.position;if(null!==ae)for(let qe=Math.max(0,S.start),Ne=Math.min(ae.count,S.start+S.count);qe<Ne;qe++){const Fe=ae.getX(qe);Er.fromBufferAttribute(Te,Fe),to(Er,Fe,ne,f,o,c,this)}else for(let qe=Math.max(0,S.start),Ne=Math.min(Te.count,S.start+S.count);qe<Ne;qe++)Er.fromBufferAttribute(Te,qe),to(Er,qe,ne,f,o,c,this)}updateMorphTargets(){const c=this.geometry.morphAttributes,h=Object.keys(c);if(h.length>0){const f=c[h[0]];if(void 0!==f){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,S=f.length;b<S;b++){const B=f[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[B]=b}}}}}function to(v,o,c,h,f,b,S){const B=$s.distanceSqToPoint(v);if(B<c){const ne=new Ut;$s.closestPointToPoint(v,ne),ne.applyMatrix4(h);const ae=f.ray.origin.distanceTo(ne);if(ae<f.near||ae>f.far)return;b.push({distance:ae,distanceToRay:Math.sqrt(B),point:ne,index:o,face:null,object:S})}}class zr extends Ws{constructor(o=null,c=1,h=1,f,b,S,B,ne,ae=Gt,ge=Gt,Te,Se){super(null,S,B,ne,ae,ge,f,b,Te,Se),this.isDataTexture=!0,this.image={data:o,width:c,height:h},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Qo extends Ws{constructor(o,c,h,f,b,S,B,ne,ae){super(o,c,h,f,b,S,B,ne,ae),this.isCanvasTexture=!0,this.needsUpdate=!0}}class aa{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(o,c){const h=this.getUtoTmapping(o);return this.getPoint(h,c)}getPoints(o=5){const c=[];for(let h=0;h<=o;h++)c.push(this.getPoint(h/o));return c}getSpacedPoints(o=5){const c=[];for(let h=0;h<=o;h++)c.push(this.getPointAt(h/o));return c}getLength(){const o=this.getLengths();return o[o.length-1]}getLengths(o=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===o+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const c=[];let h,f=this.getPoint(0),b=0;c.push(0);for(let S=1;S<=o;S++)h=this.getPoint(S/o),b+=h.distanceTo(f),c.push(b),f=h;return this.cacheArcLengths=c,c}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(o,c){const h=this.getLengths();let f=0;const b=h.length;let S;S=c||o*h[b-1];let ae,B=0,ne=b-1;for(;B<=ne;)if(f=Math.floor(B+(ne-B)/2),ae=h[f]-S,ae<0)B=f+1;else{if(!(ae>0)){ne=f;break}ne=f-1}if(f=ne,h[f]===S)return f/(b-1);const ge=h[f];return(f+(S-ge)/(h[f+1]-ge))/(b-1)}getTangent(o,c){let f=o-1e-4,b=o+1e-4;f<0&&(f=0),b>1&&(b=1);const S=this.getPoint(f),B=this.getPoint(b),ne=c||(S.isVector2?new Di:new Ut);return ne.copy(B).sub(S).normalize(),ne}getTangentAt(o,c){const h=this.getUtoTmapping(o);return this.getTangent(h,c)}computeFrenetFrames(o,c){const h=new Ut,f=[],b=[],S=[],B=new Ut,ne=new so;for(let Pe=0;Pe<=o;Pe++)f[Pe]=this.getTangentAt(Pe/o,new Ut);b[0]=new Ut,S[0]=new Ut;let ae=Number.MAX_VALUE;const ge=Math.abs(f[0].x),Te=Math.abs(f[0].y),Se=Math.abs(f[0].z);ge<=ae&&(ae=ge,h.set(1,0,0)),Te<=ae&&(ae=Te,h.set(0,1,0)),Se<=ae&&h.set(0,0,1),B.crossVectors(f[0],h).normalize(),b[0].crossVectors(f[0],B),S[0].crossVectors(f[0],b[0]);for(let Pe=1;Pe<=o;Pe++){if(b[Pe]=b[Pe-1].clone(),S[Pe]=S[Pe-1].clone(),B.crossVectors(f[Pe-1],f[Pe]),B.length()>Number.EPSILON){B.normalize();const qe=Math.acos(Vl(f[Pe-1].dot(f[Pe]),-1,1));b[Pe].applyMatrix4(ne.makeRotationAxis(B,qe))}S[Pe].crossVectors(f[Pe],b[Pe])}if(!0===c){let Pe=Math.acos(Vl(b[0].dot(b[o]),-1,1));Pe/=o,f[0].dot(B.crossVectors(b[0],b[o]))>0&&(Pe=-Pe);for(let qe=1;qe<=o;qe++)b[qe].applyMatrix4(ne.makeRotationAxis(f[qe],Pe*qe)),S[qe].crossVectors(f[qe],b[qe])}return{tangents:f,normals:b,binormals:S}}clone(){return(new this.constructor).copy(this)}copy(o){return this.arcLengthDivisions=o.arcLengthDivisions,this}toJSON(){const o={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return o.arcLengthDivisions=this.arcLengthDivisions,o.type=this.type,o}fromJSON(o){return this.arcLengthDivisions=o.arcLengthDivisions,this}}class Pl extends aa{constructor(o=0,c=0,h=1,f=1,b=0,S=2*Math.PI,B=!1,ne=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=o,this.aY=c,this.xRadius=h,this.yRadius=f,this.aStartAngle=b,this.aEndAngle=S,this.aClockwise=B,this.aRotation=ne}getPoint(o,c){const h=c||new Di,f=2*Math.PI;let b=this.aEndAngle-this.aStartAngle;const S=Math.abs(b)<Number.EPSILON;for(;b<0;)b+=f;for(;b>f;)b-=f;b<Number.EPSILON&&(b=S?0:f),!0===this.aClockwise&&!S&&(b===f?b=-f:b-=f);const B=this.aStartAngle+o*b;let ne=this.aX+this.xRadius*Math.cos(B),ae=this.aY+this.yRadius*Math.sin(B);if(0!==this.aRotation){const ge=Math.cos(this.aRotation),Te=Math.sin(this.aRotation),Se=ne-this.aX,Pe=ae-this.aY;ne=Se*ge-Pe*Te+this.aX,ae=Se*Te+Pe*ge+this.aY}return h.set(ne,ae)}copy(o){return super.copy(o),this.aX=o.aX,this.aY=o.aY,this.xRadius=o.xRadius,this.yRadius=o.yRadius,this.aStartAngle=o.aStartAngle,this.aEndAngle=o.aEndAngle,this.aClockwise=o.aClockwise,this.aRotation=o.aRotation,this}toJSON(){const o=super.toJSON();return o.aX=this.aX,o.aY=this.aY,o.xRadius=this.xRadius,o.yRadius=this.yRadius,o.aStartAngle=this.aStartAngle,o.aEndAngle=this.aEndAngle,o.aClockwise=this.aClockwise,o.aRotation=this.aRotation,o}fromJSON(o){return super.fromJSON(o),this.aX=o.aX,this.aY=o.aY,this.xRadius=o.xRadius,this.yRadius=o.yRadius,this.aStartAngle=o.aStartAngle,this.aEndAngle=o.aEndAngle,this.aClockwise=o.aClockwise,this.aRotation=o.aRotation,this}}function Ks(){let v=0,o=0,c=0,h=0;function f(b,S,B,ne){v=b,o=B,c=-3*b+3*S-2*B-ne,h=2*b-2*S+B+ne}return{initCatmullRom:function(b,S,B,ne,ae){f(S,B,ae*(B-b),ae*(ne-S))},initNonuniformCatmullRom:function(b,S,B,ne,ae,ge,Te){let Se=(S-b)/ae-(B-b)/(ae+ge)+(B-S)/ge,Pe=(B-S)/ge-(ne-S)/(ge+Te)+(ne-B)/Te;Se*=ge,Pe*=ge,f(S,B,Se,Pe)},calc:function(b){const S=b*b;return v+o*b+c*S+h*(S*b)}}}const Gs=new Ut,Fo=new Ks,sc=new Ks,zu=new Ks;function yu(v,o,c,h,f){const b=.5*(h-o),S=.5*(f-c),B=v*v;return(2*c-2*h+b+S)*(v*B)+(-3*c+3*h-2*b-S)*B+b*v+c}function Rp(v,o,c,h){return function Fh(v,o){const c=1-v;return c*c*o}(v,o)+function jc(v,o){return 2*(1-v)*v*o}(v,c)+function Af(v,o){return v*v*o}(v,h)}function Bs(v,o,c,h,f){return function J0(v,o){const c=1-v;return c*c*c*o}(v,o)+function Od(v,o){const c=1-v;return 3*c*c*v*o}(v,c)+function mf(v,o){return 3*(1-v)*v*v*o}(v,h)+function Zf(v,o){return v*v*v*o}(v,f)}class Pg extends aa{constructor(o=new Di,c=new Di,h=new Di,f=new Di){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=o,this.v1=c,this.v2=h,this.v3=f}getPoint(o,c=new Di){const h=c,f=this.v0,b=this.v1,S=this.v2,B=this.v3;return h.set(Bs(o,f.x,b.x,S.x,B.x),Bs(o,f.y,b.y,S.y,B.y)),h}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this.v3.copy(o.v3),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o.v3=this.v3.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this.v3.fromArray(o.v3),this}}class ds extends aa{constructor(o=new Di,c=new Di){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=o,this.v2=c}getPoint(o,c=new Di){const h=c;return 1===o?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(o).add(this.v1)),h}getPointAt(o,c){return this.getPoint(o,c)}getTangent(o,c){const h=c||new Di;return h.copy(this.v2).sub(this.v1).normalize(),h}copy(o){return super.copy(o),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}}class Wa extends aa{constructor(o=new Di,c=new Di,h=new Di){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=o,this.v1=c,this.v2=h}getPoint(o,c=new Di){const h=c,f=this.v0,b=this.v1,S=this.v2;return h.set(Rp(o,f.x,b.x,S.x),Rp(o,f.y,b.y,S.y)),h}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}}class sh extends aa{constructor(o=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=o}getPoint(o,c=new Di){const h=c,f=this.points,b=(f.length-1)*o,S=Math.floor(b),B=b-S,ne=f[0===S?S:S-1],ae=f[S],ge=f[S>f.length-2?f.length-1:S+1],Te=f[S>f.length-3?f.length-1:S+2];return h.set(yu(B,ne.x,ae.x,ge.x,Te.x),yu(B,ne.y,ae.y,ge.y,Te.y)),h}copy(o){super.copy(o),this.points=[];for(let c=0,h=o.points.length;c<h;c++)this.points.push(o.points[c].clone());return this}toJSON(){const o=super.toJSON();o.points=[];for(let c=0,h=this.points.length;c<h;c++)o.points.push(this.points[c].toArray());return o}fromJSON(o){super.fromJSON(o),this.points=[];for(let c=0,h=o.points.length;c<h;c++){const f=o.points[c];this.points.push((new Di).fromArray(f))}return this}}var gl=Object.freeze({__proto__:null,ArcCurve:class rc extends Pl{constructor(o,c,h,f,b,S){super(o,c,h,h,f,b,S),this.isArcCurve=!0,this.type="ArcCurve"}},CatmullRomCurve3:class Wc extends aa{constructor(o=[],c=!1,h="centripetal",f=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=o,this.closed=c,this.curveType=h,this.tension=f}getPoint(o,c=new Ut){const h=c,f=this.points,b=f.length,S=(b-(this.closed?0:1))*o;let ae,ge,B=Math.floor(S),ne=S-B;this.closed?B+=B>0?0:(Math.floor(Math.abs(B)/b)+1)*b:0===ne&&B===b-1&&(B=b-2,ne=1),this.closed||B>0?ae=f[(B-1)%b]:(Gs.subVectors(f[0],f[1]).add(f[0]),ae=Gs);const Te=f[B%b],Se=f[(B+1)%b];if(this.closed||B+2<b?ge=f[(B+2)%b]:(Gs.subVectors(f[b-1],f[b-2]).add(f[b-1]),ge=Gs),"centripetal"===this.curveType||"chordal"===this.curveType){const Pe="chordal"===this.curveType?.5:.25;let qe=Math.pow(ae.distanceToSquared(Te),Pe),Ne=Math.pow(Te.distanceToSquared(Se),Pe),Fe=Math.pow(Se.distanceToSquared(ge),Pe);Ne<1e-4&&(Ne=1),qe<1e-4&&(qe=Ne),Fe<1e-4&&(Fe=Ne),Fo.initNonuniformCatmullRom(ae.x,Te.x,Se.x,ge.x,qe,Ne,Fe),sc.initNonuniformCatmullRom(ae.y,Te.y,Se.y,ge.y,qe,Ne,Fe),zu.initNonuniformCatmullRom(ae.z,Te.z,Se.z,ge.z,qe,Ne,Fe)}else"catmullrom"===this.curveType&&(Fo.initCatmullRom(ae.x,Te.x,Se.x,ge.x,this.tension),sc.initCatmullRom(ae.y,Te.y,Se.y,ge.y,this.tension),zu.initCatmullRom(ae.z,Te.z,Se.z,ge.z,this.tension));return h.set(Fo.calc(ne),sc.calc(ne),zu.calc(ne)),h}copy(o){super.copy(o),this.points=[];for(let c=0,h=o.points.length;c<h;c++)this.points.push(o.points[c].clone());return this.closed=o.closed,this.curveType=o.curveType,this.tension=o.tension,this}toJSON(){const o=super.toJSON();o.points=[];for(let c=0,h=this.points.length;c<h;c++)o.points.push(this.points[c].toArray());return o.closed=this.closed,o.curveType=this.curveType,o.tension=this.tension,o}fromJSON(o){super.fromJSON(o),this.points=[];for(let c=0,h=o.points.length;c<h;c++){const f=o.points[c];this.points.push((new Ut).fromArray(f))}return this.closed=o.closed,this.curveType=o.curveType,this.tension=o.tension,this}},CubicBezierCurve:Pg,CubicBezierCurve3:class kp extends aa{constructor(o=new Ut,c=new Ut,h=new Ut,f=new Ut){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=o,this.v1=c,this.v2=h,this.v3=f}getPoint(o,c=new Ut){const h=c,f=this.v0,b=this.v1,S=this.v2,B=this.v3;return h.set(Bs(o,f.x,b.x,S.x,B.x),Bs(o,f.y,b.y,S.y,B.y),Bs(o,f.z,b.z,S.z,B.z)),h}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this.v3.copy(o.v3),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o.v3=this.v3.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this.v3.fromArray(o.v3),this}},EllipseCurve:Pl,LineCurve:ds,LineCurve3:class da extends aa{constructor(o=new Ut,c=new Ut){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=o,this.v2=c}getPoint(o,c=new Ut){const h=c;return 1===o?h.copy(this.v2):(h.copy(this.v2).sub(this.v1),h.multiplyScalar(o).add(this.v1)),h}getPointAt(o,c){return this.getPoint(o,c)}copy(o){return super.copy(o),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}},QuadraticBezierCurve:Wa,QuadraticBezierCurve3:class Dr extends aa{constructor(o=new Ut,c=new Ut,h=new Ut){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=o,this.v1=c,this.v2=h}getPoint(o,c=new Ut){const h=c,f=this.v0,b=this.v1,S=this.v2;return h.set(Rp(o,f.x,b.x,S.x),Rp(o,f.y,b.y,S.y),Rp(o,f.z,b.z,S.z)),h}copy(o){return super.copy(o),this.v0.copy(o.v0),this.v1.copy(o.v1),this.v2.copy(o.v2),this}toJSON(){const o=super.toJSON();return o.v0=this.v0.toArray(),o.v1=this.v1.toArray(),o.v2=this.v2.toArray(),o}fromJSON(o){return super.fromJSON(o),this.v0.fromArray(o.v0),this.v1.fromArray(o.v1),this.v2.fromArray(o.v2),this}},SplineCurve:sh});class oh extends aa{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(o){this.curves.push(o)}closePath(){const o=this.curves[0].getPoint(0),c=this.curves[this.curves.length-1].getPoint(1);o.equals(c)||this.curves.push(new ds(c,o))}getPoint(o,c){const h=o*this.getLength(),f=this.getCurveLengths();let b=0;for(;b<f.length;){if(f[b]>=h){const S=f[b]-h,B=this.curves[b],ne=B.getLength();return B.getPointAt(0===ne?0:1-S/ne,c)}b++}return null}getLength(){const o=this.getCurveLengths();return o[o.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const o=[];let c=0;for(let h=0,f=this.curves.length;h<f;h++)c+=this.curves[h].getLength(),o.push(c);return this.cacheLengths=o,o}getSpacedPoints(o=40){const c=[];for(let h=0;h<=o;h++)c.push(this.getPoint(h/o));return this.autoClose&&c.push(c[0]),c}getPoints(o=12){const c=[];let h;for(let f=0,b=this.curves;f<b.length;f++){const S=b[f],ne=S.getPoints(S.isEllipseCurve?2*o:S.isLineCurve||S.isLineCurve3?1:S.isSplineCurve?o*S.points.length:o);for(let ae=0;ae<ne.length;ae++){const ge=ne[ae];h&&h.equals(ge)||(c.push(ge),h=ge)}}return this.autoClose&&c.length>1&&!c[c.length-1].equals(c[0])&&c.push(c[0]),c}copy(o){super.copy(o),this.curves=[];for(let c=0,h=o.curves.length;c<h;c++)this.curves.push(o.curves[c].clone());return this.autoClose=o.autoClose,this}toJSON(){const o=super.toJSON();o.autoClose=this.autoClose,o.curves=[];for(let c=0,h=this.curves.length;c<h;c++)o.curves.push(this.curves[c].toJSON());return o}fromJSON(o){super.fromJSON(o),this.autoClose=o.autoClose,this.curves=[];for(let c=0,h=o.curves.length;c<h;c++){const f=o.curves[c];this.curves.push((new gl[f.type]).fromJSON(f))}return this}}class Hu extends oh{constructor(o){super(),this.type="Path",this.currentPoint=new Di,o&&this.setFromPoints(o)}setFromPoints(o){this.moveTo(o[0].x,o[0].y);for(let c=1,h=o.length;c<h;c++)this.lineTo(o[c].x,o[c].y);return this}moveTo(o,c){return this.currentPoint.set(o,c),this}lineTo(o,c){const h=new ds(this.currentPoint.clone(),new Di(o,c));return this.curves.push(h),this.currentPoint.set(o,c),this}quadraticCurveTo(o,c,h,f){const b=new Wa(this.currentPoint.clone(),new Di(o,c),new Di(h,f));return this.curves.push(b),this.currentPoint.set(h,f),this}bezierCurveTo(o,c,h,f,b,S){const B=new Pg(this.currentPoint.clone(),new Di(o,c),new Di(h,f),new Di(b,S));return this.curves.push(B),this.currentPoint.set(b,S),this}splineThru(o){const c=[this.currentPoint.clone()].concat(o),h=new sh(c);return this.curves.push(h),this.currentPoint.copy(o[o.length-1]),this}arc(o,c,h,f,b,S){return this.absarc(o+this.currentPoint.x,c+this.currentPoint.y,h,f,b,S),this}absarc(o,c,h,f,b,S){return this.absellipse(o,c,h,h,f,b,S),this}ellipse(o,c,h,f,b,S,B,ne){return this.absellipse(o+this.currentPoint.x,c+this.currentPoint.y,h,f,b,S,B,ne),this}absellipse(o,c,h,f,b,S,B,ne){const ae=new Pl(o,c,h,f,b,S,B,ne);if(this.curves.length>0){const Te=ae.getPoint(0);Te.equals(this.currentPoint)||this.lineTo(Te.x,Te.y)}this.curves.push(ae);const ge=ae.getPoint(1);return this.currentPoint.copy(ge),this}copy(o){return super.copy(o),this.currentPoint.copy(o.currentPoint),this}toJSON(){const o=super.toJSON();return o.currentPoint=this.currentPoint.toArray(),o}fromJSON(o){return super.fromJSON(o),this.currentPoint.fromArray(o.currentPoint),this}}class Jb extends So{constructor(o=1,c=8,h=0,f=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:o,segments:c,thetaStart:h,thetaLength:f},c=Math.max(3,c);const b=[],S=[],B=[],ne=[],ae=new Ut,ge=new Di;S.push(0,0,0),B.push(0,0,1),ne.push(.5,.5);for(let Te=0,Se=3;Te<=c;Te++,Se+=3){const Pe=h+Te/c*f;ae.x=o*Math.cos(Pe),ae.y=o*Math.sin(Pe),S.push(ae.x,ae.y,ae.z),B.push(0,0,1),ge.x=(S[Se]/o+1)/2,ge.y=(S[Se+1]/o+1)/2,ne.push(ge.x,ge.y)}for(let Te=1;Te<=c;Te++)b.push(Te,Te+1,0);this.setIndex(b),this.setAttribute("position",new Ss(S,3)),this.setAttribute("normal",new Ss(B,3)),this.setAttribute("uv",new Ss(ne,2))}static fromJSON(o){return new Jb(o.radius,o.segments,o.thetaStart,o.thetaLength)}}class vu extends So{constructor(o=1,c=1,h=1,f=8,b=1,S=!1,B=0,ne=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:o,radiusBottom:c,height:h,radialSegments:f,heightSegments:b,openEnded:S,thetaStart:B,thetaLength:ne};const ae=this;f=Math.floor(f),b=Math.floor(b);const ge=[],Te=[],Se=[],Pe=[];let qe=0;const Ne=[],Fe=h/2;let at=0;function ut(ht){const Rt=qe,Xt=new Di,xn=new Ut;let bt=0;const en=!0===ht?o:c,bn=!0===ht?1:-1;for(let Pi=1;Pi<=f;Pi++)Te.push(0,Fe*bn,0),Se.push(0,bn,0),Pe.push(.5,.5),qe++;const ui=qe;for(let Pi=0;Pi<=f;Pi++){const Vn=Pi/f*ne+B,Mi=Math.cos(Vn),Oi=Math.sin(Vn);xn.x=en*Oi,xn.y=Fe*bn,xn.z=en*Mi,Te.push(xn.x,xn.y,xn.z),Se.push(0,bn,0),Xt.x=.5*Mi+.5,Xt.y=.5*Oi*bn+.5,Pe.push(Xt.x,Xt.y),qe++}for(let Pi=0;Pi<f;Pi++){const hi=Rt+Pi,Vn=ui+Pi;!0===ht?ge.push(Vn,Vn+1,hi):ge.push(Vn+1,Vn,hi),bt+=3}ae.addGroup(at,bt,!0===ht?1:2),at+=bt}(function _t(){const ht=new Ut,Rt=new Ut;let Xt=0;const xn=(c-o)/h;for(let bt=0;bt<=b;bt++){const en=[],bn=bt/b,ui=bn*(c-o)+o;for(let Pi=0;Pi<=f;Pi++){const hi=Pi/f,Vn=hi*ne+B,Mi=Math.sin(Vn),Oi=Math.cos(Vn);Rt.x=ui*Mi,Rt.y=-bn*h+Fe,Rt.z=ui*Oi,Te.push(Rt.x,Rt.y,Rt.z),ht.set(Mi,xn,Oi).normalize(),Se.push(ht.x,ht.y,ht.z),Pe.push(hi,1-bn),en.push(qe++)}Ne.push(en)}for(let bt=0;bt<f;bt++)for(let en=0;en<b;en++){const ui=Ne[en+1][bt],Pi=Ne[en+1][bt+1],hi=Ne[en][bt+1];ge.push(Ne[en][bt],ui,hi),ge.push(ui,Pi,hi),Xt+=6}ae.addGroup(at,Xt,0),at+=Xt})(),!1===S&&(o>0&&ut(!0),c>0&&ut(!1)),this.setIndex(ge),this.setAttribute("position",new Ss(Te,3)),this.setAttribute("normal",new Ss(Se,3)),this.setAttribute("uv",new Ss(Pe,2))}static fromJSON(o){return new vu(o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength)}}class e_ extends So{constructor(o=[],c=[],h=1,f=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:o,indices:c,radius:h,detail:f};const b=[],S=[];function ne(_t,ut,ht,Rt){const Xt=Rt+1,xn=[];for(let bt=0;bt<=Xt;bt++){xn[bt]=[];const en=_t.clone().lerp(ht,bt/Xt),bn=ut.clone().lerp(ht,bt/Xt),ui=Xt-bt;for(let Pi=0;Pi<=ui;Pi++)xn[bt][Pi]=0===Pi&&bt===Xt?en:en.clone().lerp(bn,Pi/ui)}for(let bt=0;bt<Xt;bt++)for(let en=0;en<2*(Xt-bt)-1;en++){const bn=Math.floor(en/2);en%2==0?(Se(xn[bt][bn+1]),Se(xn[bt+1][bn]),Se(xn[bt][bn])):(Se(xn[bt][bn+1]),Se(xn[bt+1][bn+1]),Se(xn[bt+1][bn]))}}function Se(_t){b.push(_t.x,_t.y,_t.z)}function Pe(_t,ut){const ht=3*_t;ut.x=o[ht+0],ut.y=o[ht+1],ut.z=o[ht+2]}function Ne(_t,ut,ht,Rt){Rt<0&&1===_t.x&&(S[ut]=_t.x-1),0===ht.x&&0===ht.z&&(S[ut]=Rt/2/Math.PI+.5)}function Fe(_t){return Math.atan2(_t.z,-_t.x)}function at(_t){return Math.atan2(-_t.y,Math.sqrt(_t.x*_t.x+_t.z*_t.z))}(function B(_t){const ut=new Ut,ht=new Ut,Rt=new Ut;for(let Xt=0;Xt<c.length;Xt+=3)Pe(c[Xt+0],ut),Pe(c[Xt+1],ht),Pe(c[Xt+2],Rt),ne(ut,ht,Rt,_t)})(f),function ae(_t){const ut=new Ut;for(let ht=0;ht<b.length;ht+=3)ut.x=b[ht+0],ut.y=b[ht+1],ut.z=b[ht+2],ut.normalize().multiplyScalar(_t),b[ht+0]=ut.x,b[ht+1]=ut.y,b[ht+2]=ut.z}(h),function ge(){const _t=new Ut;for(let ut=0;ut<b.length;ut+=3){_t.x=b[ut+0],_t.y=b[ut+1],_t.z=b[ut+2];const ht=Fe(_t)/2/Math.PI+.5,Rt=at(_t)/Math.PI+.5;S.push(ht,1-Rt)}(function qe(){const _t=new Ut,ut=new Ut,ht=new Ut,Rt=new Ut,Xt=new Di,xn=new Di,bt=new Di;for(let en=0,bn=0;en<b.length;en+=9,bn+=6){_t.set(b[en+0],b[en+1],b[en+2]),ut.set(b[en+3],b[en+4],b[en+5]),ht.set(b[en+6],b[en+7],b[en+8]),Xt.set(S[bn+0],S[bn+1]),xn.set(S[bn+2],S[bn+3]),bt.set(S[bn+4],S[bn+5]),Rt.copy(_t).add(ut).add(ht).divideScalar(3);const ui=Fe(Rt);Ne(Xt,bn+0,_t,ui),Ne(xn,bn+2,ut,ui),Ne(bt,bn+4,ht,ui)}})(),function Te(){for(let _t=0;_t<S.length;_t+=6){const ut=S[_t+0],ht=S[_t+2],Rt=S[_t+4],Xt=Math.max(ut,ht,Rt),xn=Math.min(ut,ht,Rt);Xt>.9&&xn<.1&&(ut<.2&&(S[_t+0]+=1),ht<.2&&(S[_t+2]+=1),Rt<.2&&(S[_t+4]+=1))}}()}(),this.setAttribute("position",new Ss(b,3)),this.setAttribute("normal",new Ss(b.slice(),3)),this.setAttribute("uv",new Ss(S,2)),0===f?this.computeVertexNormals():this.normalizeNormals()}static fromJSON(o){return new e_(o.vertices,o.indices,o.radius,o.details)}}class B1 extends Hu{constructor(o){super(o),this.uuid=Yu(),this.type="Shape",this.holes=[]}getPointsHoles(o){const c=[];for(let h=0,f=this.holes.length;h<f;h++)c[h]=this.holes[h].getPoints(o);return c}extractPoints(o){return{shape:this.getPoints(o),holes:this.getPointsHoles(o)}}copy(o){super.copy(o),this.holes=[];for(let c=0,h=o.holes.length;c<h;c++)this.holes.push(o.holes[c].clone());return this}toJSON(){const o=super.toJSON();o.uuid=this.uuid,o.holes=[];for(let c=0,h=this.holes.length;c<h;c++)o.holes.push(this.holes[c].toJSON());return o}fromJSON(o){super.fromJSON(o),this.uuid=o.uuid,this.holes=[];for(let c=0,h=o.holes.length;c<h;c++){const f=o.holes[c];this.holes.push((new Hu).fromJSON(f))}return this}}function cD(v,o,c,h,f){let b,S;if(f===function yD(v,o,c,h){let f=0;for(let b=o,S=c-h;b<c;b+=h)f+=(v[S]-v[b])*(v[b+1]+v[S+1]),S=b;return f}(v,o,c,h)>0)for(b=o;b<c;b+=h)S=BS(b,v[b],v[b+1],S);else for(b=c-h;b>=o;b-=h)S=BS(b,v[b],v[b+1],S);return S&&ix(S,S.next)&&(I1(S),S=S.next),S}function Rg(v,o){if(!v)return v;o||(o=v);let h,c=v;do{if(h=!1,c.steiner||!ix(c,c.next)&&0!==Cc(c.prev,c,c.next))c=c.next;else{if(I1(c),c=o=c.prev,c===c.next)break;h=!0}}while(h||c!==o);return o}function nx(v,o,c,h,f,b,S){if(!v)return;!S&&b&&function pD(v,o,c,h){let f=v;do{0===f.z&&(f.z=y2(f.x,f.y,o,c,h)),f.prevZ=f.prev,f.nextZ=f.next,f=f.next}while(f!==v);f.prevZ.nextZ=null,f.prevZ=null,function AD(v){let o,c,h,f,b,S,B,ne,ae=1;do{for(c=v,v=null,b=null,S=0;c;){for(S++,h=c,B=0,o=0;o<ae&&(B++,h=h.nextZ,h);o++);for(ne=ae;B>0||ne>0&&h;)0!==B&&(0===ne||!h||c.z<=h.z)?(f=c,c=c.nextZ,B--):(f=h,h=h.nextZ,ne--),b?b.nextZ=f:v=f,f.prevZ=b,b=f;c=h}b.nextZ=null,ae*=2}while(S>1)}(f)}(v,h,f,b);let ne,ae,B=v;for(;v.prev!==v.next;)if(ne=v.prev,ae=v.next,b?SS(v,h,f,b):CS(v))o.push(ne.i/c|0),o.push(v.i/c|0),o.push(ae.i/c|0),I1(v),v=ae.next,B=ae.next;else if((v=ae)===B){S?1===S?nx(v=uD(Rg(v),o,c),o,c,h,f,b,2):2===S&&TS(v,o,c,h,f,b):nx(Rg(v),o,c,h,f,b,1);break}}function CS(v){const o=v.prev,c=v,h=v.next;if(Cc(o,c,h)>=0)return!1;const f=o.x,b=c.x,S=h.x,B=o.y,ne=c.y,ae=h.y,ge=f<b?f<S?f:S:b<S?b:S,Te=B<ne?B<ae?B:ae:ne<ae?ne:ae,Se=f>b?f>S?f:S:b>S?b:S,Pe=B>ne?B>ae?B:ae:ne>ae?ne:ae;let qe=h.next;for(;qe!==o;){if(qe.x>=ge&&qe.x<=Se&&qe.y>=Te&&qe.y<=Pe&&t_(f,B,b,ne,S,ae,qe.x,qe.y)&&Cc(qe.prev,qe,qe.next)>=0)return!1;qe=qe.next}return!0}function SS(v,o,c,h){const f=v.prev,b=v,S=v.next;if(Cc(f,b,S)>=0)return!1;const B=f.x,ne=b.x,ae=S.x,ge=f.y,Te=b.y,Se=S.y,Pe=B<ne?B<ae?B:ae:ne<ae?ne:ae,qe=ge<Te?ge<Se?ge:Se:Te<Se?Te:Se,Ne=B>ne?B>ae?B:ae:ne>ae?ne:ae,Fe=ge>Te?ge>Se?ge:Se:Te>Se?Te:Se,at=y2(Pe,qe,o,c,h),_t=y2(Ne,Fe,o,c,h);let ut=v.prevZ,ht=v.nextZ;for(;ut&&ut.z>=at&&ht&&ht.z<=_t;){if(ut.x>=Pe&&ut.x<=Ne&&ut.y>=qe&&ut.y<=Fe&&ut!==f&&ut!==S&&t_(B,ge,ne,Te,ae,Se,ut.x,ut.y)&&Cc(ut.prev,ut,ut.next)>=0||(ut=ut.prevZ,ht.x>=Pe&&ht.x<=Ne&&ht.y>=qe&&ht.y<=Fe&&ht!==f&&ht!==S&&t_(B,ge,ne,Te,ae,Se,ht.x,ht.y)&&Cc(ht.prev,ht,ht.next)>=0))return!1;ht=ht.nextZ}for(;ut&&ut.z>=at;){if(ut.x>=Pe&&ut.x<=Ne&&ut.y>=qe&&ut.y<=Fe&&ut!==f&&ut!==S&&t_(B,ge,ne,Te,ae,Se,ut.x,ut.y)&&Cc(ut.prev,ut,ut.next)>=0)return!1;ut=ut.prevZ}for(;ht&&ht.z<=_t;){if(ht.x>=Pe&&ht.x<=Ne&&ht.y>=qe&&ht.y<=Fe&&ht!==f&&ht!==S&&t_(B,ge,ne,Te,ae,Se,ht.x,ht.y)&&Cc(ht.prev,ht,ht.next)>=0)return!1;ht=ht.nextZ}return!0}function uD(v,o,c){let h=v;do{const f=h.prev,b=h.next.next;!ix(f,b)&&ta(f,h,h.next,b)&&lv(f,b)&&lv(b,f)&&(o.push(f.i/c|0),o.push(h.i/c|0),o.push(b.i/c|0),I1(h),I1(h.next),h=v=b),h=h.next}while(h!==v);return Rg(h)}function TS(v,o,c,h,f,b){let S=v;do{let B=S.next.next;for(;B!==S.prev;){if(S.i!==B.i&&gD(S,B)){let ne=v2(S,B);return S=Rg(S,S.next),ne=Rg(ne,ne.next),nx(S,o,c,h,f,b,0),void nx(ne,o,c,h,f,b,0)}B=B.next}S=S.next}while(S!==v)}function dD(v,o){return v.x-o.x}function Op(v,o){const c=function fD(v,o){let f,c=o,h=-1/0;const b=v.x,S=v.y;do{if(S<=c.y&&S>=c.next.y&&c.next.y!==c.y){const Se=c.x+(S-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(Se<=b&&Se>h&&(h=Se,f=c.x<c.next.x?c:c.next,Se===b))return f}c=c.next}while(c!==o);if(!f)return null;const B=f,ne=f.x,ae=f.y;let Te,ge=1/0;c=f;do{b>=c.x&&c.x>=ne&&b!==c.x&&t_(S<ae?b:h,S,ne,ae,S<ae?h:b,S,c.x,c.y)&&(Te=Math.abs(S-c.y)/(b-c.x),lv(c,v)&&(Te<ge||Te===ge&&(c.x>f.x||c.x===f.x&&ES(f,c)))&&(f=c,ge=Te)),c=c.next}while(c!==B);return f}(v,o);if(!c)return o;const h=v2(c,v);return Rg(h,h.next),Rg(c,c.next)}function ES(v,o){return Cc(v.prev,v,o.prev)<0&&Cc(o.next,v,v.next)<0}function y2(v,o,c,h,f){return(v=1431655765&((v=858993459&((v=252645135&((v=16711935&((v=(v-c)*f|0)|v<<8))|v<<4))|v<<2))|v<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-h)*f|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function mD(v){let o=v,c=v;do{(o.x<c.x||o.x===c.x&&o.y<c.y)&&(c=o),o=o.next}while(o!==v);return c}function t_(v,o,c,h,f,b,S,B){return(f-S)*(o-B)>=(v-S)*(b-B)&&(v-S)*(h-B)>=(c-S)*(o-B)&&(c-S)*(b-B)>=(f-S)*(h-B)}function gD(v,o){return v.next.i!==o.i&&v.prev.i!==o.i&&!function DS(v,o){let c=v;do{if(c.i!==v.i&&c.next.i!==v.i&&c.i!==o.i&&c.next.i!==o.i&&ta(c,c.next,v,o))return!0;c=c.next}while(c!==v);return!1}(v,o)&&(lv(v,o)&&lv(o,v)&&function _D(v,o){let c=v,h=!1;const f=(v.x+o.x)/2,b=(v.y+o.y)/2;do{c.y>b!=c.next.y>b&&c.next.y!==c.y&&f<(c.next.x-c.x)*(b-c.y)/(c.next.y-c.y)+c.x&&(h=!h),c=c.next}while(c!==v);return h}(v,o)&&(Cc(v.prev,v,o.prev)||Cc(v,o.prev,o))||ix(v,o)&&Cc(v.prev,v,v.next)>0&&Cc(o.prev,o,o.next)>0)}function Cc(v,o,c){return(o.y-v.y)*(c.x-o.x)-(o.x-v.x)*(c.y-o.y)}function ix(v,o){return v.x===o.x&&v.y===o.y}function ta(v,o,c,h){const f=av(Cc(v,o,c)),b=av(Cc(v,o,h)),S=av(Cc(c,h,v)),B=av(Cc(c,h,o));return!!(f!==b&&S!==B||0===f&&Qn(v,c,o)||0===b&&Qn(v,h,o)||0===S&&Qn(c,v,h)||0===B&&Qn(c,o,h))}function Qn(v,o,c){return o.x<=Math.max(v.x,c.x)&&o.x>=Math.min(v.x,c.x)&&o.y<=Math.max(v.y,c.y)&&o.y>=Math.min(v.y,c.y)}function av(v){return v>0?1:v<0?-1:0}function lv(v,o){return Cc(v.prev,v,v.next)<0?Cc(v,o,v.next)>=0&&Cc(v,v.prev,o)>=0:Cc(v,o,v.prev)<0||Cc(v,v.next,o)<0}function v2(v,o){const c=new b2(v.i,v.x,v.y),h=new b2(o.i,o.x,o.y),f=v.next,b=o.prev;return v.next=o,o.prev=v,c.next=f,f.prev=c,h.next=c,c.prev=h,b.next=h,h.prev=b,h}function BS(v,o,c,h){const f=new b2(v,o,c);return h?(f.next=h.next,f.prev=h,h.next.prev=f,h.next=f):(f.prev=f,f.next=f),f}function I1(v){v.next.prev=v.prev,v.prev.next=v.next,v.prevZ&&(v.prevZ.nextZ=v.nextZ),v.nextZ&&(v.nextZ.prevZ=v.prevZ)}function b2(v,o,c){this.i=v,this.x=o,this.y=c,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class bm{static area(o){const c=o.length;let h=0;for(let f=c-1,b=0;b<c;f=b++)h+=o[f].x*o[b].y-o[b].x*o[f].y;return.5*h}static isClockWise(o){return bm.area(o)<0}static triangulateShape(o,c){const h=[],f=[],b=[];x2(o),w2(h,o);let S=o.length;c.forEach(x2);for(let ne=0;ne<c.length;ne++)f.push(S),S+=c[ne].length,w2(h,c[ne]);const B=function(v,o,c=2){const h=o&&o.length,f=h?o[0]*c:v.length;let b=cD(v,0,f,c,!0);const S=[];if(!b||b.next===b.prev)return S;let B,ne,ae,ge,Te,Se,Pe;if(h&&(b=function hD(v,o,c,h){const f=[];let b,S,B,ne,ae;for(b=0,S=o.length;b<S;b++)B=o[b]*h,ne=b<S-1?o[b+1]*h:v.length,ae=cD(v,B,ne,h,!1),ae===ae.next&&(ae.steiner=!0),f.push(mD(ae));for(f.sort(dD),b=0;b<f.length;b++)c=Op(f[b],c);return c}(v,o,b,c)),v.length>80*c){B=ae=v[0],ne=ge=v[1];for(let qe=c;qe<f;qe+=c)Te=v[qe],Se=v[qe+1],Te<B&&(B=Te),Se<ne&&(ne=Se),Te>ae&&(ae=Te),Se>ge&&(ge=Se);Pe=Math.max(ae-B,ge-ne),Pe=0!==Pe?32767/Pe:0}return nx(b,S,c,B,ne,Pe,0),S}(h,f);for(let ne=0;ne<B.length;ne+=3)b.push(B.slice(ne,ne+3));return b}}function x2(v){const o=v.length;o>2&&v[o-1].equals(v[0])&&v.pop()}function w2(v,o){for(let c=0;c<o.length;c++)v.push(o[c].x),v.push(o[c].y)}class $c extends So{constructor(o=new B1([new Di(.5,.5),new Di(-.5,.5),new Di(-.5,-.5),new Di(.5,-.5)]),c={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:o,options:c},o=Array.isArray(o)?o:[o];const h=this,f=[],b=[];for(let B=0,ne=o.length;B<ne;B++)S(o[B]);function S(B){const ne=[],ae=void 0!==c.curveSegments?c.curveSegments:12,ge=void 0!==c.steps?c.steps:1,Te=void 0!==c.depth?c.depth:1;let Se=void 0===c.bevelEnabled||c.bevelEnabled,Pe=void 0!==c.bevelThickness?c.bevelThickness:.2,qe=void 0!==c.bevelSize?c.bevelSize:Pe-.1,Ne=void 0!==c.bevelOffset?c.bevelOffset:0,Fe=void 0!==c.bevelSegments?c.bevelSegments:3;const at=c.extrudePath,_t=void 0!==c.UVGenerator?c.UVGenerator:vD;let ut,Rt,Xt,xn,bt,ht=!1;at&&(ut=at.getSpacedPoints(ge),ht=!0,Se=!1,Rt=at.computeFrenetFrames(ge,!1),Xt=new Ut,xn=new Ut,bt=new Ut),Se||(Fe=0,Pe=0,qe=0,Ne=0);const en=B.extractPoints(ae);let bn=en.shape;const ui=en.holes;if(!bm.isClockWise(bn)){bn=bn.reverse();for(let di=0,ri=ui.length;di<ri;di++){const bi=ui[di];bm.isClockWise(bi)&&(ui[di]=bi.reverse())}}const hi=bm.triangulateShape(bn,ui),Vn=bn;for(let di=0,ri=ui.length;di<ri;di++)bn=bn.concat(ui[di]);function Mi(di,ri,bi){return ri||console.error("THREE.ExtrudeGeometry: vec does not exist"),ri.clone().multiplyScalar(bi).add(di)}const Oi=bn.length,Xi=hi.length;function Ai(di,ri,bi){let or,ji,ps;const ms=di.x-ri.x,vr=di.y-ri.y,Ys=bi.x-di.x,Ro=bi.y-di.y,Yt=ms*ms+vr*vr;if(Math.abs(ms*Ro-vr*Ys)>Number.EPSILON){const Kn=Math.sqrt(Yt),Hi=Math.sqrt(Ys*Ys+Ro*Ro),rr=ri.x-vr/Kn,Lr=ri.y+ms/Kn,Xn=((bi.x-Ro/Hi-rr)*Ro-(bi.y+Ys/Hi-Lr)*Ys)/(ms*Ro-vr*Ys);or=rr+ms*Xn-di.x,ji=Lr+vr*Xn-di.y;const rs=or*or+ji*ji;if(rs<=2)return new Di(or,ji);ps=Math.sqrt(rs/2)}else{let Kn=!1;ms>Number.EPSILON?Ys>Number.EPSILON&&(Kn=!0):ms<-Number.EPSILON?Ys<-Number.EPSILON&&(Kn=!0):Math.sign(vr)===Math.sign(Ro)&&(Kn=!0),Kn?(or=-vr,ji=ms,ps=Math.sqrt(Yt)):(or=ms,ji=vr,ps=Math.sqrt(Yt/2))}return new Di(or/ps,ji/ps)}const Hn=[];for(let di=0,ri=Vn.length,bi=ri-1,or=di+1;di<ri;di++,bi++,or++)bi===ri&&(bi=0),or===ri&&(or=0),Hn[di]=Ai(Vn[di],Vn[bi],Vn[or]);const Zn=[];let _r,ur=Hn.concat();for(let di=0,ri=ui.length;di<ri;di++){const bi=ui[di];_r=[];for(let or=0,ji=bi.length,ps=ji-1,ms=or+1;or<ji;or++,ps++,ms++)ps===ji&&(ps=0),ms===ji&&(ms=0),_r[or]=Ai(bi[or],bi[ps],bi[ms]);Zn.push(_r),ur=ur.concat(_r)}for(let di=0;di<Fe;di++){const ri=di/Fe,bi=Pe*Math.cos(ri*Math.PI/2),or=qe*Math.sin(ri*Math.PI/2)+Ne;for(let ji=0,ps=Vn.length;ji<ps;ji++){const ms=Mi(Vn[ji],Hn[ji],or);no(ms.x,ms.y,-bi)}for(let ji=0,ps=ui.length;ji<ps;ji++){const ms=ui[ji];_r=Zn[ji];for(let vr=0,Ys=ms.length;vr<Ys;vr++){const Ro=Mi(ms[vr],_r[vr],or);no(Ro.x,Ro.y,-bi)}}}const ai=qe+Ne;for(let di=0;di<Oi;di++){const ri=Se?Mi(bn[di],ur[di],ai):bn[di];ht?(xn.copy(Rt.normals[0]).multiplyScalar(ri.x),Xt.copy(Rt.binormals[0]).multiplyScalar(ri.y),bt.copy(ut[0]).add(xn).add(Xt),no(bt.x,bt.y,bt.z)):no(ri.x,ri.y,0)}for(let di=1;di<=ge;di++)for(let ri=0;ri<Oi;ri++){const bi=Se?Mi(bn[ri],ur[ri],ai):bn[ri];ht?(xn.copy(Rt.normals[di]).multiplyScalar(bi.x),Xt.copy(Rt.binormals[di]).multiplyScalar(bi.y),bt.copy(ut[di]).add(xn).add(Xt),no(bt.x,bt.y,bt.z)):no(bi.x,bi.y,Te/ge*di)}for(let di=Fe-1;di>=0;di--){const ri=di/Fe,bi=Pe*Math.cos(ri*Math.PI/2),or=qe*Math.sin(ri*Math.PI/2)+Ne;for(let ji=0,ps=Vn.length;ji<ps;ji++){const ms=Mi(Vn[ji],Hn[ji],or);no(ms.x,ms.y,Te+bi)}for(let ji=0,ps=ui.length;ji<ps;ji++){const ms=ui[ji];_r=Zn[ji];for(let vr=0,Ys=ms.length;vr<Ys;vr++){const Ro=Mi(ms[vr],_r[vr],or);ht?no(Ro.x,Ro.y+ut[ge-1].y,ut[ge-1].x+bi):no(Ro.x,Ro.y,Te+bi)}}}function Jn(di,ri){let bi=di.length;for(;--bi>=0;){const or=bi;let ji=bi-1;ji<0&&(ji=di.length-1);for(let ps=0,ms=ge+2*Fe;ps<ms;ps++){const vr=Oi*ps,Ys=Oi*(ps+1);Mr(ri+or+vr,ri+ji+vr,ri+ji+Ys,ri+or+Ys)}}}function no(di,ri,bi){ne.push(di),ne.push(ri),ne.push(bi)}function Li(di,ri,bi){vi(di),vi(ri),vi(bi);const or=f.length/3,ji=_t.generateTopUV(h,f,or-3,or-2,or-1);Ji(ji[0]),Ji(ji[1]),Ji(ji[2])}function Mr(di,ri,bi,or){vi(di),vi(ri),vi(or),vi(ri),vi(bi),vi(or);const ji=f.length/3,ps=_t.generateSideWallUV(h,f,ji-6,ji-3,ji-2,ji-1);Ji(ps[0]),Ji(ps[1]),Ji(ps[3]),Ji(ps[1]),Ji(ps[2]),Ji(ps[3])}function vi(di){f.push(ne[3*di+0]),f.push(ne[3*di+1]),f.push(ne[3*di+2])}function Ji(di){b.push(di.x),b.push(di.y)}(function As(){const di=f.length/3;if(Se){let ri=0,bi=Oi*ri;for(let or=0;or<Xi;or++){const ji=hi[or];Li(ji[2]+bi,ji[1]+bi,ji[0]+bi)}ri=ge+2*Fe,bi=Oi*ri;for(let or=0;or<Xi;or++){const ji=hi[or];Li(ji[0]+bi,ji[1]+bi,ji[2]+bi)}}else{for(let ri=0;ri<Xi;ri++){const bi=hi[ri];Li(bi[2],bi[1],bi[0])}for(let ri=0;ri<Xi;ri++){const bi=hi[ri];Li(bi[0]+Oi*ge,bi[1]+Oi*ge,bi[2]+Oi*ge)}}h.addGroup(di,f.length/3-di,0)})(),function co(){const di=f.length/3;let ri=0;Jn(Vn,ri),ri+=Vn.length;for(let bi=0,or=ui.length;bi<or;bi++){const ji=ui[bi];Jn(ji,ri),ri+=ji.length}h.addGroup(di,f.length/3-di,1)}()}this.setAttribute("position",new Ss(f,3)),this.setAttribute("uv",new Ss(b,2)),this.computeVertexNormals()}toJSON(){const o=super.toJSON();return function M2(v,o,c){if(c.shapes=[],Array.isArray(v))for(let h=0,f=v.length;h<f;h++)c.shapes.push(v[h].uuid);else c.shapes.push(v.uuid);return c.options=Object.assign({},o),void 0!==o.extrudePath&&(c.options.extrudePath=o.extrudePath.toJSON()),c}(this.parameters.shapes,this.parameters.options,o)}static fromJSON(o,c){const h=[];for(let b=0,S=o.shapes.length;b<S;b++)h.push(c[o.shapes[b]]);const f=o.options.extrudePath;return void 0!==f&&(o.options.extrudePath=(new gl[f.type]).fromJSON(f)),new $c(h,o.options)}}const vD={generateTopUV:function(v,o,c,h,f){const B=o[3*h],ne=o[3*h+1],ae=o[3*f],ge=o[3*f+1];return[new Di(o[3*c],o[3*c+1]),new Di(B,ne),new Di(ae,ge)]},generateSideWallUV:function(v,o,c,h,f,b){const S=o[3*c],B=o[3*c+1],ne=o[3*c+2],ae=o[3*h],ge=o[3*h+1],Te=o[3*h+2],Se=o[3*f],Pe=o[3*f+1],qe=o[3*f+2],Ne=o[3*b],Fe=o[3*b+1],at=o[3*b+2];return Math.abs(B-ge)<Math.abs(S-ae)?[new Di(S,1-ne),new Di(ae,1-Te),new Di(Se,1-qe),new Di(Ne,1-at)]:[new Di(B,1-ne),new Di(ge,1-Te),new Di(Pe,1-qe),new Di(Fe,1-at)]}};class kg extends e_{constructor(o=1,c=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],o,c),this.type="OctahedronGeometry",this.parameters={radius:o,detail:c}}static fromJSON(o){return new kg(o.radius,o.detail)}}class P1 extends So{constructor(o=1,c=32,h=16,f=0,b=2*Math.PI,S=0,B=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:o,widthSegments:c,heightSegments:h,phiStart:f,phiLength:b,thetaStart:S,thetaLength:B},c=Math.max(3,Math.floor(c)),h=Math.max(2,Math.floor(h));const ne=Math.min(S+B,Math.PI);let ae=0;const ge=[],Te=new Ut,Se=new Ut,Pe=[],qe=[],Ne=[],Fe=[];for(let at=0;at<=h;at++){const _t=[],ut=at/h;let ht=0;0==at&&0==S?ht=.5/c:at==h&&ne==Math.PI&&(ht=-.5/c);for(let Rt=0;Rt<=c;Rt++){const Xt=Rt/c;Te.x=-o*Math.cos(f+Xt*b)*Math.sin(S+ut*B),Te.y=o*Math.cos(S+ut*B),Te.z=o*Math.sin(f+Xt*b)*Math.sin(S+ut*B),qe.push(Te.x,Te.y,Te.z),Se.copy(Te).normalize(),Ne.push(Se.x,Se.y,Se.z),Fe.push(Xt+ht,1-ut),_t.push(ae++)}ge.push(_t)}for(let at=0;at<h;at++)for(let _t=0;_t<c;_t++){const ht=ge[at][_t],Rt=ge[at+1][_t],Xt=ge[at+1][_t+1];(0!==at||S>0)&&Pe.push(ge[at][_t+1],ht,Xt),(at!==h-1||ne<Math.PI)&&Pe.push(ht,Rt,Xt)}this.setIndex(Pe),this.setAttribute("position",new Ss(qe,3)),this.setAttribute("normal",new Ss(Ne,3)),this.setAttribute("uv",new Ss(Fe,2))}static fromJSON(o){return new P1(o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength)}}class n_ extends So{constructor(o=1,c=.4,h=8,f=6,b=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:o,tube:c,radialSegments:h,tubularSegments:f,arc:b},h=Math.floor(h),f=Math.floor(f);const S=[],B=[],ne=[],ae=[],ge=new Ut,Te=new Ut,Se=new Ut;for(let Pe=0;Pe<=h;Pe++)for(let qe=0;qe<=f;qe++){const Ne=qe/f*b,Fe=Pe/h*Math.PI*2;Te.x=(o+c*Math.cos(Fe))*Math.cos(Ne),Te.y=(o+c*Math.cos(Fe))*Math.sin(Ne),Te.z=c*Math.sin(Fe),B.push(Te.x,Te.y,Te.z),ge.x=o*Math.cos(Ne),ge.y=o*Math.sin(Ne),Se.subVectors(Te,ge).normalize(),ne.push(Se.x,Se.y,Se.z),ae.push(qe/f),ae.push(Pe/h)}for(let Pe=1;Pe<=h;Pe++)for(let qe=1;qe<=f;qe++){const Fe=(f+1)*(Pe-1)+qe-1,at=(f+1)*(Pe-1)+qe,_t=(f+1)*Pe+qe;S.push((f+1)*Pe+qe-1,Fe,_t),S.push(Fe,at,_t)}this.setIndex(S),this.setAttribute("position",new Ss(B,3)),this.setAttribute("normal",new Ss(ne,3)),this.setAttribute("uv",new Ss(ae,2))}static fromJSON(o){return new n_(o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc)}}class FS extends So{constructor(o=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:o},null!==o){const c=[],h=new Set,f=new Ut,b=new Ut;if(null!==o.index){const S=o.attributes.position,B=o.index;let ne=o.groups;0===ne.length&&(ne=[{start:0,count:B.count,materialIndex:0}]);for(let ae=0,ge=ne.length;ae<ge;++ae){const Te=ne[ae],Se=Te.start;for(let qe=Se,Ne=Se+Te.count;qe<Ne;qe+=3)for(let Fe=0;Fe<3;Fe++){const at=B.getX(qe+Fe),_t=B.getX(qe+(Fe+1)%3);f.fromBufferAttribute(S,at),b.fromBufferAttribute(S,_t),!0===S2(f,b,h)&&(c.push(f.x,f.y,f.z),c.push(b.x,b.y,b.z))}}}else{const S=o.attributes.position;for(let B=0,ne=S.count/3;B<ne;B++)for(let ae=0;ae<3;ae++){const Te=3*B+(ae+1)%3;f.fromBufferAttribute(S,3*B+ae),b.fromBufferAttribute(S,Te),!0===S2(f,b,h)&&(c.push(f.x,f.y,f.z),c.push(b.x,b.y,b.z))}}this.setAttribute("position",new Ss(c,3))}}}function S2(v,o,c){const h=`${v.x},${v.y},${v.z}-${o.x},${o.y},${o.z}`,f=`${o.x},${o.y},${o.z}-${v.x},${v.y},${v.z}`;return!0!==c.has(h)&&!0!==c.has(f)&&(c.add(h),c.add(f),!0)}class E2 extends $h{constructor(o){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cl,this.normalScale=new Di(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(o)}copy(o){return super.copy(o),this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.flatShading=o.flatShading,this}}class RS extends $h{constructor(o){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new wr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new wr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Cl,this.normalScale=new Di(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Bt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(o)}copy(o){return super.copy(o),this.color.copy(o.color),this.map=o.map,this.lightMap=o.lightMap,this.lightMapIntensity=o.lightMapIntensity,this.aoMap=o.aoMap,this.aoMapIntensity=o.aoMapIntensity,this.emissive.copy(o.emissive),this.emissiveMap=o.emissiveMap,this.emissiveIntensity=o.emissiveIntensity,this.bumpMap=o.bumpMap,this.bumpScale=o.bumpScale,this.normalMap=o.normalMap,this.normalMapType=o.normalMapType,this.normalScale.copy(o.normalScale),this.displacementMap=o.displacementMap,this.displacementScale=o.displacementScale,this.displacementBias=o.displacementBias,this.specularMap=o.specularMap,this.alphaMap=o.alphaMap,this.envMap=o.envMap,this.combine=o.combine,this.reflectivity=o.reflectivity,this.refractionRatio=o.refractionRatio,this.wireframe=o.wireframe,this.wireframeLinewidth=o.wireframeLinewidth,this.wireframeLinecap=o.wireframeLinecap,this.wireframeLinejoin=o.wireframeLinejoin,this.flatShading=o.flatShading,this.fog=o.fog,this}}class D2 extends Ge{constructor(o){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(o)}copy(o){return super.copy(o),this.scale=o.scale,this.dashSize=o.dashSize,this.gapSize=o.gapSize,this}}const Lg={enabled:!1,files:{},add:function(v,o){!1!==this.enabled&&(this.files[v]=o)},get:function(v){if(!1!==this.enabled)return this.files[v]},remove:function(v){delete this.files[v]},clear:function(){this.files={}}};class TD{constructor(o,c,h){const f=this;let ne,b=!1,S=0,B=0;const ae=[];this.onStart=void 0,this.onLoad=o,this.onProgress=c,this.onError=h,this.itemStart=function(ge){B++,!1===b&&void 0!==f.onStart&&f.onStart(ge,S,B),b=!0},this.itemEnd=function(ge){S++,void 0!==f.onProgress&&f.onProgress(ge,S,B),S===B&&(b=!1,void 0!==f.onLoad&&f.onLoad())},this.itemError=function(ge){void 0!==f.onError&&f.onError(ge)},this.resolveURL=function(ge){return ne?ne(ge):ge},this.setURLModifier=function(ge){return ne=ge,this},this.addHandler=function(ge,Te){return ae.push(ge,Te),this},this.removeHandler=function(ge){const Te=ae.indexOf(ge);return-1!==Te&&ae.splice(Te,2),this},this.getHandler=function(ge){for(let Te=0,Se=ae.length;Te<Se;Te+=2){const Pe=ae[Te],qe=ae[Te+1];if(Pe.global&&(Pe.lastIndex=0),Pe.test(ge))return qe}return null}}}const B2=new TD;class OS{constructor(o){this.manager=void 0!==o?o:B2,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(o,c){const h=this;return new Promise(function(f,b){h.load(o,f,c,b)})}parse(){}setCrossOrigin(o){return this.crossOrigin=o,this}setWithCredentials(o){return this.withCredentials=o,this}setPath(o){return this.path=o,this}setResourcePath(o){return this.resourcePath=o,this}setRequestHeader(o){return this.requestHeader=o,this}}class Et extends Error{constructor(o,c){super(o),this.response=c}}class sx extends OS{constructor(o){super(o)}load(o,c,h,f){void 0!==this.path&&(o=this.path+o),o=this.manager.resolveURL(o);const b=this,S=Lg.get(o);if(void 0!==S)return b.manager.itemStart(o),setTimeout(function(){c&&c(S),b.manager.itemEnd(o)},0),S;const B=XA("img");function ne(){ge(),Lg.add(o,this),c&&c(this),b.manager.itemEnd(o)}function ae(Te){ge(),f&&f(Te),b.manager.itemError(o),b.manager.itemEnd(o)}function ge(){B.removeEventListener("load",ne,!1),B.removeEventListener("error",ae,!1)}return B.addEventListener("load",ne,!1),B.addEventListener("error",ae,!1),"data:"!==o.slice(0,5)&&void 0!==this.crossOrigin&&(B.crossOrigin=this.crossOrigin),b.manager.itemStart(o),B.src=o,B}}class F1 extends OS{constructor(o){super(o)}load(o,c,h,f){const b=new Ws,S=new sx(this.manager);return S.setCrossOrigin(this.crossOrigin),S.setPath(this.path),S.load(o,function(B){b.image=B,b.needsUpdate=!0,void 0!==c&&c(b)},h,f),b}}class R2 extends Va{constructor(o,c=1){super(),this.isLight=!0,this.type="Light",this.color=new wr(o),this.intensity=c}dispose(){}copy(o,c){return super.copy(o,c),this.color.copy(o.color),this.intensity=o.intensity,this}toJSON(o){const c=super.toJSON(o);return c.object.color=this.color.getHex(),c.object.intensity=this.intensity,void 0!==this.groundColor&&(c.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(c.object.distance=this.distance),void 0!==this.angle&&(c.object.angle=this.angle),void 0!==this.decay&&(c.object.decay=this.decay),void 0!==this.penumbra&&(c.object.penumbra=this.penumbra),void 0!==this.shadow&&(c.object.shadow=this.shadow.toJSON()),c}}class k2 extends R2{constructor(o,c,h){super(o,h),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Va.DefaultUp),this.updateMatrix(),this.groundColor=new wr(c)}copy(o,c){return super.copy(o,c),this.groundColor.copy(o.groundColor),this}}const O2=new so,XS=new Ut,KS=new Ut;class L2{constructor(o){this.camera=o,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Di(512,512),this.map=null,this.mapPass=null,this.matrix=new so,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new wh,this._frameExtents=new Di(1,1),this._viewportCount=1,this._viewports=[new js(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(o){const c=this.camera,h=this.matrix;XS.setFromMatrixPosition(o.matrixWorld),c.position.copy(XS),KS.setFromMatrixPosition(o.target.matrixWorld),c.lookAt(KS),c.updateMatrixWorld(),O2.multiplyMatrices(c.projectionMatrix,c.matrixWorldInverse),this._frustum.setFromProjectionMatrix(O2),h.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),h.multiply(O2)}getViewport(o){return this._viewports[o]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(o){return this.camera=o.camera.clone(),this.bias=o.bias,this.radius=o.radius,this.mapSize.copy(o.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const o={};return 0!==this.bias&&(o.bias=this.bias),0!==this.normalBias&&(o.normalBias=this.normalBias),1!==this.radius&&(o.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(o.mapSize=this.mapSize.toArray()),o.camera=this.camera.toJSON(!1).object,delete o.camera.matrix,o}}const fv=new so,zg=new Ut,N1=new Ut;class wk extends L2{constructor(){super(new dc(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Di(4,2),this._viewportCount=6,this._viewports=[new js(2,1,1,1),new js(0,1,1,1),new js(3,1,1,1),new js(1,1,1,1),new js(3,0,1,1),new js(1,0,1,1)],this._cubeDirections=[new Ut(1,0,0),new Ut(-1,0,0),new Ut(0,0,1),new Ut(0,0,-1),new Ut(0,1,0),new Ut(0,-1,0)],this._cubeUps=[new Ut(0,1,0),new Ut(0,1,0),new Ut(0,1,0),new Ut(0,1,0),new Ut(0,0,1),new Ut(0,0,-1)]}updateMatrices(o,c=0){const h=this.camera,f=this.matrix,b=o.distance||h.far;b!==h.far&&(h.far=b,h.updateProjectionMatrix()),zg.setFromMatrixPosition(o.matrixWorld),h.position.copy(zg),N1.copy(h.position),N1.add(this._cubeDirections[c]),h.up.copy(this._cubeUps[c]),h.lookAt(N1),h.updateMatrixWorld(),f.makeTranslation(-zg.x,-zg.y,-zg.z),fv.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),this._frustum.setFromProjectionMatrix(fv)}}class px extends R2{constructor(o,c,h=0,f=1){super(o,c),this.isPointLight=!0,this.type="PointLight",this.distance=h,this.decay=f,this.shadow=new wk}get power(){return 4*this.intensity*Math.PI}set power(o){this.intensity=o/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(o,c){return super.copy(o,c),this.distance=o.distance,this.decay=o.decay,this.shadow=o.shadow.clone(),this}}class N2 extends R2{constructor(o,c){super(o,c),this.isAmbientLight=!0,this.type="AmbientLight"}}function kh(v,o,c){return pv(v)?new v.constructor(v.subarray(o,void 0!==c?c:v.length)):v.slice(o,c)}function l_(v,o,c){return!v||!c&&v.constructor===o?v:"number"==typeof o.BYTES_PER_ELEMENT?new o(v):Array.prototype.slice.call(v)}function pv(v){return ArrayBuffer.isView(v)&&!(v instanceof DataView)}class mv{constructor(o,c,h,f){this.parameterPositions=o,this._cachedIndex=0,this.resultBuffer=void 0!==f?f:new c.constructor(h),this.sampleValues=c,this.valueSize=h,this.settings=null,this.DefaultSettings_={}}evaluate(o){const c=this.parameterPositions;let h=this._cachedIndex,f=c[h],b=c[h-1];e:{t:{let S;n:{i:if(!(o<f)){for(let B=h+2;;){if(void 0===f){if(o<b)break i;return h=c.length,this._cachedIndex=h,this.copySampleValue_(h-1)}if(h===B)break;if(b=f,f=c[++h],o<f)break t}S=c.length;break n}if(o>=b)break e;{const B=c[1];o<B&&(h=2,b=B);for(let ne=h-2;;){if(void 0===b)return this._cachedIndex=0,this.copySampleValue_(0);if(h===ne)break;if(f=b,b=c[--h-1],o>=b)break t}S=h,h=0}}for(;h<S;){const B=h+S>>>1;o<c[B]?S=B:h=B+1}if(f=c[h],b=c[h-1],void 0===b)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===f)return h=c.length,this._cachedIndex=h,this.copySampleValue_(h-1)}this._cachedIndex=h,this.intervalChanged_(h,b,f)}return this.interpolate_(h,b,o,f)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(o){const c=this.resultBuffer,h=this.sampleValues,f=this.valueSize,b=o*f;for(let S=0;S!==f;++S)c[S]=h[b+S];return c}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class RD extends mv{constructor(o,c,h,f){super(o,c,h,f),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(o,c,h){const f=this.parameterPositions;let b=o-2,S=o+1,B=f[b],ne=f[S];if(void 0===B)switch(this.getSettings_().endingStart){case 2401:b=o,B=2*c-h;break;case 2402:b=f.length-2,B=c+f[b]-f[b+1];break;default:b=o,B=h}if(void 0===ne)switch(this.getSettings_().endingEnd){case 2401:S=o,ne=2*h-c;break;case 2402:S=1,ne=h+f[1]-f[0];break;default:S=o-1,ne=c}const ae=.5*(h-c),ge=this.valueSize;this._weightPrev=ae/(c-B),this._weightNext=ae/(ne-h),this._offsetPrev=b*ge,this._offsetNext=S*ge}interpolate_(o,c,h,f){const b=this.resultBuffer,S=this.sampleValues,B=this.valueSize,ne=o*B,ae=ne-B,ge=this._offsetPrev,Te=this._offsetNext,Se=this._weightPrev,Pe=this._weightNext,qe=(h-c)/(f-c),Ne=qe*qe,Fe=Ne*qe,at=-Se*Fe+2*Se*Ne-Se*qe,_t=(1+Se)*Fe+(-1.5-2*Se)*Ne+(-.5+Se)*qe+1,ut=(-1-Pe)*Fe+(1.5+Pe)*Ne+.5*qe,ht=Pe*Fe-Pe*Ne;for(let Rt=0;Rt!==B;++Rt)b[Rt]=at*S[ge+Rt]+_t*S[ae+Rt]+ut*S[ne+Rt]+ht*S[Te+Rt];return b}}class kD extends mv{constructor(o,c,h,f){super(o,c,h,f)}interpolate_(o,c,h,f){const b=this.resultBuffer,S=this.sampleValues,B=this.valueSize,ne=o*B,ae=ne-B,ge=(h-c)/(f-c),Te=1-ge;for(let Se=0;Se!==B;++Se)b[Se]=S[ae+Se]*Te+S[ne+Se]*ge;return b}}class gv extends mv{constructor(o,c,h,f){super(o,c,h,f)}interpolate_(o){return this.copySampleValue_(o-1)}}class BA{constructor(o,c,h,f){if(void 0===o)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===c||0===c.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+o);this.name=o,this.times=l_(c,this.TimeBufferType),this.values=l_(h,this.ValueBufferType),this.setInterpolation(f||this.DefaultInterpolation)}static toJSON(o){const c=o.constructor;let h;if(c.toJSON!==this.toJSON)h=c.toJSON(o);else{h={name:o.name,times:l_(o.times,Array),values:l_(o.values,Array)};const f=o.getInterpolation();f!==o.DefaultInterpolation&&(h.interpolation=f)}return h.type=o.ValueTypeName,h}InterpolantFactoryMethodDiscrete(o){return new gv(this.times,this.values,this.getValueSize(),o)}InterpolantFactoryMethodLinear(o){return new kD(this.times,this.values,this.getValueSize(),o)}InterpolantFactoryMethodSmooth(o){return new RD(this.times,this.values,this.getValueSize(),o)}setInterpolation(o){let c;switch(o){case 2300:c=this.InterpolantFactoryMethodDiscrete;break;case 2301:c=this.InterpolantFactoryMethodLinear;break;case 2302:c=this.InterpolantFactoryMethodSmooth}if(void 0===c){const h="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(o===this.DefaultInterpolation)throw new Error(h);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",h),this}return this.createInterpolant=c,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(o){if(0!==o){const c=this.times;for(let h=0,f=c.length;h!==f;++h)c[h]+=o}return this}scale(o){if(1!==o){const c=this.times;for(let h=0,f=c.length;h!==f;++h)c[h]*=o}return this}trim(o,c){const h=this.times,f=h.length;let b=0,S=f-1;for(;b!==f&&h[b]<o;)++b;for(;-1!==S&&h[S]>c;)--S;if(++S,0!==b||S!==f){b>=S&&(S=Math.max(S,1),b=S-1);const B=this.getValueSize();this.times=kh(h,b,S),this.values=kh(this.values,b*B,S*B)}return this}validate(){let o=!0;const c=this.getValueSize();c-Math.floor(c)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),o=!1);const h=this.times,f=this.values,b=h.length;0===b&&(console.error("THREE.KeyframeTrack: Track is empty.",this),o=!1);let S=null;for(let B=0;B!==b;B++){const ne=h[B];if("number"==typeof ne&&isNaN(ne)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,B,ne),o=!1;break}if(null!==S&&S>ne){console.error("THREE.KeyframeTrack: Out of order keys.",this,B,ne,S),o=!1;break}S=ne}if(void 0!==f&&pv(f))for(let B=0,ne=f.length;B!==ne;++B){const ae=f[B];if(isNaN(ae)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,B,ae),o=!1;break}}return o}optimize(){const o=kh(this.times),c=kh(this.values),h=this.getValueSize(),f=2302===this.getInterpolation(),b=o.length-1;let S=1;for(let B=1;B<b;++B){let ne=!1;const ae=o[B];if(ae!==o[B+1]&&(1!==B||ae!==o[0]))if(f)ne=!0;else{const Te=B*h,Se=Te-h,Pe=Te+h;for(let qe=0;qe!==h;++qe){const Ne=c[Te+qe];if(Ne!==c[Se+qe]||Ne!==c[Pe+qe]){ne=!0;break}}}if(ne){if(B!==S){o[S]=o[B];const Te=B*h,Se=S*h;for(let Pe=0;Pe!==h;++Pe)c[Se+Pe]=c[Te+Pe]}++S}}if(b>0){o[S]=o[b];for(let B=b*h,ne=S*h,ae=0;ae!==h;++ae)c[ne+ae]=c[B+ae];++S}return S!==o.length?(this.times=kh(o,0,S),this.values=kh(c,0,S*h)):(this.times=o,this.values=c),this}clone(){const o=kh(this.times,0),c=kh(this.values,0),f=new(0,this.constructor)(this.name,o,c);return f.createInterpolant=this.createInterpolant,f}}BA.prototype.TimeBufferType=Float32Array,BA.prototype.ValueBufferType=Float32Array,BA.prototype.DefaultInterpolation=2301;class _v extends BA{}_v.prototype.ValueTypeName="bool",_v.prototype.ValueBufferType=Array,_v.prototype.DefaultInterpolation=2300,_v.prototype.InterpolantFactoryMethodLinear=void 0,_v.prototype.InterpolantFactoryMethodSmooth=void 0;(class tT extends BA{}).prototype.ValueTypeName="color";(class Ax extends BA{}).prototype.ValueTypeName="number";class OD extends mv{constructor(o,c,h,f){super(o,c,h,f)}interpolate_(o,c,h,f){const b=this.resultBuffer,S=this.sampleValues,B=this.valueSize,ne=(h-c)/(f-c);let ae=o*B;for(let ge=ae+B;ae!==ge;ae+=4)Ha.slerpFlat(b,0,S,ae-B,S,ae,ne);return b}}class yv extends BA{InterpolantFactoryMethodLinear(o){return new OD(this.times,this.values,this.getValueSize(),o)}}yv.prototype.ValueTypeName="quaternion",yv.prototype.DefaultInterpolation=2301,yv.prototype.InterpolantFactoryMethodSmooth=void 0;class U1 extends BA{}U1.prototype.ValueTypeName="string",U1.prototype.ValueBufferType=Array,U1.prototype.DefaultInterpolation=2300,U1.prototype.InterpolantFactoryMethodLinear=void 0,U1.prototype.InterpolantFactoryMethodSmooth=void 0;(class mx extends BA{}).prototype.ValueTypeName="vector";class z1{constructor(o,c,h=0,f=1/0){this.ray=new qc(o,c),this.near=h,this.far=f,this.camera=null,this.layers=new gp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(o,c){this.ray.set(o,c)}setFromCamera(o,c){c.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(c.matrixWorld),this.ray.direction.set(o.x,o.y,.5).unproject(c).sub(this.ray.origin).normalize(),this.camera=c):c.isOrthographicCamera?(this.ray.origin.set(o.x,o.y,(c.near+c.far)/(c.near-c.far)).unproject(c),this.ray.direction.set(0,0,-1).transformDirection(c.matrixWorld),this.camera=c):console.error("THREE.Raycaster: Unsupported camera type: "+c.type)}intersectObject(o,c=!0,h=[]){return wm(o,this,h,c),h.sort(lh),h}intersectObjects(o,c=!0,h=[]){for(let f=0,b=o.length;f<b;f++)wm(o[f],this,h,c);return h.sort(lh),h}}function lh(v,o){return v.distance-o.distance}function wm(v,o,c,h){if(v.layers.test(o.layers)&&v.raycast(o,c),!0===h){const f=v.children;for(let b=0,S=f.length;b<S;b++)wm(f[b],o,c,!0)}}class yx{constructor(o=!0){this.autoStart=o,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=gf(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let o=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const c=gf();o=(c-this.oldTime)/1e3,this.oldTime=c,this.elapsedTime+=o}return o}}function gf(){return(typeof performance>"u"?Date:performance).now()}class ja{constructor(o=1,c=0,h=0){return this.radius=o,this.phi=c,this.theta=h,this}set(o,c,h){return this.radius=o,this.phi=c,this.theta=h,this}copy(o){return this.radius=o.radius,this.phi=o.phi,this.theta=o.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(o){return this.setFromCartesianCoords(o.x,o.y,o.z)}setFromCartesianCoords(o,c,h){return this.radius=Math.sqrt(o*o+c*c+h*h),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(o,h),this.phi=Math.acos(Vl(c/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}const u_=new Di;class h_{constructor(o=new Di(1/0,1/0),c=new Di(-1/0,-1/0)){this.isBox2=!0,this.min=o,this.max=c}set(o,c){return this.min.copy(o),this.max.copy(c),this}setFromPoints(o){this.makeEmpty();for(let c=0,h=o.length;c<h;c++)this.expandByPoint(o[c]);return this}setFromCenterAndSize(o,c){const h=u_.copy(c).multiplyScalar(.5);return this.min.copy(o).sub(h),this.max.copy(o).add(h),this}clone(){return(new this.constructor).copy(this)}copy(o){return this.min.copy(o.min),this.max.copy(o.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(o){return this.isEmpty()?o.set(0,0):o.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(o){return this.isEmpty()?o.set(0,0):o.subVectors(this.max,this.min)}expandByPoint(o){return this.min.min(o),this.max.max(o),this}expandByVector(o){return this.min.sub(o),this.max.add(o),this}expandByScalar(o){return this.min.addScalar(-o),this.max.addScalar(o),this}containsPoint(o){return!(o.x<this.min.x||o.x>this.max.x||o.y<this.min.y||o.y>this.max.y)}containsBox(o){return this.min.x<=o.min.x&&o.max.x<=this.max.x&&this.min.y<=o.min.y&&o.max.y<=this.max.y}getParameter(o,c){return c.set((o.x-this.min.x)/(this.max.x-this.min.x),(o.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(o){return!(o.max.x<this.min.x||o.min.x>this.max.x||o.max.y<this.min.y||o.min.y>this.max.y)}clampPoint(o,c){return c.copy(o).clamp(this.min,this.max)}distanceToPoint(o){return u_.copy(o).clamp(this.min,this.max).sub(o).length()}intersect(o){return this.min.max(o.min),this.max.min(o.max),this}union(o){return this.min.min(o.min),this.max.max(o.max),this}translate(o){return this.min.add(o),this.max.add(o),this}equals(o){return o.min.equals(this.min)&&o.max.equals(this.max)}}const d_=new Ut,Mm=new Ut;class H1{constructor(o=new Ut,c=new Ut){this.start=o,this.end=c}set(o,c){return this.start.copy(o),this.end.copy(c),this}copy(o){return this.start.copy(o.start),this.end.copy(o.end),this}getCenter(o){return o.addVectors(this.start,this.end).multiplyScalar(.5)}delta(o){return o.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(o,c){return this.delta(c).multiplyScalar(o).add(this.start)}closestPointToPointParameter(o,c){d_.subVectors(o,this.start),Mm.subVectors(this.end,this.start);const h=Mm.dot(Mm);let b=Mm.dot(d_)/h;return c&&(b=Vl(b,0,1)),b}closestPointToPoint(o,c,h){const f=this.closestPointToPointParameter(o,c);return this.delta(h).multiplyScalar(f).add(this.start)}applyMatrix4(o){return this.start.applyMatrix4(o),this.end.applyMatrix4(o),this}equals(o){return o.start.equals(this.start)&&o.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}class WD extends xi{constructor(o=10,c=10,h=4473924,f=8947848){h=new wr(h),f=new wr(f);const b=c/2,S=o/c,B=o/2,ne=[],ae=[];for(let Se=0,Pe=0,qe=-B;Se<=c;Se++,qe+=S){ne.push(-B,0,qe,B,0,qe),ne.push(qe,0,-B,qe,0,B);const Ne=Se===b?h:f;Ne.toArray(ae,Pe),Pe+=3,Ne.toArray(ae,Pe),Pe+=3,Ne.toArray(ae,Pe),Pe+=3,Ne.toArray(ae,Pe),Pe+=3}const ge=new So;ge.setAttribute("position",new Ss(ne,3)),ge.setAttribute("color",new Ss(ae,3)),super(ge,new Ge({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const kr=new du;class jD extends xi{constructor(o,c=16776960){const h=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),f=new Float32Array(24),b=new So;b.setIndex(new Bc(h,1)),b.setAttribute("position",new Bc(f,3)),super(b,new Ge({color:c,toneMapped:!1})),this.object=o,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(o){if(void 0!==o&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&kr.setFromObject(this.object),kr.isEmpty())return;const c=kr.min,h=kr.max,f=this.geometry.attributes.position,b=f.array;b[0]=h.x,b[1]=h.y,b[2]=h.z,b[3]=c.x,b[4]=h.y,b[5]=h.z,b[6]=c.x,b[7]=c.y,b[8]=h.z,b[9]=h.x,b[10]=c.y,b[11]=h.z,b[12]=h.x,b[13]=h.y,b[14]=c.z,b[15]=c.x,b[16]=h.y,b[17]=c.z,b[18]=c.x,b[19]=c.y,b[20]=c.z,b[21]=h.x,b[22]=c.y,b[23]=c.z,f.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(o){return this.object=o,this.update(),this}copy(o,c){return super.copy(o,c),this.object=o.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Q2 extends xi{constructor(o=1){const c=[0,0,0,o,0,0,0,0,0,0,o,0,0,0,0,0,0,o],f=new So;f.setAttribute("position",new Ss(c,3)),f.setAttribute("color",new Ss([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(f,new Ge({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(o,c,h){const f=new wr,b=this.geometry.attributes.color.array;return f.set(o),f.toArray(b,0),f.toArray(b,3),f.set(c),f.toArray(b,6),f.toArray(b,9),f.set(h),f.toArray(b,12),f.toArray(b,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ki{constructor(){this.type="ShapePath",this.color=new wr,this.subPaths=[],this.currentPath=null}moveTo(o,c){return this.currentPath=new Hu,this.subPaths.push(this.currentPath),this.currentPath.moveTo(o,c),this}lineTo(o,c){return this.currentPath.lineTo(o,c),this}quadraticCurveTo(o,c,h,f){return this.currentPath.quadraticCurveTo(o,c,h,f),this}bezierCurveTo(o,c,h,f,b,S){return this.currentPath.bezierCurveTo(o,c,h,f,b,S),this}splineThru(o){return this.currentPath.splineThru(o),this}toShapes(o){function h(at,_t){const ut=_t.length;let ht=!1;for(let Rt=ut-1,Xt=0;Xt<ut;Rt=Xt++){let xn=_t[Rt],bt=_t[Xt],en=bt.x-xn.x,bn=bt.y-xn.y;if(Math.abs(bn)>Number.EPSILON){if(bn<0&&(xn=_t[Xt],en=-en,bt=_t[Rt],bn=-bn),at.y<xn.y||at.y>bt.y)continue;if(at.y===xn.y){if(at.x===xn.x)return!0}else{const ui=bn*(at.x-xn.x)-en*(at.y-xn.y);if(0===ui)return!0;if(ui<0)continue;ht=!ht}}else{if(at.y!==xn.y)continue;if(bt.x<=at.x&&at.x<=xn.x||xn.x<=at.x&&at.x<=bt.x)return!0}}return ht}const f=bm.isClockWise,b=this.subPaths;if(0===b.length)return[];let S,B,ne;const ae=[];if(1===b.length)return B=b[0],ne=new B1,ne.curves=B.curves,ae.push(ne),ae;let ge=!f(b[0].getPoints());ge=o?!ge:ge;const Te=[],Se=[];let Ne,Fe,Pe=[],qe=0;Se[qe]=void 0,Pe[qe]=[];for(let at=0,_t=b.length;at<_t;at++)B=b[at],Ne=B.getPoints(),S=f(Ne),S=o?!S:S,S?(!ge&&Se[qe]&&qe++,Se[qe]={s:new B1,p:Ne},Se[qe].s.curves=B.curves,ge&&qe++,Pe[qe]=[]):Pe[qe].push({h:B,p:Ne[0]});if(!Se[0])return function c(at){const _t=[];for(let ut=0,ht=at.length;ut<ht;ut++){const Rt=at[ut],Xt=new B1;Xt.curves=Rt.curves,_t.push(Xt)}return _t}(b);if(Se.length>1){let at=!1,_t=0;for(let ut=0,ht=Se.length;ut<ht;ut++)Te[ut]=[];for(let ut=0,ht=Se.length;ut<ht;ut++){const Rt=Pe[ut];for(let Xt=0;Xt<Rt.length;Xt++){const xn=Rt[Xt];let bt=!0;for(let en=0;en<Se.length;en++)h(xn.p,Se[en].p)&&(ut!==en&&_t++,bt?(bt=!1,Te[en].push(xn)):at=!0);bt&&Te[ut].push(xn)}}_t>0&&!1===at&&(Pe=Te)}for(let at=0,_t=Se.length;at<_t;at++){ne=Se[at].s,ae.push(ne),Fe=Pe[at];for(let ut=0,ht=Fe.length;ut<ht;ut++)ne.holes.push(Fe[ut].h)}return ae}}class Or extends $c{constructor(o,c={}){const h=c.font;if(void 0===h)super();else{const f=h.generateShapes(o,c.size);c.depth=void 0!==c.height?c.height:50,void 0===c.bevelThickness&&(c.bevelThickness=10),void 0===c.bevelSize&&(c.bevelSize=8),void 0===c.bevelEnabled&&(c.bevelEnabled=!1),super(f,c)}this.type="TextGeometry"}}var cT={0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},\u03bf:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"\xa6":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},\u03a4:{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},\u03a0:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},\u0390:{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"\xb2":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"\u2013":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},\u039a:{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},\u0192:{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},\u03cc:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"\xbb":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"\xa9":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},\u03ce:{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"\xab":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"\u2219":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},\u00ff:{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},\u00b5:{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},\u0399:{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},\u038e:{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u2019":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},\u039d:{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},\u03c2:{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},\u03a8:{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},\u03b9:{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},\u0386:{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},\u03b5:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},\u0394:{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"\u2030":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"\u2014":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},\u03c1:{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"\xaf":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},\u0397:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},\u0391:{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"\u2026":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},\u03bd:{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"\xb6":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},\u03b2:{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},\u039c:{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},\u038c:{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},\u0389:{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"\u2022":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"\xa5":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},\u03b3:{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},\u03b1:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"\xad":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},\u03a7:{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"\u2020":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"\xb0":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},\u039e:{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "},"\xa0":{x_min:0,x_max:0,ha:853},\u03ab:{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"\u201d":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},\u038a:{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},\u0392:{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},\u03c5:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},\u03c7:{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},\u03af:{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},\u0396:{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"\xa8":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"\u2039":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"\u201e":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},\u03b4:{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},\u03ad:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},\u03c9:{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"\xb4":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"\xb1":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},\u03cb:{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"\xa7":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},\u03a9:{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},\u03cd:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"\u2122":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},\u03ae:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},\u0398:{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"\xae":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},\u0395:{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"\xb3":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},\u03c3:{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},\u03b6:{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},\u03b8:{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},\u039f:{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},\u0393:{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},\u0388:{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},\u038f:{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},\u03aa:{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"\xbd":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},\u03a1:{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},\u00aa:{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"\u0385":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},\u03a6:{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"\u204b":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},\u03a3:{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"\u203a":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"\xa3":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"\xac":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},\u03bb:{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},\u03c4:{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},\u03be:{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},\u039b:{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},\u03b0:{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"\xb7":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},\u03a5:{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},\u03bc:{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},\u03c6:{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"\u201c":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"\u2018":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},\u03ca:{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},\u03c0:{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},\u03ac:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"\xa4":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},\u03ba:{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"\u2021":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},\u03c8:{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},\u03b7:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},j2={yMin:-334,xMin:-111,yMax:1189,xMax:1672},X2={postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) \u039cagenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"\u039cagenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:'Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r\n\r\nPermission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r\n\r\nThe above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r\n\r\nThe Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r\n\r\nThis License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r\n\r\nThe Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r\n\r\nTHE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.',manufacturer_name:"\u039cagenta ltd",font_sub_family_name:"Regular"},Y2="Helvetiker",xx=Object.freeze({__proto__:null,glyphs:cT,cssFontWeight:"normal",ascender:1189,underlinePosition:-100,cssFontStyle:"normal",boundingBox:j2,resolution:1e3,original_font_information:X2,descender:-334,familyName:Y2,lineHeight:1522,underlineThickness:50,default:{glyphs:cT,cssFontWeight:"normal",ascender:1189,underlinePosition:-100,cssFontStyle:"normal",boundingBox:j2,resolution:1e3,original_font_information:X2,descender:-334,familyName:Y2,lineHeight:1522,underlineThickness:50}});class Vg{constructor(o){this.isFont=!0,this.type="Font",this.data=o}generateShapes(o,c=100){const h=[],f=function YD(v,o,c){const h=Array.from(v),f=o/c.resolution,b=(c.boundingBox.yMax-c.boundingBox.yMin+c.underlineThickness)*f,S=[];let B=0,ne=0;for(let ae=0;ae<h.length;ae++){const ge=h[ae];if("\n"===ge)B=0,ne-=b;else{const Te=ZD(ge,f,B,ne,c);B+=Te.offsetX,S.push(Te.path)}}return S}(o,c,this.data);for(let b=0,S=f.length;b<S;b++)h.push(...f[b].toShapes());return h}}function ZD(v,o,c,h,f){const b=f.glyphs[v]||f.glyphs["?"];if(!b)return void console.error('THREE.Font: character "'+v+'" does not exists in font family '+f.familyName+".");const S=new ki;let B,ne,ae,ge,Te,Se,Pe,qe;if(b.o){const Ne=b._cachedOutline||(b._cachedOutline=b.o.split(" "));for(let Fe=0,at=Ne.length;Fe<at;)switch(Ne[Fe++]){case"m":B=Ne[Fe++]*o+c,ne=Ne[Fe++]*o+h,S.moveTo(B,ne);break;case"l":B=Ne[Fe++]*o+c,ne=Ne[Fe++]*o+h,S.lineTo(B,ne);break;case"q":ae=Ne[Fe++]*o+c,ge=Ne[Fe++]*o+h,Te=Ne[Fe++]*o+c,Se=Ne[Fe++]*o+h,S.quadraticCurveTo(Te,Se,ae,ge);break;case"b":ae=Ne[Fe++]*o+c,ge=Ne[Fe++]*o+h,Te=Ne[Fe++]*o+c,Se=Ne[Fe++]*o+h,Pe=Ne[Fe++]*o+c,qe=Ne[Fe++]*o+h,S.bezierCurveTo(Te,Se,Pe,qe,ae,ge)}}return{offsetX:b.ha*o,path:S}}const wx={type:"change"},Cm={type:"start"},Mx={type:"end"};class JD extends Ra{constructor(o,c){super(),this.object=o,this.domElement=c,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Ut,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:L.ROTATE,MIDDLE:L.DOLLY,RIGHT:L.PAN},this.touches={ONE:ye.ROTATE,TWO:ye.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return B.phi},this.getAzimuthalAngle=function(){return B.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Cn){Cn.addEventListener("keydown",Ro),this._domElementKeyEvents=Cn},this.saveState=function(){h.target0.copy(h.target),h.position0.copy(h.object.position),h.zoom0=h.object.zoom},this.reset=function(){h.target.copy(h.target0),h.object.position.copy(h.position0),h.object.zoom=h.zoom0,h.object.updateProjectionMatrix(),h.dispatchEvent(wx),h.update(),b=f.NONE},this.resetOrthoPanZoom=function(){ge.set(0,0,0),h.object.zoom=1,h.object.updateProjectionMatrix(),Te=!0},this.update=function(){const Cn=new Ut,Xn=(new Ha).setFromUnitVectors(o.up,new Ut(0,1,0)),rs=Xn.clone().invert(),ls=new Ut,ss=new Ha,uo=2*Math.PI;return function(){const Oa=h.object.position;Cn.copy(Oa).sub(h.target),Cn.applyQuaternion(Xn),B.setFromVector3(Cn),h.autoRotate&&b===f.NONE&&en(function xn(){return 2*Math.PI/60/60*h.autoRotateSpeed}()),h.enableDamping?(B.theta+=ne.theta*h.dampingFactor,B.phi+=ne.phi*h.dampingFactor):(B.theta+=ne.theta,B.phi+=ne.phi);let fa=h.minAzimuthAngle,$a=h.maxAzimuthAngle;return isFinite(fa)&&isFinite($a)&&(fa<-Math.PI?fa+=uo:fa>Math.PI&&(fa-=uo),$a<-Math.PI?$a+=uo:$a>Math.PI&&($a-=uo),B.theta=fa<=$a?Math.max(fa,Math.min($a,B.theta)):B.theta>(fa+$a)/2?Math.max(fa,B.theta):Math.min($a,B.theta)),B.phi=Math.max(h.minPolarAngle,Math.min(h.maxPolarAngle,B.phi)),B.makeSafe(),B.radius*=ae,B.radius=Math.max(h.minDistance,Math.min(h.maxDistance,B.radius)),!0===h.enableDamping?h.target.addScaledVector(ge,h.dampingFactor):h.target.add(ge),Cn.setFromSpherical(B),Cn.applyQuaternion(rs),Oa.copy(h.target).add(Cn),h.object.lookAt(h.target),!0===h.enableDamping?(ne.theta*=1-h.dampingFactor,ne.phi*=1-h.dampingFactor,ge.multiplyScalar(1-h.dampingFactor)):(ne.set(0,0,0),ge.set(0,0,0)),ae=1,!!(Te||ls.distanceToSquared(h.object.position)>S||8*(1-ss.dot(h.object.quaternion))>S)&&(h.dispatchEvent(wx),ls.copy(h.object.position),ss.copy(h.object.quaternion),Te=!1,!0)}}(),this.dispose=function(){h.domElement.removeEventListener("contextmenu",Kn),h.domElement.removeEventListener("pointerdown",bi),h.domElement.removeEventListener("pointercancel",ps),h.domElement.removeEventListener("wheel",Ys),h.domElement.removeEventListener("pointermove",or),h.domElement.removeEventListener("pointerup",ji),null!==h._domElementKeyEvents&&h._domElementKeyEvents.removeEventListener("keydown",Ro)};const h=this,f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let b=f.NONE;const S=1e-6,B=new ja,ne=new ja;let ae=1;const ge=new Ut;let Te=!1;const Se=new Di,Pe=new Di,qe=new Di,Ne=new Di,Fe=new Di,at=new Di,_t=new Di,ut=new Di,ht=new Di,Rt=[],Xt={};function bt(){return Math.pow(.95,h.zoomSpeed)}function en(Cn){ne.theta-=Cn}function bn(Cn){ne.phi-=Cn}const ui=function(){const Cn=new Ut;return function(rs,ls){Cn.setFromMatrixColumn(ls,0),Cn.multiplyScalar(-rs),ge.add(Cn)}}(),Pi=function(){const Cn=new Ut;return function(rs,ls){!0===h.screenSpacePanning?Cn.setFromMatrixColumn(ls,1):(Cn.setFromMatrixColumn(ls,0),Cn.crossVectors(h.object.up,Cn)),Cn.multiplyScalar(rs),ge.add(Cn)}}(),hi=function(){const Cn=new Ut;return function(rs,ls){const ss=h.domElement;if(h.object.isPerspectiveCamera){Cn.copy(h.object.position).sub(h.target);let oo=Cn.length();oo*=Math.tan(h.object.fov/2*Math.PI/180),ui(2*rs*oo/ss.clientHeight,h.object.matrix),Pi(2*ls*oo/ss.clientHeight,h.object.matrix)}else h.object.isOrthographicCamera?(ui(rs*(h.object.right-h.object.left)/h.object.zoom/ss.clientWidth,h.object.matrix),Pi(ls*(h.object.top-h.object.bottom)/h.object.zoom/ss.clientHeight,h.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),h.enablePan=!1)}}();function Vn(Cn){h.object.isPerspectiveCamera?ae/=Cn:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom*Cn)),h.object.updateProjectionMatrix(),Te=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function Mi(Cn){h.object.isPerspectiveCamera?ae*=Cn:h.object.isOrthographicCamera?(h.object.zoom=Math.max(h.minZoom,Math.min(h.maxZoom,h.object.zoom/Cn)),h.object.updateProjectionMatrix(),Te=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),h.enableZoom=!1)}function Oi(Cn){Se.set(Cn.clientX,Cn.clientY)}function Ai(Cn){Ne.set(Cn.clientX,Cn.clientY)}function As(){1===Rt.length?Se.set(Rt[0].pageX,Rt[0].pageY):Se.set(.5*(Rt[0].pageX+Rt[1].pageX),.5*(Rt[0].pageY+Rt[1].pageY))}function co(){1===Rt.length?Ne.set(Rt[0].pageX,Rt[0].pageY):Ne.set(.5*(Rt[0].pageX+Rt[1].pageX),.5*(Rt[0].pageY+Rt[1].pageY))}function Jn(){const Cn=Rt[0].pageX-Rt[1].pageX,Xn=Rt[0].pageY-Rt[1].pageY,rs=Math.sqrt(Cn*Cn+Xn*Xn);_t.set(0,rs)}function Mr(Cn){if(1==Rt.length)Pe.set(Cn.pageX,Cn.pageY);else{const rs=Us(Cn);Pe.set(.5*(Cn.pageX+rs.x),.5*(Cn.pageY+rs.y))}qe.subVectors(Pe,Se).multiplyScalar(h.rotateSpeed);const Xn=h.domElement;en(2*Math.PI*qe.x/Xn.clientHeight),bn(2*Math.PI*qe.y/Xn.clientHeight),Se.copy(Pe)}function vi(Cn){if(1===Rt.length)Fe.set(Cn.pageX,Cn.pageY);else{const Xn=Us(Cn);Fe.set(.5*(Cn.pageX+Xn.x),.5*(Cn.pageY+Xn.y))}at.subVectors(Fe,Ne).multiplyScalar(h.panSpeed),hi(at.x,at.y),Ne.copy(Fe)}function Ji(Cn){const Xn=Us(Cn),rs=Cn.pageX-Xn.x,ls=Cn.pageY-Xn.y,ss=Math.sqrt(rs*rs+ls*ls);ut.set(0,ss),ht.set(0,Math.pow(ut.y/_t.y,h.zoomSpeed)),Vn(ht.y),_t.copy(ut)}function bi(Cn){!1!==h.enabled&&(0===Rt.length&&(h.domElement.setPointerCapture(Cn.pointerId),h.domElement.addEventListener("pointermove",or),h.domElement.addEventListener("pointerup",ji)),function Hi(Cn){Rt.push(Cn)}(Cn),"touch"===Cn.pointerType?function Yt(Cn){switch(Lr(Cn),Rt.length){case 1:switch(h.touches.ONE){case ye.ROTATE:if(!1===h.enableRotate)return;As(),b=f.TOUCH_ROTATE;break;case ye.PAN:if(!1===h.enablePan)return;co(),b=f.TOUCH_PAN;break;default:b=f.NONE}break;case 2:switch(h.touches.TWO){case ye.DOLLY_PAN:if(!1===h.enableZoom&&!1===h.enablePan)return;(function no(){h.enableZoom&&Jn(),h.enablePan&&co()})(),b=f.TOUCH_DOLLY_PAN;break;case ye.DOLLY_ROTATE:if(!1===h.enableZoom&&!1===h.enableRotate)return;(function Li(){h.enableZoom&&Jn(),h.enableRotate&&As()})(),b=f.TOUCH_DOLLY_ROTATE;break;default:b=f.NONE}break;default:b=f.NONE}b!==f.NONE&&h.dispatchEvent(Cm)}(Cn):function ms(Cn){let Xn;switch(Cn.button){case 0:Xn=h.mouseButtons.LEFT;break;case 1:Xn=h.mouseButtons.MIDDLE;break;case 2:Xn=h.mouseButtons.RIGHT;break;default:Xn=-1}switch(Xn){case L.DOLLY:if(!1===h.enableZoom)return;(function Xi(Cn){_t.set(Cn.clientX,Cn.clientY)})(Cn),b=f.DOLLY;break;case L.ROTATE:if(Cn.ctrlKey||Cn.metaKey||Cn.shiftKey){if(!1===h.enablePan)return;Ai(Cn),b=f.PAN}else{if(!1===h.enableRotate)return;Oi(Cn),b=f.ROTATE}break;case L.PAN:if(Cn.ctrlKey||Cn.metaKey||Cn.shiftKey){if(!1===h.enableRotate)return;Oi(Cn),b=f.ROTATE}else{if(!1===h.enablePan)return;Ai(Cn),b=f.PAN}break;default:b=f.NONE}b!==f.NONE&&h.dispatchEvent(Cm)}(Cn))}function or(Cn){!1!==h.enabled&&("touch"===Cn.pointerType?function Dt(Cn){switch(Lr(Cn),b){case f.TOUCH_ROTATE:if(!1===h.enableRotate)return;Mr(Cn),h.update();break;case f.TOUCH_PAN:if(!1===h.enablePan)return;vi(Cn),h.update();break;case f.TOUCH_DOLLY_PAN:if(!1===h.enableZoom&&!1===h.enablePan)return;(function di(Cn){h.enableZoom&&Ji(Cn),h.enablePan&&vi(Cn)})(Cn),h.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===h.enableZoom&&!1===h.enableRotate)return;(function ri(Cn){h.enableZoom&&Ji(Cn),h.enableRotate&&Mr(Cn)})(Cn),h.update();break;default:b=f.NONE}}(Cn):function vr(Cn){switch(b){case f.ROTATE:if(!1===h.enableRotate)return;!function Hn(Cn){Pe.set(Cn.clientX,Cn.clientY),qe.subVectors(Pe,Se).multiplyScalar(h.rotateSpeed);const Xn=h.domElement;en(2*Math.PI*qe.x/Xn.clientHeight),bn(2*Math.PI*qe.y/Xn.clientHeight),Se.copy(Pe),h.update()}(Cn);break;case f.DOLLY:if(!1===h.enableZoom)return;!function Zn(Cn){ut.set(Cn.clientX,Cn.clientY),ht.subVectors(ut,_t),ht.y>0?Vn(bt()):ht.y<0&&Mi(bt()),_t.copy(ut),h.update()}(Cn);break;case f.PAN:if(!1===h.enablePan)return;!function _r(Cn){Fe.set(Cn.clientX,Cn.clientY),at.subVectors(Fe,Ne).multiplyScalar(h.panSpeed),hi(at.x,at.y),Ne.copy(Fe),h.update()}(Cn)}}(Cn))}function ji(Cn){rr(Cn),0===Rt.length&&(h.domElement.releasePointerCapture(Cn.pointerId),h.domElement.removeEventListener("pointermove",or),h.domElement.removeEventListener("pointerup",ji)),h.dispatchEvent(Mx),b=f.NONE}function ps(Cn){rr(Cn)}function Ys(Cn){!1===h.enabled||!1===h.enableZoom||b!==f.NONE||(Cn.preventDefault(),h.dispatchEvent(Cm),function ur(Cn){Cn.deltaY<0?Mi(bt()):Cn.deltaY>0&&Vn(bt()),h.update()}(Cn),h.dispatchEvent(Mx))}function Ro(Cn){!1===h.enabled||!1===h.enablePan||function ai(Cn){let Xn=!1;switch(Cn.code){case h.keys.UP:hi(0,h.keyPanSpeed),Xn=!0;break;case h.keys.BOTTOM:hi(0,-h.keyPanSpeed),Xn=!0;break;case h.keys.LEFT:hi(h.keyPanSpeed,0),Xn=!0;break;case h.keys.RIGHT:hi(-h.keyPanSpeed,0),Xn=!0}Xn&&(Cn.preventDefault(),h.update())}(Cn)}function Kn(Cn){!1!==h.enabled&&Cn.preventDefault()}function rr(Cn){delete Xt[Cn.pointerId];for(let Xn=0;Xn<Rt.length;Xn++)if(Rt[Xn].pointerId==Cn.pointerId)return void Rt.splice(Xn,1)}function Lr(Cn){let Xn=Xt[Cn.pointerId];void 0===Xn&&(Xn=new Di,Xt[Cn.pointerId]=Xn),Xn.set(Cn.pageX,Cn.pageY)}function Us(Cn){return Xt[(Cn.pointerId===Rt[0].pointerId?Rt[1]:Rt[0]).pointerId]}h.domElement.addEventListener("contextmenu",Kn),h.domElement.addEventListener("pointerdown",bi),h.domElement.addEventListener("pointercancel",ps),h.domElement.addEventListener("wheel",Ys,{passive:!1}),this.update()}}const Sm=new z1,yf=new Ut,m_=new Ut,Ac=new Ha,hT={X:new Ut(1,0,0),Y:new Ut(0,1,0),Z:new Ut(0,0,1)},Cx={type:"change"},dT={type:"mouseDown"},su={type:"mouseUp",mode:null},eM={type:"objectChange"};class eB extends Va{constructor(o,c){super(),void 0===c&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),c=document),this.isTransformControls=!0,this.visible=!1,this.domElement=c,this.domElement.style.touchAction="none";const h=new gT;this._gizmo=h,this.add(h);const f=new _T;this._plane=f,this.add(f);const b=this;function S(_t,ut){let ht=ut;Object.defineProperty(b,_t,{get:function(){return void 0!==ht?ht:ut},set:function(Rt){ht!==Rt&&(ht=Rt,f[_t]=Rt,h[_t]=Rt,b.dispatchEvent({type:_t+"-changed",value:Rt}),b.dispatchEvent(Cx))}}),b[_t]=ut,f[_t]=ut,h[_t]=ut}S("camera",o),S("object",void 0),S("enabled",!0),S("axis",null),S("mode","translate"),S("translationSnap",null),S("rotationSnap",null),S("scaleSnap",null),S("space","world"),S("size",1),S("dragging",!1),S("showX",!0),S("showY",!0),S("showZ",!0);const B=new Ut,ne=new Ut,ae=new Ha,ge=new Ha,Te=new Ut,Se=new Ha,Pe=new Ut,qe=new Ut,Ne=new Ut,at=new Ut;S("worldPosition",B),S("worldPositionStart",ne),S("worldQuaternion",ae),S("worldQuaternionStart",ge),S("cameraPosition",Te),S("cameraQuaternion",Se),S("pointStart",Pe),S("pointEnd",qe),S("rotationAxis",Ne),S("rotationAngle",0),S("eye",at),this._offset=new Ut,this._startNorm=new Ut,this._endNorm=new Ut,this._cameraScale=new Ut,this._parentPosition=new Ut,this._parentQuaternion=new Ha,this._parentQuaternionInv=new Ha,this._parentScale=new Ut,this._worldScaleStart=new Ut,this._worldQuaternionInv=new Ha,this._worldScale=new Ut,this._positionStart=new Ut,this._quaternionStart=new Ha,this._scaleStart=new Ut,this._getPointer=tB.bind(this),this._onPointerDown=nB.bind(this),this._onPointerHover=fT.bind(this),this._onPointerMove=pT.bind(this),this._onPointerUp=AT.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(o){if(void 0===this.object||!0===this.dragging)return;Sm.setFromCamera(o,this.camera);const c=Gg(this._gizmo.picker[this.mode],Sm);this.axis=c?c.object.name:null}pointerDown(o){if(void 0!==this.object&&!0!==this.dragging&&0===o.button&&null!==this.axis){Sm.setFromCamera(o,this.camera);const c=Gg(this._plane,Sm,!0);c&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(c.point).sub(this.worldPositionStart)),this.dragging=!0,dT.mode=this.mode,this.dispatchEvent(dT)}}pointerMove(o){const c=this.axis,h=this.mode,f=this.object;let b=this.space;if("scale"===h?b="local":("E"===c||"XYZE"===c||"XYZ"===c)&&(b="world"),void 0===f||null===c||!1===this.dragging||-1!==o.button)return;Sm.setFromCamera(o,this.camera);const S=Gg(this._plane,Sm,!0);if(S){if(this.pointEnd.copy(S.point).sub(this.worldPositionStart),"translate"===h)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===b&&"XYZ"!==c&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===c.indexOf("X")&&(this._offset.x=0),-1===c.indexOf("Y")&&(this._offset.y=0),-1===c.indexOf("Z")&&(this._offset.z=0),"local"===b&&"XYZ"!==c?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),f.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===b&&(f.position.applyQuaternion(Ac.copy(this._quaternionStart).invert()),-1!==c.search("X")&&(f.position.x=Math.round(f.position.x/this.translationSnap)*this.translationSnap),-1!==c.search("Y")&&(f.position.y=Math.round(f.position.y/this.translationSnap)*this.translationSnap),-1!==c.search("Z")&&(f.position.z=Math.round(f.position.z/this.translationSnap)*this.translationSnap),f.position.applyQuaternion(this._quaternionStart)),"world"===b&&(f.parent&&f.position.add(yf.setFromMatrixPosition(f.parent.matrixWorld)),-1!==c.search("X")&&(f.position.x=Math.round(f.position.x/this.translationSnap)*this.translationSnap),-1!==c.search("Y")&&(f.position.y=Math.round(f.position.y/this.translationSnap)*this.translationSnap),-1!==c.search("Z")&&(f.position.z=Math.round(f.position.z/this.translationSnap)*this.translationSnap),f.parent&&f.position.sub(yf.setFromMatrixPosition(f.parent.matrixWorld))));else if("scale"===h){if(-1!==c.search("XYZ")){let B=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(B*=-1),m_.set(B,B,B)}else yf.copy(this.pointStart),m_.copy(this.pointEnd),yf.applyQuaternion(this._worldQuaternionInv),m_.applyQuaternion(this._worldQuaternionInv),m_.divide(yf),-1===c.search("X")&&(m_.x=1),-1===c.search("Y")&&(m_.y=1),-1===c.search("Z")&&(m_.z=1);f.scale.copy(this._scaleStart).multiply(m_),this.scaleSnap&&(-1!==c.search("X")&&(f.scale.x=Math.round(f.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==c.search("Y")&&(f.scale.y=Math.round(f.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==c.search("Z")&&(f.scale.z=Math.round(f.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===h){this._offset.copy(this.pointEnd).sub(this.pointStart);const B=20/this.worldPosition.distanceTo(yf.setFromMatrixPosition(this.camera.matrixWorld));"E"===c?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):"XYZE"===c?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(yf.copy(this.rotationAxis).cross(this.eye))*B):("X"===c||"Y"===c||"Z"===c)&&(this.rotationAxis.copy(hT[c]),yf.copy(hT[c]),"local"===b&&yf.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(yf.cross(this.eye).normalize())*B),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===b&&"E"!==c&&"XYZE"!==c?(f.quaternion.copy(this._quaternionStart),f.quaternion.multiply(Ac.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),f.quaternion.copy(Ac.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),f.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(Cx),this.dispatchEvent(eM)}}pointerUp(o){0===o.button&&(this.dragging&&null!==this.axis&&(su.mode=this.mode,this.dispatchEvent(su)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(o){o.geometry&&o.geometry.dispose(),o.material&&o.material.dispose()})}attach(o){return this.object=o,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(Cx),this.dispatchEvent(eM),this.pointStart.copy(this.pointEnd))}getRaycaster(){return Sm}getMode(){return this.mode}setMode(o){this.mode=o}setTranslationSnap(o){this.translationSnap=o}setRotationSnap(o){this.rotationSnap=o}setScaleSnap(o){this.scaleSnap=o}setSize(o){this.size=o}setSpace(o){this.space=o}}function tB(v){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:v.button};{const o=this.domElement.getBoundingClientRect();return{x:(v.clientX-o.left)/o.width*2-1,y:-(v.clientY-o.top)/o.height*2+1,button:v.button}}}function fT(v){if(this.enabled)switch(v.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(v))}}function nB(v){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(v.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(v)),this.pointerDown(this._getPointer(v)))}function pT(v){this.enabled&&this.pointerMove(this._getPointer(v))}function AT(v){this.enabled&&(this.domElement.releasePointerCapture(v.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(v)))}function Gg(v,o,c){const h=o.intersectObject(v,!0);for(let f=0;f<h.length;f++)if(h[f].object.visible||c)return h[f];return!1}const Sx=new Ic,Wl=new Ut(0,1,0),tM=new Ut(0,0,0),mT=new so,Cv=new Ha,nM=new Ha,Ud=new Ut,Ia=new so,hd=new Ut(1,0,0),g_=new Ut(0,1,0),G1=new Ut(0,0,1),vf=new Ut,dd=new Ut,fd=new Ut;class gT extends Va{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const o=new Ou({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),c=new Ge({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),h=o.clone();h.opacity=.15;const f=c.clone();f.opacity=.5;const b=o.clone();b.color.setHex(16711680);const S=o.clone();S.color.setHex(65280);const B=o.clone();B.color.setHex(255);const ne=o.clone();ne.color.setHex(16711680),ne.opacity=.5;const ae=o.clone();ae.color.setHex(65280),ae.opacity=.5;const ge=o.clone();ge.color.setHex(255),ge.opacity=.5;const Te=o.clone();Te.opacity=.25;const Se=o.clone();Se.color.setHex(16776960),Se.opacity=.25,o.clone().color.setHex(16776960);const qe=o.clone();qe.color.setHex(7895160);const Ne=new vu(0,.04,.1,12);Ne.translate(0,.05,0);const Fe=new Gl(.08,.08,.08);Fe.translate(0,.04,0);const at=new So;at.setAttribute("position",new Ss([0,0,0,1,0,0],3));const _t=new vu(.0075,.0075,.5,3);function ut(Mi,Oi){const Xi=new n_(Mi,.0075,3,64,Oi*Math.PI*2);return Xi.rotateY(Math.PI/2),Xi.rotateX(Math.PI/2),Xi}_t.translate(0,.25,0);const Rt={X:[[new Yr(Ne,b),[.5,0,0],[0,0,-Math.PI/2]],[new Yr(Ne,b),[-.5,0,0],[0,0,Math.PI/2]],[new Yr(_t,b),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new Yr(Ne,S),[0,.5,0]],[new Yr(Ne,S),[0,-.5,0],[Math.PI,0,0]],[new Yr(_t,S)]],Z:[[new Yr(Ne,B),[0,0,.5],[Math.PI/2,0,0]],[new Yr(Ne,B),[0,0,-.5],[-Math.PI/2,0,0]],[new Yr(_t,B),null,[Math.PI/2,0,0]]],XYZ:[[new Yr(new kg(.1,0),Te.clone()),[0,0,0]]],XY:[[new Yr(new Gl(.15,.15,.01),ge.clone()),[.15,.15,0]]],YZ:[[new Yr(new Gl(.15,.15,.01),ne.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Yr(new Gl(.15,.15,.01),ae.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},Xt={X:[[new Yr(new vu(.2,0,.6,4),h),[.3,0,0],[0,0,-Math.PI/2]],[new Yr(new vu(.2,0,.6,4),h),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Yr(new vu(.2,0,.6,4),h),[0,.3,0]],[new Yr(new vu(.2,0,.6,4),h),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Yr(new vu(.2,0,.6,4),h),[0,0,.3],[Math.PI/2,0,0]],[new Yr(new vu(.2,0,.6,4),h),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new Yr(new kg(.2,0),h)]],XY:[[new Yr(new Gl(.2,.2,.01),h),[.15,.15,0]]],YZ:[[new Yr(new Gl(.2,.2,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Yr(new Gl(.2,.2,.01),h),[.15,0,.15],[-Math.PI/2,0,0]]]},xn={START:[[new Yr(new kg(.01,2),f),null,null,null,"helper"]],END:[[new Yr(new kg(.01,2),f),null,null,null,"helper"]],DELTA:[[new an(function ht(){const Mi=new So;return Mi.setAttribute("position",new Ss([0,0,0,1,1,1],3)),Mi}(),f),null,null,null,"helper"]],X:[[new an(at,f.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new an(at,f.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new an(at,f.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},bt={XYZE:[[new Yr(ut(.5,1),qe),null,[0,Math.PI/2,0]]],X:[[new Yr(ut(.5,.5),b)]],Y:[[new Yr(ut(.5,.5),S),null,[0,0,-Math.PI/2]]],Z:[[new Yr(ut(.5,.5),B),null,[0,Math.PI/2,0]]],E:[[new Yr(ut(.75,1),Se),null,[0,Math.PI/2,0]]]},en={AXIS:[[new an(at,f.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},bn={XYZE:[[new Yr(new P1(.25,10,8),h)]],X:[[new Yr(new n_(.5,.1,4,24),h),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Yr(new n_(.5,.1,4,24),h),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Yr(new n_(.5,.1,4,24),h),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Yr(new n_(.75,.1,2,24),h)]]},ui={X:[[new Yr(Fe,b),[.5,0,0],[0,0,-Math.PI/2]],[new Yr(_t,b),[0,0,0],[0,0,-Math.PI/2]],[new Yr(Fe,b),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new Yr(Fe,S),[0,.5,0]],[new Yr(_t,S)],[new Yr(Fe,S),[0,-.5,0],[0,0,Math.PI]]],Z:[[new Yr(Fe,B),[0,0,.5],[Math.PI/2,0,0]],[new Yr(_t,B),[0,0,0],[Math.PI/2,0,0]],[new Yr(Fe,B),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new Yr(new Gl(.15,.15,.01),ge),[.15,.15,0]]],YZ:[[new Yr(new Gl(.15,.15,.01),ne),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Yr(new Gl(.15,.15,.01),ae),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Yr(new Gl(.1,.1,.1),Te.clone())]]},Pi={X:[[new Yr(new vu(.2,0,.6,4),h),[.3,0,0],[0,0,-Math.PI/2]],[new Yr(new vu(.2,0,.6,4),h),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new Yr(new vu(.2,0,.6,4),h),[0,.3,0]],[new Yr(new vu(.2,0,.6,4),h),[0,-.3,0],[0,0,Math.PI]]],Z:[[new Yr(new vu(.2,0,.6,4),h),[0,0,.3],[Math.PI/2,0,0]],[new Yr(new vu(.2,0,.6,4),h),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new Yr(new Gl(.2,.2,.01),h),[.15,.15,0]]],YZ:[[new Yr(new Gl(.2,.2,.01),h),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new Yr(new Gl(.2,.2,.01),h),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new Yr(new Gl(.2,.2,.2),h),[0,0,0]]]},hi={X:[[new an(at,f.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new an(at,f.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new an(at,f.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function Vn(Mi){const Oi=new Va;for(const Xi in Mi)for(let Ai=Mi[Xi].length;Ai--;){const Hn=Mi[Xi][Ai][0].clone(),Zn=Mi[Xi][Ai][1],_r=Mi[Xi][Ai][2],ur=Mi[Xi][Ai][3],ai=Mi[Xi][Ai][4];Hn.name=Xi,Hn.tag=ai,Zn&&Hn.position.set(Zn[0],Zn[1],Zn[2]),_r&&Hn.rotation.set(_r[0],_r[1],_r[2]),ur&&Hn.scale.set(ur[0],ur[1],ur[2]),Hn.updateMatrix();const As=Hn.geometry.clone();As.applyMatrix4(Hn.matrix),Hn.geometry=As,Hn.renderOrder=1/0,Hn.position.set(0,0,0),Hn.rotation.set(0,0,0),Hn.scale.set(1,1,1),Oi.add(Hn)}return Oi}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=Vn(Rt)),this.add(this.gizmo.rotate=Vn(bt)),this.add(this.gizmo.scale=Vn(ui)),this.add(this.picker.translate=Vn(Xt)),this.add(this.picker.rotate=Vn(bn)),this.add(this.picker.scale=Vn(Pi)),this.add(this.helper.translate=Vn(xn)),this.add(this.helper.rotate=Vn(en)),this.add(this.helper.scale=Vn(hi)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(o){const h="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:nM;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let f=[];f=f.concat(this.picker[this.mode].children),f=f.concat(this.gizmo[this.mode].children),f=f.concat(this.helper[this.mode].children);for(let b=0;b<f.length;b++){const S=f[b];let B;S.visible=!0,S.rotation.set(0,0,0),S.position.copy(this.worldPosition),B=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),S.scale.set(1,1,1).multiplyScalar(B*this.size/4),"helper"!==S.tag?(S.quaternion.copy(h),"translate"===this.mode||"scale"===this.mode?("X"===S.name&&Math.abs(Wl.copy(hd).applyQuaternion(h).dot(this.eye))>.99&&(S.scale.set(1e-10,1e-10,1e-10),S.visible=!1),"Y"===S.name&&Math.abs(Wl.copy(g_).applyQuaternion(h).dot(this.eye))>.99&&(S.scale.set(1e-10,1e-10,1e-10),S.visible=!1),"Z"===S.name&&Math.abs(Wl.copy(G1).applyQuaternion(h).dot(this.eye))>.99&&(S.scale.set(1e-10,1e-10,1e-10),S.visible=!1),"XY"===S.name&&Math.abs(Wl.copy(G1).applyQuaternion(h).dot(this.eye))<.2&&(S.scale.set(1e-10,1e-10,1e-10),S.visible=!1),"YZ"===S.name&&Math.abs(Wl.copy(hd).applyQuaternion(h).dot(this.eye))<.2&&(S.scale.set(1e-10,1e-10,1e-10),S.visible=!1),"XZ"===S.name&&Math.abs(Wl.copy(g_).applyQuaternion(h).dot(this.eye))<.2&&(S.scale.set(1e-10,1e-10,1e-10),S.visible=!1)):"rotate"===this.mode&&(Cv.copy(h),Wl.copy(this.eye).applyQuaternion(Ac.copy(h).invert()),-1!==S.name.search("E")&&S.quaternion.setFromRotationMatrix(mT.lookAt(this.eye,tM,g_)),"X"===S.name&&(Ac.setFromAxisAngle(hd,Math.atan2(-Wl.y,Wl.z)),Ac.multiplyQuaternions(Cv,Ac),S.quaternion.copy(Ac)),"Y"===S.name&&(Ac.setFromAxisAngle(g_,Math.atan2(Wl.x,Wl.z)),Ac.multiplyQuaternions(Cv,Ac),S.quaternion.copy(Ac)),"Z"===S.name&&(Ac.setFromAxisAngle(G1,Math.atan2(Wl.y,Wl.x)),Ac.multiplyQuaternions(Cv,Ac),S.quaternion.copy(Ac))),S.visible=S.visible&&(-1===S.name.indexOf("X")||this.showX),S.visible=S.visible&&(-1===S.name.indexOf("Y")||this.showY),S.visible=S.visible&&(-1===S.name.indexOf("Z")||this.showZ),S.visible=S.visible&&(-1===S.name.indexOf("E")||this.showX&&this.showY&&this.showZ),S.material._color=S.material._color||S.material.color.clone(),S.material._opacity=S.material._opacity||S.material.opacity,S.material.color.copy(S.material._color),S.material.opacity=S.material._opacity,this.enabled&&this.axis&&(S.name===this.axis||this.axis.split("").some(function(ne){return S.name===ne}))&&(S.material.color.setHex(16776960),S.material.opacity=1)):(S.visible=!1,"AXIS"===S.name?(S.position.copy(this.worldPositionStart),S.visible=!!this.axis,"X"===this.axis&&(Ac.setFromEuler(Sx.set(0,0,0)),S.quaternion.copy(h).multiply(Ac),Math.abs(Wl.copy(hd).applyQuaternion(h).dot(this.eye))>.9&&(S.visible=!1)),"Y"===this.axis&&(Ac.setFromEuler(Sx.set(0,0,Math.PI/2)),S.quaternion.copy(h).multiply(Ac),Math.abs(Wl.copy(g_).applyQuaternion(h).dot(this.eye))>.9&&(S.visible=!1)),"Z"===this.axis&&(Ac.setFromEuler(Sx.set(0,Math.PI/2,0)),S.quaternion.copy(h).multiply(Ac),Math.abs(Wl.copy(G1).applyQuaternion(h).dot(this.eye))>.9&&(S.visible=!1)),"XYZE"===this.axis&&(Ac.setFromEuler(Sx.set(0,Math.PI/2,0)),Wl.copy(this.rotationAxis),S.quaternion.setFromRotationMatrix(mT.lookAt(tM,Wl,g_)),S.quaternion.multiply(Ac),S.visible=this.dragging),"E"===this.axis&&(S.visible=!1)):"START"===S.name?(S.position.copy(this.worldPositionStart),S.visible=this.dragging):"END"===S.name?(S.position.copy(this.worldPosition),S.visible=this.dragging):"DELTA"===S.name?(S.position.copy(this.worldPositionStart),S.quaternion.copy(this.worldQuaternionStart),yf.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),yf.applyQuaternion(this.worldQuaternionStart.clone().invert()),S.scale.copy(yf),S.visible=this.dragging):(S.quaternion.copy(h),S.position.copy(this.dragging?this.worldPositionStart:this.worldPosition),this.axis&&(S.visible=-1!==this.axis.search(S.name))))}super.updateMatrixWorld(o)}}class _T extends Yr{constructor(){super(new vp(1e5,1e5,2,2),new Ou({visible:!1,wireframe:!0,side:X,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(o){let c=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(c="local"),vf.copy(hd).applyQuaternion("local"===c?this.worldQuaternion:nM),dd.copy(g_).applyQuaternion("local"===c?this.worldQuaternion:nM),fd.copy(G1).applyQuaternion("local"===c?this.worldQuaternion:nM),Wl.copy(dd),this.mode){case"translate":case"scale":switch(this.axis){case"X":Wl.copy(this.eye).cross(vf),Ud.copy(vf).cross(Wl);break;case"Y":Wl.copy(this.eye).cross(dd),Ud.copy(dd).cross(Wl);break;case"Z":Wl.copy(this.eye).cross(fd),Ud.copy(fd).cross(Wl);break;case"XY":Ud.copy(fd);break;case"YZ":Ud.copy(vf);break;case"XZ":Wl.copy(fd),Ud.copy(dd);break;case"XYZ":case"E":Ud.set(0,0,0)}break;default:Ud.set(0,0,0)}0===Ud.length()?this.quaternion.copy(this.cameraQuaternion):(Ia.lookAt(yf.set(0,0,0),Ud,Wl),this.quaternion.setFromRotationMatrix(Ia)),super.updateMatrixWorld(o)}}const __={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"};class q1{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const iB=new jf(-1,1,1,-1,0,1),iM=new So;iM.setAttribute("position",new Ss([-1,3,0,-1,-1,0,3,-1,0],3)),iM.setAttribute("uv",new Ss([0,2,0,0,2,0],2));class Sv{constructor(o){this._mesh=new Yr(iM,o)}dispose(){this._mesh.geometry.dispose()}render(o){o.render(this._mesh,iB)}get material(){return this._mesh.material}set material(o){this._mesh.material=o}}class Q1 extends q1{constructor(o,c){super(),this.textureID=void 0!==c?c:"tDiffuse",o instanceof ec?(this.uniforms=o.uniforms,this.material=o):o&&(this.uniforms=Nf.clone(o.uniforms),this.material=new ec({defines:Object.assign({},o.defines),uniforms:this.uniforms,vertexShader:o.vertexShader,fragmentShader:o.fragmentShader})),this.fsQuad=new Sv(this.material)}render(o,c,h){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=h.texture),this.fsQuad.material=this.material,this.renderToScreen?(o.setRenderTarget(null),this.fsQuad.render(o)):(o.setRenderTarget(c),this.clear&&o.clear(o.autoClearColor,o.autoClearDepth,o.autoClearStencil),this.fsQuad.render(o))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class yT extends q1{constructor(o,c){super(),this.scene=o,this.camera=c,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(o,c,h){const f=o.getContext(),b=o.state;let S,B;b.buffers.color.setMask(!1),b.buffers.depth.setMask(!1),b.buffers.color.setLocked(!0),b.buffers.depth.setLocked(!0),this.inverse?(S=0,B=1):(S=1,B=0),b.buffers.stencil.setTest(!0),b.buffers.stencil.setOp(f.REPLACE,f.REPLACE,f.REPLACE),b.buffers.stencil.setFunc(f.ALWAYS,S,4294967295),b.buffers.stencil.setClear(B),b.buffers.stencil.setLocked(!0),o.setRenderTarget(h),this.clear&&o.clear(),o.render(this.scene,this.camera),o.setRenderTarget(c),this.clear&&o.clear(),o.render(this.scene,this.camera),b.buffers.color.setLocked(!1),b.buffers.depth.setLocked(!1),b.buffers.stencil.setLocked(!1),b.buffers.stencil.setFunc(f.EQUAL,1,4294967295),b.buffers.stencil.setOp(f.KEEP,f.KEEP,f.KEEP),b.buffers.stencil.setLocked(!0)}}class vT extends q1{constructor(){super(),this.needsSwap=!1}render(o){o.state.buffers.stencil.setLocked(!1),o.state.buffers.stencil.setTest(!1)}}class rB{constructor(o,c){if(this.renderer=o,void 0===c){const h=o.getSize(new Di);this._pixelRatio=o.getPixelRatio(),this._width=h.width,this._height=h.height,(c=new Lo(this._width*this._pixelRatio,this._height*this._pixelRatio)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=c.width,this._height=c.height;this.renderTarget1=c,this.renderTarget2=c.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===__&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===Q1&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Q1(__),this.clock=new yx}swapBuffers(){const o=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=o}addPass(o){this.passes.push(o),o.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(o,c){this.passes.splice(c,0,o),o.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(o){const c=this.passes.indexOf(o);-1!==c&&this.passes.splice(c,1)}isLastEnabledPass(o){for(let c=o+1;c<this.passes.length;c++)if(this.passes[c].enabled)return!1;return!0}render(o){void 0===o&&(o=this.clock.getDelta());const c=this.renderer.getRenderTarget();let h=!1;for(let f=0,b=this.passes.length;f<b;f++){const S=this.passes[f];if(!1!==S.enabled){if(S.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(f),S.render(this.renderer,this.writeBuffer,this.readBuffer,o,h),S.needsSwap){if(h){const B=this.renderer.getContext(),ne=this.renderer.state.buffers.stencil;ne.setFunc(B.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,o),ne.setFunc(B.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==yT&&(S instanceof yT?h=!0:S instanceof vT&&(h=!1))}}this.renderer.setRenderTarget(c)}reset(o){if(void 0===o){const c=this.renderer.getSize(new Di);this._pixelRatio=this.renderer.getPixelRatio(),this._width=c.width,this._height=c.height,(o=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=o,this.renderTarget2=o.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(o,c){this._width=o,this._height=c;const h=this._width*this._pixelRatio,f=this._height*this._pixelRatio;this.renderTarget1.setSize(h,f),this.renderTarget2.setSize(h,f);for(let b=0;b<this.passes.length;b++)this.passes[b].setSize(h,f)}setPixelRatio(o){this._pixelRatio=o,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}new jf(-1,1,1,-1,0,1);const bT=new So;bT.setAttribute("position",new Ss([-1,3,0,-1,-1,0,3,-1,0],3)),bT.setAttribute("uv",new Ss([0,2,0,0,2,0],2));class xT extends q1{constructor(o,c,h,f,b){super(),this.scene=o,this.camera=c,this.overrideMaterial=h,this.clearColor=f,this.clearAlpha=void 0!==b?b:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new wr}render(o,c,h){const f=o.autoClear;let b,S;o.autoClear=!1,void 0!==this.overrideMaterial&&(S=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(o.getClearColor(this._oldClearColor),b=o.getClearAlpha(),o.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&o.clearDepth(),o.setRenderTarget(this.renderToScreen?null:h),this.clear&&o.clear(o.autoClearColor,o.autoClearDepth,o.autoClearStencil),o.render(this.scene,this.camera),this.clearColor&&o.setClearColor(this._oldClearColor,b),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=S),o.autoClear=f}}const W1={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new Di},cameraProjectionMatrix:{value:new so},cameraInverseProjectionMatrix:{value:new so},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tNormal;\n\t\tuniform sampler2D tDepth;\n\t\tuniform sampler2D tNoise;\n\n\t\tuniform vec3 kernel[ KERNEL_SIZE ];\n\n\t\tuniform vec2 resolution;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\t\tuniform mat4 cameraProjectionMatrix;\n\t\tuniform mat4 cameraInverseProjectionMatrix;\n\n\t\tuniform float kernelRadius;\n\t\tuniform float minDistance; // avoid artifacts caused by neighbour fragments with minimal depth difference\n\t\tuniform float maxDistance; // avoid the influence of fragments which are too far away\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getDepth( const in vec2 screenPosition ) {\n\n\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t}\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tfloat getViewZ( const in float depth ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\n\n\t\t\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\n\n\t\t\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\n\n\t\t\tclipPosition *= clipW; // unprojection.\n\n\t\t\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\n\n\t\t}\n\n\t\tvec3 getViewNormal( const in vec2 screenPosition ) {\n\n\t\t\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getDepth( vUv );\n\t\t\tfloat viewZ = getViewZ( depth );\n\n\t\t\tvec3 viewPosition = getViewPosition( vUv, depth, viewZ );\n\t\t\tvec3 viewNormal = getViewNormal( vUv );\n\n\t\t\tvec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );\n\t\t\tvec3 random = vec3( texture2D( tNoise, vUv * noiseScale ).r );\n\n\t\t\t// compute matrix used to reorient a kernel vector\n\n\t\t\tvec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );\n\t\t\tvec3 bitangent = cross( viewNormal, tangent );\n\t\t\tmat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );\n\n\t\t float occlusion = 0.0;\n\n\t\t for ( int i = 0; i < KERNEL_SIZE; i ++ ) {\n\n\t\t\t\tvec3 sampleVector = kernelMatrix * kernel[ i ]; // reorient sample vector in view space\n\t\t\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius ); // calculate sample point\n\n\t\t\t\tvec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 ); // project point and calculate NDC\n\t\t\t\tsamplePointNDC /= samplePointNDC.w;\n\n\t\t\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5; // compute uv coordinates\n\n\t\t\t\tfloat realDepth = getLinearDepth( samplePointUv ); // get linear depth from depth texture\n\t\t\t\tfloat sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar ); // compute linear depth of the sample view Z value\n\t\t\t\tfloat delta = sampleDepth - realDepth;\n\n\t\t\t\tif ( delta > minDistance && delta < maxDistance ) { // if fragment is before sample point, increase occlusion\n\n\t\t\t\t\tocclusion += 1.0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tocclusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );\n\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );\n\n\t\t}"},y__defines={PERSPECTIVE_CAMERA:1},y__uniforms={tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},y__vertexShader="varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",y__fragmentShader="uniform sampler2D tDepth;\n\n\t\tuniform float cameraNear;\n\t\tuniform float cameraFar;\n\n\t\tvarying vec2 vUv;\n\n\t\t#include <packing>\n\n\t\tfloat getLinearDepth( const in vec2 screenPosition ) {\n\n\t\t\t#if PERSPECTIVE_CAMERA == 1\n\n\t\t\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;\n\t\t\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\t\t\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n\n\t\t\t#else\n\n\t\t\t\treturn texture2D( tDepth, screenPosition ).x;\n\n\t\t\t#endif\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tfloat depth = getLinearDepth( vUv );\n\t\t\tgl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );\n\n\t\t}",Tx={uniforms:{tDiffuse:{value:null},resolution:{value:new Di}},vertexShader:"varying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"uniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec2 texelSize = ( 1.0 / resolution );\n\t\t\tfloat result = 0.0;\n\n\t\t\tfor ( int i = - 2; i <= 2; i ++ ) {\n\n\t\t\t\tfor ( int j = - 2; j <= 2; j ++ ) {\n\n\t\t\t\t\tvec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;\n\t\t\t\t\tresult += texture2D( tDiffuse, vUv + offset ).r;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tgl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );\n\n\t\t}"};class rM{constructor(o=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let c=0;c<256;c++)this.p[c]=Math.floor(256*o.random());this.perm=[];for(let c=0;c<512;c++)this.perm[c]=this.p[255&c];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(o,c,h){return o[0]*c+o[1]*h}dot3(o,c,h,f){return o[0]*c+o[1]*h+o[2]*f}dot4(o,c,h,f,b){return o[0]*c+o[1]*h+o[2]*f+o[3]*b}noise(o,c){let h,f,b;const B=(o+c)*(.5*(Math.sqrt(3)-1)),ne=Math.floor(o+B),ae=Math.floor(c+B),ge=(3-Math.sqrt(3))/6,Te=(ne+ae)*ge,qe=o-(ne-Te),Ne=c-(ae-Te);let Fe,at;qe>Ne?(Fe=1,at=0):(Fe=0,at=1);const _t=qe-Fe+ge,ut=Ne-at+ge,ht=qe-1+2*ge,Rt=Ne-1+2*ge,Xt=255&ne,xn=255&ae,en=this.perm[Xt+Fe+this.perm[xn+at]]%12,bn=this.perm[Xt+1+this.perm[xn+1]]%12;let ui=.5-qe*qe-Ne*Ne;ui<0?h=0:(ui*=ui,h=ui*ui*this.dot(this.grad3[this.perm[Xt+this.perm[xn]]%12],qe,Ne));let Pi=.5-_t*_t-ut*ut;Pi<0?f=0:(Pi*=Pi,f=Pi*Pi*this.dot(this.grad3[en],_t,ut));let hi=.5-ht*ht-Rt*Rt;return hi<0?b=0:(hi*=hi,b=hi*hi*this.dot(this.grad3[bn],ht,Rt)),70*(h+f+b)}noise3d(o,c,h){let f,b,S,B;const ae=.3333333333333333*(o+c+h),ge=Math.floor(o+ae),Te=Math.floor(c+ae),Se=Math.floor(h+ae),Pe=1/6,qe=(ge+Te+Se)*Pe,_t=o-(ge-qe),ut=c-(Te-qe),ht=h-(Se-qe);let Rt,Xt,xn,bt,en,bn;_t>=ut?ut>=ht?(Rt=1,Xt=0,xn=0,bt=1,en=1,bn=0):_t>=ht?(Rt=1,Xt=0,xn=0,bt=1,en=0,bn=1):(Rt=0,Xt=0,xn=1,bt=1,en=0,bn=1):ut<ht?(Rt=0,Xt=0,xn=1,bt=0,en=1,bn=1):_t<ht?(Rt=0,Xt=1,xn=0,bt=0,en=1,bn=1):(Rt=0,Xt=1,xn=0,bt=1,en=1,bn=0);const ui=_t-Rt+Pe,Pi=ut-Xt+Pe,hi=ht-xn+Pe,Vn=_t-bt+2*Pe,Mi=ut-en+2*Pe,Oi=ht-bn+2*Pe,Xi=_t-1+.5,Ai=ut-1+.5,Hn=ht-1+.5,Zn=255&ge,_r=255&Te,ur=255&Se,As=this.perm[Zn+Rt+this.perm[_r+Xt+this.perm[ur+xn]]]%12,co=this.perm[Zn+bt+this.perm[_r+en+this.perm[ur+bn]]]%12,Jn=this.perm[Zn+1+this.perm[_r+1+this.perm[ur+1]]]%12;let no=.6-_t*_t-ut*ut-ht*ht;no<0?f=0:(no*=no,f=no*no*this.dot3(this.grad3[this.perm[Zn+this.perm[_r+this.perm[ur]]]%12],_t,ut,ht));let Li=.6-ui*ui-Pi*Pi-hi*hi;Li<0?b=0:(Li*=Li,b=Li*Li*this.dot3(this.grad3[As],ui,Pi,hi));let Mr=.6-Vn*Vn-Mi*Mi-Oi*Oi;Mr<0?S=0:(Mr*=Mr,S=Mr*Mr*this.dot3(this.grad3[co],Vn,Mi,Oi));let vi=.6-Xi*Xi-Ai*Ai-Hn*Hn;return vi<0?B=0:(vi*=vi,B=vi*vi*this.dot3(this.grad3[Jn],Xi,Ai,Hn)),32*(f+b+S+B)}noise4d(o,c,h,f){const b=this.grad4,S=this.simplex,B=this.perm,ne=(Math.sqrt(5)-1)/4,ae=(5-Math.sqrt(5))/20;let ge,Te,Se,Pe,qe;const Ne=(o+c+h+f)*ne,Fe=Math.floor(o+Ne),at=Math.floor(c+Ne),_t=Math.floor(h+Ne),ut=Math.floor(f+Ne),ht=(Fe+at+_t+ut)*ae,en=o-(Fe-ht),bn=c-(at-ht),ui=h-(_t-ht),Pi=f-(ut-ht),Hn=(en>bn?32:0)+(en>ui?16:0)+(bn>ui?8:0)+(en>Pi?4:0)+(bn>Pi?2:0)+(ui>Pi?1:0),Zn=S[Hn][0]>=3?1:0,_r=S[Hn][1]>=3?1:0,ur=S[Hn][2]>=3?1:0,ai=S[Hn][3]>=3?1:0,As=S[Hn][0]>=2?1:0,co=S[Hn][1]>=2?1:0,Jn=S[Hn][2]>=2?1:0,no=S[Hn][3]>=2?1:0,Li=S[Hn][0]>=1?1:0,Mr=S[Hn][1]>=1?1:0,vi=S[Hn][2]>=1?1:0,Ji=S[Hn][3]>=1?1:0,di=en-Zn+ae,ri=bn-_r+ae,bi=ui-ur+ae,or=Pi-ai+ae,ji=en-As+2*ae,ps=bn-co+2*ae,ms=ui-Jn+2*ae,vr=Pi-no+2*ae,Ys=en-Li+3*ae,Ro=bn-Mr+3*ae,Yt=ui-vi+3*ae,Dt=Pi-Ji+3*ae,Kn=en-1+4*ae,Hi=bn-1+4*ae,rr=ui-1+4*ae,Lr=Pi-1+4*ae,Us=255&Fe,Cn=255&at,Xn=255&_t,rs=255&ut,ss=B[Us+Zn+B[Cn+_r+B[Xn+ur+B[rs+ai]]]]%32,uo=B[Us+As+B[Cn+co+B[Xn+Jn+B[rs+no]]]]%32,oo=B[Us+Li+B[Cn+Mr+B[Xn+vi+B[rs+Ji]]]]%32,Oa=B[Us+1+B[Cn+1+B[Xn+1+B[rs+1]]]]%32;let fa=.6-en*en-bn*bn-ui*ui-Pi*Pi;fa<0?ge=0:(fa*=fa,ge=fa*fa*this.dot4(b[B[Us+B[Cn+B[Xn+B[rs]]]]%32],en,bn,ui,Pi));let $a=.6-di*di-ri*ri-bi*bi-or*or;$a<0?Te=0:($a*=$a,Te=$a*$a*this.dot4(b[ss],di,ri,bi,or));let Gn=.6-ji*ji-ps*ps-ms*ms-vr*vr;Gn<0?Se=0:(Gn*=Gn,Se=Gn*Gn*this.dot4(b[uo],ji,ps,ms,vr));let Wi=.6-Ys*Ys-Ro*Ro-Yt*Yt-Dt*Dt;Wi<0?Pe=0:(Wi*=Wi,Pe=Wi*Wi*this.dot4(b[oo],Ys,Ro,Yt,Dt));let Pr=.6-Kn*Kn-Hi*Hi-rr*rr-Lr*Lr;return Pr<0?qe=0:(Pr*=Pr,qe=Pr*Pr*this.dot4(b[Oa],Kn,Hi,rr,Lr)),27*(ge+Te+Se+Pe+qe)}}let dr=(()=>{class v extends q1{constructor(c,h,f,b){super(),this.width=void 0!==f?f:512,this.height=void 0!==b?b:512,this.clear=!0,this.camera=h,this.scene=c,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();const S=new ov;S.format=Yi,S.type=fo,this.beautyRenderTarget=new Lo(this.width,this.height),this.normalRenderTarget=new Lo(this.width,this.height,{minFilter:Gt,magFilter:Gt,depthTexture:S}),this.ssaoRenderTarget=new Lo(this.width,this.height),this.blurRenderTarget=this.ssaoRenderTarget.clone(),void 0===W1&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),this.ssaoMaterial=new ec({defines:Object.assign({},W1.defines),uniforms:Nf.clone(W1.uniforms),vertexShader:W1.vertexShader,fragmentShader:W1.fragmentShader,blending:Z}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new E2,this.normalMaterial.blending=Z,this.blurMaterial=new ec({defines:Object.assign({},Tx.defines),uniforms:Nf.clone(Tx.uniforms),vertexShader:Tx.vertexShader,fragmentShader:Tx.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new ec({defines:Object.assign({},y__defines),uniforms:Nf.clone(y__uniforms),vertexShader:y__vertexShader,fragmentShader:y__fragmentShader,blending:Z}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new ec({uniforms:Nf.clone(__.uniforms),vertexShader:__.vertexShader,fragmentShader:__.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:U,blendDst:T,blendEquation:m,blendSrcAlpha:fe,blendDstAlpha:T,blendEquationAlpha:m}),this.fsQuad=new Sv(null),this.originalClearColor=new wr}dispose(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()}render(c,h){switch(!1===c.capabilities.isWebGL2&&(this.noiseTexture.format=_o),c.setRenderTarget(this.beautyRenderTarget),c.clear(),c.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(c,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(c,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(c,this.blurMaterial,this.blurRenderTarget),this.output){case v.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=Z,this.renderPass(c,this.copyMaterial,this.renderToScreen?null:h);break;case v.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=Z,this.renderPass(c,this.copyMaterial,this.renderToScreen?null:h);break;case v.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Z,this.renderPass(c,this.copyMaterial,this.renderToScreen?null:h);break;case v.OUTPUT.Depth:this.renderPass(c,this.depthRenderMaterial,this.renderToScreen?null:h);break;case v.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=Z,this.renderPass(c,this.copyMaterial,this.renderToScreen?null:h);break;case v.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=Z,this.renderPass(c,this.copyMaterial,this.renderToScreen?null:h),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=w,this.renderPass(c,this.copyMaterial,this.renderToScreen?null:h);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}}renderPass(c,h,f,b,S){c.getClearColor(this.originalClearColor);const B=c.getClearAlpha(),ne=c.autoClear;c.setRenderTarget(f),c.autoClear=!1,null!=b&&(c.setClearColor(b),c.setClearAlpha(S||0),c.clear()),this.fsQuad.material=h,this.fsQuad.render(c),c.autoClear=ne,c.setClearColor(this.originalClearColor),c.setClearAlpha(B)}renderOverride(c,h,f,b,S){c.getClearColor(this.originalClearColor);const B=c.getClearAlpha(),ne=c.autoClear;c.setRenderTarget(f),c.autoClear=!1,S=h.clearAlpha||S,null!=(b=h.clearColor||b)&&(c.setClearColor(b),c.setClearAlpha(S||0),c.clear()),this.scene.overrideMaterial=h,c.render(this.scene,this.camera),this.scene.overrideMaterial=null,c.autoClear=ne,c.setClearColor(this.originalClearColor),c.setClearAlpha(B)}setSize(c,h){this.width=c,this.height=h,this.beautyRenderTarget.setSize(c,h),this.ssaoRenderTarget.setSize(c,h),this.normalRenderTarget.setSize(c,h),this.blurRenderTarget.setSize(c,h),this.ssaoMaterial.uniforms.resolution.value.set(c,h),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(c,h)}generateSampleKernel(){const c=this.kernelSize,h=this.kernel;for(let f=0;f<c;f++){const b=new Ut;b.x=2*Math.random()-1,b.y=2*Math.random()-1,b.z=Math.random(),b.normalize();let S=f/c;S=oi(.1,1,S*S),b.multiplyScalar(S),h.push(b)}}generateRandomKernelRotations(){void 0===rM&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");const f=new rM,S=new Float32Array(16);for(let B=0;B<16;B++){const ne=2*Math.random()-1,ae=2*Math.random()-1;S[B]=f.noise3d(ne,ae,0)}this.noiseTexture=new zr(S,4,4,ga,ws),this.noiseTexture.wrapS=$n,this.noiseTexture.wrapT=$n,this.noiseTexture.needsUpdate=!0}overrideVisibility(){const h=this._visibilityCache;this.scene.traverse(function(f){h.set(f,f.visible),(f.isPoints||f.isLine)&&(f.visible=!1)})}restoreVisibility(){const h=this._visibilityCache;this.scene.traverse(function(f){const b=h.get(f);f.visible=b}),h.clear()}}return v.OUTPUT={Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5},v})();const bf={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new wr(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class wl extends q1{constructor(o,c,h,f){super(),this.strength=void 0!==c?c:1,this.radius=h,this.threshold=f,this.resolution=void 0!==o?new Di(o.x,o.y):new Di(256,256),this.clearColor=new wr(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let b=Math.round(this.resolution.x/2),S=Math.round(this.resolution.y/2);this.renderTargetBright=new Lo(b,S),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let Te=0;Te<this.nMips;Te++){const Se=new Lo(b,S);Se.texture.name="UnrealBloomPass.h"+Te,Se.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(Se);const Pe=new Lo(b,S);Pe.texture.name="UnrealBloomPass.v"+Te,Pe.texture.generateMipmaps=!1,this.renderTargetsVertical.push(Pe),b=Math.round(b/2),S=Math.round(S/2)}void 0===bf&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");const B=bf;this.highPassUniforms=Nf.clone(B.uniforms),this.highPassUniforms.luminosityThreshold.value=f,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new ec({uniforms:this.highPassUniforms,vertexShader:B.vertexShader,fragmentShader:B.fragmentShader,defines:{}}),this.separableBlurMaterials=[];const ne=[3,5,7,9,11];b=Math.round(this.resolution.x/2),S=Math.round(this.resolution.y/2);for(let Te=0;Te<this.nMips;Te++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(ne[Te])),this.separableBlurMaterials[Te].uniforms.texSize.value=new Di(b,S),b=Math.round(b/2),S=Math.round(S/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=c,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0,this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new Ut(1,1,1),new Ut(1,1,1),new Ut(1,1,1),new Ut(1,1,1),new Ut(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===__&&console.error("THREE.UnrealBloomPass relies on CopyShader");const ge=__;this.copyUniforms=Nf.clone(ge.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new ec({uniforms:this.copyUniforms,vertexShader:ge.vertexShader,fragmentShader:ge.fragmentShader,blending:P,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new wr,this.oldClearAlpha=1,this.basic=new Ou,this.fsQuad=new Sv(null)}dispose(){for(let o=0;o<this.renderTargetsHorizontal.length;o++)this.renderTargetsHorizontal[o].dispose();for(let o=0;o<this.renderTargetsVertical.length;o++)this.renderTargetsVertical[o].dispose();this.renderTargetBright.dispose();for(let o=0;o<this.separableBlurMaterials.length;o++)this.separableBlurMaterials[o].dispose();this.compositeMaterial.dispose(),this.materialCopy.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(o,c){let h=Math.round(o/2),f=Math.round(c/2);this.renderTargetBright.setSize(h,f);for(let b=0;b<this.nMips;b++)this.renderTargetsHorizontal[b].setSize(h,f),this.renderTargetsVertical[b].setSize(h,f),this.separableBlurMaterials[b].uniforms.texSize.value=new Di(h,f),h=Math.round(h/2),f=Math.round(f/2)}render(o,c,h,f,b){o.getClearColor(this._oldClearColor),this.oldClearAlpha=o.getClearAlpha();const S=o.autoClear;o.autoClear=!1,o.setClearColor(this.clearColor,0),b&&o.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=h.texture,o.setRenderTarget(null),o.clear(),this.fsQuad.render(o)),this.highPassUniforms.tDiffuse.value=h.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,o.setRenderTarget(this.renderTargetBright),o.clear(),this.fsQuad.render(o);let B=this.renderTargetBright;for(let ne=0;ne<this.nMips;ne++)this.fsQuad.material=this.separableBlurMaterials[ne],this.separableBlurMaterials[ne].uniforms.colorTexture.value=B.texture,this.separableBlurMaterials[ne].uniforms.direction.value=wl.BlurDirectionX,o.setRenderTarget(this.renderTargetsHorizontal[ne]),o.clear(),this.fsQuad.render(o),this.separableBlurMaterials[ne].uniforms.colorTexture.value=this.renderTargetsHorizontal[ne].texture,this.separableBlurMaterials[ne].uniforms.direction.value=wl.BlurDirectionY,o.setRenderTarget(this.renderTargetsVertical[ne]),o.clear(),this.fsQuad.render(o),B=this.renderTargetsVertical[ne];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,o.setRenderTarget(this.renderTargetsHorizontal[0]),o.clear(),this.fsQuad.render(o),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,b&&o.state.buffers.stencil.setTest(!0),this.renderToScreen?(o.setRenderTarget(null),this.fsQuad.render(o)):(o.setRenderTarget(h),this.fsQuad.render(o)),o.setClearColor(this._oldClearColor,this.oldClearAlpha),o.autoClear=S}getSeperableBlurMaterial(o){return new ec({defines:{KERNEL_RADIUS:o,SIGMA:o},uniforms:{colorTexture:{value:null},texSize:{value:new Di(.5,.5)},direction:{value:new Di(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat fSigma = float(SIGMA);\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(o){return new ec({defines:{NUM_MIPS:o},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}wl.BlurDirectionX=new Di(1,0),wl.BlurDirectionY=new Di(0,1);class wT{constructor(){this.id=0,this.object=null,this.z=0,this.renderOrder=0}}class sM{constructor(){this.id=0,this.v1=new v_,this.v2=new v_,this.v3=new v_,this.normalModel=new Ut,this.vertexNormalsModel=[new Ut,new Ut,new Ut],this.vertexNormalsLength=0,this.color=new wr,this.material=null,this.uvs=[new Di,new Di,new Di],this.z=0,this.renderOrder=0}}class v_{constructor(){this.position=new Ut,this.positionWorld=new Ut,this.positionScreen=new js,this.visible=!0}copy(o){this.positionWorld.copy(o.positionWorld),this.positionScreen.copy(o.positionScreen)}}class oM{constructor(){this.id=0,this.v1=new v_,this.v2=new v_,this.vertexColors=[new wr,new wr],this.material=null,this.z=0,this.renderOrder=0}}class aM{constructor(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new Di,this.material=null,this.renderOrder=0}}class MT{constructor(){let o,c,f,b,B,ne,ge,Te,Pe,qe,Fe,h=0,S=0,ae=0,Se=0,Ne=0;const at={objects:[],lights:[],elements:[]},_t=new Ut,ut=new js,ht=new du(new Ut(-1,-1,-1),new Ut(1,1,1)),Rt=new du,Xt=new Array(3),xn=new so,bt=new so,en=new so,bn=new wh,ui=[],Pi=[],hi=[],Vn=[],Mi=[],Xi=new function Oi(){const Li=[],Mr=[],vi=[];let Ji=null;const di=new Zl;function bi(Dt){const Hi=Dt.positionWorld,rr=Dt.positionScreen;Hi.copy(Dt.position).applyMatrix4(Fe),rr.copy(Hi).applyMatrix4(bt);const Lr=1/rr.w;rr.x*=Lr,rr.y*=Lr,rr.z*=Lr,Dt.visible=rr.x>=-1&&rr.x<=1&&rr.y>=-1&&rr.y<=1&&rr.z>=-1&&rr.z<=1}function vr(Dt,Kn,Hi){return!0===Dt.visible||!0===Kn.visible||!0===Hi.visible||(Xt[0]=Dt.positionScreen,Xt[1]=Kn.positionScreen,Xt[2]=Hi.positionScreen,ht.intersectsBox(Rt.setFromPoints(Xt)))}function Ys(Dt,Kn,Hi){return(Hi.positionScreen.x-Dt.positionScreen.x)*(Kn.positionScreen.y-Dt.positionScreen.y)-(Hi.positionScreen.y-Dt.positionScreen.y)*(Kn.positionScreen.x-Dt.positionScreen.x)<0}return{setObject:function ri(Dt){Ji=Dt,di.getNormalMatrix(Ji.matrixWorld),Li.length=0,Mr.length=0,vi.length=0},projectVertex:bi,checkTriangleVisibility:vr,checkBackfaceCulling:Ys,pushVertex:function or(Dt,Kn,Hi){f=function ur(){if(b===S){const Li=new v_;return Pi.push(Li),S++,b++,Li}return Pi[b++]}(),f.position.set(Dt,Kn,Hi),bi(f)},pushNormal:function ji(Dt,Kn,Hi){Li.push(Dt,Kn,Hi)},pushColor:function ps(Dt,Kn,Hi){Mr.push(Dt,Kn,Hi)},pushUv:function ms(Dt,Kn){vi.push(Dt,Kn)},pushLine:function Ro(Dt,Kn){const Hi=Pi[Dt],rr=Pi[Kn];Hi.positionScreen.copy(Hi.position).applyMatrix4(en),rr.positionScreen.copy(rr.position).applyMatrix4(en),!0===function no(Li,Mr){let vi=0,Ji=1;const di=Li.z+Li.w,ri=Mr.z+Mr.w,bi=-Li.z+Li.w,or=-Mr.z+Mr.w;return di>=0&&ri>=0&&bi>=0&&or>=0||!(di<0&&ri<0||bi<0&&or<0)&&(di<0?vi=Math.max(vi,di/(di-ri)):ri<0&&(Ji=Math.min(Ji,di/(di-ri))),bi<0?vi=Math.max(vi,bi/(bi-or)):or<0&&(Ji=Math.min(Ji,bi/(bi-or))),!(Ji<vi||(Li.lerp(Mr,vi),Mr.lerp(Li,1-Ji),0)))}(Hi.positionScreen,rr.positionScreen)&&(Hi.positionScreen.multiplyScalar(1/Hi.positionScreen.w),rr.positionScreen.multiplyScalar(1/rr.positionScreen.w),ge=function As(){if(Te===Se){const Li=new oM;return Vn.push(Li),Se++,Te++,Li}return Vn[Te++]}(),ge.id=Ji.id,ge.v1.copy(Hi),ge.v2.copy(rr),ge.z=Math.max(Hi.positionScreen.z,rr.positionScreen.z),ge.renderOrder=Ji.renderOrder,ge.material=Ji.material,Ji.material.vertexColors&&(ge.vertexColors[0].fromArray(Mr,3*Dt),ge.vertexColors[1].fromArray(Mr,3*Kn)),at.elements.push(ge))},pushTriangle:function Yt(Dt,Kn,Hi,rr){const Lr=Pi[Dt],Us=Pi[Kn],Cn=Pi[Hi];if(!1!==vr(Lr,Us,Cn)&&(rr.side===X||!0===Ys(Lr,Us,Cn))){B=function ai(){if(ne===ae){const Li=new sM;return hi.push(Li),ae++,ne++,Li}return hi[ne++]}(),B.id=Ji.id,B.v1.copy(Lr),B.v2.copy(Us),B.v3.copy(Cn),B.z=(Lr.positionScreen.z+Us.positionScreen.z+Cn.positionScreen.z)/3,B.renderOrder=Ji.renderOrder,_t.subVectors(Cn.position,Us.position),ut.subVectors(Lr.position,Us.position),_t.cross(ut),B.normalModel.copy(_t),B.normalModel.applyMatrix3(di).normalize();for(let Xn=0;Xn<3;Xn++){const rs=B.vertexNormalsModel[Xn];rs.fromArray(Li,3*arguments[Xn]),rs.applyMatrix3(di).normalize(),B.uvs[Xn].fromArray(vi,2*arguments[Xn])}B.vertexNormalsLength=3,B.material=rr,rr.vertexColors&&B.color.fromArray(Mr,3*Dt),at.elements.push(B)}}}};function Ai(Li){if(!1===Li.visible)return;if(Li.isLight)at.lights.push(Li);else if(Li.isMesh||Li.isLine||Li.isPoints){if(!1===Li.material.visible||!0===Li.frustumCulled&&!1===bn.intersectsObject(Li))return;Hn(Li)}else if(Li.isSprite){if(!1===Li.material.visible||!0===Li.frustumCulled&&!1===bn.intersectsSprite(Li))return;Hn(Li)}const Mr=Li.children;for(let vi=0,Ji=Mr.length;vi<Ji;vi++)Ai(Mr[vi])}function Hn(Li){o=function _r(){if(c===h){const Li=new wT;return ui.push(Li),h++,c++,Li}return ui[c++]}(),o.id=Li.id,o.object=Li,_t.setFromMatrixPosition(Li.matrixWorld),_t.applyMatrix4(bt),o.z=_t.z,o.renderOrder=Li.renderOrder,at.objects.push(o)}function Zn(Li,Mr,vi){const Ji=1/Li.w;Li.z*=Ji,Li.z>=-1&&Li.z<=1&&(Pe=function co(){if(qe===Ne){const Li=new aM;return Mi.push(Li),Ne++,qe++,Li}return Mi[qe++]}(),Pe.id=Mr.id,Pe.x=Li.x*Ji,Pe.y=Li.y*Ji,Pe.z=Li.z,Pe.renderOrder=Mr.renderOrder,Pe.object=Mr,Pe.rotation=Mr.rotation,Pe.scale.x=Mr.scale.x*Math.abs(Pe.x-(Li.x+vi.projectionMatrix.elements[0])/(Li.w+vi.projectionMatrix.elements[12])),Pe.scale.y=Mr.scale.y*Math.abs(Pe.y-(Li.y+vi.projectionMatrix.elements[5])/(Li.w+vi.projectionMatrix.elements[13])),Pe.material=Mr.material,at.elements.push(Pe))}function Jn(Li,Mr){return Li.renderOrder!==Mr.renderOrder?Li.renderOrder-Mr.renderOrder:Li.z!==Mr.z?Mr.z-Li.z:Li.id!==Mr.id?Li.id-Mr.id:0}this.projectScene=function(Li,Mr,vi,Ji){ne=0,Te=0,qe=0,at.elements.length=0,!0===Li.matrixWorldAutoUpdate&&Li.updateMatrixWorld(),null===Mr.parent&&!0===Mr.matrixWorldAutoUpdate&&Mr.updateMatrixWorld(),xn.copy(Mr.matrixWorldInverse),bt.multiplyMatrices(Mr.projectionMatrix,xn),bn.setFromProjectionMatrix(bt),c=0,at.objects.length=0,at.lights.length=0,Ai(Li),!0===vi&&at.objects.sort(Jn);const di=at.objects;for(let ri=0,bi=di.length;ri<bi;ri++){const or=di[ri].object,ji=or.geometry;if(Xi.setObject(or),Fe=or.matrixWorld,b=0,or.isMesh){let ps=or.material;const ms=Array.isArray(ps),vr=ji.attributes,Ys=ji.groups;if(void 0===vr.position)continue;const Ro=vr.position.array;for(let Yt=0,Dt=Ro.length;Yt<Dt;Yt+=3){let Kn=Ro[Yt],Hi=Ro[Yt+1],rr=Ro[Yt+2];const Lr=ji.morphAttributes.position;if(void 0!==Lr){const Us=ji.morphTargetsRelative,Cn=or.morphTargetInfluences;for(let Xn=0,rs=Lr.length;Xn<rs;Xn++){const ls=Cn[Xn];if(0===ls)continue;const ss=Lr[Xn];Us?(Kn+=ss.getX(Yt/3)*ls,Hi+=ss.getY(Yt/3)*ls,rr+=ss.getZ(Yt/3)*ls):(Kn+=(ss.getX(Yt/3)-Ro[Yt])*ls,Hi+=(ss.getY(Yt/3)-Ro[Yt+1])*ls,rr+=(ss.getZ(Yt/3)-Ro[Yt+2])*ls)}}Xi.pushVertex(Kn,Hi,rr)}if(void 0!==vr.normal){const Yt=vr.normal.array;for(let Dt=0,Kn=Yt.length;Dt<Kn;Dt+=3)Xi.pushNormal(Yt[Dt],Yt[Dt+1],Yt[Dt+2])}if(void 0!==vr.color){const Yt=vr.color.array;for(let Dt=0,Kn=Yt.length;Dt<Kn;Dt+=3)Xi.pushColor(Yt[Dt],Yt[Dt+1],Yt[Dt+2])}if(void 0!==vr.uv){const Yt=vr.uv.array;for(let Dt=0,Kn=Yt.length;Dt<Kn;Dt+=2)Xi.pushUv(Yt[Dt],Yt[Dt+1])}if(null!==ji.index){const Yt=ji.index.array;if(Ys.length>0)for(let Dt=0;Dt<Ys.length;Dt++){const Kn=Ys[Dt];if(ps=!0===ms?or.material[Kn.materialIndex]:or.material,void 0!==ps)for(let Hi=Kn.start,rr=Kn.start+Kn.count;Hi<rr;Hi+=3)Xi.pushTriangle(Yt[Hi],Yt[Hi+1],Yt[Hi+2],ps)}else for(let Dt=0,Kn=Yt.length;Dt<Kn;Dt+=3)Xi.pushTriangle(Yt[Dt],Yt[Dt+1],Yt[Dt+2],ps)}else if(Ys.length>0)for(let Yt=0;Yt<Ys.length;Yt++){const Dt=Ys[Yt];if(ps=!0===ms?or.material[Dt.materialIndex]:or.material,void 0!==ps)for(let Kn=Dt.start,Hi=Dt.start+Dt.count;Kn<Hi;Kn+=3)Xi.pushTriangle(Kn,Kn+1,Kn+2,ps)}else for(let Yt=0,Dt=Ro.length/3;Yt<Dt;Yt+=3)Xi.pushTriangle(Yt,Yt+1,Yt+2,ps)}else if(or.isLine){en.multiplyMatrices(bt,Fe);const ps=ji.attributes;if(void 0!==ps.position){const ms=ps.position.array;for(let vr=0,Ys=ms.length;vr<Ys;vr+=3)Xi.pushVertex(ms[vr],ms[vr+1],ms[vr+2]);if(void 0!==ps.color){const vr=ps.color.array;for(let Ys=0,Ro=vr.length;Ys<Ro;Ys+=3)Xi.pushColor(vr[Ys],vr[Ys+1],vr[Ys+2])}if(null!==ji.index){const vr=ji.index.array;for(let Ys=0,Ro=vr.length;Ys<Ro;Ys+=2)Xi.pushLine(vr[Ys],vr[Ys+1])}else{const vr=or.isLineSegments?2:1;for(let Ys=0,Ro=ms.length/3-1;Ys<Ro;Ys+=vr)Xi.pushLine(Ys,Ys+1)}}}else if(or.isPoints){en.multiplyMatrices(bt,Fe);const ps=ji.attributes;if(void 0!==ps.position){const ms=ps.position.array;for(let vr=0,Ys=ms.length;vr<Ys;vr+=3)ut.set(ms[vr],ms[vr+1],ms[vr+2],1),ut.applyMatrix4(en),Zn(ut,or,Mr)}}else or.isSprite&&(or.modelViewMatrix.multiplyMatrices(Mr.matrixWorldInverse,or.matrixWorld),ut.set(Fe.elements[12],Fe.elements[13],Fe.elements[14],1),ut.applyMatrix4(bt),Zn(ut,or,Mr))}return!0===Ji&&at.elements.sort(Jn),at}}}class CT{constructor(){let o,c,h,f,b,S,B,ne,ae,ge,Te,Ne,Fe,Se=0,Pe=null,qe=1;const at=this,_t=new h_,ut=new h_,ht=new wr,Rt=new wr,Xt=new wr,xn=new wr,bt=new wr,en=new wr,bn=new Ut,ui=new Ut,Pi=new Ut,hi=new Zl,Vn=new so,Mi=new so,Oi=[],Xi=new MT,Ai=document.createElementNS("http://www.w3.org/2000/svg","svg");function Hn(){for(Se=0;Ai.childNodes.length>0;)Ai.removeChild(Ai.childNodes[0])}function Zn(vi){return null!==Pe?vi.toFixed(Pe):vi}function ai(vi,Ji,di){let ri=Ji.scale.x*S,bi=Ji.scale.y*B;di.isPointsMaterial&&(ri*=di.size,bi*=di.size);const or="M"+Zn(vi.x-.5*ri)+","+Zn(vi.y-.5*bi)+"h"+Zn(ri)+"v"+Zn(bi)+"h"+Zn(-ri)+"z";let ji="";(di.isSpriteMaterial||di.isPointsMaterial)&&(ji="fill:"+di.color.getStyle()+";fill-opacity:"+di.opacity),no(ji,or)}function As(vi,Ji,di){const ri="M"+Zn(vi.positionScreen.x)+","+Zn(vi.positionScreen.y)+"L"+Zn(Ji.positionScreen.x)+","+Zn(Ji.positionScreen.y);if(di.isLineBasicMaterial){let bi="fill:none;stroke:"+di.color.getStyle()+";stroke-opacity:"+di.opacity+";stroke-width:"+di.linewidth+";stroke-linecap:"+di.linecap;di.isLineDashedMaterial&&(bi=bi+";stroke-dasharray:"+di.dashSize+","+di.gapSize),no(bi,ri)}}function co(vi,Ji,di,ri,bi){at.info.render.vertices+=3,at.info.render.faces++;const or="M"+Zn(vi.positionScreen.x)+","+Zn(vi.positionScreen.y)+"L"+Zn(Ji.positionScreen.x)+","+Zn(Ji.positionScreen.y)+"L"+Zn(di.positionScreen.x)+","+Zn(di.positionScreen.y)+"z";let ji="";bi.isMeshBasicMaterial?(ht.copy(bi.color),bi.vertexColors&&ht.multiply(ri.color)):bi.isMeshLambertMaterial||bi.isMeshPhongMaterial||bi.isMeshStandardMaterial?(Rt.copy(bi.color),bi.vertexColors&&Rt.multiply(ri.color),ht.copy(Xt),ui.copy(vi.positionWorld).add(Ji.positionWorld).add(di.positionWorld).divideScalar(3),function ur(vi,Ji,di,ri){for(let bi=0,or=vi.length;bi<or;bi++){const ji=vi[bi],ps=ji.color;if(ji.isDirectionalLight){const ms=bn.setFromMatrixPosition(ji.matrixWorld).normalize();let vr=di.dot(ms);if(vr<=0)continue;vr*=ji.intensity,ri.r+=ps.r*vr,ri.g+=ps.g*vr,ri.b+=ps.b*vr}else if(ji.isPointLight){const ms=bn.setFromMatrixPosition(ji.matrixWorld);let vr=di.dot(bn.subVectors(ms,Ji).normalize());if(vr<=0||(vr*=0==ji.distance?1:1-Math.min(Ji.distanceTo(ms)/ji.distance,1),0==vr))continue;vr*=ji.intensity,ri.r+=ps.r*vr,ri.g+=ps.g*vr,ri.b+=ps.b*vr}}}(h,ui,ri.normalModel,ht),ht.multiply(Rt).add(bi.emissive)):bi.isMeshNormalMaterial&&(Pi.copy(ri.normalModel).applyMatrix3(hi).normalize(),ht.setRGB(Pi.x,Pi.y,Pi.z).multiplyScalar(.5).addScalar(.5)),ji=bi.wireframe?"fill:none;stroke:"+ht.getStyle()+";stroke-opacity:"+bi.opacity+";stroke-width:"+bi.wireframeLinewidth+";stroke-linecap:"+bi.wireframeLinecap+";stroke-linejoin:"+bi.wireframeLinejoin:"fill:"+ht.getStyle()+";fill-opacity:"+bi.opacity,no(ji,or)}function Jn(vi,Ji,di){let ri=Ji.x-vi.x,bi=Ji.y-vi.y;const or=ri*ri+bi*bi;if(0===or)return;const ji=di/Math.sqrt(or);ri*=ji,bi*=ji,Ji.x+=ri,Ji.y+=bi,vi.x-=ri,vi.y-=bi}function no(vi,Ji){Fe===vi?Ne+=Ji:(Li(),Fe=vi,Ne=Ji)}function Li(){Ne&&(Te=function Mr(vi){return null==Oi[vi]&&(Oi[vi]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==qe&&Oi[vi].setAttribute("shape-rendering","crispEdges")),Oi[vi]}(Se++),Te.setAttribute("d",Ne),Te.setAttribute("style",Fe),Ai.appendChild(Te)),Ne="",Fe=""}this.domElement=Ai,this.autoClear=!0,this.sortObjects=!0,this.sortElements=!0,this.overdraw=.5,this.info={render:{vertices:0,faces:0}},this.setQuality=function(vi){switch(vi){case"high":qe=1;break;case"low":qe=0}},this.setClearColor=function(vi){en.set(vi)},this.setPixelRatio=function(){},this.setSize=function(vi,Ji){f=vi,b=Ji,S=f/2,B=b/2,Ai.setAttribute("viewBox",-S+" "+-B+" "+f+" "+b),Ai.setAttribute("width",f),Ai.setAttribute("height",b),_t.min.set(-S,-B),_t.max.set(S,B)},this.getSize=function(){return{width:f,height:b}},this.setPrecision=function(vi){Pe=vi},this.clear=function(){Hn(),Ai.style.backgroundColor=en.getStyle()},this.render=function(vi,Ji){if(!(Ji instanceof pm))return void console.error("THREE.SVGRenderer.render: camera is not an instance of Camera.");const di=vi.background;di&&di.isColor?(Hn(),Ai.style.backgroundColor=di.getStyle()):!0===this.autoClear&&this.clear(),at.info.render.vertices=0,at.info.render.faces=0,Vn.copy(Ji.matrixWorldInverse),Mi.multiplyMatrices(Ji.projectionMatrix,Vn),o=Xi.projectScene(vi,Ji,this.sortObjects,this.sortElements),c=o.elements,h=o.lights,hi.getNormalMatrix(Ji.matrixWorldInverse),function _r(vi){Xt.setRGB(0,0,0),xn.setRGB(0,0,0),bt.setRGB(0,0,0);for(let Ji=0,di=vi.length;Ji<di;Ji++){const ri=vi[Ji],bi=ri.color;ri.isAmbientLight?(Xt.r+=bi.r,Xt.g+=bi.g,Xt.b+=bi.b):ri.isDirectionalLight?(xn.r+=bi.r,xn.g+=bi.g,xn.b+=bi.b):ri.isPointLight&&(bt.r+=bi.r,bt.g+=bi.g,bt.b+=bi.b)}}(h),Ne="",Fe="";for(let ri=0,bi=c.length;ri<bi;ri++){const or=c[ri],ji=or.material;if(void 0!==ji&&0!==ji.opacity)if(ut.makeEmpty(),or instanceof aM)ne=or,ne.x*=S,ne.y*=-B,ai(ne,or,ji);else if(or instanceof oM)ne=or.v1,ae=or.v2,ne.positionScreen.x*=S,ne.positionScreen.y*=-B,ae.positionScreen.x*=S,ae.positionScreen.y*=-B,ut.setFromPoints([ne.positionScreen,ae.positionScreen]),!0===_t.intersectsBox(ut)&&As(ne,ae,ji);else if(or instanceof sM){if(ne=or.v1,ae=or.v2,ge=or.v3,ne.positionScreen.z<-1||ne.positionScreen.z>1||ae.positionScreen.z<-1||ae.positionScreen.z>1||ge.positionScreen.z<-1||ge.positionScreen.z>1)continue;ne.positionScreen.x*=S,ne.positionScreen.y*=-B,ae.positionScreen.x*=S,ae.positionScreen.y*=-B,ge.positionScreen.x*=S,ge.positionScreen.y*=-B,this.overdraw>0&&(Jn(ne.positionScreen,ae.positionScreen,this.overdraw),Jn(ae.positionScreen,ge.positionScreen,this.overdraw),Jn(ge.positionScreen,ne.positionScreen,this.overdraw)),ut.setFromPoints([ne.positionScreen,ae.positionScreen,ge.positionScreen]),!0===_t.intersectsBox(ut)&&co(ne,ae,ge,or,ji)}}Li(),vi.traverseVisible(function(ri){if(ri.isSVGObject){if(bn.setFromMatrixPosition(ri.matrixWorld),bn.applyMatrix4(Mi),bn.z<-1||bn.z>1)return;const ji=ri.node;ji.setAttribute("transform","translate("+bn.x*S+","+-bn.y*B+")"),Ai.appendChild(ji)}})}}}let ST=xx;typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:M}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=M)},3414:($r,At,Ce)=>{"use strict";Ce.r(At),Ce.d(At,{TDrawSelector:()=>F,TDrawVariable:()=>_,TSelector:()=>X,clTBranchFunc:()=>ue,kClonesNode:()=>Ie,kSTLNode:()=>He,treeDraw:()=>Me,treeHierarchy:()=>I,treeIOTest:()=>fe,treeProcess:()=>J});var ze=Ce(5835),M=Ce(9542),L=Ce(8538),ye=Ce(6976);const Be=0,je=1,Ze=2,Ie=3,He=4,Oe=31,ce=41,Y=(0,M.BIT)(22),K="TBranchElement",ue="TBranchFunc";class X{constructor(){this._branches=[],this._names=[],this._directs=[],this._break=0,this.tgtobj={}}addBranch(z,le,D){return le||(le=(0,M.isStr)(z)?z:`br${this._branches.length}`),this._branches.push(z),this._names.push(le),this._directs.push(D),this._branches.length-1}numBranches(){return this._branches.length}getBranch(z){return this._branches[z]}indexOfBranch(z){return this._branches.indexOf(z)}nameOfBranch(z){return this._names[z]}ShowProgress(){}Abort(){this._break=-1111}Begin(){}Process(){}Terminate(){}}function Z(U,z){if(!(0,M.isObject)(U))return 0;let le=(0,M.isArrayProto)(Object.prototype.toString.apply(U));if(!z||1!=le)return le;let D,oe=!0;for(let _e=0;_e<U.length;++_e){let Ee=typeof U[_e];if(D||(D=Ee),Ee!==D){oe=!1;break}if((0,M.isObject)(Ee)&&Z(U[_e])){oe=!1;break}}return oe?2:1}class O{constructor(z,le,D){this.object=z,this.value=0,this.arr=[],this.indx=[],this.cnt=-1,this.tgtobj=D,this.select=(0,M.isObject)(le)?le:[]}next(){let z,le,D=this.cnt;if(D>=0){if(++this.fastindx<this.fastlimit)return this.value=this.fastarr[this.fastindx],!0;for(;--D>=0&&!(void 0===this.select[D]&&++this.indx[D]<this.arr[D].length););if(D<0)return!1}for(;;){if(z=D<0?this.object:this.arr[D][this.indx[D]],le=z?typeof z:"any","object"===le&&(void 0!==z._typename?(0,M.isRootCollection)(z)?(z=z.arr,le="array"):le="any":le=Number.isInteger(z.length)&&Z(z)>0?"array":"any"),"$self$"==this.select[D+1])return this.value=z,this.fastindx=this.fastlimit=0,this.cnt=D+1,!0;if("any"==le&&(0,M.isStr)(this.select[D+1]))this.arr[++D]=z,this.indx[D]=this.select[D];else{if("array"!==le||!(z.length>0||"$size$"===this.select[D+1]))return!(D<0||(this.value=z,void 0===this.select[D]?(this.fastarr=this.arr[D],this.fastindx=this.indx[D],this.fastlimit=this.fastarr.length):this.fastindx=this.fastlimit=0,this.cnt=D,0));switch(this.arr[++D]=z,this.select[D]){case void 0:this.indx[D]=0;break;case"$last$":this.indx[D]=z.length-1;break;case"$size$":return this.value=z.length,this.fastindx=this.fastlimit=0,this.cnt=D,!0;default:Number.isInteger(this.select[D])?(this.indx[D]=this.select[D],this.indx[D]<0&&(this.indx[D]=z.length-1)):(this.select[D].produce(this.tgtobj),this.indx[D]=Math.round(this.select[D].get(0)))}}}}reset(){this.arr=[],this.indx=[],delete this.fastarr,this.cnt=-1,this.value=0}}function P(U,z,le=!1,D=!1){if(!U||U._typename!==K)return"";if(U.fType===Be&&-2===U.fID&&-1===U.fStreamerType)return U.fClassName;if(le&&U.fClonesName&&(U.fType===Ie||U.fType===He))return U.fClonesName;let oe=R(U,z.$file);if(U.fType===je&&oe&&"BASE"===oe.fTypeName)return oe.fName;if(U.fType===Ze)return!oe||oe.fType!==L.C5&&oe.fType!==L.P?M.clTObject:oe.fTypeName;if(U.fType===Be&&oe&&D){if(oe.fType===L.C5||oe.fType===L.P)return oe.fTypeName;if(oe.fType===L.uD)return oe.fTypeName.slice(0,oe.fTypeName.length-1)}return""}function p(U,z,le,D=!1){let oe=!1,_e=z,Ee=null;if(!le){oe=!0,le=U.fBranches;let Ve=_e.indexOf("[");Ve>0&&(_e=_e.slice(0,Ve))}if(!le||0===le.arr.length)return null;for(let Ve=0;Ve<le.arr.length;++Ve){let Qe=le.arr[Ve].fName;if("]"==Qe[Qe.length-1]&&(Qe=Qe.slice(0,Qe.indexOf("["))),0!==_e.indexOf(Qe)&&Qe.indexOf("<")>0){let Tt=Qe.indexOf("<"),Bt=Qe.lastIndexOf(">");Qe=Qe.slice(0,Tt)+Qe.slice(Bt+1)}if(Qe===_e){Ee={branch:le.arr[Ve],rest:""};break}if(0!==_e.indexOf(Qe))continue;let et=Qe.length;if("."===Qe[et-1]&&et--,"."===_e[et]){Ee=p(U,_e,le.arr[Ve].fBranches),Ee||(Ee=p(U,_e.slice(et+1),le.arr[Ve].fBranches)),Ee||(Ee={branch:le.arr[Ve],rest:_e.slice(et)});break}}if(oe&&!D&&!Ee&&0==_e.indexOf("br_")){let Ve=3;for(;Ve<_e.length&&_e[Ve]>="0"&&_e[Ve]<="9";)++Ve;let Qe=Ve>3?function x(U,z){if(!Number.isInteger(z))return;let le,D=0;return function oe(_e){_e&&_e.fBranches&&_e.fBranches.arr.forEach(Ee=>{D++===z&&(le=Ee),le||oe(Ee)})}(U),le}(U,parseInt(_e.slice(3,Ve))):null;Qe&&(Ee={branch:Qe,rest:_e.slice(Ve)})}return!oe||!Ee||z.length>_e.length&&(Ee.rest+=z.slice(_e.length)),Ee}function w(U,z){let le=p(U,z,U.fBranches,!0);return!le||le.rest?null:le.branch}class _{constructor(z){this.globals=z,this.code="",this.brindex=[],this.branches=[],this.brarray=[],this.func=null,this.kind=void 0,this.buf=[]}parse(z,le,D,oe,_e){const Ee=Bt=>Bt>="A"&&Bt<="Z"||Bt>="a"&&Bt<="z"||"_"===Bt,Ve=Bt=>!!(Ee(Bt)||Bt>="0"&&Bt<="9");D||(D=""),this.code=(oe?.fName??"")+D;let Qe=0,et=0,Tt=null;for(;Qe<D.length||oe;){let Bt=[];if(oe)Tt=oe,oe=void 0;else{for(et=Qe;et<D.length&&(Ve(D[et])||"."===D[et]);)et++;if("$"==D[et]){let ct="";switch(D.slice(Qe,et)){case"LocalEntry":case"Entry":ct="arg.$globals.entry";break;case"Entries":ct="arg.$globals.entries"}if(ct){D=D.slice(0,Qe)+ct+D.slice(et+1),Qe+=ct.length;continue}}if(Tt=p(z,D.slice(Qe,et)),!Tt){Qe=et+1;continue}Tt.branch&&void 0!==Tt.rest&&(et-=Tt.rest.length,_e=void 0,Tt=Tt.branch),et>=D.length-1&&"."===D[D.length-1]&&(Bt.push("$self$"),et=D.length)}for(;et<D.length;){if("@"===D[et]&&"@size"==D.slice(et,et+5)&&0==Bt.length){et+=5,_e=!0;break}if("."===D[et]){let ft=++et;if("@"===D[ft]&&"@size"===D.slice(ft,ft+5)){Bt.push("$size$"),et+=5;break}if(!Ee(D[ft])){Bt.push("$self$");break}for(;et<D.length&&Ve(D[et]);)et++;if("("==D[et]){et=ft-1;break}if(0===Bt.length&&Tt)if(Tt.fType===Ie||Tt.fType===He)Bt.push(void 0);else{let zt=P(Tt,z,!1,!0);zt&&(0,M.isRootCollection)(null,zt)&&Bt.push(void 0)}Bt.push(D.slice(ft,et));continue}if("["!==D[et])break;if("]"==D[et+1]){Bt.push(void 0),et+=2;continue}let ct=et++,We=0;for(;et<D.length&&("]"!=D[et]||We>0);)"["==D[et]?We++:"]"==D[et]&&We--,et++;let Ke=D.slice(ct+1,et);switch(Ke){case"":case"$all$":Bt.push(void 0);break;case"$last$":Bt.push("$last$");break;case"$size$":Bt.push("$size$");break;case"$first$":Bt.push(0);break;default:if(Number.isInteger(parseInt(Ke)))Bt.push(parseInt(Ke));else{let ft=new _(this.globals);if(!ft.parse(z,le,Ke))return!1;Bt.push(ft)}}et++}0===Bt.length?Bt=void 0:1===Bt.length&&void 0===Bt[0]&&(Bt=!0);let ve=le.indexOfBranch(Tt);if(ve<0&&(ve=le.addBranch(Tt,void 0,_e)),_e=void 0,this.brindex.push(ve),this.branches.push(le.nameOfBranch(ve)),this.brarray.push(Bt),0===Qe&&et===D.length&&1===this.branches.length)return this.direct_branch=!0,!0;let Je="arg.var"+(this.branches.length-1);D=D.slice(0,Qe)+Je+D.slice(et),Qe+=Je.length}return D=D.replace(/TMath::Exp\(/g,"Math.exp(").replace(/TMath::Abs\(/g,"Math.abs(").replace(/TMath::Prob\(/g,"arg.$math.Prob(").replace(/TMath::Gaus\(/g,"arg.$math.Gaus("),this.func=new Function("arg",`return (${D})`),!0}is_dummy(){return 0===this.branches.length&&!this.func}produce(z){if(this.length=1,this.isarray=!1,this.is_dummy())return this.value=1,void(this.kind="number");let le={$globals:this.globals,$math:ye},D=-1,oe=[];for(let _e=0;_e<this.branches.length;++_e){let Ee="var"+_e;if(le[Ee]=z[this.branches[_e]],void 0===this.brarray[_e]&&(this.brarray[_e]=Z(le[Ee])>0||(0,M.isRootCollection)(le[Ee])),!1!==this.brarray[_e]){if(!0===this.brarray[_e]&&2===Z(le[Ee],!0))oe[_e]=le[Ee];else{let Ve=new O(le[Ee],this.brarray[_e],z);for(oe[_e]=[];Ve.next();)oe[_e].push(Ve.value)}(D<0||D<oe[_e].length)&&(D=oe[_e].length)}}if(D<0)return this.value=this.direct_branch?le.var0:this.func(le),void(this.kind||(this.kind=typeof this.value));if(0==D)return this.length=0,void(this.value=0);if(this.length=D,this.isarray=!0,this.direct_branch)this.value=oe[0];else{this.value=new Array(D);for(let _e=0;_e<D;++_e){for(let Ee=0;Ee<this.branches.length;++Ee)oe[Ee]&&(le["var"+Ee]=oe[Ee][_e]);this.value[_e]=this.func(le)}}this.kind||(this.kind=typeof this.value[0])}get(z){return this.isarray?this.value[z]:this.value}appendArray(z){this.buf=this.buf.concat(z[this.branches[0]])}}class F extends X{constructor(){super(),this.ndim=0,this.vars=[],this.cut=null,this.hist=null,this.histo_drawopt="",this.hist_name="$htemp",this.hist_title="Result of TTree::Draw",this.graph=!1,this.hist_args=[],this.arr_limit=1e3,this.htype="F",this.monitoring=0,this.globals={},this.last_progress=0,this.aver_diff=0}setCallback(z,le){this.result_callback=z,this.progress_callback=le}parseParameters(z,le,D){if(!D||!(0,M.isStr)(D))return"";let oe=D.lastIndexOf(";");for(;oe>=0;){let Ee,_e=D.slice(oe+1);oe=(D=D.slice(0,oe)).lastIndexOf(";");let Ve=_e.indexOf(":");Ve>0&&(Ee=_e.slice(Ve+1),_e=_e.slice(0,Ve));let Qe=parseInt(Ee);switch((!Ee||!Number.isInteger(Qe))&&(Qe=void 0),_e){case"num":case"entries":case"numentries":"all"===Ee?le.numentries=z.fEntries:"half"===Ee?le.numentries=Math.round(z.fEntries/2):void 0!==Qe&&(le.numentries=Qe);break;case"first":void 0!==Qe&&(le.firstentry=Qe);break;case"mon":case"monitor":le.monitoring=void 0!==Qe?Qe:5e3;break;case"player":le.player=!0;break;case"dump":le.dump=!0;break;case"maxseg":case"maxrange":Qe&&(z.$file.fMaxRanges=Qe);break;case"accum":Qe&&(this.arr_limit=Qe);break;case"htype":Ee&&1===Ee.length&&(this.htype=Ee.toUpperCase(),["C","S","I","F","L","D"].indexOf(this.htype)<0&&(this.htype="F"));break;case"hbins":this.hist_nbins=parseInt(Ee),!Number.isInteger(this.hist_nbins)||this.hist_nbins<=3?delete this.hist_nbins:this.want_hist=!0;break;case"drawopt":le.drawopt=Ee;break;case"graph":le.graph=Qe||!0}}if(oe=D.lastIndexOf(">>"),oe>=0){let _e=D.slice(oe+2).trim();if(D=D.slice(0,oe).trim(),oe=_e.indexOf("("),oe>0&&(this.hist_name=_e.slice(0,oe),_e=_e.slice(oe)),"dump"===_e)le.dump=!0;else if(0==_e.indexOf("Graph"))le.graph=!0;else if(oe<0)this.want_hist=!0,this.hist_name=_e;else if("("==_e[0]&&")"==_e[_e.length-1]){this.want_hist=!0,_e=_e.slice(1,_e.length-1).split(",");let Ee=!0;for(let Ve=0;Ve<_e.length;++Ve)_e[Ve]=Ve%3==0?parseInt(_e[Ve]):parseFloat(_e[Ve]),Number.isFinite(_e[Ve])||(Ee=!1);Ee&&(this.hist_args=_e)}}return le.dump&&(this.dump_values=!0,le.reallocate_objects=!0,void 0===le.numentries&&(le.numentries=10)),D}parseDrawExpression(z,le){let D=this.parseParameters(z,le,le.expr),oe="";this.hist_title=`drawing '${D}' from ${z.fName}`;let _e=0;le.cut?oe=le.cut:(_e=D.replace(/TMath::/g,"TMath__").lastIndexOf("::"),_e>0&&(oe=D.slice(_e+2).trim(),D=D.slice(0,_e).trim())),le.parse_expr=D,le.parse_cut=oe;let Ee=[],Ve=0,Qe=0,et=0;for(_e=0;_e<D.length;++_e)switch(D[_e]){case"(":Ve++;break;case")":Ve--;break;case"[":Qe++;break;case"]":Qe--;break;case":":if(":"==D[_e+1]){_e++;continue}!Ve&&!Qe&&_e>et&&Ee.push(D.slice(et,_e)),et=_e+1}if(!Ve&&!Qe&&_e>et&&Ee.push(D.slice(et,_e)),Ee.length<1||Ee.length>3)return!1;this.ndim=Ee.length;let Tt=!oe;for(let Bt=0;Bt<this.ndim;++Bt){if(this.vars[Bt]=new _(this.globals),!this.vars[Bt].parse(z,this,Ee[Bt]))return!1;this.vars[Bt].direct_branch||(Tt=!1)}return this.cut=new _(this.globals),!(oe&&!this.cut.parse(z,this,oe)||(this.numBranches()?(Tt&&(this.ProcessArrays=this.ProcessArraysFunc),this.monitoring=le.monitoring,3==this.ndim&&!this.want_hist&&!le.dump&&(le.graph=!0),this.graph=le.graph,this.histo_drawopt=void 0!==le.drawopt?le.drawopt:2===this.ndim?"col":"",0):(console.warn("no any branch is selected"),1)))}drawOnlyBranch(z,le,D,oe){return this.ndim=1,0==D.indexOf("dump")&&(D=";"+D),D=this.parseParameters(z,oe,D),this.monitoring=oe.monitoring,oe.dump&&(this.dump_values=!0,oe.reallocate_objects=!0),this.dump_values?(this.hist=[],this.leaf=oe.leaf,this.copy_fields=(oe.branch.fLeaves&&oe.branch.fLeaves.arr.length>1||oe.branch.fBranches&&oe.branch.fBranches.arr.length>0)&&!oe.leaf,this.addBranch(le,"br0",oe.direct_branch),this.Process=this.ProcessDump,!0):(this.vars[0]=new _(this.globals),!!this.vars[0].parse(z,this,D,le,oe.direct_branch)&&(this.hist_title=`drawing branch ${le.fName} ${D?" expr:"+D:""} from ${z.fName}`,this.cut=new _(this.globals),this.vars[0].direct_branch&&(this.ProcessArrays=this.ProcessArraysFunc),!0))}Begin(z){this.globals.entries=z.fEntries,this.monitoring&&(this.lasttm=(new Date).getTime())}ShowProgress(){}getBitsBins(z,le){le.nbins=le.max=z,le.fLabels=(0,M.create)(M.clTHashList);for(let D=0;D<z;++D){let oe=(0,M.create)(M.clTObjString);oe.fString=D.toString(),oe.fUniqueID=D+1,le.fLabels.Add(oe)}return le}getMinMaxBins(z,le){let D={min:0,max:0,nbins:le,k:1,fLabels:null,title:""};if(z>=this.ndim)return D;let oe=this.vars[z].buf;if(D.title=this.vars[z].code||"","object"===this.vars[z].kind){let _e,Ee=!0,Ve=8;for(let Qe=0;Qe<oe.length;++Qe)oe[Qe]&&(_e||(_e=oe[Qe]._typename),_e!==oe[Qe]._typename&&(Ee=!1),oe[Qe].fNbits&&(Ve=Math.max(Ve,oe[Qe].fNbits+1)));if(_e&&Ee&&"TBits"===_e&&0===z)return this.fill1DHistogram=this.fillTBitsHistogram,Ve%8&&(Ve=8+(65520&Ve)),"bits"===this.hist_name&&1==this.hist_args.length&&this.hist_args[0]&&(Ve=this.hist_args[0]),this.getBitsBins(Ve,D)}if("string"===this.vars[z].kind){D.lbls=[];for(let _e=0;_e<oe.length;++_e)D.lbls.indexOf(oe[_e])<0&&D.lbls.push(oe[_e]);D.lbls.sort(),D.max=D.nbins=D.lbls.length,D.fLabels=(0,M.create)(M.clTHashList);for(let _e=0;_e<D.lbls.length;++_e){let Ee=(0,M.create)(M.clTObjString);Ee.fString=D.lbls[_e],Ee.fUniqueID=_e+1,""===Ee.fString&&(Ee.fString="<empty>"),D.fLabels.Add(Ee)}}else{if(0===z&&"bits"===this.hist_name&&this.hist_args.length<=1)return this.fill1DHistogram=this.FillBitsHistogram,this.getBitsBins(this.hist_args[0]||32,D);if(3*z+2<this.hist_args.length)D.nbins=this.hist_args[3*z],D.min=this.hist_args[3*z+1],D.max=this.hist_args[3*z+2];else{if(D.min=Math.min.apply(null,oe),D.max=Math.max.apply(null,oe),this.hist_nbins&&(le=D.nbins=this.hist_nbins),D.isinteger=Math.round(D.min)===D.min&&Math.round(D.max)===D.max,D.isinteger)for(let _e=0;_e<oe.length;++_e)if(oe[_e]!==Math.round(oe[_e])){D.isinteger=!1;break}if(D.isinteger)if(D.min=Math.round(D.min),D.max=Math.round(D.max),D.max-D.min<5*le)D.min-=1,D.max+=2,D.nbins=Math.round(D.max-D.min);else{let _e=D.max-D.min+2,Ee=Math.floor(_e/le);for(;Ee*le<_e;)Ee++;D.max=D.min+le*Ee}else D.min>=D.max?(D.max=D.min,Math.abs(D.min)<100?(D.min-=1,D.max+=1):D.min>0?(D.min*=.9,D.max*=1.1):(D.min*=1.1,D.max*=.9)):D.max+=(D.max-D.min)/D.nbins}}return D.k=D.nbins/(D.max-D.min),D.GetBin=function(_e){const Ee=this.lbls?this.lbls.indexOf(_e):Math.floor((_e-this.min)*this.k);return Ee<0?0:Ee>this.nbins?this.nbins+1:Ee+1},D}createHistogram(z,le=!1){z||(z=20);let D=this.getMinMaxBins(0,z),oe=this.getMinMaxBins(1,z),_e=this.getMinMaxBins(2,z),Ee=null;switch(this.ndim){case 1:Ee=(0,M.createHistogram)(M.clTH1+this.htype,D.nbins);break;case 2:Ee=(0,M.createHistogram)(M.clTH2+this.htype,D.nbins,oe.nbins);break;case 3:Ee=(0,M.createHistogram)(M.clTH3+this.htype,D.nbins,oe.nbins,_e.nbins)}if(Ee.fXaxis.fTitle=D.title,Ee.fXaxis.fXmin=D.min,Ee.fXaxis.fXmax=D.max,Ee.fXaxis.fLabels=D.fLabels,this.ndim>1&&(Ee.fYaxis.fTitle=oe.title),Ee.fYaxis.fXmin=oe.min,Ee.fYaxis.fXmax=oe.max,Ee.fYaxis.fLabels=oe.fLabels,this.ndim>2&&(Ee.fZaxis.fTitle=_e.title),Ee.fZaxis.fXmin=_e.min,Ee.fZaxis.fXmax=_e.max,Ee.fZaxis.fLabels=_e.fLabels,Ee.fName=this.hist_name,Ee.fTitle=this.hist_title,Ee.fOption=this.histo_drawopt,Ee.$custom_stat="$htemp"==this.hist_name?111110:111111,le)this.hist=Ee,this.x=D,this.y=oe,this.z=_e;else{let Ve=(0,M.BIT)(9);Ee.fBits=Ee.fBits|Ve}return Ee}createOutputObject(){if(this.hist||!this.vars[0].buf)return;if(this.dump_values)this.hist=[],this.fill1DHistogram=this.fill2DHistogram=this.fill3DHistogram=this.dumpValues;else if(this.graph){let oe=this.vars[0].buf.length,_e=null;if(1==this.ndim)_e=(0,M.createTGraph)(oe,Array.from(Array(oe).keys()),this.vars[0].buf),_e.fName="Graph",_e.fTitle=this.hist_title;else if(2==this.ndim)_e=(0,M.createTGraph)(oe,this.vars[0].buf,this.vars[1].buf),_e.fName="Graph",_e.fTitle=this.hist_title,delete this.vars[1].buf;else if(3==this.ndim){_e=(0,M.create)(M.clTPolyMarker3D),_e.fN=oe,_e.fLastPoint=oe-1;let Ee=new Array(3*oe);for(let Ve=0;Ve<oe;++Ve)Ee[3*Ve]=this.vars[0].buf[Ve],Ee[3*Ve+1]=this.vars[1].buf[Ve],Ee[3*Ve+2]=this.vars[2].buf[Ve];_e.fP=Ee,_e.$hist=this.createHistogram(10),delete this.vars[1].buf,delete this.vars[2].buf,_e.fName="Points"}this.hist=_e}else this.createHistogram([200,50,20][this.ndim],!0);let z=this.vars[0].buf,le=this.cut.buf,D=z.length;if(!this.graph)switch(this.ndim){case 1:for(let oe=0;oe<D;++oe)this.fill1DHistogram(z[oe],le?le[oe]:1);break;case 2:{let oe=this.vars[1].buf;for(let _e=0;_e<D;++_e)this.fill2DHistogram(z[_e],oe[_e],le?le[_e]:1);delete this.vars[1].buf;break}case 3:{let oe=this.vars[1].buf,_e=this.vars[2].buf;for(let Ee=0;Ee<D;++Ee)this.fill3DHistogram(z[Ee],oe[Ee],_e[Ee],le?le[Ee]:1);delete this.vars[1].buf,delete this.vars[2].buf;break}}delete this.vars[0].buf,delete this.cut.buf}fillTBitsHistogram(z,le){if(!(le&&z&&z.fNbits&&z.fAllBits))return;const D=Math.min(z.fNbits+1,8*z.fNbytes);for(let oe=0,_e=1,Ee=0;oe<D;++oe)z.fAllBits[Ee]&&_e&&(oe<=this.x.nbins?this.hist.fArray[oe+1]+=le:this.hist.fArray[this.x.nbins+1]+=le),_e*=2,_e>=256&&(_e=1,++Ee)}FillBitsHistogram(z,le){if(le)for(let D=0,oe=1;D<this.x.nbins;++D)z&oe&&(this.hist.fArray[D+1]+=le),oe*=2}fill1DHistogram(z,le){let D=this.x.GetBin(z);this.hist.fArray[D]+=le,this.x.lbls||(this.hist.fTsumw+=le,this.hist.fTsumwx+=le*z,this.hist.fTsumwx2+=le*z*z)}fill2DHistogram(z,le,D){let oe=this.x.GetBin(z),_e=this.y.GetBin(le);this.hist.fArray[oe+(this.x.nbins+2)*_e]+=D,!this.x.lbls&&!this.y.lbls&&(this.hist.fTsumw+=D,this.hist.fTsumwx+=D*z,this.hist.fTsumwy+=D*le,this.hist.fTsumwx2+=D*z*z,this.hist.fTsumwxy+=D*z*le,this.hist.fTsumwy2+=D*le*le)}fill3DHistogram(z,le,D,oe){let _e=this.x.GetBin(z),Ee=this.y.GetBin(le),Ve=this.z.GetBin(D);this.hist.fArray[_e+(this.x.nbins+2)*(Ee+(this.y.nbins+2)*Ve)]+=oe,!this.x.lbls&&!this.y.lbls&&!this.z.lbls&&(this.hist.fTsumw+=oe,this.hist.fTsumwx+=oe*z,this.hist.fTsumwy+=oe*le,this.hist.fTsumwz+=oe*D,this.hist.fTsumwx2+=oe*z*z,this.hist.fTsumwy2+=oe*le*le,this.hist.fTsumwz2+=oe*D*D,this.hist.fTsumwxy+=oe*z*le,this.hist.fTsumwxz+=oe*z*D,this.hist.fTsumwyz+=oe*le*D)}dumpValues(z,le,D,oe){let _e;switch(this.ndim){case 1:_e={x:z,weight:le};break;case 2:_e={x:z,y:le,weight:D};break;case 3:_e={x:z,y:le,z:D,weight:oe}}this.cut.is_dummy()&&(1===this.ndim?_e=z:delete _e.weight),this.hist.push(_e)}ProcessArraysFunc(){if(this.arr_limit||this.graph){let z=this.vars[0],le=this.vars[1],D=this.vars[2],oe=this.tgtarr.br0.length;if(0===z.buf.length&&oe>=this.arr_limit&&!this.graph)z.buf=this.tgtarr.br0,le&&(le.buf=this.tgtarr.br1),D&&(D.buf=this.tgtarr.br2);else for(let _e=0;_e<oe;++_e)z.buf.push(this.tgtarr.br0[_e]),le&&le.buf.push(this.tgtarr.br1[_e]),D&&D.buf.push(this.tgtarr.br2[_e]);z.kind="number",le&&(le.kind="number"),D&&(D.kind="number"),this.cut.buf=null,!this.graph&&z.buf.length>=this.arr_limit&&(this.createOutputObject(),this.arr_limit=0)}else{let z=this.tgtarr.br0,le=z.length;switch(this.ndim){case 1:for(let D=0;D<le;++D)this.fill1DHistogram(z[D],1);break;case 2:{let D=this.tgtarr.br1;for(let oe=0;oe<le;++oe)this.fill2DHistogram(z[oe],D[oe],1);break}case 3:{let D=this.tgtarr.br1,oe=this.tgtarr.br2;for(let _e=0;_e<le;++_e)this.fill3DHistogram(z[_e],D[_e],oe[_e],1);break}}}}ProcessDump(){let z=this.leaf?this.tgtobj.br0[this.leaf]:this.tgtobj.br0;z&&this.copy_fields&&0===Z(z)?this.hist.push(Object.assign({},z)):this.hist.push(z)}Process(z){if(this.globals.entry=z,this.cut.produce(this.tgtobj),!this.dump_values&&!this.cut.value)return;for(let Ee=0;Ee<this.ndim;++Ee)this.vars[Ee].produce(this.tgtobj);let le=this.vars[0],D=this.vars[1],oe=this.vars[2],_e=this.cut;if(this.graph||this.arr_limit){switch(this.ndim){case 1:for(let Ee=0;Ee<le.length;++Ee)le.buf.push(le.get(Ee)),_e.buf.push(_e.value);break;case 2:for(let Ee=0;Ee<le.length;++Ee)for(let Ve=0;Ve<D.length;++Ve)le.buf.push(le.get(Ee)),D.buf.push(D.get(Ve)),_e.buf.push(_e.value);break;case 3:for(let Ee=0;Ee<le.length;++Ee)for(let Ve=0;Ve<D.length;++Ve)for(let Qe=0;Qe<oe.length;++Qe)le.buf.push(le.get(Ee)),D.buf.push(D.get(Ve)),oe.buf.push(oe.get(Qe)),_e.buf.push(_e.value)}!this.graph&&le.buf.length>=this.arr_limit&&(this.createOutputObject(),this.arr_limit=0)}else if(this.hist)switch(this.ndim){case 1:for(let Ee=0;Ee<le.length;++Ee)this.fill1DHistogram(le.get(Ee),_e.value);break;case 2:for(let Ee=0;Ee<le.length;++Ee)for(let Ve=0;Ve<D.length;++Ve)this.fill2DHistogram(le.get(Ee),D.get(Ve),_e.value);break;case 3:for(let Ee=0;Ee<le.length;++Ee)for(let Ve=0;Ve<D.length;++Ve)for(let Qe=0;Qe<oe.length;++Qe)this.fill3DHistogram(le.get(Ee),D.get(Ve),oe.get(Qe),_e.value)}if(this.monitoring&&this.hist&&!this.dump_values){let Ee=(new Date).getTime();Ee-this.lasttm>this.monitoring&&(this.lasttm=Ee,this.progress_callback&&this.progress_callback(this.hist))}}Terminate(z){z&&!this.hist&&this.createOutputObject(),this.ShowProgress(),(0,M.isFunc)(this.result_callback)&&this.result_callback(this.hist)}}function R(U,z){if(!U||!z||U._typename!==K||U.fID<0||U.fStreamerType<0)return null;let le=z.findStreamerInfo(U.fClassName,U.fClassVersion,U.fCheckSum),D=le&&le.fElements?le.fElements.arr:null;if(!D)return null;let oe=U.fName,_e=oe.indexOf("[");function Ee(Ve){return!(!Ve||Ve.fName!==oe||Ve.fType!==U.fStreamerType&&(Ve.fType!==L.od||U.fStreamerType!==L.AT)&&(U.fStreamerType!==L.Gh&&U.fStreamerType!==L.Gh+L.cF&&U.fStreamerType!==L.cr&&U.fStreamerType!==L.cr+L.cF||Ve.fType!==L.Vo)&&(console.warn(`Should match element ${Ve.fType} with branch ${U.fStreamerType}`),1))}if(_e>0&&(oe=oe.slice(0,_e)),_e=oe.lastIndexOf("."),_e>0&&(oe=oe.slice(_e+1)),Ee(D[U.fID]))return D[U.fID];for(let Ve=0;Ve<D.length;++Ve)if(Ve!==U.fID&&Ee(D[Ve]))return D[Ve];return console.error(`Did not found/match element for branch ${U.fName} class ${U.fClassName}`),null}function q(U,z,le){let D=U.findStreamerInfo(z),oe=D&&D.fElements?D.fElements.arr:null,_e=null;if(!oe)return"";for(let Ve=0;Ve<oe.length;++Ve)if("BASE"===oe[Ve].fTypeName){let Qe=q(U,oe[Ve].fName,le);if(Qe)return Qe}else if(oe[Ve].fName===le){_e=oe[Ve];break}if(!_e)return"";let Ee=_e.fTypeName;return"*"===Ee[Ee.length-1]&&(Ee=Ee.slice(0,Ee.length-1)),Ee}function T(U){let z=(0,M.getMethods)(U),le={names:[],values:[],Create(){let D={};for(let oe=0;oe<this.names.length;++oe)D[this.names[oe]]=this.values[oe];return D}};le.names.push("_typename"),le.values.push(U);for(let D in z)le.names.push(D),le.values.push(z[D]);return le}function $(U,z,le){let D="";for(let oe=le||0;oe<U.arr.length;++oe)0===U.arr[oe].fName.indexOf(z)&&U.arr[oe].fClassName&&(D=U.arr[oe].fClassName);return D}function J(U,z,le){return ie.apply(this,arguments)}function ie(){return(ie=(0,ze.Z)(function*(U,z,le){if(le||(le={}),!z||!U.$file||!z.numBranches())return z&&z.Terminate(!1),Promise.reject(Error("required parameter missing for TTree::Process"));const D={tree:U,file:U.$file,selector:z,arr:[],curr:-1,current_entry:-1,simple_read:!0,process_arrays:!0},oe=(Je,ct)=>{let We=0;switch(Je._typename){case"TLeafF":We=L.wL;break;case"TLeafD":We=L.RL;break;case"TLeafO":We=L.od;break;case"TLeafB":We=Je.fIsUnsigned?L.AT:L.UI;break;case"TLeafS":We=Je.fIsUnsigned?L.aS:L.S4;break;case"TLeafI":We=Je.fIsUnsigned?L.cI:L.Gk;break;case"TLeafL":We=Je.fIsUnsigned?L.CJ:L.Gp;break;case"TLeafC":We=L.kt;break;default:return null}return(0,L.N)(ct||Je.fName,We)},_e=Je=>{for(let ct=0;ct<D.arr.length;++ct)if(D.arr[ct].branch===Je)return D.arr[ct];return null};let Qe,et,Ee=0;function Ve(Je,ct,We,Ke){if((0,M.isStr)(Je)&&(Je=w(D.tree,Je)),!Je)return console.error("Did not found branch"),null;let ft=_e(Je);if(ft)return console.error(`Branch ${Je.fName} already configured for reading`),ft.tgt!==ct&&console.error("Target object differs"),null;if(!Je.fEntries)return console.warn(`Branch ${Je.fName} does not have entries`),null;for(ft={branch:Je,tgt:ct,name:We,index:-1,member:null,type:0,curr_entry:-1,raw:null,basket:null,curr_basket:0,read_entry:-1,staged_entry:-1,first_readentry:-1,staged_basket:0,numentries:Je.fEntries,numbaskets:Je.fWriteBasket,counters:null,ascounter:[],baskets:[],staged_prev:0,staged_now:0,progress_showtm:0,GetBasketEntry(rn){if(!this.branch||rn>this.branch.fMaxBaskets)return 0;let Gt=rn<this.branch.fMaxBaskets?this.branch.fBasketEntry[rn]:0;if(Gt)return Gt;let qt=rn>0?this.branch.fBaskets.arr[rn-1]:null;return qt?this.branch.fBasketEntry[rn-1]+qt.fNevBuf:0},GetTarget(rn){if(!this.tgt)return rn;for(let Gt=0;Gt<this.tgt.length;++Gt){let qt=this.tgt[Gt];rn[qt.name]||(rn[qt.name]=qt.lst.Create()),rn=rn[qt.name]}return rn},GetEntry(rn){let qt,Gt=rn-this.first_entry;this.branch.TestBit(Y)||this.raw.clearObjectMap(),this.basket.fEntryOffset?(qt=this.basket.fEntryOffset[Gt],this.basket.fDisplacement&&(this.raw.fDisplacement=this.basket.fDisplacement[Gt])):qt=this.basket.fKeylen+this.basket.fNevBufSize*Gt,this.raw.locate(qt-this.raw.raw_shift)}};ft.GetBasketEntry(ft.numbaskets+1);)ft.numbaskets++;let zt=Je.fLeaves?Je.fLeaves.arr.length:0,Zt=zt>0?Je.fLeaves.arr[0]:null,Mt=null,Ot=null,sn=Je._typename===K,wn=0,Ln=null,En=null,$n="";if(Je.fBranchCount){if(Ln=_e(Je.fBranchCount),Ln||(Ln=Ve(Je.fBranchCount,ct,"$counter"+Ee++,!0)),!Ln)return console.error(`Cannot add counter branch ${Je.fBranchCount.fName}`),null;let rn=Je.fBranchCount2;if(!rn&&Je.fBranchCount.fStreamerType===L.Gh&&(Je.fStreamerType===L.cL||Je.fStreamerType===L.cF+L.cL)){let Gt=R(Je,D.file),qt=Je.fBranchCount.fBranches.arr;if(Gt&&Gt.fCountName&&qt)for(let Qt=0;Qt<qt.length;++Qt)if(qt[Qt].fName===Je.fBranchCount.fName+"."+Gt.fCountName){rn=qt[Qt];break}rn||console.error("Did not found branch for second counter of kStreamLoop element")}if(rn&&(En=_e(rn),En||(En=Ve(rn,ct,"$counter"+Ee++,!0)),!En))return console.error(`Cannot add counter branch2 ${rn.fName}`),null}else if(1===zt&&Zt&&Zt.fLeafCount){let rn=w(D.tree,Zt.fLeafCount.fName);if(rn&&(Ln=_e(rn),Ln||(Ln=Ve(rn,ct,"$counter"+Ee++,!0)),!Ln))return console.error(`Cannot add counter branch ${rn.fName}`),null}function vn(rn,Gt,qt){if(!rn||!rn.arr.length)return!0;let Qt=Je.fName;"."===Qt[Qt.length-1]&&(Qt=Qt.slice(0,Qt.length-1)),(0,M.isStr)(Ke)&&"."==Ke[0]&&(Qt+=Ke),Qt+=".";for(let _n=0;_n<rn.arr.length;++_n){let dn=rn.arr[_n];if(qt>0&&dn.fType!==qt)continue;if(dn.fType===je){if(!vn(dn.fBranches,Gt,qt))return!1;continue}let ci=R(dn,D.file);if(ci&&"BASE"===ci.fTypeName){if(dn.fTotBytes&&!Ve(dn,ct,We,Ke)||!vn(dn.fBranches,Gt,qt))return!1;continue}let ir=dn.fName,Vi=1;if(0===dn.fName.indexOf(Qt))ir=ir.slice(Qt.length);else if(qt>0)continue;let br=ir.indexOf("[");if(br>0&&(ir=ir.slice(0,br)),br=ir.indexOf("<"),br>0&&(ir=ir.slice(0,br)),qt>0){Vi="$child$";let Ur=ir.indexOf(".");Ur>0&&(Vi=$(rn,Je.fName+"."+ir.slice(0,Ur+1),_n)||M.clTObject)}if(!Ve(dn,Gt,ir,Vi))return!1}return!0}if("TBranchObject"===Je._typename)Ot={name:We,typename:Je.fClassName,virtual:Zt.fVirtual,func(rn,Gt){let qt=this.typename;this.virtual&&(qt=rn.readFastString(rn.ntou1()+1)),Gt[this.name]=rn.classStreamer({},qt)}};else if(Je.fType===Ie||Je.fType===He){if(Mt=(0,L.N)(We,L.Gk),!Ke||(0,M.isStr)(Ke)&&"."===Ke[0]||1===Ke){if(D.process_arrays=!1,Ot={name:We,conttype:Je.fClonesName||M.clTObject,reallocate:le.reallocate_objects,func(rn,Gt){let qt=rn.ntoi4(),Qt=0,_n=Gt[this.name];for(!_n||this.reallocate?_n=Gt[this.name]=new Array(qt):(Qt=_n.length,_n.length=qt);Qt<qt;)_n[Qt++]=this.methods.Create()}},(0,M.isStr)(Ke)&&"."===Ke[0]&&(Ot.conttype=$(Je.fBranches,Je.fName+Ke),!Ot.conttype))return console.error(`Cannot select object ${Ke} in the branch ${Je.fName}`),null;Ot.methods=T(Ot.conttype),wn=Je.fType===Ie?Oe:ce}}else{if($n=P(Je,D.tree)){if(!0===Ke)return console.warn(`Object branch ${$n} can not have data to be read directly`),null;D.process_arrays=!1;let rn=new Array(ct?ct.length+1:1);for(let Gt=0;Gt<rn.length-1;++Gt)rn[Gt]=ct[Gt];return rn[rn.length-1]={name:We,lst:T($n)},vn(Je.fBranches,rn,0)?ft:null}if(sn&&1===zt&&Zt.fName===Je.fName&&-1==Je.fID){if(Mt=(0,L.N)(We,Je.fClassName),Mt.fType===L.P){let rn=D.file.getStreamer(Je.fClassName,{val:Je.fClassVersion,checksum:Je.fCheckSum});rn?Ot={name:We,typename:Je.fClassName,streamer:rn,func(Gt,qt){let Qt={_typename:this.typename};for(let _n=0;_n<this.streamer.length;++_n)this.streamer[_n].func(Gt,Qt);qt[this.name]=Qt}}:(Mt=null,console.warn("not found streamer!"))}}else if(sn&&zt<=1)Mt=R(Je,D.file),!Mt&&Je.fStreamerType&&Je.fStreamerType<20&&(Mt=(0,L.N)(We,Je.fStreamerType));else if(1===zt)Mt=oe(Zt,We);else if("TBranch"===Je._typename&&zt>1){let rn=new Array(zt),Gt=!0;for(let qt=0;qt<zt;++qt)rn[qt]=(0,L.dF)(oe(Je.fLeaves.arr[qt]),D.file),rn[qt]||(Gt=!1);Gt&&(Ot={name:We,leaves:rn,func(qt,Qt){let _n=Qt[this.name],dn=0;for(_n||(Qt[this.name]=_n={});dn<this.leaves.length;)this.leaves[dn++].func(qt,_n)}})}}if(!Mt&&!Ot)return console.warn(`Not supported branch ${Je.fName} type ${Je._typename}`),null;if(Ot||(Ot=(0,L.dF)(Mt,D.file),void 0!==Ot.base&&Ot.basename&&(Ot.func=function(rn,Gt){Gt[this.name]||(Gt[this.name]={_typename:this.basename}),rn.classStreamer(Gt[this.name],this.basename)})),Ln&&(0,M.isStr)(Ke)){Ot.name0=Ln.name;let rn=We.split(".");if(1===rn.length)Ot.get=(Gt,qt)=>Gt[qt];else{if("$child$"===Ke)return console.error(`target name ${We} contains point, but suppose to be direct child`),null;if(2===rn.length)We=Ot.name=rn[1],Ot.name1=rn[0],Ot.subtype1=Ke,Ot.methods1=T(Ot.subtype1),Ot.get=function(Gt,qt){let Qt=Gt[qt][this.name1];return Qt||(Qt=Gt[qt][this.name1]=this.methods1.Create()),Qt};else{if(!Je.fParentName)return console.error(`Not possible to provide more than 2 parts in the target name ${We}`),null;We=Ot.name=rn.pop(),Ot.snames=rn,Ot.smethods=[];let Gt=Je.fParentName;for(let qt=0;qt<rn.length;++qt){let Qt=q(D.file,Gt,rn[qt]);Ot.smethods[qt]=T(Qt||"AbstractClass"),Gt=Qt}Ot.get=function(qt,Qt){let _n=qt[Qt][this.snames[0]];_n||(_n=qt[Qt][this.snames[0]]=this.smethods[0].Create());for(let dn=1;dn<this.snames.length;++dn){let ci=_n[this.snames[dn]];ci||(ci=_n[this.snames[dn]]=this.smethods[dn].Create()),_n=ci}return _n}}}Ot.objs_branch_func?Ot.func=Ot.objs_branch_func:(Ot.func0=Ot.func,Ot.func=function(Gt,qt){let Qt=qt[this.name0],_n=0;for(;_n<Qt.length;)this.func0(Gt,this.get(Qt,_n++))})}else if(Ln)if(D.process_arrays=!1,Mt.fType===L._q||Mt.fType===L.R4)Ot.stl_size=Ln.name,Ot.func=function(rn,Gt){Gt[this.name]=this.readarr(rn,Gt[this.stl_size])};else if(Mt.fType!==L.RZ+L._q&&Mt.fType!==L.RZ+L.R4||!Je.fBranchCount2)if(Mt.fType>0&&Mt.fType<L.cF||Mt.fType===L.kt||Mt.fType>L.RZ&&Mt.fType<L.RZ+L.cF&&Je.fBranchCount2)Ot={name:We,stl_size:Ln.name,type:Mt.fType,func(rn,Gt){Gt[this.name]=rn.readFastArray(Gt[this.stl_size],this.type)}},Je.fBranchCount2&&(Ot.type-=L.RZ,Ot.arr_size=En.name,Ot.func=function(rn,Gt){let qt=Gt[this.stl_size],Qt=Gt[this.arr_size],_n=new Array(qt);for(let dn=0;dn<qt;++dn)_n[dn]=1===rn.ntou1()?rn.readFastArray(Qt[dn],this.type):[];Gt[this.name]=_n});else if(Mt.fType>L.RZ&&Mt.fType<L.RZ+L.cF&&Ot.cntname)Ot.cntname=Ln.name;else if(Mt.fType==L.Vo){if(En)throw new Error("Second branch counter not supported yet with kStreamer");Ot.func=Ot.branch_func,Ot.stl_size=Ln.name}else if(Mt.fType===L.cL||Mt.fType===L.cF+L.cL)En?(Ot.stl_size=Ln.name,Ot.cntname=En.name,Ot.func=Ot.branch_func):Ot.cntname=Ln.name;else{let rn;if(Ot.name="$stl_member",En){if(!Ot.cntname)throw new Error("Second branch counter not used - very BAD");rn=En.name,Ot.cntname="$loop_size"}Ot={name:We,stl_size:Ln.name,loop_size:rn,member0:Ot,func(qt,Qt){let _n=Qt[this.stl_size],dn=new Array(_n);for(let ci=0;ci<_n;++ci)this.loop_size&&(Qt.$loop_size=Qt[this.loop_size][ci]),this.member0.func(qt,Qt),dn[ci]=Qt.$stl_member;delete Qt.$stl_member,delete Qt.$loop_size,Qt[this.name]=dn}}}else Ot.stl_size=Ln.name,Ot.arr_size=En.name,Ot.func=function(rn,Gt){let qt=Gt[this.stl_size],Qt=Gt[this.arr_size],_n=new Array(qt);for(let dn=0;dn<qt;++dn)_n[dn]=1===rn.ntou1()?this.readarr(rn,Qt[dn]):[];Gt[this.name]=_n};return Ot.name=We,ft.member=Ot,Mt&&(ft.type=Mt.fType),ft.index=D.arr.length,Ln&&(ft.counters=[Ln.index],Ln.ascounter.push(ft.index),En&&(ft.counters.push(En.index),En.ascounter.push(ft.index))),D.arr.push(ft),wn&&!vn(Je.fBranches,ct,wn)?null:ft}for(let Je=0;Je<z.numBranches();++Je)if(!Ve(z.getBranch(Je),void 0,z.nameOfBranch(Je),z._directs[Je]))return z.Terminate(!1),Promise.reject(Error(`Fail to add branch ${z.nameOfBranch(Je)}`));for(let Je=1;Je<D.arr.length&&D.simple_read;++Je){let ct=D.arr[Je],We=D.arr[0];(ct.numentries!==We.numentries||ct.numbaskets!==We.numbaskets)&&(D.simple_read=!1);for(let Ke=0;Ke<ct.numbaskets;++Ke)ct.GetBasketEntry(Ke)!==We.GetBasketEntry(Ke)&&(D.simple_read=!1)}D.firstentry=D.lastentry=0;for(let Je=0;Je<D.arr.length;++Je){let ct=D.arr[Je].branch,We=ct.fFirstEntry;void 0===We&&(We=ct.fBasketBytes[0]?ct.fBasketEntry[0]:0),D.firstentry=Math.max(D.firstentry,We),D.lastentry=0===Je?We+ct.fEntries:Math.min(D.lastentry,We+ct.fEntries)}if(D.firstentry>=D.lastentry)return z.Terminate(!1),Promise.reject(Error("No any common events for selected branches"));if(D.process_min=D.firstentry,D.process_max=D.lastentry,Number.isInteger(le.firstentry)&&le.firstentry>D.firstentry&&le.firstentry<D.lastentry&&(D.process_min=le.firstentry),D.current_entry=D.staged_now=D.process_min,Number.isInteger(le.numentries)&&le.numentries>0){let Je=D.process_min+le.numentries;Je<D.process_max&&(D.process_max=Je)}if((0,M.isFunc)(z.ProcessArrays)&&D.simple_read){for(let Je=0;Je<D.arr.length;++Je){let ct=D.arr[Je];(ct.type<=0||ct.type>=L.cF||ct.type===L.vo)&&(D.process_arrays=!1)}if(D.process_arrays){z.tgtarr={};for(let Je=0;Je<D.arr.length;++Je){let ct=D.arr[Je],We=(0,L.N)(ct.name,ct.type);We.fType=ct.type+L.cF,We.fArrayLength=10,We.fArrayDim=1,We.fMaxIndex[0]=10,ct.arrmember=(0,L.dF)(We,D.file)}}}else D.process_arrays=!1;function Tt(Je){function ct(){let zt=[],Zt="";for(let Mt=0;Mt<Je.length;++Mt){if(Je[Mt].done)continue;let Ot=Je[Mt].branch;if(0===zt.length)Zt=Ot.fFileName;else if(Zt!==Ot.fFileName)continue;Je[Mt].selected=!0,zt.push(Ot.fBasketSeek[Je[Mt].basket],Ot.fBasketBytes[Je[Mt].basket])}return zt.length>0?{places:zt,filename:Zt}:null}function We(zt){if(D.staged_prev===D.staged_now||D.process_max<=D.process_min)return;let Zt=(new Date).getTime();Zt-D.progress_showtm<500||(D.progress_showtm=Zt,D.selector.ShowProgress((D.staged_prev+zt*(D.staged_now-D.staged_prev))/(D.process_max-D.process_min)))}function Ke(zt,Zt){return!zt||Zt.length>2&&2*zt.length!==Zt.length?Promise.resolve(null):(2==Zt.length&&(zt=[zt]),function Mt(Ot){for(;Ot<Je.length;++Ot){if(!Je[Ot].selected)continue;Je[Ot].selected=!1,Je[Ot].done=!0;let wn=zt.shift(),Ln=new L.GS(wn,0,D.file),En=Ln.classStreamer({},L.SE);if(En.fNbytes!==Je[Ot].branch.fBasketBytes[Je[Ot].basket]&&console.error(`mismatch in read basket sizes ${En.fNbytes} != ${Je[Ot].branch.fBasketBytes[Je[Ot].basket]}`),Je[Ot].bskt_obj=En,En.fKeylen+En.fObjlen!==En.fNbytes)return(0,L.MD)(wn,En.fObjlen,!1,Ln.o).then($n=>{if(!$n)throw new Error("FAIL TO UNPACK");return Ln=new L.GS($n,0,D.file),Ln.raw_shift=En.fKeylen,Ln.fTagOffset=En.fKeylen,Je[Ot].raw=Ln,Je[Ot].branch.fEntryOffsetLen>0&&Ln.readBasketEntryOffset(En,Ln.raw_shift),Mt(Ot+1)});Ln.raw_shift=0,Je[Ot].raw=Ln,Je[Ot].branch.fEntryOffsetLen>0&&Ln.readBasketEntryOffset(En,Ln.raw_shift)}let sn=ct();return sn?D.file.readBuffer(sn.places,sn.filename,We).then(wn=>Ke(wn)).catch(()=>null):Promise.resolve(Je)}(0))}let ft=ct();return ft?D.file.readBuffer(ft.places,ft.filename,We).then(zt=>Ke(zt,ft.places)).catch(()=>null):Promise.resolve(null)}function Bt(){let Je=0,ct=[],We=!0,Ke=!1,ft=D.process_max;for(;Je<1e6&&We;){We=!1;for(let Zt=D.arr.length-1;Zt>=0;--Zt){let Mt=D.arr[Zt];for(;Mt.staged_basket<Mt.numbaskets;){let Ot=Mt.staged_basket++;if(Mt.GetBasketEntry(Ot)>=D.process_max)break;if(Mt.first_readentry<0){if(Mt.GetBasketEntry(Ot+1)<=D.process_min)continue;Mt.curr_basket=Ot,Mt.first_readentry=Mt.GetBasketEntry(Ot)}let sn={id:Zt,branch:Mt.branch,basket:Ot,raw:null},wn=Mt.branch.fBaskets.arr[Ot];wn?(sn.raw=wn.fBufferRef,sn.raw?sn.raw.locate(0):sn.raw=new L.GS(null,0,D.file),sn.raw.raw_shift=wn.fKeylen,wn.fBufferRef&&Mt.branch.fEntryOffsetLen>0&&sn.raw.readBasketEntryOffset(wn,sn.raw.raw_shift),sn.bskt_obj=wn,Ke=!0,Mt.baskets[Ot]=sn):(ct.push(sn),Je+=Mt.branch.fBasketBytes[Ot],We=!0),Mt.staged_entry=Mt.GetBasketEntry(Ot+1),ft=Math.min(ft,Mt.staged_entry);break}}}if(0===Je&&!Ke)return D.selector.Terminate(!0),Qe(D.selector);D.staged_prev=D.staged_now,D.staged_now=ft;let zt=0;if(D.process_max>D.process_min&&(zt=(D.staged_prev-D.process_min)/(D.process_max-D.process_min)),D.selector.ShowProgress(zt),D.progress_showtm=(new Date).getTime(),Je>0)return Tt(ct).then(ve);if(Ke)return ve([]);throw new Error("No any data is requested - never come here")}function ve(Je){if(0!==D.selector._break||null===Je)return D.selector.Terminate(!1),Qe(D.selector);for(let We=0;We<Je.length;++We)D.arr[Je[We].id].baskets[Je[We].basket]=Je[We];let ct=!1;for(;;){let Ke,ft,We=1e8;for(Ke=0;Ke<D.arr.length;++Ke){if(ft=D.arr[Ke],!ft.raw||!ft.basket||ft.first_entry+ft.basket.fNevBuf<=D.current_entry){if(delete ft.raw,delete ft.basket,ft.curr_basket>=ft.numbaskets){if(0==Ke)return D.selector.Terminate(!0),Qe(D.selector);continue}let zt=ft.baskets[ft.curr_basket];if(!zt)return ct?Bt():(D.selector.Terminate(!1),et(Error(`no data for ${ft.branch.fName} basket ${ft.curr_basket}`)));ft.raw=zt.raw,ft.basket=zt.bskt_obj,ft.first_entry=ft.GetBasketEntry(zt.basket),zt.raw=null,zt.branch=null,zt.bskt_obj=null,ft.baskets[ft.curr_basket++]=void 0}We=Math.min(We,ft.first_entry+ft.basket.fNevBuf-D.current_entry)}if(D.current_entry+We>D.process_max&&(We=D.process_max-D.current_entry),D.process_arrays&&We>1){for(Ke=0;Ke<D.arr.length;++Ke)ft=D.arr[Ke],ft.GetEntry(D.current_entry),ft.arrmember.arrlength=We,ft.arrmember.func(ft.raw,D.selector.tgtarr),ft.raw=null;D.selector.ProcessArrays(D.current_entry),D.current_entry+=We,ct=!0}else for(;We--;){for(Ke=0;Ke<D.arr.length;++Ke)ft=D.arr[Ke],ft.GetEntry(D.current_entry),ft.member.func(ft.raw,ft.GetTarget(D.selector.tgtobj));D.selector.Process(D.current_entry),D.current_entry++,ct=!0}if(D.current_entry>=D.process_max)return D.selector.Terminate(!0),Qe(D.selector)}}return new Promise((Je,ct)=>{Qe=Je,et=ct,D.selector.Begin(U),Bt()})})).apply(this,arguments)}function Me(U,z){return de.apply(this,arguments)}function de(){return(de=(0,ze.Z)(function*(U,z){(0,M.isStr)(z)&&(z={expr:z}),z.expr||(z.expr="");let le=new F;return z.branch?le.drawOnlyBranch(U,z.branch,z.expr,z)||(le=null):le.parseDrawExpression(U,z)||(le=null),le?new Promise(D=>{le.setCallback(D,z.progress),J(U,le,z)}):Promise.reject(Error("Fail to create selector for specified expression"))})).apply(this,arguments)}function fe(U,z){let le=[],D=[],oe=[],Ee=function _e(Qe,et=""){if(!Qe?.fBranches)return 0;let Tt=0;for(let Bt=0;Bt<Qe.fBranches.arr.length;++Bt){let ve=Qe.fBranches.arr[Bt],Je=(et?et+"/":"")+ve.fName;le.push(ve),D.push(Je),oe.push(0);let ct=oe.length-1;Tt+=ve.fLeaves?ve.fLeaves.arr.length:0;let We=_e(ve,Je);Tt+=We,oe[ct]=We}return Tt}(U);return D.push(`Total are ${le.length} branches with ${Ee} leaves`),function Ve(Qe){if(Qe>=le.length)return Promise.resolve(!0);let et=new X;et.addBranch(le[Qe],"br0"),et.Process=function(){void 0===this.tgtobj.br0&&(this.fail=!0)},et.Terminate=function(ft){(0,M.isStr)(ft)||(ft=!ft||this.fails?"FAIL":"ok"),D[Qe]=ft+" "+D[Qe]};let Tt=le[Qe],Bt=P(Tt,U),ve=Tt.fEntries,Je=!Tt.fLeaves||0===Tt.fLeaves.arr.length;if(Bt&&(Je=oe[Qe]>100),Je||ve<=0)return Ve(Qe+1);let ct={numentries:10},We=Tt.fFirstEntry||0,Ke=Tt.fEntryNumber||We+ve;return ve<ct.numentries?ct.numentries=ve:ct.firstentry=We+Math.round((Ke-We-ct.numentries)*Math.random()),console.log(`test branch ${Tt.fName} first ${ct.firstentry||0} num ${ct.numentries}`),z.showProgress&&z.showProgress(`br ${Qe}/${le.length} ${Tt.fName}`),J(U,et,ct).then(()=>Ve(Qe+1))}(0).then(()=>(z.showProgress&&z.showProgress(),D))}function I(U,z){function le(D,oe,_e,Ee){if(!D||!oe)return!1;let Ve=oe.fBranches?oe.fBranches.arr.length:0,Qe=oe.fLeaves?oe.fLeaves.arr.length:0;function et(Bt){let ve=Bt.indexOf("[");return ve>0&&(Bt=Bt.slice(0,ve)),Ee&&0==Bt.indexOf(Ee.fName)&&"."===(Bt=Bt.slice(Ee.fName.length))[0]&&(Bt=Bt.slice(1)),Bt}oe.$tree=_e;let Tt={_name:et(oe.fName),_kind:"ROOT."+oe._typename,_title:oe.fTitle,_obj:oe};if(D._childs||(D._childs=[]),D._childs.push(Tt),oe._typename===K&&(Tt._title+=` from ${oe.fClassName};${oe.fClassVersion}`),Ve>0)return Tt._more=!0,Tt._expand=function(Bt,ve){if(!ve)return!1;Bt._childs||(Bt._childs=[]),ve.fLeaves&&1===ve.fLeaves.arr.length&&(ve.fType===Ie||ve.fType===He)&&(ve.fLeaves.arr[0].$branch=ve,Bt._childs.push({_name:"@size",_title:"container size",_kind:"ROOT.TLeafElement",_icon:"img_leaf",_obj:ve.fLeaves.arr[0],_more:!1}));for(let We=0;We<ve.fBranches.arr.length;++We)le(Bt,ve.fBranches.arr[We],ve.$tree,ve);let Je=P(ve,ve.$tree,!0),ct=Je?(0,M.getMethods)(Je):null;if(ct&&ve.fBranches.arr.length>0)for(let We in ct){if(!(0,M.isFunc)(ct[We]))continue;let Ke=ct[We].toString();Ke.indexOf("return")>0&&0==Ke.indexOf("function ()")&&Bt._childs.push({_name:We+"()",_title:`function ${We} of class ${Je}`,_kind:"ROOT."+ue,_obj:{_typename:ue,branch:ve,func:We},_more:!1})}return!0},!0;if(1===Qe)Tt._icon="img_leaf",Tt._more=!1;else if(Qe>1){Tt._childs=[];for(let Bt=0;Bt<Qe;++Bt){oe.fLeaves.arr[Bt].$branch=oe;let ve={_name:et(oe.fLeaves.arr[Bt].fName),_kind:"ROOT."+oe.fLeaves.arr[Bt]._typename,_obj:oe.fLeaves.arr[Bt]};Tt._childs.push(ve)}}return!0}U._childs=[],U._tree=z;for(let D=0;D<z.fBranches.arr.length;++D)le(U,z.fBranches.arr[D],z);return!0}}},$r=>{$r($r.s=8732)}]);
//# sourceMappingURL=main.7090114ef046b856.js.map