"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[592],{7822:(j,S,m)=>{m.d(S,{Y:()=>I});var C=m(5835),O=m(9900),F=m(9542),R=m(1968);function I(){return z.apply(this,arguments)}function z(){return(z=(0,C.Z)(function*(){let i=this.$fp||this.getFramePainter();if(delete this.$fp,!((0,F.isObject)(i)&&i.grx&&i.gry&&i.grz))return this;let A=this.getObject(),_=1,r=0,h=A.fP;for(let f=0;f<h.length;f+=3)h[f]<i.scale_xmin||h[f]>i.scale_xmax||h[f+1]<i.scale_ymin||h[f+1]>i.scale_ymax||h[f+2]<i.scale_zmin||h[f+2]>i.scale_zmax||++r;F.settings.OptimizeDraw>0&&r>5e4&&(_=Math.floor(r/5e4),_<=2&&(_=2));let a=Math.floor(r/_),l=new R.B_(a,i.webgl,i.size_x3d/100),s=new Int32Array(a),o=0,M=0;for(let f=0;f<h.length;f+=3)h[f]<i.scale_xmin||h[f]>i.scale_xmax||h[f+1]<i.scale_ymin||h[f+1]>i.scale_ymax||h[f+2]<i.scale_zmin||h[f+2]>i.scale_zmax||_>1&&(o=(o+1)%_,0!==o)||(s[M++]=f,l.addPoint(i.grx(h[f]),i.gry(h[f+1]),i.grz(h[f+2])));return l.createPoints({color:this.getColor(A.fMarkerColor),style:A.fMarkerStyle}).then(f=>(f.tip_color=3===A.fMarkerColor?16711680:65280,f.tip_name=A.fName||"Poly3D",f.poly=A,f.painter=i,f.scale0=.7*l.scale,f.index=s,i.toplevel.add(f),f.tooltip=function(D){if(!Number.isInteger(D.index))return console.error(`intersect.index not provided, three.js version ${O.UZH}`),null;let T=Math.floor(D.index/this.nvertex);if(T<0||T>=this.index.length)return null;T=this.index[T];let t=this.painter,c=t.grx(this.poly.fP[T]),g=t.gry(this.poly.fP[T+1]),d=t.grz(this.poly.fP[T+2]);return{x1:c-this.scale0,x2:c+this.scale0,y1:g-this.scale0,y2:g+this.scale0,z1:d-this.scale0,z2:d+this.scale0,color:this.tip_color,lines:[this.tip_name,"pnt: "+T/3,"x: "+t.axisAsText("x",this.poly.fP[T]),"y: "+t.axisAsText("y",this.poly.fP[T+1]),"z: "+t.axisAsText("z",this.poly.fP[T+2])]}},i.render3D(100),this))})).apply(this,arguments)}},4971:(j,S,m)=>{m.r(S),m.d(S,{drawBox:()=>M,drawEllipse:()=>s,drawJSImage:()=>T,drawMarker:()=>f,drawPie:()=>o,drawPolyLine:()=>l,drawPolyMarker:()=>D,drawTLine:()=>h,drawText:()=>e});var C=m(5835),O=m(9542),F=m(2253),R=m(3675),I=m(6458),z=m(6417),i=m(6367),A=m(49),_=m(9622);function e(){return r.apply(this,arguments)}function r(){return(r=(0,C.Z)(function*(){let t=this.getObject(),c=this.getPadPainter(),g=c.getPadWidth(),d=c.getPadHeight(),n=t.fX,u=t.fY,x=this.getColor(t.fTextColor),P=!1,v=1,E=t.fTextSize||.05,y=this.getFramePainter();t.TestBit((0,O.BIT)(14))?this.isndc=!0:y&&!y.mode3d?(g=y.getFrameWidth(),d=y.getFrameHeight(),P="upper_layer"):c.getRootPad(!0)||(this.isndc=!0,n=u=.5,t.fTextAlign=22,x||(x="black")),this.createG(P),this.draw_g.attr("transform",null),this.pos_x=this.axisToSvg("x",n,this.isndc),this.pos_y=this.axisToSvg("y",u,this.isndc);let p={align:t.fTextAlign,x:this.pos_x,y:this.pos_y,text:t.fTitle,color:x,latex:0};return t.fTextAngle&&(p.rotate=-t.fTextAngle),t._typename==O.clTLatex?(p.latex=1,v=.9):t._typename==O.clTMathText&&(p.latex=2,v=.8),this.startTextDrawing(t.fTextFont,Math.round(E>1?E:E*Math.min(g,d)*v)),this.drawText(p),this.finishTextDrawing().then(()=>((0,O.isBatchMode)()||(this.pos_dx=this.pos_dy=0,this.moveDrag||(this.moveDrag=function(b,$){this.pos_dx+=b,this.pos_dy+=$,this.draw_g.attr("transform",`translate(${this.pos_dx},${this.pos_dy})`)}),this.moveEnd||(this.moveEnd=function(b){if(b)return;let $=this.getObject();$.fX=this.svgToAxis("x",this.pos_x+this.pos_dx,this.isndc),$.fY=this.svgToAxis("y",this.pos_y+this.pos_dy,this.isndc),this.submitCanvExec(`SetX(${$.fX});;SetY(${$.fY});;`)}),(0,_.Z)(this)),this))})).apply(this,arguments)}function h(t,c){return a.apply(this,arguments)}function a(){return(a=(0,C.Z)(function*(t,c){let g=new I.tK(t,c);return g.redraw=function(){const d=(0,O.BIT)(14),n=this.getObject(),u=new i.rE(n),x=n.TestBit(d);return this.createG(),this.draw_g.append("svg:path").attr("d",`M${this.axisToSvg("x",n.fX1,x)},${this.axisToSvg("y",n.fY1,x)}L${this.axisToSvg("x",n.fX2,x)},${this.axisToSvg("y",n.fY2,x)}`).call(u.func),this},(0,A.ensureTCanvas)(g,!1).then(()=>g.redraw())})).apply(this,arguments)}function l(){this.createG();let t=this.getObject(),c=new i.rE(t),g=this.createAttFill(t),d=(0,O.BIT)(14),n=t.TestBit(d),u="",x=this.getAxisToSvgFunc(n);for(let P=0;P<=t.fLastPoint;++P)u+=`${P>0?"L":"M"}${x.x(t.fX[P])},${x.y(t.fY[P])}`;t._typename!=O.clTPolyLine&&g.setSolidColor("none"),g.empty()||(u+="Z"),this.draw_g.append("svg:path").attr("d",u).call(c.func).call(g.func)}function s(){let t=this.getObject();this.createAttLine({attr:t}),this.createAttFill({attr:t}),this.createG();let c=this.getAxisToSvgFunc(),g=c.x(t.fX1),d=c.y(t.fY1),n=c.x(t.fX1+t.fR1)-g,u=d-c.y(t.fY1+t.fR2),x="",P=0==t.fPhimin&&360==t.fPhimax;if("TCrown"==t._typename&&t.fR1<=0&&(n=c.x(t.fX1+t.fR2)-g),"TCrown"==t._typename&&t.fR1>0){let v=n,E=u,y=d-c.y(t.fY1+t.fR1),p=c.x(t.fX1+t.fR2)-g;if(P)x=`M${-v},0A${v},${y},0,1,0,${v},0A${v},${y},0,1,0,${-v},0M${-p},0A${p},${E},0,1,0,${p},0A${p},${E},0,1,0,${-p},0`;else{let b=t.fPhimax-t.fPhimin>=180?1:0,$=t.fPhimin*Math.PI/180,w=t.fPhimax*Math.PI/180,B=Math.round(v*Math.cos($)),L=Math.round(y*Math.sin($));x=`M${Math.round(v*Math.cos(w))},${Math.round(y*Math.sin(w))}A${v},${y},0,${b},0,${B},${L}L${Math.round(p*Math.cos($))},${Math.round(E*Math.sin($))}A${p},${E},0,${b},1,${Math.round(p*Math.cos(w))},${Math.round(E*Math.sin(w))}Z`}}else if(0==t.fTheta)x=P?`M${-n},0A${n},${u},0,1,0,${n},0A${n},${u},0,1,0,${-n},0Z`:`M0,0L${Math.round(n*Math.cos(t.fPhimin*Math.PI/180))},${Math.round(u*Math.sin(t.fPhimin*Math.PI/180))}A${n},${u},0,1,1,${Math.round(n*Math.cos(t.fPhimax*Math.PI/180))},${Math.round(u*Math.sin(t.fPhimax*Math.PI/180))}Z`;else{let v=Math.cos(t.fTheta*Math.PI/180),E=Math.sin(t.fTheta*Math.PI/180),y=t.fPhimin*Math.PI/180,b=200,$=(t.fPhimax*Math.PI/180-y)/(b-(P?0:1)),w=0,B=0;P||(x="M0,0");for(let L=0;L<b;++L){let U=y+L*$,W=t.fR1*Math.cos(U),Y=t.fR2*Math.sin(U),X=c.x(t.fX1+W*v-Y*E)-g,K=c.y(t.fY1+W*E+Y*v)-d;x?x+=w==X?"v"+(K-B):B==K?"h"+(X-w):`l${X-w},${K-B}`:x=`M${X},${K}`,w=X,B=K}x+="Z"}this.draw_g.append("svg:path").attr("transform",`translate(${g},${d})`).attr("d",x).call(this.lineatt.func).call(this.fillatt.func)}function o(){let t=this.getObject();this.createG();let c=this.axisToSvg("x",t.fX),g=this.axisToSvg("y",t.fY),d=this.axisToSvg("x",t.fX+t.fRadius)-c,n=this.axisToSvg("y",t.fY+t.fRadius)-g;this.draw_g.attr("transform",`translate(${c},${g})`);let u=t.fPieSlices.length,x=0,P=t.fAngularOffset*Math.PI/180,v=Math.round(d*Math.cos(P)),E=Math.round(n*Math.sin(P));for(let y=0;y<u;y++)x+=t.fPieSlices[y].fValue;for(let y=0;y<u;y++){let p=t.fPieSlices[y],b=new i.rE({attr:p}),$=this.createAttFill(p);P+=p.fValue/x*2*Math.PI;let w=Math.round(d*Math.cos(P)),B=Math.round(n*Math.sin(P));this.draw_g.append("svg:path").attr("d",`M0,0L${v},${E}A${d},${n},0,0,0,${w},${B}z`).call(b.func).call($.func),v=w,E=B}}function M(){let t=this.getObject(),g=this.getDrawOpt().toUpperCase().indexOf("L")>=0,d=this.createAttLine(t),n=this.createAttFill(t);this.createG();let u=this.axisToSvg("x",t.fX1),x=this.axisToSvg("x",t.fX2),P=this.axisToSvg("y",t.fY1),v=this.axisToSvg("y",t.fY2),E=Math.min(u,x),y=Math.min(P,v),p=Math.abs(x-u),b=Math.abs(P-v);if(!n.empty()&&!g&&(d.color="none"),this.draw_g.append("svg:path").attr("d",`M${E},${y}h${p}v${b}h${-p}z`).call(d.func).call(n.func),t.fBorderMode&&t.fBorderSize&&n.hasColor()){let $=t.fBorderSize,w=t.fBorderSize,B=`M${E},${y}h${p}l${-$},${w}h${2*$-p}v${b-2*w}l${-$},${w}z`,L=`M${E+p},${y+b}v${-b}l${-$},${w}v${b-2*w}h${2*$-p}l${-$},${w}z`;if(t.fBorderMode<0){let U=B;B=L,L=U}this.draw_g.append("svg:path").attr("d",B).call(n.func).style("fill",(0,F.B8)(n.color).brighter(.5).formatHex()),this.draw_g.append("svg:path").attr("d",L).call(n.func).style("fill",(0,F.B8)(n.color).darker(.5).formatHex())}}function f(){const t=this.getObject(),c=new z.M(t),g=(0,O.BIT)(14),d=t.TestBit(g);this.createG();let n=this.axisToSvg("x",t.fX,d),u=this.axisToSvg("y",t.fY,d),x=c.create(n,u);x&&this.draw_g.append("svg:path").attr("d",x).call(c.func)}function D(){this.createG();let t=this.getObject(),c=new z.M(t),g="",d=this.getAxisToSvgFunc();for(let n=0;n<t.fN;++n)g+=c.create(d.x(t.fX[n]),d.y(t.fY[n]));g&&this.draw_g.append("svg:path").attr("d",g).call(c.func)}function T(t,c,g){let d=new R.be(t),n=d.selectDom(),u=n.append("img").attr("src",c.fName).attr("title",c.fTitle||c.fName);return g&&g.indexOf("scale")>=0?u.style("width","100%").style("height","100%"):g&&g.indexOf("center")>=0&&(n.style("position","relative"),u.attr("style","margin: 0; position: absolute;  top: 50%; left: 50%; transform: translate(-50%, -50%);")),d.setTopPainter(),d}},9428:(j,S,m)=>{m.r(S),m.d(S,{TF1Painter:()=>A,proivdeEvalPar:()=>i});var C=m(5835),O=m(9542),F=m(3675),R=m(6458),I=m(9670),z=m(6976);function i(_){_._math=z;let e=_.fTitle,r=!1,h="[";"gaus"===e&&(e="gaus(0)"),_.fFormula&&(0,O.isStr)(_.fFormula.fFormula)&&(0==_.fFormula.fFormula.indexOf("[](double*x,double*p)")?(r=!0,h="p[",e=_.fFormula.fFormula.slice(21)):(e=_.fFormula.fFormula,h="[p"),_.fFormula.fClingParameters&&_.fFormula.fParams&&_.fFormula.fParams.forEach(a=>{let l=new RegExp(`(\\[${a.first}\\])`,"g"),s=_.fFormula.fClingParameters[a.second];e=e.replace(l,s<0?`(${s})`:s)})),"formulas"in _&&_.formulas.forEach(a=>{e=e.replaceAll(a.fName,a.fTitle)}),e=e.replace(/\b(abs)\b/g,"TMath::Abs").replace(/\b(TMath::Exp)/g,"Math.exp").replace(/\b(TMath::Abs)/g,"Math.abs"),e=e.replace(/xygaus\(/g,"this._math.gausxy(this, x, y, ").replace(/gaus\(/g,"this._math.gaus(this, x, ").replace(/gausn\(/g,"this._math.gausn(this, x, ").replace(/expo\(/g,"this._math.expo(this, x, ").replace(/landau\(/g,"this._math.landau(this, x, ").replace(/landaun\(/g,"this._math.landaun(this, x, ").replace(/TMath::/g,"this._math.").replace(/ROOT::Math::/g,"this._math.");for(let a=0;a<_.fNpar;++a)e=e.replaceAll(h+a+"]",`(${_.GetParValue(a)})`);e=e.replace(/\b(sin)\b/gi,"Math.sin").replace(/\b(cos)\b/gi,"Math.cos").replace(/\b(tan)\b/gi,"Math.tan").replace(/\b(exp)\b/gi,"Math.exp").replace(/\b(pow)\b/gi,"Math.pow").replace(/pi/g,"Math.PI");for(let a=2;a<10;++a)e=e.replaceAll(`x^${a}`,`Math.pow(x,${a})`);r?(e=e.replace(/x\[0\]/g,"x"),_._typename===O.clTF2?(e=e.replace(/x\[1\]/g,"y"),_.evalPar=new Function("x","y",e).bind(_)):_.evalPar=new Function("x",e).bind(_)):_.evalPar=_._typename===O.clTF2?new Function("x","y","return "+e).bind(_):new Function("x","return "+e).bind(_)}class A extends R.tK{createBins(e){let r=this.getObject(),h=this.getFramePainter(),a=0,l=0;if(h&&!e){let d=h.getGrFuncs(this.second_x,this.second_y);a=d.scale_xmin,l=d.scale_xmax}let s=r.fXmin,o=r.fXmax,M=!1;a!==l&&(a>s&&(s=a),l<o&&(o=l)),h&&h.logx&&s>0&&o>0&&(M=!0,s=Math.log(s),o=Math.log(o));let f=Math.max(r.fNpx,101),D=(o-s)/(f-1),T=[],t=!1,c=r.fSave.length>3;if(!c||!e&&!O.settings.PreferSavedPoints){r.evalPar||i(r);for(let d=0;d<f;d++){let n=s+d*D,u=0;M&&(n=Math.exp(n));try{u=r.evalPar(n)}catch{t=!0}if(t)break;Number.isFinite(u)&&T.push({x:n,y:u})}}if((t||e||!T.length)&&c){f=r.fSave.length-2,s=r.fSave[f],o=r.fSave[f+1],T=[],D=0;let d=r.$histo&&s===o,n=0;d?(s=r.fSave[--f],n=r.$histo.fXaxis.FindBin(s,0)):D=(o-s)/(f-1);for(let u=0;u<f;++u){let x=d?r.$histo.fXaxis.GetBinCenter(n+u+1):s+D*u;if(a!==l&&(x+2*D<a||x-2*D>l))continue;let P=r.fSave[u];Number.isFinite(P)&&T.push({x,y:P})}}return T}createDummyHisto(){let e=0,r=1,h=0,a=1,l=this.createBins(!0);l?.length&&(e=r=l[0].x,h=a=l[0].y,l.forEach(M=>{e=Math.min(M.x,e),r=Math.max(M.x,r),h=Math.min(M.y,h),a=Math.max(M.y,a)}),a>0&&(a*=1+O.gStyle.fHistTopMargin),h<0&&(h*=1+O.gStyle.fHistTopMargin));let s=(0,O.create)("TH1I"),o=this.getObject();return s.fName=o.fName+"_hist",s.fTitle=o.fTitle,s.fXaxis.fXmin=e,s.fXaxis.fXmax=r,s.fYaxis.fXmin=h,s.fYaxis.fXmax=a,s.fMinimum=o.fMinimum,s.fMaximum=o.fMaximum,s}updateObject(e){if(!this.matchObjectType(e))return!1;let r=this.getObject();return Object.assign(r,e),delete r.evalPar,!0}processTooltipEvent(e){let r=!1;if((!e||!this.bins||e.disabled||!this.bins.length||e.x<this.bins[0].grx||e.x>this.bins[this.bins.length-1].grx)&&(r=!0),r)return this.draw_g&&this.draw_g.select(".tooltip_bin").remove(),null;let l,h=1e5,a=-1;for(let t=0;t<this.bins.length;++t){l=this.bins[t];let c=Math.abs(l.grx-e.x);c<h&&(h=c,a=t)}l=this.bins[a];let s=this.draw_g.select(".tooltip_bin"),o=this.lineatt.width+3;s.empty()&&(s=this.draw_g.append("svg:circle").attr("class","tooltip_bin").style("pointer-events","none").attr("r",o).call(this.lineatt.func).call(this.fillatt.func));let M={name:this.getObject().fName,title:this.getObject().fTitle,x:l.grx,y:l.gry,color1:this.lineatt.color,color2:this.fillatt.getFillColor(),lines:[],exact:Math.abs(l.grx-e.x)<o&&Math.abs(l.gry-e.y)<o};M.changed=s.property("current_bin")!==a,M.menu=M.exact,M.menu_dist=Math.sqrt((l.grx-e.x)**2+(l.gry-e.y)**2),M.changed&&s.attr("cx",l.grx).attr("cy",l.gry).property("current_bin",a);let f=this.getObjectHint();f&&M.lines.push(f);let T=this.getFramePainter()?.getGrFuncs(this.second_x,this.second_y);return T&&M.lines.push(`x = ${T.axisAsText("x",l.x)} y = ${T.axisAsText("y",l.y)}`),M}redraw(){let e=this.getObject(),r=this.getFramePainter(),h=r.getFrameHeight(),a=this.getMainPainter();this.createG(!0),this.bins=this.createBins(!1),this.createAttLine({attr:e}),this.lineatt.used=!1,this.createAttFill({attr:e,kind:1}),this.fillatt.used=!1;let l=r.getGrFuncs(this.second_x,this.second_y);for(let s=0;s<this.bins.length;++s){let o=this.bins[s];o.grx=l.grx(o.x),o.gry=l.gry(o.y)}if(this.bins.length>2){let s=h;a.hmin&&a.hmin>=0&&(s=Math.round(l.gry(0)),(s>h||s<0)&&(s=h));let o=(0,F.Cq)("bezier",this.bins,s,2);this.lineatt.empty()||this.draw_g.append("svg:path").attr("class","line").attr("d",o.path).style("fill","none").call(this.lineatt.func),this.fillatt.empty()||this.draw_g.append("svg:path").attr("class","area").attr("d",o.path+o.close).call(this.fillatt.func)}}canZoomInside(e,r,h){if("x"!==e)return!1;let a=this.getObject();if(a.fSave.length>0){let l=a.fNpx;return Math.abs(a.fSave[l+1]-a.fSave[l+2])/l<Math.abs(r-h)}return!0}static draw(e,r,h){return(0,C.Z)(function*(){let a=new A(e,r,h),l=new F.pc(h),s=!!a.getMainPainter(),o="AXIS";l.check("SAME"),l.check("X+")&&(o+="X+",a.second_x=s),l.check("Y+")&&(o+="Y+",a.second_y=s),l.check("RX")&&(o+="RX"),l.check("RY")&&(o+="RY");let M=Promise.resolve(!0);return(!s||a.second_x||a.second_y)&&(M=I.f.draw(e,a.createDummyHisto(),o)),M.then(()=>(a.addToPadPrimitives(),a.redraw(),a))})()}}},3761:(j,S,m)=>{m.d(S,{o:()=>I});var C=m(5835),O=m(8241),F=m(629),R=m(1968);class I extends O.TGraphPainter{drawBins3D(i,A){if(!(i.mode3d&&i.grx&&i.gry&&i.grz&&i.toplevel))return console.log("Frame painter missing base 3d elements");if(i.zoom_xmin!=i.zoom_xmax&&(this.options.pos3d<i.zoom_xmin||this.options.pos3d>i.zoom_xmax))return;let _=this.optimizeBins(1e3),e=0,r=_.length-1;if(i.zoom_ymin!=i.zoom_ymax){for(;e<r&&_[e].x<i.zoom_ymin;)e++;for(;e<r&&_[r].x>i.zoom_ymax;)r--}if(e==r)return;let h=[],a=i.grx(this.options.pos3d),l=_[e];for(let o=e+1;o<=r;++o){let M=_[o];h.push(a,i.gry(l.x),i.grz(l.y),a,i.gry(M.x),i.grz(M.y)),l=M}let s=(0,R.Qy)(h,(0,R.rq)(this,A));i.toplevel.add(s),i.render3D(100)}drawAxisHisto(){var i=this;return(0,C.Z)(function*(){return F.TH1Painter.draw(i.getDom(),i.createHistogram(),i.options.Axis)})()}static draw(i,A,_){return(0,C.Z)(function*(){return I._drawGraph(new I(i,A),_)})()}}}}]);
//# sourceMappingURL=common.95cee8198ab89914.js.map