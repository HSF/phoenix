"use strict";(self.webpackChunkphoenix_app=self.webpackChunkphoenix_app||[]).push([[15],{15:(S,P,g)=>{g.r(P),g.d(P,{TWebPaintingPainter:()=>m});var O=g(5835),B=g(3038),M=g(6458);class m extends M.tK{updateObject(e){return!!this.matchObjectType(e)&&(this.assignObject(e),!0)}redraw(){var e=this;return(0,O.Z)(function*(){const r=e.getObject(),n=e.getAxisToSvgFunc();if(!r?.fOper||!n)return;let _,T,a,l=0,i={},h=null,y="none",d="",o=r.fOper.split(";");const c=t=>{if(t!=y&&(h&&(h.attr("d",d),d="",h=null,y="none"),t))switch(y=t,h=e.draw_g.append("svg:path"),t){case"f":h.call(e.fillatt.func);break;case"l":h.call(e.lineatt.func).style("fill","none");break;case"m":h.call(e.markeratt.func)}},b=(t,x)=>{let f=0,s={_typename:"any"};for(let u=0;u<x.length;++u){let p=t.indexOf(":",f+1);s[x[u]]=parseInt(t.slice(f+1,p>f?p:void 0)),f=p}return s},w=t=>{for(;++t<o.length;)switch(_=o[t][0],_){case"z":e.createAttLine({attr:b(o[t],["fLineColor","fLineStyle","fLineWidth"]),force:!0}),c();continue;case"y":e.createAttFill({attr:b(o[t],["fFillColor","fFillStyle"]),force:!0}),c();continue;case"x":e.createAttMarker({attr:b(o[t],["fMarkerColor","fMarkerStyle","fMarkerSize"]),force:!0}),c();continue;case"o":i=b(o[t],["fTextColor","fTextFont","fTextSize","fTextAlign","fTextAngle"]),i.fTextSize<0&&(i.fTextSize*=-.001),c();continue;case"r":case"b":{c("b"==_?"f":"l");let x=n.x(r.fBuf[l++]),f=n.y(r.fBuf[l++]),s=n.x(r.fBuf[l++]),u=n.y(r.fBuf[l++]);d+=`M${x},${f}h${s-x}v${u-f}h${x-s}z`;continue}case"l":case"f":for(c(_),T=parseInt(o[t].slice(1)),a=0;a<T;++a)d+=(a>0?"L":"M")+n.x(r.fBuf[l++])+","+n.y(r.fBuf[l++]);"f"==_&&(d+="Z");continue;case"m":for(c(_),T=parseInt(o[t].slice(1)),e.markeratt.resetPos(),a=0;a<T;++a)d+=e.markeratt.create(n.x(r.fBuf[l++]),n.y(r.fBuf[l++]));continue;case"h":case"t":if(i.fTextSize){c();let x=i.fTextSize>1?i.fTextSize:e.getPadPainter().getPadHeight()*i.fTextSize,f=i.fTextAngle,s=o[t].slice(1),u=e.draw_g.append("svg:g");if(f>=360&&(f-=360*Math.floor(f/360)),e.startTextDrawing(i.fTextFont,x,u),"h"==_){let p="";for(a=0;a<s.length;a+=2)p+=String.fromCharCode(parseInt(s.slice(a,a+2),16));s=p}return e.drawText({align:i.fTextAlign,x:n.x(r.fBuf[l++]),y:n.y(r.fBuf[l++]),rotate:-f,text:s,color:(0,B.Lq)(i.fTextColor),latex:0,draw_g:u}),e.finishTextDrawing(u).then(()=>w(t))}continue;default:console.log(`unsupported operation ${_}`)}return Promise.resolve(!0)};return e.createG(),w(-1).then(()=>(c(),e))})()}static draw(e,r){return(0,O.Z)(function*(){let n=new m(e,r);return n.addToPadPrimitives(),n.redraw()})()}}}}]);
//# sourceMappingURL=15.9b5753ba71e4088a.js.map